# api documentation for  [loopback (v3.6.0)](http://loopback.io)  [![npm package](https://img.shields.io/npm/v/npmdoc-loopback.svg?style=flat-square)](https://www.npmjs.org/package/npmdoc-loopback) [![travis-ci.org build-status](https://api.travis-ci.org/npmdoc/node-npmdoc-loopback.svg)](https://travis-ci.org/npmdoc/node-npmdoc-loopback)
#### LoopBack: Open Source Framework for Node.js

[![NPM](https://nodei.co/npm/loopback.png?downloads=true)](https://www.npmjs.com/package/loopback)

[![apidoc](https://npmdoc.github.io/node-npmdoc-loopback/build/screenCapture.buildNpmdoc.browser._2Fhome_2Ftravis_2Fbuild_2Fnpmdoc_2Fnode-npmdoc-loopback_2Ftmp_2Fbuild_2Fapidoc.html.png)](https://npmdoc.github.io/node-npmdoc-loopback/build..beta..travis-ci.org/apidoc.html)

![npmPackageListing](https://npmdoc.github.io/node-npmdoc-loopback/build/screenCapture.npmPackageListing.svg)

![npmPackageDependencyTree](https://npmdoc.github.io/node-npmdoc-loopback/build/screenCapture.npmPackageDependencyTree.svg)



# package.json

```json

{
    "browser": {
        "express": "./lib/browser-express.js",
        "./lib/server-app.js": "./lib/browser-express.js",
        "connect": false,
        "nodemailer": false,
        "supertest": false,
        "depd": "loopback-datasource-juggler/lib/browser.depd.js",
        "bcrypt": false
    },
    "bugs": {
        "url": "https://github.com/strongloop/loopback/issues"
    },
    "config": {
        "ci": {
            "debug": "*,-mocha:*,-eslint:*"
        }
    },
    "dependencies": {
        "async": "^2.0.1",
        "bcryptjs": "^2.1.0",
        "bluebird": "^3.1.1",
        "body-parser": "^1.12.0",
        "canonical-json": "0.0.4",
        "debug": "^2.1.2",
        "depd": "^1.0.0",
        "ejs": "^2.3.1",
        "express": "^4.14.0",
        "inflection": "^1.6.0",
        "isemail": "^2.2.1",
        "loopback-connector-remote": "^3.0.0",
        "loopback-datasource-juggler": "^3.0.0",
        "loopback-phase": "^3.0.0",
        "nodemailer": "^2.5.0",
        "nodemailer-stub-transport": "^1.0.0",
        "serve-favicon": "^2.2.0",
        "stable": "^0.1.5",
        "strong-globalize": "^2.7.0",
        "strong-remoting": "^3.0.0",
        "uid2": "0.0.3",
        "underscore.string": "^3.0.3"
    },
    "description": "LoopBack: Open Source Framework for Node.js",
    "devDependencies": {
        "babel-preset-es2015": "^6.22.0",
        "babelify": "^7.3.0",
        "browserify": "^13.1.0",
        "chai": "^3.5.0",
        "cookie-parser": "^1.3.4",
        "coveralls": "^2.11.15",
        "dirty-chai": "^1.2.2",
        "eslint-config-loopback": "^8.0.0",
        "express-session": "^1.14.0",
        "grunt": "^1.0.1",
        "grunt-browserify": "^5.0.0",
        "grunt-cli": "^1.2.0",
        "grunt-contrib-uglify": "^2.0.0",
        "grunt-contrib-watch": "^1.0.0",
        "grunt-eslint": "^19.0.0",
        "grunt-karma": "^2.0.0",
        "grunt-mocha-test": "^0.12.7",
        "karma": "^1.1.2",
        "karma-browserify": "^4.4.2",
        "karma-chrome-launcher": "^1.0.1",
        "karma-es6-shim": "^1.0.0",
        "karma-firefox-launcher": "^1.0.0",
        "karma-html2js-preprocessor": "^1.0.0",
        "karma-junit-reporter": "~1.0.0",
        "karma-mocha": "^1.1.1",
        "karma-phantomjs-launcher": "^1.0.0",
        "karma-script-launcher": "^1.0.0",
        "loopback-boot": "^2.7.0",
        "loopback-context": "^1.0.0",
        "mocha": "^3.0.0",
        "nyc": "^10.1.2",
        "phantomjs-prebuilt": "^2.1.7",
        "sinon": "^1.13.0",
        "sinon-chai": "^2.8.0",
        "strong-error-handler": "^1.0.1",
        "strong-task-emitter": "^0.0.6",
        "supertest": "^3.0.0"
    },
    "directories": {},
    "dist": {
        "shasum": "a114bb4c1ade1952594527e00b8581be08a0735a",
        "tarball": "https://registry.npmjs.org/loopback/-/loopback-3.6.0.tgz"
    },
    "engines": {
        "node": ">=4.0.0"
    },
    "gitHead": "0499d09d6b34aec87f4f05a576851ba3d5ac4dc6",
    "homepage": "http://loopback.io",
    "keywords": [
        "web",
        "restful",
        "rest",
        "api",
        "express",
        "restify",
        "koa",
        "auth",
        "security",
        "oracle",
        "mysql",
        "nosql",
        "mongo",
        "mongodb",
        "sqlserver",
        "mssql",
        "postgres",
        "postgresql",
        "soap",
        "StrongLoop",
        "framework",
        "mobile",
        "mBaaS"
    ],
    "license": "MIT",
    "maintainers": [
        {
            "name": "0candy",
            "email": "ngcandy@ca.ibm.com"
        },
        {
            "name": "amir-61",
            "email": "amirali.jfr61@gmail.com"
        },
        {
            "name": "b-admike",
            "email": "binadmt@hotmail.com"
        },
        {
            "name": "bajtos",
            "email": "mbajtoss@gmail.com"
        },
        {
            "name": "chandadharap",
            "email": "chanda_dharap@yahoo.com"
        },
        {
            "name": "davidcheung",
            "email": "davidcheung@live.ca"
        },
        {
            "name": "hacksparrow",
            "email": "captain@hacksparrow.com"
        },
        {
            "name": "ibmcloud-admin",
            "email": "rmg@ca.ibm.com"
        },
        {
            "name": "jannyhou2016",
            "email": "juehou@ca.ibm.com"
        },
        {
            "name": "kjdelisle",
            "email": "kjdelisle@gmail.com"
        },
        {
            "name": "kraman",
            "email": "kraman@gmail.com"
        },
        {
            "name": "loay",
            "email": "gewily@ca.ibm.com"
        },
        {
            "name": "loopback-admin",
            "email": "enjoyjava@gmail.com"
        },
        {
            "name": "octet",
            "email": "vieuxtech@gmail.com"
        },
        {
            "name": "qpresley",
            "email": "qpresley@ca.ibm.com"
        },
        {
            "name": "rashmihunt",
            "email": "rashmihunt@gmail.com"
        },
        {
            "name": "rfeng",
            "email": "enjoyjava@gmail.com"
        },
        {
            "name": "ritch",
            "email": "skawful@gmail.com"
        },
        {
            "name": "rmg",
            "email": "r.m.graham@gmail.com"
        },
        {
            "name": "setogit",
            "email": "setogit@gmail.com"
        },
        {
            "name": "strongloop",
            "email": "strngops@us.ibm.com"
        },
        {
            "name": "superkhau",
            "email": "superkhau@gmail.com"
        },
        {
            "name": "thegman",
            "email": "gpandya@live.com"
        },
        {
            "name": "tonyf-ibm",
            "email": "tffrench@us.ibm.com"
        }
    ],
    "name": "loopback",
    "optionalDependencies": {},
    "readme": "ERROR: No README data found!",
    "repository": {
        "type": "git",
        "url": "git+https://github.com/strongloop/loopback.git"
    },
    "scripts": {
        "coverage": "nyc report --reporter=text-lcov | coveralls",
        "lint": "grunt eslint",
        "test": "nyc grunt mocha-and-karma"
    },
    "version": "3.6.0"
}
```



# <a name="apidoc.tableOfContents"></a>[table of contents](#apidoc.tableOfContents)

#### [module loopback](#apidoc.module.loopback)
1.  boolean <span class="apidocSignatureSpan">loopback.</span>isBrowser
1.  boolean <span class="apidocSignatureSpan">loopback.</span>isServer
1.  [function <span class="apidocSignatureSpan">loopback.</span>ACL (data, options)](#apidoc.element.loopback.ACL)
1.  [function <span class="apidocSignatureSpan">loopback.</span>ACL.super_ (data, options)](#apidoc.element.loopback.ACL.super_)
1.  [function <span class="apidocSignatureSpan">loopback.</span>AccessToken (data, options)](#apidoc.element.loopback.AccessToken)
1.  [function <span class="apidocSignatureSpan">loopback.</span>Application (data, options)](#apidoc.element.loopback.Application)
1.  [function <span class="apidocSignatureSpan">loopback.</span>Change (data, options)](#apidoc.element.loopback.Change)
1.  [function <span class="apidocSignatureSpan">loopback.</span>Change.Conflict (modelId, SourceModel, TargetModel)](#apidoc.element.loopback.Change.Conflict)
1.  [function <span class="apidocSignatureSpan">loopback.</span>Checkpoint (data, options)](#apidoc.element.loopback.Checkpoint)
1.  [function <span class="apidocSignatureSpan">loopback.</span>Connector (options)](#apidoc.element.loopback.Connector)
1.  [function <span class="apidocSignatureSpan">loopback.</span>DataSource (name, settings, modelBuilder)](#apidoc.element.loopback.DataSource)
1.  [function <span class="apidocSignatureSpan">loopback.</span>DataSource.Any (value)](#apidoc.element.loopback.DataSource.Any)
1.  [function <span class="apidocSignatureSpan">loopback.</span>DataSource.DataAccessObject ()](#apidoc.element.loopback.DataSource.DataAccessObject)
1.  [function <span class="apidocSignatureSpan">loopback.</span>DataSource.JSON (value)](#apidoc.element.loopback.DataSource.JSON)
1.  [function <span class="apidocSignatureSpan">loopback.</span>DataSource.Text (value)](#apidoc.element.loopback.DataSource.Text)
1.  [function <span class="apidocSignatureSpan">loopback.</span>Email (data, options)](#apidoc.element.loopback.Email)
1.  [function <span class="apidocSignatureSpan">loopback.</span>Email.super_ (data, options)](#apidoc.element.loopback.Email.super_)
1.  [function <span class="apidocSignatureSpan">loopback.</span>GeoPoint (data)](#apidoc.element.loopback.GeoPoint)
1.  [function <span class="apidocSignatureSpan">loopback.</span>KeyValueModel (data, options)](#apidoc.element.loopback.KeyValueModel)
1.  [function <span class="apidocSignatureSpan">loopback.</span>Mail (settings)](#apidoc.element.loopback.Mail)
1.  [function <span class="apidocSignatureSpan">loopback.</span>Mail.prototype.DataAccessObject ()](#apidoc.element.loopback.Mail.prototype.DataAccessObject)
1.  [function <span class="apidocSignatureSpan">loopback.</span>Memory ()](#apidoc.element.loopback.Memory)
1.  [function <span class="apidocSignatureSpan">loopback.</span>Remote (settings)](#apidoc.element.loopback.Remote)
1.  [function <span class="apidocSignatureSpan">loopback.</span>Role (data, options)](#apidoc.element.loopback.Role)
1.  [function <span class="apidocSignatureSpan">loopback.</span>RoleMapping (data, options)](#apidoc.element.loopback.RoleMapping)
1.  [function <span class="apidocSignatureSpan">loopback.</span>Route (path)](#apidoc.element.loopback.Route)
1.  [function <span class="apidocSignatureSpan">loopback.</span>Router (options)](#apidoc.element.loopback.Router)
1.  [function <span class="apidocSignatureSpan">loopback.</span>Scope (data, options)](#apidoc.element.loopback.Scope)
1.  [function <span class="apidocSignatureSpan">loopback.</span>User (data, options)](#apidoc.element.loopback.User)
1.  [function <span class="apidocSignatureSpan">loopback.</span>ValidationError (obj)](#apidoc.element.loopback.ValidationError)
1.  [function <span class="apidocSignatureSpan">loopback.</span>ValidationError.super_ ()](#apidoc.element.loopback.ValidationError.super_)
1.  [function <span class="apidocSignatureSpan">loopback.</span>configureModel (ModelCtor, config)](#apidoc.element.loopback.configureModel)
1.  [function <span class="apidocSignatureSpan">loopback.</span>context ()](#apidoc.element.loopback.context)
1.  [function <span class="apidocSignatureSpan">loopback.</span>createContext (scopeName)](#apidoc.element.loopback.createContext)
1.  [function <span class="apidocSignatureSpan">loopback.</span>createDataSource (name, options)](#apidoc.element.loopback.createDataSource)
1.  [function <span class="apidocSignatureSpan">loopback.</span>createModel (name, properties, options)](#apidoc.element.loopback.createModel)
1.  [function <span class="apidocSignatureSpan">loopback.</span>errorHandler (options)](#apidoc.element.loopback.errorHandler)
1.  [function <span class="apidocSignatureSpan">loopback.</span>favicon (icon, options)](#apidoc.element.loopback.favicon)
1.  [function <span class="apidocSignatureSpan">loopback.</span>findModel (modelName)](#apidoc.element.loopback.findModel)
1.  [function <span class="apidocSignatureSpan">loopback.</span>getCurrentContext ()](#apidoc.element.loopback.getCurrentContext)
1.  [function <span class="apidocSignatureSpan">loopback.</span>getModel (modelName)](#apidoc.element.loopback.getModel)
1.  [function <span class="apidocSignatureSpan">loopback.</span>getModelByType (modelType)](#apidoc.element.loopback.getModelByType)
1.  [function <span class="apidocSignatureSpan">loopback.</span>memory (name)](#apidoc.element.loopback.memory)
1.  [function <span class="apidocSignatureSpan">loopback.</span>query (options)](#apidoc.element.loopback.query)
1.  [function <span class="apidocSignatureSpan">loopback.</span>remoteMethod (fn, options)](#apidoc.element.loopback.remoteMethod)
1.  [function <span class="apidocSignatureSpan">loopback.</span>rest ()](#apidoc.element.loopback.rest)
1.  [function <span class="apidocSignatureSpan">loopback.</span>runInContext (fn)](#apidoc.element.loopback.runInContext)
1.  [function <span class="apidocSignatureSpan">loopback.</span>static (root, options)](#apidoc.element.loopback.static)
1.  [function <span class="apidocSignatureSpan">loopback.</span>status ()](#apidoc.element.loopback.status)
1.  [function <span class="apidocSignatureSpan">loopback.</span>template (file)](#apidoc.element.loopback.template)
1.  [function <span class="apidocSignatureSpan">loopback.</span>token (options)](#apidoc.element.loopback.token)
1.  [function <span class="apidocSignatureSpan">loopback.</span>urlNotFound ()](#apidoc.element.loopback.urlNotFound)
1.  object <span class="apidocSignatureSpan">loopback.</span>ACL.prototype
1.  object <span class="apidocSignatureSpan">loopback.</span>ACL.settings
1.  object <span class="apidocSignatureSpan">loopback.</span>ACL.sharedClass
1.  object <span class="apidocSignatureSpan">loopback.</span>ACL.super_.prototype
1.  object <span class="apidocSignatureSpan">loopback.</span>AccessToken.prototype
1.  object <span class="apidocSignatureSpan">loopback.</span>AccessToken.settings
1.  object <span class="apidocSignatureSpan">loopback.</span>AccessToken.sharedClass
1.  object <span class="apidocSignatureSpan">loopback.</span>Application.prototype
1.  object <span class="apidocSignatureSpan">loopback.</span>Application.settings
1.  object <span class="apidocSignatureSpan">loopback.</span>Application.sharedClass
1.  object <span class="apidocSignatureSpan">loopback.</span>Change.Conflict.prototype
1.  object <span class="apidocSignatureSpan">loopback.</span>Change.getter
1.  object <span class="apidocSignatureSpan">loopback.</span>Change.prototype
1.  object <span class="apidocSignatureSpan">loopback.</span>Change.settings
1.  object <span class="apidocSignatureSpan">loopback.</span>Change.sharedClass
1.  object <span class="apidocSignatureSpan">loopback.</span>Checkpoint.settings
1.  object <span class="apidocSignatureSpan">loopback.</span>Checkpoint.sharedClass
1.  object <span class="apidocSignatureSpan">loopback.</span>Connector.prototype
1.  object <span class="apidocSignatureSpan">loopback.</span>DataSource.Any.prototype
1.  object <span class="apidocSignatureSpan">loopback.</span>DataSource.DataAccessObject.Transaction.prototype
1.  object <span class="apidocSignatureSpan">loopback.</span>DataSource.DataAccessObject.prototype
1.  object <span class="apidocSignatureSpan">loopback.</span>DataSource.JSON.prototype
1.  object <span class="apidocSignatureSpan">loopback.</span>DataSource.Text.prototype
1.  object <span class="apidocSignatureSpan">loopback.</span>DataSource.prototype
1.  object <span class="apidocSignatureSpan">loopback.</span>Email.prototype
1.  object <span class="apidocSignatureSpan">loopback.</span>Email.sharedClass
1.  object <span class="apidocSignatureSpan">loopback.</span>Email.super_.super_.prototype
1.  object <span class="apidocSignatureSpan">loopback.</span>GeoPoint.prototype
1.  object <span class="apidocSignatureSpan">loopback.</span>KeyValueModel.sharedClass
1.  object <span class="apidocSignatureSpan">loopback.</span>Mail.mailer
1.  object <span class="apidocSignatureSpan">loopback.</span>Mail.prototype
1.  object <span class="apidocSignatureSpan">loopback.</span>Mail.prototype.DataAccessObject.prototype
1.  object <span class="apidocSignatureSpan">loopback.</span>Remote.prototype
1.  object <span class="apidocSignatureSpan">loopback.</span>Role.resolvers
1.  object <span class="apidocSignatureSpan">loopback.</span>Role.settings
1.  object <span class="apidocSignatureSpan">loopback.</span>Role.sharedClass
1.  object <span class="apidocSignatureSpan">loopback.</span>RoleMapping.prototype
1.  object <span class="apidocSignatureSpan">loopback.</span>RoleMapping.settings
1.  object <span class="apidocSignatureSpan">loopback.</span>RoleMapping.sharedClass
1.  object <span class="apidocSignatureSpan">loopback.</span>Route.prototype
1.  object <span class="apidocSignatureSpan">loopback.</span>Scope.settings
1.  object <span class="apidocSignatureSpan">loopback.</span>Scope.sharedClass
1.  object <span class="apidocSignatureSpan">loopback.</span>User.prototype
1.  object <span class="apidocSignatureSpan">loopback.</span>User.setter
1.  object <span class="apidocSignatureSpan">loopback.</span>User.settings
1.  object <span class="apidocSignatureSpan">loopback.</span>User.sharedClass
1.  object <span class="apidocSignatureSpan">loopback.</span>access_context
1.  object <span class="apidocSignatureSpan">loopback.</span>application
1.  object <span class="apidocSignatureSpan">loopback.</span>registry
1.  object <span class="apidocSignatureSpan">loopback.</span>registry.prototype
1.  object <span class="apidocSignatureSpan">loopback.</span>request
1.  object <span class="apidocSignatureSpan">loopback.</span>response
1.  object <span class="apidocSignatureSpan">loopback.</span>utils
1.  string <span class="apidocSignatureSpan">loopback.</span>faviconFile
1.  string <span class="apidocSignatureSpan">loopback.</span>version

#### [module loopback.ACL](#apidoc.module.loopback.ACL)
1.  [function <span class="apidocSignatureSpan">loopback.</span>ACL (data, options)](#apidoc.element.loopback.ACL.ACL)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.</span>ValidationError (obj)](#apidoc.element.loopback.ACL.ValidationError)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.</span>_ACL (ACL)](#apidoc.element.loopback.ACL._ACL)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.</span>_defineChangeModel ()](#apidoc.element.loopback.ACL._defineChangeModel)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.</span>_getAccessTypeForMethod (method)](#apidoc.element.loopback.ACL._getAccessTypeForMethod)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.</span>_notifyBaseObservers (operation, context, callback)](#apidoc.element.loopback.ACL._notifyBaseObservers)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.</span>_runWhenAttachedToApp (fn)](#apidoc.element.loopback.ACL._runWhenAttachedToApp)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.</span>addListener ()](#apidoc.element.loopback.ACL.addListener)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.</span>afterRemote (name, fn)](#apidoc.element.loopback.ACL.afterRemote)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.</span>afterRemoteError (name, fn)](#apidoc.element.loopback.ACL.afterRemoteError)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.</span>attachTo (dataSource)](#apidoc.element.loopback.ACL.attachTo)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.</span>beforeRemote (name, fn)](#apidoc.element.loopback.ACL.beforeRemote)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.</span>belongsToRemoting (relationName, relation, define)](#apidoc.element.loopback.ACL.belongsToRemoting)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.</span>bulkUpdate (updates, options, callback)](#apidoc.element.loopback.ACL.bulkUpdate)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.</span>changes (since, filter, callback)](#apidoc.element.loopback.ACL.changes)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.</span>checkAccess (token, modelId, sharedMethod, ctx, callback)](#apidoc.element.loopback.ACL.checkAccess)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.</span>checkAccessForContext (context, callback)](#apidoc.element.loopback.ACL.checkAccessForContext)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.</span>checkAccessForToken (token, model, modelId, method, callback)](#apidoc.element.loopback.ACL.checkAccessForToken)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.</span>checkPermission (principalType, principalId, model, property, accessType, callback)](#apidoc.element.loopback.ACL.checkPermission)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.</span>checkpoint (cb)](#apidoc.element.loopback.ACL.checkpoint)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.</span>clearObservers (operation)](#apidoc.element.loopback.ACL.clearObservers)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.</span>count (where, cb)](#apidoc.element.loopback.ACL.count)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.</span>create (data, callback)](#apidoc.element.loopback.ACL.create)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.</span>createChangeFilter (since, modelFilter)](#apidoc.element.loopback.ACL.createChangeFilter)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.</span>createChangeStream (options, cb)](#apidoc.element.loopback.ACL.createChangeStream)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.</span>createOptionsFromRemotingContext (ctx)](#apidoc.element.loopback.ACL.createOptionsFromRemotingContext)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.</span>createUpdates (deltas, cb)](#apidoc.element.loopback.ACL.createUpdates)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.</span>currentCheckpoint (cb)](#apidoc.element.loopback.ACL.currentCheckpoint)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.</span>defineProperty (prop, params)](#apidoc.element.loopback.ACL.defineProperty)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.</span>deleteAll (where, cb)](#apidoc.element.loopback.ACL.deleteAll)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.</span>deleteById (id, cb)](#apidoc.element.loopback.ACL.deleteById)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.</span>destroyAll (where, cb)](#apidoc.element.loopback.ACL.destroyAll)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.</span>destroyById (id, cb)](#apidoc.element.loopback.ACL.destroyById)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.</span>diff (since, remoteChanges, callback)](#apidoc.element.loopback.ACL.diff)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.</span>disableRemoteMethod (name, isStatic)](#apidoc.element.loopback.ACL.disableRemoteMethod)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.</span>disableRemoteMethodByName (name)](#apidoc.element.loopback.ACL.disableRemoteMethodByName)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.</span>emit ()](#apidoc.element.loopback.ACL.emit)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.</span>enableChangeTracking ()](#apidoc.element.loopback.ACL.enableChangeTracking)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.</span>eventNames ()](#apidoc.element.loopback.ACL.eventNames)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.</span>exists (id, cb)](#apidoc.element.loopback.ACL.exists)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.</span>extend (className, subclassProperties, subclassSettings)](#apidoc.element.loopback.ACL.extend)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.</span>find (filter, cb)](#apidoc.element.loopback.ACL.find)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.</span>findById (id, filter, cb)](#apidoc.element.loopback.ACL.findById)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.</span>findLastChange (id, cb)](#apidoc.element.loopback.ACL.findLastChange)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.</span>findOne (filter, cb)](#apidoc.element.loopback.ACL.findOne)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.</span>findOrCreate (query, data, callback)](#apidoc.element.loopback.ACL.findOrCreate)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.</span>forEachProperty (cb)](#apidoc.element.loopback.ACL.forEachProperty)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.</span>getApp (callback)](#apidoc.element.loopback.ACL.getApp)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.</span>getChangeModel ()](#apidoc.element.loopback.ACL.getChangeModel)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.</span>getDataSource ()](#apidoc.element.loopback.ACL.getDataSource)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.</span>getIdName ()](#apidoc.element.loopback.ACL.getIdName)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.</span>getMatchingScore (rule, req)](#apidoc.element.loopback.ACL.getMatchingScore)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.</span>getMaxListeners ()](#apidoc.element.loopback.ACL.getMaxListeners)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.</span>getPropertyType (propName)](#apidoc.element.loopback.ACL.getPropertyType)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.</span>getSourceId (cb)](#apidoc.element.loopback.ACL.getSourceId)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.</span>getStaticACLs (model, property)](#apidoc.element.loopback.ACL.getStaticACLs)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.</span>handleChangeError (err, operationName)](#apidoc.element.loopback.ACL.handleChangeError)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.</span>hasManyRemoting (relationName, relation, define)](#apidoc.element.loopback.ACL.hasManyRemoting)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.</span>hasOneRemoting (relationName, relation, define)](#apidoc.element.loopback.ACL.hasOneRemoting)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.</span>isAllowed (permission, defaultPermission)](#apidoc.element.loopback.ACL.isAllowed)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.</span>isHiddenProperty (propertyName)](#apidoc.element.loopback.ACL.isHiddenProperty)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.</span>isMappedToRole (principalType, principalId, role, cb)](#apidoc.element.loopback.ACL.isMappedToRole)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.</span>isProtectedProperty (propertyName)](#apidoc.element.loopback.ACL.isProtectedProperty)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.</span>listenerCount ()](#apidoc.element.loopback.ACL.listenerCount)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.</span>listeners ()](#apidoc.element.loopback.ACL.listeners)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.</span>mixin (anotherClass, options)](#apidoc.element.loopback.ACL.mixin)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.</span>nestRemoting (relationName, options, filterCallback)](#apidoc.element.loopback.ACL.nestRemoting)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.</span>notifyObserversAround (operation, context, fn, callback)](#apidoc.element.loopback.ACL.notifyObserversAround)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.</span>notifyObserversOf (operation, context, callback)](#apidoc.element.loopback.ACL.notifyObserversOf)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.</span>observe (operation, listener)](#apidoc.element.loopback.ACL.observe)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.</span>on ()](#apidoc.element.loopback.ACL.on)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.</span>once ()](#apidoc.element.loopback.ACL.once)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.</span>patchOrCreate (data, callback)](#apidoc.element.loopback.ACL.patchOrCreate)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.</span>patchOrCreateWithWhere (where, data, callback)](#apidoc.element.loopback.ACL.patchOrCreateWithWhere)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.</span>prependListener ()](#apidoc.element.loopback.ACL.prependListener)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.</span>prependOnceListener ()](#apidoc.element.loopback.ACL.prependOnceListener)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.</span>rectifyAllChanges (callback)](#apidoc.element.loopback.ACL.rectifyAllChanges)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.</span>rectifyChange (id, callback)](#apidoc.element.loopback.ACL.rectifyChange)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.</span>registerProperty (propertyName)](#apidoc.element.loopback.ACL.registerProperty)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.</span>remoteMethod (name, options)](#apidoc.element.loopback.ACL.remoteMethod)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.</span>remove (where, cb)](#apidoc.element.loopback.ACL.remove)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.</span>removeAllListeners ()](#apidoc.element.loopback.ACL.removeAllListeners)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.</span>removeById (id, cb)](#apidoc.element.loopback.ACL.removeById)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.</span>removeListener ()](#apidoc.element.loopback.ACL.removeListener)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.</span>removeObserver (operation, listener)](#apidoc.element.loopback.ACL.removeObserver)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.</span>replaceById (id, data, cb)](#apidoc.element.loopback.ACL.replaceById)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.</span>replaceOrCreate (data, callback)](#apidoc.element.loopback.ACL.replaceOrCreate)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.</span>replicate (since, targetModel, options, callback)](#apidoc.element.loopback.ACL.replicate)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.</span>resolvePermission (acls, req)](#apidoc.element.loopback.ACL.resolvePermission)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.</span>resolvePrincipal (type, id, cb)](#apidoc.element.loopback.ACL.resolvePrincipal)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.</span>resolveRelatedModels ()](#apidoc.element.loopback.ACL.resolveRelatedModels)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.</span>scopeRemoting (scopeName, scope, define)](#apidoc.element.loopback.ACL.scopeRemoting)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.</span>setMaxListeners ()](#apidoc.element.loopback.ACL.setMaxListeners)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.</span>setup ()](#apidoc.element.loopback.ACL.setup)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.</span>setupRemoting ()](#apidoc.element.loopback.ACL.setupRemoting)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.</span>sharedCtor (data, id, options, fn)](#apidoc.element.loopback.ACL.sharedCtor)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.</span>super_ (data, options)](#apidoc.element.loopback.ACL.super_)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.</span>update (where, data, cb)](#apidoc.element.loopback.ACL.update)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.</span>updateAll (where, data, cb)](#apidoc.element.loopback.ACL.updateAll)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.</span>updateLastChange (id, data, cb)](#apidoc.element.loopback.ACL.updateLastChange)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.</span>updateOrCreate (data, callback)](#apidoc.element.loopback.ACL.updateOrCreate)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.</span>upsert (data, callback)](#apidoc.element.loopback.ACL.upsert)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.</span>upsertWithWhere (where, data, callback)](#apidoc.element.loopback.ACL.upsertWithWhere)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.</span>validate ()](#apidoc.element.loopback.ACL.validate)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.</span>validateAsync ()](#apidoc.element.loopback.ACL.validateAsync)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.</span>validatesAbsenceOf ()](#apidoc.element.loopback.ACL.validatesAbsenceOf)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.</span>validatesExclusionOf ()](#apidoc.element.loopback.ACL.validatesExclusionOf)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.</span>validatesFormatOf ()](#apidoc.element.loopback.ACL.validatesFormatOf)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.</span>validatesInclusionOf ()](#apidoc.element.loopback.ACL.validatesInclusionOf)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.</span>validatesLengthOf ()](#apidoc.element.loopback.ACL.validatesLengthOf)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.</span>validatesNumericalityOf ()](#apidoc.element.loopback.ACL.validatesNumericalityOf)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.</span>validatesPresenceOf ()](#apidoc.element.loopback.ACL.validatesPresenceOf)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.</span>validatesUniquenessOf ()](#apidoc.element.loopback.ACL.validatesUniquenessOf)
1.  object <span class="apidocSignatureSpan">loopback.ACL.</span>afterCreate
1.  object <span class="apidocSignatureSpan">loopback.ACL.</span>afterDestroy
1.  object <span class="apidocSignatureSpan">loopback.ACL.</span>afterInitialize
1.  object <span class="apidocSignatureSpan">loopback.ACL.</span>afterSave
1.  object <span class="apidocSignatureSpan">loopback.ACL.</span>afterUpdate
1.  object <span class="apidocSignatureSpan">loopback.ACL.</span>afterValidate
1.  object <span class="apidocSignatureSpan">loopback.ACL.</span>beforeCreate
1.  object <span class="apidocSignatureSpan">loopback.ACL.</span>beforeDestroy
1.  object <span class="apidocSignatureSpan">loopback.ACL.</span>beforeSave
1.  object <span class="apidocSignatureSpan">loopback.ACL.</span>beforeUpdate
1.  object <span class="apidocSignatureSpan">loopback.ACL.</span>beforeValidate
1.  object <span class="apidocSignatureSpan">loopback.ACL.</span>definition
1.  object <span class="apidocSignatureSpan">loopback.ACL.</span>getter
1.  object <span class="apidocSignatureSpan">loopback.ACL.</span>registry
1.  object <span class="apidocSignatureSpan">loopback.ACL.</span>setter
1.  object <span class="apidocSignatureSpan">loopback.ACL.</span>settings
1.  object <span class="apidocSignatureSpan">loopback.ACL.</span>sharedClass
1.  string <span class="apidocSignatureSpan">loopback.ACL.</span>ALARM
1.  string <span class="apidocSignatureSpan">loopback.ACL.</span>ALL
1.  string <span class="apidocSignatureSpan">loopback.ACL.</span>ALLOW
1.  string <span class="apidocSignatureSpan">loopback.ACL.</span>APP
1.  string <span class="apidocSignatureSpan">loopback.ACL.</span>APPLICATION
1.  string <span class="apidocSignatureSpan">loopback.ACL.</span>AUDIT
1.  string <span class="apidocSignatureSpan">loopback.ACL.</span>DEFAULT
1.  string <span class="apidocSignatureSpan">loopback.ACL.</span>DENY
1.  string <span class="apidocSignatureSpan">loopback.ACL.</span>EXECUTE
1.  string <span class="apidocSignatureSpan">loopback.ACL.</span>READ
1.  string <span class="apidocSignatureSpan">loopback.ACL.</span>REPLICATE
1.  string <span class="apidocSignatureSpan">loopback.ACL.</span>ROLE
1.  string <span class="apidocSignatureSpan">loopback.ACL.</span>SCOPE
1.  string <span class="apidocSignatureSpan">loopback.ACL.</span>USER
1.  string <span class="apidocSignatureSpan">loopback.ACL.</span>WRITE

#### [module loopback.ACL.prototype](#apidoc.module.loopback.ACL.prototype)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.prototype.</span>debug ()](#apidoc.element.loopback.ACL.prototype.debug)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.prototype.</span>isAllowed (defaultPermission)](#apidoc.element.loopback.ACL.prototype.isAllowed)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.prototype.</span>score (req)](#apidoc.element.loopback.ACL.prototype.score)

#### [module loopback.ACL.settings](#apidoc.module.loopback.ACL.settings)
1.  boolean <span class="apidocSignatureSpan">loopback.ACL.settings.</span>replaceOnPUT
1.  boolean <span class="apidocSignatureSpan">loopback.ACL.settings.</span>strict
1.  [function <span class="apidocSignatureSpan">loopback.ACL.settings.</span>base (data, options)](#apidoc.element.loopback.ACL.settings.base)

#### [module loopback.ACL.sharedClass](#apidoc.module.loopback.ACL.sharedClass)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.sharedClass.</span>ctor (data, options)](#apidoc.element.loopback.ACL.sharedClass.ctor)
1.  object <span class="apidocSignatureSpan">loopback.ACL.sharedClass.</span>_disabledMethods
1.  object <span class="apidocSignatureSpan">loopback.ACL.sharedClass.</span>_methods
1.  object <span class="apidocSignatureSpan">loopback.ACL.sharedClass.</span>_resolvers
1.  object <span class="apidocSignatureSpan">loopback.ACL.sharedClass.</span>http
1.  object <span class="apidocSignatureSpan">loopback.ACL.sharedClass.</span>sharedCtor
1.  string <span class="apidocSignatureSpan">loopback.ACL.sharedClass.</span>name

#### [module loopback.ACL.super_](#apidoc.module.loopback.ACL.super_)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.</span>super_ (data, options)](#apidoc.element.loopback.ACL.super_.super_)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>ValidationError (obj)](#apidoc.element.loopback.ACL.super_.ValidationError)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>_ACL (ACL)](#apidoc.element.loopback.ACL.super_._ACL)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>_defineChangeModel ()](#apidoc.element.loopback.ACL.super_._defineChangeModel)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>_getAccessTypeForMethod (method)](#apidoc.element.loopback.ACL.super_._getAccessTypeForMethod)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>_notifyBaseObservers (operation, context, callback)](#apidoc.element.loopback.ACL.super_._notifyBaseObservers)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>_runWhenAttachedToApp (fn)](#apidoc.element.loopback.ACL.super_._runWhenAttachedToApp)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>addListener ()](#apidoc.element.loopback.ACL.super_.addListener)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>afterRemote (name, fn)](#apidoc.element.loopback.ACL.super_.afterRemote)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>afterRemoteError (name, fn)](#apidoc.element.loopback.ACL.super_.afterRemoteError)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>attachTo (dataSource)](#apidoc.element.loopback.ACL.super_.attachTo)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>beforeRemote (name, fn)](#apidoc.element.loopback.ACL.super_.beforeRemote)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>belongsToRemoting (relationName, relation, define)](#apidoc.element.loopback.ACL.super_.belongsToRemoting)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>bulkUpdate (updates, options, callback)](#apidoc.element.loopback.ACL.super_.bulkUpdate)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>changes (since, filter, callback)](#apidoc.element.loopback.ACL.super_.changes)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>checkAccess (token, modelId, sharedMethod, ctx, callback)](#apidoc.element.loopback.ACL.super_.checkAccess)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>checkpoint (cb)](#apidoc.element.loopback.ACL.super_.checkpoint)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>clearObservers (operation)](#apidoc.element.loopback.ACL.super_.clearObservers)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>count (where, cb)](#apidoc.element.loopback.ACL.super_.count)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>create (data, callback)](#apidoc.element.loopback.ACL.super_.create)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>createChangeFilter (since, modelFilter)](#apidoc.element.loopback.ACL.super_.createChangeFilter)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>createChangeStream (options, cb)](#apidoc.element.loopback.ACL.super_.createChangeStream)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>createOptionsFromRemotingContext (ctx)](#apidoc.element.loopback.ACL.super_.createOptionsFromRemotingContext)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>createUpdates (deltas, cb)](#apidoc.element.loopback.ACL.super_.createUpdates)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>currentCheckpoint (cb)](#apidoc.element.loopback.ACL.super_.currentCheckpoint)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>defineProperty (prop, params)](#apidoc.element.loopback.ACL.super_.defineProperty)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>deleteAll (where, cb)](#apidoc.element.loopback.ACL.super_.deleteAll)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>deleteById (id, cb)](#apidoc.element.loopback.ACL.super_.deleteById)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>destroyAll (where, cb)](#apidoc.element.loopback.ACL.super_.destroyAll)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>destroyById (id, cb)](#apidoc.element.loopback.ACL.super_.destroyById)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>diff (since, remoteChanges, callback)](#apidoc.element.loopback.ACL.super_.diff)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>disableRemoteMethod (name, isStatic)](#apidoc.element.loopback.ACL.super_.disableRemoteMethod)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>disableRemoteMethodByName (name)](#apidoc.element.loopback.ACL.super_.disableRemoteMethodByName)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>emit ()](#apidoc.element.loopback.ACL.super_.emit)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>enableChangeTracking ()](#apidoc.element.loopback.ACL.super_.enableChangeTracking)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>eventNames ()](#apidoc.element.loopback.ACL.super_.eventNames)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>exists (id, cb)](#apidoc.element.loopback.ACL.super_.exists)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>extend (className, subclassProperties, subclassSettings)](#apidoc.element.loopback.ACL.super_.extend)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>find (filter, cb)](#apidoc.element.loopback.ACL.super_.find)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>findById (id, filter, cb)](#apidoc.element.loopback.ACL.super_.findById)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>findLastChange (id, cb)](#apidoc.element.loopback.ACL.super_.findLastChange)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>findOne (filter, cb)](#apidoc.element.loopback.ACL.super_.findOne)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>findOrCreate (query, data, callback)](#apidoc.element.loopback.ACL.super_.findOrCreate)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>forEachProperty (cb)](#apidoc.element.loopback.ACL.super_.forEachProperty)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>getApp (callback)](#apidoc.element.loopback.ACL.super_.getApp)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>getChangeModel ()](#apidoc.element.loopback.ACL.super_.getChangeModel)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>getDataSource ()](#apidoc.element.loopback.ACL.super_.getDataSource)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>getIdName ()](#apidoc.element.loopback.ACL.super_.getIdName)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>getMaxListeners ()](#apidoc.element.loopback.ACL.super_.getMaxListeners)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>getPropertyType (propName)](#apidoc.element.loopback.ACL.super_.getPropertyType)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>getSourceId (cb)](#apidoc.element.loopback.ACL.super_.getSourceId)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>handleChangeError (err, operationName)](#apidoc.element.loopback.ACL.super_.handleChangeError)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>hasManyRemoting (relationName, relation, define)](#apidoc.element.loopback.ACL.super_.hasManyRemoting)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>hasOneRemoting (relationName, relation, define)](#apidoc.element.loopback.ACL.super_.hasOneRemoting)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>isHiddenProperty (propertyName)](#apidoc.element.loopback.ACL.super_.isHiddenProperty)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>isProtectedProperty (propertyName)](#apidoc.element.loopback.ACL.super_.isProtectedProperty)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>listenerCount ()](#apidoc.element.loopback.ACL.super_.listenerCount)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>listeners ()](#apidoc.element.loopback.ACL.super_.listeners)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>mixin (anotherClass, options)](#apidoc.element.loopback.ACL.super_.mixin)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>nestRemoting (relationName, options, filterCallback)](#apidoc.element.loopback.ACL.super_.nestRemoting)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>notifyObserversAround (operation, context, fn, callback)](#apidoc.element.loopback.ACL.super_.notifyObserversAround)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>notifyObserversOf (operation, context, callback)](#apidoc.element.loopback.ACL.super_.notifyObserversOf)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>observe (operation, listener)](#apidoc.element.loopback.ACL.super_.observe)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>on ()](#apidoc.element.loopback.ACL.super_.on)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>once ()](#apidoc.element.loopback.ACL.super_.once)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>patchOrCreate (data, callback)](#apidoc.element.loopback.ACL.super_.patchOrCreate)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>patchOrCreateWithWhere (where, data, callback)](#apidoc.element.loopback.ACL.super_.patchOrCreateWithWhere)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>prependListener ()](#apidoc.element.loopback.ACL.super_.prependListener)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>prependOnceListener ()](#apidoc.element.loopback.ACL.super_.prependOnceListener)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>rectifyAllChanges (callback)](#apidoc.element.loopback.ACL.super_.rectifyAllChanges)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>rectifyChange (id, callback)](#apidoc.element.loopback.ACL.super_.rectifyChange)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>registerProperty (propertyName)](#apidoc.element.loopback.ACL.super_.registerProperty)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>remoteMethod (name, options)](#apidoc.element.loopback.ACL.super_.remoteMethod)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>remove (where, cb)](#apidoc.element.loopback.ACL.super_.remove)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>removeAllListeners ()](#apidoc.element.loopback.ACL.super_.removeAllListeners)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>removeById (id, cb)](#apidoc.element.loopback.ACL.super_.removeById)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>removeListener ()](#apidoc.element.loopback.ACL.super_.removeListener)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>removeObserver (operation, listener)](#apidoc.element.loopback.ACL.super_.removeObserver)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>replaceById (id, data, cb)](#apidoc.element.loopback.ACL.super_.replaceById)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>replaceOrCreate (data, callback)](#apidoc.element.loopback.ACL.super_.replaceOrCreate)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>replicate (since, targetModel, options, callback)](#apidoc.element.loopback.ACL.super_.replicate)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>scopeRemoting (scopeName, scope, define)](#apidoc.element.loopback.ACL.super_.scopeRemoting)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>setMaxListeners ()](#apidoc.element.loopback.ACL.super_.setMaxListeners)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>setup ()](#apidoc.element.loopback.ACL.super_.setup)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>setupRemoting ()](#apidoc.element.loopback.ACL.super_.setupRemoting)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>sharedCtor (data, id, options, fn)](#apidoc.element.loopback.ACL.super_.sharedCtor)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>update (where, data, cb)](#apidoc.element.loopback.ACL.super_.update)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>updateAll (where, data, cb)](#apidoc.element.loopback.ACL.super_.updateAll)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>updateLastChange (id, data, cb)](#apidoc.element.loopback.ACL.super_.updateLastChange)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>updateOrCreate (data, callback)](#apidoc.element.loopback.ACL.super_.updateOrCreate)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>upsert (data, callback)](#apidoc.element.loopback.ACL.super_.upsert)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>upsertWithWhere (where, data, callback)](#apidoc.element.loopback.ACL.super_.upsertWithWhere)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>validate ()](#apidoc.element.loopback.ACL.super_.validate)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>validateAsync ()](#apidoc.element.loopback.ACL.super_.validateAsync)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>validatesAbsenceOf ()](#apidoc.element.loopback.ACL.super_.validatesAbsenceOf)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>validatesExclusionOf ()](#apidoc.element.loopback.ACL.super_.validatesExclusionOf)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>validatesFormatOf ()](#apidoc.element.loopback.ACL.super_.validatesFormatOf)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>validatesInclusionOf ()](#apidoc.element.loopback.ACL.super_.validatesInclusionOf)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>validatesLengthOf ()](#apidoc.element.loopback.ACL.super_.validatesLengthOf)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>validatesNumericalityOf ()](#apidoc.element.loopback.ACL.super_.validatesNumericalityOf)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>validatesPresenceOf ()](#apidoc.element.loopback.ACL.super_.validatesPresenceOf)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>validatesUniquenessOf ()](#apidoc.element.loopback.ACL.super_.validatesUniquenessOf)
1.  object <span class="apidocSignatureSpan">loopback.ACL.super_.</span>afterCreate
1.  object <span class="apidocSignatureSpan">loopback.ACL.super_.</span>afterDestroy
1.  object <span class="apidocSignatureSpan">loopback.ACL.super_.</span>afterInitialize
1.  object <span class="apidocSignatureSpan">loopback.ACL.super_.</span>afterSave
1.  object <span class="apidocSignatureSpan">loopback.ACL.super_.</span>afterUpdate
1.  object <span class="apidocSignatureSpan">loopback.ACL.super_.</span>afterValidate
1.  object <span class="apidocSignatureSpan">loopback.ACL.super_.</span>beforeCreate
1.  object <span class="apidocSignatureSpan">loopback.ACL.super_.</span>beforeDestroy
1.  object <span class="apidocSignatureSpan">loopback.ACL.super_.</span>beforeSave
1.  object <span class="apidocSignatureSpan">loopback.ACL.super_.</span>beforeUpdate
1.  object <span class="apidocSignatureSpan">loopback.ACL.super_.</span>beforeValidate
1.  object <span class="apidocSignatureSpan">loopback.ACL.super_.</span>definition
1.  object <span class="apidocSignatureSpan">loopback.ACL.super_.</span>getter
1.  object <span class="apidocSignatureSpan">loopback.ACL.super_.</span>registry
1.  object <span class="apidocSignatureSpan">loopback.ACL.super_.</span>setter
1.  object <span class="apidocSignatureSpan">loopback.ACL.super_.</span>settings
1.  object <span class="apidocSignatureSpan">loopback.ACL.super_.</span>sharedClass

#### [module loopback.ACL.super_.prototype](#apidoc.module.loopback.ACL.super_.prototype)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.super_.prototype.</span>delete (cb)](#apidoc.element.loopback.ACL.super_.prototype.delete)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.super_.prototype.</span>destroy (cb)](#apidoc.element.loopback.ACL.super_.prototype.destroy)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.super_.prototype.</span>fillCustomChangeProperties (change, cb)](#apidoc.element.loopback.ACL.super_.prototype.fillCustomChangeProperties)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.super_.prototype.</span>getId ()](#apidoc.element.loopback.ACL.super_.prototype.getId)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.super_.prototype.</span>getIdName ()](#apidoc.element.loopback.ACL.super_.prototype.getIdName)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.super_.prototype.</span>isNewRecord ()](#apidoc.element.loopback.ACL.super_.prototype.isNewRecord)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.super_.prototype.</span>patchAttributes (data, cb)](#apidoc.element.loopback.ACL.super_.prototype.patchAttributes)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.super_.prototype.</span>reload (callback)](#apidoc.element.loopback.ACL.super_.prototype.reload)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.super_.prototype.</span>remove (cb)](#apidoc.element.loopback.ACL.super_.prototype.remove)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.super_.prototype.</span>replaceAttributes (data, cb)](#apidoc.element.loopback.ACL.super_.prototype.replaceAttributes)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.super_.prototype.</span>save (options, callback)](#apidoc.element.loopback.ACL.super_.prototype.save)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.super_.prototype.</span>setId (val)](#apidoc.element.loopback.ACL.super_.prototype.setId)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.super_.prototype.</span>updateAttribute (name, value, callback)](#apidoc.element.loopback.ACL.super_.prototype.updateAttribute)
1.  [function <span class="apidocSignatureSpan">loopback.ACL.super_.prototype.</span>updateAttributes (data, cb)](#apidoc.element.loopback.ACL.super_.prototype.updateAttributes)

#### [module loopback.AccessToken](#apidoc.module.loopback.AccessToken)
1.  [function <span class="apidocSignatureSpan">loopback.</span>AccessToken (data, options)](#apidoc.element.loopback.AccessToken.AccessToken)
1.  [function <span class="apidocSignatureSpan">loopback.AccessToken.</span>ValidationError (obj)](#apidoc.element.loopback.AccessToken.ValidationError)
1.  [function <span class="apidocSignatureSpan">loopback.AccessToken.</span>_ACL (ACL)](#apidoc.element.loopback.AccessToken._ACL)
1.  [function <span class="apidocSignatureSpan">loopback.AccessToken.</span>_defineChangeModel ()](#apidoc.element.loopback.AccessToken._defineChangeModel)
1.  [function <span class="apidocSignatureSpan">loopback.AccessToken.</span>_getAccessTypeForMethod (method)](#apidoc.element.loopback.AccessToken._getAccessTypeForMethod)
1.  [function <span class="apidocSignatureSpan">loopback.AccessToken.</span>_notifyBaseObservers (operation, context, callback)](#apidoc.element.loopback.AccessToken._notifyBaseObservers)
1.  [function <span class="apidocSignatureSpan">loopback.AccessToken.</span>_runWhenAttachedToApp (fn)](#apidoc.element.loopback.AccessToken._runWhenAttachedToApp)
1.  [function <span class="apidocSignatureSpan">loopback.AccessToken.</span>addListener ()](#apidoc.element.loopback.AccessToken.addListener)
1.  [function <span class="apidocSignatureSpan">loopback.AccessToken.</span>afterRemote (name, fn)](#apidoc.element.loopback.AccessToken.afterRemote)
1.  [function <span class="apidocSignatureSpan">loopback.AccessToken.</span>afterRemoteError (name, fn)](#apidoc.element.loopback.AccessToken.afterRemoteError)
1.  [function <span class="apidocSignatureSpan">loopback.AccessToken.</span>attachTo (dataSource)](#apidoc.element.loopback.AccessToken.attachTo)
1.  [function <span class="apidocSignatureSpan">loopback.AccessToken.</span>beforeRemote (name, fn)](#apidoc.element.loopback.AccessToken.beforeRemote)
1.  [function <span class="apidocSignatureSpan">loopback.AccessToken.</span>belongsToRemoting (relationName, relation, define)](#apidoc.element.loopback.AccessToken.belongsToRemoting)
1.  [function <span class="apidocSignatureSpan">loopback.AccessToken.</span>bulkUpdate (updates, options, callback)](#apidoc.element.loopback.AccessToken.bulkUpdate)
1.  [function <span class="apidocSignatureSpan">loopback.AccessToken.</span>changes (since, filter, callback)](#apidoc.element.loopback.AccessToken.changes)
1.  [function <span class="apidocSignatureSpan">loopback.AccessToken.</span>checkAccess (token, modelId, sharedMethod, ctx, callback)](#apidoc.element.loopback.AccessToken.checkAccess)
1.  [function <span class="apidocSignatureSpan">loopback.AccessToken.</span>checkpoint (cb)](#apidoc.element.loopback.AccessToken.checkpoint)
1.  [function <span class="apidocSignatureSpan">loopback.AccessToken.</span>clearObservers (operation)](#apidoc.element.loopback.AccessToken.clearObservers)
1.  [function <span class="apidocSignatureSpan">loopback.AccessToken.</span>count (where, cb)](#apidoc.element.loopback.AccessToken.count)
1.  [function <span class="apidocSignatureSpan">loopback.AccessToken.</span>create (data, callback)](#apidoc.element.loopback.AccessToken.create)
1.  [function <span class="apidocSignatureSpan">loopback.AccessToken.</span>createAccessTokenId (fn)](#apidoc.element.loopback.AccessToken.createAccessTokenId)
1.  [function <span class="apidocSignatureSpan">loopback.AccessToken.</span>createChangeFilter (since, modelFilter)](#apidoc.element.loopback.AccessToken.createChangeFilter)
1.  [function <span class="apidocSignatureSpan">loopback.AccessToken.</span>createChangeStream (options, cb)](#apidoc.element.loopback.AccessToken.createChangeStream)
1.  [function <span class="apidocSignatureSpan">loopback.AccessToken.</span>createOptionsFromRemotingContext (ctx)](#apidoc.element.loopback.AccessToken.createOptionsFromRemotingContext)
1.  [function <span class="apidocSignatureSpan">loopback.AccessToken.</span>createUpdates (deltas, cb)](#apidoc.element.loopback.AccessToken.createUpdates)
1.  [function <span class="apidocSignatureSpan">loopback.AccessToken.</span>currentCheckpoint (cb)](#apidoc.element.loopback.AccessToken.currentCheckpoint)
1.  [function <span class="apidocSignatureSpan">loopback.AccessToken.</span>defineProperty (prop, params)](#apidoc.element.loopback.AccessToken.defineProperty)
1.  [function <span class="apidocSignatureSpan">loopback.AccessToken.</span>deleteAll (where, cb)](#apidoc.element.loopback.AccessToken.deleteAll)
1.  [function <span class="apidocSignatureSpan">loopback.AccessToken.</span>deleteById (id, cb)](#apidoc.element.loopback.AccessToken.deleteById)
1.  [function <span class="apidocSignatureSpan">loopback.AccessToken.</span>destroyAll (where, cb)](#apidoc.element.loopback.AccessToken.destroyAll)
1.  [function <span class="apidocSignatureSpan">loopback.AccessToken.</span>destroyById (id, cb)](#apidoc.element.loopback.AccessToken.destroyById)
1.  [function <span class="apidocSignatureSpan">loopback.AccessToken.</span>diff (since, remoteChanges, callback)](#apidoc.element.loopback.AccessToken.diff)
1.  [function <span class="apidocSignatureSpan">loopback.AccessToken.</span>disableRemoteMethod (name, isStatic)](#apidoc.element.loopback.AccessToken.disableRemoteMethod)
1.  [function <span class="apidocSignatureSpan">loopback.AccessToken.</span>disableRemoteMethodByName (name)](#apidoc.element.loopback.AccessToken.disableRemoteMethodByName)
1.  [function <span class="apidocSignatureSpan">loopback.AccessToken.</span>emit ()](#apidoc.element.loopback.AccessToken.emit)
1.  [function <span class="apidocSignatureSpan">loopback.AccessToken.</span>enableChangeTracking ()](#apidoc.element.loopback.AccessToken.enableChangeTracking)
1.  [function <span class="apidocSignatureSpan">loopback.AccessToken.</span>eventNames ()](#apidoc.element.loopback.AccessToken.eventNames)
1.  [function <span class="apidocSignatureSpan">loopback.AccessToken.</span>exists (id, cb)](#apidoc.element.loopback.AccessToken.exists)
1.  [function <span class="apidocSignatureSpan">loopback.AccessToken.</span>extend (className, subclassProperties, subclassSettings)](#apidoc.element.loopback.AccessToken.extend)
1.  [function <span class="apidocSignatureSpan">loopback.AccessToken.</span>find (filter, cb)](#apidoc.element.loopback.AccessToken.find)
1.  [function <span class="apidocSignatureSpan">loopback.AccessToken.</span>findById (id, filter, cb)](#apidoc.element.loopback.AccessToken.findById)
1.  [function <span class="apidocSignatureSpan">loopback.AccessToken.</span>findForRequest (req, options, cb)](#apidoc.element.loopback.AccessToken.findForRequest)
1.  [function <span class="apidocSignatureSpan">loopback.AccessToken.</span>findLastChange (id, cb)](#apidoc.element.loopback.AccessToken.findLastChange)
1.  [function <span class="apidocSignatureSpan">loopback.AccessToken.</span>findOne (filter, cb)](#apidoc.element.loopback.AccessToken.findOne)
1.  [function <span class="apidocSignatureSpan">loopback.AccessToken.</span>findOrCreate (query, data, callback)](#apidoc.element.loopback.AccessToken.findOrCreate)
1.  [function <span class="apidocSignatureSpan">loopback.AccessToken.</span>forEachProperty (cb)](#apidoc.element.loopback.AccessToken.forEachProperty)
1.  [function <span class="apidocSignatureSpan">loopback.AccessToken.</span>getApp (callback)](#apidoc.element.loopback.AccessToken.getApp)
1.  [function <span class="apidocSignatureSpan">loopback.AccessToken.</span>getChangeModel ()](#apidoc.element.loopback.AccessToken.getChangeModel)
1.  [function <span class="apidocSignatureSpan">loopback.AccessToken.</span>getDataSource ()](#apidoc.element.loopback.AccessToken.getDataSource)
1.  [function <span class="apidocSignatureSpan">loopback.AccessToken.</span>getIdName ()](#apidoc.element.loopback.AccessToken.getIdName)
1.  [function <span class="apidocSignatureSpan">loopback.AccessToken.</span>getMaxListeners ()](#apidoc.element.loopback.AccessToken.getMaxListeners)
1.  [function <span class="apidocSignatureSpan">loopback.AccessToken.</span>getPropertyType (propName)](#apidoc.element.loopback.AccessToken.getPropertyType)
1.  [function <span class="apidocSignatureSpan">loopback.AccessToken.</span>getSourceId (cb)](#apidoc.element.loopback.AccessToken.getSourceId)
1.  [function <span class="apidocSignatureSpan">loopback.AccessToken.</span>handleChangeError (err, operationName)](#apidoc.element.loopback.AccessToken.handleChangeError)
1.  [function <span class="apidocSignatureSpan">loopback.AccessToken.</span>hasManyRemoting (relationName, relation, define)](#apidoc.element.loopback.AccessToken.hasManyRemoting)
1.  [function <span class="apidocSignatureSpan">loopback.AccessToken.</span>hasOneRemoting (relationName, relation, define)](#apidoc.element.loopback.AccessToken.hasOneRemoting)
1.  [function <span class="apidocSignatureSpan">loopback.AccessToken.</span>isHiddenProperty (propertyName)](#apidoc.element.loopback.AccessToken.isHiddenProperty)
1.  [function <span class="apidocSignatureSpan">loopback.AccessToken.</span>isProtectedProperty (propertyName)](#apidoc.element.loopback.AccessToken.isProtectedProperty)
1.  [function <span class="apidocSignatureSpan">loopback.AccessToken.</span>listenerCount ()](#apidoc.element.loopback.AccessToken.listenerCount)
1.  [function <span class="apidocSignatureSpan">loopback.AccessToken.</span>listeners ()](#apidoc.element.loopback.AccessToken.listeners)
1.  [function <span class="apidocSignatureSpan">loopback.AccessToken.</span>mixin (anotherClass, options)](#apidoc.element.loopback.AccessToken.mixin)
1.  [function <span class="apidocSignatureSpan">loopback.AccessToken.</span>nestRemoting (relationName, options, filterCallback)](#apidoc.element.loopback.AccessToken.nestRemoting)
1.  [function <span class="apidocSignatureSpan">loopback.AccessToken.</span>notifyObserversAround (operation, context, fn, callback)](#apidoc.element.loopback.AccessToken.notifyObserversAround)
1.  [function <span class="apidocSignatureSpan">loopback.AccessToken.</span>notifyObserversOf (operation, context, callback)](#apidoc.element.loopback.AccessToken.notifyObserversOf)
1.  [function <span class="apidocSignatureSpan">loopback.AccessToken.</span>observe (operation, listener)](#apidoc.element.loopback.AccessToken.observe)
1.  [function <span class="apidocSignatureSpan">loopback.AccessToken.</span>on ()](#apidoc.element.loopback.AccessToken.on)
1.  [function <span class="apidocSignatureSpan">loopback.AccessToken.</span>once ()](#apidoc.element.loopback.AccessToken.once)
1.  [function <span class="apidocSignatureSpan">loopback.AccessToken.</span>patchOrCreate (data, callback)](#apidoc.element.loopback.AccessToken.patchOrCreate)
1.  [function <span class="apidocSignatureSpan">loopback.AccessToken.</span>patchOrCreateWithWhere (where, data, callback)](#apidoc.element.loopback.AccessToken.patchOrCreateWithWhere)
1.  [function <span class="apidocSignatureSpan">loopback.AccessToken.</span>prependListener ()](#apidoc.element.loopback.AccessToken.prependListener)
1.  [function <span class="apidocSignatureSpan">loopback.AccessToken.</span>prependOnceListener ()](#apidoc.element.loopback.AccessToken.prependOnceListener)
1.  [function <span class="apidocSignatureSpan">loopback.AccessToken.</span>rectifyAllChanges (callback)](#apidoc.element.loopback.AccessToken.rectifyAllChanges)
1.  [function <span class="apidocSignatureSpan">loopback.AccessToken.</span>rectifyChange (id, callback)](#apidoc.element.loopback.AccessToken.rectifyChange)
1.  [function <span class="apidocSignatureSpan">loopback.AccessToken.</span>registerProperty (propertyName)](#apidoc.element.loopback.AccessToken.registerProperty)
1.  [function <span class="apidocSignatureSpan">loopback.AccessToken.</span>remoteMethod (name, options)](#apidoc.element.loopback.AccessToken.remoteMethod)
1.  [function <span class="apidocSignatureSpan">loopback.AccessToken.</span>remove (where, cb)](#apidoc.element.loopback.AccessToken.remove)
1.  [function <span class="apidocSignatureSpan">loopback.AccessToken.</span>removeAllListeners ()](#apidoc.element.loopback.AccessToken.removeAllListeners)
1.  [function <span class="apidocSignatureSpan">loopback.AccessToken.</span>removeById (id, cb)](#apidoc.element.loopback.AccessToken.removeById)
1.  [function <span class="apidocSignatureSpan">loopback.AccessToken.</span>removeListener ()](#apidoc.element.loopback.AccessToken.removeListener)
1.  [function <span class="apidocSignatureSpan">loopback.AccessToken.</span>removeObserver (operation, listener)](#apidoc.element.loopback.AccessToken.removeObserver)
1.  [function <span class="apidocSignatureSpan">loopback.AccessToken.</span>replaceById (id, data, cb)](#apidoc.element.loopback.AccessToken.replaceById)
1.  [function <span class="apidocSignatureSpan">loopback.AccessToken.</span>replaceOrCreate (data, callback)](#apidoc.element.loopback.AccessToken.replaceOrCreate)
1.  [function <span class="apidocSignatureSpan">loopback.AccessToken.</span>replicate (since, targetModel, options, callback)](#apidoc.element.loopback.AccessToken.replicate)
1.  [function <span class="apidocSignatureSpan">loopback.AccessToken.</span>scopeRemoting (scopeName, scope, define)](#apidoc.element.loopback.AccessToken.scopeRemoting)
1.  [function <span class="apidocSignatureSpan">loopback.AccessToken.</span>setMaxListeners ()](#apidoc.element.loopback.AccessToken.setMaxListeners)
1.  [function <span class="apidocSignatureSpan">loopback.AccessToken.</span>setup ()](#apidoc.element.loopback.AccessToken.setup)
1.  [function <span class="apidocSignatureSpan">loopback.AccessToken.</span>setupRemoting ()](#apidoc.element.loopback.AccessToken.setupRemoting)
1.  [function <span class="apidocSignatureSpan">loopback.AccessToken.</span>sharedCtor (data, id, options, fn)](#apidoc.element.loopback.AccessToken.sharedCtor)
1.  [function <span class="apidocSignatureSpan">loopback.AccessToken.</span>super_ (data, options)](#apidoc.element.loopback.AccessToken.super_)
1.  [function <span class="apidocSignatureSpan">loopback.AccessToken.</span>update (where, data, cb)](#apidoc.element.loopback.AccessToken.update)
1.  [function <span class="apidocSignatureSpan">loopback.AccessToken.</span>updateAll (where, data, cb)](#apidoc.element.loopback.AccessToken.updateAll)
1.  [function <span class="apidocSignatureSpan">loopback.AccessToken.</span>updateLastChange (id, data, cb)](#apidoc.element.loopback.AccessToken.updateLastChange)
1.  [function <span class="apidocSignatureSpan">loopback.AccessToken.</span>updateOrCreate (data, callback)](#apidoc.element.loopback.AccessToken.updateOrCreate)
1.  [function <span class="apidocSignatureSpan">loopback.AccessToken.</span>upsert (data, callback)](#apidoc.element.loopback.AccessToken.upsert)
1.  [function <span class="apidocSignatureSpan">loopback.AccessToken.</span>upsertWithWhere (where, data, callback)](#apidoc.element.loopback.AccessToken.upsertWithWhere)
1.  [function <span class="apidocSignatureSpan">loopback.AccessToken.</span>validate ()](#apidoc.element.loopback.AccessToken.validate)
1.  [function <span class="apidocSignatureSpan">loopback.AccessToken.</span>validateAsync ()](#apidoc.element.loopback.AccessToken.validateAsync)
1.  [function <span class="apidocSignatureSpan">loopback.AccessToken.</span>validatesAbsenceOf ()](#apidoc.element.loopback.AccessToken.validatesAbsenceOf)
1.  [function <span class="apidocSignatureSpan">loopback.AccessToken.</span>validatesExclusionOf ()](#apidoc.element.loopback.AccessToken.validatesExclusionOf)
1.  [function <span class="apidocSignatureSpan">loopback.AccessToken.</span>validatesFormatOf ()](#apidoc.element.loopback.AccessToken.validatesFormatOf)
1.  [function <span class="apidocSignatureSpan">loopback.AccessToken.</span>validatesInclusionOf ()](#apidoc.element.loopback.AccessToken.validatesInclusionOf)
1.  [function <span class="apidocSignatureSpan">loopback.AccessToken.</span>validatesLengthOf ()](#apidoc.element.loopback.AccessToken.validatesLengthOf)
1.  [function <span class="apidocSignatureSpan">loopback.AccessToken.</span>validatesNumericalityOf ()](#apidoc.element.loopback.AccessToken.validatesNumericalityOf)
1.  [function <span class="apidocSignatureSpan">loopback.AccessToken.</span>validatesPresenceOf ()](#apidoc.element.loopback.AccessToken.validatesPresenceOf)
1.  [function <span class="apidocSignatureSpan">loopback.AccessToken.</span>validatesUniquenessOf ()](#apidoc.element.loopback.AccessToken.validatesUniquenessOf)
1.  object <span class="apidocSignatureSpan">loopback.AccessToken.</span>ANONYMOUS
1.  object <span class="apidocSignatureSpan">loopback.AccessToken.</span>afterCreate
1.  object <span class="apidocSignatureSpan">loopback.AccessToken.</span>afterDestroy
1.  object <span class="apidocSignatureSpan">loopback.AccessToken.</span>afterInitialize
1.  object <span class="apidocSignatureSpan">loopback.AccessToken.</span>afterSave
1.  object <span class="apidocSignatureSpan">loopback.AccessToken.</span>afterUpdate
1.  object <span class="apidocSignatureSpan">loopback.AccessToken.</span>afterValidate
1.  object <span class="apidocSignatureSpan">loopback.AccessToken.</span>beforeCreate
1.  object <span class="apidocSignatureSpan">loopback.AccessToken.</span>beforeDestroy
1.  object <span class="apidocSignatureSpan">loopback.AccessToken.</span>beforeSave
1.  object <span class="apidocSignatureSpan">loopback.AccessToken.</span>beforeUpdate
1.  object <span class="apidocSignatureSpan">loopback.AccessToken.</span>beforeValidate
1.  object <span class="apidocSignatureSpan">loopback.AccessToken.</span>definition
1.  object <span class="apidocSignatureSpan">loopback.AccessToken.</span>getter
1.  object <span class="apidocSignatureSpan">loopback.AccessToken.</span>registry
1.  object <span class="apidocSignatureSpan">loopback.AccessToken.</span>setter
1.  object <span class="apidocSignatureSpan">loopback.AccessToken.</span>settings
1.  object <span class="apidocSignatureSpan">loopback.AccessToken.</span>sharedClass

#### [module loopback.AccessToken.prototype](#apidoc.module.loopback.AccessToken.prototype)
1.  [function <span class="apidocSignatureSpan">loopback.AccessToken.prototype.</span>validate (cb)](#apidoc.element.loopback.AccessToken.prototype.validate)

#### [module loopback.AccessToken.settings](#apidoc.module.loopback.AccessToken.settings)
1.  boolean <span class="apidocSignatureSpan">loopback.AccessToken.settings.</span>replaceOnPUT
1.  boolean <span class="apidocSignatureSpan">loopback.AccessToken.settings.</span>strict
1.  [function <span class="apidocSignatureSpan">loopback.AccessToken.settings.</span>base (data, options)](#apidoc.element.loopback.AccessToken.settings.base)
1.  object <span class="apidocSignatureSpan">loopback.AccessToken.settings.</span>acls
1.  object <span class="apidocSignatureSpan">loopback.AccessToken.settings.</span>relations

#### [module loopback.AccessToken.sharedClass](#apidoc.module.loopback.AccessToken.sharedClass)
1.  [function <span class="apidocSignatureSpan">loopback.AccessToken.sharedClass.</span>ctor (data, options)](#apidoc.element.loopback.AccessToken.sharedClass.ctor)
1.  object <span class="apidocSignatureSpan">loopback.AccessToken.sharedClass.</span>_disabledMethods
1.  object <span class="apidocSignatureSpan">loopback.AccessToken.sharedClass.</span>_methods
1.  object <span class="apidocSignatureSpan">loopback.AccessToken.sharedClass.</span>_resolvers
1.  object <span class="apidocSignatureSpan">loopback.AccessToken.sharedClass.</span>http
1.  object <span class="apidocSignatureSpan">loopback.AccessToken.sharedClass.</span>sharedCtor
1.  string <span class="apidocSignatureSpan">loopback.AccessToken.sharedClass.</span>name

#### [module loopback.Application](#apidoc.module.loopback.Application)
1.  [function <span class="apidocSignatureSpan">loopback.</span>Application (data, options)](#apidoc.element.loopback.Application.Application)
1.  [function <span class="apidocSignatureSpan">loopback.Application.</span>ValidationError (obj)](#apidoc.element.loopback.Application.ValidationError)
1.  [function <span class="apidocSignatureSpan">loopback.Application.</span>_ACL (ACL)](#apidoc.element.loopback.Application._ACL)
1.  [function <span class="apidocSignatureSpan">loopback.Application.</span>_defineChangeModel ()](#apidoc.element.loopback.Application._defineChangeModel)
1.  [function <span class="apidocSignatureSpan">loopback.Application.</span>_getAccessTypeForMethod (method)](#apidoc.element.loopback.Application._getAccessTypeForMethod)
1.  [function <span class="apidocSignatureSpan">loopback.Application.</span>_notifyBaseObservers (operation, context, callback)](#apidoc.element.loopback.Application._notifyBaseObservers)
1.  [function <span class="apidocSignatureSpan">loopback.Application.</span>_runWhenAttachedToApp (fn)](#apidoc.element.loopback.Application._runWhenAttachedToApp)
1.  [function <span class="apidocSignatureSpan">loopback.Application.</span>addListener ()](#apidoc.element.loopback.Application.addListener)
1.  [function <span class="apidocSignatureSpan">loopback.Application.</span>afterRemote (name, fn)](#apidoc.element.loopback.Application.afterRemote)
1.  [function <span class="apidocSignatureSpan">loopback.Application.</span>afterRemoteError (name, fn)](#apidoc.element.loopback.Application.afterRemoteError)
1.  [function <span class="apidocSignatureSpan">loopback.Application.</span>attachTo (dataSource)](#apidoc.element.loopback.Application.attachTo)
1.  [function <span class="apidocSignatureSpan">loopback.Application.</span>authenticate (appId, key, cb)](#apidoc.element.loopback.Application.authenticate)
1.  [function <span class="apidocSignatureSpan">loopback.Application.</span>beforeRemote (name, fn)](#apidoc.element.loopback.Application.beforeRemote)
1.  [function <span class="apidocSignatureSpan">loopback.Application.</span>belongsToRemoting (relationName, relation, define)](#apidoc.element.loopback.Application.belongsToRemoting)
1.  [function <span class="apidocSignatureSpan">loopback.Application.</span>bulkUpdate (updates, options, callback)](#apidoc.element.loopback.Application.bulkUpdate)
1.  [function <span class="apidocSignatureSpan">loopback.Application.</span>changes (since, filter, callback)](#apidoc.element.loopback.Application.changes)
1.  [function <span class="apidocSignatureSpan">loopback.Application.</span>checkAccess (token, modelId, sharedMethod, ctx, callback)](#apidoc.element.loopback.Application.checkAccess)
1.  [function <span class="apidocSignatureSpan">loopback.Application.</span>checkpoint (cb)](#apidoc.element.loopback.Application.checkpoint)
1.  [function <span class="apidocSignatureSpan">loopback.Application.</span>clearObservers (operation)](#apidoc.element.loopback.Application.clearObservers)
1.  [function <span class="apidocSignatureSpan">loopback.Application.</span>count (where, cb)](#apidoc.element.loopback.Application.count)
1.  [function <span class="apidocSignatureSpan">loopback.Application.</span>create (data, callback)](#apidoc.element.loopback.Application.create)
1.  [function <span class="apidocSignatureSpan">loopback.Application.</span>createChangeFilter (since, modelFilter)](#apidoc.element.loopback.Application.createChangeFilter)
1.  [function <span class="apidocSignatureSpan">loopback.Application.</span>createChangeStream (options, cb)](#apidoc.element.loopback.Application.createChangeStream)
1.  [function <span class="apidocSignatureSpan">loopback.Application.</span>createOptionsFromRemotingContext (ctx)](#apidoc.element.loopback.Application.createOptionsFromRemotingContext)
1.  [function <span class="apidocSignatureSpan">loopback.Application.</span>createUpdates (deltas, cb)](#apidoc.element.loopback.Application.createUpdates)
1.  [function <span class="apidocSignatureSpan">loopback.Application.</span>currentCheckpoint (cb)](#apidoc.element.loopback.Application.currentCheckpoint)
1.  [function <span class="apidocSignatureSpan">loopback.Application.</span>defineProperty (prop, params)](#apidoc.element.loopback.Application.defineProperty)
1.  [function <span class="apidocSignatureSpan">loopback.Application.</span>deleteAll (where, cb)](#apidoc.element.loopback.Application.deleteAll)
1.  [function <span class="apidocSignatureSpan">loopback.Application.</span>deleteById (id, cb)](#apidoc.element.loopback.Application.deleteById)
1.  [function <span class="apidocSignatureSpan">loopback.Application.</span>destroyAll (where, cb)](#apidoc.element.loopback.Application.destroyAll)
1.  [function <span class="apidocSignatureSpan">loopback.Application.</span>destroyById (id, cb)](#apidoc.element.loopback.Application.destroyById)
1.  [function <span class="apidocSignatureSpan">loopback.Application.</span>diff (since, remoteChanges, callback)](#apidoc.element.loopback.Application.diff)
1.  [function <span class="apidocSignatureSpan">loopback.Application.</span>disableRemoteMethod (name, isStatic)](#apidoc.element.loopback.Application.disableRemoteMethod)
1.  [function <span class="apidocSignatureSpan">loopback.Application.</span>disableRemoteMethodByName (name)](#apidoc.element.loopback.Application.disableRemoteMethodByName)
1.  [function <span class="apidocSignatureSpan">loopback.Application.</span>emit ()](#apidoc.element.loopback.Application.emit)
1.  [function <span class="apidocSignatureSpan">loopback.Application.</span>enableChangeTracking ()](#apidoc.element.loopback.Application.enableChangeTracking)
1.  [function <span class="apidocSignatureSpan">loopback.Application.</span>eventNames ()](#apidoc.element.loopback.Application.eventNames)
1.  [function <span class="apidocSignatureSpan">loopback.Application.</span>exists (id, cb)](#apidoc.element.loopback.Application.exists)
1.  [function <span class="apidocSignatureSpan">loopback.Application.</span>extend (className, subclassProperties, subclassSettings)](#apidoc.element.loopback.Application.extend)
1.  [function <span class="apidocSignatureSpan">loopback.Application.</span>find (filter, cb)](#apidoc.element.loopback.Application.find)
1.  [function <span class="apidocSignatureSpan">loopback.Application.</span>findById (id, filter, cb)](#apidoc.element.loopback.Application.findById)
1.  [function <span class="apidocSignatureSpan">loopback.Application.</span>findLastChange (id, cb)](#apidoc.element.loopback.Application.findLastChange)
1.  [function <span class="apidocSignatureSpan">loopback.Application.</span>findOne (filter, cb)](#apidoc.element.loopback.Application.findOne)
1.  [function <span class="apidocSignatureSpan">loopback.Application.</span>findOrCreate (query, data, callback)](#apidoc.element.loopback.Application.findOrCreate)
1.  [function <span class="apidocSignatureSpan">loopback.Application.</span>forEachProperty (cb)](#apidoc.element.loopback.Application.forEachProperty)
1.  [function <span class="apidocSignatureSpan">loopback.Application.</span>getApp (callback)](#apidoc.element.loopback.Application.getApp)
1.  [function <span class="apidocSignatureSpan">loopback.Application.</span>getChangeModel ()](#apidoc.element.loopback.Application.getChangeModel)
1.  [function <span class="apidocSignatureSpan">loopback.Application.</span>getDataSource ()](#apidoc.element.loopback.Application.getDataSource)
1.  [function <span class="apidocSignatureSpan">loopback.Application.</span>getIdName ()](#apidoc.element.loopback.Application.getIdName)
1.  [function <span class="apidocSignatureSpan">loopback.Application.</span>getMaxListeners ()](#apidoc.element.loopback.Application.getMaxListeners)
1.  [function <span class="apidocSignatureSpan">loopback.Application.</span>getPropertyType (propName)](#apidoc.element.loopback.Application.getPropertyType)
1.  [function <span class="apidocSignatureSpan">loopback.Application.</span>getSourceId (cb)](#apidoc.element.loopback.Application.getSourceId)
1.  [function <span class="apidocSignatureSpan">loopback.Application.</span>handleChangeError (err, operationName)](#apidoc.element.loopback.Application.handleChangeError)
1.  [function <span class="apidocSignatureSpan">loopback.Application.</span>hasManyRemoting (relationName, relation, define)](#apidoc.element.loopback.Application.hasManyRemoting)
1.  [function <span class="apidocSignatureSpan">loopback.Application.</span>hasOneRemoting (relationName, relation, define)](#apidoc.element.loopback.Application.hasOneRemoting)
1.  [function <span class="apidocSignatureSpan">loopback.Application.</span>isHiddenProperty (propertyName)](#apidoc.element.loopback.Application.isHiddenProperty)
1.  [function <span class="apidocSignatureSpan">loopback.Application.</span>isProtectedProperty (propertyName)](#apidoc.element.loopback.Application.isProtectedProperty)
1.  [function <span class="apidocSignatureSpan">loopback.Application.</span>listenerCount ()](#apidoc.element.loopback.Application.listenerCount)
1.  [function <span class="apidocSignatureSpan">loopback.Application.</span>listeners ()](#apidoc.element.loopback.Application.listeners)
1.  [function <span class="apidocSignatureSpan">loopback.Application.</span>mixin (anotherClass, options)](#apidoc.element.loopback.Application.mixin)
1.  [function <span class="apidocSignatureSpan">loopback.Application.</span>nestRemoting (relationName, options, filterCallback)](#apidoc.element.loopback.Application.nestRemoting)
1.  [function <span class="apidocSignatureSpan">loopback.Application.</span>notifyObserversAround (operation, context, fn, callback)](#apidoc.element.loopback.Application.notifyObserversAround)
1.  [function <span class="apidocSignatureSpan">loopback.Application.</span>notifyObserversOf (operation, context, callback)](#apidoc.element.loopback.Application.notifyObserversOf)
1.  [function <span class="apidocSignatureSpan">loopback.Application.</span>observe (operation, listener)](#apidoc.element.loopback.Application.observe)
1.  [function <span class="apidocSignatureSpan">loopback.Application.</span>on ()](#apidoc.element.loopback.Application.on)
1.  [function <span class="apidocSignatureSpan">loopback.Application.</span>once ()](#apidoc.element.loopback.Application.once)
1.  [function <span class="apidocSignatureSpan">loopback.Application.</span>patchOrCreate (data, callback)](#apidoc.element.loopback.Application.patchOrCreate)
1.  [function <span class="apidocSignatureSpan">loopback.Application.</span>patchOrCreateWithWhere (where, data, callback)](#apidoc.element.loopback.Application.patchOrCreateWithWhere)
1.  [function <span class="apidocSignatureSpan">loopback.Application.</span>prependListener ()](#apidoc.element.loopback.Application.prependListener)
1.  [function <span class="apidocSignatureSpan">loopback.Application.</span>prependOnceListener ()](#apidoc.element.loopback.Application.prependOnceListener)
1.  [function <span class="apidocSignatureSpan">loopback.Application.</span>rectifyAllChanges (callback)](#apidoc.element.loopback.Application.rectifyAllChanges)
1.  [function <span class="apidocSignatureSpan">loopback.Application.</span>rectifyChange (id, callback)](#apidoc.element.loopback.Application.rectifyChange)
1.  [function <span class="apidocSignatureSpan">loopback.Application.</span>register (owner, name, options, cb)](#apidoc.element.loopback.Application.register)
1.  [function <span class="apidocSignatureSpan">loopback.Application.</span>registerProperty (propertyName)](#apidoc.element.loopback.Application.registerProperty)
1.  [function <span class="apidocSignatureSpan">loopback.Application.</span>remoteMethod (name, options)](#apidoc.element.loopback.Application.remoteMethod)
1.  [function <span class="apidocSignatureSpan">loopback.Application.</span>remove (where, cb)](#apidoc.element.loopback.Application.remove)
1.  [function <span class="apidocSignatureSpan">loopback.Application.</span>removeAllListeners ()](#apidoc.element.loopback.Application.removeAllListeners)
1.  [function <span class="apidocSignatureSpan">loopback.Application.</span>removeById (id, cb)](#apidoc.element.loopback.Application.removeById)
1.  [function <span class="apidocSignatureSpan">loopback.Application.</span>removeListener ()](#apidoc.element.loopback.Application.removeListener)
1.  [function <span class="apidocSignatureSpan">loopback.Application.</span>removeObserver (operation, listener)](#apidoc.element.loopback.Application.removeObserver)
1.  [function <span class="apidocSignatureSpan">loopback.Application.</span>replaceById (id, data, cb)](#apidoc.element.loopback.Application.replaceById)
1.  [function <span class="apidocSignatureSpan">loopback.Application.</span>replaceOrCreate (data, callback)](#apidoc.element.loopback.Application.replaceOrCreate)
1.  [function <span class="apidocSignatureSpan">loopback.Application.</span>replicate (since, targetModel, options, callback)](#apidoc.element.loopback.Application.replicate)
1.  [function <span class="apidocSignatureSpan">loopback.Application.</span>resetKeys (appId, cb)](#apidoc.element.loopback.Application.resetKeys)
1.  [function <span class="apidocSignatureSpan">loopback.Application.</span>scopeRemoting (scopeName, scope, define)](#apidoc.element.loopback.Application.scopeRemoting)
1.  [function <span class="apidocSignatureSpan">loopback.Application.</span>setMaxListeners ()](#apidoc.element.loopback.Application.setMaxListeners)
1.  [function <span class="apidocSignatureSpan">loopback.Application.</span>setup ()](#apidoc.element.loopback.Application.setup)
1.  [function <span class="apidocSignatureSpan">loopback.Application.</span>setupRemoting ()](#apidoc.element.loopback.Application.setupRemoting)
1.  [function <span class="apidocSignatureSpan">loopback.Application.</span>sharedCtor (data, id, options, fn)](#apidoc.element.loopback.Application.sharedCtor)
1.  [function <span class="apidocSignatureSpan">loopback.Application.</span>super_ (data, options)](#apidoc.element.loopback.Application.super_)
1.  [function <span class="apidocSignatureSpan">loopback.Application.</span>update (where, data, cb)](#apidoc.element.loopback.Application.update)
1.  [function <span class="apidocSignatureSpan">loopback.Application.</span>updateAll (where, data, cb)](#apidoc.element.loopback.Application.updateAll)
1.  [function <span class="apidocSignatureSpan">loopback.Application.</span>updateLastChange (id, data, cb)](#apidoc.element.loopback.Application.updateLastChange)
1.  [function <span class="apidocSignatureSpan">loopback.Application.</span>updateOrCreate (data, callback)](#apidoc.element.loopback.Application.updateOrCreate)
1.  [function <span class="apidocSignatureSpan">loopback.Application.</span>upsert (data, callback)](#apidoc.element.loopback.Application.upsert)
1.  [function <span class="apidocSignatureSpan">loopback.Application.</span>upsertWithWhere (where, data, callback)](#apidoc.element.loopback.Application.upsertWithWhere)
1.  [function <span class="apidocSignatureSpan">loopback.Application.</span>validate ()](#apidoc.element.loopback.Application.validate)
1.  [function <span class="apidocSignatureSpan">loopback.Application.</span>validateAsync ()](#apidoc.element.loopback.Application.validateAsync)
1.  [function <span class="apidocSignatureSpan">loopback.Application.</span>validatesAbsenceOf ()](#apidoc.element.loopback.Application.validatesAbsenceOf)
1.  [function <span class="apidocSignatureSpan">loopback.Application.</span>validatesExclusionOf ()](#apidoc.element.loopback.Application.validatesExclusionOf)
1.  [function <span class="apidocSignatureSpan">loopback.Application.</span>validatesFormatOf ()](#apidoc.element.loopback.Application.validatesFormatOf)
1.  [function <span class="apidocSignatureSpan">loopback.Application.</span>validatesInclusionOf ()](#apidoc.element.loopback.Application.validatesInclusionOf)
1.  [function <span class="apidocSignatureSpan">loopback.Application.</span>validatesLengthOf ()](#apidoc.element.loopback.Application.validatesLengthOf)
1.  [function <span class="apidocSignatureSpan">loopback.Application.</span>validatesNumericalityOf ()](#apidoc.element.loopback.Application.validatesNumericalityOf)
1.  [function <span class="apidocSignatureSpan">loopback.Application.</span>validatesPresenceOf ()](#apidoc.element.loopback.Application.validatesPresenceOf)
1.  [function <span class="apidocSignatureSpan">loopback.Application.</span>validatesUniquenessOf ()](#apidoc.element.loopback.Application.validatesUniquenessOf)
1.  object <span class="apidocSignatureSpan">loopback.Application.</span>afterCreate
1.  object <span class="apidocSignatureSpan">loopback.Application.</span>afterDestroy
1.  object <span class="apidocSignatureSpan">loopback.Application.</span>afterInitialize
1.  object <span class="apidocSignatureSpan">loopback.Application.</span>afterSave
1.  object <span class="apidocSignatureSpan">loopback.Application.</span>afterUpdate
1.  object <span class="apidocSignatureSpan">loopback.Application.</span>afterValidate
1.  object <span class="apidocSignatureSpan">loopback.Application.</span>beforeCreate
1.  object <span class="apidocSignatureSpan">loopback.Application.</span>beforeDestroy
1.  object <span class="apidocSignatureSpan">loopback.Application.</span>beforeSave
1.  object <span class="apidocSignatureSpan">loopback.Application.</span>beforeUpdate
1.  object <span class="apidocSignatureSpan">loopback.Application.</span>beforeValidate
1.  object <span class="apidocSignatureSpan">loopback.Application.</span>definition
1.  object <span class="apidocSignatureSpan">loopback.Application.</span>getter
1.  object <span class="apidocSignatureSpan">loopback.Application.</span>registry
1.  object <span class="apidocSignatureSpan">loopback.Application.</span>setter
1.  object <span class="apidocSignatureSpan">loopback.Application.</span>settings
1.  object <span class="apidocSignatureSpan">loopback.Application.</span>sharedClass

#### [module loopback.Application.prototype](#apidoc.module.loopback.Application.prototype)
1.  [function <span class="apidocSignatureSpan">loopback.Application.prototype.</span>resetKeys (cb)](#apidoc.element.loopback.Application.prototype.resetKeys)
1.  undefined <span class="apidocSignatureSpan">loopback.Application.prototype.</span>url

#### [module loopback.Application.settings](#apidoc.module.loopback.Application.settings)
1.  boolean <span class="apidocSignatureSpan">loopback.Application.settings.</span>replaceOnPUT
1.  boolean <span class="apidocSignatureSpan">loopback.Application.settings.</span>strict
1.  [function <span class="apidocSignatureSpan">loopback.Application.settings.</span>base (data, options)](#apidoc.element.loopback.Application.settings.base)

#### [module loopback.Application.sharedClass](#apidoc.module.loopback.Application.sharedClass)
1.  [function <span class="apidocSignatureSpan">loopback.Application.sharedClass.</span>ctor (data, options)](#apidoc.element.loopback.Application.sharedClass.ctor)
1.  object <span class="apidocSignatureSpan">loopback.Application.sharedClass.</span>_disabledMethods
1.  object <span class="apidocSignatureSpan">loopback.Application.sharedClass.</span>_methods
1.  object <span class="apidocSignatureSpan">loopback.Application.sharedClass.</span>_resolvers
1.  object <span class="apidocSignatureSpan">loopback.Application.sharedClass.</span>http
1.  object <span class="apidocSignatureSpan">loopback.Application.sharedClass.</span>sharedCtor
1.  string <span class="apidocSignatureSpan">loopback.Application.sharedClass.</span>name

#### [module loopback.Change](#apidoc.module.loopback.Change)
1.  [function <span class="apidocSignatureSpan">loopback.</span>Change (data, options)](#apidoc.element.loopback.Change.Change)
1.  [function <span class="apidocSignatureSpan">loopback.Change.</span>Conflict (modelId, SourceModel, TargetModel)](#apidoc.element.loopback.Change.Conflict)
1.  [function <span class="apidocSignatureSpan">loopback.Change.</span>ValidationError (obj)](#apidoc.element.loopback.Change.ValidationError)
1.  [function <span class="apidocSignatureSpan">loopback.Change.</span>_ACL (ACL)](#apidoc.element.loopback.Change._ACL)
1.  [function <span class="apidocSignatureSpan">loopback.Change.</span>_defineChangeModel ()](#apidoc.element.loopback.Change._defineChangeModel)
1.  [function <span class="apidocSignatureSpan">loopback.Change.</span>_getAccessTypeForMethod (method)](#apidoc.element.loopback.Change._getAccessTypeForMethod)
1.  [function <span class="apidocSignatureSpan">loopback.Change.</span>_notifyBaseObservers (operation, context, callback)](#apidoc.element.loopback.Change._notifyBaseObservers)
1.  [function <span class="apidocSignatureSpan">loopback.Change.</span>_runWhenAttachedToApp (fn)](#apidoc.element.loopback.Change._runWhenAttachedToApp)
1.  [function <span class="apidocSignatureSpan">loopback.Change.</span>addListener ()](#apidoc.element.loopback.Change.addListener)
1.  [function <span class="apidocSignatureSpan">loopback.Change.</span>afterRemote (name, fn)](#apidoc.element.loopback.Change.afterRemote)
1.  [function <span class="apidocSignatureSpan">loopback.Change.</span>afterRemoteError (name, fn)](#apidoc.element.loopback.Change.afterRemoteError)
1.  [function <span class="apidocSignatureSpan">loopback.Change.</span>attachTo (dataSource)](#apidoc.element.loopback.Change.attachTo)
1.  [function <span class="apidocSignatureSpan">loopback.Change.</span>beforeRemote (name, fn)](#apidoc.element.loopback.Change.beforeRemote)
1.  [function <span class="apidocSignatureSpan">loopback.Change.</span>belongsToRemoting (relationName, relation, define)](#apidoc.element.loopback.Change.belongsToRemoting)
1.  [function <span class="apidocSignatureSpan">loopback.Change.</span>bothDeleted (a, b)](#apidoc.element.loopback.Change.bothDeleted)
1.  [function <span class="apidocSignatureSpan">loopback.Change.</span>bulkUpdate (updates, options, callback)](#apidoc.element.loopback.Change.bulkUpdate)
1.  [function <span class="apidocSignatureSpan">loopback.Change.</span>changes (since, filter, callback)](#apidoc.element.loopback.Change.changes)
1.  [function <span class="apidocSignatureSpan">loopback.Change.</span>checkAccess (token, modelId, sharedMethod, ctx, callback)](#apidoc.element.loopback.Change.checkAccess)
1.  [function <span class="apidocSignatureSpan">loopback.Change.</span>checkpoint (cb)](#apidoc.element.loopback.Change.checkpoint)
1.  [function <span class="apidocSignatureSpan">loopback.Change.</span>clearObservers (operation)](#apidoc.element.loopback.Change.clearObservers)
1.  [function <span class="apidocSignatureSpan">loopback.Change.</span>count (where, cb)](#apidoc.element.loopback.Change.count)
1.  [function <span class="apidocSignatureSpan">loopback.Change.</span>create (data, callback)](#apidoc.element.loopback.Change.create)
1.  [function <span class="apidocSignatureSpan">loopback.Change.</span>createChangeFilter (since, modelFilter)](#apidoc.element.loopback.Change.createChangeFilter)
1.  [function <span class="apidocSignatureSpan">loopback.Change.</span>createChangeStream (options, cb)](#apidoc.element.loopback.Change.createChangeStream)
1.  [function <span class="apidocSignatureSpan">loopback.Change.</span>createOptionsFromRemotingContext (ctx)](#apidoc.element.loopback.Change.createOptionsFromRemotingContext)
1.  [function <span class="apidocSignatureSpan">loopback.Change.</span>createUpdates (deltas, cb)](#apidoc.element.loopback.Change.createUpdates)
1.  [function <span class="apidocSignatureSpan">loopback.Change.</span>currentCheckpoint (cb)](#apidoc.element.loopback.Change.currentCheckpoint)
1.  [function <span class="apidocSignatureSpan">loopback.Change.</span>defineProperty (prop, params)](#apidoc.element.loopback.Change.defineProperty)
1.  [function <span class="apidocSignatureSpan">loopback.Change.</span>deleteAll (where, cb)](#apidoc.element.loopback.Change.deleteAll)
1.  [function <span class="apidocSignatureSpan">loopback.Change.</span>deleteById (id, cb)](#apidoc.element.loopback.Change.deleteById)
1.  [function <span class="apidocSignatureSpan">loopback.Change.</span>destroyAll (where, cb)](#apidoc.element.loopback.Change.destroyAll)
1.  [function <span class="apidocSignatureSpan">loopback.Change.</span>destroyById (id, cb)](#apidoc.element.loopback.Change.destroyById)
1.  [function <span class="apidocSignatureSpan">loopback.Change.</span>diff (modelName, since, remoteChanges, callback)](#apidoc.element.loopback.Change.diff)
1.  [function <span class="apidocSignatureSpan">loopback.Change.</span>disableRemoteMethod (name, isStatic)](#apidoc.element.loopback.Change.disableRemoteMethod)
1.  [function <span class="apidocSignatureSpan">loopback.Change.</span>disableRemoteMethodByName (name)](#apidoc.element.loopback.Change.disableRemoteMethodByName)
1.  [function <span class="apidocSignatureSpan">loopback.Change.</span>emit ()](#apidoc.element.loopback.Change.emit)
1.  [function <span class="apidocSignatureSpan">loopback.Change.</span>enableChangeTracking ()](#apidoc.element.loopback.Change.enableChangeTracking)
1.  [function <span class="apidocSignatureSpan">loopback.Change.</span>eventNames ()](#apidoc.element.loopback.Change.eventNames)
1.  [function <span class="apidocSignatureSpan">loopback.Change.</span>exists (id, cb)](#apidoc.element.loopback.Change.exists)
1.  [function <span class="apidocSignatureSpan">loopback.Change.</span>extend (className, subclassProperties, subclassSettings)](#apidoc.element.loopback.Change.extend)
1.  [function <span class="apidocSignatureSpan">loopback.Change.</span>find (filter, cb)](#apidoc.element.loopback.Change.find)
1.  [function <span class="apidocSignatureSpan">loopback.Change.</span>findById (id, filter, cb)](#apidoc.element.loopback.Change.findById)
1.  [function <span class="apidocSignatureSpan">loopback.Change.</span>findLastChange (id, cb)](#apidoc.element.loopback.Change.findLastChange)
1.  [function <span class="apidocSignatureSpan">loopback.Change.</span>findOne (filter, cb)](#apidoc.element.loopback.Change.findOne)
1.  [function <span class="apidocSignatureSpan">loopback.Change.</span>findOrCreate (query, data, callback)](#apidoc.element.loopback.Change.findOrCreate)
1.  [function <span class="apidocSignatureSpan">loopback.Change.</span>findOrCreateChange (modelName, modelId, callback)](#apidoc.element.loopback.Change.findOrCreateChange)
1.  [function <span class="apidocSignatureSpan">loopback.Change.</span>forEachProperty (cb)](#apidoc.element.loopback.Change.forEachProperty)
1.  [function <span class="apidocSignatureSpan">loopback.Change.</span>getApp (callback)](#apidoc.element.loopback.Change.getApp)
1.  [function <span class="apidocSignatureSpan">loopback.Change.</span>getChangeModel ()](#apidoc.element.loopback.Change.getChangeModel)
1.  [function <span class="apidocSignatureSpan">loopback.Change.</span>getCheckpointModel ()](#apidoc.element.loopback.Change.getCheckpointModel)
1.  [function <span class="apidocSignatureSpan">loopback.Change.</span>getDataSource ()](#apidoc.element.loopback.Change.getDataSource)
1.  [function <span class="apidocSignatureSpan">loopback.Change.</span>getIdName ()](#apidoc.element.loopback.Change.getIdName)
1.  [function <span class="apidocSignatureSpan">loopback.Change.</span>getMaxListeners ()](#apidoc.element.loopback.Change.getMaxListeners)
1.  [function <span class="apidocSignatureSpan">loopback.Change.</span>getPropertyType (propName)](#apidoc.element.loopback.Change.getPropertyType)
1.  [function <span class="apidocSignatureSpan">loopback.Change.</span>getSourceId (cb)](#apidoc.element.loopback.Change.getSourceId)
1.  [function <span class="apidocSignatureSpan">loopback.Change.</span>handleChangeError (err, operationName)](#apidoc.element.loopback.Change.handleChangeError)
1.  [function <span class="apidocSignatureSpan">loopback.Change.</span>hasManyRemoting (relationName, relation, define)](#apidoc.element.loopback.Change.hasManyRemoting)
1.  [function <span class="apidocSignatureSpan">loopback.Change.</span>hasOneRemoting (relationName, relation, define)](#apidoc.element.loopback.Change.hasOneRemoting)
1.  [function <span class="apidocSignatureSpan">loopback.Change.</span>hash (str)](#apidoc.element.loopback.Change.hash)
1.  [function <span class="apidocSignatureSpan">loopback.Change.</span>idForModel (modelName, modelId)](#apidoc.element.loopback.Change.idForModel)
1.  [function <span class="apidocSignatureSpan">loopback.Change.</span>isHiddenProperty (propertyName)](#apidoc.element.loopback.Change.isHiddenProperty)
1.  [function <span class="apidocSignatureSpan">loopback.Change.</span>isProtectedProperty (propertyName)](#apidoc.element.loopback.Change.isProtectedProperty)
1.  [function <span class="apidocSignatureSpan">loopback.Change.</span>listenerCount ()](#apidoc.element.loopback.Change.listenerCount)
1.  [function <span class="apidocSignatureSpan">loopback.Change.</span>listeners ()](#apidoc.element.loopback.Change.listeners)
1.  [function <span class="apidocSignatureSpan">loopback.Change.</span>mixin (anotherClass, options)](#apidoc.element.loopback.Change.mixin)
1.  [function <span class="apidocSignatureSpan">loopback.Change.</span>nestRemoting (relationName, options, filterCallback)](#apidoc.element.loopback.Change.nestRemoting)
1.  [function <span class="apidocSignatureSpan">loopback.Change.</span>notifyObserversAround (operation, context, fn, callback)](#apidoc.element.loopback.Change.notifyObserversAround)
1.  [function <span class="apidocSignatureSpan">loopback.Change.</span>notifyObserversOf (operation, context, callback)](#apidoc.element.loopback.Change.notifyObserversOf)
1.  [function <span class="apidocSignatureSpan">loopback.Change.</span>observe (operation, listener)](#apidoc.element.loopback.Change.observe)
1.  [function <span class="apidocSignatureSpan">loopback.Change.</span>on ()](#apidoc.element.loopback.Change.on)
1.  [function <span class="apidocSignatureSpan">loopback.Change.</span>once ()](#apidoc.element.loopback.Change.once)
1.  [function <span class="apidocSignatureSpan">loopback.Change.</span>patchOrCreate (data, callback)](#apidoc.element.loopback.Change.patchOrCreate)
1.  [function <span class="apidocSignatureSpan">loopback.Change.</span>patchOrCreateWithWhere (where, data, callback)](#apidoc.element.loopback.Change.patchOrCreateWithWhere)
1.  [function <span class="apidocSignatureSpan">loopback.Change.</span>prependListener ()](#apidoc.element.loopback.Change.prependListener)
1.  [function <span class="apidocSignatureSpan">loopback.Change.</span>prependOnceListener ()](#apidoc.element.loopback.Change.prependOnceListener)
1.  [function <span class="apidocSignatureSpan">loopback.Change.</span>rectifyAll (cb)](#apidoc.element.loopback.Change.rectifyAll)
1.  [function <span class="apidocSignatureSpan">loopback.Change.</span>rectifyAllChanges (callback)](#apidoc.element.loopback.Change.rectifyAllChanges)
1.  [function <span class="apidocSignatureSpan">loopback.Change.</span>rectifyChange (id, callback)](#apidoc.element.loopback.Change.rectifyChange)
1.  [function <span class="apidocSignatureSpan">loopback.Change.</span>rectifyModelChanges (modelName, modelIds, callback)](#apidoc.element.loopback.Change.rectifyModelChanges)
1.  [function <span class="apidocSignatureSpan">loopback.Change.</span>registerProperty (propertyName)](#apidoc.element.loopback.Change.registerProperty)
1.  [function <span class="apidocSignatureSpan">loopback.Change.</span>remoteMethod (name, options)](#apidoc.element.loopback.Change.remoteMethod)
1.  [function <span class="apidocSignatureSpan">loopback.Change.</span>remove (where, cb)](#apidoc.element.loopback.Change.remove)
1.  [function <span class="apidocSignatureSpan">loopback.Change.</span>removeAllListeners ()](#apidoc.element.loopback.Change.removeAllListeners)
1.  [function <span class="apidocSignatureSpan">loopback.Change.</span>removeById (id, cb)](#apidoc.element.loopback.Change.removeById)
1.  [function <span class="apidocSignatureSpan">loopback.Change.</span>removeListener ()](#apidoc.element.loopback.Change.removeListener)
1.  [function <span class="apidocSignatureSpan">loopback.Change.</span>removeObserver (operation, listener)](#apidoc.element.loopback.Change.removeObserver)
1.  [function <span class="apidocSignatureSpan">loopback.Change.</span>replaceById (id, data, cb)](#apidoc.element.loopback.Change.replaceById)
1.  [function <span class="apidocSignatureSpan">loopback.Change.</span>replaceOrCreate (data, callback)](#apidoc.element.loopback.Change.replaceOrCreate)
1.  [function <span class="apidocSignatureSpan">loopback.Change.</span>replicate (since, targetModel, options, callback)](#apidoc.element.loopback.Change.replicate)
1.  [function <span class="apidocSignatureSpan">loopback.Change.</span>revisionForInst (inst)](#apidoc.element.loopback.Change.revisionForInst)
1.  [function <span class="apidocSignatureSpan">loopback.Change.</span>scopeRemoting (scopeName, scope, define)](#apidoc.element.loopback.Change.scopeRemoting)
1.  [function <span class="apidocSignatureSpan">loopback.Change.</span>setMaxListeners ()](#apidoc.element.loopback.Change.setMaxListeners)
1.  [function <span class="apidocSignatureSpan">loopback.Change.</span>setup ()](#apidoc.element.loopback.Change.setup)
1.  [function <span class="apidocSignatureSpan">loopback.Change.</span>setupRemoting ()](#apidoc.element.loopback.Change.setupRemoting)
1.  [function <span class="apidocSignatureSpan">loopback.Change.</span>sharedCtor (data, id, options, fn)](#apidoc.element.loopback.Change.sharedCtor)
1.  [function <span class="apidocSignatureSpan">loopback.Change.</span>super_ (data, options)](#apidoc.element.loopback.Change.super_)
1.  [function <span class="apidocSignatureSpan">loopback.Change.</span>update (where, data, cb)](#apidoc.element.loopback.Change.update)
1.  [function <span class="apidocSignatureSpan">loopback.Change.</span>updateAll (where, data, cb)](#apidoc.element.loopback.Change.updateAll)
1.  [function <span class="apidocSignatureSpan">loopback.Change.</span>updateLastChange (id, data, cb)](#apidoc.element.loopback.Change.updateLastChange)
1.  [function <span class="apidocSignatureSpan">loopback.Change.</span>updateOrCreate (data, callback)](#apidoc.element.loopback.Change.updateOrCreate)
1.  [function <span class="apidocSignatureSpan">loopback.Change.</span>upsert (data, callback)](#apidoc.element.loopback.Change.upsert)
1.  [function <span class="apidocSignatureSpan">loopback.Change.</span>upsertWithWhere (where, data, callback)](#apidoc.element.loopback.Change.upsertWithWhere)
1.  [function <span class="apidocSignatureSpan">loopback.Change.</span>validate ()](#apidoc.element.loopback.Change.validate)
1.  [function <span class="apidocSignatureSpan">loopback.Change.</span>validateAsync ()](#apidoc.element.loopback.Change.validateAsync)
1.  [function <span class="apidocSignatureSpan">loopback.Change.</span>validatesAbsenceOf ()](#apidoc.element.loopback.Change.validatesAbsenceOf)
1.  [function <span class="apidocSignatureSpan">loopback.Change.</span>validatesExclusionOf ()](#apidoc.element.loopback.Change.validatesExclusionOf)
1.  [function <span class="apidocSignatureSpan">loopback.Change.</span>validatesFormatOf ()](#apidoc.element.loopback.Change.validatesFormatOf)
1.  [function <span class="apidocSignatureSpan">loopback.Change.</span>validatesInclusionOf ()](#apidoc.element.loopback.Change.validatesInclusionOf)
1.  [function <span class="apidocSignatureSpan">loopback.Change.</span>validatesLengthOf ()](#apidoc.element.loopback.Change.validatesLengthOf)
1.  [function <span class="apidocSignatureSpan">loopback.Change.</span>validatesNumericalityOf ()](#apidoc.element.loopback.Change.validatesNumericalityOf)
1.  [function <span class="apidocSignatureSpan">loopback.Change.</span>validatesPresenceOf ()](#apidoc.element.loopback.Change.validatesPresenceOf)
1.  [function <span class="apidocSignatureSpan">loopback.Change.</span>validatesUniquenessOf ()](#apidoc.element.loopback.Change.validatesUniquenessOf)
1.  object <span class="apidocSignatureSpan">loopback.Change.</span>afterCreate
1.  object <span class="apidocSignatureSpan">loopback.Change.</span>afterDestroy
1.  object <span class="apidocSignatureSpan">loopback.Change.</span>afterInitialize
1.  object <span class="apidocSignatureSpan">loopback.Change.</span>afterSave
1.  object <span class="apidocSignatureSpan">loopback.Change.</span>afterUpdate
1.  object <span class="apidocSignatureSpan">loopback.Change.</span>afterValidate
1.  object <span class="apidocSignatureSpan">loopback.Change.</span>beforeCreate
1.  object <span class="apidocSignatureSpan">loopback.Change.</span>beforeDestroy
1.  object <span class="apidocSignatureSpan">loopback.Change.</span>beforeSave
1.  object <span class="apidocSignatureSpan">loopback.Change.</span>beforeUpdate
1.  object <span class="apidocSignatureSpan">loopback.Change.</span>beforeValidate
1.  object <span class="apidocSignatureSpan">loopback.Change.</span>definition
1.  object <span class="apidocSignatureSpan">loopback.Change.</span>getter
1.  object <span class="apidocSignatureSpan">loopback.Change.</span>registry
1.  object <span class="apidocSignatureSpan">loopback.Change.</span>setter
1.  object <span class="apidocSignatureSpan">loopback.Change.</span>settings
1.  object <span class="apidocSignatureSpan">loopback.Change.</span>sharedClass
1.  string <span class="apidocSignatureSpan">loopback.Change.</span>CREATE
1.  string <span class="apidocSignatureSpan">loopback.Change.</span>DELETE
1.  string <span class="apidocSignatureSpan">loopback.Change.</span>UNKNOWN
1.  string <span class="apidocSignatureSpan">loopback.Change.</span>UPDATE

#### [module loopback.Change.Conflict](#apidoc.module.loopback.Change.Conflict)
1.  [function <span class="apidocSignatureSpan">loopback.Change.</span>Conflict (modelId, SourceModel, TargetModel)](#apidoc.element.loopback.Change.Conflict.Conflict)

#### [module loopback.Change.Conflict.prototype](#apidoc.module.loopback.Change.Conflict.prototype)
1.  [function <span class="apidocSignatureSpan">loopback.Change.Conflict.prototype.</span>changes (cb)](#apidoc.element.loopback.Change.Conflict.prototype.changes)
1.  [function <span class="apidocSignatureSpan">loopback.Change.Conflict.prototype.</span>models (cb)](#apidoc.element.loopback.Change.Conflict.prototype.models)
1.  [function <span class="apidocSignatureSpan">loopback.Change.Conflict.prototype.</span>resolve (cb)](#apidoc.element.loopback.Change.Conflict.prototype.resolve)
1.  [function <span class="apidocSignatureSpan">loopback.Change.Conflict.prototype.</span>resolveManually (data, cb)](#apidoc.element.loopback.Change.Conflict.prototype.resolveManually)
1.  [function <span class="apidocSignatureSpan">loopback.Change.Conflict.prototype.</span>resolveUsingSource (cb)](#apidoc.element.loopback.Change.Conflict.prototype.resolveUsingSource)
1.  [function <span class="apidocSignatureSpan">loopback.Change.Conflict.prototype.</span>resolveUsingTarget (cb)](#apidoc.element.loopback.Change.Conflict.prototype.resolveUsingTarget)
1.  [function <span class="apidocSignatureSpan">loopback.Change.Conflict.prototype.</span>swapParties ()](#apidoc.element.loopback.Change.Conflict.prototype.swapParties)
1.  [function <span class="apidocSignatureSpan">loopback.Change.Conflict.prototype.</span>type (cb)](#apidoc.element.loopback.Change.Conflict.prototype.type)

#### [module loopback.Change.getter](#apidoc.module.loopback.Change.getter)
1.  [function <span class="apidocSignatureSpan">loopback.Change.getter.</span>id ()](#apidoc.element.loopback.Change.getter.id)

#### [module loopback.Change.prototype](#apidoc.module.loopback.Change.prototype)
1.  [function <span class="apidocSignatureSpan">loopback.Change.prototype.</span>conflictsWith (change)](#apidoc.element.loopback.Change.prototype.conflictsWith)
1.  [function <span class="apidocSignatureSpan">loopback.Change.prototype.</span>currentRevision (cb)](#apidoc.element.loopback.Change.prototype.currentRevision)
1.  [function <span class="apidocSignatureSpan">loopback.Change.prototype.</span>debug ()](#apidoc.element.loopback.Change.prototype.debug)
1.  [function <span class="apidocSignatureSpan">loopback.Change.prototype.</span>equals (change)](#apidoc.element.loopback.Change.prototype.equals)
1.  [function <span class="apidocSignatureSpan">loopback.Change.prototype.</span>getModel (callback)](#apidoc.element.loopback.Change.prototype.getModel)
1.  [function <span class="apidocSignatureSpan">loopback.Change.prototype.</span>getModelCtor ()](#apidoc.element.loopback.Change.prototype.getModelCtor)
1.  [function <span class="apidocSignatureSpan">loopback.Change.prototype.</span>getModelId ()](#apidoc.element.loopback.Change.prototype.getModelId)
1.  [function <span class="apidocSignatureSpan">loopback.Change.prototype.</span>isBasedOn (change)](#apidoc.element.loopback.Change.prototype.isBasedOn)
1.  [function <span class="apidocSignatureSpan">loopback.Change.prototype.</span>rectify (cb)](#apidoc.element.loopback.Change.prototype.rectify)
1.  [function <span class="apidocSignatureSpan">loopback.Change.prototype.</span>type ()](#apidoc.element.loopback.Change.prototype.type)
1.  object <span class="apidocSignatureSpan">loopback.Change.prototype.</span>id

#### [module loopback.Change.settings](#apidoc.module.loopback.Change.settings)
1.  boolean <span class="apidocSignatureSpan">loopback.Change.settings.</span>replaceOnPUT
1.  boolean <span class="apidocSignatureSpan">loopback.Change.settings.</span>strict
1.  boolean <span class="apidocSignatureSpan">loopback.Change.settings.</span>trackChanges
1.  [function <span class="apidocSignatureSpan">loopback.Change.settings.</span>base (data, options)](#apidoc.element.loopback.Change.settings.base)

#### [module loopback.Change.sharedClass](#apidoc.module.loopback.Change.sharedClass)
1.  [function <span class="apidocSignatureSpan">loopback.Change.sharedClass.</span>ctor (data, options)](#apidoc.element.loopback.Change.sharedClass.ctor)
1.  object <span class="apidocSignatureSpan">loopback.Change.sharedClass.</span>_disabledMethods
1.  object <span class="apidocSignatureSpan">loopback.Change.sharedClass.</span>_methods
1.  object <span class="apidocSignatureSpan">loopback.Change.sharedClass.</span>_resolvers
1.  object <span class="apidocSignatureSpan">loopback.Change.sharedClass.</span>http
1.  object <span class="apidocSignatureSpan">loopback.Change.sharedClass.</span>sharedCtor
1.  string <span class="apidocSignatureSpan">loopback.Change.sharedClass.</span>name

#### [module loopback.Checkpoint](#apidoc.module.loopback.Checkpoint)
1.  [function <span class="apidocSignatureSpan">loopback.</span>Checkpoint (data, options)](#apidoc.element.loopback.Checkpoint.Checkpoint)
1.  [function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>ValidationError (obj)](#apidoc.element.loopback.Checkpoint.ValidationError)
1.  [function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>_ACL (ACL)](#apidoc.element.loopback.Checkpoint._ACL)
1.  [function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>_defineChangeModel ()](#apidoc.element.loopback.Checkpoint._defineChangeModel)
1.  [function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>_getAccessTypeForMethod (method)](#apidoc.element.loopback.Checkpoint._getAccessTypeForMethod)
1.  [function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>_getSingleton (cb)](#apidoc.element.loopback.Checkpoint._getSingleton)
1.  [function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>_notifyBaseObservers (operation, context, callback)](#apidoc.element.loopback.Checkpoint._notifyBaseObservers)
1.  [function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>_runWhenAttachedToApp (fn)](#apidoc.element.loopback.Checkpoint._runWhenAttachedToApp)
1.  [function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>addListener ()](#apidoc.element.loopback.Checkpoint.addListener)
1.  [function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>afterRemote (name, fn)](#apidoc.element.loopback.Checkpoint.afterRemote)
1.  [function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>afterRemoteError (name, fn)](#apidoc.element.loopback.Checkpoint.afterRemoteError)
1.  [function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>attachTo (dataSource)](#apidoc.element.loopback.Checkpoint.attachTo)
1.  [function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>beforeRemote (name, fn)](#apidoc.element.loopback.Checkpoint.beforeRemote)
1.  [function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>belongsToRemoting (relationName, relation, define)](#apidoc.element.loopback.Checkpoint.belongsToRemoting)
1.  [function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>bulkUpdate (updates, options, callback)](#apidoc.element.loopback.Checkpoint.bulkUpdate)
1.  [function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>bumpLastSeq (cb)](#apidoc.element.loopback.Checkpoint.bumpLastSeq)
1.  [function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>changes (since, filter, callback)](#apidoc.element.loopback.Checkpoint.changes)
1.  [function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>checkAccess (token, modelId, sharedMethod, ctx, callback)](#apidoc.element.loopback.Checkpoint.checkAccess)
1.  [function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>checkpoint (cb)](#apidoc.element.loopback.Checkpoint.checkpoint)
1.  [function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>clearObservers (operation)](#apidoc.element.loopback.Checkpoint.clearObservers)
1.  [function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>count (where, cb)](#apidoc.element.loopback.Checkpoint.count)
1.  [function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>create (data, callback)](#apidoc.element.loopback.Checkpoint.create)
1.  [function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>createChangeFilter (since, modelFilter)](#apidoc.element.loopback.Checkpoint.createChangeFilter)
1.  [function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>createChangeStream (options, cb)](#apidoc.element.loopback.Checkpoint.createChangeStream)
1.  [function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>createOptionsFromRemotingContext (ctx)](#apidoc.element.loopback.Checkpoint.createOptionsFromRemotingContext)
1.  [function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>createUpdates (deltas, cb)](#apidoc.element.loopback.Checkpoint.createUpdates)
1.  [function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>current (cb)](#apidoc.element.loopback.Checkpoint.current)
1.  [function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>currentCheckpoint (cb)](#apidoc.element.loopback.Checkpoint.currentCheckpoint)
1.  [function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>defineProperty (prop, params)](#apidoc.element.loopback.Checkpoint.defineProperty)
1.  [function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>deleteAll (where, cb)](#apidoc.element.loopback.Checkpoint.deleteAll)
1.  [function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>deleteById (id, cb)](#apidoc.element.loopback.Checkpoint.deleteById)
1.  [function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>destroyAll (where, cb)](#apidoc.element.loopback.Checkpoint.destroyAll)
1.  [function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>destroyById (id, cb)](#apidoc.element.loopback.Checkpoint.destroyById)
1.  [function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>diff (since, remoteChanges, callback)](#apidoc.element.loopback.Checkpoint.diff)
1.  [function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>disableRemoteMethod (name, isStatic)](#apidoc.element.loopback.Checkpoint.disableRemoteMethod)
1.  [function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>disableRemoteMethodByName (name)](#apidoc.element.loopback.Checkpoint.disableRemoteMethodByName)
1.  [function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>emit ()](#apidoc.element.loopback.Checkpoint.emit)
1.  [function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>enableChangeTracking ()](#apidoc.element.loopback.Checkpoint.enableChangeTracking)
1.  [function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>eventNames ()](#apidoc.element.loopback.Checkpoint.eventNames)
1.  [function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>exists (id, cb)](#apidoc.element.loopback.Checkpoint.exists)
1.  [function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>extend (className, subclassProperties, subclassSettings)](#apidoc.element.loopback.Checkpoint.extend)
1.  [function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>find (filter, cb)](#apidoc.element.loopback.Checkpoint.find)
1.  [function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>findById (id, filter, cb)](#apidoc.element.loopback.Checkpoint.findById)
1.  [function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>findLastChange (id, cb)](#apidoc.element.loopback.Checkpoint.findLastChange)
1.  [function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>findOne (filter, cb)](#apidoc.element.loopback.Checkpoint.findOne)
1.  [function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>findOrCreate (query, data, callback)](#apidoc.element.loopback.Checkpoint.findOrCreate)
1.  [function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>forEachProperty (cb)](#apidoc.element.loopback.Checkpoint.forEachProperty)
1.  [function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>getApp (callback)](#apidoc.element.loopback.Checkpoint.getApp)
1.  [function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>getChangeModel ()](#apidoc.element.loopback.Checkpoint.getChangeModel)
1.  [function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>getDataSource ()](#apidoc.element.loopback.Checkpoint.getDataSource)
1.  [function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>getIdName ()](#apidoc.element.loopback.Checkpoint.getIdName)
1.  [function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>getMaxListeners ()](#apidoc.element.loopback.Checkpoint.getMaxListeners)
1.  [function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>getPropertyType (propName)](#apidoc.element.loopback.Checkpoint.getPropertyType)
1.  [function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>getSourceId (cb)](#apidoc.element.loopback.Checkpoint.getSourceId)
1.  [function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>handleChangeError (err, operationName)](#apidoc.element.loopback.Checkpoint.handleChangeError)
1.  [function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>hasManyRemoting (relationName, relation, define)](#apidoc.element.loopback.Checkpoint.hasManyRemoting)
1.  [function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>hasOneRemoting (relationName, relation, define)](#apidoc.element.loopback.Checkpoint.hasOneRemoting)
1.  [function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>isHiddenProperty (propertyName)](#apidoc.element.loopback.Checkpoint.isHiddenProperty)
1.  [function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>isProtectedProperty (propertyName)](#apidoc.element.loopback.Checkpoint.isProtectedProperty)
1.  [function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>listenerCount ()](#apidoc.element.loopback.Checkpoint.listenerCount)
1.  [function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>listeners ()](#apidoc.element.loopback.Checkpoint.listeners)
1.  [function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>mixin (anotherClass, options)](#apidoc.element.loopback.Checkpoint.mixin)
1.  [function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>nestRemoting (relationName, options, filterCallback)](#apidoc.element.loopback.Checkpoint.nestRemoting)
1.  [function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>notifyObserversAround (operation, context, fn, callback)](#apidoc.element.loopback.Checkpoint.notifyObserversAround)
1.  [function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>notifyObserversOf (operation, context, callback)](#apidoc.element.loopback.Checkpoint.notifyObserversOf)
1.  [function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>observe (operation, listener)](#apidoc.element.loopback.Checkpoint.observe)
1.  [function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>on ()](#apidoc.element.loopback.Checkpoint.on)
1.  [function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>once ()](#apidoc.element.loopback.Checkpoint.once)
1.  [function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>patchOrCreate (data, callback)](#apidoc.element.loopback.Checkpoint.patchOrCreate)
1.  [function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>patchOrCreateWithWhere (where, data, callback)](#apidoc.element.loopback.Checkpoint.patchOrCreateWithWhere)
1.  [function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>prependListener ()](#apidoc.element.loopback.Checkpoint.prependListener)
1.  [function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>prependOnceListener ()](#apidoc.element.loopback.Checkpoint.prependOnceListener)
1.  [function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>rectifyAllChanges (callback)](#apidoc.element.loopback.Checkpoint.rectifyAllChanges)
1.  [function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>rectifyChange (id, callback)](#apidoc.element.loopback.Checkpoint.rectifyChange)
1.  [function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>registerProperty (propertyName)](#apidoc.element.loopback.Checkpoint.registerProperty)
1.  [function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>remoteMethod (name, options)](#apidoc.element.loopback.Checkpoint.remoteMethod)
1.  [function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>remove (where, cb)](#apidoc.element.loopback.Checkpoint.remove)
1.  [function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>removeAllListeners ()](#apidoc.element.loopback.Checkpoint.removeAllListeners)
1.  [function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>removeById (id, cb)](#apidoc.element.loopback.Checkpoint.removeById)
1.  [function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>removeListener ()](#apidoc.element.loopback.Checkpoint.removeListener)
1.  [function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>removeObserver (operation, listener)](#apidoc.element.loopback.Checkpoint.removeObserver)
1.  [function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>replaceById (id, data, cb)](#apidoc.element.loopback.Checkpoint.replaceById)
1.  [function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>replaceOrCreate (data, callback)](#apidoc.element.loopback.Checkpoint.replaceOrCreate)
1.  [function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>replicate (since, targetModel, options, callback)](#apidoc.element.loopback.Checkpoint.replicate)
1.  [function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>scopeRemoting (scopeName, scope, define)](#apidoc.element.loopback.Checkpoint.scopeRemoting)
1.  [function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>setMaxListeners ()](#apidoc.element.loopback.Checkpoint.setMaxListeners)
1.  [function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>setup ()](#apidoc.element.loopback.Checkpoint.setup)
1.  [function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>setupRemoting ()](#apidoc.element.loopback.Checkpoint.setupRemoting)
1.  [function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>sharedCtor (data, id, options, fn)](#apidoc.element.loopback.Checkpoint.sharedCtor)
1.  [function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>super_ (data, options)](#apidoc.element.loopback.Checkpoint.super_)
1.  [function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>update (where, data, cb)](#apidoc.element.loopback.Checkpoint.update)
1.  [function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>updateAll (where, data, cb)](#apidoc.element.loopback.Checkpoint.updateAll)
1.  [function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>updateLastChange (id, data, cb)](#apidoc.element.loopback.Checkpoint.updateLastChange)
1.  [function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>updateOrCreate (data, callback)](#apidoc.element.loopback.Checkpoint.updateOrCreate)
1.  [function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>upsert (data, callback)](#apidoc.element.loopback.Checkpoint.upsert)
1.  [function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>upsertWithWhere (where, data, callback)](#apidoc.element.loopback.Checkpoint.upsertWithWhere)
1.  [function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>validate ()](#apidoc.element.loopback.Checkpoint.validate)
1.  [function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>validateAsync ()](#apidoc.element.loopback.Checkpoint.validateAsync)
1.  [function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>validatesAbsenceOf ()](#apidoc.element.loopback.Checkpoint.validatesAbsenceOf)
1.  [function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>validatesExclusionOf ()](#apidoc.element.loopback.Checkpoint.validatesExclusionOf)
1.  [function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>validatesFormatOf ()](#apidoc.element.loopback.Checkpoint.validatesFormatOf)
1.  [function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>validatesInclusionOf ()](#apidoc.element.loopback.Checkpoint.validatesInclusionOf)
1.  [function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>validatesLengthOf ()](#apidoc.element.loopback.Checkpoint.validatesLengthOf)
1.  [function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>validatesNumericalityOf ()](#apidoc.element.loopback.Checkpoint.validatesNumericalityOf)
1.  [function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>validatesPresenceOf ()](#apidoc.element.loopback.Checkpoint.validatesPresenceOf)
1.  [function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>validatesUniquenessOf ()](#apidoc.element.loopback.Checkpoint.validatesUniquenessOf)
1.  object <span class="apidocSignatureSpan">loopback.Checkpoint.</span>afterCreate
1.  object <span class="apidocSignatureSpan">loopback.Checkpoint.</span>afterDestroy
1.  object <span class="apidocSignatureSpan">loopback.Checkpoint.</span>afterInitialize
1.  object <span class="apidocSignatureSpan">loopback.Checkpoint.</span>afterSave
1.  object <span class="apidocSignatureSpan">loopback.Checkpoint.</span>afterUpdate
1.  object <span class="apidocSignatureSpan">loopback.Checkpoint.</span>afterValidate
1.  object <span class="apidocSignatureSpan">loopback.Checkpoint.</span>beforeCreate
1.  object <span class="apidocSignatureSpan">loopback.Checkpoint.</span>beforeDestroy
1.  object <span class="apidocSignatureSpan">loopback.Checkpoint.</span>beforeSave
1.  object <span class="apidocSignatureSpan">loopback.Checkpoint.</span>beforeUpdate
1.  object <span class="apidocSignatureSpan">loopback.Checkpoint.</span>beforeValidate
1.  object <span class="apidocSignatureSpan">loopback.Checkpoint.</span>definition
1.  object <span class="apidocSignatureSpan">loopback.Checkpoint.</span>getter
1.  object <span class="apidocSignatureSpan">loopback.Checkpoint.</span>registry
1.  object <span class="apidocSignatureSpan">loopback.Checkpoint.</span>setter
1.  object <span class="apidocSignatureSpan">loopback.Checkpoint.</span>settings
1.  object <span class="apidocSignatureSpan">loopback.Checkpoint.</span>sharedClass

#### [module loopback.Checkpoint.settings](#apidoc.module.loopback.Checkpoint.settings)
1.  boolean <span class="apidocSignatureSpan">loopback.Checkpoint.settings.</span>replaceOnPUT
1.  boolean <span class="apidocSignatureSpan">loopback.Checkpoint.settings.</span>strict
1.  [function <span class="apidocSignatureSpan">loopback.Checkpoint.settings.</span>base (data, options)](#apidoc.element.loopback.Checkpoint.settings.base)

#### [module loopback.Checkpoint.sharedClass](#apidoc.module.loopback.Checkpoint.sharedClass)
1.  [function <span class="apidocSignatureSpan">loopback.Checkpoint.sharedClass.</span>ctor (data, options)](#apidoc.element.loopback.Checkpoint.sharedClass.ctor)
1.  object <span class="apidocSignatureSpan">loopback.Checkpoint.sharedClass.</span>_disabledMethods
1.  object <span class="apidocSignatureSpan">loopback.Checkpoint.sharedClass.</span>_methods
1.  object <span class="apidocSignatureSpan">loopback.Checkpoint.sharedClass.</span>_resolvers
1.  object <span class="apidocSignatureSpan">loopback.Checkpoint.sharedClass.</span>http
1.  object <span class="apidocSignatureSpan">loopback.Checkpoint.sharedClass.</span>sharedCtor
1.  string <span class="apidocSignatureSpan">loopback.Checkpoint.sharedClass.</span>name

#### [module loopback.Connector](#apidoc.module.loopback.Connector)
1.  [function <span class="apidocSignatureSpan">loopback.</span>Connector (options)](#apidoc.element.loopback.Connector.Connector)
1.  [function <span class="apidocSignatureSpan">loopback.Connector.</span>_createJDBAdapter (jdbModule)](#apidoc.element.loopback.Connector._createJDBAdapter)
1.  [function <span class="apidocSignatureSpan">loopback.Connector.</span>super_ ()](#apidoc.element.loopback.Connector.super_)

#### [module loopback.Connector.prototype](#apidoc.module.loopback.Connector.prototype)
1.  [function <span class="apidocSignatureSpan">loopback.Connector.prototype.</span>_addCrudOperationsFromJDBAdapter (connector)](#apidoc.element.loopback.Connector.prototype._addCrudOperationsFromJDBAdapter)

#### [module loopback.DataSource](#apidoc.module.loopback.DataSource)
1.  [function <span class="apidocSignatureSpan">loopback.</span>DataSource (name, settings, modelBuilder)](#apidoc.element.loopback.DataSource.DataSource)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.</span>Any (value)](#apidoc.element.loopback.DataSource.Any)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.</span>DataAccessObject ()](#apidoc.element.loopback.DataSource.DataAccessObject)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.</span>JSON (value)](#apidoc.element.loopback.DataSource.JSON)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.</span>Text (value)](#apidoc.element.loopback.DataSource.Text)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.</span>_resolveConnector (name, loader)](#apidoc.element.loopback.DataSource._resolveConnector)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.</span>super_ ()](#apidoc.element.loopback.DataSource.super_)
1.  object <span class="apidocSignatureSpan">loopback.DataSource.</span>relationTypes

#### [module loopback.DataSource.Any](#apidoc.module.loopback.DataSource.Any)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.</span>Any (value)](#apidoc.element.loopback.DataSource.Any.Any)

#### [module loopback.DataSource.Any.prototype](#apidoc.module.loopback.DataSource.Any.prototype)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.Any.prototype.</span>toJSON ()](#apidoc.element.loopback.DataSource.Any.prototype.toJSON)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.Any.prototype.</span>toObject ()](#apidoc.element.loopback.DataSource.Any.prototype.toObject)

#### [module loopback.DataSource.DataAccessObject](#apidoc.module.loopback.DataSource.DataAccessObject)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.</span>DataAccessObject ()](#apidoc.element.loopback.DataSource.DataAccessObject.DataAccessObject)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.</span>Transaction (connector, connection)](#apidoc.element.loopback.DataSource.DataAccessObject.Transaction)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.</span>_allowExtendedOperators (options)](#apidoc.element.loopback.DataSource.DataAccessObject._allowExtendedOperators)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.</span>_coerce (where, options)](#apidoc.element.loopback.DataSource.DataAccessObject._coerce)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.</span>_forDB (data)](#apidoc.element.loopback.DataSource.DataAccessObject._forDB)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.</span>_getSetting (key)](#apidoc.element.loopback.DataSource.DataAccessObject._getSetting)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.</span>_normalize (filter, options)](#apidoc.element.loopback.DataSource.DataAccessObject._normalize)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.</span>all ()](#apidoc.element.loopback.DataSource.DataAccessObject.all)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.</span>applyProperties (data, inst)](#apidoc.element.loopback.DataSource.DataAccessObject.applyProperties)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.</span>applyScope (query, inst)](#apidoc.element.loopback.DataSource.DataAccessObject.applyScope)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.</span>beginTransaction (options, cb)](#apidoc.element.loopback.DataSource.DataAccessObject.beginTransaction)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.</span>belongsTo (modelTo, params)](#apidoc.element.loopback.DataSource.DataAccessObject.belongsTo)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.</span>count (where, options, cb)](#apidoc.element.loopback.DataSource.DataAccessObject.count)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.</span>create (data, options, cb)](#apidoc.element.loopback.DataSource.DataAccessObject.create)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.</span>defaultScope (target, inst)](#apidoc.element.loopback.DataSource.DataAccessObject.defaultScope)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.</span>deleteAll (where, options, cb)](#apidoc.element.loopback.DataSource.DataAccessObject.deleteAll)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.</span>deleteById (id, options, cb)](#apidoc.element.loopback.DataSource.DataAccessObject.deleteById)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.</span>destroyAll (where, options, cb)](#apidoc.element.loopback.DataSource.DataAccessObject.destroyAll)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.</span>destroyById (id, options, cb)](#apidoc.element.loopback.DataSource.DataAccessObject.destroyById)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.</span>embedsMany (modelTo, params)](#apidoc.element.loopback.DataSource.DataAccessObject.embedsMany)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.</span>embedsOne (modelTo, params)](#apidoc.element.loopback.DataSource.DataAccessObject.embedsOne)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.</span>exists (id, options, cb)](#apidoc.element.loopback.DataSource.DataAccessObject.exists)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.</span>find (query, options, cb)](#apidoc.element.loopback.DataSource.DataAccessObject.find)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.</span>findById (id, filter, options, cb)](#apidoc.element.loopback.DataSource.DataAccessObject.findById)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.</span>findByIds (ids, query, options, cb)](#apidoc.element.loopback.DataSource.DataAccessObject.findByIds)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.</span>findOne (query, options, cb)](#apidoc.element.loopback.DataSource.DataAccessObject.findOne)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.</span>findOrCreate (query, data, options, cb)](#apidoc.element.loopback.DataSource.DataAccessObject.findOrCreate)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.</span>getConnector ()](#apidoc.element.loopback.DataSource.DataAccessObject.getConnector)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.</span>hasAndBelongsToMany (modelTo, params)](#apidoc.element.loopback.DataSource.DataAccessObject.hasAndBelongsToMany)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.</span>hasMany (modelTo, params)](#apidoc.element.loopback.DataSource.DataAccessObject.hasMany)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.</span>hasOne (modelTo, params)](#apidoc.element.loopback.DataSource.DataAccessObject.hasOne)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.</span>include (objects, include, options, cb)](#apidoc.element.loopback.DataSource.DataAccessObject.include)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.</span>lookupModel (data)](#apidoc.element.loopback.DataSource.DataAccessObject.lookupModel)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.</span>normalizeInclude (include)](#apidoc.element.loopback.DataSource.DataAccessObject.normalizeInclude)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.</span>patchOrCreate (data, options, cb)](#apidoc.element.loopback.DataSource.DataAccessObject.patchOrCreate)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.</span>patchOrCreateWithWhere (where, data, options, cb)](#apidoc.element.loopback.DataSource.DataAccessObject.patchOrCreateWithWhere)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.</span>referencesMany (modelTo, params)](#apidoc.element.loopback.DataSource.DataAccessObject.referencesMany)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.</span>remove (where, options, cb)](#apidoc.element.loopback.DataSource.DataAccessObject.remove)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.</span>removeById (id, options, cb)](#apidoc.element.loopback.DataSource.DataAccessObject.removeById)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.</span>replaceById (id, data, options, cb)](#apidoc.element.loopback.DataSource.DataAccessObject.replaceById)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.</span>replaceOrCreate (data, options, cb)](#apidoc.element.loopback.DataSource.DataAccessObject.replaceOrCreate)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.</span>scope (name, query, targetClass, methods, options)](#apidoc.element.loopback.DataSource.DataAccessObject.scope)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.</span>update (where, data, options, cb)](#apidoc.element.loopback.DataSource.DataAccessObject.update)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.</span>updateAll (where, data, options, cb)](#apidoc.element.loopback.DataSource.DataAccessObject.updateAll)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.</span>updateOrCreate (data, options, cb)](#apidoc.element.loopback.DataSource.DataAccessObject.updateOrCreate)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.</span>upsert (data, options, cb)](#apidoc.element.loopback.DataSource.DataAccessObject.upsert)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.</span>upsertWithWhere (where, data, options, cb)](#apidoc.element.loopback.DataSource.DataAccessObject.upsertWithWhere)
1.  object <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.</span>_mixins

#### [module loopback.DataSource.DataAccessObject.Transaction.prototype](#apidoc.module.loopback.DataSource.DataAccessObject.Transaction.prototype)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.Transaction.prototype.</span>_notifyBaseObservers (operation, context, callback)](#apidoc.element.loopback.DataSource.DataAccessObject.Transaction.prototype._notifyBaseObservers)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.Transaction.prototype.</span>clearObservers (operation)](#apidoc.element.loopback.DataSource.DataAccessObject.Transaction.prototype.clearObservers)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.Transaction.prototype.</span>commit (cb)](#apidoc.element.loopback.DataSource.DataAccessObject.Transaction.prototype.commit)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.Transaction.prototype.</span>notifyObserversAround (operation, context, fn, callback)](#apidoc.element.loopback.DataSource.DataAccessObject.Transaction.prototype.notifyObserversAround)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.Transaction.prototype.</span>notifyObserversOf (operation, context, callback)](#apidoc.element.loopback.DataSource.DataAccessObject.Transaction.prototype.notifyObserversOf)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.Transaction.prototype.</span>observe (operation, listener)](#apidoc.element.loopback.DataSource.DataAccessObject.Transaction.prototype.observe)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.Transaction.prototype.</span>removeObserver (operation, listener)](#apidoc.element.loopback.DataSource.DataAccessObject.Transaction.prototype.removeObserver)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.Transaction.prototype.</span>rollback (cb)](#apidoc.element.loopback.DataSource.DataAccessObject.Transaction.prototype.rollback)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.Transaction.prototype.</span>toJSON ()](#apidoc.element.loopback.DataSource.DataAccessObject.Transaction.prototype.toJSON)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.Transaction.prototype.</span>toString ()](#apidoc.element.loopback.DataSource.DataAccessObject.Transaction.prototype.toString)
1.  object <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.Transaction.prototype.</span>_mixins

#### [module loopback.DataSource.DataAccessObject.prototype](#apidoc.module.loopback.DataSource.DataAccessObject.prototype)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.prototype.</span>delete (options, cb)](#apidoc.element.loopback.DataSource.DataAccessObject.prototype.delete)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.prototype.</span>destroy (options, cb)](#apidoc.element.loopback.DataSource.DataAccessObject.prototype.destroy)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.prototype.</span>getConnector ()](#apidoc.element.loopback.DataSource.DataAccessObject.prototype.getConnector)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.prototype.</span>isNewRecord ()](#apidoc.element.loopback.DataSource.DataAccessObject.prototype.isNewRecord)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.prototype.</span>patchAttributes (data, options, cb)](#apidoc.element.loopback.DataSource.DataAccessObject.prototype.patchAttributes)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.prototype.</span>reload (cb)](#apidoc.element.loopback.DataSource.DataAccessObject.prototype.reload)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.prototype.</span>remove (options, cb)](#apidoc.element.loopback.DataSource.DataAccessObject.prototype.remove)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.prototype.</span>replaceAttributes (data, options, cb)](#apidoc.element.loopback.DataSource.DataAccessObject.prototype.replaceAttributes)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.prototype.</span>save (options, cb)](#apidoc.element.loopback.DataSource.DataAccessObject.prototype.save)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.prototype.</span>setAttribute (name, value)](#apidoc.element.loopback.DataSource.DataAccessObject.prototype.setAttribute)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.prototype.</span>setAttributes (data)](#apidoc.element.loopback.DataSource.DataAccessObject.prototype.setAttributes)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.prototype.</span>unsetAttribute (name, nullify)](#apidoc.element.loopback.DataSource.DataAccessObject.prototype.unsetAttribute)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.prototype.</span>updateAttribute (name, value, options, cb)](#apidoc.element.loopback.DataSource.DataAccessObject.prototype.updateAttribute)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.prototype.</span>updateAttributes (data, options, cb)](#apidoc.element.loopback.DataSource.DataAccessObject.prototype.updateAttributes)

#### [module loopback.DataSource.JSON](#apidoc.module.loopback.DataSource.JSON)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.</span>JSON (value)](#apidoc.element.loopback.DataSource.JSON.JSON)

#### [module loopback.DataSource.JSON.prototype](#apidoc.module.loopback.DataSource.JSON.prototype)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.JSON.prototype.</span>toJSON ()](#apidoc.element.loopback.DataSource.JSON.prototype.toJSON)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.JSON.prototype.</span>toObject ()](#apidoc.element.loopback.DataSource.JSON.prototype.toObject)

#### [module loopback.DataSource.Text](#apidoc.module.loopback.DataSource.Text)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.</span>Text (value)](#apidoc.element.loopback.DataSource.Text.Text)

#### [module loopback.DataSource.Text.prototype](#apidoc.module.loopback.DataSource.Text.prototype)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.Text.prototype.</span>toJSON ()](#apidoc.element.loopback.DataSource.Text.prototype.toJSON)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.Text.prototype.</span>toObject ()](#apidoc.element.loopback.DataSource.Text.prototype.toObject)

#### [module loopback.DataSource.prototype](#apidoc.module.loopback.DataSource.prototype)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.prototype.</span>_setupConnector ()](#apidoc.element.loopback.DataSource.prototype._setupConnector)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.prototype.</span>attach (modelClass)](#apidoc.element.loopback.DataSource.prototype.attach)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.prototype.</span>automigrate (models, cb)](#apidoc.element.loopback.DataSource.prototype.automigrate)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.prototype.</span>autoupdate (models, cb)](#apidoc.element.loopback.DataSource.prototype.autoupdate)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.prototype.</span>buildModelFromInstance (name, json, options)](#apidoc.element.loopback.DataSource.prototype.buildModelFromInstance)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.prototype.</span>columnMetadata (modelName, propertyName)](#apidoc.element.loopback.DataSource.prototype.columnMetadata)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.prototype.</span>columnName (modelName, propertyName)](#apidoc.element.loopback.DataSource.prototype.columnName)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.prototype.</span>columnNames (modelName)](#apidoc.element.loopback.DataSource.prototype.columnNames)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.prototype.</span>copyModel (Master)](#apidoc.element.loopback.DataSource.prototype.copyModel)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.prototype.</span>createModel (className, properties, settings)](#apidoc.element.loopback.DataSource.prototype.createModel)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.prototype.</span>define (className, properties, settings)](#apidoc.element.loopback.DataSource.prototype.define)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.prototype.</span>defineForeignKey (className, key, foreignClassName, pkName)](#apidoc.element.loopback.DataSource.prototype.defineForeignKey)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.prototype.</span>defineOperation (name, options, fn)](#apidoc.element.loopback.DataSource.prototype.defineOperation)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.prototype.</span>defineProperty (model, prop, params)](#apidoc.element.loopback.DataSource.prototype.defineProperty)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.prototype.</span>defineRelations (modelClass, relations)](#apidoc.element.loopback.DataSource.prototype.defineRelations)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.prototype.</span>defineScopes (modelClass, scopes)](#apidoc.element.loopback.DataSource.prototype.defineScopes)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.prototype.</span>disableRemote (operation)](#apidoc.element.loopback.DataSource.prototype.disableRemote)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.prototype.</span>disconnect (cb)](#apidoc.element.loopback.DataSource.prototype.disconnect)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.prototype.</span>discoverAndBuildModels (modelName, options, cb)](#apidoc.element.loopback.DataSource.prototype.discoverAndBuildModels)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.prototype.</span>discoverAndBuildModelsSync (modelName, options)](#apidoc.element.loopback.DataSource.prototype.discoverAndBuildModelsSync)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.prototype.</span>discoverExportedForeignKeys (modelName, options, cb)](#apidoc.element.loopback.DataSource.prototype.discoverExportedForeignKeys)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.prototype.</span>discoverExportedForeignKeysSync (modelName, options)](#apidoc.element.loopback.DataSource.prototype.discoverExportedForeignKeysSync)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.prototype.</span>discoverForeignKeys (modelName, options, cb)](#apidoc.element.loopback.DataSource.prototype.discoverForeignKeys)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.prototype.</span>discoverForeignKeysSync (modelName, options)](#apidoc.element.loopback.DataSource.prototype.discoverForeignKeysSync)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.prototype.</span>discoverModelDefinitions (options, cb)](#apidoc.element.loopback.DataSource.prototype.discoverModelDefinitions)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.prototype.</span>discoverModelDefinitionsSync (options)](#apidoc.element.loopback.DataSource.prototype.discoverModelDefinitionsSync)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.prototype.</span>discoverModelProperties (modelName, options, cb)](#apidoc.element.loopback.DataSource.prototype.discoverModelProperties)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.prototype.</span>discoverModelPropertiesSync (modelName, options)](#apidoc.element.loopback.DataSource.prototype.discoverModelPropertiesSync)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.prototype.</span>discoverPrimaryKeys (modelName, options, cb)](#apidoc.element.loopback.DataSource.prototype.discoverPrimaryKeys)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.prototype.</span>discoverPrimaryKeysSync (modelName, options)](#apidoc.element.loopback.DataSource.prototype.discoverPrimaryKeysSync)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.prototype.</span>discoverSchema (modelName, options, cb)](#apidoc.element.loopback.DataSource.prototype.discoverSchema)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.prototype.</span>discoverSchemas (modelName, options, cb)](#apidoc.element.loopback.DataSource.prototype.discoverSchemas)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.prototype.</span>discoverSchemasSync (modelName, options)](#apidoc.element.loopback.DataSource.prototype.discoverSchemasSync)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.prototype.</span>enableRemote (operation)](#apidoc.element.loopback.DataSource.prototype.enableRemote)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.prototype.</span>freeze ()](#apidoc.element.loopback.DataSource.prototype.freeze)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.prototype.</span>getModel (name, forceCreate)](#apidoc.element.loopback.DataSource.prototype.getModel)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.prototype.</span>getModelDefinition (name)](#apidoc.element.loopback.DataSource.prototype.getModelDefinition)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.prototype.</span>getOperation (operation)](#apidoc.element.loopback.DataSource.prototype.getOperation)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.prototype.</span>getTypes ()](#apidoc.element.loopback.DataSource.prototype.getTypes)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.prototype.</span>idColumnName (modelName)](#apidoc.element.loopback.DataSource.prototype.idColumnName)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.prototype.</span>idName (modelName)](#apidoc.element.loopback.DataSource.prototype.idName)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.prototype.</span>idNames (modelName)](#apidoc.element.loopback.DataSource.prototype.idNames)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.prototype.</span>idProperty (modelName)](#apidoc.element.loopback.DataSource.prototype.idProperty)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.prototype.</span>isActual (models, cb)](#apidoc.element.loopback.DataSource.prototype.isActual)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.prototype.</span>isRelational ()](#apidoc.element.loopback.DataSource.prototype.isRelational)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.prototype.</span>log (sql, t)](#apidoc.element.loopback.DataSource.prototype.log)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.prototype.</span>mixin (ModelCtor)](#apidoc.element.loopback.DataSource.prototype.mixin)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.prototype.</span>operations ()](#apidoc.element.loopback.DataSource.prototype.operations)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.prototype.</span>ping (cb)](#apidoc.element.loopback.DataSource.prototype.ping)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.prototype.</span>ready (obj, args)](#apidoc.element.loopback.DataSource.prototype.ready)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.prototype.</span>setup (name, settings)](#apidoc.element.loopback.DataSource.prototype.setup)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.prototype.</span>setupDataAccess (modelClass, settings)](#apidoc.element.loopback.DataSource.prototype.setupDataAccess)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.prototype.</span>supportTypes (types)](#apidoc.element.loopback.DataSource.prototype.supportTypes)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.prototype.</span>tableName (modelName)](#apidoc.element.loopback.DataSource.prototype.tableName)
1.  [function <span class="apidocSignatureSpan">loopback.DataSource.prototype.</span>transaction ()](#apidoc.element.loopback.DataSource.prototype.transaction)

#### [module loopback.Email](#apidoc.module.loopback.Email)
1.  [function <span class="apidocSignatureSpan">loopback.</span>Email (data, options)](#apidoc.element.loopback.Email.Email)
1.  [function <span class="apidocSignatureSpan">loopback.Email.</span>ValidationError (obj)](#apidoc.element.loopback.Email.ValidationError)
1.  [function <span class="apidocSignatureSpan">loopback.Email.</span>_ACL (ACL)](#apidoc.element.loopback.Email._ACL)
1.  [function <span class="apidocSignatureSpan">loopback.Email.</span>_getAccessTypeForMethod (method)](#apidoc.element.loopback.Email._getAccessTypeForMethod)
1.  [function <span class="apidocSignatureSpan">loopback.Email.</span>_notifyBaseObservers (operation, context, callback)](#apidoc.element.loopback.Email._notifyBaseObservers)
1.  [function <span class="apidocSignatureSpan">loopback.Email.</span>_runWhenAttachedToApp (fn)](#apidoc.element.loopback.Email._runWhenAttachedToApp)
1.  [function <span class="apidocSignatureSpan">loopback.Email.</span>addListener ()](#apidoc.element.loopback.Email.addListener)
1.  [function <span class="apidocSignatureSpan">loopback.Email.</span>afterRemote (name, fn)](#apidoc.element.loopback.Email.afterRemote)
1.  [function <span class="apidocSignatureSpan">loopback.Email.</span>afterRemoteError (name, fn)](#apidoc.element.loopback.Email.afterRemoteError)
1.  [function <span class="apidocSignatureSpan">loopback.Email.</span>attachTo (dataSource)](#apidoc.element.loopback.Email.attachTo)
1.  [function <span class="apidocSignatureSpan">loopback.Email.</span>beforeRemote (name, fn)](#apidoc.element.loopback.Email.beforeRemote)
1.  [function <span class="apidocSignatureSpan">loopback.Email.</span>belongsToRemoting (relationName, relation, define)](#apidoc.element.loopback.Email.belongsToRemoting)
1.  [function <span class="apidocSignatureSpan">loopback.Email.</span>checkAccess (token, modelId, sharedMethod, ctx, callback)](#apidoc.element.loopback.Email.checkAccess)
1.  [function <span class="apidocSignatureSpan">loopback.Email.</span>clearObservers (operation)](#apidoc.element.loopback.Email.clearObservers)
1.  [function <span class="apidocSignatureSpan">loopback.Email.</span>createOptionsFromRemotingContext (ctx)](#apidoc.element.loopback.Email.createOptionsFromRemotingContext)
1.  [function <span class="apidocSignatureSpan">loopback.Email.</span>defineProperty (prop, params)](#apidoc.element.loopback.Email.defineProperty)
1.  [function <span class="apidocSignatureSpan">loopback.Email.</span>disableRemoteMethod (name, isStatic)](#apidoc.element.loopback.Email.disableRemoteMethod)
1.  [function <span class="apidocSignatureSpan">loopback.Email.</span>disableRemoteMethodByName (name)](#apidoc.element.loopback.Email.disableRemoteMethodByName)
1.  [function <span class="apidocSignatureSpan">loopback.Email.</span>emit ()](#apidoc.element.loopback.Email.emit)
1.  [function <span class="apidocSignatureSpan">loopback.Email.</span>eventNames ()](#apidoc.element.loopback.Email.eventNames)
1.  [function <span class="apidocSignatureSpan">loopback.Email.</span>extend (className, subclassProperties, subclassSettings)](#apidoc.element.loopback.Email.extend)
1.  [function <span class="apidocSignatureSpan">loopback.Email.</span>forEachProperty (cb)](#apidoc.element.loopback.Email.forEachProperty)
1.  [function <span class="apidocSignatureSpan">loopback.Email.</span>getApp (callback)](#apidoc.element.loopback.Email.getApp)
1.  [function <span class="apidocSignatureSpan">loopback.Email.</span>getDataSource ()](#apidoc.element.loopback.Email.getDataSource)
1.  [function <span class="apidocSignatureSpan">loopback.Email.</span>getMaxListeners ()](#apidoc.element.loopback.Email.getMaxListeners)
1.  [function <span class="apidocSignatureSpan">loopback.Email.</span>getPropertyType (propName)](#apidoc.element.loopback.Email.getPropertyType)
1.  [function <span class="apidocSignatureSpan">loopback.Email.</span>hasManyRemoting (relationName, relation, define)](#apidoc.element.loopback.Email.hasManyRemoting)
1.  [function <span class="apidocSignatureSpan">loopback.Email.</span>hasOneRemoting (relationName, relation, define)](#apidoc.element.loopback.Email.hasOneRemoting)
1.  [function <span class="apidocSignatureSpan">loopback.Email.</span>isHiddenProperty (propertyName)](#apidoc.element.loopback.Email.isHiddenProperty)
1.  [function <span class="apidocSignatureSpan">loopback.Email.</span>isProtectedProperty (propertyName)](#apidoc.element.loopback.Email.isProtectedProperty)
1.  [function <span class="apidocSignatureSpan">loopback.Email.</span>listenerCount ()](#apidoc.element.loopback.Email.listenerCount)
1.  [function <span class="apidocSignatureSpan">loopback.Email.</span>listeners ()](#apidoc.element.loopback.Email.listeners)
1.  [function <span class="apidocSignatureSpan">loopback.Email.</span>mixin (anotherClass, options)](#apidoc.element.loopback.Email.mixin)
1.  [function <span class="apidocSignatureSpan">loopback.Email.</span>nestRemoting (relationName, options, filterCallback)](#apidoc.element.loopback.Email.nestRemoting)
1.  [function <span class="apidocSignatureSpan">loopback.Email.</span>notifyObserversAround (operation, context, fn, callback)](#apidoc.element.loopback.Email.notifyObserversAround)
1.  [function <span class="apidocSignatureSpan">loopback.Email.</span>notifyObserversOf (operation, context, callback)](#apidoc.element.loopback.Email.notifyObserversOf)
1.  [function <span class="apidocSignatureSpan">loopback.Email.</span>observe (operation, listener)](#apidoc.element.loopback.Email.observe)
1.  [function <span class="apidocSignatureSpan">loopback.Email.</span>on ()](#apidoc.element.loopback.Email.on)
1.  [function <span class="apidocSignatureSpan">loopback.Email.</span>once ()](#apidoc.element.loopback.Email.once)
1.  [function <span class="apidocSignatureSpan">loopback.Email.</span>prependListener ()](#apidoc.element.loopback.Email.prependListener)
1.  [function <span class="apidocSignatureSpan">loopback.Email.</span>prependOnceListener ()](#apidoc.element.loopback.Email.prependOnceListener)
1.  [function <span class="apidocSignatureSpan">loopback.Email.</span>registerProperty (propertyName)](#apidoc.element.loopback.Email.registerProperty)
1.  [function <span class="apidocSignatureSpan">loopback.Email.</span>remoteMethod (name, options)](#apidoc.element.loopback.Email.remoteMethod)
1.  [function <span class="apidocSignatureSpan">loopback.Email.</span>removeAllListeners ()](#apidoc.element.loopback.Email.removeAllListeners)
1.  [function <span class="apidocSignatureSpan">loopback.Email.</span>removeListener ()](#apidoc.element.loopback.Email.removeListener)
1.  [function <span class="apidocSignatureSpan">loopback.Email.</span>removeObserver (operation, listener)](#apidoc.element.loopback.Email.removeObserver)
1.  [function <span class="apidocSignatureSpan">loopback.Email.</span>scopeRemoting (scopeName, scope, define)](#apidoc.element.loopback.Email.scopeRemoting)
1.  [function <span class="apidocSignatureSpan">loopback.Email.</span>send ()](#apidoc.element.loopback.Email.send)
1.  [function <span class="apidocSignatureSpan">loopback.Email.</span>setMaxListeners ()](#apidoc.element.loopback.Email.setMaxListeners)
1.  [function <span class="apidocSignatureSpan">loopback.Email.</span>setup ()](#apidoc.element.loopback.Email.setup)
1.  [function <span class="apidocSignatureSpan">loopback.Email.</span>sharedCtor (data, id, options, fn)](#apidoc.element.loopback.Email.sharedCtor)
1.  [function <span class="apidocSignatureSpan">loopback.Email.</span>super_ (data, options)](#apidoc.element.loopback.Email.super_)
1.  [function <span class="apidocSignatureSpan">loopback.Email.</span>validate ()](#apidoc.element.loopback.Email.validate)
1.  [function <span class="apidocSignatureSpan">loopback.Email.</span>validateAsync ()](#apidoc.element.loopback.Email.validateAsync)
1.  [function <span class="apidocSignatureSpan">loopback.Email.</span>validatesAbsenceOf ()](#apidoc.element.loopback.Email.validatesAbsenceOf)
1.  [function <span class="apidocSignatureSpan">loopback.Email.</span>validatesExclusionOf ()](#apidoc.element.loopback.Email.validatesExclusionOf)
1.  [function <span class="apidocSignatureSpan">loopback.Email.</span>validatesFormatOf ()](#apidoc.element.loopback.Email.validatesFormatOf)
1.  [function <span class="apidocSignatureSpan">loopback.Email.</span>validatesInclusionOf ()](#apidoc.element.loopback.Email.validatesInclusionOf)
1.  [function <span class="apidocSignatureSpan">loopback.Email.</span>validatesLengthOf ()](#apidoc.element.loopback.Email.validatesLengthOf)
1.  [function <span class="apidocSignatureSpan">loopback.Email.</span>validatesNumericalityOf ()](#apidoc.element.loopback.Email.validatesNumericalityOf)
1.  [function <span class="apidocSignatureSpan">loopback.Email.</span>validatesPresenceOf ()](#apidoc.element.loopback.Email.validatesPresenceOf)
1.  [function <span class="apidocSignatureSpan">loopback.Email.</span>validatesUniquenessOf ()](#apidoc.element.loopback.Email.validatesUniquenessOf)
1.  object <span class="apidocSignatureSpan">loopback.Email.</span>afterCreate
1.  object <span class="apidocSignatureSpan">loopback.Email.</span>afterDestroy
1.  object <span class="apidocSignatureSpan">loopback.Email.</span>afterInitialize
1.  object <span class="apidocSignatureSpan">loopback.Email.</span>afterSave
1.  object <span class="apidocSignatureSpan">loopback.Email.</span>afterUpdate
1.  object <span class="apidocSignatureSpan">loopback.Email.</span>afterValidate
1.  object <span class="apidocSignatureSpan">loopback.Email.</span>beforeCreate
1.  object <span class="apidocSignatureSpan">loopback.Email.</span>beforeDestroy
1.  object <span class="apidocSignatureSpan">loopback.Email.</span>beforeSave
1.  object <span class="apidocSignatureSpan">loopback.Email.</span>beforeUpdate
1.  object <span class="apidocSignatureSpan">loopback.Email.</span>beforeValidate
1.  object <span class="apidocSignatureSpan">loopback.Email.</span>definition
1.  object <span class="apidocSignatureSpan">loopback.Email.</span>getter
1.  object <span class="apidocSignatureSpan">loopback.Email.</span>registry
1.  object <span class="apidocSignatureSpan">loopback.Email.</span>setter
1.  object <span class="apidocSignatureSpan">loopback.Email.</span>settings
1.  object <span class="apidocSignatureSpan">loopback.Email.</span>sharedClass

#### [module loopback.Email.prototype](#apidoc.module.loopback.Email.prototype)
1.  [function <span class="apidocSignatureSpan">loopback.Email.prototype.</span>send ()](#apidoc.element.loopback.Email.prototype.send)

#### [module loopback.Email.sharedClass](#apidoc.module.loopback.Email.sharedClass)
1.  [function <span class="apidocSignatureSpan">loopback.Email.sharedClass.</span>ctor (data, options)](#apidoc.element.loopback.Email.sharedClass.ctor)
1.  object <span class="apidocSignatureSpan">loopback.Email.sharedClass.</span>_disabledMethods
1.  object <span class="apidocSignatureSpan">loopback.Email.sharedClass.</span>_methods
1.  object <span class="apidocSignatureSpan">loopback.Email.sharedClass.</span>_resolvers
1.  object <span class="apidocSignatureSpan">loopback.Email.sharedClass.</span>http
1.  object <span class="apidocSignatureSpan">loopback.Email.sharedClass.</span>sharedCtor
1.  string <span class="apidocSignatureSpan">loopback.Email.sharedClass.</span>name

#### [module loopback.Email.super_](#apidoc.module.loopback.Email.super_)
1.  [function <span class="apidocSignatureSpan">loopback.Email.</span>super_ {{signature}}](#apidoc.element.loopback.Email.super_.super_)
1.  [function <span class="apidocSignatureSpan">loopback.Email.super_.</span>ValidationError (obj)](#apidoc.element.loopback.Email.super_.ValidationError)
1.  [function <span class="apidocSignatureSpan">loopback.Email.super_.</span>_ACL (ACL)](#apidoc.element.loopback.Email.super_._ACL)
1.  [function <span class="apidocSignatureSpan">loopback.Email.super_.</span>_getAccessTypeForMethod (method)](#apidoc.element.loopback.Email.super_._getAccessTypeForMethod)
1.  [function <span class="apidocSignatureSpan">loopback.Email.super_.</span>_notifyBaseObservers (operation, context, callback)](#apidoc.element.loopback.Email.super_._notifyBaseObservers)
1.  [function <span class="apidocSignatureSpan">loopback.Email.super_.</span>_runWhenAttachedToApp (fn)](#apidoc.element.loopback.Email.super_._runWhenAttachedToApp)
1.  [function <span class="apidocSignatureSpan">loopback.Email.super_.</span>addListener ()](#apidoc.element.loopback.Email.super_.addListener)
1.  [function <span class="apidocSignatureSpan">loopback.Email.super_.</span>afterRemote (name, fn)](#apidoc.element.loopback.Email.super_.afterRemote)
1.  [function <span class="apidocSignatureSpan">loopback.Email.super_.</span>afterRemoteError (name, fn)](#apidoc.element.loopback.Email.super_.afterRemoteError)
1.  [function <span class="apidocSignatureSpan">loopback.Email.super_.</span>attachTo (dataSource)](#apidoc.element.loopback.Email.super_.attachTo)
1.  [function <span class="apidocSignatureSpan">loopback.Email.super_.</span>beforeRemote (name, fn)](#apidoc.element.loopback.Email.super_.beforeRemote)
1.  [function <span class="apidocSignatureSpan">loopback.Email.super_.</span>belongsToRemoting (relationName, relation, define)](#apidoc.element.loopback.Email.super_.belongsToRemoting)
1.  [function <span class="apidocSignatureSpan">loopback.Email.super_.</span>checkAccess (token, modelId, sharedMethod, ctx, callback)](#apidoc.element.loopback.Email.super_.checkAccess)
1.  [function <span class="apidocSignatureSpan">loopback.Email.super_.</span>clearObservers (operation)](#apidoc.element.loopback.Email.super_.clearObservers)
1.  [function <span class="apidocSignatureSpan">loopback.Email.super_.</span>createOptionsFromRemotingContext (ctx)](#apidoc.element.loopback.Email.super_.createOptionsFromRemotingContext)
1.  [function <span class="apidocSignatureSpan">loopback.Email.super_.</span>defineProperty (prop, params)](#apidoc.element.loopback.Email.super_.defineProperty)
1.  [function <span class="apidocSignatureSpan">loopback.Email.super_.</span>disableRemoteMethod (name, isStatic)](#apidoc.element.loopback.Email.super_.disableRemoteMethod)
1.  [function <span class="apidocSignatureSpan">loopback.Email.super_.</span>disableRemoteMethodByName (name)](#apidoc.element.loopback.Email.super_.disableRemoteMethodByName)
1.  [function <span class="apidocSignatureSpan">loopback.Email.super_.</span>emit ()](#apidoc.element.loopback.Email.super_.emit)
1.  [function <span class="apidocSignatureSpan">loopback.Email.super_.</span>eventNames ()](#apidoc.element.loopback.Email.super_.eventNames)
1.  [function <span class="apidocSignatureSpan">loopback.Email.super_.</span>extend (className, subclassProperties, subclassSettings)](#apidoc.element.loopback.Email.super_.extend)
1.  [function <span class="apidocSignatureSpan">loopback.Email.super_.</span>forEachProperty (cb)](#apidoc.element.loopback.Email.super_.forEachProperty)
1.  [function <span class="apidocSignatureSpan">loopback.Email.super_.</span>getApp (callback)](#apidoc.element.loopback.Email.super_.getApp)
1.  [function <span class="apidocSignatureSpan">loopback.Email.super_.</span>getDataSource ()](#apidoc.element.loopback.Email.super_.getDataSource)
1.  [function <span class="apidocSignatureSpan">loopback.Email.super_.</span>getMaxListeners ()](#apidoc.element.loopback.Email.super_.getMaxListeners)
1.  [function <span class="apidocSignatureSpan">loopback.Email.super_.</span>getPropertyType (propName)](#apidoc.element.loopback.Email.super_.getPropertyType)
1.  [function <span class="apidocSignatureSpan">loopback.Email.super_.</span>hasManyRemoting (relationName, relation, define)](#apidoc.element.loopback.Email.super_.hasManyRemoting)
1.  [function <span class="apidocSignatureSpan">loopback.Email.super_.</span>hasOneRemoting (relationName, relation, define)](#apidoc.element.loopback.Email.super_.hasOneRemoting)
1.  [function <span class="apidocSignatureSpan">loopback.Email.super_.</span>isHiddenProperty (propertyName)](#apidoc.element.loopback.Email.super_.isHiddenProperty)
1.  [function <span class="apidocSignatureSpan">loopback.Email.super_.</span>isProtectedProperty (propertyName)](#apidoc.element.loopback.Email.super_.isProtectedProperty)
1.  [function <span class="apidocSignatureSpan">loopback.Email.super_.</span>listenerCount ()](#apidoc.element.loopback.Email.super_.listenerCount)
1.  [function <span class="apidocSignatureSpan">loopback.Email.super_.</span>listeners ()](#apidoc.element.loopback.Email.super_.listeners)
1.  [function <span class="apidocSignatureSpan">loopback.Email.super_.</span>mixin (anotherClass, options)](#apidoc.element.loopback.Email.super_.mixin)
1.  [function <span class="apidocSignatureSpan">loopback.Email.super_.</span>nestRemoting (relationName, options, filterCallback)](#apidoc.element.loopback.Email.super_.nestRemoting)
1.  [function <span class="apidocSignatureSpan">loopback.Email.super_.</span>notifyObserversAround (operation, context, fn, callback)](#apidoc.element.loopback.Email.super_.notifyObserversAround)
1.  [function <span class="apidocSignatureSpan">loopback.Email.super_.</span>notifyObserversOf (operation, context, callback)](#apidoc.element.loopback.Email.super_.notifyObserversOf)
1.  [function <span class="apidocSignatureSpan">loopback.Email.super_.</span>observe (operation, listener)](#apidoc.element.loopback.Email.super_.observe)
1.  [function <span class="apidocSignatureSpan">loopback.Email.super_.</span>on ()](#apidoc.element.loopback.Email.super_.on)
1.  [function <span class="apidocSignatureSpan">loopback.Email.super_.</span>once ()](#apidoc.element.loopback.Email.super_.once)
1.  [function <span class="apidocSignatureSpan">loopback.Email.super_.</span>prependListener ()](#apidoc.element.loopback.Email.super_.prependListener)
1.  [function <span class="apidocSignatureSpan">loopback.Email.super_.</span>prependOnceListener ()](#apidoc.element.loopback.Email.super_.prependOnceListener)
1.  [function <span class="apidocSignatureSpan">loopback.Email.super_.</span>registerProperty (propertyName)](#apidoc.element.loopback.Email.super_.registerProperty)
1.  [function <span class="apidocSignatureSpan">loopback.Email.super_.</span>remoteMethod (name, options)](#apidoc.element.loopback.Email.super_.remoteMethod)
1.  [function <span class="apidocSignatureSpan">loopback.Email.super_.</span>removeAllListeners ()](#apidoc.element.loopback.Email.super_.removeAllListeners)
1.  [function <span class="apidocSignatureSpan">loopback.Email.super_.</span>removeListener ()](#apidoc.element.loopback.Email.super_.removeListener)
1.  [function <span class="apidocSignatureSpan">loopback.Email.super_.</span>removeObserver (operation, listener)](#apidoc.element.loopback.Email.super_.removeObserver)
1.  [function <span class="apidocSignatureSpan">loopback.Email.super_.</span>scopeRemoting (scopeName, scope, define)](#apidoc.element.loopback.Email.super_.scopeRemoting)
1.  [function <span class="apidocSignatureSpan">loopback.Email.super_.</span>setMaxListeners ()](#apidoc.element.loopback.Email.super_.setMaxListeners)
1.  [function <span class="apidocSignatureSpan">loopback.Email.super_.</span>setup ()](#apidoc.element.loopback.Email.super_.setup)
1.  [function <span class="apidocSignatureSpan">loopback.Email.super_.</span>sharedCtor (data, id, options, fn)](#apidoc.element.loopback.Email.super_.sharedCtor)
1.  [function <span class="apidocSignatureSpan">loopback.Email.super_.</span>validate ()](#apidoc.element.loopback.Email.super_.validate)
1.  [function <span class="apidocSignatureSpan">loopback.Email.super_.</span>validateAsync ()](#apidoc.element.loopback.Email.super_.validateAsync)
1.  [function <span class="apidocSignatureSpan">loopback.Email.super_.</span>validatesAbsenceOf ()](#apidoc.element.loopback.Email.super_.validatesAbsenceOf)
1.  [function <span class="apidocSignatureSpan">loopback.Email.super_.</span>validatesExclusionOf ()](#apidoc.element.loopback.Email.super_.validatesExclusionOf)
1.  [function <span class="apidocSignatureSpan">loopback.Email.super_.</span>validatesFormatOf ()](#apidoc.element.loopback.Email.super_.validatesFormatOf)
1.  [function <span class="apidocSignatureSpan">loopback.Email.super_.</span>validatesInclusionOf ()](#apidoc.element.loopback.Email.super_.validatesInclusionOf)
1.  [function <span class="apidocSignatureSpan">loopback.Email.super_.</span>validatesLengthOf ()](#apidoc.element.loopback.Email.super_.validatesLengthOf)
1.  [function <span class="apidocSignatureSpan">loopback.Email.super_.</span>validatesNumericalityOf ()](#apidoc.element.loopback.Email.super_.validatesNumericalityOf)
1.  [function <span class="apidocSignatureSpan">loopback.Email.super_.</span>validatesPresenceOf ()](#apidoc.element.loopback.Email.super_.validatesPresenceOf)
1.  [function <span class="apidocSignatureSpan">loopback.Email.super_.</span>validatesUniquenessOf ()](#apidoc.element.loopback.Email.super_.validatesUniquenessOf)
1.  object <span class="apidocSignatureSpan">loopback.Email.super_.</span>afterCreate
1.  object <span class="apidocSignatureSpan">loopback.Email.super_.</span>afterDestroy
1.  object <span class="apidocSignatureSpan">loopback.Email.super_.</span>afterInitialize
1.  object <span class="apidocSignatureSpan">loopback.Email.super_.</span>afterSave
1.  object <span class="apidocSignatureSpan">loopback.Email.super_.</span>afterUpdate
1.  object <span class="apidocSignatureSpan">loopback.Email.super_.</span>afterValidate
1.  object <span class="apidocSignatureSpan">loopback.Email.super_.</span>beforeCreate
1.  object <span class="apidocSignatureSpan">loopback.Email.super_.</span>beforeDestroy
1.  object <span class="apidocSignatureSpan">loopback.Email.super_.</span>beforeSave
1.  object <span class="apidocSignatureSpan">loopback.Email.super_.</span>beforeUpdate
1.  object <span class="apidocSignatureSpan">loopback.Email.super_.</span>beforeValidate
1.  object <span class="apidocSignatureSpan">loopback.Email.super_.</span>definition
1.  object <span class="apidocSignatureSpan">loopback.Email.super_.</span>getter
1.  object <span class="apidocSignatureSpan">loopback.Email.super_.</span>registry
1.  object <span class="apidocSignatureSpan">loopback.Email.super_.</span>setter
1.  object <span class="apidocSignatureSpan">loopback.Email.super_.</span>settings
1.  object <span class="apidocSignatureSpan">loopback.Email.super_.</span>sharedClass

#### [module loopback.Email.super_.super_.prototype](#apidoc.module.loopback.Email.super_.super_.prototype)
1.  [function <span class="apidocSignatureSpan">loopback.Email.super_.super_.prototype.</span>_initProperties (data, options)](#apidoc.element.loopback.Email.super_.super_.prototype._initProperties)
1.  [function <span class="apidocSignatureSpan">loopback.Email.super_.super_.prototype.</span>fromObject (obj)](#apidoc.element.loopback.Email.super_.super_.prototype.fromObject)
1.  [function <span class="apidocSignatureSpan">loopback.Email.super_.super_.prototype.</span>getDataSource ()](#apidoc.element.loopback.Email.super_.super_.prototype.getDataSource)
1.  [function <span class="apidocSignatureSpan">loopback.Email.super_.super_.prototype.</span>getPropertyType (propName)](#apidoc.element.loopback.Email.super_.super_.prototype.getPropertyType)
1.  [function <span class="apidocSignatureSpan">loopback.Email.super_.super_.prototype.</span>inspect (depth)](#apidoc.element.loopback.Email.super_.super_.prototype.inspect)
1.  [function <span class="apidocSignatureSpan">loopback.Email.super_.super_.prototype.</span>isValid (callback, data, options)](#apidoc.element.loopback.Email.super_.super_.prototype.isValid)
1.  [function <span class="apidocSignatureSpan">loopback.Email.super_.super_.prototype.</span>reset ()](#apidoc.element.loopback.Email.super_.super_.prototype.reset)
1.  [function <span class="apidocSignatureSpan">loopback.Email.super_.super_.prototype.</span>setStrict (strict)](#apidoc.element.loopback.Email.super_.super_.prototype.setStrict)
1.  [function <span class="apidocSignatureSpan">loopback.Email.super_.super_.prototype.</span>toJSON ()](#apidoc.element.loopback.Email.super_.super_.prototype.toJSON)
1.  [function <span class="apidocSignatureSpan">loopback.Email.super_.super_.prototype.</span>toObject (onlySchema, removeHidden, removeProtected)](#apidoc.element.loopback.Email.super_.super_.prototype.toObject)
1.  [function <span class="apidocSignatureSpan">loopback.Email.super_.super_.prototype.</span>trigger (actionName, work, data, callback)](#apidoc.element.loopback.Email.super_.super_.prototype.trigger)

#### [module loopback.GeoPoint](#apidoc.module.loopback.GeoPoint)
1.  [function <span class="apidocSignatureSpan">loopback.</span>GeoPoint (data)](#apidoc.element.loopback.GeoPoint.GeoPoint)
1.  [function <span class="apidocSignatureSpan">loopback.GeoPoint.</span>distanceBetween (a, b, options)](#apidoc.element.loopback.GeoPoint.distanceBetween)

#### [module loopback.GeoPoint.prototype](#apidoc.module.loopback.GeoPoint.prototype)
1.  [function <span class="apidocSignatureSpan">loopback.GeoPoint.prototype.</span>distanceTo (point, options)](#apidoc.element.loopback.GeoPoint.prototype.distanceTo)
1.  [function <span class="apidocSignatureSpan">loopback.GeoPoint.prototype.</span>toString ()](#apidoc.element.loopback.GeoPoint.prototype.toString)

#### [module loopback.KeyValueModel](#apidoc.module.loopback.KeyValueModel)
1.  [function <span class="apidocSignatureSpan">loopback.</span>KeyValueModel (data, options)](#apidoc.element.loopback.KeyValueModel.KeyValueModel)
1.  [function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>ValidationError (obj)](#apidoc.element.loopback.KeyValueModel.ValidationError)
1.  [function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>_ACL (ACL)](#apidoc.element.loopback.KeyValueModel._ACL)
1.  [function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>_getAccessTypeForMethod (method)](#apidoc.element.loopback.KeyValueModel._getAccessTypeForMethod)
1.  [function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>_notifyBaseObservers (operation, context, callback)](#apidoc.element.loopback.KeyValueModel._notifyBaseObservers)
1.  [function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>_runWhenAttachedToApp (fn)](#apidoc.element.loopback.KeyValueModel._runWhenAttachedToApp)
1.  [function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>addListener ()](#apidoc.element.loopback.KeyValueModel.addListener)
1.  [function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>afterRemote (name, fn)](#apidoc.element.loopback.KeyValueModel.afterRemote)
1.  [function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>afterRemoteError (name, fn)](#apidoc.element.loopback.KeyValueModel.afterRemoteError)
1.  [function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>attachTo (dataSource)](#apidoc.element.loopback.KeyValueModel.attachTo)
1.  [function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>beforeRemote (name, fn)](#apidoc.element.loopback.KeyValueModel.beforeRemote)
1.  [function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>belongsToRemoting (relationName, relation, define)](#apidoc.element.loopback.KeyValueModel.belongsToRemoting)
1.  [function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>checkAccess (token, modelId, sharedMethod, ctx, callback)](#apidoc.element.loopback.KeyValueModel.checkAccess)
1.  [function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>clearObservers (operation)](#apidoc.element.loopback.KeyValueModel.clearObservers)
1.  [function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>createOptionsFromRemotingContext (ctx)](#apidoc.element.loopback.KeyValueModel.createOptionsFromRemotingContext)
1.  [function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>defineProperty (prop, params)](#apidoc.element.loopback.KeyValueModel.defineProperty)
1.  [function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>disableRemoteMethod (name, isStatic)](#apidoc.element.loopback.KeyValueModel.disableRemoteMethod)
1.  [function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>disableRemoteMethodByName (name)](#apidoc.element.loopback.KeyValueModel.disableRemoteMethodByName)
1.  [function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>emit ()](#apidoc.element.loopback.KeyValueModel.emit)
1.  [function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>eventNames ()](#apidoc.element.loopback.KeyValueModel.eventNames)
1.  [function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>expire (key, ttl, options, callback)](#apidoc.element.loopback.KeyValueModel.expire)
1.  [function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>extend (className, subclassProperties, subclassSettings)](#apidoc.element.loopback.KeyValueModel.extend)
1.  [function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>forEachProperty (cb)](#apidoc.element.loopback.KeyValueModel.forEachProperty)
1.  [function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>get (key, options, callback)](#apidoc.element.loopback.KeyValueModel.get)
1.  [function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>getApp (callback)](#apidoc.element.loopback.KeyValueModel.getApp)
1.  [function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>getDataSource ()](#apidoc.element.loopback.KeyValueModel.getDataSource)
1.  [function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>getMaxListeners ()](#apidoc.element.loopback.KeyValueModel.getMaxListeners)
1.  [function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>getPropertyType (propName)](#apidoc.element.loopback.KeyValueModel.getPropertyType)
1.  [function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>hasManyRemoting (relationName, relation, define)](#apidoc.element.loopback.KeyValueModel.hasManyRemoting)
1.  [function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>hasOneRemoting (relationName, relation, define)](#apidoc.element.loopback.KeyValueModel.hasOneRemoting)
1.  [function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>isHiddenProperty (propertyName)](#apidoc.element.loopback.KeyValueModel.isHiddenProperty)
1.  [function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>isProtectedProperty (propertyName)](#apidoc.element.loopback.KeyValueModel.isProtectedProperty)
1.  [function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>iterateKeys (filter, options)](#apidoc.element.loopback.KeyValueModel.iterateKeys)
1.  [function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>keys (filter, options, callback)](#apidoc.element.loopback.KeyValueModel.keys)
1.  [function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>listenerCount ()](#apidoc.element.loopback.KeyValueModel.listenerCount)
1.  [function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>listeners ()](#apidoc.element.loopback.KeyValueModel.listeners)
1.  [function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>mixin (anotherClass, options)](#apidoc.element.loopback.KeyValueModel.mixin)
1.  [function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>nestRemoting (relationName, options, filterCallback)](#apidoc.element.loopback.KeyValueModel.nestRemoting)
1.  [function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>notifyObserversAround (operation, context, fn, callback)](#apidoc.element.loopback.KeyValueModel.notifyObserversAround)
1.  [function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>notifyObserversOf (operation, context, callback)](#apidoc.element.loopback.KeyValueModel.notifyObserversOf)
1.  [function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>observe (operation, listener)](#apidoc.element.loopback.KeyValueModel.observe)
1.  [function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>on ()](#apidoc.element.loopback.KeyValueModel.on)
1.  [function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>once ()](#apidoc.element.loopback.KeyValueModel.once)
1.  [function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>prependListener ()](#apidoc.element.loopback.KeyValueModel.prependListener)
1.  [function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>prependOnceListener ()](#apidoc.element.loopback.KeyValueModel.prependOnceListener)
1.  [function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>registerProperty (propertyName)](#apidoc.element.loopback.KeyValueModel.registerProperty)
1.  [function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>remoteMethod (name, options)](#apidoc.element.loopback.KeyValueModel.remoteMethod)
1.  [function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>removeAllListeners ()](#apidoc.element.loopback.KeyValueModel.removeAllListeners)
1.  [function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>removeListener ()](#apidoc.element.loopback.KeyValueModel.removeListener)
1.  [function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>removeObserver (operation, listener)](#apidoc.element.loopback.KeyValueModel.removeObserver)
1.  [function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>scopeRemoting (scopeName, scope, define)](#apidoc.element.loopback.KeyValueModel.scopeRemoting)
1.  [function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>set (key, value, options, callback)](#apidoc.element.loopback.KeyValueModel.set)
1.  [function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>setMaxListeners ()](#apidoc.element.loopback.KeyValueModel.setMaxListeners)
1.  [function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>setup ()](#apidoc.element.loopback.KeyValueModel.setup)
1.  [function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>sharedCtor (data, id, options, fn)](#apidoc.element.loopback.KeyValueModel.sharedCtor)
1.  [function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>super_ (data, options)](#apidoc.element.loopback.KeyValueModel.super_)
1.  [function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>ttl (key, options, callback)](#apidoc.element.loopback.KeyValueModel.ttl)
1.  [function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>validate ()](#apidoc.element.loopback.KeyValueModel.validate)
1.  [function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>validateAsync ()](#apidoc.element.loopback.KeyValueModel.validateAsync)
1.  [function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>validatesAbsenceOf ()](#apidoc.element.loopback.KeyValueModel.validatesAbsenceOf)
1.  [function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>validatesExclusionOf ()](#apidoc.element.loopback.KeyValueModel.validatesExclusionOf)
1.  [function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>validatesFormatOf ()](#apidoc.element.loopback.KeyValueModel.validatesFormatOf)
1.  [function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>validatesInclusionOf ()](#apidoc.element.loopback.KeyValueModel.validatesInclusionOf)
1.  [function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>validatesLengthOf ()](#apidoc.element.loopback.KeyValueModel.validatesLengthOf)
1.  [function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>validatesNumericalityOf ()](#apidoc.element.loopback.KeyValueModel.validatesNumericalityOf)
1.  [function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>validatesPresenceOf ()](#apidoc.element.loopback.KeyValueModel.validatesPresenceOf)
1.  [function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>validatesUniquenessOf ()](#apidoc.element.loopback.KeyValueModel.validatesUniquenessOf)
1.  object <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>afterCreate
1.  object <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>afterDestroy
1.  object <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>afterInitialize
1.  object <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>afterSave
1.  object <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>afterUpdate
1.  object <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>afterValidate
1.  object <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>beforeCreate
1.  object <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>beforeDestroy
1.  object <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>beforeSave
1.  object <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>beforeUpdate
1.  object <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>beforeValidate
1.  object <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>definition
1.  object <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>getter
1.  object <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>registry
1.  object <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>setter
1.  object <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>settings
1.  object <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>sharedClass

#### [module loopback.KeyValueModel.sharedClass](#apidoc.module.loopback.KeyValueModel.sharedClass)
1.  [function <span class="apidocSignatureSpan">loopback.KeyValueModel.sharedClass.</span>ctor (data, options)](#apidoc.element.loopback.KeyValueModel.sharedClass.ctor)
1.  object <span class="apidocSignatureSpan">loopback.KeyValueModel.sharedClass.</span>_disabledMethods
1.  object <span class="apidocSignatureSpan">loopback.KeyValueModel.sharedClass.</span>_methods
1.  object <span class="apidocSignatureSpan">loopback.KeyValueModel.sharedClass.</span>_resolvers
1.  object <span class="apidocSignatureSpan">loopback.KeyValueModel.sharedClass.</span>http
1.  object <span class="apidocSignatureSpan">loopback.KeyValueModel.sharedClass.</span>sharedCtor
1.  string <span class="apidocSignatureSpan">loopback.KeyValueModel.sharedClass.</span>name

#### [module loopback.Mail](#apidoc.module.loopback.Mail)
1.  [function <span class="apidocSignatureSpan">loopback.</span>Mail (settings)](#apidoc.element.loopback.Mail.Mail)
1.  [function <span class="apidocSignatureSpan">loopback.Mail.</span>initialize (dataSource, callback)](#apidoc.element.loopback.Mail.initialize)
1.  object <span class="apidocSignatureSpan">loopback.Mail.</span>mailer

#### [module loopback.Mail.mailer](#apidoc.module.loopback.Mail.mailer)
1.  [function <span class="apidocSignatureSpan">loopback.Mail.mailer.</span>createTransport (transporter, defaults)](#apidoc.element.loopback.Mail.mailer.createTransport)

#### [module loopback.Mail.prototype](#apidoc.module.loopback.Mail.prototype)
1.  [function <span class="apidocSignatureSpan">loopback.Mail.prototype.</span>DataAccessObject ()](#apidoc.element.loopback.Mail.prototype.DataAccessObject)
1.  [function <span class="apidocSignatureSpan">loopback.Mail.prototype.</span>defaultTransport ()](#apidoc.element.loopback.Mail.prototype.defaultTransport)
1.  [function <span class="apidocSignatureSpan">loopback.Mail.prototype.</span>setupTransport (setting)](#apidoc.element.loopback.Mail.prototype.setupTransport)
1.  [function <span class="apidocSignatureSpan">loopback.Mail.prototype.</span>transportForName (name)](#apidoc.element.loopback.Mail.prototype.transportForName)
1.  object <span class="apidocSignatureSpan">loopback.Mail.prototype.</span>mailer

#### [module loopback.Mail.prototype.DataAccessObject](#apidoc.module.loopback.Mail.prototype.DataAccessObject)
1.  [function <span class="apidocSignatureSpan">loopback.Mail.prototype.</span>DataAccessObject ()](#apidoc.element.loopback.Mail.prototype.DataAccessObject.DataAccessObject)
1.  [function <span class="apidocSignatureSpan">loopback.Mail.prototype.DataAccessObject.</span>send (options, fn)](#apidoc.element.loopback.Mail.prototype.DataAccessObject.send)
1.  object <span class="apidocSignatureSpan">loopback.Mail.prototype.DataAccessObject.</span>mailer

#### [module loopback.Mail.prototype.DataAccessObject.prototype](#apidoc.module.loopback.Mail.prototype.DataAccessObject.prototype)
1.  [function <span class="apidocSignatureSpan">loopback.Mail.prototype.DataAccessObject.prototype.</span>send (fn)](#apidoc.element.loopback.Mail.prototype.DataAccessObject.prototype.send)
1.  object <span class="apidocSignatureSpan">loopback.Mail.prototype.DataAccessObject.prototype.</span>mailer

#### [module loopback.Memory](#apidoc.module.loopback.Memory)
1.  [function <span class="apidocSignatureSpan">loopback.</span>Memory ()](#apidoc.element.loopback.Memory.Memory)
1.  [function <span class="apidocSignatureSpan">loopback.Memory.</span>initialize (dataSource, callback)](#apidoc.element.loopback.Memory.initialize)
1.  [function <span class="apidocSignatureSpan">loopback.Memory.</span>super_ (options)](#apidoc.element.loopback.Memory.super_)

#### [module loopback.Remote](#apidoc.module.loopback.Remote)
1.  [function <span class="apidocSignatureSpan">loopback.</span>Remote (settings)](#apidoc.element.loopback.Remote.Remote)
1.  [function <span class="apidocSignatureSpan">loopback.Remote.</span>initialize (dataSource, callback)](#apidoc.element.loopback.Remote.initialize)

#### [module loopback.Remote.prototype](#apidoc.module.loopback.Remote.prototype)
1.  [function <span class="apidocSignatureSpan">loopback.Remote.prototype.</span>connect ()](#apidoc.element.loopback.Remote.prototype.connect)
1.  [function <span class="apidocSignatureSpan">loopback.Remote.prototype.</span>define (definition)](#apidoc.element.loopback.Remote.prototype.define)
1.  [function <span class="apidocSignatureSpan">loopback.Remote.prototype.</span>resolve (Model)](#apidoc.element.loopback.Remote.prototype.resolve)

#### [module loopback.Role](#apidoc.module.loopback.Role)
1.  [function <span class="apidocSignatureSpan">loopback.</span>Role (data, options)](#apidoc.element.loopback.Role.Role)
1.  [function <span class="apidocSignatureSpan">loopback.Role.</span>ValidationError (obj)](#apidoc.element.loopback.Role.ValidationError)
1.  [function <span class="apidocSignatureSpan">loopback.Role.</span>_ACL (ACL)](#apidoc.element.loopback.Role._ACL)
1.  [function <span class="apidocSignatureSpan">loopback.Role.</span>_defineChangeModel ()](#apidoc.element.loopback.Role._defineChangeModel)
1.  [function <span class="apidocSignatureSpan">loopback.Role.</span>_getAccessTypeForMethod (method)](#apidoc.element.loopback.Role._getAccessTypeForMethod)
1.  [function <span class="apidocSignatureSpan">loopback.Role.</span>_notifyBaseObservers (operation, context, callback)](#apidoc.element.loopback.Role._notifyBaseObservers)
1.  [function <span class="apidocSignatureSpan">loopback.Role.</span>_runWhenAttachedToApp (fn)](#apidoc.element.loopback.Role._runWhenAttachedToApp)
1.  [function <span class="apidocSignatureSpan">loopback.Role.</span>addListener ()](#apidoc.element.loopback.Role.addListener)
1.  [function <span class="apidocSignatureSpan">loopback.Role.</span>afterRemote (name, fn)](#apidoc.element.loopback.Role.afterRemote)
1.  [function <span class="apidocSignatureSpan">loopback.Role.</span>afterRemoteError (name, fn)](#apidoc.element.loopback.Role.afterRemoteError)
1.  [function <span class="apidocSignatureSpan">loopback.Role.</span>attachTo (dataSource)](#apidoc.element.loopback.Role.attachTo)
1.  [function <span class="apidocSignatureSpan">loopback.Role.</span>beforeRemote (name, fn)](#apidoc.element.loopback.Role.beforeRemote)
1.  [function <span class="apidocSignatureSpan">loopback.Role.</span>belongsToRemoting (relationName, relation, define)](#apidoc.element.loopback.Role.belongsToRemoting)
1.  [function <span class="apidocSignatureSpan">loopback.Role.</span>bulkUpdate (updates, options, callback)](#apidoc.element.loopback.Role.bulkUpdate)
1.  [function <span class="apidocSignatureSpan">loopback.Role.</span>changes (since, filter, callback)](#apidoc.element.loopback.Role.changes)
1.  [function <span class="apidocSignatureSpan">loopback.Role.</span>checkAccess (token, modelId, sharedMethod, ctx, callback)](#apidoc.element.loopback.Role.checkAccess)
1.  [function <span class="apidocSignatureSpan">loopback.Role.</span>checkpoint (cb)](#apidoc.element.loopback.Role.checkpoint)
1.  [function <span class="apidocSignatureSpan">loopback.Role.</span>clearObservers (operation)](#apidoc.element.loopback.Role.clearObservers)
1.  [function <span class="apidocSignatureSpan">loopback.Role.</span>count (where, cb)](#apidoc.element.loopback.Role.count)
1.  [function <span class="apidocSignatureSpan">loopback.Role.</span>create (data, callback)](#apidoc.element.loopback.Role.create)
1.  [function <span class="apidocSignatureSpan">loopback.Role.</span>createChangeFilter (since, modelFilter)](#apidoc.element.loopback.Role.createChangeFilter)
1.  [function <span class="apidocSignatureSpan">loopback.Role.</span>createChangeStream (options, cb)](#apidoc.element.loopback.Role.createChangeStream)
1.  [function <span class="apidocSignatureSpan">loopback.Role.</span>createOptionsFromRemotingContext (ctx)](#apidoc.element.loopback.Role.createOptionsFromRemotingContext)
1.  [function <span class="apidocSignatureSpan">loopback.Role.</span>createUpdates (deltas, cb)](#apidoc.element.loopback.Role.createUpdates)
1.  [function <span class="apidocSignatureSpan">loopback.Role.</span>currentCheckpoint (cb)](#apidoc.element.loopback.Role.currentCheckpoint)
1.  [function <span class="apidocSignatureSpan">loopback.Role.</span>defineProperty (prop, params)](#apidoc.element.loopback.Role.defineProperty)
1.  [function <span class="apidocSignatureSpan">loopback.Role.</span>deleteAll (where, cb)](#apidoc.element.loopback.Role.deleteAll)
1.  [function <span class="apidocSignatureSpan">loopback.Role.</span>deleteById (id, cb)](#apidoc.element.loopback.Role.deleteById)
1.  [function <span class="apidocSignatureSpan">loopback.Role.</span>destroyAll (where, cb)](#apidoc.element.loopback.Role.destroyAll)
1.  [function <span class="apidocSignatureSpan">loopback.Role.</span>destroyById (id, cb)](#apidoc.element.loopback.Role.destroyById)
1.  [function <span class="apidocSignatureSpan">loopback.Role.</span>diff (since, remoteChanges, callback)](#apidoc.element.loopback.Role.diff)
1.  [function <span class="apidocSignatureSpan">loopback.Role.</span>disableRemoteMethod (name, isStatic)](#apidoc.element.loopback.Role.disableRemoteMethod)
1.  [function <span class="apidocSignatureSpan">loopback.Role.</span>disableRemoteMethodByName (name)](#apidoc.element.loopback.Role.disableRemoteMethodByName)
1.  [function <span class="apidocSignatureSpan">loopback.Role.</span>emit ()](#apidoc.element.loopback.Role.emit)
1.  [function <span class="apidocSignatureSpan">loopback.Role.</span>enableChangeTracking ()](#apidoc.element.loopback.Role.enableChangeTracking)
1.  [function <span class="apidocSignatureSpan">loopback.Role.</span>eventNames ()](#apidoc.element.loopback.Role.eventNames)
1.  [function <span class="apidocSignatureSpan">loopback.Role.</span>exists (id, cb)](#apidoc.element.loopback.Role.exists)
1.  [function <span class="apidocSignatureSpan">loopback.Role.</span>extend (className, subclassProperties, subclassSettings)](#apidoc.element.loopback.Role.extend)
1.  [function <span class="apidocSignatureSpan">loopback.Role.</span>find (filter, cb)](#apidoc.element.loopback.Role.find)
1.  [function <span class="apidocSignatureSpan">loopback.Role.</span>findById (id, filter, cb)](#apidoc.element.loopback.Role.findById)
1.  [function <span class="apidocSignatureSpan">loopback.Role.</span>findLastChange (id, cb)](#apidoc.element.loopback.Role.findLastChange)
1.  [function <span class="apidocSignatureSpan">loopback.Role.</span>findOne (filter, cb)](#apidoc.element.loopback.Role.findOne)
1.  [function <span class="apidocSignatureSpan">loopback.Role.</span>findOrCreate (query, data, callback)](#apidoc.element.loopback.Role.findOrCreate)
1.  [function <span class="apidocSignatureSpan">loopback.Role.</span>forEachProperty (cb)](#apidoc.element.loopback.Role.forEachProperty)
1.  [function <span class="apidocSignatureSpan">loopback.Role.</span>getApp (callback)](#apidoc.element.loopback.Role.getApp)
1.  [function <span class="apidocSignatureSpan">loopback.Role.</span>getChangeModel ()](#apidoc.element.loopback.Role.getChangeModel)
1.  [function <span class="apidocSignatureSpan">loopback.Role.</span>getDataSource ()](#apidoc.element.loopback.Role.getDataSource)
1.  [function <span class="apidocSignatureSpan">loopback.Role.</span>getIdName ()](#apidoc.element.loopback.Role.getIdName)
1.  [function <span class="apidocSignatureSpan">loopback.Role.</span>getMaxListeners ()](#apidoc.element.loopback.Role.getMaxListeners)
1.  [function <span class="apidocSignatureSpan">loopback.Role.</span>getPropertyType (propName)](#apidoc.element.loopback.Role.getPropertyType)
1.  [function <span class="apidocSignatureSpan">loopback.Role.</span>getRoles (context, options, callback)](#apidoc.element.loopback.Role.getRoles)
1.  [function <span class="apidocSignatureSpan">loopback.Role.</span>getSourceId (cb)](#apidoc.element.loopback.Role.getSourceId)
1.  [function <span class="apidocSignatureSpan">loopback.Role.</span>handleChangeError (err, operationName)](#apidoc.element.loopback.Role.handleChangeError)
1.  [function <span class="apidocSignatureSpan">loopback.Role.</span>hasManyRemoting (relationName, relation, define)](#apidoc.element.loopback.Role.hasManyRemoting)
1.  [function <span class="apidocSignatureSpan">loopback.Role.</span>hasOneRemoting (relationName, relation, define)](#apidoc.element.loopback.Role.hasOneRemoting)
1.  [function <span class="apidocSignatureSpan">loopback.Role.</span>isAuthenticated (context, callback)](#apidoc.element.loopback.Role.isAuthenticated)
1.  [function <span class="apidocSignatureSpan">loopback.Role.</span>isHiddenProperty (propertyName)](#apidoc.element.loopback.Role.isHiddenProperty)
1.  [function <span class="apidocSignatureSpan">loopback.Role.</span>isInRole (role, context, callback)](#apidoc.element.loopback.Role.isInRole)
1.  [function <span class="apidocSignatureSpan">loopback.Role.</span>isOwner (modelClass, modelId, userId, principalType, options, callback)](#apidoc.element.loopback.Role.isOwner)
1.  [function <span class="apidocSignatureSpan">loopback.Role.</span>isProtectedProperty (propertyName)](#apidoc.element.loopback.Role.isProtectedProperty)
1.  [function <span class="apidocSignatureSpan">loopback.Role.</span>listenerCount ()](#apidoc.element.loopback.Role.listenerCount)
1.  [function <span class="apidocSignatureSpan">loopback.Role.</span>listeners ()](#apidoc.element.loopback.Role.listeners)
1.  [function <span class="apidocSignatureSpan">loopback.Role.</span>mixin (anotherClass, options)](#apidoc.element.loopback.Role.mixin)
1.  [function <span class="apidocSignatureSpan">loopback.Role.</span>nestRemoting (relationName, options, filterCallback)](#apidoc.element.loopback.Role.nestRemoting)
1.  [function <span class="apidocSignatureSpan">loopback.Role.</span>notifyObserversAround (operation, context, fn, callback)](#apidoc.element.loopback.Role.notifyObserversAround)
1.  [function <span class="apidocSignatureSpan">loopback.Role.</span>notifyObserversOf (operation, context, callback)](#apidoc.element.loopback.Role.notifyObserversOf)
1.  [function <span class="apidocSignatureSpan">loopback.Role.</span>observe (operation, listener)](#apidoc.element.loopback.Role.observe)
1.  [function <span class="apidocSignatureSpan">loopback.Role.</span>on ()](#apidoc.element.loopback.Role.on)
1.  [function <span class="apidocSignatureSpan">loopback.Role.</span>once ()](#apidoc.element.loopback.Role.once)
1.  [function <span class="apidocSignatureSpan">loopback.Role.</span>patchOrCreate (data, callback)](#apidoc.element.loopback.Role.patchOrCreate)
1.  [function <span class="apidocSignatureSpan">loopback.Role.</span>patchOrCreateWithWhere (where, data, callback)](#apidoc.element.loopback.Role.patchOrCreateWithWhere)
1.  [function <span class="apidocSignatureSpan">loopback.Role.</span>prependListener ()](#apidoc.element.loopback.Role.prependListener)
1.  [function <span class="apidocSignatureSpan">loopback.Role.</span>prependOnceListener ()](#apidoc.element.loopback.Role.prependOnceListener)
1.  [function <span class="apidocSignatureSpan">loopback.Role.</span>rectifyAllChanges (callback)](#apidoc.element.loopback.Role.rectifyAllChanges)
1.  [function <span class="apidocSignatureSpan">loopback.Role.</span>rectifyChange (id, callback)](#apidoc.element.loopback.Role.rectifyChange)
1.  [function <span class="apidocSignatureSpan">loopback.Role.</span>registerProperty (propertyName)](#apidoc.element.loopback.Role.registerProperty)
1.  [function <span class="apidocSignatureSpan">loopback.Role.</span>registerResolver (role, resolver)](#apidoc.element.loopback.Role.registerResolver)
1.  [function <span class="apidocSignatureSpan">loopback.Role.</span>remoteMethod (name, options)](#apidoc.element.loopback.Role.remoteMethod)
1.  [function <span class="apidocSignatureSpan">loopback.Role.</span>remove (where, cb)](#apidoc.element.loopback.Role.remove)
1.  [function <span class="apidocSignatureSpan">loopback.Role.</span>removeAllListeners ()](#apidoc.element.loopback.Role.removeAllListeners)
1.  [function <span class="apidocSignatureSpan">loopback.Role.</span>removeById (id, cb)](#apidoc.element.loopback.Role.removeById)
1.  [function <span class="apidocSignatureSpan">loopback.Role.</span>removeListener ()](#apidoc.element.loopback.Role.removeListener)
1.  [function <span class="apidocSignatureSpan">loopback.Role.</span>removeObserver (operation, listener)](#apidoc.element.loopback.Role.removeObserver)
1.  [function <span class="apidocSignatureSpan">loopback.Role.</span>replaceById (id, data, cb)](#apidoc.element.loopback.Role.replaceById)
1.  [function <span class="apidocSignatureSpan">loopback.Role.</span>replaceOrCreate (data, callback)](#apidoc.element.loopback.Role.replaceOrCreate)
1.  [function <span class="apidocSignatureSpan">loopback.Role.</span>replicate (since, targetModel, options, callback)](#apidoc.element.loopback.Role.replicate)
1.  [function <span class="apidocSignatureSpan">loopback.Role.</span>resolveRelatedModels ()](#apidoc.element.loopback.Role.resolveRelatedModels)
1.  [function <span class="apidocSignatureSpan">loopback.Role.</span>scopeRemoting (scopeName, scope, define)](#apidoc.element.loopback.Role.scopeRemoting)
1.  [function <span class="apidocSignatureSpan">loopback.Role.</span>setMaxListeners ()](#apidoc.element.loopback.Role.setMaxListeners)
1.  [function <span class="apidocSignatureSpan">loopback.Role.</span>setup ()](#apidoc.element.loopback.Role.setup)
1.  [function <span class="apidocSignatureSpan">loopback.Role.</span>setupRemoting ()](#apidoc.element.loopback.Role.setupRemoting)
1.  [function <span class="apidocSignatureSpan">loopback.Role.</span>sharedCtor (data, id, options, fn)](#apidoc.element.loopback.Role.sharedCtor)
1.  [function <span class="apidocSignatureSpan">loopback.Role.</span>super_ (data, options)](#apidoc.element.loopback.Role.super_)
1.  [function <span class="apidocSignatureSpan">loopback.Role.</span>update (where, data, cb)](#apidoc.element.loopback.Role.update)
1.  [function <span class="apidocSignatureSpan">loopback.Role.</span>updateAll (where, data, cb)](#apidoc.element.loopback.Role.updateAll)
1.  [function <span class="apidocSignatureSpan">loopback.Role.</span>updateLastChange (id, data, cb)](#apidoc.element.loopback.Role.updateLastChange)
1.  [function <span class="apidocSignatureSpan">loopback.Role.</span>updateOrCreate (data, callback)](#apidoc.element.loopback.Role.updateOrCreate)
1.  [function <span class="apidocSignatureSpan">loopback.Role.</span>upsert (data, callback)](#apidoc.element.loopback.Role.upsert)
1.  [function <span class="apidocSignatureSpan">loopback.Role.</span>upsertWithWhere (where, data, callback)](#apidoc.element.loopback.Role.upsertWithWhere)
1.  [function <span class="apidocSignatureSpan">loopback.Role.</span>validate ()](#apidoc.element.loopback.Role.validate)
1.  [function <span class="apidocSignatureSpan">loopback.Role.</span>validateAsync ()](#apidoc.element.loopback.Role.validateAsync)
1.  [function <span class="apidocSignatureSpan">loopback.Role.</span>validatesAbsenceOf ()](#apidoc.element.loopback.Role.validatesAbsenceOf)
1.  [function <span class="apidocSignatureSpan">loopback.Role.</span>validatesExclusionOf ()](#apidoc.element.loopback.Role.validatesExclusionOf)
1.  [function <span class="apidocSignatureSpan">loopback.Role.</span>validatesFormatOf ()](#apidoc.element.loopback.Role.validatesFormatOf)
1.  [function <span class="apidocSignatureSpan">loopback.Role.</span>validatesInclusionOf ()](#apidoc.element.loopback.Role.validatesInclusionOf)
1.  [function <span class="apidocSignatureSpan">loopback.Role.</span>validatesLengthOf ()](#apidoc.element.loopback.Role.validatesLengthOf)
1.  [function <span class="apidocSignatureSpan">loopback.Role.</span>validatesNumericalityOf ()](#apidoc.element.loopback.Role.validatesNumericalityOf)
1.  [function <span class="apidocSignatureSpan">loopback.Role.</span>validatesPresenceOf ()](#apidoc.element.loopback.Role.validatesPresenceOf)
1.  [function <span class="apidocSignatureSpan">loopback.Role.</span>validatesUniquenessOf ()](#apidoc.element.loopback.Role.validatesUniquenessOf)
1.  object <span class="apidocSignatureSpan">loopback.Role.</span>afterCreate
1.  object <span class="apidocSignatureSpan">loopback.Role.</span>afterDestroy
1.  object <span class="apidocSignatureSpan">loopback.Role.</span>afterInitialize
1.  object <span class="apidocSignatureSpan">loopback.Role.</span>afterSave
1.  object <span class="apidocSignatureSpan">loopback.Role.</span>afterUpdate
1.  object <span class="apidocSignatureSpan">loopback.Role.</span>afterValidate
1.  object <span class="apidocSignatureSpan">loopback.Role.</span>beforeCreate
1.  object <span class="apidocSignatureSpan">loopback.Role.</span>beforeDestroy
1.  object <span class="apidocSignatureSpan">loopback.Role.</span>beforeSave
1.  object <span class="apidocSignatureSpan">loopback.Role.</span>beforeUpdate
1.  object <span class="apidocSignatureSpan">loopback.Role.</span>beforeValidate
1.  object <span class="apidocSignatureSpan">loopback.Role.</span>definition
1.  object <span class="apidocSignatureSpan">loopback.Role.</span>getter
1.  object <span class="apidocSignatureSpan">loopback.Role.</span>registry
1.  object <span class="apidocSignatureSpan">loopback.Role.</span>resolvers
1.  object <span class="apidocSignatureSpan">loopback.Role.</span>setter
1.  object <span class="apidocSignatureSpan">loopback.Role.</span>settings
1.  object <span class="apidocSignatureSpan">loopback.Role.</span>sharedClass
1.  string <span class="apidocSignatureSpan">loopback.Role.</span>AUTHENTICATED
1.  string <span class="apidocSignatureSpan">loopback.Role.</span>EVERYONE
1.  string <span class="apidocSignatureSpan">loopback.Role.</span>OWNER
1.  string <span class="apidocSignatureSpan">loopback.Role.</span>RELATED
1.  string <span class="apidocSignatureSpan">loopback.Role.</span>UNAUTHENTICATED

#### [module loopback.Role.resolvers](#apidoc.module.loopback.Role.resolvers)

#### [module loopback.Role.settings](#apidoc.module.loopback.Role.settings)
1.  boolean <span class="apidocSignatureSpan">loopback.Role.settings.</span>replaceOnPUT
1.  boolean <span class="apidocSignatureSpan">loopback.Role.settings.</span>strict
1.  [function <span class="apidocSignatureSpan">loopback.Role.settings.</span>base (data, options)](#apidoc.element.loopback.Role.settings.base)
1.  object <span class="apidocSignatureSpan">loopback.Role.settings.</span>relations

#### [module loopback.Role.sharedClass](#apidoc.module.loopback.Role.sharedClass)
1.  [function <span class="apidocSignatureSpan">loopback.Role.sharedClass.</span>ctor (data, options)](#apidoc.element.loopback.Role.sharedClass.ctor)
1.  object <span class="apidocSignatureSpan">loopback.Role.sharedClass.</span>_disabledMethods
1.  object <span class="apidocSignatureSpan">loopback.Role.sharedClass.</span>_methods
1.  object <span class="apidocSignatureSpan">loopback.Role.sharedClass.</span>_resolvers
1.  object <span class="apidocSignatureSpan">loopback.Role.sharedClass.</span>http
1.  object <span class="apidocSignatureSpan">loopback.Role.sharedClass.</span>sharedCtor
1.  string <span class="apidocSignatureSpan">loopback.Role.sharedClass.</span>name

#### [module loopback.RoleMapping](#apidoc.module.loopback.RoleMapping)
1.  [function <span class="apidocSignatureSpan">loopback.</span>RoleMapping (data, options)](#apidoc.element.loopback.RoleMapping.RoleMapping)
1.  [function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>ValidationError (obj)](#apidoc.element.loopback.RoleMapping.ValidationError)
1.  [function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>_ACL (ACL)](#apidoc.element.loopback.RoleMapping._ACL)
1.  [function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>_defineChangeModel ()](#apidoc.element.loopback.RoleMapping._defineChangeModel)
1.  [function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>_getAccessTypeForMethod (method)](#apidoc.element.loopback.RoleMapping._getAccessTypeForMethod)
1.  [function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>_notifyBaseObservers (operation, context, callback)](#apidoc.element.loopback.RoleMapping._notifyBaseObservers)
1.  [function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>_runWhenAttachedToApp (fn)](#apidoc.element.loopback.RoleMapping._runWhenAttachedToApp)
1.  [function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>addListener ()](#apidoc.element.loopback.RoleMapping.addListener)
1.  [function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>afterRemote (name, fn)](#apidoc.element.loopback.RoleMapping.afterRemote)
1.  [function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>afterRemoteError (name, fn)](#apidoc.element.loopback.RoleMapping.afterRemoteError)
1.  [function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>attachTo (dataSource)](#apidoc.element.loopback.RoleMapping.attachTo)
1.  [function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>beforeRemote (name, fn)](#apidoc.element.loopback.RoleMapping.beforeRemote)
1.  [function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>belongsToRemoting (relationName, relation, define)](#apidoc.element.loopback.RoleMapping.belongsToRemoting)
1.  [function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>bulkUpdate (updates, options, callback)](#apidoc.element.loopback.RoleMapping.bulkUpdate)
1.  [function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>changes (since, filter, callback)](#apidoc.element.loopback.RoleMapping.changes)
1.  [function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>checkAccess (token, modelId, sharedMethod, ctx, callback)](#apidoc.element.loopback.RoleMapping.checkAccess)
1.  [function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>checkpoint (cb)](#apidoc.element.loopback.RoleMapping.checkpoint)
1.  [function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>clearObservers (operation)](#apidoc.element.loopback.RoleMapping.clearObservers)
1.  [function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>count (where, cb)](#apidoc.element.loopback.RoleMapping.count)
1.  [function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>create (data, callback)](#apidoc.element.loopback.RoleMapping.create)
1.  [function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>createChangeFilter (since, modelFilter)](#apidoc.element.loopback.RoleMapping.createChangeFilter)
1.  [function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>createChangeStream (options, cb)](#apidoc.element.loopback.RoleMapping.createChangeStream)
1.  [function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>createOptionsFromRemotingContext (ctx)](#apidoc.element.loopback.RoleMapping.createOptionsFromRemotingContext)
1.  [function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>createUpdates (deltas, cb)](#apidoc.element.loopback.RoleMapping.createUpdates)
1.  [function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>currentCheckpoint (cb)](#apidoc.element.loopback.RoleMapping.currentCheckpoint)
1.  [function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>defineProperty (prop, params)](#apidoc.element.loopback.RoleMapping.defineProperty)
1.  [function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>deleteAll (where, cb)](#apidoc.element.loopback.RoleMapping.deleteAll)
1.  [function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>deleteById (id, cb)](#apidoc.element.loopback.RoleMapping.deleteById)
1.  [function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>destroyAll (where, cb)](#apidoc.element.loopback.RoleMapping.destroyAll)
1.  [function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>destroyById (id, cb)](#apidoc.element.loopback.RoleMapping.destroyById)
1.  [function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>diff (since, remoteChanges, callback)](#apidoc.element.loopback.RoleMapping.diff)
1.  [function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>disableRemoteMethod (name, isStatic)](#apidoc.element.loopback.RoleMapping.disableRemoteMethod)
1.  [function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>disableRemoteMethodByName (name)](#apidoc.element.loopback.RoleMapping.disableRemoteMethodByName)
1.  [function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>emit ()](#apidoc.element.loopback.RoleMapping.emit)
1.  [function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>enableChangeTracking ()](#apidoc.element.loopback.RoleMapping.enableChangeTracking)
1.  [function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>eventNames ()](#apidoc.element.loopback.RoleMapping.eventNames)
1.  [function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>exists (id, cb)](#apidoc.element.loopback.RoleMapping.exists)
1.  [function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>extend (className, subclassProperties, subclassSettings)](#apidoc.element.loopback.RoleMapping.extend)
1.  [function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>find (filter, cb)](#apidoc.element.loopback.RoleMapping.find)
1.  [function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>findById (id, filter, cb)](#apidoc.element.loopback.RoleMapping.findById)
1.  [function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>findLastChange (id, cb)](#apidoc.element.loopback.RoleMapping.findLastChange)
1.  [function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>findOne (filter, cb)](#apidoc.element.loopback.RoleMapping.findOne)
1.  [function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>findOrCreate (query, data, callback)](#apidoc.element.loopback.RoleMapping.findOrCreate)
1.  [function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>forEachProperty (cb)](#apidoc.element.loopback.RoleMapping.forEachProperty)
1.  [function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>getApp (callback)](#apidoc.element.loopback.RoleMapping.getApp)
1.  [function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>getChangeModel ()](#apidoc.element.loopback.RoleMapping.getChangeModel)
1.  [function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>getDataSource ()](#apidoc.element.loopback.RoleMapping.getDataSource)
1.  [function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>getIdName ()](#apidoc.element.loopback.RoleMapping.getIdName)
1.  [function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>getMaxListeners ()](#apidoc.element.loopback.RoleMapping.getMaxListeners)
1.  [function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>getPropertyType (propName)](#apidoc.element.loopback.RoleMapping.getPropertyType)
1.  [function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>getSourceId (cb)](#apidoc.element.loopback.RoleMapping.getSourceId)
1.  [function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>handleChangeError (err, operationName)](#apidoc.element.loopback.RoleMapping.handleChangeError)
1.  [function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>hasManyRemoting (relationName, relation, define)](#apidoc.element.loopback.RoleMapping.hasManyRemoting)
1.  [function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>hasOneRemoting (relationName, relation, define)](#apidoc.element.loopback.RoleMapping.hasOneRemoting)
1.  [function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>isHiddenProperty (propertyName)](#apidoc.element.loopback.RoleMapping.isHiddenProperty)
1.  [function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>isProtectedProperty (propertyName)](#apidoc.element.loopback.RoleMapping.isProtectedProperty)
1.  [function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>listenerCount ()](#apidoc.element.loopback.RoleMapping.listenerCount)
1.  [function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>listeners ()](#apidoc.element.loopback.RoleMapping.listeners)
1.  [function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>mixin (anotherClass, options)](#apidoc.element.loopback.RoleMapping.mixin)
1.  [function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>nestRemoting (relationName, options, filterCallback)](#apidoc.element.loopback.RoleMapping.nestRemoting)
1.  [function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>notifyObserversAround (operation, context, fn, callback)](#apidoc.element.loopback.RoleMapping.notifyObserversAround)
1.  [function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>notifyObserversOf (operation, context, callback)](#apidoc.element.loopback.RoleMapping.notifyObserversOf)
1.  [function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>observe (operation, listener)](#apidoc.element.loopback.RoleMapping.observe)
1.  [function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>on ()](#apidoc.element.loopback.RoleMapping.on)
1.  [function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>once ()](#apidoc.element.loopback.RoleMapping.once)
1.  [function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>patchOrCreate (data, callback)](#apidoc.element.loopback.RoleMapping.patchOrCreate)
1.  [function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>patchOrCreateWithWhere (where, data, callback)](#apidoc.element.loopback.RoleMapping.patchOrCreateWithWhere)
1.  [function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>prependListener ()](#apidoc.element.loopback.RoleMapping.prependListener)
1.  [function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>prependOnceListener ()](#apidoc.element.loopback.RoleMapping.prependOnceListener)
1.  [function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>rectifyAllChanges (callback)](#apidoc.element.loopback.RoleMapping.rectifyAllChanges)
1.  [function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>rectifyChange (id, callback)](#apidoc.element.loopback.RoleMapping.rectifyChange)
1.  [function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>registerProperty (propertyName)](#apidoc.element.loopback.RoleMapping.registerProperty)
1.  [function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>remoteMethod (name, options)](#apidoc.element.loopback.RoleMapping.remoteMethod)
1.  [function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>remove (where, cb)](#apidoc.element.loopback.RoleMapping.remove)
1.  [function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>removeAllListeners ()](#apidoc.element.loopback.RoleMapping.removeAllListeners)
1.  [function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>removeById (id, cb)](#apidoc.element.loopback.RoleMapping.removeById)
1.  [function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>removeListener ()](#apidoc.element.loopback.RoleMapping.removeListener)
1.  [function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>removeObserver (operation, listener)](#apidoc.element.loopback.RoleMapping.removeObserver)
1.  [function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>replaceById (id, data, cb)](#apidoc.element.loopback.RoleMapping.replaceById)
1.  [function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>replaceOrCreate (data, callback)](#apidoc.element.loopback.RoleMapping.replaceOrCreate)
1.  [function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>replicate (since, targetModel, options, callback)](#apidoc.element.loopback.RoleMapping.replicate)
1.  [function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>resolveRelatedModels ()](#apidoc.element.loopback.RoleMapping.resolveRelatedModels)
1.  [function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>scopeRemoting (scopeName, scope, define)](#apidoc.element.loopback.RoleMapping.scopeRemoting)
1.  [function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>setMaxListeners ()](#apidoc.element.loopback.RoleMapping.setMaxListeners)
1.  [function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>setup ()](#apidoc.element.loopback.RoleMapping.setup)
1.  [function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>setupRemoting ()](#apidoc.element.loopback.RoleMapping.setupRemoting)
1.  [function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>sharedCtor (data, id, options, fn)](#apidoc.element.loopback.RoleMapping.sharedCtor)
1.  [function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>super_ (data, options)](#apidoc.element.loopback.RoleMapping.super_)
1.  [function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>update (where, data, cb)](#apidoc.element.loopback.RoleMapping.update)
1.  [function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>updateAll (where, data, cb)](#apidoc.element.loopback.RoleMapping.updateAll)
1.  [function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>updateLastChange (id, data, cb)](#apidoc.element.loopback.RoleMapping.updateLastChange)
1.  [function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>updateOrCreate (data, callback)](#apidoc.element.loopback.RoleMapping.updateOrCreate)
1.  [function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>upsert (data, callback)](#apidoc.element.loopback.RoleMapping.upsert)
1.  [function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>upsertWithWhere (where, data, callback)](#apidoc.element.loopback.RoleMapping.upsertWithWhere)
1.  [function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>validate ()](#apidoc.element.loopback.RoleMapping.validate)
1.  [function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>validateAsync ()](#apidoc.element.loopback.RoleMapping.validateAsync)
1.  [function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>validatesAbsenceOf ()](#apidoc.element.loopback.RoleMapping.validatesAbsenceOf)
1.  [function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>validatesExclusionOf ()](#apidoc.element.loopback.RoleMapping.validatesExclusionOf)
1.  [function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>validatesFormatOf ()](#apidoc.element.loopback.RoleMapping.validatesFormatOf)
1.  [function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>validatesInclusionOf ()](#apidoc.element.loopback.RoleMapping.validatesInclusionOf)
1.  [function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>validatesLengthOf ()](#apidoc.element.loopback.RoleMapping.validatesLengthOf)
1.  [function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>validatesNumericalityOf ()](#apidoc.element.loopback.RoleMapping.validatesNumericalityOf)
1.  [function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>validatesPresenceOf ()](#apidoc.element.loopback.RoleMapping.validatesPresenceOf)
1.  [function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>validatesUniquenessOf ()](#apidoc.element.loopback.RoleMapping.validatesUniquenessOf)
1.  object <span class="apidocSignatureSpan">loopback.RoleMapping.</span>afterCreate
1.  object <span class="apidocSignatureSpan">loopback.RoleMapping.</span>afterDestroy
1.  object <span class="apidocSignatureSpan">loopback.RoleMapping.</span>afterInitialize
1.  object <span class="apidocSignatureSpan">loopback.RoleMapping.</span>afterSave
1.  object <span class="apidocSignatureSpan">loopback.RoleMapping.</span>afterUpdate
1.  object <span class="apidocSignatureSpan">loopback.RoleMapping.</span>afterValidate
1.  object <span class="apidocSignatureSpan">loopback.RoleMapping.</span>beforeCreate
1.  object <span class="apidocSignatureSpan">loopback.RoleMapping.</span>beforeDestroy
1.  object <span class="apidocSignatureSpan">loopback.RoleMapping.</span>beforeSave
1.  object <span class="apidocSignatureSpan">loopback.RoleMapping.</span>beforeUpdate
1.  object <span class="apidocSignatureSpan">loopback.RoleMapping.</span>beforeValidate
1.  object <span class="apidocSignatureSpan">loopback.RoleMapping.</span>definition
1.  object <span class="apidocSignatureSpan">loopback.RoleMapping.</span>getter
1.  object <span class="apidocSignatureSpan">loopback.RoleMapping.</span>registry
1.  object <span class="apidocSignatureSpan">loopback.RoleMapping.</span>setter
1.  object <span class="apidocSignatureSpan">loopback.RoleMapping.</span>settings
1.  object <span class="apidocSignatureSpan">loopback.RoleMapping.</span>sharedClass
1.  string <span class="apidocSignatureSpan">loopback.RoleMapping.</span>APP
1.  string <span class="apidocSignatureSpan">loopback.RoleMapping.</span>APPLICATION
1.  string <span class="apidocSignatureSpan">loopback.RoleMapping.</span>ROLE
1.  string <span class="apidocSignatureSpan">loopback.RoleMapping.</span>USER

#### [module loopback.RoleMapping.prototype](#apidoc.module.loopback.RoleMapping.prototype)
1.  [function <span class="apidocSignatureSpan">loopback.RoleMapping.prototype.</span>application (callback)](#apidoc.element.loopback.RoleMapping.prototype.application)
1.  [function <span class="apidocSignatureSpan">loopback.RoleMapping.prototype.</span>childRole (callback)](#apidoc.element.loopback.RoleMapping.prototype.childRole)
1.  [function <span class="apidocSignatureSpan">loopback.RoleMapping.prototype.</span>user (callback)](#apidoc.element.loopback.RoleMapping.prototype.user)

#### [module loopback.RoleMapping.settings](#apidoc.module.loopback.RoleMapping.settings)
1.  boolean <span class="apidocSignatureSpan">loopback.RoleMapping.settings.</span>replaceOnPUT
1.  boolean <span class="apidocSignatureSpan">loopback.RoleMapping.settings.</span>strict
1.  [function <span class="apidocSignatureSpan">loopback.RoleMapping.settings.</span>base (data, options)](#apidoc.element.loopback.RoleMapping.settings.base)
1.  object <span class="apidocSignatureSpan">loopback.RoleMapping.settings.</span>relations
1.  string <span class="apidocSignatureSpan">loopback.RoleMapping.settings.</span>description

#### [module loopback.RoleMapping.sharedClass](#apidoc.module.loopback.RoleMapping.sharedClass)
1.  [function <span class="apidocSignatureSpan">loopback.RoleMapping.sharedClass.</span>ctor (data, options)](#apidoc.element.loopback.RoleMapping.sharedClass.ctor)
1.  object <span class="apidocSignatureSpan">loopback.RoleMapping.sharedClass.</span>_disabledMethods
1.  object <span class="apidocSignatureSpan">loopback.RoleMapping.sharedClass.</span>_methods
1.  object <span class="apidocSignatureSpan">loopback.RoleMapping.sharedClass.</span>_resolvers
1.  object <span class="apidocSignatureSpan">loopback.RoleMapping.sharedClass.</span>http
1.  object <span class="apidocSignatureSpan">loopback.RoleMapping.sharedClass.</span>sharedCtor
1.  string <span class="apidocSignatureSpan">loopback.RoleMapping.sharedClass.</span>name

#### [module loopback.Route](#apidoc.module.loopback.Route)
1.  [function <span class="apidocSignatureSpan">loopback.</span>Route (path)](#apidoc.element.loopback.Route.Route)

#### [module loopback.Route.prototype](#apidoc.module.loopback.Route.prototype)
1.  [function <span class="apidocSignatureSpan">loopback.Route.prototype.</span>_handles_method (method)](#apidoc.element.loopback.Route.prototype._handles_method)
1.  [function <span class="apidocSignatureSpan">loopback.Route.prototype.</span>_options ()](#apidoc.element.loopback.Route.prototype._options)
1.  [function <span class="apidocSignatureSpan">loopback.Route.prototype.</span>acl ()](#apidoc.element.loopback.Route.prototype.acl)
1.  [function <span class="apidocSignatureSpan">loopback.Route.prototype.</span>all ()](#apidoc.element.loopback.Route.prototype.all)
1.  [function <span class="apidocSignatureSpan">loopback.Route.prototype.</span>bind ()](#apidoc.element.loopback.Route.prototype.bind)
1.  [function <span class="apidocSignatureSpan">loopback.Route.prototype.</span>checkout ()](#apidoc.element.loopback.Route.prototype.checkout)
1.  [function <span class="apidocSignatureSpan">loopback.Route.prototype.</span>connect ()](#apidoc.element.loopback.Route.prototype.connect)
1.  [function <span class="apidocSignatureSpan">loopback.Route.prototype.</span>copy ()](#apidoc.element.loopback.Route.prototype.copy)
1.  [function <span class="apidocSignatureSpan">loopback.Route.prototype.</span>delete ()](#apidoc.element.loopback.Route.prototype.delete)
1.  [function <span class="apidocSignatureSpan">loopback.Route.prototype.</span>dispatch (req, res, done)](#apidoc.element.loopback.Route.prototype.dispatch)
1.  [function <span class="apidocSignatureSpan">loopback.Route.prototype.</span>get ()](#apidoc.element.loopback.Route.prototype.get)
1.  [function <span class="apidocSignatureSpan">loopback.Route.prototype.</span>head ()](#apidoc.element.loopback.Route.prototype.head)
1.  [function <span class="apidocSignatureSpan">loopback.Route.prototype.</span>link ()](#apidoc.element.loopback.Route.prototype.link)
1.  [function <span class="apidocSignatureSpan">loopback.Route.prototype.</span>lock ()](#apidoc.element.loopback.Route.prototype.lock)
1.  [function <span class="apidocSignatureSpan">loopback.Route.prototype.</span>m-search ()](#apidoc.element.loopback.Route.prototype.m-search)
1.  [function <span class="apidocSignatureSpan">loopback.Route.prototype.</span>merge ()](#apidoc.element.loopback.Route.prototype.merge)
1.  [function <span class="apidocSignatureSpan">loopback.Route.prototype.</span>mkactivity ()](#apidoc.element.loopback.Route.prototype.mkactivity)
1.  [function <span class="apidocSignatureSpan">loopback.Route.prototype.</span>mkcalendar ()](#apidoc.element.loopback.Route.prototype.mkcalendar)
1.  [function <span class="apidocSignatureSpan">loopback.Route.prototype.</span>mkcol ()](#apidoc.element.loopback.Route.prototype.mkcol)
1.  [function <span class="apidocSignatureSpan">loopback.Route.prototype.</span>move ()](#apidoc.element.loopback.Route.prototype.move)
1.  [function <span class="apidocSignatureSpan">loopback.Route.prototype.</span>notify ()](#apidoc.element.loopback.Route.prototype.notify)
1.  [function <span class="apidocSignatureSpan">loopback.Route.prototype.</span>options ()](#apidoc.element.loopback.Route.prototype.options)
1.  [function <span class="apidocSignatureSpan">loopback.Route.prototype.</span>patch ()](#apidoc.element.loopback.Route.prototype.patch)
1.  [function <span class="apidocSignatureSpan">loopback.Route.prototype.</span>post ()](#apidoc.element.loopback.Route.prototype.post)
1.  [function <span class="apidocSignatureSpan">loopback.Route.prototype.</span>propfind ()](#apidoc.element.loopback.Route.prototype.propfind)
1.  [function <span class="apidocSignatureSpan">loopback.Route.prototype.</span>proppatch ()](#apidoc.element.loopback.Route.prototype.proppatch)
1.  [function <span class="apidocSignatureSpan">loopback.Route.prototype.</span>purge ()](#apidoc.element.loopback.Route.prototype.purge)
1.  [function <span class="apidocSignatureSpan">loopback.Route.prototype.</span>put ()](#apidoc.element.loopback.Route.prototype.put)
1.  [function <span class="apidocSignatureSpan">loopback.Route.prototype.</span>rebind ()](#apidoc.element.loopback.Route.prototype.rebind)
1.  [function <span class="apidocSignatureSpan">loopback.Route.prototype.</span>report ()](#apidoc.element.loopback.Route.prototype.report)
1.  [function <span class="apidocSignatureSpan">loopback.Route.prototype.</span>search ()](#apidoc.element.loopback.Route.prototype.search)
1.  [function <span class="apidocSignatureSpan">loopback.Route.prototype.</span>subscribe ()](#apidoc.element.loopback.Route.prototype.subscribe)
1.  [function <span class="apidocSignatureSpan">loopback.Route.prototype.</span>trace ()](#apidoc.element.loopback.Route.prototype.trace)
1.  [function <span class="apidocSignatureSpan">loopback.Route.prototype.</span>unbind ()](#apidoc.element.loopback.Route.prototype.unbind)
1.  [function <span class="apidocSignatureSpan">loopback.Route.prototype.</span>unlink ()](#apidoc.element.loopback.Route.prototype.unlink)
1.  [function <span class="apidocSignatureSpan">loopback.Route.prototype.</span>unlock ()](#apidoc.element.loopback.Route.prototype.unlock)
1.  [function <span class="apidocSignatureSpan">loopback.Route.prototype.</span>unsubscribe ()](#apidoc.element.loopback.Route.prototype.unsubscribe)

#### [module loopback.Router](#apidoc.module.loopback.Router)
1.  [function <span class="apidocSignatureSpan">loopback.</span>Router (options)](#apidoc.element.loopback.Router.Router)
1.  [function <span class="apidocSignatureSpan">loopback.Router.</span>acl (path)](#apidoc.element.loopback.Router.acl)
1.  [function <span class="apidocSignatureSpan">loopback.Router.</span>all (path)](#apidoc.element.loopback.Router.all)
1.  [function <span class="apidocSignatureSpan">loopback.Router.</span>bind (path)](#apidoc.element.loopback.Router.bind)
1.  [function <span class="apidocSignatureSpan">loopback.Router.</span>checkout (path)](#apidoc.element.loopback.Router.checkout)
1.  [function <span class="apidocSignatureSpan">loopback.Router.</span>connect (path)](#apidoc.element.loopback.Router.connect)
1.  [function <span class="apidocSignatureSpan">loopback.Router.</span>copy (path)](#apidoc.element.loopback.Router.copy)
1.  [function <span class="apidocSignatureSpan">loopback.Router.</span>delete (path)](#apidoc.element.loopback.Router.delete)
1.  [function <span class="apidocSignatureSpan">loopback.Router.</span>get (path)](#apidoc.element.loopback.Router.get)
1.  [function <span class="apidocSignatureSpan">loopback.Router.</span>handle (req, res, out)](#apidoc.element.loopback.Router.handle)
1.  [function <span class="apidocSignatureSpan">loopback.Router.</span>head (path)](#apidoc.element.loopback.Router.head)
1.  [function <span class="apidocSignatureSpan">loopback.Router.</span>link (path)](#apidoc.element.loopback.Router.link)
1.  [function <span class="apidocSignatureSpan">loopback.Router.</span>lock (path)](#apidoc.element.loopback.Router.lock)
1.  [function <span class="apidocSignatureSpan">loopback.Router.</span>m-search (path)](#apidoc.element.loopback.Router.m-search)
1.  [function <span class="apidocSignatureSpan">loopback.Router.</span>merge (path)](#apidoc.element.loopback.Router.merge)
1.  [function <span class="apidocSignatureSpan">loopback.Router.</span>mkactivity (path)](#apidoc.element.loopback.Router.mkactivity)
1.  [function <span class="apidocSignatureSpan">loopback.Router.</span>mkcalendar (path)](#apidoc.element.loopback.Router.mkcalendar)
1.  [function <span class="apidocSignatureSpan">loopback.Router.</span>mkcol (path)](#apidoc.element.loopback.Router.mkcol)
1.  [function <span class="apidocSignatureSpan">loopback.Router.</span>move (path)](#apidoc.element.loopback.Router.move)
1.  [function <span class="apidocSignatureSpan">loopback.Router.</span>notify (path)](#apidoc.element.loopback.Router.notify)
1.  [function <span class="apidocSignatureSpan">loopback.Router.</span>options (path)](#apidoc.element.loopback.Router.options)
1.  [function <span class="apidocSignatureSpan">loopback.Router.</span>param (name, fn)](#apidoc.element.loopback.Router.param)
1.  [function <span class="apidocSignatureSpan">loopback.Router.</span>patch (path)](#apidoc.element.loopback.Router.patch)
1.  [function <span class="apidocSignatureSpan">loopback.Router.</span>post (path)](#apidoc.element.loopback.Router.post)
1.  [function <span class="apidocSignatureSpan">loopback.Router.</span>process_params (layer, called, req, res, done)](#apidoc.element.loopback.Router.process_params)
1.  [function <span class="apidocSignatureSpan">loopback.Router.</span>propfind (path)](#apidoc.element.loopback.Router.propfind)
1.  [function <span class="apidocSignatureSpan">loopback.Router.</span>proppatch (path)](#apidoc.element.loopback.Router.proppatch)
1.  [function <span class="apidocSignatureSpan">loopback.Router.</span>purge (path)](#apidoc.element.loopback.Router.purge)
1.  [function <span class="apidocSignatureSpan">loopback.Router.</span>put (path)](#apidoc.element.loopback.Router.put)
1.  [function <span class="apidocSignatureSpan">loopback.Router.</span>rebind (path)](#apidoc.element.loopback.Router.rebind)
1.  [function <span class="apidocSignatureSpan">loopback.Router.</span>report (path)](#apidoc.element.loopback.Router.report)
1.  [function <span class="apidocSignatureSpan">loopback.Router.</span>route (path)](#apidoc.element.loopback.Router.route)
1.  [function <span class="apidocSignatureSpan">loopback.Router.</span>search (path)](#apidoc.element.loopback.Router.search)
1.  [function <span class="apidocSignatureSpan">loopback.Router.</span>subscribe (path)](#apidoc.element.loopback.Router.subscribe)
1.  [function <span class="apidocSignatureSpan">loopback.Router.</span>trace (path)](#apidoc.element.loopback.Router.trace)
1.  [function <span class="apidocSignatureSpan">loopback.Router.</span>unbind (path)](#apidoc.element.loopback.Router.unbind)
1.  [function <span class="apidocSignatureSpan">loopback.Router.</span>unlink (path)](#apidoc.element.loopback.Router.unlink)
1.  [function <span class="apidocSignatureSpan">loopback.Router.</span>unlock (path)](#apidoc.element.loopback.Router.unlock)
1.  [function <span class="apidocSignatureSpan">loopback.Router.</span>unsubscribe (path)](#apidoc.element.loopback.Router.unsubscribe)
1.  [function <span class="apidocSignatureSpan">loopback.Router.</span>use (fn)](#apidoc.element.loopback.Router.use)

#### [module loopback.Scope](#apidoc.module.loopback.Scope)
1.  [function <span class="apidocSignatureSpan">loopback.</span>Scope (data, options)](#apidoc.element.loopback.Scope.Scope)
1.  [function <span class="apidocSignatureSpan">loopback.Scope.</span>ValidationError (obj)](#apidoc.element.loopback.Scope.ValidationError)
1.  [function <span class="apidocSignatureSpan">loopback.Scope.</span>_ACL (ACL)](#apidoc.element.loopback.Scope._ACL)
1.  [function <span class="apidocSignatureSpan">loopback.Scope.</span>_defineChangeModel ()](#apidoc.element.loopback.Scope._defineChangeModel)
1.  [function <span class="apidocSignatureSpan">loopback.Scope.</span>_getAccessTypeForMethod (method)](#apidoc.element.loopback.Scope._getAccessTypeForMethod)
1.  [function <span class="apidocSignatureSpan">loopback.Scope.</span>_notifyBaseObservers (operation, context, callback)](#apidoc.element.loopback.Scope._notifyBaseObservers)
1.  [function <span class="apidocSignatureSpan">loopback.Scope.</span>_runWhenAttachedToApp (fn)](#apidoc.element.loopback.Scope._runWhenAttachedToApp)
1.  [function <span class="apidocSignatureSpan">loopback.Scope.</span>addListener ()](#apidoc.element.loopback.Scope.addListener)
1.  [function <span class="apidocSignatureSpan">loopback.Scope.</span>afterRemote (name, fn)](#apidoc.element.loopback.Scope.afterRemote)
1.  [function <span class="apidocSignatureSpan">loopback.Scope.</span>afterRemoteError (name, fn)](#apidoc.element.loopback.Scope.afterRemoteError)
1.  [function <span class="apidocSignatureSpan">loopback.Scope.</span>attachTo (dataSource)](#apidoc.element.loopback.Scope.attachTo)
1.  [function <span class="apidocSignatureSpan">loopback.Scope.</span>beforeRemote (name, fn)](#apidoc.element.loopback.Scope.beforeRemote)
1.  [function <span class="apidocSignatureSpan">loopback.Scope.</span>belongsToRemoting (relationName, relation, define)](#apidoc.element.loopback.Scope.belongsToRemoting)
1.  [function <span class="apidocSignatureSpan">loopback.Scope.</span>bulkUpdate (updates, options, callback)](#apidoc.element.loopback.Scope.bulkUpdate)
1.  [function <span class="apidocSignatureSpan">loopback.Scope.</span>changes (since, filter, callback)](#apidoc.element.loopback.Scope.changes)
1.  [function <span class="apidocSignatureSpan">loopback.Scope.</span>checkAccess (token, modelId, sharedMethod, ctx, callback)](#apidoc.element.loopback.Scope.checkAccess)
1.  [function <span class="apidocSignatureSpan">loopback.Scope.</span>checkPermission (scope, model, property, accessType, callback)](#apidoc.element.loopback.Scope.checkPermission)
1.  [function <span class="apidocSignatureSpan">loopback.Scope.</span>checkpoint (cb)](#apidoc.element.loopback.Scope.checkpoint)
1.  [function <span class="apidocSignatureSpan">loopback.Scope.</span>clearObservers (operation)](#apidoc.element.loopback.Scope.clearObservers)
1.  [function <span class="apidocSignatureSpan">loopback.Scope.</span>count (where, cb)](#apidoc.element.loopback.Scope.count)
1.  [function <span class="apidocSignatureSpan">loopback.Scope.</span>create (data, callback)](#apidoc.element.loopback.Scope.create)
1.  [function <span class="apidocSignatureSpan">loopback.Scope.</span>createChangeFilter (since, modelFilter)](#apidoc.element.loopback.Scope.createChangeFilter)
1.  [function <span class="apidocSignatureSpan">loopback.Scope.</span>createChangeStream (options, cb)](#apidoc.element.loopback.Scope.createChangeStream)
1.  [function <span class="apidocSignatureSpan">loopback.Scope.</span>createOptionsFromRemotingContext (ctx)](#apidoc.element.loopback.Scope.createOptionsFromRemotingContext)
1.  [function <span class="apidocSignatureSpan">loopback.Scope.</span>createUpdates (deltas, cb)](#apidoc.element.loopback.Scope.createUpdates)
1.  [function <span class="apidocSignatureSpan">loopback.Scope.</span>currentCheckpoint (cb)](#apidoc.element.loopback.Scope.currentCheckpoint)
1.  [function <span class="apidocSignatureSpan">loopback.Scope.</span>defineProperty (prop, params)](#apidoc.element.loopback.Scope.defineProperty)
1.  [function <span class="apidocSignatureSpan">loopback.Scope.</span>deleteAll (where, cb)](#apidoc.element.loopback.Scope.deleteAll)
1.  [function <span class="apidocSignatureSpan">loopback.Scope.</span>deleteById (id, cb)](#apidoc.element.loopback.Scope.deleteById)
1.  [function <span class="apidocSignatureSpan">loopback.Scope.</span>destroyAll (where, cb)](#apidoc.element.loopback.Scope.destroyAll)
1.  [function <span class="apidocSignatureSpan">loopback.Scope.</span>destroyById (id, cb)](#apidoc.element.loopback.Scope.destroyById)
1.  [function <span class="apidocSignatureSpan">loopback.Scope.</span>diff (since, remoteChanges, callback)](#apidoc.element.loopback.Scope.diff)
1.  [function <span class="apidocSignatureSpan">loopback.Scope.</span>disableRemoteMethod (name, isStatic)](#apidoc.element.loopback.Scope.disableRemoteMethod)
1.  [function <span class="apidocSignatureSpan">loopback.Scope.</span>disableRemoteMethodByName (name)](#apidoc.element.loopback.Scope.disableRemoteMethodByName)
1.  [function <span class="apidocSignatureSpan">loopback.Scope.</span>emit ()](#apidoc.element.loopback.Scope.emit)
1.  [function <span class="apidocSignatureSpan">loopback.Scope.</span>enableChangeTracking ()](#apidoc.element.loopback.Scope.enableChangeTracking)
1.  [function <span class="apidocSignatureSpan">loopback.Scope.</span>eventNames ()](#apidoc.element.loopback.Scope.eventNames)
1.  [function <span class="apidocSignatureSpan">loopback.Scope.</span>exists (id, cb)](#apidoc.element.loopback.Scope.exists)
1.  [function <span class="apidocSignatureSpan">loopback.Scope.</span>extend (className, subclassProperties, subclassSettings)](#apidoc.element.loopback.Scope.extend)
1.  [function <span class="apidocSignatureSpan">loopback.Scope.</span>find (filter, cb)](#apidoc.element.loopback.Scope.find)
1.  [function <span class="apidocSignatureSpan">loopback.Scope.</span>findById (id, filter, cb)](#apidoc.element.loopback.Scope.findById)
1.  [function <span class="apidocSignatureSpan">loopback.Scope.</span>findLastChange (id, cb)](#apidoc.element.loopback.Scope.findLastChange)
1.  [function <span class="apidocSignatureSpan">loopback.Scope.</span>findOne (filter, cb)](#apidoc.element.loopback.Scope.findOne)
1.  [function <span class="apidocSignatureSpan">loopback.Scope.</span>findOrCreate (query, data, callback)](#apidoc.element.loopback.Scope.findOrCreate)
1.  [function <span class="apidocSignatureSpan">loopback.Scope.</span>forEachProperty (cb)](#apidoc.element.loopback.Scope.forEachProperty)
1.  [function <span class="apidocSignatureSpan">loopback.Scope.</span>getApp (callback)](#apidoc.element.loopback.Scope.getApp)
1.  [function <span class="apidocSignatureSpan">loopback.Scope.</span>getChangeModel ()](#apidoc.element.loopback.Scope.getChangeModel)
1.  [function <span class="apidocSignatureSpan">loopback.Scope.</span>getDataSource ()](#apidoc.element.loopback.Scope.getDataSource)
1.  [function <span class="apidocSignatureSpan">loopback.Scope.</span>getIdName ()](#apidoc.element.loopback.Scope.getIdName)
1.  [function <span class="apidocSignatureSpan">loopback.Scope.</span>getMaxListeners ()](#apidoc.element.loopback.Scope.getMaxListeners)
1.  [function <span class="apidocSignatureSpan">loopback.Scope.</span>getPropertyType (propName)](#apidoc.element.loopback.Scope.getPropertyType)
1.  [function <span class="apidocSignatureSpan">loopback.Scope.</span>getSourceId (cb)](#apidoc.element.loopback.Scope.getSourceId)
1.  [function <span class="apidocSignatureSpan">loopback.Scope.</span>handleChangeError (err, operationName)](#apidoc.element.loopback.Scope.handleChangeError)
1.  [function <span class="apidocSignatureSpan">loopback.Scope.</span>hasManyRemoting (relationName, relation, define)](#apidoc.element.loopback.Scope.hasManyRemoting)
1.  [function <span class="apidocSignatureSpan">loopback.Scope.</span>hasOneRemoting (relationName, relation, define)](#apidoc.element.loopback.Scope.hasOneRemoting)
1.  [function <span class="apidocSignatureSpan">loopback.Scope.</span>isHiddenProperty (propertyName)](#apidoc.element.loopback.Scope.isHiddenProperty)
1.  [function <span class="apidocSignatureSpan">loopback.Scope.</span>isProtectedProperty (propertyName)](#apidoc.element.loopback.Scope.isProtectedProperty)
1.  [function <span class="apidocSignatureSpan">loopback.Scope.</span>listenerCount ()](#apidoc.element.loopback.Scope.listenerCount)
1.  [function <span class="apidocSignatureSpan">loopback.Scope.</span>listeners ()](#apidoc.element.loopback.Scope.listeners)
1.  [function <span class="apidocSignatureSpan">loopback.Scope.</span>mixin (anotherClass, options)](#apidoc.element.loopback.Scope.mixin)
1.  [function <span class="apidocSignatureSpan">loopback.Scope.</span>nestRemoting (relationName, options, filterCallback)](#apidoc.element.loopback.Scope.nestRemoting)
1.  [function <span class="apidocSignatureSpan">loopback.Scope.</span>notifyObserversAround (operation, context, fn, callback)](#apidoc.element.loopback.Scope.notifyObserversAround)
1.  [function <span class="apidocSignatureSpan">loopback.Scope.</span>notifyObserversOf (operation, context, callback)](#apidoc.element.loopback.Scope.notifyObserversOf)
1.  [function <span class="apidocSignatureSpan">loopback.Scope.</span>observe (operation, listener)](#apidoc.element.loopback.Scope.observe)
1.  [function <span class="apidocSignatureSpan">loopback.Scope.</span>on ()](#apidoc.element.loopback.Scope.on)
1.  [function <span class="apidocSignatureSpan">loopback.Scope.</span>once ()](#apidoc.element.loopback.Scope.once)
1.  [function <span class="apidocSignatureSpan">loopback.Scope.</span>patchOrCreate (data, callback)](#apidoc.element.loopback.Scope.patchOrCreate)
1.  [function <span class="apidocSignatureSpan">loopback.Scope.</span>patchOrCreateWithWhere (where, data, callback)](#apidoc.element.loopback.Scope.patchOrCreateWithWhere)
1.  [function <span class="apidocSignatureSpan">loopback.Scope.</span>prependListener ()](#apidoc.element.loopback.Scope.prependListener)
1.  [function <span class="apidocSignatureSpan">loopback.Scope.</span>prependOnceListener ()](#apidoc.element.loopback.Scope.prependOnceListener)
1.  [function <span class="apidocSignatureSpan">loopback.Scope.</span>rectifyAllChanges (callback)](#apidoc.element.loopback.Scope.rectifyAllChanges)
1.  [function <span class="apidocSignatureSpan">loopback.Scope.</span>rectifyChange (id, callback)](#apidoc.element.loopback.Scope.rectifyChange)
1.  [function <span class="apidocSignatureSpan">loopback.Scope.</span>registerProperty (propertyName)](#apidoc.element.loopback.Scope.registerProperty)
1.  [function <span class="apidocSignatureSpan">loopback.Scope.</span>remoteMethod (name, options)](#apidoc.element.loopback.Scope.remoteMethod)
1.  [function <span class="apidocSignatureSpan">loopback.Scope.</span>remove (where, cb)](#apidoc.element.loopback.Scope.remove)
1.  [function <span class="apidocSignatureSpan">loopback.Scope.</span>removeAllListeners ()](#apidoc.element.loopback.Scope.removeAllListeners)
1.  [function <span class="apidocSignatureSpan">loopback.Scope.</span>removeById (id, cb)](#apidoc.element.loopback.Scope.removeById)
1.  [function <span class="apidocSignatureSpan">loopback.Scope.</span>removeListener ()](#apidoc.element.loopback.Scope.removeListener)
1.  [function <span class="apidocSignatureSpan">loopback.Scope.</span>removeObserver (operation, listener)](#apidoc.element.loopback.Scope.removeObserver)
1.  [function <span class="apidocSignatureSpan">loopback.Scope.</span>replaceById (id, data, cb)](#apidoc.element.loopback.Scope.replaceById)
1.  [function <span class="apidocSignatureSpan">loopback.Scope.</span>replaceOrCreate (data, callback)](#apidoc.element.loopback.Scope.replaceOrCreate)
1.  [function <span class="apidocSignatureSpan">loopback.Scope.</span>replicate (since, targetModel, options, callback)](#apidoc.element.loopback.Scope.replicate)
1.  [function <span class="apidocSignatureSpan">loopback.Scope.</span>resolveRelatedModels ()](#apidoc.element.loopback.Scope.resolveRelatedModels)
1.  [function <span class="apidocSignatureSpan">loopback.Scope.</span>scopeRemoting (scopeName, scope, define)](#apidoc.element.loopback.Scope.scopeRemoting)
1.  [function <span class="apidocSignatureSpan">loopback.Scope.</span>setMaxListeners ()](#apidoc.element.loopback.Scope.setMaxListeners)
1.  [function <span class="apidocSignatureSpan">loopback.Scope.</span>setup ()](#apidoc.element.loopback.Scope.setup)
1.  [function <span class="apidocSignatureSpan">loopback.Scope.</span>setupRemoting ()](#apidoc.element.loopback.Scope.setupRemoting)
1.  [function <span class="apidocSignatureSpan">loopback.Scope.</span>sharedCtor (data, id, options, fn)](#apidoc.element.loopback.Scope.sharedCtor)
1.  [function <span class="apidocSignatureSpan">loopback.Scope.</span>super_ (data, options)](#apidoc.element.loopback.Scope.super_)
1.  [function <span class="apidocSignatureSpan">loopback.Scope.</span>update (where, data, cb)](#apidoc.element.loopback.Scope.update)
1.  [function <span class="apidocSignatureSpan">loopback.Scope.</span>updateAll (where, data, cb)](#apidoc.element.loopback.Scope.updateAll)
1.  [function <span class="apidocSignatureSpan">loopback.Scope.</span>updateLastChange (id, data, cb)](#apidoc.element.loopback.Scope.updateLastChange)
1.  [function <span class="apidocSignatureSpan">loopback.Scope.</span>updateOrCreate (data, callback)](#apidoc.element.loopback.Scope.updateOrCreate)
1.  [function <span class="apidocSignatureSpan">loopback.Scope.</span>upsert (data, callback)](#apidoc.element.loopback.Scope.upsert)
1.  [function <span class="apidocSignatureSpan">loopback.Scope.</span>upsertWithWhere (where, data, callback)](#apidoc.element.loopback.Scope.upsertWithWhere)
1.  [function <span class="apidocSignatureSpan">loopback.Scope.</span>validate ()](#apidoc.element.loopback.Scope.validate)
1.  [function <span class="apidocSignatureSpan">loopback.Scope.</span>validateAsync ()](#apidoc.element.loopback.Scope.validateAsync)
1.  [function <span class="apidocSignatureSpan">loopback.Scope.</span>validatesAbsenceOf ()](#apidoc.element.loopback.Scope.validatesAbsenceOf)
1.  [function <span class="apidocSignatureSpan">loopback.Scope.</span>validatesExclusionOf ()](#apidoc.element.loopback.Scope.validatesExclusionOf)
1.  [function <span class="apidocSignatureSpan">loopback.Scope.</span>validatesFormatOf ()](#apidoc.element.loopback.Scope.validatesFormatOf)
1.  [function <span class="apidocSignatureSpan">loopback.Scope.</span>validatesInclusionOf ()](#apidoc.element.loopback.Scope.validatesInclusionOf)
1.  [function <span class="apidocSignatureSpan">loopback.Scope.</span>validatesLengthOf ()](#apidoc.element.loopback.Scope.validatesLengthOf)
1.  [function <span class="apidocSignatureSpan">loopback.Scope.</span>validatesNumericalityOf ()](#apidoc.element.loopback.Scope.validatesNumericalityOf)
1.  [function <span class="apidocSignatureSpan">loopback.Scope.</span>validatesPresenceOf ()](#apidoc.element.loopback.Scope.validatesPresenceOf)
1.  [function <span class="apidocSignatureSpan">loopback.Scope.</span>validatesUniquenessOf ()](#apidoc.element.loopback.Scope.validatesUniquenessOf)
1.  object <span class="apidocSignatureSpan">loopback.Scope.</span>afterCreate
1.  object <span class="apidocSignatureSpan">loopback.Scope.</span>afterDestroy
1.  object <span class="apidocSignatureSpan">loopback.Scope.</span>afterInitialize
1.  object <span class="apidocSignatureSpan">loopback.Scope.</span>afterSave
1.  object <span class="apidocSignatureSpan">loopback.Scope.</span>afterUpdate
1.  object <span class="apidocSignatureSpan">loopback.Scope.</span>afterValidate
1.  object <span class="apidocSignatureSpan">loopback.Scope.</span>beforeCreate
1.  object <span class="apidocSignatureSpan">loopback.Scope.</span>beforeDestroy
1.  object <span class="apidocSignatureSpan">loopback.Scope.</span>beforeSave
1.  object <span class="apidocSignatureSpan">loopback.Scope.</span>beforeUpdate
1.  object <span class="apidocSignatureSpan">loopback.Scope.</span>beforeValidate
1.  object <span class="apidocSignatureSpan">loopback.Scope.</span>definition
1.  object <span class="apidocSignatureSpan">loopback.Scope.</span>getter
1.  object <span class="apidocSignatureSpan">loopback.Scope.</span>registry
1.  object <span class="apidocSignatureSpan">loopback.Scope.</span>setter
1.  object <span class="apidocSignatureSpan">loopback.Scope.</span>settings
1.  object <span class="apidocSignatureSpan">loopback.Scope.</span>sharedClass

#### [module loopback.Scope.settings](#apidoc.module.loopback.Scope.settings)
1.  boolean <span class="apidocSignatureSpan">loopback.Scope.settings.</span>replaceOnPUT
1.  boolean <span class="apidocSignatureSpan">loopback.Scope.settings.</span>strict
1.  [function <span class="apidocSignatureSpan">loopback.Scope.settings.</span>base (data, options)](#apidoc.element.loopback.Scope.settings.base)
1.  object <span class="apidocSignatureSpan">loopback.Scope.settings.</span>description

#### [module loopback.Scope.sharedClass](#apidoc.module.loopback.Scope.sharedClass)
1.  [function <span class="apidocSignatureSpan">loopback.Scope.sharedClass.</span>ctor (data, options)](#apidoc.element.loopback.Scope.sharedClass.ctor)
1.  object <span class="apidocSignatureSpan">loopback.Scope.sharedClass.</span>_disabledMethods
1.  object <span class="apidocSignatureSpan">loopback.Scope.sharedClass.</span>_methods
1.  object <span class="apidocSignatureSpan">loopback.Scope.sharedClass.</span>_resolvers
1.  object <span class="apidocSignatureSpan">loopback.Scope.sharedClass.</span>http
1.  object <span class="apidocSignatureSpan">loopback.Scope.sharedClass.</span>sharedCtor
1.  string <span class="apidocSignatureSpan">loopback.Scope.sharedClass.</span>name

#### [module loopback.User](#apidoc.module.loopback.User)
1.  [function <span class="apidocSignatureSpan">loopback.</span>User (data, options)](#apidoc.element.loopback.User.User)
1.  [function <span class="apidocSignatureSpan">loopback.User.</span>ValidationError (obj)](#apidoc.element.loopback.User.ValidationError)
1.  [function <span class="apidocSignatureSpan">loopback.User.</span>_ACL (ACL)](#apidoc.element.loopback.User._ACL)
1.  [function <span class="apidocSignatureSpan">loopback.User.</span>_defineChangeModel ()](#apidoc.element.loopback.User._defineChangeModel)
1.  [function <span class="apidocSignatureSpan">loopback.User.</span>_getAccessTypeForMethod (method)](#apidoc.element.loopback.User._getAccessTypeForMethod)
1.  [function <span class="apidocSignatureSpan">loopback.User.</span>_invalidateAccessTokensOfUsers (userIds, options, cb)](#apidoc.element.loopback.User._invalidateAccessTokensOfUsers)
1.  [function <span class="apidocSignatureSpan">loopback.User.</span>_notifyBaseObservers (operation, context, callback)](#apidoc.element.loopback.User._notifyBaseObservers)
1.  [function <span class="apidocSignatureSpan">loopback.User.</span>_runWhenAttachedToApp (fn)](#apidoc.element.loopback.User._runWhenAttachedToApp)
1.  [function <span class="apidocSignatureSpan">loopback.User.</span>accessToken (data, options)](#apidoc.element.loopback.User.accessToken)
1.  [function <span class="apidocSignatureSpan">loopback.User.</span>addListener ()](#apidoc.element.loopback.User.addListener)
1.  [function <span class="apidocSignatureSpan">loopback.User.</span>afterRemote (name, fn)](#apidoc.element.loopback.User.afterRemote)
1.  [function <span class="apidocSignatureSpan">loopback.User.</span>afterRemoteError (name, fn)](#apidoc.element.loopback.User.afterRemoteError)
1.  [function <span class="apidocSignatureSpan">loopback.User.</span>attachTo (dataSource)](#apidoc.element.loopback.User.attachTo)
1.  [function <span class="apidocSignatureSpan">loopback.User.</span>beforeRemote (name, fn)](#apidoc.element.loopback.User.beforeRemote)
1.  [function <span class="apidocSignatureSpan">loopback.User.</span>belongsToRemoting (relationName, relation, define)](#apidoc.element.loopback.User.belongsToRemoting)
1.  [function <span class="apidocSignatureSpan">loopback.User.</span>bulkUpdate (updates, options, callback)](#apidoc.element.loopback.User.bulkUpdate)
1.  [function <span class="apidocSignatureSpan">loopback.User.</span>changePassword (userId, oldPassword, newPassword, options, cb)](#apidoc.element.loopback.User.changePassword)
1.  [function <span class="apidocSignatureSpan">loopback.User.</span>changes (since, filter, callback)](#apidoc.element.loopback.User.changes)
1.  [function <span class="apidocSignatureSpan">loopback.User.</span>checkAccess (token, modelId, sharedMethod, ctx, callback)](#apidoc.element.loopback.User.checkAccess)
1.  [function <span class="apidocSignatureSpan">loopback.User.</span>checkpoint (cb)](#apidoc.element.loopback.User.checkpoint)
1.  [function <span class="apidocSignatureSpan">loopback.User.</span>clearObservers (operation)](#apidoc.element.loopback.User.clearObservers)
1.  [function <span class="apidocSignatureSpan">loopback.User.</span>confirm (uid, token, redirect, fn)](#apidoc.element.loopback.User.confirm)
1.  [function <span class="apidocSignatureSpan">loopback.User.</span>count (where, cb)](#apidoc.element.loopback.User.count)
1.  [function <span class="apidocSignatureSpan">loopback.User.</span>create (data, callback)](#apidoc.element.loopback.User.create)
1.  [function <span class="apidocSignatureSpan">loopback.User.</span>createChangeFilter (since, modelFilter)](#apidoc.element.loopback.User.createChangeFilter)
1.  [function <span class="apidocSignatureSpan">loopback.User.</span>createChangeStream (options, cb)](#apidoc.element.loopback.User.createChangeStream)
1.  [function <span class="apidocSignatureSpan">loopback.User.</span>createOptionsFromRemotingContext (ctx)](#apidoc.element.loopback.User.createOptionsFromRemotingContext)
1.  [function <span class="apidocSignatureSpan">loopback.User.</span>createUpdates (deltas, cb)](#apidoc.element.loopback.User.createUpdates)
1.  [function <span class="apidocSignatureSpan">loopback.User.</span>currentCheckpoint (cb)](#apidoc.element.loopback.User.currentCheckpoint)
1.  [function <span class="apidocSignatureSpan">loopback.User.</span>defineProperty (prop, params)](#apidoc.element.loopback.User.defineProperty)
1.  [function <span class="apidocSignatureSpan">loopback.User.</span>deleteAll (where, cb)](#apidoc.element.loopback.User.deleteAll)
1.  [function <span class="apidocSignatureSpan">loopback.User.</span>deleteById (id, cb)](#apidoc.element.loopback.User.deleteById)
1.  [function <span class="apidocSignatureSpan">loopback.User.</span>destroyAll (where, cb)](#apidoc.element.loopback.User.destroyAll)
1.  [function <span class="apidocSignatureSpan">loopback.User.</span>destroyById (id, cb)](#apidoc.element.loopback.User.destroyById)
1.  [function <span class="apidocSignatureSpan">loopback.User.</span>diff (since, remoteChanges, callback)](#apidoc.element.loopback.User.diff)
1.  [function <span class="apidocSignatureSpan">loopback.User.</span>disableRemoteMethod (name, isStatic)](#apidoc.element.loopback.User.disableRemoteMethod)
1.  [function <span class="apidocSignatureSpan">loopback.User.</span>disableRemoteMethodByName (name)](#apidoc.element.loopback.User.disableRemoteMethodByName)
1.  [function <span class="apidocSignatureSpan">loopback.User.</span>email (data, options)](#apidoc.element.loopback.User.email)
1.  [function <span class="apidocSignatureSpan">loopback.User.</span>emit ()](#apidoc.element.loopback.User.emit)
1.  [function <span class="apidocSignatureSpan">loopback.User.</span>enableChangeTracking ()](#apidoc.element.loopback.User.enableChangeTracking)
1.  [function <span class="apidocSignatureSpan">loopback.User.</span>eventNames ()](#apidoc.element.loopback.User.eventNames)
1.  [function <span class="apidocSignatureSpan">loopback.User.</span>exists (id, cb)](#apidoc.element.loopback.User.exists)
1.  [function <span class="apidocSignatureSpan">loopback.User.</span>extend (className, subclassProperties, subclassSettings)](#apidoc.element.loopback.User.extend)
1.  [function <span class="apidocSignatureSpan">loopback.User.</span>find (filter, cb)](#apidoc.element.loopback.User.find)
1.  [function <span class="apidocSignatureSpan">loopback.User.</span>findById (id, filter, cb)](#apidoc.element.loopback.User.findById)
1.  [function <span class="apidocSignatureSpan">loopback.User.</span>findLastChange (id, cb)](#apidoc.element.loopback.User.findLastChange)
1.  [function <span class="apidocSignatureSpan">loopback.User.</span>findOne (filter, cb)](#apidoc.element.loopback.User.findOne)
1.  [function <span class="apidocSignatureSpan">loopback.User.</span>findOrCreate (query, data, callback)](#apidoc.element.loopback.User.findOrCreate)
1.  [function <span class="apidocSignatureSpan">loopback.User.</span>forEachProperty (cb)](#apidoc.element.loopback.User.forEachProperty)
1.  [function <span class="apidocSignatureSpan">loopback.User.</span>generateVerificationToken (user, cb)](#apidoc.element.loopback.User.generateVerificationToken)
1.  [function <span class="apidocSignatureSpan">loopback.User.</span>getApp (callback)](#apidoc.element.loopback.User.getApp)
1.  [function <span class="apidocSignatureSpan">loopback.User.</span>getChangeModel ()](#apidoc.element.loopback.User.getChangeModel)
1.  [function <span class="apidocSignatureSpan">loopback.User.</span>getDataSource ()](#apidoc.element.loopback.User.getDataSource)
1.  [function <span class="apidocSignatureSpan">loopback.User.</span>getIdName ()](#apidoc.element.loopback.User.getIdName)
1.  [function <span class="apidocSignatureSpan">loopback.User.</span>getMaxListeners ()](#apidoc.element.loopback.User.getMaxListeners)
1.  [function <span class="apidocSignatureSpan">loopback.User.</span>getPropertyType (propName)](#apidoc.element.loopback.User.getPropertyType)
1.  [function <span class="apidocSignatureSpan">loopback.User.</span>getSourceId (cb)](#apidoc.element.loopback.User.getSourceId)
1.  [function <span class="apidocSignatureSpan">loopback.User.</span>handleChangeError (err, operationName)](#apidoc.element.loopback.User.handleChangeError)
1.  [function <span class="apidocSignatureSpan">loopback.User.</span>hasManyRemoting (relationName, relation, define)](#apidoc.element.loopback.User.hasManyRemoting)
1.  [function <span class="apidocSignatureSpan">loopback.User.</span>hasOneRemoting (relationName, relation, define)](#apidoc.element.loopback.User.hasOneRemoting)
1.  [function <span class="apidocSignatureSpan">loopback.User.</span>hashPassword (plain)](#apidoc.element.loopback.User.hashPassword)
1.  [function <span class="apidocSignatureSpan">loopback.User.</span>isHiddenProperty (propertyName)](#apidoc.element.loopback.User.isHiddenProperty)
1.  [function <span class="apidocSignatureSpan">loopback.User.</span>isProtectedProperty (propertyName)](#apidoc.element.loopback.User.isProtectedProperty)
1.  [function <span class="apidocSignatureSpan">loopback.User.</span>listenerCount ()](#apidoc.element.loopback.User.listenerCount)
1.  [function <span class="apidocSignatureSpan">loopback.User.</span>listeners ()](#apidoc.element.loopback.User.listeners)
1.  [function <span class="apidocSignatureSpan">loopback.User.</span>login (credentials, include, fn)](#apidoc.element.loopback.User.login)
1.  [function <span class="apidocSignatureSpan">loopback.User.</span>logout (tokenId, fn)](#apidoc.element.loopback.User.logout)
1.  [function <span class="apidocSignatureSpan">loopback.User.</span>mixin (anotherClass, options)](#apidoc.element.loopback.User.mixin)
1.  [function <span class="apidocSignatureSpan">loopback.User.</span>nestRemoting (relationName, options, filterCallback)](#apidoc.element.loopback.User.nestRemoting)
1.  [function <span class="apidocSignatureSpan">loopback.User.</span>normalizeCredentials (credentials, realmRequired, realmDelimiter)](#apidoc.element.loopback.User.normalizeCredentials)
1.  [function <span class="apidocSignatureSpan">loopback.User.</span>notifyObserversAround (operation, context, fn, callback)](#apidoc.element.loopback.User.notifyObserversAround)
1.  [function <span class="apidocSignatureSpan">loopback.User.</span>notifyObserversOf (operation, context, callback)](#apidoc.element.loopback.User.notifyObserversOf)
1.  [function <span class="apidocSignatureSpan">loopback.User.</span>observe (operation, listener)](#apidoc.element.loopback.User.observe)
1.  [function <span class="apidocSignatureSpan">loopback.User.</span>on ()](#apidoc.element.loopback.User.on)
1.  [function <span class="apidocSignatureSpan">loopback.User.</span>once ()](#apidoc.element.loopback.User.once)
1.  [function <span class="apidocSignatureSpan">loopback.User.</span>patchOrCreate (data, callback)](#apidoc.element.loopback.User.patchOrCreate)
1.  [function <span class="apidocSignatureSpan">loopback.User.</span>patchOrCreateWithWhere (where, data, callback)](#apidoc.element.loopback.User.patchOrCreateWithWhere)
1.  [function <span class="apidocSignatureSpan">loopback.User.</span>prependListener ()](#apidoc.element.loopback.User.prependListener)
1.  [function <span class="apidocSignatureSpan">loopback.User.</span>prependOnceListener ()](#apidoc.element.loopback.User.prependOnceListener)
1.  [function <span class="apidocSignatureSpan">loopback.User.</span>rectifyAllChanges (callback)](#apidoc.element.loopback.User.rectifyAllChanges)
1.  [function <span class="apidocSignatureSpan">loopback.User.</span>rectifyChange (id, callback)](#apidoc.element.loopback.User.rectifyChange)
1.  [function <span class="apidocSignatureSpan">loopback.User.</span>registerProperty (propertyName)](#apidoc.element.loopback.User.registerProperty)
1.  [function <span class="apidocSignatureSpan">loopback.User.</span>remoteMethod (name, options)](#apidoc.element.loopback.User.remoteMethod)
1.  [function <span class="apidocSignatureSpan">loopback.User.</span>remove (where, cb)](#apidoc.element.loopback.User.remove)
1.  [function <span class="apidocSignatureSpan">loopback.User.</span>removeAllListeners ()](#apidoc.element.loopback.User.removeAllListeners)
1.  [function <span class="apidocSignatureSpan">loopback.User.</span>removeById (id, cb)](#apidoc.element.loopback.User.removeById)
1.  [function <span class="apidocSignatureSpan">loopback.User.</span>removeListener ()](#apidoc.element.loopback.User.removeListener)
1.  [function <span class="apidocSignatureSpan">loopback.User.</span>removeObserver (operation, listener)](#apidoc.element.loopback.User.removeObserver)
1.  [function <span class="apidocSignatureSpan">loopback.User.</span>replaceById (id, data, cb)](#apidoc.element.loopback.User.replaceById)
1.  [function <span class="apidocSignatureSpan">loopback.User.</span>replaceOrCreate (data, callback)](#apidoc.element.loopback.User.replaceOrCreate)
1.  [function <span class="apidocSignatureSpan">loopback.User.</span>replicate (since, targetModel, options, callback)](#apidoc.element.loopback.User.replicate)
1.  [function <span class="apidocSignatureSpan">loopback.User.</span>resetPassword (options, cb)](#apidoc.element.loopback.User.resetPassword)
1.  [function <span class="apidocSignatureSpan">loopback.User.</span>scopeRemoting (scopeName, scope, define)](#apidoc.element.loopback.User.scopeRemoting)
1.  [function <span class="apidocSignatureSpan">loopback.User.</span>setMaxListeners ()](#apidoc.element.loopback.User.setMaxListeners)
1.  [function <span class="apidocSignatureSpan">loopback.User.</span>setup ()](#apidoc.element.loopback.User.setup)
1.  [function <span class="apidocSignatureSpan">loopback.User.</span>setupRemoting ()](#apidoc.element.loopback.User.setupRemoting)
1.  [function <span class="apidocSignatureSpan">loopback.User.</span>sharedCtor (data, id, options, fn)](#apidoc.element.loopback.User.sharedCtor)
1.  [function <span class="apidocSignatureSpan">loopback.User.</span>super_ (data, options)](#apidoc.element.loopback.User.super_)
1.  [function <span class="apidocSignatureSpan">loopback.User.</span>update (where, data, cb)](#apidoc.element.loopback.User.update)
1.  [function <span class="apidocSignatureSpan">loopback.User.</span>updateAll (where, data, cb)](#apidoc.element.loopback.User.updateAll)
1.  [function <span class="apidocSignatureSpan">loopback.User.</span>updateLastChange (id, data, cb)](#apidoc.element.loopback.User.updateLastChange)
1.  [function <span class="apidocSignatureSpan">loopback.User.</span>updateOrCreate (data, callback)](#apidoc.element.loopback.User.updateOrCreate)
1.  [function <span class="apidocSignatureSpan">loopback.User.</span>upsert (data, callback)](#apidoc.element.loopback.User.upsert)
1.  [function <span class="apidocSignatureSpan">loopback.User.</span>upsertWithWhere (where, data, callback)](#apidoc.element.loopback.User.upsertWithWhere)
1.  [function <span class="apidocSignatureSpan">loopback.User.</span>validate ()](#apidoc.element.loopback.User.validate)
1.  [function <span class="apidocSignatureSpan">loopback.User.</span>validateAsync ()](#apidoc.element.loopback.User.validateAsync)
1.  [function <span class="apidocSignatureSpan">loopback.User.</span>validatePassword (plain)](#apidoc.element.loopback.User.validatePassword)
1.  [function <span class="apidocSignatureSpan">loopback.User.</span>validatesAbsenceOf ()](#apidoc.element.loopback.User.validatesAbsenceOf)
1.  [function <span class="apidocSignatureSpan">loopback.User.</span>validatesExclusionOf ()](#apidoc.element.loopback.User.validatesExclusionOf)
1.  [function <span class="apidocSignatureSpan">loopback.User.</span>validatesFormatOf ()](#apidoc.element.loopback.User.validatesFormatOf)
1.  [function <span class="apidocSignatureSpan">loopback.User.</span>validatesInclusionOf ()](#apidoc.element.loopback.User.validatesInclusionOf)
1.  [function <span class="apidocSignatureSpan">loopback.User.</span>validatesLengthOf ()](#apidoc.element.loopback.User.validatesLengthOf)
1.  [function <span class="apidocSignatureSpan">loopback.User.</span>validatesNumericalityOf ()](#apidoc.element.loopback.User.validatesNumericalityOf)
1.  [function <span class="apidocSignatureSpan">loopback.User.</span>validatesPresenceOf ()](#apidoc.element.loopback.User.validatesPresenceOf)
1.  [function <span class="apidocSignatureSpan">loopback.User.</span>validatesUniquenessOf ()](#apidoc.element.loopback.User.validatesUniquenessOf)
1.  object <span class="apidocSignatureSpan">loopback.User.</span>afterCreate
1.  object <span class="apidocSignatureSpan">loopback.User.</span>afterDestroy
1.  object <span class="apidocSignatureSpan">loopback.User.</span>afterInitialize
1.  object <span class="apidocSignatureSpan">loopback.User.</span>afterSave
1.  object <span class="apidocSignatureSpan">loopback.User.</span>afterUpdate
1.  object <span class="apidocSignatureSpan">loopback.User.</span>afterValidate
1.  object <span class="apidocSignatureSpan">loopback.User.</span>beforeCreate
1.  object <span class="apidocSignatureSpan">loopback.User.</span>beforeDestroy
1.  object <span class="apidocSignatureSpan">loopback.User.</span>beforeSave
1.  object <span class="apidocSignatureSpan">loopback.User.</span>beforeUpdate
1.  object <span class="apidocSignatureSpan">loopback.User.</span>beforeValidate
1.  object <span class="apidocSignatureSpan">loopback.User.</span>definition
1.  object <span class="apidocSignatureSpan">loopback.User.</span>getter
1.  object <span class="apidocSignatureSpan">loopback.User.</span>registry
1.  object <span class="apidocSignatureSpan">loopback.User.</span>setter
1.  object <span class="apidocSignatureSpan">loopback.User.</span>settings
1.  object <span class="apidocSignatureSpan">loopback.User.</span>sharedClass

#### [module loopback.User.prototype](#apidoc.module.loopback.User.prototype)
1.  [function <span class="apidocSignatureSpan">loopback.User.prototype.</span>changePassword (oldPassword, newPassword, options, cb)](#apidoc.element.loopback.User.prototype.changePassword)
1.  [function <span class="apidocSignatureSpan">loopback.User.prototype.</span>createAccessToken (ttl, options, cb)](#apidoc.element.loopback.User.prototype.createAccessToken)
1.  [function <span class="apidocSignatureSpan">loopback.User.prototype.</span>hasPassword (plain, fn)](#apidoc.element.loopback.User.prototype.hasPassword)
1.  [function <span class="apidocSignatureSpan">loopback.User.prototype.</span>verify (options, fn)](#apidoc.element.loopback.User.prototype.verify)

#### [module loopback.User.setter](#apidoc.module.loopback.User.setter)
1.  [function <span class="apidocSignatureSpan">loopback.User.setter.</span>email (value)](#apidoc.element.loopback.User.setter.email)
1.  [function <span class="apidocSignatureSpan">loopback.User.setter.</span>password (plain)](#apidoc.element.loopback.User.setter.password)

#### [module loopback.User.settings](#apidoc.module.loopback.User.settings)
1.  boolean <span class="apidocSignatureSpan">loopback.User.settings.</span>caseSensitiveEmail
1.  boolean <span class="apidocSignatureSpan">loopback.User.settings.</span>replaceOnPUT
1.  boolean <span class="apidocSignatureSpan">loopback.User.settings.</span>strict
1.  [function <span class="apidocSignatureSpan">loopback.User.settings.</span>base (data, options)](#apidoc.element.loopback.User.settings.base)
1.  number <span class="apidocSignatureSpan">loopback.User.settings.</span>maxTTL
1.  number <span class="apidocSignatureSpan">loopback.User.settings.</span>ttl
1.  object <span class="apidocSignatureSpan">loopback.User.settings.</span>acls
1.  object <span class="apidocSignatureSpan">loopback.User.settings.</span>hidden
1.  object <span class="apidocSignatureSpan">loopback.User.settings.</span>relations

#### [module loopback.User.sharedClass](#apidoc.module.loopback.User.sharedClass)
1.  [function <span class="apidocSignatureSpan">loopback.User.sharedClass.</span>ctor (data, options)](#apidoc.element.loopback.User.sharedClass.ctor)
1.  object <span class="apidocSignatureSpan">loopback.User.sharedClass.</span>_disabledMethods
1.  object <span class="apidocSignatureSpan">loopback.User.sharedClass.</span>_methods
1.  object <span class="apidocSignatureSpan">loopback.User.sharedClass.</span>_resolvers
1.  object <span class="apidocSignatureSpan">loopback.User.sharedClass.</span>http
1.  object <span class="apidocSignatureSpan">loopback.User.sharedClass.</span>sharedCtor
1.  string <span class="apidocSignatureSpan">loopback.User.sharedClass.</span>name

#### [module loopback.ValidationError](#apidoc.module.loopback.ValidationError)
1.  [function <span class="apidocSignatureSpan">loopback.</span>ValidationError (obj)](#apidoc.element.loopback.ValidationError.ValidationError)
1.  [function <span class="apidocSignatureSpan">loopback.ValidationError.</span>super_ ()](#apidoc.element.loopback.ValidationError.super_)
1.  number <span class="apidocSignatureSpan">loopback.ValidationError.</span>maxPropertyStringLength

#### [module loopback.ValidationError.super_](#apidoc.module.loopback.ValidationError.super_)
1.  [function <span class="apidocSignatureSpan">loopback.ValidationError.</span>super_ ()](#apidoc.element.loopback.ValidationError.super_.super_)
1.  [function <span class="apidocSignatureSpan">loopback.ValidationError.super_.</span>captureStackTrace ()](#apidoc.element.loopback.ValidationError.super_.captureStackTrace)
1.  number <span class="apidocSignatureSpan">loopback.ValidationError.super_.</span>stackTraceLimit

#### [module loopback.access_context](#apidoc.module.loopback.access_context)
1.  [function <span class="apidocSignatureSpan">loopback.access_context.</span>AccessContext (context)](#apidoc.element.loopback.access_context.AccessContext)
1.  [function <span class="apidocSignatureSpan">loopback.access_context.</span>AccessRequest (model, property, accessType, permission, methodNames, registry)](#apidoc.element.loopback.access_context.AccessRequest)
1.  [function <span class="apidocSignatureSpan">loopback.access_context.</span>Principal (type, id, name)](#apidoc.element.loopback.access_context.Principal)

#### [module loopback.application](#apidoc.module.loopback.application)
1.  [function <span class="apidocSignatureSpan">loopback.application.</span>acl (path)](#apidoc.element.loopback.application.acl)
1.  [function <span class="apidocSignatureSpan">loopback.application.</span>all (path)](#apidoc.element.loopback.application.all)
1.  [function <span class="apidocSignatureSpan">loopback.application.</span>bind (path)](#apidoc.element.loopback.application.bind)
1.  [function <span class="apidocSignatureSpan">loopback.application.</span>checkout (path)](#apidoc.element.loopback.application.checkout)
1.  [function <span class="apidocSignatureSpan">loopback.application.</span>connect (path)](#apidoc.element.loopback.application.connect)
1.  [function <span class="apidocSignatureSpan">loopback.application.</span>copy (path)](#apidoc.element.loopback.application.copy)
1.  [function <span class="apidocSignatureSpan">loopback.application.</span>defaultConfiguration ()](#apidoc.element.loopback.application.defaultConfiguration)
1.  [function <span class="apidocSignatureSpan">loopback.application.</span>del (arg0)](#apidoc.element.loopback.application.del)
1.  [function <span class="apidocSignatureSpan">loopback.application.</span>delete (path)](#apidoc.element.loopback.application.delete)
1.  [function <span class="apidocSignatureSpan">loopback.application.</span>disable (setting)](#apidoc.element.loopback.application.disable)
1.  [function <span class="apidocSignatureSpan">loopback.application.</span>disabled (setting)](#apidoc.element.loopback.application.disabled)
1.  [function <span class="apidocSignatureSpan">loopback.application.</span>enable (setting)](#apidoc.element.loopback.application.enable)
1.  [function <span class="apidocSignatureSpan">loopback.application.</span>enabled (setting)](#apidoc.element.loopback.application.enabled)
1.  [function <span class="apidocSignatureSpan">loopback.application.</span>engine (ext, fn)](#apidoc.element.loopback.application.engine)
1.  [function <span class="apidocSignatureSpan">loopback.application.</span>get (path)](#apidoc.element.loopback.application.get)
1.  [function <span class="apidocSignatureSpan">loopback.application.</span>handle (req, res, callback)](#apidoc.element.loopback.application.handle)
1.  [function <span class="apidocSignatureSpan">loopback.application.</span>head (path)](#apidoc.element.loopback.application.head)
1.  [function <span class="apidocSignatureSpan">loopback.application.</span>init ()](#apidoc.element.loopback.application.init)
1.  [function <span class="apidocSignatureSpan">loopback.application.</span>lazyrouter ()](#apidoc.element.loopback.application.lazyrouter)
1.  [function <span class="apidocSignatureSpan">loopback.application.</span>link (path)](#apidoc.element.loopback.application.link)
1.  [function <span class="apidocSignatureSpan">loopback.application.</span>listen ()](#apidoc.element.loopback.application.listen)
1.  [function <span class="apidocSignatureSpan">loopback.application.</span>lock (path)](#apidoc.element.loopback.application.lock)
1.  [function <span class="apidocSignatureSpan">loopback.application.</span>m-search (path)](#apidoc.element.loopback.application.m-search)
1.  [function <span class="apidocSignatureSpan">loopback.application.</span>merge (path)](#apidoc.element.loopback.application.merge)
1.  [function <span class="apidocSignatureSpan">loopback.application.</span>mkactivity (path)](#apidoc.element.loopback.application.mkactivity)
1.  [function <span class="apidocSignatureSpan">loopback.application.</span>mkcalendar (path)](#apidoc.element.loopback.application.mkcalendar)
1.  [function <span class="apidocSignatureSpan">loopback.application.</span>mkcol (path)](#apidoc.element.loopback.application.mkcol)
1.  [function <span class="apidocSignatureSpan">loopback.application.</span>move (path)](#apidoc.element.loopback.application.move)
1.  [function <span class="apidocSignatureSpan">loopback.application.</span>notify (path)](#apidoc.element.loopback.application.notify)
1.  [function <span class="apidocSignatureSpan">loopback.application.</span>options (path)](#apidoc.element.loopback.application.options)
1.  [function <span class="apidocSignatureSpan">loopback.application.</span>param (name, fn)](#apidoc.element.loopback.application.param)
1.  [function <span class="apidocSignatureSpan">loopback.application.</span>patch (path)](#apidoc.element.loopback.application.patch)
1.  [function <span class="apidocSignatureSpan">loopback.application.</span>path ()](#apidoc.element.loopback.application.path)
1.  [function <span class="apidocSignatureSpan">loopback.application.</span>post (path)](#apidoc.element.loopback.application.post)
1.  [function <span class="apidocSignatureSpan">loopback.application.</span>propfind (path)](#apidoc.element.loopback.application.propfind)
1.  [function <span class="apidocSignatureSpan">loopback.application.</span>proppatch (path)](#apidoc.element.loopback.application.proppatch)
1.  [function <span class="apidocSignatureSpan">loopback.application.</span>purge (path)](#apidoc.element.loopback.application.purge)
1.  [function <span class="apidocSignatureSpan">loopback.application.</span>put (path)](#apidoc.element.loopback.application.put)
1.  [function <span class="apidocSignatureSpan">loopback.application.</span>rebind (path)](#apidoc.element.loopback.application.rebind)
1.  [function <span class="apidocSignatureSpan">loopback.application.</span>render (name, options, callback)](#apidoc.element.loopback.application.render)
1.  [function <span class="apidocSignatureSpan">loopback.application.</span>report (path)](#apidoc.element.loopback.application.report)
1.  [function <span class="apidocSignatureSpan">loopback.application.</span>route (path)](#apidoc.element.loopback.application.route)
1.  [function <span class="apidocSignatureSpan">loopback.application.</span>search (path)](#apidoc.element.loopback.application.search)
1.  [function <span class="apidocSignatureSpan">loopback.application.</span>set (setting, val)](#apidoc.element.loopback.application.set)
1.  [function <span class="apidocSignatureSpan">loopback.application.</span>subscribe (path)](#apidoc.element.loopback.application.subscribe)
1.  [function <span class="apidocSignatureSpan">loopback.application.</span>trace (path)](#apidoc.element.loopback.application.trace)
1.  [function <span class="apidocSignatureSpan">loopback.application.</span>unbind (path)](#apidoc.element.loopback.application.unbind)
1.  [function <span class="apidocSignatureSpan">loopback.application.</span>unlink (path)](#apidoc.element.loopback.application.unlink)
1.  [function <span class="apidocSignatureSpan">loopback.application.</span>unlock (path)](#apidoc.element.loopback.application.unlock)
1.  [function <span class="apidocSignatureSpan">loopback.application.</span>unsubscribe (path)](#apidoc.element.loopback.application.unsubscribe)
1.  [function <span class="apidocSignatureSpan">loopback.application.</span>use (fn)](#apidoc.element.loopback.application.use)

#### [module loopback.registry](#apidoc.module.loopback.registry)
1.  [function <span class="apidocSignatureSpan">loopback.</span>registry ()](#apidoc.element.loopback.registry.registry)

#### [module loopback.registry.prototype](#apidoc.module.loopback.registry.prototype)
1.  [function <span class="apidocSignatureSpan">loopback.registry.prototype.</span>_defineRemoteMethods (ModelCtor, methods)](#apidoc.element.loopback.registry.prototype._defineRemoteMethods)
1.  [function <span class="apidocSignatureSpan">loopback.registry.prototype.</span>configureModel (ModelCtor, config)](#apidoc.element.loopback.registry.prototype.configureModel)
1.  [function <span class="apidocSignatureSpan">loopback.registry.prototype.</span>createDataSource (name, options)](#apidoc.element.loopback.registry.prototype.createDataSource)
1.  [function <span class="apidocSignatureSpan">loopback.registry.prototype.</span>createModel (name, properties, options)](#apidoc.element.loopback.registry.prototype.createModel)
1.  [function <span class="apidocSignatureSpan">loopback.registry.prototype.</span>findModel (modelName)](#apidoc.element.loopback.registry.prototype.findModel)
1.  [function <span class="apidocSignatureSpan">loopback.registry.prototype.</span>getModel (modelName)](#apidoc.element.loopback.registry.prototype.getModel)
1.  [function <span class="apidocSignatureSpan">loopback.registry.prototype.</span>getModelByType (modelType)](#apidoc.element.loopback.registry.prototype.getModelByType)
1.  [function <span class="apidocSignatureSpan">loopback.registry.prototype.</span>memory (name)](#apidoc.element.loopback.registry.prototype.memory)

#### [module loopback.request](#apidoc.module.loopback.request)
1.  [function <span class="apidocSignatureSpan">loopback.request.</span>accepts ()](#apidoc.element.loopback.request.accepts)
1.  [function <span class="apidocSignatureSpan">loopback.request.</span>acceptsCharset ()](#apidoc.element.loopback.request.acceptsCharset)
1.  [function <span class="apidocSignatureSpan">loopback.request.</span>acceptsCharsets ()](#apidoc.element.loopback.request.acceptsCharsets)
1.  [function <span class="apidocSignatureSpan">loopback.request.</span>acceptsEncoding ()](#apidoc.element.loopback.request.acceptsEncoding)
1.  [function <span class="apidocSignatureSpan">loopback.request.</span>acceptsEncodings ()](#apidoc.element.loopback.request.acceptsEncodings)
1.  [function <span class="apidocSignatureSpan">loopback.request.</span>acceptsLanguage ()](#apidoc.element.loopback.request.acceptsLanguage)
1.  [function <span class="apidocSignatureSpan">loopback.request.</span>acceptsLanguages ()](#apidoc.element.loopback.request.acceptsLanguages)
1.  [function <span class="apidocSignatureSpan">loopback.request.</span>get (name)](#apidoc.element.loopback.request.get)
1.  [function <span class="apidocSignatureSpan">loopback.request.</span>header (name)](#apidoc.element.loopback.request.header)
1.  [function <span class="apidocSignatureSpan">loopback.request.</span>is (types)](#apidoc.element.loopback.request.is)
1.  [function <span class="apidocSignatureSpan">loopback.request.</span>param (name, defaultValue)](#apidoc.element.loopback.request.param)
1.  [function <span class="apidocSignatureSpan">loopback.request.</span>range (size, options)](#apidoc.element.loopback.request.range)

#### [module loopback.response](#apidoc.module.loopback.response)
1.  [function <span class="apidocSignatureSpan">loopback.response.</span>append (field, val)](#apidoc.element.loopback.response.append)
1.  [function <span class="apidocSignatureSpan">loopback.response.</span>attachment (filename)](#apidoc.element.loopback.response.attachment)
1.  [function <span class="apidocSignatureSpan">loopback.response.</span>clearCookie (name, options)](#apidoc.element.loopback.response.clearCookie)
1.  [function <span class="apidocSignatureSpan">loopback.response.</span>contentType (type)](#apidoc.element.loopback.response.contentType)
1.  [function <span class="apidocSignatureSpan">loopback.response.</span>cookie (name, value, options)](#apidoc.element.loopback.response.cookie)
1.  [function <span class="apidocSignatureSpan">loopback.response.</span>download (path, filename, callback)](#apidoc.element.loopback.response.download)
1.  [function <span class="apidocSignatureSpan">loopback.response.</span>format (obj)](#apidoc.element.loopback.response.format)
1.  [function <span class="apidocSignatureSpan">loopback.response.</span>get (field)](#apidoc.element.loopback.response.get)
1.  [function <span class="apidocSignatureSpan">loopback.response.</span>header (field, val)](#apidoc.element.loopback.response.header)
1.  [function <span class="apidocSignatureSpan">loopback.response.</span>json (obj)](#apidoc.element.loopback.response.json)
1.  [function <span class="apidocSignatureSpan">loopback.response.</span>jsonp (obj)](#apidoc.element.loopback.response.jsonp)
1.  [function <span class="apidocSignatureSpan">loopback.response.</span>links (links)](#apidoc.element.loopback.response.links)
1.  [function <span class="apidocSignatureSpan">loopback.response.</span>location (url)](#apidoc.element.loopback.response.location)
1.  [function <span class="apidocSignatureSpan">loopback.response.</span>redirect (url)](#apidoc.element.loopback.response.redirect)
1.  [function <span class="apidocSignatureSpan">loopback.response.</span>render (view, options, callback)](#apidoc.element.loopback.response.render)
1.  [function <span class="apidocSignatureSpan">loopback.response.</span>send (body)](#apidoc.element.loopback.response.send)
1.  [function <span class="apidocSignatureSpan">loopback.response.</span>sendFile (path, options, callback)](#apidoc.element.loopback.response.sendFile)
1.  [function <span class="apidocSignatureSpan">loopback.response.</span>sendStatus (statusCode)](#apidoc.element.loopback.response.sendStatus)
1.  [function <span class="apidocSignatureSpan">loopback.response.</span>sendfile (arg0, arg1, arg2)](#apidoc.element.loopback.response.sendfile)
1.  [function <span class="apidocSignatureSpan">loopback.response.</span>set (field, val)](#apidoc.element.loopback.response.set)
1.  [function <span class="apidocSignatureSpan">loopback.response.</span>status (code)](#apidoc.element.loopback.response.status)
1.  [function <span class="apidocSignatureSpan">loopback.response.</span>type (type)](#apidoc.element.loopback.response.type)
1.  [function <span class="apidocSignatureSpan">loopback.response.</span>vary (field)](#apidoc.element.loopback.response.vary)

#### [module loopback.utils](#apidoc.module.loopback.utils)
1.  [function <span class="apidocSignatureSpan">loopback.utils.</span>concatResults (previousResults, currentResults)](#apidoc.element.loopback.utils.concatResults)
1.  [function <span class="apidocSignatureSpan">loopback.utils.</span>createPromiseCallback ()](#apidoc.element.loopback.utils.createPromiseCallback)
1.  [function <span class="apidocSignatureSpan">loopback.utils.</span>downloadInChunks (filter, chunkSize, processFunction, cb)](#apidoc.element.loopback.utils.downloadInChunks)
1.  [function <span class="apidocSignatureSpan">loopback.utils.</span>uploadInChunks (largeArray, chunkSize, processFunction, cb)](#apidoc.element.loopback.utils.uploadInChunks)



# <a name="apidoc.module.loopback"></a>[module loopback](#apidoc.module.loopback)

#### <a name="apidoc.element.loopback.ACL"></a>[function <span class="apidocSignatureSpan">loopback.</span>ACL (data, options)](#apidoc.element.loopback.ACL)
- description and source-code
```javascript
function ModelConstructor(data, options) {
  if (!(this instanceof ModelConstructor)) {
    return new ModelConstructor(data, options);
  }
  if (ModelClass.settings.unresolved) {
    throw new Error(g.f('Model %s is not defined.', ModelClass.modelName));
  }
  ModelBaseClass.apply(this, arguments);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.super_"></a>[function <span class="apidocSignatureSpan">loopback.</span>ACL.super_ (data, options)](#apidoc.element.loopback.ACL.super_)
- description and source-code
```javascript
function ModelConstructor(data, options) {
  if (!(this instanceof ModelConstructor)) {
    return new ModelConstructor(data, options);
  }
  if (ModelClass.settings.unresolved) {
    throw new Error(g.f('Model %s is not defined.', ModelClass.modelName));
  }
  ModelBaseClass.apply(this, arguments);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.AccessToken"></a>[function <span class="apidocSignatureSpan">loopback.</span>AccessToken (data, options)](#apidoc.element.loopback.AccessToken)
- description and source-code
```javascript
function ModelConstructor(data, options) {
  if (!(this instanceof ModelConstructor)) {
    return new ModelConstructor(data, options);
  }
  if (ModelClass.settings.unresolved) {
    throw new Error(g.f('Model %s is not defined.', ModelClass.modelName));
  }
  ModelBaseClass.apply(this, arguments);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Application"></a>[function <span class="apidocSignatureSpan">loopback.</span>Application (data, options)](#apidoc.element.loopback.Application)
- description and source-code
```javascript
function ModelConstructor(data, options) {
  if (!(this instanceof ModelConstructor)) {
    return new ModelConstructor(data, options);
  }
  if (ModelClass.settings.unresolved) {
    throw new Error(g.f('Model %s is not defined.', ModelClass.modelName));
  }
  ModelBaseClass.apply(this, arguments);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Change"></a>[function <span class="apidocSignatureSpan">loopback.</span>Change (data, options)](#apidoc.element.loopback.Change)
- description and source-code
```javascript
function ModelConstructor(data, options) {
  if (!(this instanceof ModelConstructor)) {
    return new ModelConstructor(data, options);
  }
  if (ModelClass.settings.unresolved) {
    throw new Error(g.f('Model %s is not defined.', ModelClass.modelName));
  }
  ModelBaseClass.apply(this, arguments);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Change.Conflict"></a>[function <span class="apidocSignatureSpan">loopback.</span>Change.Conflict (modelId, SourceModel, TargetModel)](#apidoc.element.loopback.Change.Conflict)
- description and source-code
```javascript
function Conflict(modelId, SourceModel, TargetModel) {
  this.SourceModel = SourceModel;
  this.TargetModel = TargetModel;
  this.SourceChange = SourceModel.getChangeModel();
  this.TargetChange = TargetModel.getChangeModel();
  this.modelId = modelId;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Checkpoint"></a>[function <span class="apidocSignatureSpan">loopback.</span>Checkpoint (data, options)](#apidoc.element.loopback.Checkpoint)
- description and source-code
```javascript
function ModelConstructor(data, options) {
  if (!(this instanceof ModelConstructor)) {
    return new ModelConstructor(data, options);
  }
  if (ModelClass.settings.unresolved) {
    throw new Error(g.f('Model %s is not defined.', ModelClass.modelName));
  }
  ModelBaseClass.apply(this, arguments);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Connector"></a>[function <span class="apidocSignatureSpan">loopback.</span>Connector (options)](#apidoc.element.loopback.Connector)
- description and source-code
```javascript
function Connector(options) {
  EventEmitter.apply(this, arguments);
  this.options = options;

  debug('created with options', options);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.DataSource"></a>[function <span class="apidocSignatureSpan">loopback.</span>DataSource (name, settings, modelBuilder)](#apidoc.element.loopback.DataSource)
- description and source-code
```javascript
function DataSource(name, settings, modelBuilder) {
  if (!(this instanceof DataSource)) {
    return new DataSource(name, settings);
  }

  // Check if the settings object is passed as the first argument
  if (typeof name === 'object' && settings === undefined) {
    settings = name;
    name = undefined;
  }

  // Check if the first argument is a URL
  if (typeof name === 'string' && name.indexOf('://') !== -1) {
    name = utils.parseSettings(name);
  }

  // Check if the settings is in the form of URL string
  if (typeof settings === 'string' && settings.indexOf('://') !== -1) {
    settings = utils.parseSettings(settings);
  }

  this.modelBuilder = modelBuilder || new ModelBuilder();
  this.models = this.modelBuilder.models;
  this.definitions = this.modelBuilder.definitions;
  this.juggler = juggler;

  // operation metadata
  // Initialize it before calling setup as the connector might register operations
  this._operations = {};

  this.setup(name, settings);

  this._setupConnector();

  // connector
  var connector = this.connector;

  // DataAccessObject - connector defined or supply the default
  var dao = (connector && connector.DataAccessObject) || this.constructor.DataAccessObject;
  this.DataAccessObject = function() {
  };

  // define DataAccessObject methods
  Object.keys(dao).forEach(function(name) {
    var fn = dao[name];
    this.DataAccessObject[name] = fn;

    if (typeof fn === 'function') {
      this.defineOperation(name, {
        accepts: fn.accepts,
        'returns': fn.returns,
        http: fn.http,
        remoteEnabled: fn.shared ? true : false,
        scope: this.DataAccessObject,
        fnName: name,
      });
    }
  }.bind(this));

  // define DataAccessObject.prototype methods
  Object.keys(dao.prototype).forEach(function(name) {
    var fn = dao.prototype[name];
    this.DataAccessObject.prototype[name] = fn;
    if (typeof fn === 'function') {
      this.defineOperation(name, {
        prototype: true,
        accepts: fn.accepts,
        'returns': fn.returns,
        http: fn.http,
        remoteEnabled: fn.shared ? true : false,
        scope: this.DataAccessObject.prototype,
        fnName: name,
      });
    }
  }.bind(this));
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.DataSource.Any"></a>[function <span class="apidocSignatureSpan">loopback.</span>DataSource.Any (value)](#apidoc.element.loopback.DataSource.Any)
- description and source-code
```javascript
function Any(value) {
  if (!(this instanceof Any)) {
    return value;
  }
  this.value = value;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.DataSource.DataAccessObject"></a>[function <span class="apidocSignatureSpan">loopback.</span>DataSource.DataAccessObject ()](#apidoc.element.loopback.DataSource.DataAccessObject)
- description and source-code
```javascript
function DataAccessObject() {
  if (DataAccessObject._mixins) {
    var self = this;
    var args = arguments;
    DataAccessObject._mixins.forEach(function(m) {
      m.call(self, args);
    });
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.DataSource.JSON"></a>[function <span class="apidocSignatureSpan">loopback.</span>DataSource.JSON (value)](#apidoc.element.loopback.DataSource.JSON)
- description and source-code
```javascript
function JSON(value) {
  if (!(this instanceof JSON)) {
    return value;
  }
  this.value = value;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.DataSource.Text"></a>[function <span class="apidocSignatureSpan">loopback.</span>DataSource.Text (value)](#apidoc.element.loopback.DataSource.Text)
- description and source-code
```javascript
function Text(value) {
  if (!(this instanceof Text)) {
    return value;
  }
  this.value = value;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Email"></a>[function <span class="apidocSignatureSpan">loopback.</span>Email (data, options)](#apidoc.element.loopback.Email)
- description and source-code
```javascript
function ModelConstructor(data, options) {
  if (!(this instanceof ModelConstructor)) {
    return new ModelConstructor(data, options);
  }
  if (ModelClass.settings.unresolved) {
    throw new Error(g.f('Model %s is not defined.', ModelClass.modelName));
  }
  ModelBaseClass.apply(this, arguments);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Email.super_"></a>[function <span class="apidocSignatureSpan">loopback.</span>Email.super_ (data, options)](#apidoc.element.loopback.Email.super_)
- description and source-code
```javascript
function ModelConstructor(data, options) {
  if (!(this instanceof ModelConstructor)) {
    return new ModelConstructor(data, options);
  }
  if (ModelClass.settings.unresolved) {
    throw new Error(g.f('Model %s is not defined.', ModelClass.modelName));
  }
  ModelBaseClass.apply(this, arguments);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.GeoPoint"></a>[function <span class="apidocSignatureSpan">loopback.</span>GeoPoint (data)](#apidoc.element.loopback.GeoPoint)
- description and source-code
```javascript
function GeoPoint(data) {
  if (!(this instanceof GeoPoint)) {
    return new GeoPoint(data);
  }

  if (arguments.length === 2) {
    data = {
      lat: arguments[0],
      lng: arguments[1],
    };
  }

  assert(Array.isArray(data) || typeof data === 'object' || typeof data === 'string',
    'must provide valid geo-coordinates array [lat, lng] or object or a "lat, lng" string');

  if (typeof data === 'string') {
    data = data.split(/,\s*/);
    assert(data.length === 2, 'must provide a string "lat,lng" creating a GeoPoint with a string');
  }
  if (Array.isArray(data)) {
    data = {
      lat: Number(data[0]),
      lng: Number(data[1]),
    };
  } else {
    data.lng = Number(data.lng);
    data.lat = Number(data.lat);
  }

  assert(typeof data === 'object', 'must provide a lat and lng object when creating a GeoPoint');
  assert(typeof data.lat === 'number' && !isNaN(data.lat), 'lat must be a number when creating a GeoPoint');
  assert(typeof data.lng === 'number' && !isNaN(data.lng), 'lng must be a number when creating a GeoPoint');
  assert(data.lng <= 180, 'lng must be <= 180');
  assert(data.lng >= -180, 'lng must be >= -180');
  assert(data.lat <= 90, 'lat must be <= 90');
  assert(data.lat >= -90, 'lat must be >= -90');

  this.lat = data.lat;
  this.lng = data.lng;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.KeyValueModel"></a>[function <span class="apidocSignatureSpan">loopback.</span>KeyValueModel (data, options)](#apidoc.element.loopback.KeyValueModel)
- description and source-code
```javascript
function ModelConstructor(data, options) {
  if (!(this instanceof ModelConstructor)) {
    return new ModelConstructor(data, options);
  }
  if (ModelClass.settings.unresolved) {
    throw new Error(g.f('Model %s is not defined.', ModelClass.modelName));
  }
  ModelBaseClass.apply(this, arguments);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Mail"></a>[function <span class="apidocSignatureSpan">loopback.</span>Mail (settings)](#apidoc.element.loopback.Mail)
- description and source-code
```javascript
function MailConnector(settings) {
  assert(typeof settings === 'object', 'cannot initialize MailConnector without a settings object');

  var transports = settings.transports;

  // if transports is not in settings object AND settings.transport exists
  if (!transports && settings.transport) {
    // then wrap single transport in an array and assign to transports
    transports = [settings.transport];
  }

  if (!transports) {
    transports = [];
  }

  this.transportsIndex = {};
  this.transports = [];

  if (loopback.isServer) {
    transports.forEach(this.setupTransport.bind(this));
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Mail.prototype.DataAccessObject"></a>[function <span class="apidocSignatureSpan">loopback.</span>Mail.prototype.DataAccessObject ()](#apidoc.element.loopback.Mail.prototype.DataAccessObject)
- description and source-code
```javascript
function Mailer() {

}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Memory"></a>[function <span class="apidocSignatureSpan">loopback.</span>Memory ()](#apidoc.element.loopback.Memory)
- description and source-code
```javascript
function Memory() {
  // TODO implement entire memory connector
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Remote"></a>[function <span class="apidocSignatureSpan">loopback.</span>Remote (settings)](#apidoc.element.loopback.Remote)
- description and source-code
```javascript
function RemoteConnector(settings) {
  assert(typeof settings ===
    'object',
    'cannot initiaze RemoteConnector without a settings object');
  this.client = settings.client;
  this.adapter = settings.adapter || 'rest';
  this.protocol = settings.protocol || 'http';
  this.root = settings.root || '';
  this.host = settings.host || 'localhost';
  this.port = settings.port || 3000;
  this.remotes = remoting.create();
  this.name = 'remote-connector';

  if (settings.url) {
    this.url = settings.url;
  } else {
    this.url = this.protocol + '://' + this.host + ':' + this.port + this.root;
  }

  // handle mixins in the define() method
  var DAO = this.DataAccessObject = function() {
  };

}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Role"></a>[function <span class="apidocSignatureSpan">loopback.</span>Role (data, options)](#apidoc.element.loopback.Role)
- description and source-code
```javascript
function ModelConstructor(data, options) {
  if (!(this instanceof ModelConstructor)) {
    return new ModelConstructor(data, options);
  }
  if (ModelClass.settings.unresolved) {
    throw new Error(g.f('Model %s is not defined.', ModelClass.modelName));
  }
  ModelBaseClass.apply(this, arguments);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.RoleMapping"></a>[function <span class="apidocSignatureSpan">loopback.</span>RoleMapping (data, options)](#apidoc.element.loopback.RoleMapping)
- description and source-code
```javascript
function ModelConstructor(data, options) {
  if (!(this instanceof ModelConstructor)) {
    return new ModelConstructor(data, options);
  }
  if (ModelClass.settings.unresolved) {
    throw new Error(g.f('Model %s is not defined.', ModelClass.modelName));
  }
  ModelBaseClass.apply(this, arguments);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Route"></a>[function <span class="apidocSignatureSpan">loopback.</span>Route (path)](#apidoc.element.loopback.Route)
- description and source-code
```javascript
function Route(path) {
  this.path = path;
  this.stack = [];

  debug('new %o', path)

  // route handlers for various http methods
  this.methods = {};
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Router"></a>[function <span class="apidocSignatureSpan">loopback.</span>Router (options)](#apidoc.element.loopback.Router)
- description and source-code
```javascript
Router = function (options) {
  var opts = options || {};

  function router(req, res, next) {
    router.handle(req, res, next);
  }

  // mixin Router class functions
  setPrototypeOf(router, proto)

  router.params = {};
  router._params = [];
  router.caseSensitive = opts.caseSensitive;
  router.mergeParams = opts.mergeParams;
  router.strict = opts.strict;
  router.stack = [];

  return router;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Scope"></a>[function <span class="apidocSignatureSpan">loopback.</span>Scope (data, options)](#apidoc.element.loopback.Scope)
- description and source-code
```javascript
function ModelConstructor(data, options) {
  if (!(this instanceof ModelConstructor)) {
    return new ModelConstructor(data, options);
  }
  if (ModelClass.settings.unresolved) {
    throw new Error(g.f('Model %s is not defined.', ModelClass.modelName));
  }
  ModelBaseClass.apply(this, arguments);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.User"></a>[function <span class="apidocSignatureSpan">loopback.</span>User (data, options)](#apidoc.element.loopback.User)
- description and source-code
```javascript
function ModelConstructor(data, options) {
  if (!(this instanceof ModelConstructor)) {
    return new ModelConstructor(data, options);
  }
  if (ModelClass.settings.unresolved) {
    throw new Error(g.f('Model %s is not defined.', ModelClass.modelName));
  }
  ModelBaseClass.apply(this, arguments);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ValidationError"></a>[function <span class="apidocSignatureSpan">loopback.</span>ValidationError (obj)](#apidoc.element.loopback.ValidationError)
- description and source-code
```javascript
function ValidationError(obj) {
  if (!(this instanceof ValidationError)) return new ValidationError(obj);

  this.name = 'ValidationError';

  var context = obj && obj.constructor && obj.constructor.modelName;
  this.message = g.f(
    'The %s instance is not valid. Details: %s.',
      context ? ''' + context + ''' : 'model',
      formatErrors(obj.errors, obj.toJSON()) || '(unknown)'
  );

  this.statusCode = 422;

  this.details = {
    context: context,
    codes: obj.errors && obj.errors.codes,
    messages: obj.errors,
  };

  if (Error.captureStackTrace) {
    // V8 (Chrome, Opera, Node)
    Error.captureStackTrace(this, this.constructor);
  } else if (errorHasStackProperty) {
    // Firefox
    this.stack = (new Error).stack;
  }
  // Safari and PhantomJS initializes 'error.stack' on throw
  // Internet Explorer does not support 'error.stack'
}
```
- example usage
```shell
...
  return save();
}

inst.isValid(function(valid) {
  if (valid) {
    save();
  } else {
    var err = new Model.ValidationError(inst);
    // throws option is dangerous for async usage
    if (options.throws) {
      throw err;
    }
    callback(err, inst);
  }
});
...
```

#### <a name="apidoc.element.loopback.ValidationError.super_"></a>[function <span class="apidocSignatureSpan">loopback.</span>ValidationError.super_ ()](#apidoc.element.loopback.ValidationError.super_)
- description and source-code
```javascript
function Error() { [native code] }
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.configureModel"></a>[function <span class="apidocSignatureSpan">loopback.</span>configureModel (ModelCtor, config)](#apidoc.element.loopback.configureModel)
- description and source-code
```javascript
configureModel = function (ModelCtor, config) {
  return this.registry.configureModel.apply(this.registry, arguments);
}
```
- example usage
```shell
...
}

config = extend({}, config);
config.dataSource = dataSource;

setSharedMethodSharedProperties(ModelCtor, app, config);

app.registry.configureModel(ModelCtor, config);
}

function setSharedMethodSharedProperties(model, app, modelConfigs) {
var settings = {};

// apply config.json settings
var config = app.get('remoting');
...
```

#### <a name="apidoc.element.loopback.context"></a>[function <span class="apidocSignatureSpan">loopback.</span>context ()](#apidoc.element.loopback.context)
- description and source-code
```javascript
context = function () {
  throw new Error(g.f(
    '%s middleware was removed in version 3.0. See %s for more details.',
    'loopback#context',
    'http://loopback.io/doc/en/lb2/Using-current-context.html'));
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.createContext"></a>[function <span class="apidocSignatureSpan">loopback.</span>createContext (scopeName)](#apidoc.element.loopback.createContext)
- description and source-code
```javascript
createContext = function (scopeName) {
  throw new Error(g.f(
    '%s was removed in version 3.0. See %s for more details.',
    'loopback.createContext()',
    'http://loopback.io/doc/en/lb2/Using-current-context.html'));
}
```
- example usage
```shell
...
      'loopback.runInContext()',
      'http://loopback.io/doc/en/lb2/Using-current-context.html'));
  };

  loopback.createContext = function(scopeName) {
    throw new Error(g.f(
      '%s was removed in version 3.0. See %s for more details.',
      'loopback.createContext()',
      'http://loopback.io/doc/en/lb2/Using-current-context.html'));
  };
};
...
```

#### <a name="apidoc.element.loopback.createDataSource"></a>[function <span class="apidocSignatureSpan">loopback.</span>createDataSource (name, options)](#apidoc.element.loopback.createDataSource)
- description and source-code
```javascript
createDataSource = function (name, options) {
  return this.registry.createDataSource.apply(this.registry, arguments);
}
```
- example usage
```shell
...
      config.connector = require(connectorPath);
    }
  }
  if (config.connector && typeof config.connector === 'object' && !config.connector.name)
    config.connector.name = name;
}

return registry.createDataSource(config);
}

function configureModel(ModelCtor, config, app) {
assert(ModelCtor.prototype instanceof ModelCtor.registry.getModel('Model'),
  ModelCtor.modelName + ' must be a descendant of loopback.Model');

var dataSource = config.dataSource;
...
```

#### <a name="apidoc.element.loopback.createModel"></a>[function <span class="apidocSignatureSpan">loopback.</span>createModel (name, properties, options)](#apidoc.element.loopback.createModel)
- description and source-code
```javascript
createModel = function (name, properties, options) {
  return this.registry.createModel.apply(this.registry, arguments);
}
```
- example usage
```shell
...

app.model = function(Model, config) {
var isPublic = true;
var registry = this.registry;

if (typeof Model === 'string') {
  var msg = 'app.model(modelName, settings) is no longer supported. ' +
    'Use app.registry.createModel(modelName, definition) and ' +
    'app.model(ModelCtor, config) instead.';
  throw new Error(msg);
}

if (arguments.length > 1) {
  config = config || {};
  configureModel(Model, config, this);
...
```

#### <a name="apidoc.element.loopback.errorHandler"></a>[function <span class="apidocSignatureSpan">loopback.</span>errorHandler (options)](#apidoc.element.loopback.errorHandler)
- description and source-code
```javascript
errorHandler = function (options) {
  throw new Error('loopback.errorHandler is no longer available.' +
  ' Please use the module "strong-error-handler" instead.');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.favicon"></a>[function <span class="apidocSignatureSpan">loopback.</span>favicon (icon, options)](#apidoc.element.loopback.favicon)
- description and source-code
```javascript
favicon = function (icon, options) {
  icon = icon || path.join(__dirname, '../../favicon.ico');
  return favicon(icon, options);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.findModel"></a>[function <span class="apidocSignatureSpan">loopback.</span>findModel (modelName)](#apidoc.element.loopback.findModel)
- description and source-code
```javascript
findModel = function (modelName) {
  return this.registry.findModel.apply(this.registry, arguments);
}
```
- example usage
```shell
...

    // the principalType must either be 'USER'
    if (p.type === Principal.USER) {
      return {id: p.id, principalType: p.type};
    }

    // or permit to resolve a valid user model
    var userModel = this.registry.findModel(p.type);
    if (!userModel) continue;
    if (userModel.prototype instanceof BaseUser) {
      return {id: p.id, principalType: p.type};
    }
  }
};
...
```

#### <a name="apidoc.element.loopback.getCurrentContext"></a>[function <span class="apidocSignatureSpan">loopback.</span>getCurrentContext ()](#apidoc.element.loopback.getCurrentContext)
- description and source-code
```javascript
getCurrentContext = function () {
  throw new Error(g.f(
    '%s was removed in version 3.0. See %s for more details.',
    'loopback.getCurrentContext()',
    'http://loopback.io/doc/en/lb2/Using-current-context.html'));
}
```
- example usage
```shell
...

module.exports = function(loopback) {
juggler.getCurrentContext =
remoting.getCurrentContext =
loopback.getCurrentContext = function() {
  throw new Error(g.f(
    '%s was removed in version 3.0. See %s for more details.',
    'loopback.getCurrentContext()',
    'http://loopback.io/doc/en/lb2/Using-current-context.html'));
};

loopback.runInContext = function(fn) {
  throw new Error(g.f(
    '%s was removed in version 3.0. See %s for more details.',
    'loopback.runInContext()',
...
```

#### <a name="apidoc.element.loopback.getModel"></a>[function <span class="apidocSignatureSpan">loopback.</span>getModel (modelName)](#apidoc.element.loopback.getModel)
- description and source-code
```javascript
getModel = function (modelName) {
  return this.registry.getModel.apply(this.registry, arguments);
}
```
- example usage
```shell
...
context = context || {};

assert(context.registry,
  'Application registry is mandatory in AccessContext but missing in provided context');
this.registry = context.registry;
this.principals = context.principals || [];
var model = context.model;
model = ('string' === typeof model) ? this.registry.getModel(model) : model;
this.model = model;
this.modelName = model && model.modelName;

this.modelId = context.id || context.modelId;
this.property = context.property || AccessContext.ALL;

this.method = context.method;
...
```

#### <a name="apidoc.element.loopback.getModelByType"></a>[function <span class="apidocSignatureSpan">loopback.</span>getModelByType (modelType)](#apidoc.element.loopback.getModelByType)
- description and source-code
```javascript
getModelByType = function (modelType) {
  return this.registry.getModelByType.apply(this.registry, arguments);
}
```
- example usage
```shell
...
    // The function is used as a setter
    _aclModel = ACL;
  }
  if (_aclModel) {
    return _aclModel;
  }
  var aclModel = registry.getModel('ACL');
  _aclModel = registry.getModelByType(aclModel);
  return _aclModel;
};

/**
 * Check if the given access token can invoke the specified method.
 *
 * @param {AccessToken} token The access token.
...
```

#### <a name="apidoc.element.loopback.memory"></a>[function <span class="apidocSignatureSpan">loopback.</span>memory (name)](#apidoc.element.loopback.memory)
- description and source-code
```javascript
memory = function (name) {
  return this.registry.memory.apply(this.registry, arguments);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.query"></a>[function <span class="apidocSignatureSpan">loopback.</span>query (options)](#apidoc.element.loopback.query)
- description and source-code
```javascript
function query(options) {
  var opts = Object.create(options || null);
  var queryparse = qs.parse;

  if (typeof options === 'function') {
    queryparse = options;
    opts = undefined;
  }

  if (opts !== undefined && opts.allowPrototypes === undefined) {
    // back-compat for qs module
    opts.allowPrototypes = true;
  }

  return function query(req, res, next){
    if (!req.query) {
      var val = parseUrl(req).query;
      req.query = queryparse(val, opts);
    }

    next();
  };
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.remoteMethod"></a>[function <span class="apidocSignatureSpan">loopback.</span>remoteMethod (fn, options)](#apidoc.element.loopback.remoteMethod)
- description and source-code
```javascript
remoteMethod = function (fn, options) {
  fn.shared = true;
  if (typeof options === 'object') {
    Object.keys(options).forEach(function(key) {
      fn[key] = options[key];
    });
  }
  fn.http = fn.http || {verb: 'get'};
}
```
- example usage
```shell
...
  /**
* Enable remote invocation for the specified method.
* See [Remote methods](http://loopback.io/doc/en/lb2/Remote-methods.html) for more information.
*
* Static method example:
* '''js
* Model.myMethod();
* Model.remoteMethod('myMethod');
* '''
*
* @param {String} name The name of the method.
* @param {Object} options The remoting options.
* See [Remote methods - Options](http://loopback.io/doc/en/lb2/Remote-methods.html#options).
*/
...
```

#### <a name="apidoc.element.loopback.rest"></a>[function <span class="apidocSignatureSpan">loopback.</span>rest ()](#apidoc.element.loopback.rest)
- description and source-code
```javascript
function rest() {
  var handlers; // Cached handlers

  return function restApiHandler(req, res, next) {
    var app = req.app;
    var registry = app.registry;

    if (!handlers) {
      handlers = [];
      var remotingOptions = app.get('remoting') || {};

      var contextOptions = remotingOptions.context;
      if (contextOptions !== undefined && contextOptions !== false) {
        throw new Error(g.f(
          '%s was removed in version 3.0. See %s for more details.',
          'remoting.context option',
          'http://loopback.io/doc/en/lb2/Using-current-context.html'));
      }

      if (app.isAuthEnabled) {
        var AccessToken = registry.getModelByType('AccessToken');
        handlers.push(loopback.token({model: AccessToken, app: app}));
      }

      handlers.push(function(req, res, next) {
        // Need to get an instance of the REST handler per request
        return app.handler('rest')(req, res, next);
      });
    }
    if (handlers.length === 1) {
      return handlers[0](req, res, next);
    }
    async.eachSeries(handlers, function(handler, done) {
      handler(req, res, done);
    }, next);
  };
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.runInContext"></a>[function <span class="apidocSignatureSpan">loopback.</span>runInContext (fn)](#apidoc.element.loopback.runInContext)
- description and source-code
```javascript
runInContext = function (fn) {
  throw new Error(g.f(
    '%s was removed in version 3.0. See %s for more details.',
    'loopback.runInContext()',
    'http://loopback.io/doc/en/lb2/Using-current-context.html'));
}
```
- example usage
```shell
...
    'loopback.getCurrentContext()',
    'http://loopback.io/doc/en/lb2/Using-current-context.html'));
};

loopback.runInContext = function(fn) {
  throw new Error(g.f(
    '%s was removed in version 3.0. See %s for more details.',
    'loopback.runInContext()',
    'http://loopback.io/doc/en/lb2/Using-current-context.html'));
};

loopback.createContext = function(scopeName) {
  throw new Error(g.f(
    '%s was removed in version 3.0. See %s for more details.',
    'loopback.createContext()',
...
```

#### <a name="apidoc.element.loopback.static"></a>[function <span class="apidocSignatureSpan">loopback.</span>static (root, options)](#apidoc.element.loopback.static)
- description and source-code
```javascript
function serveStatic(root, options) {
  if (!root) {
    throw new TypeError('root path required')
  }

  if (typeof root !== 'string') {
    throw new TypeError('root path must be a string')
  }

  // copy options object
  var opts = Object.create(options || null)

  // fall-though
  var fallthrough = opts.fallthrough !== false

  // default redirect
  var redirect = opts.redirect !== false

  // headers listener
  var setHeaders = opts.setHeaders

  if (setHeaders && typeof setHeaders !== 'function') {
    throw new TypeError('option setHeaders must be function')
  }

  // setup options for send
  opts.maxage = opts.maxage || opts.maxAge || 0
  opts.root = resolve(root)

  // construct directory listener
  var onDirectory = redirect
    ? createRedirectDirectoryListener()
    : createNotFoundDirectoryListener()

  return function serveStatic (req, res, next) {
    if (req.method !== 'GET' && req.method !== 'HEAD') {
      if (fallthrough) {
        return next()
      }

      // method not allowed
      res.statusCode = 405
      res.setHeader('Allow', 'GET, HEAD')
      res.setHeader('Content-Length', '0')
      res.end()
      return
    }

    var forwardError = !fallthrough
    var originalUrl = parseUrl.original(req)
    var path = parseUrl(req).pathname

    // make sure redirect occurs at mount
    if (path === '/' && originalUrl.pathname.substr(-1) !== '/') {
      path = ''
    }

    // create send stream
    var stream = send(req, path, opts)

    // add directory handler
    stream.on('directory', onDirectory)

    // add headers listener
    if (setHeaders) {
      stream.on('headers', setHeaders)
    }

    // add file listener for fallthrough
    if (fallthrough) {
      stream.on('file', function onFile () {
        // once file is determined, always forward error
        forwardError = true
      })
    }

    // forward errors
    stream.on('error', function error (err) {
      if (forwardError || !(err.statusCode < 500)) {
        next(err)
        return
      }

      next()
    })

    // pipe
    stream.pipe(res)
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.status"></a>[function <span class="apidocSignatureSpan">loopback.</span>status ()](#apidoc.element.loopback.status)
- description and source-code
```javascript
function status() {
  var started = new Date();

  return function(req, res) {
    res.send({
      started: started,
      uptime: (Date.now() - Number(started)) / 1000,
    });
  };
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.template"></a>[function <span class="apidocSignatureSpan">loopback.</span>template (file)](#apidoc.element.loopback.template)
- description and source-code
```javascript
template = function (file) {
  var templates = this._templates || (this._templates = {});
  var str = templates[file] || (templates[file] = fs.readFileSync(file, 'utf8'));
  return ejs.compile(str, {
    filename: file,
  });
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.token"></a>[function <span class="apidocSignatureSpan">loopback.</span>token (options)](#apidoc.element.loopback.token)
- description and source-code
```javascript
function token(options) {
  options = options || {};
  var TokenModel;

  var currentUserLiteral = options.currentUserLiteral;
  if (currentUserLiteral && (typeof currentUserLiteral !== 'string')) {
    debug('Set currentUserLiteral to \'me\' as the value is not a string.');
    currentUserLiteral = 'me';
  }
  if (typeof currentUserLiteral === 'string') {
    currentUserLiteral = escapeRegExp(currentUserLiteral);
  }

  var enableDoublecheck = !!options.enableDoublecheck;
  var overwriteExistingToken = !!options.overwriteExistingToken;

  return function(req, res, next) {
    var app = req.app;
    var registry = app.registry;
    if (!TokenModel) {
      TokenModel = registry.getModel(options.model || 'AccessToken');
    }

    assert(typeof TokenModel === 'function',
      'loopback.token() middleware requires a AccessToken model');

    if (req.accessToken !== undefined) {
      if (!enableDoublecheck) {
        // req.accessToken is defined already (might also be "null" or "false") and enableDoublecheck
        // has not been set --> skip searching for credentials
        rewriteUserLiteral(req, currentUserLiteral);
        return next();
      }
      if (req.accessToken && req.accessToken.id && !overwriteExistingToken) {
        // req.accessToken.id is defined, which means that some other middleware has identified a valid user.
        // when overwriteExistingToken is not set to a truthy value, skip searching for credentials.
        rewriteUserLiteral(req, currentUserLiteral);
        return next();
      }
      // continue normal operation (as if req.accessToken was undefined)
    }
    TokenModel.findForRequest(req, options, function(err, token) {
      req.accessToken = token || null;
      rewriteUserLiteral(req, currentUserLiteral);
      var ctx = req.loopbackContext;
      if (ctx && ctx.active) ctx.set('accessToken', token);
      next(err);
    });
  };
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.urlNotFound"></a>[function <span class="apidocSignatureSpan">loopback.</span>urlNotFound ()](#apidoc.element.loopback.urlNotFound)
- description and source-code
```javascript
function urlNotFound() {
  return function raiseUrlNotFoundError(req, res, next) {
    var error = new Error('Cannot ' + req.method + ' ' + req.url);
    error.status = 404;
    next(error);
  };
}
```
- example usage
```shell
n/a
```



# <a name="apidoc.module.loopback.ACL"></a>[module loopback.ACL](#apidoc.module.loopback.ACL)

#### <a name="apidoc.element.loopback.ACL.ACL"></a>[function <span class="apidocSignatureSpan">loopback.</span>ACL (data, options)](#apidoc.element.loopback.ACL.ACL)
- description and source-code
```javascript
function ModelConstructor(data, options) {
  if (!(this instanceof ModelConstructor)) {
    return new ModelConstructor(data, options);
  }
  if (ModelClass.settings.unresolved) {
    throw new Error(g.f('Model %s is not defined.', ModelClass.modelName));
  }
  ModelBaseClass.apply(this, arguments);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.ValidationError"></a>[function <span class="apidocSignatureSpan">loopback.ACL.</span>ValidationError (obj)](#apidoc.element.loopback.ACL.ValidationError)
- description and source-code
```javascript
function ValidationError(obj) {
  if (!(this instanceof ValidationError)) return new ValidationError(obj);

  this.name = 'ValidationError';

  var context = obj && obj.constructor && obj.constructor.modelName;
  this.message = g.f(
    'The %s instance is not valid. Details: %s.',
      context ? ''' + context + ''' : 'model',
      formatErrors(obj.errors, obj.toJSON()) || '(unknown)'
  );

  this.statusCode = 422;

  this.details = {
    context: context,
    codes: obj.errors && obj.errors.codes,
    messages: obj.errors,
  };

  if (Error.captureStackTrace) {
    // V8 (Chrome, Opera, Node)
    Error.captureStackTrace(this, this.constructor);
  } else if (errorHasStackProperty) {
    // Firefox
    this.stack = (new Error).stack;
  }
  // Safari and PhantomJS initializes 'error.stack' on throw
  // Internet Explorer does not support 'error.stack'
}
```
- example usage
```shell
...
  return save();
}

inst.isValid(function(valid) {
  if (valid) {
    save();
  } else {
    var err = new Model.ValidationError(inst);
    // throws option is dangerous for async usage
    if (options.throws) {
      throw err;
    }
    callback(err, inst);
  }
});
...
```

#### <a name="apidoc.element.loopback.ACL._ACL"></a>[function <span class="apidocSignatureSpan">loopback.ACL.</span>_ACL (ACL)](#apidoc.element.loopback.ACL._ACL)
- description and source-code
```javascript
function getACL(ACL) {
  var registry = this.registry;
  if (ACL !== undefined) {
    // The function is used as a setter
    _aclModel = ACL;
  }
  if (_aclModel) {
    return _aclModel;
  }
  var aclModel = registry.getModel('ACL');
  _aclModel = registry.getModelByType(aclModel);
  return _aclModel;
}
```
- example usage
```shell
...
   * @param {String|Error} err The error object.
   * @param {Boolean} allowed True if the request is allowed; false otherwise.
   */

  Model.checkAccess = function(token, modelId, sharedMethod, ctx, callback) {
var ANONYMOUS = registry.getModel('AccessToken').ANONYMOUS;
token = token || ANONYMOUS;
var aclModel = Model._ACL();

ctx = ctx || {};
if (typeof ctx === 'function' && callback === undefined) {
  callback = ctx;
  ctx = {};
}
...
```

#### <a name="apidoc.element.loopback.ACL._defineChangeModel"></a>[function <span class="apidocSignatureSpan">loopback.ACL.</span>_defineChangeModel ()](#apidoc.element.loopback.ACL._defineChangeModel)
- description and source-code
```javascript
_defineChangeModel = function () {
  var BaseChangeModel = this.registry.getModel('Change');
  assert(BaseChangeModel,
    'Change model must be defined before enabling change replication');

  const additionalChangeModelProperties =
    this.settings.additionalChangeModelProperties || {};

  this.Change = BaseChangeModel.extend(this.modelName + '-change',
    additionalChangeModelProperties,
    {trackModel: this}
  );

  if (this.dataSource) {
    attachRelatedModels(this);
  }

  // Re-attach related models whenever our datasource is changed.
  var self = this;
  this.on('dataSourceAttached', function() {
    attachRelatedModels(self);
  });

  return this.Change;

  function attachRelatedModels(self) {
    self.Change.attachTo(self.dataSource);
    self.Change.getCheckpointModel().attachTo(self.dataSource);
  }
}
```
- example usage
```shell
...
// call Model.setup first
Model.setup.call(this);

var PersistedModel = this;

// enable change tracking (usually for replication)
if (this.settings.trackChanges) {
  PersistedModel._defineChangeModel();
  PersistedModel.once('dataSourceAttached', function() {
    PersistedModel.enableChangeTracking();
  });
} else if (this.settings.enableRemoteReplication) {
  PersistedModel._defineChangeModel();
}
...
```

#### <a name="apidoc.element.loopback.ACL._getAccessTypeForMethod"></a>[function <span class="apidocSignatureSpan">loopback.ACL.</span>_getAccessTypeForMethod (method)](#apidoc.element.loopback.ACL._getAccessTypeForMethod)
- description and source-code
```javascript
_getAccessTypeForMethod = function (method) {
  if (typeof method === 'string') {
    method = {name: method};
  }
  assert(
    typeof method === 'object',
    'method is a required argument and must be a RemoteMethod object'
  );

  var ACL = Model._ACL();

  // Check the explicit setting of accessType
  if (method.accessType) {
    assert(method.accessType === ACL.READ ||
      method.accessType === ACL.REPLICATE ||
      method.accessType === ACL.WRITE ||
      method.accessType === ACL.EXECUTE, 'invalid accessType ' +
      method.accessType +
      '. It must be "READ", "REPLICATE", "WRITE", or "EXECUTE"');
    return method.accessType;
  }

  // Default GET requests to READ
  var verb = method.http && method.http.verb;
  if (typeof verb === 'string') {
    verb = verb.toUpperCase();
  }
  if (verb === 'GET' || verb === 'HEAD') {
    return ACL.READ;
  }

  switch (method.name) {
    case 'create':
      return ACL.WRITE;
    case 'updateOrCreate':
      return ACL.WRITE;
    case 'upsertWithWhere':
      return ACL.WRITE;
    case 'upsert':
      return ACL.WRITE;
    case 'exists':
      return ACL.READ;
    case 'findById':
      return ACL.READ;
    case 'find':
      return ACL.READ;
    case 'findOne':
      return ACL.READ;
    case 'destroyById':
      return ACL.WRITE;
    case 'deleteById':
      return ACL.WRITE;
    case 'removeById':
      return ACL.WRITE;
    case 'count':
      return ACL.READ;
    default:
      return ACL.EXECUTE;
  }
}
```
- example usage
```shell
...
if (this.sharedMethod) {
  this.methodNames = this.sharedMethod.aliases.concat([this.sharedMethod.name]);
} else {
  this.methodNames = [];
}

if (this.sharedMethod) {
  this.accessType = this.model._getAccessTypeForMethod(this.sharedMethod);
}

this.accessType = context.accessType || AccessContext.ALL;
assert(loopback.AccessToken,
  'AccessToken model must be defined before AccessContext model');
this.accessToken = context.accessToken || loopback.AccessToken.ANONYMOUS;
...
```

#### <a name="apidoc.element.loopback.ACL._notifyBaseObservers"></a>[function <span class="apidocSignatureSpan">loopback.ACL.</span>_notifyBaseObservers (operation, context, callback)](#apidoc.element.loopback.ACL._notifyBaseObservers)
- description and source-code
```javascript
_notifyBaseObservers = function (operation, context, callback) {
  if (this.base && this.base.notifyObserversOf)
    this.base.notifyObserversOf(operation, context, callback);
  else
    callback();
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL._runWhenAttachedToApp"></a>[function <span class="apidocSignatureSpan">loopback.ACL.</span>_runWhenAttachedToApp (fn)](#apidoc.element.loopback.ACL._runWhenAttachedToApp)
- description and source-code
```javascript
_runWhenAttachedToApp = function (fn) {
  if (this.app) return fn(this.app);
  var self = this;
  self.once('attached', function() {
    fn(self.app);
  });
}
```
- example usage
```shell
...
  ModelCtor,
  remotingOptions
);

// before remote hook
ModelCtor.beforeRemote = function(name, fn) {
  var className = this.modelName;
  this._runWhenAttachedToApp(function(app) {
    var remotes = app.remotes();
    remotes.before(className + '.' + name, function(ctx, next) {
      return fn(ctx, ctx.result, next);
    });
  });
};
...
```

#### <a name="apidoc.element.loopback.ACL.addListener"></a>[function <span class="apidocSignatureSpan">loopback.ACL.</span>addListener ()](#apidoc.element.loopback.ACL.addListener)
- description and source-code
```javascript
addListener = function () { [native code] }
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.afterRemote"></a>[function <span class="apidocSignatureSpan">loopback.ACL.</span>afterRemote (name, fn)](#apidoc.element.loopback.ACL.afterRemote)
- description and source-code
```javascript
afterRemote = function (name, fn) {
  var className = this.modelName;
  this._runWhenAttachedToApp(function(app) {
    var remotes = app.remotes();
    remotes.after(className + '.' + name, function(ctx, next) {
      return fn(ctx, ctx.result, next);
    });
  });
}
```
- example usage
```shell
...
        var m = method.isStatic ? method.name : 'prototype.' + method.name;
        if (before && before[delegateTo.name]) {
          self.beforeRemote(m, function(ctx, result, next) {
            before[delegateTo.name]._listeners.call(null, ctx, next);
          });
        }
        if (after && after[delegateTo.name]) {
          self.afterRemote(m, function(ctx, result, next) {
            after[delegateTo.name]._listeners.call(null, ctx, next);
          });
        }
      }
    });
  });
} else {
...
```

#### <a name="apidoc.element.loopback.ACL.afterRemoteError"></a>[function <span class="apidocSignatureSpan">loopback.ACL.</span>afterRemoteError (name, fn)](#apidoc.element.loopback.ACL.afterRemoteError)
- description and source-code
```javascript
afterRemoteError = function (name, fn) {
  var className = this.modelName;
  this._runWhenAttachedToApp(function(app) {
    var remotes = app.remotes();
    remotes.afterError(className + '.' + name, fn);
  });
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.attachTo"></a>[function <span class="apidocSignatureSpan">loopback.ACL.</span>attachTo (dataSource)](#apidoc.element.loopback.ACL.attachTo)
- description and source-code
```javascript
attachTo = function (dataSource) {
  dataSource.attach(this);
}
```
- example usage
```shell
...
  this.on('dataSourceAttached', function() {
    attachRelatedModels(self);
  });

  return this.Change;

  function attachRelatedModels(self) {
    self.Change.attachTo(self.dataSource);
    self.Change.getCheckpointModel().attachTo(self.dataSource);
  }
};

PersistedModel.rectifyAllChanges = function(callback) {
  this.getChangeModel().rectifyAll(callback);
};
...
```

#### <a name="apidoc.element.loopback.ACL.beforeRemote"></a>[function <span class="apidocSignatureSpan">loopback.ACL.</span>beforeRemote (name, fn)](#apidoc.element.loopback.ACL.beforeRemote)
- description and source-code
```javascript
beforeRemote = function (name, fn) {
  var className = this.modelName;
  this._runWhenAttachedToApp(function(app) {
    var remotes = app.remotes();
    remotes.before(className + '.' + name, function(ctx, next) {
      return fn(ctx, ctx.result, next);
    });
  });
}
```
- example usage
```shell
...
        sharedClass.methods().forEach(function(method) {
var delegateTo = method.rest && method.rest.delegateTo;
if (delegateTo && delegateTo.ctor == relation.modelTo) {
  var before = method.isStatic ? beforeListeners : beforeListeners['prototype'];
  var after = method.isStatic ? afterListeners : afterListeners['prototype'];
  var m = method.isStatic ? method.name : 'prototype.' + method.name;
  if (before && before[delegateTo.name]) {
    self.beforeRemote(m, function(ctx, result, next) {
      before[delegateTo.name]._listeners.call(null, ctx, next);
    });
  }
  if (after && after[delegateTo.name]) {
    self.afterRemote(m, function(ctx, result, next) {
      after[delegateTo.name]._listeners.call(null, ctx, next);
    });
...
```

#### <a name="apidoc.element.loopback.ACL.belongsToRemoting"></a>[function <span class="apidocSignatureSpan">loopback.ACL.</span>belongsToRemoting (relationName, relation, define)](#apidoc.element.loopback.ACL.belongsToRemoting)
- description and source-code
```javascript
belongsToRemoting = function (relationName, relation, define) {
  var modelName = relation.modelTo && relation.modelTo.modelName;
  modelName = modelName || 'PersistedModel';
  var fn = this.prototype[relationName];
  var pathName = (relation.options.http && relation.options.http.path) || relationName;
  define('__get__' + relationName, {
    isStatic: false,
    http: {verb: 'get', path: '/' + pathName},
    accepts: [
      {arg: 'refresh', type: 'boolean', http: {source: 'query'}},
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    accessType: 'READ',
    description: format('Fetches belongsTo relation %s.', relationName),
    returns: {arg: relationName, type: modelName, root: true},
  }, fn);
}
```
- example usage
```shell
...
  defineRaw(name, options, fn);
};

// get the relations
for (var relationName in relations) {
  var relation = relations[relationName];
  if (relation.type === 'belongsTo') {
    ModelCtor.belongsToRemoting(relationName, relation, define);
  } else if (
    relation.type === 'hasOne' ||
    relation.type === 'embedsOne'
  ) {
    ModelCtor.hasOneRemoting(relationName, relation, define);
  } else if (
    relation.type === 'hasMany' ||
...
```

#### <a name="apidoc.element.loopback.ACL.bulkUpdate"></a>[function <span class="apidocSignatureSpan">loopback.ACL.</span>bulkUpdate (updates, options, callback)](#apidoc.element.loopback.ACL.bulkUpdate)
- description and source-code
```javascript
bulkUpdate = function (updates, options, callback) {
  var tasks = [];
  var Model = this;
  var Change = this.getChangeModel();
  var conflicts = [];

  var lastArg = arguments[arguments.length - 1];

  if (typeof lastArg === 'function' && arguments.length > 1) {
    callback = lastArg;
  }

  if (typeof options === 'function') {
    options = {};
  }

  options = options || {};

  buildLookupOfAffectedModelData(Model, updates, function(err, currentMap) {
    if (err) return callback(err);

    updates.forEach(function(update) {
      var id = update.change.modelId;
      var current = currentMap[id];
      switch (update.type) {
        case Change.UPDATE:
          tasks.push(function(cb) {
            applyUpdate(Model, id, current, update.data, update.change, conflicts, options, cb);
          });
          break;

        case Change.CREATE:
          tasks.push(function(cb) {
            applyCreate(Model, id, current, update.data, update.change, conflicts, options, cb);
          });
          break;
        case Change.DELETE:
          tasks.push(function(cb) {
            applyDelete(Model, id, current, update.change, conflicts, options, cb);
          });
          break;
      }
    });

    async.parallel(tasks, function(err) {
      if (err) return callback(err);
      if (conflicts.length) {
        err = new Error(g.f('Conflict'));
        err.statusCode = 409;
        err.details = {conflicts: conflicts};
        return callback(err);
      }
      callback();
    });
  });
}
```
- example usage
```shell
...
    function bulkUpdate(_updates, cb) {
debug('\tstarting bulk update');
updates = _updates;
utils.uploadInChunks(
  updates,
  replicationChunkSize,
  function(smallArray, chunkCallback) {
    return targetModel.bulkUpdate(smallArray, options, function(err) {
      // bulk update is a special case where we want to process all chunks and aggregate all errors
      chunkCallback(null, err);
    });
  },
  function(notUsed, err) {
    var conflicts = err && err.details && err.details.conflicts;
    if (conflicts && err.statusCode == 409) {
...
```

#### <a name="apidoc.element.loopback.ACL.changes"></a>[function <span class="apidocSignatureSpan">loopback.ACL.</span>changes (since, filter, callback)](#apidoc.element.loopback.ACL.changes)
- description and source-code
```javascript
changes = function (since, filter, callback) {
  if (typeof since === 'function') {
    filter = {};
    callback = since;
    since = -1;
  }
  if (typeof filter === 'function') {
    callback = filter;
    since = -1;
    filter = {};
  }

  var idName = this.dataSource.idName(this.modelName);
  var Change = this.getChangeModel();
  var model = this;
  const changeFilter = this.createChangeFilter(since, filter);

  filter = filter || {};
  filter.fields = {};
  filter.where = filter.where || {};
  filter.fields[idName] = true;

  // TODO(ritch) this whole thing could be optimized a bit more
  Change.find(changeFilter, function(err, changes) {
    if (err) return callback(err);
    if (!Array.isArray(changes) || changes.length === 0) return callback(null, []);
    var ids = changes.map(function(change) {
      return change.getModelId();
    });
    filter.where[idName] = {inq: ids};
    model.find(filter, function(err, models) {
      if (err) return callback(err);
      var modelIds = models.map(function(m) {
        return m[idName].toString();
      });
      callback(null, changes.filter(function(ch) {
        if (ch.type() === Change.DELETE) return true;
        return modelIds.indexOf(ch.modelId) > -1;
      }));
    });
  });
}
```
- example usage
```shell
...
    async.waterfall(tasks, done);

    function getSourceChanges(cb) {
utils.downloadInChunks(
  options.filter,
  replicationChunkSize,
  function(filter, pagingCallback) {
    sourceModel.changes(since.source, filter, pagingCallback);
  },
  debug.enabled ? log : cb);

function log(err, result) {
  if (err) return cb(err);
  debug('\tusing source changes');
  result.forEach(function(it) { debug('\t\t%j', it); });
...
```

#### <a name="apidoc.element.loopback.ACL.checkAccess"></a>[function <span class="apidocSignatureSpan">loopback.ACL.</span>checkAccess (token, modelId, sharedMethod, ctx, callback)](#apidoc.element.loopback.ACL.checkAccess)
- description and source-code
```javascript
checkAccess = function (token, modelId, sharedMethod, ctx, callback) {
  var ANONYMOUS = registry.getModel('AccessToken').ANONYMOUS;
  token = token || ANONYMOUS;
  var aclModel = Model._ACL();

  ctx = ctx || {};
  if (typeof ctx === 'function' && callback === undefined) {
    callback = ctx;
    ctx = {};
  }

  aclModel.checkAccessForContext({
    accessToken: token,
    model: this,
    property: sharedMethod.name,
    method: sharedMethod.name,
    sharedMethod: sharedMethod,
    modelId: modelId,
    accessType: this._getAccessTypeForMethod(sharedMethod),
    remotingContext: ctx,
  }, function(err, accessRequest) {
    if (err) return callback(err);
    callback(null, accessRequest.isAllowed());
  });
}
```
- example usage
```shell
...
var modelSettings = Model.settings || {};
var errStatusCode = modelSettings.aclErrorStatus || app.get('aclErrorStatus') || 401;
if (!req.accessToken) {
  errStatusCode = 401;
}

if (Model.checkAccess) {
  Model.checkAccess(
    req.accessToken,
    modelId,
    method,
    ctx,
    function(err, allowed) {
      if (err) {
        console.log(err);
...
```

#### <a name="apidoc.element.loopback.ACL.checkAccessForContext"></a>[function <span class="apidocSignatureSpan">loopback.ACL.</span>checkAccessForContext (context, callback)](#apidoc.element.loopback.ACL.checkAccessForContext)
- description and source-code
```javascript
checkAccessForContext = function (context, callback) {
  if (!callback) callback = utils.createPromiseCallback();
  var self = this;
  self.resolveRelatedModels();
  var roleModel = self.roleModel;

  if (!(context instanceof AccessContext)) {
    context.registry = this.registry;
    context = new AccessContext(context);
  }

  var authorizedRoles = {};
  var remotingContext = context.remotingContext;
  var model = context.model;
  var modelDefaultPermission = model && model.settings.defaultPermission;
  var property = context.property;
  var accessType = context.accessType;
  var modelName = context.modelName;

  var methodNames = context.methodNames;
  var propertyQuery = (property === ACL.ALL) ? undefined : {inq: methodNames.concat([ACL.ALL])};

  var accessTypeQuery = (accessType === ACL.ALL) ?
    undefined :
    (accessType === ACL.REPLICATE) ?
      {inq: [ACL.REPLICATE, ACL.WRITE, ACL.ALL]} :
      {inq: [accessType, ACL.ALL]};

  var req = new AccessRequest({
    model: modelName,
    property,
    accessType,
    permission: ACL.DEFAULT,
    methodNames,
    registry: this.registry});

  var effectiveACLs = [];
  var staticACLs = self.getStaticACLs(model.modelName, property);

  this.find({where: {model: model.modelName, property: propertyQuery,
    accessType: accessTypeQuery}}, function(err, acls) {
    if (err) return callback(err);
    var inRoleTasks = [];

    acls = acls.concat(staticACLs);

    acls.forEach(function(acl) {
      // Check exact matches
      for (var i = 0; i < context.principals.length; i++) {
        var p = context.principals[i];
        var typeMatch = p.type === acl.principalType;
        var idMatch = String(p.id) === String(acl.principalId);
        if (typeMatch && idMatch) {
          effectiveACLs.push(acl);
          return;
        }
      }

      // Check role matches
      if (acl.principalType === ACL.ROLE) {
        inRoleTasks.push(function(done) {
          roleModel.isInRole(acl.principalId, context,
            function(err, inRole) {
              if (!err && inRole) {
                effectiveACLs.push(acl);
                // add the role to authorizedRoles if allowed
                if (acl.isAllowed(modelDefaultPermission))
                  authorizedRoles[acl.principalId] = true;
              }
              done(err, acl);
            });
        });
      }
    });

    async.parallel(inRoleTasks, function(err, results) {
      if (err) return callback(err, null);

      // resolved is an instance of AccessRequest
      var resolved = self.resolvePermission(effectiveACLs, req);
      debug('---Resolved---');
      resolved.debug();

      // set authorizedRoles in remotingContext options argument if
      // resolved AccessRequest permission is ALLOW, else set it to empty object
      authorizedRoles = resolved.isAllowed() ? authorizedRoles : {};
      saveAuthorizedRolesToRemotingContext(remotingContext, authorizedRoles);
      return callback(null, resolved);
    });
  });
  return callback.promise;
}
```
- example usage
```shell
...

ctx = ctx || {};
if (typeof ctx === 'function' && callback === undefined) {
  callback = ctx;
  ctx = {};
}

aclModel.checkAccessForContext({
  accessToken: token,
  model: this,
  property: sharedMethod.name,
  method: sharedMethod.name,
  sharedMethod: sharedMethod,
  modelId: modelId,
  accessType: this._getAccessTypeForMethod(sharedMethod),
...
```

#### <a name="apidoc.element.loopback.ACL.checkAccessForToken"></a>[function <span class="apidocSignatureSpan">loopback.ACL.</span>checkAccessForToken (token, model, modelId, method, callback)](#apidoc.element.loopback.ACL.checkAccessForToken)
- description and source-code
```javascript
checkAccessForToken = function (token, model, modelId, method, callback) {
  assert(token, 'Access token is required');
  if (!callback) callback = utils.createPromiseCallback();
  var context = new AccessContext({
    registry: this.registry,
    accessToken: token,
    model: model,
    property: method,
    method: method,
    modelId: modelId,
  });

  this.checkAccessForContext(context, function(err, accessRequest) {
    if (err) callback(err);
    else callback(null, accessRequest.isAllowed());
  });
  return callback.promise;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.checkPermission"></a>[function <span class="apidocSignatureSpan">loopback.ACL.</span>checkPermission (principalType, principalId, model, property, accessType, callback)](#apidoc.element.loopback.ACL.checkPermission)
- description and source-code
```javascript
function checkPermission(principalType, principalId, model, property, accessType, callback) {
  if (!callback) callback = utils.createPromiseCallback();
  if (principalId !== null && principalId !== undefined && (typeof principalId !== 'string')) {
    principalId = principalId.toString();
  }
  property = property || ACL.ALL;
  var propertyQuery = (property === ACL.ALL) ? undefined : {inq: [property, ACL.ALL]};
  accessType = accessType || ACL.ALL;
  var accessTypeQuery = (accessType === ACL.ALL) ? undefined :
    {inq: [accessType, ACL.ALL, ACL.EXECUTE]};

  var req = new AccessRequest({model, property, accessType, registry: this.registry});

  var acls = this.getStaticACLs(model, property);

  // resolved is an instance of AccessRequest
  var resolved = this.resolvePermission(acls, req);

  if (resolved && resolved.permission === ACL.DENY) {
    debug('Permission denied by statically resolved permission');
    debug(' Resolved Permission: %j', resolved);
    process.nextTick(function() {
      callback(null, resolved);
    });
    return callback.promise;
  }

  var self = this;
  this.find({where: {principalType: principalType, principalId: principalId,
    model: model, property: propertyQuery, accessType: accessTypeQuery}},
    function(err, dynACLs) {
      if (err) {
        return callback(err);
      }
      acls = acls.concat(dynACLs);
      // resolved is an instance of AccessRequest
      resolved = self.resolvePermission(acls, req);
      return callback(null, resolved);
    });
  return callback.promise;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.checkpoint"></a>[function <span class="apidocSignatureSpan">loopback.ACL.</span>checkpoint (cb)](#apidoc.element.loopback.ACL.checkpoint)
- description and source-code
```javascript
checkpoint = function (cb) {
  var Checkpoint = this.getChangeModel().getCheckpointModel();
  Checkpoint.bumpLastSeq(cb);
}
```
- example usage
```shell
...
      }
      cb(err);
    });
}

function checkpoints() {
  var cb = arguments[arguments.length - 1];
  sourceModel.checkpoint(function(err, source) {
    if (err) return cb(err);
    newSourceCp = source.seq;
    targetModel.checkpoint(function(err, target) {
      if (err) return cb(err);
      newTargetCp = target.seq;
      debug('\tcreated checkpoints');
      debug('\t\t%s for source model %s', newSourceCp, sourceModel.modelName);
...
```

#### <a name="apidoc.element.loopback.ACL.clearObservers"></a>[function <span class="apidocSignatureSpan">loopback.ACL.</span>clearObservers (operation)](#apidoc.element.loopback.ACL.clearObservers)
- description and source-code
```javascript
clearObservers = function (operation) {
  if (!(this._observers && this._observers[operation])) return;

  this._observers[operation].length = 0;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.count"></a>[function <span class="apidocSignatureSpan">loopback.ACL.</span>count (where, cb)](#apidoc.element.loopback.ACL.count)
- description and source-code
```javascript
count = function (where, cb) {
  throwNotAttached(this.modelName, 'count');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.create"></a>[function <span class="apidocSignatureSpan">loopback.ACL.</span>create (data, callback)](#apidoc.element.loopback.ACL.create)
- description and source-code
```javascript
create = function (data, callback) {
  throwNotAttached(this.modelName, 'create');
}
```
- example usage
```shell
...
 } else {
   var options = {};

   if (this.get) {
     options = this.get('remoting');
   }

   return (this._remotes = RemoteObjects.create(options));
 }
};

/*!
* Remove a route by reference.
*/
...
```

#### <a name="apidoc.element.loopback.ACL.createChangeFilter"></a>[function <span class="apidocSignatureSpan">loopback.ACL.</span>createChangeFilter (since, modelFilter)](#apidoc.element.loopback.ACL.createChangeFilter)
- description and source-code
```javascript
createChangeFilter = function (since, modelFilter) {
  return {
    where: {
      checkpoint: {gte: since},
      modelName: this.modelName,
    },
  };
}
```
- example usage
```shell
...
  since = -1;
  filter = {};
}

var idName = this.dataSource.idName(this.modelName);
var Change = this.getChangeModel();
var model = this;
const changeFilter = this.createChangeFilter(since, filter);

filter = filter || {};
filter.fields = {};
filter.where = filter.where || {};
filter.fields[idName] = true;

// TODO(ritch) this whole thing could be optimized a bit more
...
```

#### <a name="apidoc.element.loopback.ACL.createChangeStream"></a>[function <span class="apidocSignatureSpan">loopback.ACL.</span>createChangeStream (options, cb)](#apidoc.element.loopback.ACL.createChangeStream)
- description and source-code
```javascript
createChangeStream = function (options, cb) {
  if (typeof options === 'function') {
    cb = options;
    options = undefined;
  }

  var idName = this.getIdName();
  var Model = this;
  var changes = new PassThrough({objectMode: true});
  var writeable = true;

  changes.destroy = function() {
    changes.removeAllListeners('error');
    changes.removeAllListeners('end');
    writeable = false;
    changes = null;
  };

  changes.on('error', function() {
    writeable = false;
  });
  changes.on('end', function() {
    writeable = false;
  });

  process.nextTick(function() {
    cb(null, changes);
  });

  Model.observe('after save', createChangeHandler('save'));
  Model.observe('after delete', createChangeHandler('delete'));

  function createChangeHandler(type) {
    return function(ctx, next) {
      // since it might have set to null via destroy
      if (!changes) {
        return next();
      }

      var where = ctx.where;
      var data = ctx.instance || ctx.data;
      var whereId = where && where[idName];

      // the data includes the id
      // or the where includes the id
      var target;

      if (data && (data[idName] || data[idName] === 0)) {
        target = data[idName];
      } else if (where && (where[idName] || where[idName] === 0)) {
        target = where[idName];
      }

      var hasTarget = target === 0 || !!target;

      var change = {
        target: target,
        where: where,
        data: data,
      };

      switch (type) {
        case 'save':
          if (ctx.isNewInstance === undefined) {
            change.type = hasTarget ? 'update' : 'create';
          } else {
            change.type = ctx.isNewInstance ? 'create' : 'update';
          }

          break;
        case 'delete':
          change.type = 'remove';
          break;
      }

      // TODO(ritch) this is ugly... maybe a ReadableStream would be better
      if (writeable) {
        changes.write(change);
      }

      next();
    };
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.createOptionsFromRemotingContext"></a>[function <span class="apidocSignatureSpan">loopback.ACL.</span>createOptionsFromRemotingContext (ctx)](#apidoc.element.loopback.ACL.createOptionsFromRemotingContext)
- description and source-code
```javascript
createOptionsFromRemotingContext = function (ctx) {
  return {
    accessToken: ctx.req.accessToken,
  };
}
```
- example usage
```shell
...
  var EMPTY_OPTIONS = {};
  var ModelCtor = ctx.method && ctx.method.ctor;
  if (!ModelCtor)
    return EMPTY_OPTIONS;
  if (typeof ModelCtor.createOptionsFromRemotingContext !== 'function')
    return EMPTY_OPTIONS;
  debug('createOptionsFromRemotingContext for %s', ctx.method.stringName);
  return ModelCtor.createOptionsFromRemotingContext(ctx);
}

/**
 * Disable remote invocation for the method with the given name.
 *
 * @param {String} name The name of the method.
 * @param {Boolean} isStatic Is the method static (eg. 'MyModel.myMethod')? Pass
...
```

#### <a name="apidoc.element.loopback.ACL.createUpdates"></a>[function <span class="apidocSignatureSpan">loopback.ACL.</span>createUpdates (deltas, cb)](#apidoc.element.loopback.ACL.createUpdates)
- description and source-code
```javascript
createUpdates = function (deltas, cb) {
  var Change = this.getChangeModel();
  var updates = [];
  var Model = this;
  var tasks = [];

  deltas.forEach(function(change) {
    change = new Change(change);
    var type = change.type();
    var update = {type: type, change: change};
    switch (type) {
      case Change.CREATE:
      case Change.UPDATE:
        tasks.push(function(cb) {
          Model.findById(change.modelId, function(err, inst) {
            if (err) return cb(err);
            if (!inst) {
              return cb &&
                cb(new Error(g.f('Missing data for change: %s', change.modelId)));
            }
            if (inst.toObject) {
              update.data = inst.toObject();
            } else {
              update.data = inst;
            }
            updates.push(update);
            cb();
          });
        });
        break;
      case Change.DELETE:
        updates.push(update);
        break;
    }
  });

  async.parallel(tasks, function(err) {
    if (err) return cb(err);
    cb(null, updates);
  });
}
```
- example usage
```shell
...

  if (diff && diff.deltas && diff.deltas.length) {
    debug('\tbuilding a list of updates');
    utils.uploadInChunks(
      diff.deltas,
      replicationChunkSize,
      function(smallArray, chunkCallback) {
        return sourceModel.createUpdates(smallArray, chunkCallback);
      },
      cb);
  } else {
    // nothing to replicate
    done();
  }
}
...
```

#### <a name="apidoc.element.loopback.ACL.currentCheckpoint"></a>[function <span class="apidocSignatureSpan">loopback.ACL.</span>currentCheckpoint (cb)](#apidoc.element.loopback.ACL.currentCheckpoint)
- description and source-code
```javascript
currentCheckpoint = function (cb) {
  var Checkpoint = this.getChangeModel().getCheckpointModel();
  Checkpoint.current(cb);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.defineProperty"></a>[function <span class="apidocSignatureSpan">loopback.ACL.</span>defineProperty (prop, params)](#apidoc.element.loopback.ACL.defineProperty)
- description and source-code
```javascript
defineProperty = function (prop, params) {
  if (this.dataSource) {
    this.dataSource.defineProperty(this.modelName, prop, params);
  } else {
    this.modelBuilder.defineProperty(this.modelName, prop, params);
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.deleteAll"></a>[function <span class="apidocSignatureSpan">loopback.ACL.</span>deleteAll (where, cb)](#apidoc.element.loopback.ACL.deleteAll)
- description and source-code
```javascript
function destroyAll(where, cb) {
  throwNotAttached(this.modelName, 'destroyAll');
}
```
- example usage
```shell
...
  Model.modelName, id);
debug('\tExpected revision: %s', change.rev);
debug('\tActual revision:   %s', rev);
conflicts.push(change);
return Change.rectifyModelChanges(Model.modelName, [id], cb);
    }

    Model.deleteAll(current.toObject(), options, function(err, result) {
if (err) return cb(err);

var count = result && result.count;
switch (count) {
  case 1:
    // The happy path, exactly one record was updated
    return cb();
...
```

#### <a name="apidoc.element.loopback.ACL.deleteById"></a>[function <span class="apidocSignatureSpan">loopback.ACL.</span>deleteById (id, cb)](#apidoc.element.loopback.ACL.deleteById)
- description and source-code
```javascript
function deleteById(id, cb) {
  throwNotAttached(this.modelName, 'deleteById');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.destroyAll"></a>[function <span class="apidocSignatureSpan">loopback.ACL.</span>destroyAll (where, cb)](#apidoc.element.loopback.ACL.destroyAll)
- description and source-code
```javascript
function destroyAll(where, cb) {
  throwNotAttached(this.modelName, 'destroyAll');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.destroyById"></a>[function <span class="apidocSignatureSpan">loopback.ACL.</span>destroyById (id, cb)](#apidoc.element.loopback.ACL.destroyById)
- description and source-code
```javascript
function deleteById(id, cb) {
  throwNotAttached(this.modelName, 'deleteById');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.diff"></a>[function <span class="apidocSignatureSpan">loopback.ACL.</span>diff (since, remoteChanges, callback)](#apidoc.element.loopback.ACL.diff)
- description and source-code
```javascript
diff = function (since, remoteChanges, callback) {
  var Change = this.getChangeModel();
  Change.diff(this.modelName, since, remoteChanges, callback);
}
```
- example usage
```shell
...
    },
  });
};

/**
 * Get a set of deltas and conflicts since the given checkpoint.
 *
 * See [Change.diff()](#change-diff) for details.
 *
 * @param  {Number}  since  Find deltas since this checkpoint.
 * @param  {Array}  remoteChanges  An array of change objects.
 * @callback {Function} callback Callback function called with '(err, result)' arguments.  Required.
 * @param {Error} err Error object; see [Error object](http://loopback.io/doc/en/lb2/Error-object.html).
 * @param {Object} result Object with 'deltas' and 'conflicts' properties; see [Change.diff()](#change-diff) for details.
 */
...
```

#### <a name="apidoc.element.loopback.ACL.disableRemoteMethod"></a>[function <span class="apidocSignatureSpan">loopback.ACL.</span>disableRemoteMethod (name, isStatic)](#apidoc.element.loopback.ACL.disableRemoteMethod)
- description and source-code
```javascript
disableRemoteMethod = function (name, isStatic) {
  deprecated('Model.disableRemoteMethod is deprecated. ' +
    'Use Model.disableRemoteMethodByName instead.');
  var key = this.sharedClass.getKeyFromMethodNameAndTarget(name, isStatic);
  this.sharedClass.disableMethodByName(key);
  this.emit('remoteMethodDisabled', this.sharedClass, key);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.disableRemoteMethodByName"></a>[function <span class="apidocSignatureSpan">loopback.ACL.</span>disableRemoteMethodByName (name)](#apidoc.element.loopback.ACL.disableRemoteMethodByName)
- description and source-code
```javascript
disableRemoteMethodByName = function (name) {
  this.sharedClass.disableMethodByName(name);
  this.emit('remoteMethodDisabled', this.sharedClass, name);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.emit"></a>[function <span class="apidocSignatureSpan">loopback.ACL.</span>emit ()](#apidoc.element.loopback.ACL.emit)
- description and source-code
```javascript
emit = function () { [native code] }
```
- example usage
```shell
...
    return new Model(data);
  });
  this.remotes().addClass(Model.sharedClass);
  if (Model.settings.trackChanges && Model.Change) {
    this.remotes().addClass(Model.Change.sharedClass);
  }
  clearHandlerCache(this);
  this.emit('modelRemoted', Model.sharedClass);
}

var self = this;
Model.on('remoteMethodDisabled', function(model, methodName) {
  self.emit('remoteMethodDisabled', model, methodName);
});
Model.on('remoteMethodAdded', function(model) {
...
```

#### <a name="apidoc.element.loopback.ACL.enableChangeTracking"></a>[function <span class="apidocSignatureSpan">loopback.ACL.</span>enableChangeTracking ()](#apidoc.element.loopback.ACL.enableChangeTracking)
- description and source-code
```javascript
enableChangeTracking = function () {
  var Model = this;
  var Change = this.Change || this._defineChangeModel();
  var cleanupInterval = Model.settings.changeCleanupInterval || 30000;

  assert(this.dataSource, 'Cannot enableChangeTracking(): ' + this.modelName +
    ' is not attached to a dataSource');

  var idName = this.getIdName();
  var idProp = this.definition.properties[idName];
  var idType = idProp && idProp.type;
  var idDefn = idProp && idProp.defaultFn;
  if (idType !== String || !(idDefn === 'uuid' || idDefn === 'guid')) {
    deprecated('The model ' + this.modelName + ' is tracking changes, ' +
      'which requires a string id with GUID/UUID default value.');
  }

  Model.observe('after save', rectifyOnSave);

  Model.observe('after delete', rectifyOnDelete);

  // Only run if the run time is server
  // Can switch off cleanup by setting the interval to -1
  if (runtime.isServer && cleanupInterval > 0) {
    // initial cleanup
    cleanup();

    // cleanup
    setInterval(cleanup, cleanupInterval);
  }

  function cleanup() {
    Model.rectifyAllChanges(function(err) {
      if (err) {
        Model.handleChangeError(err, 'cleanup');
      }
    });
  }
}
```
- example usage
```shell
...

  var PersistedModel = this;

  // enable change tracking (usually for replication)
  if (this.settings.trackChanges) {
    PersistedModel._defineChangeModel();
    PersistedModel.once('dataSourceAttached', function() {
      PersistedModel.enableChangeTracking();
    });
  } else if (this.settings.enableRemoteReplication) {
    PersistedModel._defineChangeModel();
  }

  PersistedModel.setupRemoting();
};
...
```

#### <a name="apidoc.element.loopback.ACL.eventNames"></a>[function <span class="apidocSignatureSpan">loopback.ACL.</span>eventNames ()](#apidoc.element.loopback.ACL.eventNames)
- description and source-code
```javascript
eventNames = function () { [native code] }
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.exists"></a>[function <span class="apidocSignatureSpan">loopback.ACL.</span>exists (id, cb)](#apidoc.element.loopback.ACL.exists)
- description and source-code
```javascript
function exists(id, cb) {
  throwNotAttached(this.modelName, 'exists');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.extend"></a>[function <span class="apidocSignatureSpan">loopback.ACL.</span>extend (className, subclassProperties, subclassSettings)](#apidoc.element.loopback.ACL.extend)
- description and source-code
```javascript
extend = function (className, subclassProperties, subclassSettings) {
  var properties = ModelClass.definition.properties;
  var settings = ModelClass.definition.settings;

  subclassProperties = subclassProperties || {};
  subclassSettings = subclassSettings || {};

  // Check if subclass redefines the ids
  var idFound = false;
  for (var k in subclassProperties) {
    if (subclassProperties[k] && subclassProperties[k].id) {
      idFound = true;
      break;
    }
  }

  // Merging the properties
  var keys = Object.keys(properties);
  for (var i = 0, n = keys.length; i < n; i++) {
    var key = keys[i];

    if (idFound && properties[key].id) {
      // don't inherit id properties
      continue;
    }
    if (subclassProperties[key] === undefined) {
      var baseProp = properties[key];
      var basePropCopy = baseProp;
      if (baseProp && typeof baseProp === 'object') {
        // Deep clone the base prop
        basePropCopy = mergeSettings(null, baseProp);
      }
      subclassProperties[key] = basePropCopy;
    }
  }

  // Merge the settings
  var originalSubclassSettings = subclassSettings;
  subclassSettings = mergeSettings(settings, subclassSettings);

  // Ensure 'base' is not inherited. Note we don't have to delete 'super'
  // as that is removed from settings by modelBuilder.define and thus
  // it is never inherited
  if (!originalSubclassSettings.base) {
    subclassSettings.base = ModelClass;
  }

  // Define the subclass
  var subClass = modelBuilder.define(className, subclassProperties, subclassSettings, ModelClass);

  // Calling the setup function
  if (typeof subClass.setup === 'function') {
    subClass.setup.call(subClass);
  }

  return subClass;
}
```
- example usage
```shell
...
* The base class for **all models**.
*
* **Inheriting from 'Model'**
*
* '''js
* var properties = {...};
* var options = {...};
* var MyModel = loopback.Model.extend('MyModel', properties, options);
* '''
*
* **Options**
*
*  - 'trackChanges' - If true, changes to the model will be tracked. **Required
* for replication.**
*
...
```

#### <a name="apidoc.element.loopback.ACL.find"></a>[function <span class="apidocSignatureSpan">loopback.ACL.</span>find (filter, cb)](#apidoc.element.loopback.ACL.find)
- description and source-code
```javascript
function find(filter, cb) {
  throwNotAttached(this.modelName, 'find');
}
```
- example usage
```shell
...

filter = filter || {};
filter.fields = {};
filter.where = filter.where || {};
filter.fields[idName] = true;

// TODO(ritch) this whole thing could be optimized a bit more
Change.find(changeFilter, function(err, changes) {
  if (err) return callback(err);
  if (!Array.isArray(changes) || changes.length === 0) return callback(null, []);
  var ids = changes.map(function(change) {
    return change.getModelId();
  });
  filter.where[idName] = {inq: ids};
  model.find(filter, function(err, models) {
...
```

#### <a name="apidoc.element.loopback.ACL.findById"></a>[function <span class="apidocSignatureSpan">loopback.ACL.</span>findById (id, filter, cb)](#apidoc.element.loopback.ACL.findById)
- description and source-code
```javascript
function findById(id, filter, cb) {
  throwNotAttached(this.modelName, 'findById');
}
```
- example usage
```shell
...
  var model = new ModelCtor(data);
  model.id = id;
  fn(null, model);
} else if (data) {
  fn(null, new ModelCtor(data));
} else if (id) {
  var filter = {};
  ModelCtor.findById(id, filter, options, function(err, model) {
    if (err) {
      fn(err);
    } else if (model) {
      fn(null, model);
    } else {
      err = new Error(g.f('could not find a model with apidoc.element.loopback.ACL.findById %s', id));
      err.statusCode = 404;
...
```

#### <a name="apidoc.element.loopback.ACL.findLastChange"></a>[function <span class="apidocSignatureSpan">loopback.ACL.</span>findLastChange (id, cb)](#apidoc.element.loopback.ACL.findLastChange)
- description and source-code
```javascript
findLastChange = function (id, cb) {
  var Change = this.getChangeModel();
  Change.findOne({where: {modelId: id}}, cb);
}
```
- example usage
```shell
...
PersistedModel.findLastChange = function(id, cb) {
  var Change = this.getChangeModel();
  Change.findOne({where: {modelId: id}}, cb);
};

PersistedModel.updateLastChange = function(id, data, cb) {
  var self = this;
  this.findLastChange(id, function(err, inst) {
    if (err) return cb(err);
    if (!inst) {
      err = new Error(g.f('No change record found for %s with id %s',
        self.modelName, id));
      err.statusCode = 404;
      return cb(err);
    }
...
```

#### <a name="apidoc.element.loopback.ACL.findOne"></a>[function <span class="apidocSignatureSpan">loopback.ACL.</span>findOne (filter, cb)](#apidoc.element.loopback.ACL.findOne)
- description and source-code
```javascript
function findOne(filter, cb) {
  throwNotAttached(this.modelName, 'findOne');
}
```
- example usage
```shell
...
PersistedModel.rectifyChange = function(id, callback) {
  var Change = this.getChangeModel();
  Change.rectifyModelChanges(this.modelName, [id], callback);
};

PersistedModel.findLastChange = function(id, cb) {
  var Change = this.getChangeModel();
  Change.findOne({where: {modelId: id}}, cb);
};

PersistedModel.updateLastChange = function(id, data, cb) {
  var self = this;
  this.findLastChange(id, function(err, inst) {
    if (err) return cb(err);
    if (!inst) {
...
```

#### <a name="apidoc.element.loopback.ACL.findOrCreate"></a>[function <span class="apidocSignatureSpan">loopback.ACL.</span>findOrCreate (query, data, callback)](#apidoc.element.loopback.ACL.findOrCreate)
- description and source-code
```javascript
function findOrCreate(query, data, callback) {
  throwNotAttached(this.modelName, 'findOrCreate');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.forEachProperty"></a>[function <span class="apidocSignatureSpan">loopback.ACL.</span>forEachProperty (cb)](#apidoc.element.loopback.ACL.forEachProperty)
- description and source-code
```javascript
forEachProperty = function (cb) {
  var props = ModelClass.definition.properties;
  var keys = Object.keys(props);
  for (var i = 0, n = keys.length; i < n; i++) {
    cb(keys[i], props[keys[i]]);
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.getApp"></a>[function <span class="apidocSignatureSpan">loopback.ACL.</span>getApp (callback)](#apidoc.element.loopback.ACL.getApp)
- description and source-code
```javascript
getApp = function (callback) {
  var self = this;
  self._runWhenAttachedToApp(function(app) {
    assert(self.app);
    assert.equal(app, self.app);
    callback(null, app);
  });
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.getChangeModel"></a>[function <span class="apidocSignatureSpan">loopback.ACL.</span>getChangeModel ()](#apidoc.element.loopback.ACL.getChangeModel)
- description and source-code
```javascript
getChangeModel = function () {
  var changeModel = this.Change;
  var isSetup = changeModel && changeModel.dataSource;

  assert(isSetup, 'Cannot get a setup Change model for ' + this.modelName);

  return changeModel;
}
```
- example usage
```shell
...
 * @param  {Array}  remoteChanges  An array of change objects.
 * @callback {Function} callback Callback function called with '(err, result)' arguments.  Required.
 * @param {Error} err Error object; see [Error object](http://loopback.io/doc/en/lb2/Error-object.html).
 * @param {Object} result Object with 'deltas' and 'conflicts' properties; see [Change.diff()](#change-diff) for details.
 */

PersistedModel.diff = function(since, remoteChanges, callback) {
  var Change = this.getChangeModel();
  Change.diff(this.modelName, since, remoteChanges, callback);
};

/**
 * Get the changes to a model since the specified checkpoint. Provide a filter object
 * to reduce the number of results returned.
 * @param  {Number}   since    Return only changes since this checkpoint.
...
```

#### <a name="apidoc.element.loopback.ACL.getDataSource"></a>[function <span class="apidocSignatureSpan">loopback.ACL.</span>getDataSource ()](#apidoc.element.loopback.ACL.getDataSource)
- description and source-code
```javascript
getDataSource = function () {
  return this.dataSource;
}
```
- example usage
```shell
...
 * connector that defines it.  Otherwise, uses the default lookup.
 * Override this method to handle complex IDs.
 *
 * @param {*} val The 'id' value. Will be converted to the type that the 'id' property specifies.
 */

PersistedModel.prototype.setId = function(val) {
  var ds = this.getDataSource();
  this[this.getIdName()] = val;
};

/**
 * Get the 'id' value for the 'PersistedModel'.
 *
 * @returns {*} The 'id' value
...
```

#### <a name="apidoc.element.loopback.ACL.getIdName"></a>[function <span class="apidocSignatureSpan">loopback.ACL.</span>getIdName ()](#apidoc.element.loopback.ACL.getIdName)
- description and source-code
```javascript
getIdName = function () {
  var Model = this;
  var ds = Model.getDataSource();

  if (ds.idName) {
    return ds.idName(Model.modelName);
  } else {
    return 'id';
  }
}
```
- example usage
```shell
...
 * Override this method to handle complex IDs.
 *
 * @param {*} val The 'id' value. Will be converted to the type that the 'id' property specifies.
 */

PersistedModel.prototype.setId = function(val) {
  var ds = this.getDataSource();
  this[this.getIdName()] = val;
};

/**
 * Get the 'id' value for the 'PersistedModel'.
 *
 * @returns {*} The 'id' value
 */
...
```

#### <a name="apidoc.element.loopback.ACL.getMatchingScore"></a>[function <span class="apidocSignatureSpan">loopback.ACL.</span>getMatchingScore (rule, req)](#apidoc.element.loopback.ACL.getMatchingScore)
- description and source-code
```javascript
function getMatchingScore(rule, req) {
  var props = ['model', 'property', 'accessType'];
  var score = 0;

  for (var i = 0; i < props.length; i++) {
    // Shift the score by 4 for each of the properties as the weight
    score = score * 4;
    var ruleValue = rule[props[i]] || ACL.ALL;
    var requestedValue = req[props[i]] || ACL.ALL;
    var isMatchingMethodName = props[i] === 'property' &&
      req.methodNames.indexOf(ruleValue) !== -1;

    var isMatchingAccessType = ruleValue === requestedValue;
    if (props[i] === 'accessType' && !isMatchingAccessType) {
      switch (ruleValue) {
        case ACL.EXECUTE:
          // EXECUTE should match READ, REPLICATE and WRITE
          isMatchingAccessType = true;
          break;
        case ACL.WRITE:
          // WRITE should match REPLICATE too
          isMatchingAccessType = requestedValue === ACL.REPLICATE;
          break;
      }
    }

    if (isMatchingMethodName || isMatchingAccessType) {
      // Exact match
      score += 3;
    } else if (ruleValue === ACL.ALL) {
      // Wildcard match
      score += 2;
    } else if (requestedValue === ACL.ALL) {
      score += 1;
    } else {
      // Doesn't match at all
      return -1;
    }
  }

  // Weigh against the principal type into 4 levels
  // - user level (explicitly allow/deny a given user)
  // - app level (explicitly allow/deny a given app)
  // - role level (role based authorization)
  // - other
  // user > app > role > ...
  score = score * 4;
  switch (rule.principalType) {
    case ACL.USER:
      score += 4;
      break;
    case ACL.APP:
      score += 3;
      break;
    case ACL.ROLE:
      score += 2;
      break;
    default:
      score += 1;
  }

  // Weigh against the roles
  // everyone < authenticated/unauthenticated < related < owner < ...
  score = score * 8;
  if (rule.principalType === ACL.ROLE) {
    switch (rule.principalId) {
      case Role.OWNER:
        score += 4;
        break;
      case Role.RELATED:
        score += 3;
        break;
      case Role.AUTHENTICATED:
      case Role.UNAUTHENTICATED:
        score += 2;
        break;
      case Role.EVERYONE:
        score += 1;
        break;
      default:
        score += 5;
    }
  }
  score = score * 4;
  score += AccessContext.permissionOrder[rule.permission || ACL.ALLOW] - 1;
  return score;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.getMaxListeners"></a>[function <span class="apidocSignatureSpan">loopback.ACL.</span>getMaxListeners ()](#apidoc.element.loopback.ACL.getMaxListeners)
- description and source-code
```javascript
getMaxListeners = function () { [native code] }
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.getPropertyType"></a>[function <span class="apidocSignatureSpan">loopback.ACL.</span>getPropertyType (propName)](#apidoc.element.loopback.ACL.getPropertyType)
- description and source-code
```javascript
getPropertyType = function (propName) {
  var prop = this.definition.properties[propName];
  if (!prop) {
    // The property is not part of the definition
    return null;
  }
  if (!prop.type) {
    throw new Error(g.f('Type not defined for property %s.%s', this.modelName, propName));
    // return null;
  }
  return prop.type.name;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.getSourceId"></a>[function <span class="apidocSignatureSpan">loopback.ACL.</span>getSourceId (cb)](#apidoc.element.loopback.ACL.getSourceId)
- description and source-code
```javascript
getSourceId = function (cb) {
  var dataSource = this.dataSource;
  if (!dataSource) {
    this.once('dataSourceAttached', this.getSourceId.bind(this, cb));
  }
  assert(
    dataSource.connector.name,
    'Model.getSourceId: cannot get id without dataSource.connector.name'
  );
  var id = [dataSource.connector.name, this.modelName].join('-');
  cb(null, id);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.getStaticACLs"></a>[function <span class="apidocSignatureSpan">loopback.ACL.</span>getStaticACLs (model, property)](#apidoc.element.loopback.ACL.getStaticACLs)
- description and source-code
```javascript
function getStaticACLs(model, property) {
  var modelClass = this.registry.findModel(model);
  var staticACLs = [];
  if (modelClass && modelClass.settings.acls) {
    modelClass.settings.acls.forEach(function(acl) {
      var prop = acl.property;
      // We support static ACL property with array of string values.
      if (Array.isArray(prop) && prop.indexOf(property) >= 0)
        prop = property;
      if (!prop || prop === ACL.ALL || property === prop) {
        staticACLs.push(new ACL({
          model: model,
          property: prop || ACL.ALL,
          principalType: acl.principalType,
          principalId: acl.principalId, // TODO: Should it be a name?
          accessType: acl.accessType || ACL.ALL,
          permission: acl.permission,
        }));
      }
    });
  }
  var prop = modelClass && (
    // regular property
    modelClass.definition.properties[property] ||
    // relation/scope
    (modelClass._scopeMeta && modelClass._scopeMeta[property]) ||
    // static method
    modelClass[property] ||
    // prototype method
    modelClass.prototype[property]);
  if (prop && prop.acls) {
    prop.acls.forEach(function(acl) {
      staticACLs.push(new ACL({
        model: modelClass.modelName,
        property: property,
        principalType: acl.principalType,
        principalId: acl.principalId,
        accessType: acl.accessType,
        permission: acl.permission,
      }));
    });
  }
  return staticACLs;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.handleChangeError"></a>[function <span class="apidocSignatureSpan">loopback.ACL.</span>handleChangeError (err, operationName)](#apidoc.element.loopback.ACL.handleChangeError)
- description and source-code
```javascript
handleChangeError = function (err, operationName) {
  if (!err) return;
  this.emit('error', err, operationName);
}
```
- example usage
```shell
...
    // cleanup
    setInterval(cleanup, cleanupInterval);
  }

  function cleanup() {
    Model.rectifyAllChanges(function(err) {
      if (err) {
        Model.handleChangeError(err, 'cleanup');
      }
    });
  }
};

function rectifyOnSave(ctx, next) {
  var instance = ctx.instance || ctx.currentInstance;
...
```

#### <a name="apidoc.element.loopback.ACL.hasManyRemoting"></a>[function <span class="apidocSignatureSpan">loopback.ACL.</span>hasManyRemoting (relationName, relation, define)](#apidoc.element.loopback.ACL.hasManyRemoting)
- description and source-code
```javascript
hasManyRemoting = function (relationName, relation, define) {
  var pathName = (relation.options.http && relation.options.http.path) || relationName;
  var toModelName = relation.modelTo.modelName;

  var findByIdFunc = this.prototype['__findById__' + relationName];
  define('__findById__' + relationName, {
    isStatic: false,
    http: {verb: 'get', path: '/' + pathName + '/:fk'},
    accepts: [
      {
        arg: 'fk', type: 'any',
        description: format('Foreign key for %s', relationName),
        required: true,
        http: {source: 'path'},
      },
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Find a related item by id for %s.', relationName),
    accessType: 'READ',
    returns: {arg: 'result', type: toModelName, root: true},
    rest: {after: convertNullToNotFoundError.bind(null, toModelName)},
  }, findByIdFunc);

  var destroyByIdFunc = this.prototype['__destroyById__' + relationName];
  define('__destroyById__' + relationName, {
    isStatic: false,
    http: {verb: 'delete', path: '/' + pathName + '/:fk'},
    accepts: [
      {
        arg: 'fk', type: 'any',
        description: format('Foreign key for %s', relationName),
        required: true,
        http: {source: 'path'},
      },
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Delete a related item by id for %s.', relationName),
    accessType: 'WRITE',
    returns: [],
  }, destroyByIdFunc);

  var updateByIdFunc = this.prototype['__updateById__' + relationName];
  define('__updateById__' + relationName, {
    isStatic: false,
    http: {verb: 'put', path: '/' + pathName + '/:fk'},
    accepts: [
      {arg: 'fk', type: 'any',
        description: format('Foreign key for %s', relationName),
        required: true,
        http: {source: 'path'}},
      {arg: 'data', type: 'object', model: toModelName, http: {source: 'body'}},
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Update a related item by id for %s.', relationName),
    accessType: 'WRITE',
    returns: {arg: 'result', type: toModelName, root: true},
  }, updateByIdFunc);

  if (relation.modelThrough || relation.type === 'referencesMany') {
    var modelThrough = relation.modelThrough || relation.modelTo;

    var accepts = [];
    if (relation.type === 'hasMany' && relation.modelThrough) {
      // Restrict: only hasManyThrough relation can have additional properties
      accepts.push({
        arg: 'data', type: 'object', model: modelThrough.modelName,
        http: {source: 'body'},
      });
    }

    var addFunc = this.prototype['__link__' + relationName];
    define('__link__' + relationName, {
      isStatic: false,
      http: {verb: 'put', path: '/' + pathName + '/rel/:fk'},
      accepts: [{arg: 'fk', type: 'any',
        description: format('Foreign key for %s', relationName),
        required: true,
        http: {source: 'path'}},
      ].concat(accepts).concat([
        {arg: 'options', type: 'object', http: 'optionsFromRequest'},
      ]),
      description: format('Add a related item by id for %s.', relationName),
      accessType: 'WRITE',
      returns: {arg: relationName, type: modelThrough.modelName, root: true},
    }, addFunc);

    var removeFunc = this.prototype['__unlink__' + relationName];
    define('__unlink__' + relationName, {
      isStatic: false,
      http: {verb: 'delete', path: '/' + pathName + '/rel/:fk'},
      accepts: [
        {
          arg: 'fk', type: 'any',
          description: format('Foreign key for %s', relationName),
          required: true,
          http: {source: 'path'},
        },
        {arg: 'options', type: 'object', http: 'optionsFromRequest'},
      ],
      description: format('Remove the %s relation to an item by id.', relationName),
      accessType: 'WRITE',
      returns: [],
    }, removeFunc);

    // FIXME: [rfeng] How to map a function with callback(err, true|false) to HEAD?
    // true --> 200 and false --> 404?
    var existsFunc = this.prototype['__exists__' + relatio ...
```
- example usage
```shell
...
    relation.type === 'embedsOne'
  ) {
    ModelCtor.hasOneRemoting(relationName, relation, define);
  } else if (
    relation.type === 'hasMany' ||
    relation.type === 'embedsMany' ||
    relation.type === 'referencesMany') {
    ModelCtor.hasManyRemoting(relationName, relation, define);
  }
}

// handle scopes
var scopes = ModelCtor.scopes || {};
for (var scopeName in scopes) {
  ModelCtor.scopeRemoting(scopeName, scopes[scopeName], define);
...
```

#### <a name="apidoc.element.loopback.ACL.hasOneRemoting"></a>[function <span class="apidocSignatureSpan">loopback.ACL.</span>hasOneRemoting (relationName, relation, define)](#apidoc.element.loopback.ACL.hasOneRemoting)
- description and source-code
```javascript
hasOneRemoting = function (relationName, relation, define) {
  var pathName = (relation.options.http && relation.options.http.path) || relationName;
  var toModelName = relation.modelTo.modelName;

  define('__get__' + relationName, {
    isStatic: false,
    http: {verb: 'get', path: '/' + pathName},
    accepts: [
      {arg: 'refresh', type: 'boolean', http: {source: 'query'}},
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Fetches hasOne relation %s.', relationName),
    accessType: 'READ',
    returns: {arg: relationName, type: relation.modelTo.modelName, root: true},
    rest: {after: convertNullToNotFoundError.bind(null, toModelName)},
  });

  define('__create__' + relationName, {
    isStatic: false,
    http: {verb: 'post', path: '/' + pathName},
    accepts: [
      {
        arg: 'data', type: 'object', model: toModelName,
        http: {source: 'body'},
      },
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Creates a new instance in %s of this model.', relationName),
    accessType: 'WRITE',
    returns: {arg: 'data', type: toModelName, root: true},
  });

  define('__update__' + relationName, {
    isStatic: false,
    http: {verb: 'put', path: '/' + pathName},
    accepts: [
      {
        arg: 'data', type: 'object', model: toModelName,
        http: {source: 'body'},
      },
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Update %s of this model.', relationName),
    accessType: 'WRITE',
    returns: {arg: 'data', type: toModelName, root: true},
  });

  define('__destroy__' + relationName, {
    isStatic: false,
    http: {verb: 'delete', path: '/' + pathName},
    accepts: [
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Deletes %s of this model.', relationName),
    accessType: 'WRITE',
  });
}
```
- example usage
```shell
...
  var relation = relations[relationName];
  if (relation.type === 'belongsTo') {
    ModelCtor.belongsToRemoting(relationName, relation, define);
  } else if (
    relation.type === 'hasOne' ||
    relation.type === 'embedsOne'
  ) {
    ModelCtor.hasOneRemoting(relationName, relation, define);
  } else if (
    relation.type === 'hasMany' ||
    relation.type === 'embedsMany' ||
    relation.type === 'referencesMany') {
    ModelCtor.hasManyRemoting(relationName, relation, define);
  }
}
...
```

#### <a name="apidoc.element.loopback.ACL.isAllowed"></a>[function <span class="apidocSignatureSpan">loopback.ACL.</span>isAllowed (permission, defaultPermission)](#apidoc.element.loopback.ACL.isAllowed)
- description and source-code
```javascript
isAllowed = function (permission, defaultPermission) {
  if (permission === ACL.DEFAULT) {
    permission = defaultPermission || ACL.ALLOW;
  }
  return permission !== loopback.ACL.DENY;
}
```
- example usage
```shell
...
  if (debug.enabled) {
    debug('---AccessRequest---');
    debug(' model %s', this.model);
    debug(' property %s', this.property);
    debug(' accessType %s', this.accessType);
    debug(' permission %s', this.permission);
    debug(' isWildcard() %s', this.isWildcard());
    debug(' isAllowed() %s', this.isAllowed());
  }
};

module.exports.AccessContext = AccessContext;
module.exports.Principal = Principal;
module.exports.AccessRequest = AccessRequest;
...
```

#### <a name="apidoc.element.loopback.ACL.isHiddenProperty"></a>[function <span class="apidocSignatureSpan">loopback.ACL.</span>isHiddenProperty (propertyName)](#apidoc.element.loopback.ACL.isHiddenProperty)
- description and source-code
```javascript
isHiddenProperty = function (propertyName) {
  var Model = this;
  var settings = Model.definition && Model.definition.settings;
  var hiddenProperties = settings && (settings.hiddenProperties || settings.hidden);
  if (Array.isArray(hiddenProperties)) {
    // Cache the hidden properties as an object for quick lookup
    settings.hiddenProperties = {};
    for (var i = 0; i < hiddenProperties.length; i++) {
      settings.hiddenProperties[hiddenProperties[i]] = true;
    }
    hiddenProperties = settings.hiddenProperties;
  }
  if (hiddenProperties) {
    return hiddenProperties[propertyName];
  } else {
    return false;
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.isMappedToRole"></a>[function <span class="apidocSignatureSpan">loopback.ACL.</span>isMappedToRole (principalType, principalId, role, cb)](#apidoc.element.loopback.ACL.isMappedToRole)
- description and source-code
```javascript
isMappedToRole = function (principalType, principalId, role, cb) {
  cb = cb || utils.createPromiseCallback();
  var self = this;
  this.resolvePrincipal(principalType, principalId,
    function(err, principal) {
      if (err) return cb(err);
      if (principal != null) {
        principalId = principal.id;
      }
      principalType = principalType || 'ROLE';
      self.resolvePrincipal('ROLE', role, function(err, role) {
        if (err || !role) return cb(err, role);
        self.roleMappingModel.findOne({
          where: {
            roleId: role.id,
            principalType: principalType,
            principalId: String(principalId),
          },
        }, function(err, result) {
          if (err) return cb(err);
          return cb(null, !!result);
        });
      });
    });
  return cb.promise;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.isProtectedProperty"></a>[function <span class="apidocSignatureSpan">loopback.ACL.</span>isProtectedProperty (propertyName)](#apidoc.element.loopback.ACL.isProtectedProperty)
- description and source-code
```javascript
isProtectedProperty = function (propertyName) {
  var Model = this;
  var settings = Model.definition && Model.definition.settings;
  var protectedProperties = settings && (settings.protectedProperties || settings.protected);
  if (Array.isArray(protectedProperties)) {
    // Cache the protected properties as an object for quick lookup
    settings.protectedProperties = {};
    for (var i = 0; i < protectedProperties.length; i++) {
      settings.protectedProperties[protectedProperties[i]] = true;
    }
    protectedProperties = settings.protectedProperties;
  }
  if (protectedProperties) {
    return protectedProperties[propertyName];
  } else {
    return false;
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.listenerCount"></a>[function <span class="apidocSignatureSpan">loopback.ACL.</span>listenerCount ()](#apidoc.element.loopback.ACL.listenerCount)
- description and source-code
```javascript
listenerCount = function () { [native code] }
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.listeners"></a>[function <span class="apidocSignatureSpan">loopback.ACL.</span>listeners ()](#apidoc.element.loopback.ACL.listeners)
- description and source-code
```javascript
listeners = function () { [native code] }
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.mixin"></a>[function <span class="apidocSignatureSpan">loopback.ACL.</span>mixin (anotherClass, options)](#apidoc.element.loopback.ACL.mixin)
- description and source-code
```javascript
mixin = function (anotherClass, options) {
  if (typeof anotherClass === 'string') {
    this.modelBuilder.mixins.applyMixin(this, anotherClass, options);
  } else {
    if (anotherClass.prototype instanceof ModelBaseClass) {
      var props = anotherClass.definition.properties;
      for (var i in props) {
        if (this.definition.properties[i]) {
          continue;
        }
        this.defineProperty(i, props[i]);
      }
    }
    return jutil.mixin(this, anotherClass, options);
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.nestRemoting"></a>[function <span class="apidocSignatureSpan">loopback.ACL.</span>nestRemoting (relationName, options, filterCallback)](#apidoc.element.loopback.ACL.nestRemoting)
- description and source-code
```javascript
nestRemoting = function (relationName, options, filterCallback) {
  if (typeof options === 'function' && !filterCallback) {
    filterCallback = options;
    options = {};
  }
  options = options || {};

  var regExp = /^__([^_]+)__([^_]+)$/;
  var relation = this.relations[relationName];
  if (relation && relation.modelTo && relation.modelTo.sharedClass) {
    var self = this;
    var sharedClass = this.sharedClass;
    var sharedToClass = relation.modelTo.sharedClass;
    var toModelName = relation.modelTo.modelName;

    var pathName = options.pathName || relation.options.path || relationName;
    var paramName = options.paramName || 'nk';

    var http = [].concat(sharedToClass.http || [])[0];
    var httpPath, acceptArgs;

    if (relation.multiple) {
      httpPath = pathName + '/:' + paramName;
      acceptArgs = [
        {
          arg: paramName, type: 'any', http: {source: 'path'},
          description: format('Foreign key for %s.',  relation.name),
          required: true,
        },
      ];
    } else {
      httpPath = pathName;
      acceptArgs = [];
    }

    if (httpPath[0] !== '/') {
      httpPath = '/' + httpPath;
    }

    // A method should return the method name to use, if it is to be
    // included as a nested method - a falsy return value will skip.
    var filter = filterCallback || options.filterMethod || function(method, relation) {
      var matches = method.name.match(regExp);
      if (matches) {
        return '__' + matches[1] + '__' + relation.name + '__' + matches[2];
      }
    };

    sharedToClass.methods().forEach(function(method) {
      var methodName;
      if (!method.isStatic && (methodName = filter(method, relation))) {
        var prefix = relation.multiple ? '__findById__' : '__get__';
        var getterName = options.getterName || (prefix + relationName);

        var getterFn = relation.modelFrom.prototype[getterName];
        if (typeof getterFn !== 'function') {
          throw new Error(g.f('Invalid remote method: '%s'', getterName));
        }

        var nestedFn = relation.modelTo.prototype[method.name];
        if (typeof nestedFn !== 'function') {
          throw new Error(g.f('Invalid remote method: '%s'', method.name));
        }

        var opts = {};

        opts.accepts = acceptArgs.concat(method.accepts || []);
        opts.returns = [].concat(method.returns || []);
        opts.description = method.description;
        opts.accessType = method.accessType;
        opts.rest = extend({}, method.rest || {});
        opts.rest.delegateTo = method;

        opts.http = [];
        var routes = [].concat(method.http || []);
        routes.forEach(function(route) {
          if (route.path) {
            var copy = extend({}, route);
            copy.path = httpPath + route.path;
            opts.http.push(copy);
          }
        });

        if (relation.multiple) {
          sharedClass.defineMethod(methodName, opts, function(fkId) {
            var args = Array.prototype.slice.call(arguments, 1);
            var last = args[args.length - 1];
            var cb = typeof last === 'function' ? last : null;
            this[getterName](fkId, function(err, inst) {
              if (err && cb) return cb(err);
              if (inst instanceof relation.modelTo) {
                try {
                  nestedFn.apply(inst, args);
                } catch (err) {
                  if (cb) return cb(err);
                }
              } else if (cb) {
                cb(err, null);
              }
            });
          }, method.isStatic);
        } else {
          sharedClass.defineMethod(methodName, opts, function() {
            var args = Array.prototype.slice.call(arguments);
            var last = args[args.length - 1];
            var cb = typeof last === 'function' ? last : null;
            this[getterName](function(err, inst) {
              if (err && cb) return cb(err);
              if (inst instanceof relation.modelTo) {
                try {
                  nestedFn.apply(inst, args);
                } catch (err) {
                  if (cb) return ...
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.notifyObserversAround"></a>[function <span class="apidocSignatureSpan">loopback.ACL.</span>notifyObserversAround (operation, context, fn, callback)](#apidoc.element.loopback.ACL.notifyObserversAround)
- description and source-code
```javascript
notifyObserversAround = function (operation, context, fn, callback) {
  var self = this;
  context = context || {};
  // Add callback to the context object so that an observer can skip other
  // ones by calling the callback function directly and not calling next
  if (context.end === undefined) {
    context.end = callback;
  }
  // First notify before observers
  return self.notifyObserversOf('before ' + operation, context,
    function(err, context) {
      if (err) return callback(err);

      function cbForWork(err) {
        var args = [].slice.call(arguments, 0);
        if (err) return callback.apply(null, args);
        // Find the list of params from the callback in addition to err
        var returnedArgs = args.slice(1);
        // Set up the array of results
        context.results = returnedArgs;
        // Notify after observers
        self.notifyObserversOf('after ' + operation, context,
          function(err, context) {
            if (err) return callback(err, context);
            var results = returnedArgs;
            if (context && Array.isArray(context.results)) {
              // Pickup the results from context
              results = context.results;
            }
            // Build the list of params for final callback
            var args = [err].concat(results);
            callback.apply(null, args);
          });
      }

      if (fn.length === 1) {
        // fn(done)
        fn(cbForWork);
      } else {
        // fn(context, done)
        fn(context, cbForWork);
      }
    });
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.notifyObserversOf"></a>[function <span class="apidocSignatureSpan">loopback.ACL.</span>notifyObserversOf (operation, context, callback)](#apidoc.element.loopback.ACL.notifyObserversOf)
- description and source-code
```javascript
notifyObserversOf = function (operation, context, callback) {
  var self = this;
  if (!callback) callback = utils.createPromiseCallback();

  function createNotifier(op) {
    return function(ctx, done) {
      if (typeof ctx === 'function' && done === undefined) {
        done = ctx;
        ctx = context;
      }
      self.notifyObserversOf(op, context, done);
    };
  }

  if (Array.isArray(operation)) {
    var tasks = [];
    for (var i = 0, n = operation.length; i < n; i++) {
      tasks.push(createNotifier(operation[i]));
    }
    return async.waterfall(tasks, callback);
  }

  var observers = this._observers && this._observers[operation];

  this._notifyBaseObservers(operation, context, function doNotify(err) {
    if (err) return callback(err, context);
    if (!observers || !observers.length) return callback(null, context);

    async.eachSeries(
      observers,
      function notifySingleObserver(fn, next) {
        var retval = fn(context, next);
        if (retval && typeof retval.then === 'function') {
          retval.then(
            function() { next(); return null; },
            next // error handler
          );
        }
      },
      function(err) { callback(err, context); }
    );
  });
  return callback.promise;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.observe"></a>[function <span class="apidocSignatureSpan">loopback.ACL.</span>observe (operation, listener)](#apidoc.element.loopback.ACL.observe)
- description and source-code
```javascript
observe = function (operation, listener) {
  this._observers = this._observers || {};
  if (!this._observers[operation]) {
    this._observers[operation] = [];
  }

  this._observers[operation].push(listener);
}
```
- example usage
```shell
...
var idType = idProp && idProp.type;
var idDefn = idProp && idProp.defaultFn;
if (idType !== String || !(idDefn === 'uuid' || idDefn === 'guid')) {
  deprecated('The model ' + this.modelName + ' is tracking changes, ' +
    'which requires a string id with GUID/UUID default value.');
}

Model.observe('after save', rectifyOnSave);

Model.observe('after delete', rectifyOnDelete);

// Only run if the run time is server
// Can switch off cleanup by setting the interval to -1
if (runtime.isServer && cleanupInterval > 0) {
  // initial cleanup
...
```

#### <a name="apidoc.element.loopback.ACL.on"></a>[function <span class="apidocSignatureSpan">loopback.ACL.</span>on ()](#apidoc.element.loopback.ACL.on)
- description and source-code
```javascript
on = function () { [native code] }
```
- example usage
```shell
...
    this.remotes().addClass(Model.Change.sharedClass);
  }
  clearHandlerCache(this);
  this.emit('modelRemoted', Model.sharedClass);
}

var self = this;
Model.on('remoteMethodDisabled', function(model, methodName) {
  self.emit('remoteMethodDisabled', model, methodName);
});
Model.on('remoteMethodAdded', function(model) {
  self.emit('remoteMethodAdded', model);
});

Model.shared = isPublic;
...
```

#### <a name="apidoc.element.loopback.ACL.once"></a>[function <span class="apidocSignatureSpan">loopback.ACL.</span>once ()](#apidoc.element.loopback.ACL.once)
- description and source-code
```javascript
once = function () { [native code] }
```
- example usage
```shell
...
    remotes.afterError(className + '.' + name, fn);
  });
};

ModelCtor._runWhenAttachedToApp = function(fn) {
  if (this.app) return fn(this.app);
  var self = this;
  self.once('attached', function() {
    fn(self.app);
  });
};

if ('injectOptionsFromRemoteContext' in options) {
  console.warn(g.f(
    '%s is using model setting %s which is no longer available.',
...
```

#### <a name="apidoc.element.loopback.ACL.patchOrCreate"></a>[function <span class="apidocSignatureSpan">loopback.ACL.</span>patchOrCreate (data, callback)](#apidoc.element.loopback.ACL.patchOrCreate)
- description and source-code
```javascript
function upsert(data, callback) {
  throwNotAttached(this.modelName, 'upsert');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.patchOrCreateWithWhere"></a>[function <span class="apidocSignatureSpan">loopback.ACL.</span>patchOrCreateWithWhere (where, data, callback)](#apidoc.element.loopback.ACL.patchOrCreateWithWhere)
- description and source-code
```javascript
function upsertWithWhere(where, data, callback) {
  throwNotAttached(this.modelName, 'upsertWithWhere');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.prependListener"></a>[function <span class="apidocSignatureSpan">loopback.ACL.</span>prependListener ()](#apidoc.element.loopback.ACL.prependListener)
- description and source-code
```javascript
prependListener = function () { [native code] }
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.prependOnceListener"></a>[function <span class="apidocSignatureSpan">loopback.ACL.</span>prependOnceListener ()](#apidoc.element.loopback.ACL.prependOnceListener)
- description and source-code
```javascript
prependOnceListener = function () { [native code] }
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.rectifyAllChanges"></a>[function <span class="apidocSignatureSpan">loopback.ACL.</span>rectifyAllChanges (callback)](#apidoc.element.loopback.ACL.rectifyAllChanges)
- description and source-code
```javascript
rectifyAllChanges = function (callback) {
  this.getChangeModel().rectifyAll(callback);
}
```
- example usage
```shell
...
    cleanup();

    // cleanup
    setInterval(cleanup, cleanupInterval);
  }

  function cleanup() {
    Model.rectifyAllChanges(function(err) {
      if (err) {
        Model.handleChangeError(err, 'cleanup');
      }
    });
  }
};
...
```

#### <a name="apidoc.element.loopback.ACL.rectifyChange"></a>[function <span class="apidocSignatureSpan">loopback.ACL.</span>rectifyChange (id, callback)](#apidoc.element.loopback.ACL.rectifyChange)
- description and source-code
```javascript
rectifyChange = function (id, callback) {
  var Change = this.getChangeModel();
  Change.rectifyModelChanges(this.modelName, [id], callback);
}
```
- example usage
```shell
...
  debug('rectifyOnSave %s -> ' + (id ? 'id %j' : '%s'),
    ctx.Model.modelName, id ? id : 'ALL');
  debug('context instance:%j currentInstance:%j where:%j data %j',
    ctx.instance, ctx.currentInstance, ctx.where, ctx.data);
}

if (id) {
  ctx.Model.rectifyChange(id, reportErrorAndNext);
} else {
  ctx.Model.rectifyAllChanges(reportErrorAndNext);
}

function reportErrorAndNext(err) {
  if (err) {
    ctx.Model.handleChangeError(err, 'after save');
...
```

#### <a name="apidoc.element.loopback.ACL.registerProperty"></a>[function <span class="apidocSignatureSpan">loopback.ACL.</span>registerProperty (propertyName)](#apidoc.element.loopback.ACL.registerProperty)
- description and source-code
```javascript
registerProperty = function (propertyName) {
  var properties = modelDefinition.build();
  var prop = properties[propertyName];
  var DataType = prop.type;
  if (!DataType) {
    throw new Error(g.f('Invalid type for property %s', propertyName));
  }

  if (prop.required) {
    var requiredOptions = typeof prop.required === 'object' ? prop.required : undefined;
    ModelClass.validatesPresenceOf(propertyName, requiredOptions);
  }

  Object.defineProperty(ModelClass.prototype, propertyName, {
    get: function() {
      if (ModelClass.getter[propertyName]) {
        return ModelClass.getter[propertyName].call(this); // Try getter first
      } else {
        return this.__data && this.__data[propertyName]; // Try __data
      }
    },
    set: function(value) {
      var DataType = ModelClass.definition.properties[propertyName].type;
      if (Array.isArray(DataType) || DataType === Array) {
        DataType = List;
      } else if (DataType === Date) {
        DataType = DateType;
      } else if (DataType === Boolean) {
        DataType = BooleanType;
      } else if (typeof DataType === 'string') {
        DataType = modelBuilder.resolveType(DataType);
      }

      var persistUndefinedAsNull = ModelClass.definition.settings.persistUndefinedAsNull;
      if (value === undefined && persistUndefinedAsNull) {
        value = null;
      }

      if (ModelClass.setter[propertyName]) {
        ModelClass.setter[propertyName].call(this, value); // Try setter first
      } else {
        this.__data = this.__data || {};
        if (value === null || value === undefined) {
          this.__data[propertyName] = value;
        } else {
          if (DataType === List) {
            this.__data[propertyName] = DataType(value, properties[propertyName].type, this.__data);
          } else {
            // Assume the type constructor handles Constructor() call
            // If not, we should call new DataType(value).valueOf();
            this.__data[propertyName] = (value instanceof DataType) ? value : DataType(value);
          }
        }
      }
    },
    configurable: true,
    enumerable: true,
  });

  // FIXME: [rfeng] Do we need to keep the raw data?
  // Use $ as the prefix to avoid conflicts with properties such as _id
  Object.defineProperty(ModelClass.prototype, '$' + propertyName, {
    get: function() {
      return this.__data && this.__data[propertyName];
    },
    set: function(value) {
      if (!this.__data) {
        this.__data = {};
      }
      this.__data[propertyName] = value;
    },
    configurable: true,
    enumerable: false,
  });
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.remoteMethod"></a>[function <span class="apidocSignatureSpan">loopback.ACL.</span>remoteMethod (name, options)](#apidoc.element.loopback.ACL.remoteMethod)
- description and source-code
```javascript
remoteMethod = function (name, options) {
  if (options.isStatic === undefined) {
    var m = name.match(/^prototype\.(.*)$/);
    options.isStatic = !m;
    name = options.isStatic ? name : m[1];
  }

  if (options.accepts) {
    options = extend({}, options);
    options.accepts = setupOptionsArgs(options.accepts);
  }

  this.sharedClass.defineMethod(name, options);
  this.emit('remoteMethodAdded', this.sharedClass);
}
```
- example usage
```shell
...
  /**
* Enable remote invocation for the specified method.
* See [Remote methods](http://loopback.io/doc/en/lb2/Remote-methods.html) for more information.
*
* Static method example:
* '''js
* Model.myMethod();
* Model.remoteMethod('myMethod');
* '''
*
* @param {String} name The name of the method.
* @param {Object} options The remoting options.
* See [Remote methods - Options](http://loopback.io/doc/en/lb2/Remote-methods.html#options).
*/
...
```

#### <a name="apidoc.element.loopback.ACL.remove"></a>[function <span class="apidocSignatureSpan">loopback.ACL.</span>remove (where, cb)](#apidoc.element.loopback.ACL.remove)
- description and source-code
```javascript
function destroyAll(where, cb) {
  throwNotAttached(this.modelName, 'destroyAll');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.removeAllListeners"></a>[function <span class="apidocSignatureSpan">loopback.ACL.</span>removeAllListeners ()](#apidoc.element.loopback.ACL.removeAllListeners)
- description and source-code
```javascript
removeAllListeners = function () { [native code] }
```
- example usage
```shell
...

var idName = this.getIdName();
var Model = this;
var changes = new PassThrough({objectMode: true});
var writeable = true;

changes.destroy = function() {
  changes.removeAllListeners('error');
  changes.removeAllListeners('end');
  writeable = false;
  changes = null;
};

changes.on('error', function() {
  writeable = false;
...
```

#### <a name="apidoc.element.loopback.ACL.removeById"></a>[function <span class="apidocSignatureSpan">loopback.ACL.</span>removeById (id, cb)](#apidoc.element.loopback.ACL.removeById)
- description and source-code
```javascript
function deleteById(id, cb) {
  throwNotAttached(this.modelName, 'deleteById');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.removeListener"></a>[function <span class="apidocSignatureSpan">loopback.ACL.</span>removeListener ()](#apidoc.element.loopback.ACL.removeListener)
- description and source-code
```javascript
removeListener = function () { [native code] }
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.removeObserver"></a>[function <span class="apidocSignatureSpan">loopback.ACL.</span>removeObserver (operation, listener)](#apidoc.element.loopback.ACL.removeObserver)
- description and source-code
```javascript
removeObserver = function (operation, listener) {
  if (!(this._observers && this._observers[operation])) return;

  var index = this._observers[operation].indexOf(listener);
  if (index !== -1) {
    return this._observers[operation].splice(index, 1);
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.replaceById"></a>[function <span class="apidocSignatureSpan">loopback.ACL.</span>replaceById (id, data, cb)](#apidoc.element.loopback.ACL.replaceById)
- description and source-code
```javascript
function replaceById(id, data, cb) {
  throwNotAttached(this.modelName, 'replaceById');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.replaceOrCreate"></a>[function <span class="apidocSignatureSpan">loopback.ACL.</span>replaceOrCreate (data, callback)](#apidoc.element.loopback.ACL.replaceOrCreate)
- description and source-code
```javascript
function replaceOrCreate(data, callback) {
  throwNotAttached(this.modelName, 'replaceOrCreate');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.replicate"></a>[function <span class="apidocSignatureSpan">loopback.ACL.</span>replicate (since, targetModel, options, callback)](#apidoc.element.loopback.ACL.replicate)
- description and source-code
```javascript
replicate = function (since, targetModel, options, callback) {
  var lastArg = arguments[arguments.length - 1];

  if (typeof lastArg === 'function' && arguments.length > 1) {
    callback = lastArg;
  }

  if (typeof since === 'function' && since.modelName) {
    targetModel = since;
    since = -1;
  }

  if (typeof since !== 'object') {
    since = {source: since, target: since};
  }

  if (typeof options === 'function') {
    options = {};
  }

  options = options || {};

  var sourceModel = this;
  callback = callback || utils.createPromiseCallback();

  debug('replicating %s since %s to %s since %s',
    sourceModel.modelName,
    since.source,
    targetModel.modelName,
    since.target);
  if (options.filter) {
    debug('\twith filter %j', options.filter);
  }

  // In order to avoid a race condition between the replication and
  // other clients modifying the data, we must create the new target
  // checkpoint as the first step of the replication process.
  // As a side-effect of that, the replicated changes are associated
  // with the new target checkpoint. This is actually desired behaviour,
  // because that way clients replicating *from* the target model
  // since the new checkpoint will pick these changes up.
  // However, it increases the likelihood of (false) conflicts being detected.
  // In order to prevent that, we run the replication multiple times,
  // until no changes were replicated, but at most MAX_ATTEMPTS times
  // to prevent starvation. In most cases, the second run will find no changes
  // to replicate and we are done.
  var MAX_ATTEMPTS = 3;

  run(1, since);
  return callback.promise;

  function run(attempt, since) {
    debug('\titeration #%s', attempt);
    tryReplicate(sourceModel, targetModel, since, options, next);

    function next(err, conflicts, cps, updates) {
      var finished = err || conflicts.length ||
        !updates || updates.length === 0 ||
        attempt >= MAX_ATTEMPTS;

      if (finished)
        return callback(err, conflicts, cps);
      run(attempt + 1, cps);
    }
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.resolvePermission"></a>[function <span class="apidocSignatureSpan">loopback.ACL.</span>resolvePermission (acls, req)](#apidoc.element.loopback.ACL.resolvePermission)
- description and source-code
```javascript
function resolvePermission(acls, req) {
  if (!(req instanceof AccessRequest)) {
    req.registry = this.registry;
    req = new AccessRequest(req);
  }
  // Sort by the matching score in descending order
  acls = acls.sort(function(rule1, rule2) {
    return ACL.getMatchingScore(rule2, req) - ACL.getMatchingScore(rule1, req);
  });
  var permission = ACL.DEFAULT;
  var score = 0;

  for (var i = 0; i < acls.length; i++) {
    var candidate = acls[i];
    score = ACL.getMatchingScore(candidate, req);
    if (score < 0) {
      // the highest scored ACL did not match
      break;
    }
    if (!req.isWildcard()) {
      // We should stop from the first match for non-wildcard
      permission = candidate.permission;
      break;
    } else {
      if (req.exactlyMatches(candidate)) {
        permission = candidate.permission;
        break;
      }
      // For wildcard match, find the strongest permission
      var candidateOrder = AccessContext.permissionOrder[candidate.permission];
      var permissionOrder = AccessContext.permissionOrder[permission];
      if (candidateOrder > permissionOrder) {
        permission = candidate.permission;
      }
    }
  }

  if (debug.enabled) {
    debug('The following ACLs were searched: ');
    acls.forEach(function(acl) {
      acl.debug();
      debug('with score:', acl.score(req));
    });
  }
  var res = new AccessRequest({
    model: req.model,
    property: req.property,
    accessType: req.accessType,
    permission: permission || ACL.DEFAULT,
    registry: this.registry});

  // Elucidate permission status if DEFAULT
  res.settleDefaultPermission();

  return res;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.resolvePrincipal"></a>[function <span class="apidocSignatureSpan">loopback.ACL.</span>resolvePrincipal (type, id, cb)](#apidoc.element.loopback.ACL.resolvePrincipal)
- description and source-code
```javascript
resolvePrincipal = function (type, id, cb) {
  cb = cb || utils.createPromiseCallback();
  type = type || ACL.ROLE;
  this.resolveRelatedModels();

  switch (type) {
    case ACL.ROLE:
      this.roleModel.findOne({where: {or: [{name: id}, {id: id}]}}, cb);
      break;
    case ACL.USER:
      this.userModel.findOne(
        {where: {or: [{username: id}, {email: id}, {id: id}]}}, cb);
      break;
    case ACL.APP:
      this.applicationModel.findOne(
        {where: {or: [{name: id}, {email: id}, {id: id}]}}, cb);
      break;
    default:
      // try resolving a user model with a name matching the principalType
      var userModel = this.registry.findModel(type);
      if (userModel) {
        userModel.findOne(
          {where: {or: [{username: id}, {email: id}, {id: id}]}},
          cb);
      } else {
        process.nextTick(function() {
          var err = new Error(g.f('Invalid principal type: %s', type));
          err.statusCode = 400;
          err.code = 'INVALID_PRINCIPAL_TYPE';
          cb(err);
        });
      }
  }
  return cb.promise;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.resolveRelatedModels"></a>[function <span class="apidocSignatureSpan">loopback.ACL.</span>resolveRelatedModels ()](#apidoc.element.loopback.ACL.resolveRelatedModels)
- description and source-code
```javascript
resolveRelatedModels = function () {
  if (!this.roleModel) {
    var reg = this.registry;
    this.roleModel = reg.getModelByType('Role');
    this.roleMappingModel = reg.getModelByType('RoleMapping');
    this.userModel = reg.getModelByType('User');
    this.applicationModel = reg.getModelByType('Application');
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.scopeRemoting"></a>[function <span class="apidocSignatureSpan">loopback.ACL.</span>scopeRemoting (scopeName, scope, define)](#apidoc.element.loopback.ACL.scopeRemoting)
- description and source-code
```javascript
scopeRemoting = function (scopeName, scope, define) {
  var pathName =
    (scope.options && scope.options.http && scope.options.http.path) || scopeName;

  var isStatic = scope.isStatic;
  var toModelName = scope.modelTo.modelName;

  // https://github.com/strongloop/loopback/issues/811
  // Check if the scope is for a hasMany relation
  var relation = this.relations[scopeName];
  if (relation && relation.modelTo) {
    // For a relation with through model, the toModelName should be the one
    // from the target model
    toModelName = relation.modelTo.modelName;
  }

  define('__get__' + scopeName, {
    isStatic: isStatic,
    http: {verb: 'get', path: '/' + pathName},
    accepts: [
      {arg: 'filter', type: 'object'},
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Queries %s of %s.', scopeName, this.modelName),
    accessType: 'READ',
    returns: {arg: scopeName, type: [toModelName], root: true},
  });

  define('__create__' + scopeName, {
    isStatic: isStatic,
    http: {verb: 'post', path: '/' + pathName},
    accepts: [
      {
        arg: 'data',
        type: 'object',
        allowArray: true,
        model: toModelName,
        http: {source: 'body'},
      },
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Creates a new instance in %s of this model.', scopeName),
    accessType: 'WRITE',
    returns: {arg: 'data', type: toModelName, root: true},
  });

  define('__delete__' + scopeName, {
    isStatic: isStatic,
    http: {verb: 'delete', path: '/' + pathName},
    accepts: [
      {
        arg: 'where', type: 'object',
        // The "where" argument is not exposed in the REST API
        // but we need to provide a value so that we can pass "options"
        // as the third argument.
        http: function(ctx) { return undefined; },
      },
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Deletes all %s of this model.', scopeName),
    accessType: 'WRITE',
  });

  define('__count__' + scopeName, {
    isStatic: isStatic,
    http: {verb: 'get', path: '/' + pathName + '/count'},
    accepts: [
      {
        arg: 'where', type: 'object',
        description: 'Criteria to match model instances',
      },
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Counts %s of %s.', scopeName, this.modelName),
    accessType: 'READ',
    returns: {arg: 'count',  type: 'number'},
  });
}
```
- example usage
```shell
...
        ModelCtor.hasManyRemoting(relationName, relation, define);
      }
    }

    // handle scopes
    var scopes = ModelCtor.scopes || {};
    for (var scopeName in scopes) {
      ModelCtor.scopeRemoting(scopeName, scopes[scopeName], define);
    }
  });

  return ModelCtor;
};

/*!
...
```

#### <a name="apidoc.element.loopback.ACL.setMaxListeners"></a>[function <span class="apidocSignatureSpan">loopback.ACL.</span>setMaxListeners ()](#apidoc.element.loopback.ACL.setMaxListeners)
- description and source-code
```javascript
setMaxListeners = function () { [native code] }
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.setup"></a>[function <span class="apidocSignatureSpan">loopback.ACL.</span>setup ()](#apidoc.element.loopback.ACL.setup)
- description and source-code
```javascript
function setupPersistedModel() {
  // call Model.setup first
  Model.setup.call(this);

  var PersistedModel = this;

  // enable change tracking (usually for replication)
  if (this.settings.trackChanges) {
    PersistedModel._defineChangeModel();
    PersistedModel.once('dataSourceAttached', function() {
      PersistedModel.enableChangeTracking();
    });
  } else if (this.settings.enableRemoteReplication) {
    PersistedModel._defineChangeModel();
  }

  PersistedModel.setupRemoting();
}
```
- example usage
```shell
...
  Model.createOptionsFromRemotingContext = function(ctx) {
    return {
      accessToken: ctx.req.accessToken,
    };
  };

  // setup the initial model
  Model.setup();

  return Model;
};
...
```

#### <a name="apidoc.element.loopback.ACL.setupRemoting"></a>[function <span class="apidocSignatureSpan">loopback.ACL.</span>setupRemoting ()](#apidoc.element.loopback.ACL.setupRemoting)
- description and source-code
```javascript
setupRemoting = function () {
  var PersistedModel = this;
  var typeName = PersistedModel.modelName;
  var options = PersistedModel.settings;

  // This is just for LB 3.x
  options.replaceOnPUT = options.replaceOnPUT !== false;

  function setRemoting(scope, name, options) {
    var fn = scope[name];
    fn._delegate = true;
    options.isStatic = scope === PersistedModel;
    PersistedModel.remoteMethod(name, options);
  }

  setRemoting(PersistedModel, 'create', {
    description: 'Create a new instance of the model and persist it into the data source.',
    accessType: 'WRITE',
    accepts: [
      {
        arg: 'data', type: 'object', model: typeName, allowArray: true,
        description: 'Model instance data',
        http: {source: 'body'},
      },
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    returns: {arg: 'data', type: typeName, root: true},
    http: {verb: 'post', path: '/'},
  });

  var upsertOptions = {
    aliases: ['upsert', 'updateOrCreate'],
    description: 'Patch an existing model instance or insert a new one ' +
      'into the data source.',
    accessType: 'WRITE',
    accepts: [
      {
        arg: 'data', type: 'object', model: typeName, http: {source: 'body'},
        description: 'Model instance data',
      },
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    returns: {arg: 'data', type: typeName, root: true},
    http: [{verb: 'patch', path: '/'}],
  };

  if (!options.replaceOnPUT) {
    upsertOptions.http.unshift({verb: 'put', path: '/'});
  }
  setRemoting(PersistedModel, 'patchOrCreate', upsertOptions);

  var replaceOrCreateOptions = {
    description: 'Replace an existing model instance or insert a new one into the data source.',
    accessType: 'WRITE',
    accepts: [
      {
        arg: 'data', type: 'object', model: typeName,
        http: {source: 'body'},
        description: 'Model instance data',
      },
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    returns: {arg: 'data', type: typeName, root: true},
    http: [{verb: 'post', path: '/replaceOrCreate'}],
  };

  if (options.replaceOnPUT) {
    replaceOrCreateOptions.http.push({verb: 'put', path: '/'});
  }

  setRemoting(PersistedModel, 'replaceOrCreate', replaceOrCreateOptions);

  setRemoting(PersistedModel, 'upsertWithWhere', {
    aliases: ['patchOrCreateWithWhere'],
    description: 'Update an existing model instance or insert a new one into ' +
      'the data source based on the where criteria.',
    accessType: 'WRITE',
    accepts: [
      {arg: 'where', type: 'object', http: {source: 'query'},
        description: 'Criteria to match model instances'},
      {arg: 'data', type: 'object', model: typeName, http: {source: 'body'},
        description: 'An object of model property name/value pairs'},
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    returns: {arg: 'data', type: typeName, root: true},
    http: {verb: 'post', path: '/upsertWithWhere'},
  });

  setRemoting(PersistedModel, 'exists', {
    description: 'Check whether a model instance exists in the data source.',
    accessType: 'READ',
    accepts: [
      {arg: 'id', type: 'any', description: 'Model id', required: true},
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    returns: {arg: 'exists', type: 'boolean'},
    http: [
      {verb: 'get', path: '/:id/exists'},
      {verb: 'head', path: '/:id'},
    ],
    rest: {
      // After hook to map exists to 200/404 for HEAD
      after: function(ctx, cb) {
        if (ctx.req.method === 'GET') {
          // For GET, return {exists: true|false} as is
          return cb();
        }
        if (!ctx.result.exists) {
          var modelName = ctx.method.sharedClass.name;
          var id = ctx.getArgByName('id');
          var msg = 'Unknown "' + modelName + '" id "' + id + '".';
          var error = new Error(msg);
          error.statusCode = error.status = 404;
          error.code = 'MODEL_NOT_FOUND';
          cb(error);
        } else {
          cb();
        } ...
```
- example usage
```shell
...
    PersistedModel.once('dataSourceAttached', function() {
      PersistedModel.enableChangeTracking();
    });
  } else if (this.settings.enableRemoteReplication) {
    PersistedModel._defineChangeModel();
  }

  PersistedModel.setupRemoting();
};

/*!
 * Throw an error telling the user that the method is not available and why.
 */

function throwNotAttached(modelName, methodName) {
...
```

#### <a name="apidoc.element.loopback.ACL.sharedCtor"></a>[function <span class="apidocSignatureSpan">loopback.ACL.</span>sharedCtor (data, id, options, fn)](#apidoc.element.loopback.ACL.sharedCtor)
- description and source-code
```javascript
sharedCtor = function (data, id, options, fn) {
  var ModelCtor = this;

  var isRemoteInvocationWithOptions = typeof data !== 'object' &&
    typeof id === 'object' &&
    typeof options === 'function';
  if (isRemoteInvocationWithOptions) {
    // sharedCtor(id, options, fn)
    fn = options;
    options = id;
    id = data;
    data = null;
  } else if (typeof data === 'function') {
    // sharedCtor(fn)
    fn = data;
    data = null;
    id = null;
    options = null;
  } else if (typeof id === 'function') {
    // sharedCtor(data, fn)
    // sharedCtor(id, fn)
    fn = id;
    options = null;

    if (typeof data !== 'object') {
      id = data;
      data = null;
    } else {
      id = null;
    }
  }

  if (id && data) {
    var model = new ModelCtor(data);
    model.id = id;
    fn(null, model);
  } else if (data) {
    fn(null, new ModelCtor(data));
  } else if (id) {
    var filter = {};
    ModelCtor.findById(id, filter, options, function(err, model) {
      if (err) {
        fn(err);
      } else if (model) {
        fn(null, model);
      } else {
        err = new Error(g.f('could not find a model with apidoc.element.loopback.ACL.sharedCtor %s', id));
        err.statusCode = 404;
        err.code = 'MODEL_NOT_FOUND';
        fn(err);
      }
    });
  } else {
    fn(new Error(g.f('must specify an apidoc.element.loopback.ACL.sharedCtor or {{data}}')));
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.super_"></a>[function <span class="apidocSignatureSpan">loopback.ACL.</span>super_ (data, options)](#apidoc.element.loopback.ACL.super_)
- description and source-code
```javascript
function ModelConstructor(data, options) {
  if (!(this instanceof ModelConstructor)) {
    return new ModelConstructor(data, options);
  }
  if (ModelClass.settings.unresolved) {
    throw new Error(g.f('Model %s is not defined.', ModelClass.modelName));
  }
  ModelBaseClass.apply(this, arguments);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.update"></a>[function <span class="apidocSignatureSpan">loopback.ACL.</span>update (where, data, cb)](#apidoc.element.loopback.ACL.update)
- description and source-code
```javascript
function updateAll(where, data, cb) {
  throwNotAttached(this.modelName, 'updateAll');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.updateAll"></a>[function <span class="apidocSignatureSpan">loopback.ACL.</span>updateAll (where, data, cb)](#apidoc.element.loopback.ACL.updateAll)
- description and source-code
```javascript
function updateAll(where, data, cb) {
  throwNotAttached(this.modelName, 'updateAll');
}
```
- example usage
```shell
...

  /**
* Update multiple instances that match the where clause.
*
* Example:
*
*'''js
* Employee.updateAll({managerId: 'x001'}, {managerId: 'x002'}, function(err, info) {
*     ...
* });
* '''
*
* @param {Object} [where] Optional 'where' filter, like
* '''
* { key: val, key2: {gt: 'val2'}, ...}
...
```

#### <a name="apidoc.element.loopback.ACL.updateLastChange"></a>[function <span class="apidocSignatureSpan">loopback.ACL.</span>updateLastChange (id, data, cb)](#apidoc.element.loopback.ACL.updateLastChange)
- description and source-code
```javascript
updateLastChange = function (id, data, cb) {
  var self = this;
  this.findLastChange(id, function(err, inst) {
    if (err) return cb(err);
    if (!inst) {
      err = new Error(g.f('No change record found for %s with id %s',
        self.modelName, id));
      err.statusCode = 404;
      return cb(err);
    }

    inst.updateAttributes(data, cb);
  });
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.updateOrCreate"></a>[function <span class="apidocSignatureSpan">loopback.ACL.</span>updateOrCreate (data, callback)](#apidoc.element.loopback.ACL.updateOrCreate)
- description and source-code
```javascript
function upsert(data, callback) {
  throwNotAttached(this.modelName, 'upsert');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.upsert"></a>[function <span class="apidocSignatureSpan">loopback.ACL.</span>upsert (data, callback)](#apidoc.element.loopback.ACL.upsert)
- description and source-code
```javascript
function upsert(data, callback) {
  throwNotAttached(this.modelName, 'upsert');
}
```
- example usage
```shell
...
  }
});

// then save
function save() {
  inst.trigger('save', function(saveDone) {
    inst.trigger('update', function(updateDone) {
      Model.upsert(inst, function(err) {
        inst._initProperties(data);
        updateDone.call(inst, function() {
          saveDone.call(inst, function() {
            callback(err, inst);
          });
        });
      });
...
```

#### <a name="apidoc.element.loopback.ACL.upsertWithWhere"></a>[function <span class="apidocSignatureSpan">loopback.ACL.</span>upsertWithWhere (where, data, callback)](#apidoc.element.loopback.ACL.upsertWithWhere)
- description and source-code
```javascript
function upsertWithWhere(where, data, callback) {
  throwNotAttached(this.modelName, 'upsertWithWhere');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.validate"></a>[function <span class="apidocSignatureSpan">loopback.ACL.</span>validate ()](#apidoc.element.loopback.ACL.validate)
- description and source-code
```javascript
validate = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.validateAsync"></a>[function <span class="apidocSignatureSpan">loopback.ACL.</span>validateAsync ()](#apidoc.element.loopback.ACL.validateAsync)
- description and source-code
```javascript
validateAsync = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.validatesAbsenceOf"></a>[function <span class="apidocSignatureSpan">loopback.ACL.</span>validatesAbsenceOf ()](#apidoc.element.loopback.ACL.validatesAbsenceOf)
- description and source-code
```javascript
validatesAbsenceOf = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.validatesExclusionOf"></a>[function <span class="apidocSignatureSpan">loopback.ACL.</span>validatesExclusionOf ()](#apidoc.element.loopback.ACL.validatesExclusionOf)
- description and source-code
```javascript
validatesExclusionOf = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.validatesFormatOf"></a>[function <span class="apidocSignatureSpan">loopback.ACL.</span>validatesFormatOf ()](#apidoc.element.loopback.ACL.validatesFormatOf)
- description and source-code
```javascript
validatesFormatOf = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.validatesInclusionOf"></a>[function <span class="apidocSignatureSpan">loopback.ACL.</span>validatesInclusionOf ()](#apidoc.element.loopback.ACL.validatesInclusionOf)
- description and source-code
```javascript
validatesInclusionOf = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.validatesLengthOf"></a>[function <span class="apidocSignatureSpan">loopback.ACL.</span>validatesLengthOf ()](#apidoc.element.loopback.ACL.validatesLengthOf)
- description and source-code
```javascript
validatesLengthOf = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.validatesNumericalityOf"></a>[function <span class="apidocSignatureSpan">loopback.ACL.</span>validatesNumericalityOf ()](#apidoc.element.loopback.ACL.validatesNumericalityOf)
- description and source-code
```javascript
validatesNumericalityOf = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.validatesPresenceOf"></a>[function <span class="apidocSignatureSpan">loopback.ACL.</span>validatesPresenceOf ()](#apidoc.element.loopback.ACL.validatesPresenceOf)
- description and source-code
```javascript
validatesPresenceOf = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.validatesUniquenessOf"></a>[function <span class="apidocSignatureSpan">loopback.ACL.</span>validatesUniquenessOf ()](#apidoc.element.loopback.ACL.validatesUniquenessOf)
- description and source-code
```javascript
validatesUniquenessOf = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```



# <a name="apidoc.module.loopback.ACL.prototype"></a>[module loopback.ACL.prototype](#apidoc.module.loopback.ACL.prototype)

#### <a name="apidoc.element.loopback.ACL.prototype.debug"></a>[function <span class="apidocSignatureSpan">loopback.ACL.prototype.</span>debug ()](#apidoc.element.loopback.ACL.prototype.debug)
- description and source-code
```javascript
debug = function () {
  if (debug.enabled) {
    debug('---ACL---');
    debug('model %s', this.model);
    debug('property %s', this.property);
    debug('principalType %s', this.principalType);
    debug('principalId %s', this.principalId);
    debug('accessType %s', this.accessType);
    debug('permission %s', this.permission);
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.prototype.isAllowed"></a>[function <span class="apidocSignatureSpan">loopback.ACL.prototype.</span>isAllowed (defaultPermission)](#apidoc.element.loopback.ACL.prototype.isAllowed)
- description and source-code
```javascript
isAllowed = function (defaultPermission) {
  return this.constructor.isAllowed(this.permission, defaultPermission);
}
```
- example usage
```shell
...
  if (debug.enabled) {
    debug('---AccessRequest---');
    debug(' model %s', this.model);
    debug(' property %s', this.property);
    debug(' accessType %s', this.accessType);
    debug(' permission %s', this.permission);
    debug(' isWildcard() %s', this.isWildcard());
    debug(' isAllowed() %s', this.isAllowed());
  }
};

module.exports.AccessContext = AccessContext;
module.exports.Principal = Principal;
module.exports.AccessRequest = AccessRequest;
...
```

#### <a name="apidoc.element.loopback.ACL.prototype.score"></a>[function <span class="apidocSignatureSpan">loopback.ACL.prototype.</span>score (req)](#apidoc.element.loopback.ACL.prototype.score)
- description and source-code
```javascript
score = function (req) {
  return this.constructor.getMatchingScore(this, req);
}
```
- example usage
```shell
n/a
```



# <a name="apidoc.module.loopback.ACL.settings"></a>[module loopback.ACL.settings](#apidoc.module.loopback.ACL.settings)

#### <a name="apidoc.element.loopback.ACL.settings.base"></a>[function <span class="apidocSignatureSpan">loopback.ACL.settings.</span>base (data, options)](#apidoc.element.loopback.ACL.settings.base)
- description and source-code
```javascript
function ModelConstructor(data, options) {
  if (!(this instanceof ModelConstructor)) {
    return new ModelConstructor(data, options);
  }
  if (ModelClass.settings.unresolved) {
    throw new Error(g.f('Model %s is not defined.', ModelClass.modelName));
  }
  ModelBaseClass.apply(this, arguments);
}
```
- example usage
```shell
n/a
```



# <a name="apidoc.module.loopback.ACL.sharedClass"></a>[module loopback.ACL.sharedClass](#apidoc.module.loopback.ACL.sharedClass)

#### <a name="apidoc.element.loopback.ACL.sharedClass.ctor"></a>[function <span class="apidocSignatureSpan">loopback.ACL.sharedClass.</span>ctor (data, options)](#apidoc.element.loopback.ACL.sharedClass.ctor)
- description and source-code
```javascript
function ModelConstructor(data, options) {
  if (!(this instanceof ModelConstructor)) {
    return new ModelConstructor(data, options);
  }
  if (ModelClass.settings.unresolved) {
    throw new Error(g.f('Model %s is not defined.', ModelClass.modelName));
  }
  ModelBaseClass.apply(this, arguments);
}
```
- example usage
```shell
n/a
```



# <a name="apidoc.module.loopback.ACL.super_"></a>[module loopback.ACL.super_](#apidoc.module.loopback.ACL.super_)

#### <a name="apidoc.element.loopback.ACL.super_.super_"></a>[function <span class="apidocSignatureSpan">loopback.ACL.</span>super_ (data, options)](#apidoc.element.loopback.ACL.super_.super_)
- description and source-code
```javascript
function ModelConstructor(data, options) {
  if (!(this instanceof ModelConstructor)) {
    return new ModelConstructor(data, options);
  }
  if (ModelClass.settings.unresolved) {
    throw new Error(g.f('Model %s is not defined.', ModelClass.modelName));
  }
  ModelBaseClass.apply(this, arguments);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.super_.ValidationError"></a>[function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>ValidationError (obj)](#apidoc.element.loopback.ACL.super_.ValidationError)
- description and source-code
```javascript
function ValidationError(obj) {
  if (!(this instanceof ValidationError)) return new ValidationError(obj);

  this.name = 'ValidationError';

  var context = obj && obj.constructor && obj.constructor.modelName;
  this.message = g.f(
    'The %s instance is not valid. Details: %s.',
      context ? ''' + context + ''' : 'model',
      formatErrors(obj.errors, obj.toJSON()) || '(unknown)'
  );

  this.statusCode = 422;

  this.details = {
    context: context,
    codes: obj.errors && obj.errors.codes,
    messages: obj.errors,
  };

  if (Error.captureStackTrace) {
    // V8 (Chrome, Opera, Node)
    Error.captureStackTrace(this, this.constructor);
  } else if (errorHasStackProperty) {
    // Firefox
    this.stack = (new Error).stack;
  }
  // Safari and PhantomJS initializes 'error.stack' on throw
  // Internet Explorer does not support 'error.stack'
}
```
- example usage
```shell
...
  return save();
}

inst.isValid(function(valid) {
  if (valid) {
    save();
  } else {
    var err = new Model.ValidationError(inst);
    // throws option is dangerous for async usage
    if (options.throws) {
      throw err;
    }
    callback(err, inst);
  }
});
...
```

#### <a name="apidoc.element.loopback.ACL.super_._ACL"></a>[function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>_ACL (ACL)](#apidoc.element.loopback.ACL.super_._ACL)
- description and source-code
```javascript
function getACL(ACL) {
  var registry = this.registry;
  if (ACL !== undefined) {
    // The function is used as a setter
    _aclModel = ACL;
  }
  if (_aclModel) {
    return _aclModel;
  }
  var aclModel = registry.getModel('ACL');
  _aclModel = registry.getModelByType(aclModel);
  return _aclModel;
}
```
- example usage
```shell
...
   * @param {String|Error} err The error object.
   * @param {Boolean} allowed True if the request is allowed; false otherwise.
   */

  Model.checkAccess = function(token, modelId, sharedMethod, ctx, callback) {
var ANONYMOUS = registry.getModel('AccessToken').ANONYMOUS;
token = token || ANONYMOUS;
var aclModel = Model._ACL();

ctx = ctx || {};
if (typeof ctx === 'function' && callback === undefined) {
  callback = ctx;
  ctx = {};
}
...
```

#### <a name="apidoc.element.loopback.ACL.super_._defineChangeModel"></a>[function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>_defineChangeModel ()](#apidoc.element.loopback.ACL.super_._defineChangeModel)
- description and source-code
```javascript
_defineChangeModel = function () {
  var BaseChangeModel = this.registry.getModel('Change');
  assert(BaseChangeModel,
    'Change model must be defined before enabling change replication');

  const additionalChangeModelProperties =
    this.settings.additionalChangeModelProperties || {};

  this.Change = BaseChangeModel.extend(this.modelName + '-change',
    additionalChangeModelProperties,
    {trackModel: this}
  );

  if (this.dataSource) {
    attachRelatedModels(this);
  }

  // Re-attach related models whenever our datasource is changed.
  var self = this;
  this.on('dataSourceAttached', function() {
    attachRelatedModels(self);
  });

  return this.Change;

  function attachRelatedModels(self) {
    self.Change.attachTo(self.dataSource);
    self.Change.getCheckpointModel().attachTo(self.dataSource);
  }
}
```
- example usage
```shell
...
// call Model.setup first
Model.setup.call(this);

var PersistedModel = this;

// enable change tracking (usually for replication)
if (this.settings.trackChanges) {
  PersistedModel._defineChangeModel();
  PersistedModel.once('dataSourceAttached', function() {
    PersistedModel.enableChangeTracking();
  });
} else if (this.settings.enableRemoteReplication) {
  PersistedModel._defineChangeModel();
}
...
```

#### <a name="apidoc.element.loopback.ACL.super_._getAccessTypeForMethod"></a>[function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>_getAccessTypeForMethod (method)](#apidoc.element.loopback.ACL.super_._getAccessTypeForMethod)
- description and source-code
```javascript
_getAccessTypeForMethod = function (method) {
  if (typeof method === 'string') {
    method = {name: method};
  }
  assert(
    typeof method === 'object',
    'method is a required argument and must be a RemoteMethod object'
  );

  var ACL = Model._ACL();

  // Check the explicit setting of accessType
  if (method.accessType) {
    assert(method.accessType === ACL.READ ||
      method.accessType === ACL.REPLICATE ||
      method.accessType === ACL.WRITE ||
      method.accessType === ACL.EXECUTE, 'invalid accessType ' +
      method.accessType +
      '. It must be "READ", "REPLICATE", "WRITE", or "EXECUTE"');
    return method.accessType;
  }

  // Default GET requests to READ
  var verb = method.http && method.http.verb;
  if (typeof verb === 'string') {
    verb = verb.toUpperCase();
  }
  if (verb === 'GET' || verb === 'HEAD') {
    return ACL.READ;
  }

  switch (method.name) {
    case 'create':
      return ACL.WRITE;
    case 'updateOrCreate':
      return ACL.WRITE;
    case 'upsertWithWhere':
      return ACL.WRITE;
    case 'upsert':
      return ACL.WRITE;
    case 'exists':
      return ACL.READ;
    case 'findById':
      return ACL.READ;
    case 'find':
      return ACL.READ;
    case 'findOne':
      return ACL.READ;
    case 'destroyById':
      return ACL.WRITE;
    case 'deleteById':
      return ACL.WRITE;
    case 'removeById':
      return ACL.WRITE;
    case 'count':
      return ACL.READ;
    default:
      return ACL.EXECUTE;
  }
}
```
- example usage
```shell
...
if (this.sharedMethod) {
  this.methodNames = this.sharedMethod.aliases.concat([this.sharedMethod.name]);
} else {
  this.methodNames = [];
}

if (this.sharedMethod) {
  this.accessType = this.model._getAccessTypeForMethod(this.sharedMethod);
}

this.accessType = context.accessType || AccessContext.ALL;
assert(loopback.AccessToken,
  'AccessToken model must be defined before AccessContext model');
this.accessToken = context.accessToken || loopback.AccessToken.ANONYMOUS;
...
```

#### <a name="apidoc.element.loopback.ACL.super_._notifyBaseObservers"></a>[function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>_notifyBaseObservers (operation, context, callback)](#apidoc.element.loopback.ACL.super_._notifyBaseObservers)
- description and source-code
```javascript
_notifyBaseObservers = function (operation, context, callback) {
  if (this.base && this.base.notifyObserversOf)
    this.base.notifyObserversOf(operation, context, callback);
  else
    callback();
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.super_._runWhenAttachedToApp"></a>[function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>_runWhenAttachedToApp (fn)](#apidoc.element.loopback.ACL.super_._runWhenAttachedToApp)
- description and source-code
```javascript
_runWhenAttachedToApp = function (fn) {
  if (this.app) return fn(this.app);
  var self = this;
  self.once('attached', function() {
    fn(self.app);
  });
}
```
- example usage
```shell
...
  ModelCtor,
  remotingOptions
);

// before remote hook
ModelCtor.beforeRemote = function(name, fn) {
  var className = this.modelName;
  this._runWhenAttachedToApp(function(app) {
    var remotes = app.remotes();
    remotes.before(className + '.' + name, function(ctx, next) {
      return fn(ctx, ctx.result, next);
    });
  });
};
...
```

#### <a name="apidoc.element.loopback.ACL.super_.addListener"></a>[function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>addListener ()](#apidoc.element.loopback.ACL.super_.addListener)
- description and source-code
```javascript
addListener = function () { [native code] }
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.super_.afterRemote"></a>[function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>afterRemote (name, fn)](#apidoc.element.loopback.ACL.super_.afterRemote)
- description and source-code
```javascript
afterRemote = function (name, fn) {
  var className = this.modelName;
  this._runWhenAttachedToApp(function(app) {
    var remotes = app.remotes();
    remotes.after(className + '.' + name, function(ctx, next) {
      return fn(ctx, ctx.result, next);
    });
  });
}
```
- example usage
```shell
...
        var m = method.isStatic ? method.name : 'prototype.' + method.name;
        if (before && before[delegateTo.name]) {
          self.beforeRemote(m, function(ctx, result, next) {
            before[delegateTo.name]._listeners.call(null, ctx, next);
          });
        }
        if (after && after[delegateTo.name]) {
          self.afterRemote(m, function(ctx, result, next) {
            after[delegateTo.name]._listeners.call(null, ctx, next);
          });
        }
      }
    });
  });
} else {
...
```

#### <a name="apidoc.element.loopback.ACL.super_.afterRemoteError"></a>[function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>afterRemoteError (name, fn)](#apidoc.element.loopback.ACL.super_.afterRemoteError)
- description and source-code
```javascript
afterRemoteError = function (name, fn) {
  var className = this.modelName;
  this._runWhenAttachedToApp(function(app) {
    var remotes = app.remotes();
    remotes.afterError(className + '.' + name, fn);
  });
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.super_.attachTo"></a>[function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>attachTo (dataSource)](#apidoc.element.loopback.ACL.super_.attachTo)
- description and source-code
```javascript
attachTo = function (dataSource) {
  dataSource.attach(this);
}
```
- example usage
```shell
...
  this.on('dataSourceAttached', function() {
    attachRelatedModels(self);
  });

  return this.Change;

  function attachRelatedModels(self) {
    self.Change.attachTo(self.dataSource);
    self.Change.getCheckpointModel().attachTo(self.dataSource);
  }
};

PersistedModel.rectifyAllChanges = function(callback) {
  this.getChangeModel().rectifyAll(callback);
};
...
```

#### <a name="apidoc.element.loopback.ACL.super_.beforeRemote"></a>[function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>beforeRemote (name, fn)](#apidoc.element.loopback.ACL.super_.beforeRemote)
- description and source-code
```javascript
beforeRemote = function (name, fn) {
  var className = this.modelName;
  this._runWhenAttachedToApp(function(app) {
    var remotes = app.remotes();
    remotes.before(className + '.' + name, function(ctx, next) {
      return fn(ctx, ctx.result, next);
    });
  });
}
```
- example usage
```shell
...
        sharedClass.methods().forEach(function(method) {
var delegateTo = method.rest && method.rest.delegateTo;
if (delegateTo && delegateTo.ctor == relation.modelTo) {
  var before = method.isStatic ? beforeListeners : beforeListeners['prototype'];
  var after = method.isStatic ? afterListeners : afterListeners['prototype'];
  var m = method.isStatic ? method.name : 'prototype.' + method.name;
  if (before && before[delegateTo.name]) {
    self.beforeRemote(m, function(ctx, result, next) {
      before[delegateTo.name]._listeners.call(null, ctx, next);
    });
  }
  if (after && after[delegateTo.name]) {
    self.afterRemote(m, function(ctx, result, next) {
      after[delegateTo.name]._listeners.call(null, ctx, next);
    });
...
```

#### <a name="apidoc.element.loopback.ACL.super_.belongsToRemoting"></a>[function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>belongsToRemoting (relationName, relation, define)](#apidoc.element.loopback.ACL.super_.belongsToRemoting)
- description and source-code
```javascript
belongsToRemoting = function (relationName, relation, define) {
  var modelName = relation.modelTo && relation.modelTo.modelName;
  modelName = modelName || 'PersistedModel';
  var fn = this.prototype[relationName];
  var pathName = (relation.options.http && relation.options.http.path) || relationName;
  define('__get__' + relationName, {
    isStatic: false,
    http: {verb: 'get', path: '/' + pathName},
    accepts: [
      {arg: 'refresh', type: 'boolean', http: {source: 'query'}},
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    accessType: 'READ',
    description: format('Fetches belongsTo relation %s.', relationName),
    returns: {arg: relationName, type: modelName, root: true},
  }, fn);
}
```
- example usage
```shell
...
  defineRaw(name, options, fn);
};

// get the relations
for (var relationName in relations) {
  var relation = relations[relationName];
  if (relation.type === 'belongsTo') {
    ModelCtor.belongsToRemoting(relationName, relation, define);
  } else if (
    relation.type === 'hasOne' ||
    relation.type === 'embedsOne'
  ) {
    ModelCtor.hasOneRemoting(relationName, relation, define);
  } else if (
    relation.type === 'hasMany' ||
...
```

#### <a name="apidoc.element.loopback.ACL.super_.bulkUpdate"></a>[function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>bulkUpdate (updates, options, callback)](#apidoc.element.loopback.ACL.super_.bulkUpdate)
- description and source-code
```javascript
bulkUpdate = function (updates, options, callback) {
  var tasks = [];
  var Model = this;
  var Change = this.getChangeModel();
  var conflicts = [];

  var lastArg = arguments[arguments.length - 1];

  if (typeof lastArg === 'function' && arguments.length > 1) {
    callback = lastArg;
  }

  if (typeof options === 'function') {
    options = {};
  }

  options = options || {};

  buildLookupOfAffectedModelData(Model, updates, function(err, currentMap) {
    if (err) return callback(err);

    updates.forEach(function(update) {
      var id = update.change.modelId;
      var current = currentMap[id];
      switch (update.type) {
        case Change.UPDATE:
          tasks.push(function(cb) {
            applyUpdate(Model, id, current, update.data, update.change, conflicts, options, cb);
          });
          break;

        case Change.CREATE:
          tasks.push(function(cb) {
            applyCreate(Model, id, current, update.data, update.change, conflicts, options, cb);
          });
          break;
        case Change.DELETE:
          tasks.push(function(cb) {
            applyDelete(Model, id, current, update.change, conflicts, options, cb);
          });
          break;
      }
    });

    async.parallel(tasks, function(err) {
      if (err) return callback(err);
      if (conflicts.length) {
        err = new Error(g.f('Conflict'));
        err.statusCode = 409;
        err.details = {conflicts: conflicts};
        return callback(err);
      }
      callback();
    });
  });
}
```
- example usage
```shell
...
    function bulkUpdate(_updates, cb) {
debug('\tstarting bulk update');
updates = _updates;
utils.uploadInChunks(
  updates,
  replicationChunkSize,
  function(smallArray, chunkCallback) {
    return targetModel.bulkUpdate(smallArray, options, function(err) {
      // bulk update is a special case where we want to process all chunks and aggregate all errors
      chunkCallback(null, err);
    });
  },
  function(notUsed, err) {
    var conflicts = err && err.details && err.details.conflicts;
    if (conflicts && err.statusCode == 409) {
...
```

#### <a name="apidoc.element.loopback.ACL.super_.changes"></a>[function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>changes (since, filter, callback)](#apidoc.element.loopback.ACL.super_.changes)
- description and source-code
```javascript
changes = function (since, filter, callback) {
  if (typeof since === 'function') {
    filter = {};
    callback = since;
    since = -1;
  }
  if (typeof filter === 'function') {
    callback = filter;
    since = -1;
    filter = {};
  }

  var idName = this.dataSource.idName(this.modelName);
  var Change = this.getChangeModel();
  var model = this;
  const changeFilter = this.createChangeFilter(since, filter);

  filter = filter || {};
  filter.fields = {};
  filter.where = filter.where || {};
  filter.fields[idName] = true;

  // TODO(ritch) this whole thing could be optimized a bit more
  Change.find(changeFilter, function(err, changes) {
    if (err) return callback(err);
    if (!Array.isArray(changes) || changes.length === 0) return callback(null, []);
    var ids = changes.map(function(change) {
      return change.getModelId();
    });
    filter.where[idName] = {inq: ids};
    model.find(filter, function(err, models) {
      if (err) return callback(err);
      var modelIds = models.map(function(m) {
        return m[idName].toString();
      });
      callback(null, changes.filter(function(ch) {
        if (ch.type() === Change.DELETE) return true;
        return modelIds.indexOf(ch.modelId) > -1;
      }));
    });
  });
}
```
- example usage
```shell
...
    async.waterfall(tasks, done);

    function getSourceChanges(cb) {
utils.downloadInChunks(
  options.filter,
  replicationChunkSize,
  function(filter, pagingCallback) {
    sourceModel.changes(since.source, filter, pagingCallback);
  },
  debug.enabled ? log : cb);

function log(err, result) {
  if (err) return cb(err);
  debug('\tusing source changes');
  result.forEach(function(it) { debug('\t\t%j', it); });
...
```

#### <a name="apidoc.element.loopback.ACL.super_.checkAccess"></a>[function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>checkAccess (token, modelId, sharedMethod, ctx, callback)](#apidoc.element.loopback.ACL.super_.checkAccess)
- description and source-code
```javascript
checkAccess = function (token, modelId, sharedMethod, ctx, callback) {
  var ANONYMOUS = registry.getModel('AccessToken').ANONYMOUS;
  token = token || ANONYMOUS;
  var aclModel = Model._ACL();

  ctx = ctx || {};
  if (typeof ctx === 'function' && callback === undefined) {
    callback = ctx;
    ctx = {};
  }

  aclModel.checkAccessForContext({
    accessToken: token,
    model: this,
    property: sharedMethod.name,
    method: sharedMethod.name,
    sharedMethod: sharedMethod,
    modelId: modelId,
    accessType: this._getAccessTypeForMethod(sharedMethod),
    remotingContext: ctx,
  }, function(err, accessRequest) {
    if (err) return callback(err);
    callback(null, accessRequest.isAllowed());
  });
}
```
- example usage
```shell
...
var modelSettings = Model.settings || {};
var errStatusCode = modelSettings.aclErrorStatus || app.get('aclErrorStatus') || 401;
if (!req.accessToken) {
  errStatusCode = 401;
}

if (Model.checkAccess) {
  Model.checkAccess(
    req.accessToken,
    modelId,
    method,
    ctx,
    function(err, allowed) {
      if (err) {
        console.log(err);
...
```

#### <a name="apidoc.element.loopback.ACL.super_.checkpoint"></a>[function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>checkpoint (cb)](#apidoc.element.loopback.ACL.super_.checkpoint)
- description and source-code
```javascript
checkpoint = function (cb) {
  var Checkpoint = this.getChangeModel().getCheckpointModel();
  Checkpoint.bumpLastSeq(cb);
}
```
- example usage
```shell
...
      }
      cb(err);
    });
}

function checkpoints() {
  var cb = arguments[arguments.length - 1];
  sourceModel.checkpoint(function(err, source) {
    if (err) return cb(err);
    newSourceCp = source.seq;
    targetModel.checkpoint(function(err, target) {
      if (err) return cb(err);
      newTargetCp = target.seq;
      debug('\tcreated checkpoints');
      debug('\t\t%s for source model %s', newSourceCp, sourceModel.modelName);
...
```

#### <a name="apidoc.element.loopback.ACL.super_.clearObservers"></a>[function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>clearObservers (operation)](#apidoc.element.loopback.ACL.super_.clearObservers)
- description and source-code
```javascript
clearObservers = function (operation) {
  if (!(this._observers && this._observers[operation])) return;

  this._observers[operation].length = 0;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.super_.count"></a>[function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>count (where, cb)](#apidoc.element.loopback.ACL.super_.count)
- description and source-code
```javascript
count = function (where, cb) {
  throwNotAttached(this.modelName, 'count');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.super_.create"></a>[function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>create (data, callback)](#apidoc.element.loopback.ACL.super_.create)
- description and source-code
```javascript
create = function (data, callback) {
  throwNotAttached(this.modelName, 'create');
}
```
- example usage
```shell
...
 } else {
   var options = {};

   if (this.get) {
     options = this.get('remoting');
   }

   return (this._remotes = RemoteObjects.create(options));
 }
};

/*!
* Remove a route by reference.
*/
...
```

#### <a name="apidoc.element.loopback.ACL.super_.createChangeFilter"></a>[function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>createChangeFilter (since, modelFilter)](#apidoc.element.loopback.ACL.super_.createChangeFilter)
- description and source-code
```javascript
createChangeFilter = function (since, modelFilter) {
  return {
    where: {
      checkpoint: {gte: since},
      modelName: this.modelName,
    },
  };
}
```
- example usage
```shell
...
  since = -1;
  filter = {};
}

var idName = this.dataSource.idName(this.modelName);
var Change = this.getChangeModel();
var model = this;
const changeFilter = this.createChangeFilter(since, filter);

filter = filter || {};
filter.fields = {};
filter.where = filter.where || {};
filter.fields[idName] = true;

// TODO(ritch) this whole thing could be optimized a bit more
...
```

#### <a name="apidoc.element.loopback.ACL.super_.createChangeStream"></a>[function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>createChangeStream (options, cb)](#apidoc.element.loopback.ACL.super_.createChangeStream)
- description and source-code
```javascript
createChangeStream = function (options, cb) {
  if (typeof options === 'function') {
    cb = options;
    options = undefined;
  }

  var idName = this.getIdName();
  var Model = this;
  var changes = new PassThrough({objectMode: true});
  var writeable = true;

  changes.destroy = function() {
    changes.removeAllListeners('error');
    changes.removeAllListeners('end');
    writeable = false;
    changes = null;
  };

  changes.on('error', function() {
    writeable = false;
  });
  changes.on('end', function() {
    writeable = false;
  });

  process.nextTick(function() {
    cb(null, changes);
  });

  Model.observe('after save', createChangeHandler('save'));
  Model.observe('after delete', createChangeHandler('delete'));

  function createChangeHandler(type) {
    return function(ctx, next) {
      // since it might have set to null via destroy
      if (!changes) {
        return next();
      }

      var where = ctx.where;
      var data = ctx.instance || ctx.data;
      var whereId = where && where[idName];

      // the data includes the id
      // or the where includes the id
      var target;

      if (data && (data[idName] || data[idName] === 0)) {
        target = data[idName];
      } else if (where && (where[idName] || where[idName] === 0)) {
        target = where[idName];
      }

      var hasTarget = target === 0 || !!target;

      var change = {
        target: target,
        where: where,
        data: data,
      };

      switch (type) {
        case 'save':
          if (ctx.isNewInstance === undefined) {
            change.type = hasTarget ? 'update' : 'create';
          } else {
            change.type = ctx.isNewInstance ? 'create' : 'update';
          }

          break;
        case 'delete':
          change.type = 'remove';
          break;
      }

      // TODO(ritch) this is ugly... maybe a ReadableStream would be better
      if (writeable) {
        changes.write(change);
      }

      next();
    };
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.super_.createOptionsFromRemotingContext"></a>[function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>createOptionsFromRemotingContext (ctx)](#apidoc.element.loopback.ACL.super_.createOptionsFromRemotingContext)
- description and source-code
```javascript
createOptionsFromRemotingContext = function (ctx) {
  return {
    accessToken: ctx.req.accessToken,
  };
}
```
- example usage
```shell
...
  var EMPTY_OPTIONS = {};
  var ModelCtor = ctx.method && ctx.method.ctor;
  if (!ModelCtor)
    return EMPTY_OPTIONS;
  if (typeof ModelCtor.createOptionsFromRemotingContext !== 'function')
    return EMPTY_OPTIONS;
  debug('createOptionsFromRemotingContext for %s', ctx.method.stringName);
  return ModelCtor.createOptionsFromRemotingContext(ctx);
}

/**
 * Disable remote invocation for the method with the given name.
 *
 * @param {String} name The name of the method.
 * @param {Boolean} isStatic Is the method static (eg. 'MyModel.myMethod')? Pass
...
```

#### <a name="apidoc.element.loopback.ACL.super_.createUpdates"></a>[function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>createUpdates (deltas, cb)](#apidoc.element.loopback.ACL.super_.createUpdates)
- description and source-code
```javascript
createUpdates = function (deltas, cb) {
  var Change = this.getChangeModel();
  var updates = [];
  var Model = this;
  var tasks = [];

  deltas.forEach(function(change) {
    change = new Change(change);
    var type = change.type();
    var update = {type: type, change: change};
    switch (type) {
      case Change.CREATE:
      case Change.UPDATE:
        tasks.push(function(cb) {
          Model.findById(change.modelId, function(err, inst) {
            if (err) return cb(err);
            if (!inst) {
              return cb &&
                cb(new Error(g.f('Missing data for change: %s', change.modelId)));
            }
            if (inst.toObject) {
              update.data = inst.toObject();
            } else {
              update.data = inst;
            }
            updates.push(update);
            cb();
          });
        });
        break;
      case Change.DELETE:
        updates.push(update);
        break;
    }
  });

  async.parallel(tasks, function(err) {
    if (err) return cb(err);
    cb(null, updates);
  });
}
```
- example usage
```shell
...

  if (diff && diff.deltas && diff.deltas.length) {
    debug('\tbuilding a list of updates');
    utils.uploadInChunks(
      diff.deltas,
      replicationChunkSize,
      function(smallArray, chunkCallback) {
        return sourceModel.createUpdates(smallArray, chunkCallback);
      },
      cb);
  } else {
    // nothing to replicate
    done();
  }
}
...
```

#### <a name="apidoc.element.loopback.ACL.super_.currentCheckpoint"></a>[function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>currentCheckpoint (cb)](#apidoc.element.loopback.ACL.super_.currentCheckpoint)
- description and source-code
```javascript
currentCheckpoint = function (cb) {
  var Checkpoint = this.getChangeModel().getCheckpointModel();
  Checkpoint.current(cb);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.super_.defineProperty"></a>[function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>defineProperty (prop, params)](#apidoc.element.loopback.ACL.super_.defineProperty)
- description and source-code
```javascript
defineProperty = function (prop, params) {
  if (this.dataSource) {
    this.dataSource.defineProperty(this.modelName, prop, params);
  } else {
    this.modelBuilder.defineProperty(this.modelName, prop, params);
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.super_.deleteAll"></a>[function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>deleteAll (where, cb)](#apidoc.element.loopback.ACL.super_.deleteAll)
- description and source-code
```javascript
function destroyAll(where, cb) {
  throwNotAttached(this.modelName, 'destroyAll');
}
```
- example usage
```shell
...
  Model.modelName, id);
debug('\tExpected revision: %s', change.rev);
debug('\tActual revision:   %s', rev);
conflicts.push(change);
return Change.rectifyModelChanges(Model.modelName, [id], cb);
    }

    Model.deleteAll(current.toObject(), options, function(err, result) {
if (err) return cb(err);

var count = result && result.count;
switch (count) {
  case 1:
    // The happy path, exactly one record was updated
    return cb();
...
```

#### <a name="apidoc.element.loopback.ACL.super_.deleteById"></a>[function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>deleteById (id, cb)](#apidoc.element.loopback.ACL.super_.deleteById)
- description and source-code
```javascript
function deleteById(id, cb) {
  throwNotAttached(this.modelName, 'deleteById');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.super_.destroyAll"></a>[function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>destroyAll (where, cb)](#apidoc.element.loopback.ACL.super_.destroyAll)
- description and source-code
```javascript
function destroyAll(where, cb) {
  throwNotAttached(this.modelName, 'destroyAll');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.super_.destroyById"></a>[function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>destroyById (id, cb)](#apidoc.element.loopback.ACL.super_.destroyById)
- description and source-code
```javascript
function deleteById(id, cb) {
  throwNotAttached(this.modelName, 'deleteById');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.super_.diff"></a>[function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>diff (since, remoteChanges, callback)](#apidoc.element.loopback.ACL.super_.diff)
- description and source-code
```javascript
diff = function (since, remoteChanges, callback) {
  var Change = this.getChangeModel();
  Change.diff(this.modelName, since, remoteChanges, callback);
}
```
- example usage
```shell
...
    },
  });
};

/**
 * Get a set of deltas and conflicts since the given checkpoint.
 *
 * See [Change.diff()](#change-diff) for details.
 *
 * @param  {Number}  since  Find deltas since this checkpoint.
 * @param  {Array}  remoteChanges  An array of change objects.
 * @callback {Function} callback Callback function called with '(err, result)' arguments.  Required.
 * @param {Error} err Error object; see [Error object](http://loopback.io/doc/en/lb2/Error-object.html).
 * @param {Object} result Object with 'deltas' and 'conflicts' properties; see [Change.diff()](#change-diff) for details.
 */
...
```

#### <a name="apidoc.element.loopback.ACL.super_.disableRemoteMethod"></a>[function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>disableRemoteMethod (name, isStatic)](#apidoc.element.loopback.ACL.super_.disableRemoteMethod)
- description and source-code
```javascript
disableRemoteMethod = function (name, isStatic) {
  deprecated('Model.disableRemoteMethod is deprecated. ' +
    'Use Model.disableRemoteMethodByName instead.');
  var key = this.sharedClass.getKeyFromMethodNameAndTarget(name, isStatic);
  this.sharedClass.disableMethodByName(key);
  this.emit('remoteMethodDisabled', this.sharedClass, key);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.super_.disableRemoteMethodByName"></a>[function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>disableRemoteMethodByName (name)](#apidoc.element.loopback.ACL.super_.disableRemoteMethodByName)
- description and source-code
```javascript
disableRemoteMethodByName = function (name) {
  this.sharedClass.disableMethodByName(name);
  this.emit('remoteMethodDisabled', this.sharedClass, name);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.super_.emit"></a>[function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>emit ()](#apidoc.element.loopback.ACL.super_.emit)
- description and source-code
```javascript
emit = function () { [native code] }
```
- example usage
```shell
...
    return new Model(data);
  });
  this.remotes().addClass(Model.sharedClass);
  if (Model.settings.trackChanges && Model.Change) {
    this.remotes().addClass(Model.Change.sharedClass);
  }
  clearHandlerCache(this);
  this.emit('modelRemoted', Model.sharedClass);
}

var self = this;
Model.on('remoteMethodDisabled', function(model, methodName) {
  self.emit('remoteMethodDisabled', model, methodName);
});
Model.on('remoteMethodAdded', function(model) {
...
```

#### <a name="apidoc.element.loopback.ACL.super_.enableChangeTracking"></a>[function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>enableChangeTracking ()](#apidoc.element.loopback.ACL.super_.enableChangeTracking)
- description and source-code
```javascript
enableChangeTracking = function () {
  var Model = this;
  var Change = this.Change || this._defineChangeModel();
  var cleanupInterval = Model.settings.changeCleanupInterval || 30000;

  assert(this.dataSource, 'Cannot enableChangeTracking(): ' + this.modelName +
    ' is not attached to a dataSource');

  var idName = this.getIdName();
  var idProp = this.definition.properties[idName];
  var idType = idProp && idProp.type;
  var idDefn = idProp && idProp.defaultFn;
  if (idType !== String || !(idDefn === 'uuid' || idDefn === 'guid')) {
    deprecated('The model ' + this.modelName + ' is tracking changes, ' +
      'which requires a string id with GUID/UUID default value.');
  }

  Model.observe('after save', rectifyOnSave);

  Model.observe('after delete', rectifyOnDelete);

  // Only run if the run time is server
  // Can switch off cleanup by setting the interval to -1
  if (runtime.isServer && cleanupInterval > 0) {
    // initial cleanup
    cleanup();

    // cleanup
    setInterval(cleanup, cleanupInterval);
  }

  function cleanup() {
    Model.rectifyAllChanges(function(err) {
      if (err) {
        Model.handleChangeError(err, 'cleanup');
      }
    });
  }
}
```
- example usage
```shell
...

  var PersistedModel = this;

  // enable change tracking (usually for replication)
  if (this.settings.trackChanges) {
    PersistedModel._defineChangeModel();
    PersistedModel.once('dataSourceAttached', function() {
      PersistedModel.enableChangeTracking();
    });
  } else if (this.settings.enableRemoteReplication) {
    PersistedModel._defineChangeModel();
  }

  PersistedModel.setupRemoting();
};
...
```

#### <a name="apidoc.element.loopback.ACL.super_.eventNames"></a>[function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>eventNames ()](#apidoc.element.loopback.ACL.super_.eventNames)
- description and source-code
```javascript
eventNames = function () { [native code] }
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.super_.exists"></a>[function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>exists (id, cb)](#apidoc.element.loopback.ACL.super_.exists)
- description and source-code
```javascript
function exists(id, cb) {
  throwNotAttached(this.modelName, 'exists');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.super_.extend"></a>[function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>extend (className, subclassProperties, subclassSettings)](#apidoc.element.loopback.ACL.super_.extend)
- description and source-code
```javascript
extend = function (className, subclassProperties, subclassSettings) {
  var properties = ModelClass.definition.properties;
  var settings = ModelClass.definition.settings;

  subclassProperties = subclassProperties || {};
  subclassSettings = subclassSettings || {};

  // Check if subclass redefines the ids
  var idFound = false;
  for (var k in subclassProperties) {
    if (subclassProperties[k] && subclassProperties[k].id) {
      idFound = true;
      break;
    }
  }

  // Merging the properties
  var keys = Object.keys(properties);
  for (var i = 0, n = keys.length; i < n; i++) {
    var key = keys[i];

    if (idFound && properties[key].id) {
      // don't inherit id properties
      continue;
    }
    if (subclassProperties[key] === undefined) {
      var baseProp = properties[key];
      var basePropCopy = baseProp;
      if (baseProp && typeof baseProp === 'object') {
        // Deep clone the base prop
        basePropCopy = mergeSettings(null, baseProp);
      }
      subclassProperties[key] = basePropCopy;
    }
  }

  // Merge the settings
  var originalSubclassSettings = subclassSettings;
  subclassSettings = mergeSettings(settings, subclassSettings);

  // Ensure 'base' is not inherited. Note we don't have to delete 'super'
  // as that is removed from settings by modelBuilder.define and thus
  // it is never inherited
  if (!originalSubclassSettings.base) {
    subclassSettings.base = ModelClass;
  }

  // Define the subclass
  var subClass = modelBuilder.define(className, subclassProperties, subclassSettings, ModelClass);

  // Calling the setup function
  if (typeof subClass.setup === 'function') {
    subClass.setup.call(subClass);
  }

  return subClass;
}
```
- example usage
```shell
...
* The base class for **all models**.
*
* **Inheriting from 'Model'**
*
* '''js
* var properties = {...};
* var options = {...};
* var MyModel = loopback.Model.extend('MyModel', properties, options);
* '''
*
* **Options**
*
*  - 'trackChanges' - If true, changes to the model will be tracked. **Required
* for replication.**
*
...
```

#### <a name="apidoc.element.loopback.ACL.super_.find"></a>[function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>find (filter, cb)](#apidoc.element.loopback.ACL.super_.find)
- description and source-code
```javascript
function find(filter, cb) {
  throwNotAttached(this.modelName, 'find');
}
```
- example usage
```shell
...

filter = filter || {};
filter.fields = {};
filter.where = filter.where || {};
filter.fields[idName] = true;

// TODO(ritch) this whole thing could be optimized a bit more
Change.find(changeFilter, function(err, changes) {
  if (err) return callback(err);
  if (!Array.isArray(changes) || changes.length === 0) return callback(null, []);
  var ids = changes.map(function(change) {
    return change.getModelId();
  });
  filter.where[idName] = {inq: ids};
  model.find(filter, function(err, models) {
...
```

#### <a name="apidoc.element.loopback.ACL.super_.findById"></a>[function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>findById (id, filter, cb)](#apidoc.element.loopback.ACL.super_.findById)
- description and source-code
```javascript
function findById(id, filter, cb) {
  throwNotAttached(this.modelName, 'findById');
}
```
- example usage
```shell
...
  var model = new ModelCtor(data);
  model.id = id;
  fn(null, model);
} else if (data) {
  fn(null, new ModelCtor(data));
} else if (id) {
  var filter = {};
  ModelCtor.findById(id, filter, options, function(err, model) {
    if (err) {
      fn(err);
    } else if (model) {
      fn(null, model);
    } else {
      err = new Error(g.f('could not find a model with apidoc.element.loopback.ACL.super_.findById %s', id));
      err.statusCode = 404;
...
```

#### <a name="apidoc.element.loopback.ACL.super_.findLastChange"></a>[function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>findLastChange (id, cb)](#apidoc.element.loopback.ACL.super_.findLastChange)
- description and source-code
```javascript
findLastChange = function (id, cb) {
  var Change = this.getChangeModel();
  Change.findOne({where: {modelId: id}}, cb);
}
```
- example usage
```shell
...
PersistedModel.findLastChange = function(id, cb) {
  var Change = this.getChangeModel();
  Change.findOne({where: {modelId: id}}, cb);
};

PersistedModel.updateLastChange = function(id, data, cb) {
  var self = this;
  this.findLastChange(id, function(err, inst) {
    if (err) return cb(err);
    if (!inst) {
      err = new Error(g.f('No change record found for %s with id %s',
        self.modelName, id));
      err.statusCode = 404;
      return cb(err);
    }
...
```

#### <a name="apidoc.element.loopback.ACL.super_.findOne"></a>[function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>findOne (filter, cb)](#apidoc.element.loopback.ACL.super_.findOne)
- description and source-code
```javascript
function findOne(filter, cb) {
  throwNotAttached(this.modelName, 'findOne');
}
```
- example usage
```shell
...
PersistedModel.rectifyChange = function(id, callback) {
  var Change = this.getChangeModel();
  Change.rectifyModelChanges(this.modelName, [id], callback);
};

PersistedModel.findLastChange = function(id, cb) {
  var Change = this.getChangeModel();
  Change.findOne({where: {modelId: id}}, cb);
};

PersistedModel.updateLastChange = function(id, data, cb) {
  var self = this;
  this.findLastChange(id, function(err, inst) {
    if (err) return cb(err);
    if (!inst) {
...
```

#### <a name="apidoc.element.loopback.ACL.super_.findOrCreate"></a>[function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>findOrCreate (query, data, callback)](#apidoc.element.loopback.ACL.super_.findOrCreate)
- description and source-code
```javascript
function findOrCreate(query, data, callback) {
  throwNotAttached(this.modelName, 'findOrCreate');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.super_.forEachProperty"></a>[function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>forEachProperty (cb)](#apidoc.element.loopback.ACL.super_.forEachProperty)
- description and source-code
```javascript
forEachProperty = function (cb) {
  var props = ModelClass.definition.properties;
  var keys = Object.keys(props);
  for (var i = 0, n = keys.length; i < n; i++) {
    cb(keys[i], props[keys[i]]);
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.super_.getApp"></a>[function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>getApp (callback)](#apidoc.element.loopback.ACL.super_.getApp)
- description and source-code
```javascript
getApp = function (callback) {
  var self = this;
  self._runWhenAttachedToApp(function(app) {
    assert(self.app);
    assert.equal(app, self.app);
    callback(null, app);
  });
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.super_.getChangeModel"></a>[function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>getChangeModel ()](#apidoc.element.loopback.ACL.super_.getChangeModel)
- description and source-code
```javascript
getChangeModel = function () {
  var changeModel = this.Change;
  var isSetup = changeModel && changeModel.dataSource;

  assert(isSetup, 'Cannot get a setup Change model for ' + this.modelName);

  return changeModel;
}
```
- example usage
```shell
...
 * @param  {Array}  remoteChanges  An array of change objects.
 * @callback {Function} callback Callback function called with '(err, result)' arguments.  Required.
 * @param {Error} err Error object; see [Error object](http://loopback.io/doc/en/lb2/Error-object.html).
 * @param {Object} result Object with 'deltas' and 'conflicts' properties; see [Change.diff()](#change-diff) for details.
 */

PersistedModel.diff = function(since, remoteChanges, callback) {
  var Change = this.getChangeModel();
  Change.diff(this.modelName, since, remoteChanges, callback);
};

/**
 * Get the changes to a model since the specified checkpoint. Provide a filter object
 * to reduce the number of results returned.
 * @param  {Number}   since    Return only changes since this checkpoint.
...
```

#### <a name="apidoc.element.loopback.ACL.super_.getDataSource"></a>[function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>getDataSource ()](#apidoc.element.loopback.ACL.super_.getDataSource)
- description and source-code
```javascript
getDataSource = function () {
  return this.dataSource;
}
```
- example usage
```shell
...
 * connector that defines it.  Otherwise, uses the default lookup.
 * Override this method to handle complex IDs.
 *
 * @param {*} val The 'id' value. Will be converted to the type that the 'id' property specifies.
 */

PersistedModel.prototype.setId = function(val) {
  var ds = this.getDataSource();
  this[this.getIdName()] = val;
};

/**
 * Get the 'id' value for the 'PersistedModel'.
 *
 * @returns {*} The 'id' value
...
```

#### <a name="apidoc.element.loopback.ACL.super_.getIdName"></a>[function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>getIdName ()](#apidoc.element.loopback.ACL.super_.getIdName)
- description and source-code
```javascript
getIdName = function () {
  var Model = this;
  var ds = Model.getDataSource();

  if (ds.idName) {
    return ds.idName(Model.modelName);
  } else {
    return 'id';
  }
}
```
- example usage
```shell
...
 * Override this method to handle complex IDs.
 *
 * @param {*} val The 'id' value. Will be converted to the type that the 'id' property specifies.
 */

PersistedModel.prototype.setId = function(val) {
  var ds = this.getDataSource();
  this[this.getIdName()] = val;
};

/**
 * Get the 'id' value for the 'PersistedModel'.
 *
 * @returns {*} The 'id' value
 */
...
```

#### <a name="apidoc.element.loopback.ACL.super_.getMaxListeners"></a>[function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>getMaxListeners ()](#apidoc.element.loopback.ACL.super_.getMaxListeners)
- description and source-code
```javascript
getMaxListeners = function () { [native code] }
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.super_.getPropertyType"></a>[function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>getPropertyType (propName)](#apidoc.element.loopback.ACL.super_.getPropertyType)
- description and source-code
```javascript
getPropertyType = function (propName) {
  var prop = this.definition.properties[propName];
  if (!prop) {
    // The property is not part of the definition
    return null;
  }
  if (!prop.type) {
    throw new Error(g.f('Type not defined for property %s.%s', this.modelName, propName));
    // return null;
  }
  return prop.type.name;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.super_.getSourceId"></a>[function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>getSourceId (cb)](#apidoc.element.loopback.ACL.super_.getSourceId)
- description and source-code
```javascript
getSourceId = function (cb) {
  var dataSource = this.dataSource;
  if (!dataSource) {
    this.once('dataSourceAttached', this.getSourceId.bind(this, cb));
  }
  assert(
    dataSource.connector.name,
    'Model.getSourceId: cannot get id without dataSource.connector.name'
  );
  var id = [dataSource.connector.name, this.modelName].join('-');
  cb(null, id);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.super_.handleChangeError"></a>[function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>handleChangeError (err, operationName)](#apidoc.element.loopback.ACL.super_.handleChangeError)
- description and source-code
```javascript
handleChangeError = function (err, operationName) {
  if (!err) return;
  this.emit('error', err, operationName);
}
```
- example usage
```shell
...
    // cleanup
    setInterval(cleanup, cleanupInterval);
  }

  function cleanup() {
    Model.rectifyAllChanges(function(err) {
      if (err) {
        Model.handleChangeError(err, 'cleanup');
      }
    });
  }
};

function rectifyOnSave(ctx, next) {
  var instance = ctx.instance || ctx.currentInstance;
...
```

#### <a name="apidoc.element.loopback.ACL.super_.hasManyRemoting"></a>[function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>hasManyRemoting (relationName, relation, define)](#apidoc.element.loopback.ACL.super_.hasManyRemoting)
- description and source-code
```javascript
hasManyRemoting = function (relationName, relation, define) {
  var pathName = (relation.options.http && relation.options.http.path) || relationName;
  var toModelName = relation.modelTo.modelName;

  var findByIdFunc = this.prototype['__findById__' + relationName];
  define('__findById__' + relationName, {
    isStatic: false,
    http: {verb: 'get', path: '/' + pathName + '/:fk'},
    accepts: [
      {
        arg: 'fk', type: 'any',
        description: format('Foreign key for %s', relationName),
        required: true,
        http: {source: 'path'},
      },
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Find a related item by id for %s.', relationName),
    accessType: 'READ',
    returns: {arg: 'result', type: toModelName, root: true},
    rest: {after: convertNullToNotFoundError.bind(null, toModelName)},
  }, findByIdFunc);

  var destroyByIdFunc = this.prototype['__destroyById__' + relationName];
  define('__destroyById__' + relationName, {
    isStatic: false,
    http: {verb: 'delete', path: '/' + pathName + '/:fk'},
    accepts: [
      {
        arg: 'fk', type: 'any',
        description: format('Foreign key for %s', relationName),
        required: true,
        http: {source: 'path'},
      },
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Delete a related item by id for %s.', relationName),
    accessType: 'WRITE',
    returns: [],
  }, destroyByIdFunc);

  var updateByIdFunc = this.prototype['__updateById__' + relationName];
  define('__updateById__' + relationName, {
    isStatic: false,
    http: {verb: 'put', path: '/' + pathName + '/:fk'},
    accepts: [
      {arg: 'fk', type: 'any',
        description: format('Foreign key for %s', relationName),
        required: true,
        http: {source: 'path'}},
      {arg: 'data', type: 'object', model: toModelName, http: {source: 'body'}},
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Update a related item by id for %s.', relationName),
    accessType: 'WRITE',
    returns: {arg: 'result', type: toModelName, root: true},
  }, updateByIdFunc);

  if (relation.modelThrough || relation.type === 'referencesMany') {
    var modelThrough = relation.modelThrough || relation.modelTo;

    var accepts = [];
    if (relation.type === 'hasMany' && relation.modelThrough) {
      // Restrict: only hasManyThrough relation can have additional properties
      accepts.push({
        arg: 'data', type: 'object', model: modelThrough.modelName,
        http: {source: 'body'},
      });
    }

    var addFunc = this.prototype['__link__' + relationName];
    define('__link__' + relationName, {
      isStatic: false,
      http: {verb: 'put', path: '/' + pathName + '/rel/:fk'},
      accepts: [{arg: 'fk', type: 'any',
        description: format('Foreign key for %s', relationName),
        required: true,
        http: {source: 'path'}},
      ].concat(accepts).concat([
        {arg: 'options', type: 'object', http: 'optionsFromRequest'},
      ]),
      description: format('Add a related item by id for %s.', relationName),
      accessType: 'WRITE',
      returns: {arg: relationName, type: modelThrough.modelName, root: true},
    }, addFunc);

    var removeFunc = this.prototype['__unlink__' + relationName];
    define('__unlink__' + relationName, {
      isStatic: false,
      http: {verb: 'delete', path: '/' + pathName + '/rel/:fk'},
      accepts: [
        {
          arg: 'fk', type: 'any',
          description: format('Foreign key for %s', relationName),
          required: true,
          http: {source: 'path'},
        },
        {arg: 'options', type: 'object', http: 'optionsFromRequest'},
      ],
      description: format('Remove the %s relation to an item by id.', relationName),
      accessType: 'WRITE',
      returns: [],
    }, removeFunc);

    // FIXME: [rfeng] How to map a function with callback(err, true|false) to HEAD?
    // true --> 200 and false --> 404?
    var existsFunc = this.prototype['__exists__' + relatio ...
```
- example usage
```shell
...
    relation.type === 'embedsOne'
  ) {
    ModelCtor.hasOneRemoting(relationName, relation, define);
  } else if (
    relation.type === 'hasMany' ||
    relation.type === 'embedsMany' ||
    relation.type === 'referencesMany') {
    ModelCtor.hasManyRemoting(relationName, relation, define);
  }
}

// handle scopes
var scopes = ModelCtor.scopes || {};
for (var scopeName in scopes) {
  ModelCtor.scopeRemoting(scopeName, scopes[scopeName], define);
...
```

#### <a name="apidoc.element.loopback.ACL.super_.hasOneRemoting"></a>[function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>hasOneRemoting (relationName, relation, define)](#apidoc.element.loopback.ACL.super_.hasOneRemoting)
- description and source-code
```javascript
hasOneRemoting = function (relationName, relation, define) {
  var pathName = (relation.options.http && relation.options.http.path) || relationName;
  var toModelName = relation.modelTo.modelName;

  define('__get__' + relationName, {
    isStatic: false,
    http: {verb: 'get', path: '/' + pathName},
    accepts: [
      {arg: 'refresh', type: 'boolean', http: {source: 'query'}},
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Fetches hasOne relation %s.', relationName),
    accessType: 'READ',
    returns: {arg: relationName, type: relation.modelTo.modelName, root: true},
    rest: {after: convertNullToNotFoundError.bind(null, toModelName)},
  });

  define('__create__' + relationName, {
    isStatic: false,
    http: {verb: 'post', path: '/' + pathName},
    accepts: [
      {
        arg: 'data', type: 'object', model: toModelName,
        http: {source: 'body'},
      },
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Creates a new instance in %s of this model.', relationName),
    accessType: 'WRITE',
    returns: {arg: 'data', type: toModelName, root: true},
  });

  define('__update__' + relationName, {
    isStatic: false,
    http: {verb: 'put', path: '/' + pathName},
    accepts: [
      {
        arg: 'data', type: 'object', model: toModelName,
        http: {source: 'body'},
      },
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Update %s of this model.', relationName),
    accessType: 'WRITE',
    returns: {arg: 'data', type: toModelName, root: true},
  });

  define('__destroy__' + relationName, {
    isStatic: false,
    http: {verb: 'delete', path: '/' + pathName},
    accepts: [
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Deletes %s of this model.', relationName),
    accessType: 'WRITE',
  });
}
```
- example usage
```shell
...
  var relation = relations[relationName];
  if (relation.type === 'belongsTo') {
    ModelCtor.belongsToRemoting(relationName, relation, define);
  } else if (
    relation.type === 'hasOne' ||
    relation.type === 'embedsOne'
  ) {
    ModelCtor.hasOneRemoting(relationName, relation, define);
  } else if (
    relation.type === 'hasMany' ||
    relation.type === 'embedsMany' ||
    relation.type === 'referencesMany') {
    ModelCtor.hasManyRemoting(relationName, relation, define);
  }
}
...
```

#### <a name="apidoc.element.loopback.ACL.super_.isHiddenProperty"></a>[function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>isHiddenProperty (propertyName)](#apidoc.element.loopback.ACL.super_.isHiddenProperty)
- description and source-code
```javascript
isHiddenProperty = function (propertyName) {
  var Model = this;
  var settings = Model.definition && Model.definition.settings;
  var hiddenProperties = settings && (settings.hiddenProperties || settings.hidden);
  if (Array.isArray(hiddenProperties)) {
    // Cache the hidden properties as an object for quick lookup
    settings.hiddenProperties = {};
    for (var i = 0; i < hiddenProperties.length; i++) {
      settings.hiddenProperties[hiddenProperties[i]] = true;
    }
    hiddenProperties = settings.hiddenProperties;
  }
  if (hiddenProperties) {
    return hiddenProperties[propertyName];
  } else {
    return false;
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.super_.isProtectedProperty"></a>[function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>isProtectedProperty (propertyName)](#apidoc.element.loopback.ACL.super_.isProtectedProperty)
- description and source-code
```javascript
isProtectedProperty = function (propertyName) {
  var Model = this;
  var settings = Model.definition && Model.definition.settings;
  var protectedProperties = settings && (settings.protectedProperties || settings.protected);
  if (Array.isArray(protectedProperties)) {
    // Cache the protected properties as an object for quick lookup
    settings.protectedProperties = {};
    for (var i = 0; i < protectedProperties.length; i++) {
      settings.protectedProperties[protectedProperties[i]] = true;
    }
    protectedProperties = settings.protectedProperties;
  }
  if (protectedProperties) {
    return protectedProperties[propertyName];
  } else {
    return false;
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.super_.listenerCount"></a>[function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>listenerCount ()](#apidoc.element.loopback.ACL.super_.listenerCount)
- description and source-code
```javascript
listenerCount = function () { [native code] }
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.super_.listeners"></a>[function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>listeners ()](#apidoc.element.loopback.ACL.super_.listeners)
- description and source-code
```javascript
listeners = function () { [native code] }
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.super_.mixin"></a>[function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>mixin (anotherClass, options)](#apidoc.element.loopback.ACL.super_.mixin)
- description and source-code
```javascript
mixin = function (anotherClass, options) {
  if (typeof anotherClass === 'string') {
    this.modelBuilder.mixins.applyMixin(this, anotherClass, options);
  } else {
    if (anotherClass.prototype instanceof ModelBaseClass) {
      var props = anotherClass.definition.properties;
      for (var i in props) {
        if (this.definition.properties[i]) {
          continue;
        }
        this.defineProperty(i, props[i]);
      }
    }
    return jutil.mixin(this, anotherClass, options);
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.super_.nestRemoting"></a>[function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>nestRemoting (relationName, options, filterCallback)](#apidoc.element.loopback.ACL.super_.nestRemoting)
- description and source-code
```javascript
nestRemoting = function (relationName, options, filterCallback) {
  if (typeof options === 'function' && !filterCallback) {
    filterCallback = options;
    options = {};
  }
  options = options || {};

  var regExp = /^__([^_]+)__([^_]+)$/;
  var relation = this.relations[relationName];
  if (relation && relation.modelTo && relation.modelTo.sharedClass) {
    var self = this;
    var sharedClass = this.sharedClass;
    var sharedToClass = relation.modelTo.sharedClass;
    var toModelName = relation.modelTo.modelName;

    var pathName = options.pathName || relation.options.path || relationName;
    var paramName = options.paramName || 'nk';

    var http = [].concat(sharedToClass.http || [])[0];
    var httpPath, acceptArgs;

    if (relation.multiple) {
      httpPath = pathName + '/:' + paramName;
      acceptArgs = [
        {
          arg: paramName, type: 'any', http: {source: 'path'},
          description: format('Foreign key for %s.',  relation.name),
          required: true,
        },
      ];
    } else {
      httpPath = pathName;
      acceptArgs = [];
    }

    if (httpPath[0] !== '/') {
      httpPath = '/' + httpPath;
    }

    // A method should return the method name to use, if it is to be
    // included as a nested method - a falsy return value will skip.
    var filter = filterCallback || options.filterMethod || function(method, relation) {
      var matches = method.name.match(regExp);
      if (matches) {
        return '__' + matches[1] + '__' + relation.name + '__' + matches[2];
      }
    };

    sharedToClass.methods().forEach(function(method) {
      var methodName;
      if (!method.isStatic && (methodName = filter(method, relation))) {
        var prefix = relation.multiple ? '__findById__' : '__get__';
        var getterName = options.getterName || (prefix + relationName);

        var getterFn = relation.modelFrom.prototype[getterName];
        if (typeof getterFn !== 'function') {
          throw new Error(g.f('Invalid remote method: '%s'', getterName));
        }

        var nestedFn = relation.modelTo.prototype[method.name];
        if (typeof nestedFn !== 'function') {
          throw new Error(g.f('Invalid remote method: '%s'', method.name));
        }

        var opts = {};

        opts.accepts = acceptArgs.concat(method.accepts || []);
        opts.returns = [].concat(method.returns || []);
        opts.description = method.description;
        opts.accessType = method.accessType;
        opts.rest = extend({}, method.rest || {});
        opts.rest.delegateTo = method;

        opts.http = [];
        var routes = [].concat(method.http || []);
        routes.forEach(function(route) {
          if (route.path) {
            var copy = extend({}, route);
            copy.path = httpPath + route.path;
            opts.http.push(copy);
          }
        });

        if (relation.multiple) {
          sharedClass.defineMethod(methodName, opts, function(fkId) {
            var args = Array.prototype.slice.call(arguments, 1);
            var last = args[args.length - 1];
            var cb = typeof last === 'function' ? last : null;
            this[getterName](fkId, function(err, inst) {
              if (err && cb) return cb(err);
              if (inst instanceof relation.modelTo) {
                try {
                  nestedFn.apply(inst, args);
                } catch (err) {
                  if (cb) return cb(err);
                }
              } else if (cb) {
                cb(err, null);
              }
            });
          }, method.isStatic);
        } else {
          sharedClass.defineMethod(methodName, opts, function() {
            var args = Array.prototype.slice.call(arguments);
            var last = args[args.length - 1];
            var cb = typeof last === 'function' ? last : null;
            this[getterName](function(err, inst) {
              if (err && cb) return cb(err);
              if (inst instanceof relation.modelTo) {
                try {
                  nestedFn.apply(inst, args);
                } catch (err) {
                  if (cb) return ...
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.super_.notifyObserversAround"></a>[function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>notifyObserversAround (operation, context, fn, callback)](#apidoc.element.loopback.ACL.super_.notifyObserversAround)
- description and source-code
```javascript
notifyObserversAround = function (operation, context, fn, callback) {
  var self = this;
  context = context || {};
  // Add callback to the context object so that an observer can skip other
  // ones by calling the callback function directly and not calling next
  if (context.end === undefined) {
    context.end = callback;
  }
  // First notify before observers
  return self.notifyObserversOf('before ' + operation, context,
    function(err, context) {
      if (err) return callback(err);

      function cbForWork(err) {
        var args = [].slice.call(arguments, 0);
        if (err) return callback.apply(null, args);
        // Find the list of params from the callback in addition to err
        var returnedArgs = args.slice(1);
        // Set up the array of results
        context.results = returnedArgs;
        // Notify after observers
        self.notifyObserversOf('after ' + operation, context,
          function(err, context) {
            if (err) return callback(err, context);
            var results = returnedArgs;
            if (context && Array.isArray(context.results)) {
              // Pickup the results from context
              results = context.results;
            }
            // Build the list of params for final callback
            var args = [err].concat(results);
            callback.apply(null, args);
          });
      }

      if (fn.length === 1) {
        // fn(done)
        fn(cbForWork);
      } else {
        // fn(context, done)
        fn(context, cbForWork);
      }
    });
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.super_.notifyObserversOf"></a>[function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>notifyObserversOf (operation, context, callback)](#apidoc.element.loopback.ACL.super_.notifyObserversOf)
- description and source-code
```javascript
notifyObserversOf = function (operation, context, callback) {
  var self = this;
  if (!callback) callback = utils.createPromiseCallback();

  function createNotifier(op) {
    return function(ctx, done) {
      if (typeof ctx === 'function' && done === undefined) {
        done = ctx;
        ctx = context;
      }
      self.notifyObserversOf(op, context, done);
    };
  }

  if (Array.isArray(operation)) {
    var tasks = [];
    for (var i = 0, n = operation.length; i < n; i++) {
      tasks.push(createNotifier(operation[i]));
    }
    return async.waterfall(tasks, callback);
  }

  var observers = this._observers && this._observers[operation];

  this._notifyBaseObservers(operation, context, function doNotify(err) {
    if (err) return callback(err, context);
    if (!observers || !observers.length) return callback(null, context);

    async.eachSeries(
      observers,
      function notifySingleObserver(fn, next) {
        var retval = fn(context, next);
        if (retval && typeof retval.then === 'function') {
          retval.then(
            function() { next(); return null; },
            next // error handler
          );
        }
      },
      function(err) { callback(err, context); }
    );
  });
  return callback.promise;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.super_.observe"></a>[function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>observe (operation, listener)](#apidoc.element.loopback.ACL.super_.observe)
- description and source-code
```javascript
observe = function (operation, listener) {
  this._observers = this._observers || {};
  if (!this._observers[operation]) {
    this._observers[operation] = [];
  }

  this._observers[operation].push(listener);
}
```
- example usage
```shell
...
var idType = idProp && idProp.type;
var idDefn = idProp && idProp.defaultFn;
if (idType !== String || !(idDefn === 'uuid' || idDefn === 'guid')) {
  deprecated('The model ' + this.modelName + ' is tracking changes, ' +
    'which requires a string id with GUID/UUID default value.');
}

Model.observe('after save', rectifyOnSave);

Model.observe('after delete', rectifyOnDelete);

// Only run if the run time is server
// Can switch off cleanup by setting the interval to -1
if (runtime.isServer && cleanupInterval > 0) {
  // initial cleanup
...
```

#### <a name="apidoc.element.loopback.ACL.super_.on"></a>[function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>on ()](#apidoc.element.loopback.ACL.super_.on)
- description and source-code
```javascript
on = function () { [native code] }
```
- example usage
```shell
...
    this.remotes().addClass(Model.Change.sharedClass);
  }
  clearHandlerCache(this);
  this.emit('modelRemoted', Model.sharedClass);
}

var self = this;
Model.on('remoteMethodDisabled', function(model, methodName) {
  self.emit('remoteMethodDisabled', model, methodName);
});
Model.on('remoteMethodAdded', function(model) {
  self.emit('remoteMethodAdded', model);
});

Model.shared = isPublic;
...
```

#### <a name="apidoc.element.loopback.ACL.super_.once"></a>[function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>once ()](#apidoc.element.loopback.ACL.super_.once)
- description and source-code
```javascript
once = function () { [native code] }
```
- example usage
```shell
...
    remotes.afterError(className + '.' + name, fn);
  });
};

ModelCtor._runWhenAttachedToApp = function(fn) {
  if (this.app) return fn(this.app);
  var self = this;
  self.once('attached', function() {
    fn(self.app);
  });
};

if ('injectOptionsFromRemoteContext' in options) {
  console.warn(g.f(
    '%s is using model setting %s which is no longer available.',
...
```

#### <a name="apidoc.element.loopback.ACL.super_.patchOrCreate"></a>[function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>patchOrCreate (data, callback)](#apidoc.element.loopback.ACL.super_.patchOrCreate)
- description and source-code
```javascript
function upsert(data, callback) {
  throwNotAttached(this.modelName, 'upsert');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.super_.patchOrCreateWithWhere"></a>[function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>patchOrCreateWithWhere (where, data, callback)](#apidoc.element.loopback.ACL.super_.patchOrCreateWithWhere)
- description and source-code
```javascript
function upsertWithWhere(where, data, callback) {
  throwNotAttached(this.modelName, 'upsertWithWhere');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.super_.prependListener"></a>[function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>prependListener ()](#apidoc.element.loopback.ACL.super_.prependListener)
- description and source-code
```javascript
prependListener = function () { [native code] }
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.super_.prependOnceListener"></a>[function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>prependOnceListener ()](#apidoc.element.loopback.ACL.super_.prependOnceListener)
- description and source-code
```javascript
prependOnceListener = function () { [native code] }
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.super_.rectifyAllChanges"></a>[function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>rectifyAllChanges (callback)](#apidoc.element.loopback.ACL.super_.rectifyAllChanges)
- description and source-code
```javascript
rectifyAllChanges = function (callback) {
  this.getChangeModel().rectifyAll(callback);
}
```
- example usage
```shell
...
    cleanup();

    // cleanup
    setInterval(cleanup, cleanupInterval);
  }

  function cleanup() {
    Model.rectifyAllChanges(function(err) {
      if (err) {
        Model.handleChangeError(err, 'cleanup');
      }
    });
  }
};
...
```

#### <a name="apidoc.element.loopback.ACL.super_.rectifyChange"></a>[function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>rectifyChange (id, callback)](#apidoc.element.loopback.ACL.super_.rectifyChange)
- description and source-code
```javascript
rectifyChange = function (id, callback) {
  var Change = this.getChangeModel();
  Change.rectifyModelChanges(this.modelName, [id], callback);
}
```
- example usage
```shell
...
  debug('rectifyOnSave %s -> ' + (id ? 'id %j' : '%s'),
    ctx.Model.modelName, id ? id : 'ALL');
  debug('context instance:%j currentInstance:%j where:%j data %j',
    ctx.instance, ctx.currentInstance, ctx.where, ctx.data);
}

if (id) {
  ctx.Model.rectifyChange(id, reportErrorAndNext);
} else {
  ctx.Model.rectifyAllChanges(reportErrorAndNext);
}

function reportErrorAndNext(err) {
  if (err) {
    ctx.Model.handleChangeError(err, 'after save');
...
```

#### <a name="apidoc.element.loopback.ACL.super_.registerProperty"></a>[function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>registerProperty (propertyName)](#apidoc.element.loopback.ACL.super_.registerProperty)
- description and source-code
```javascript
registerProperty = function (propertyName) {
  var properties = modelDefinition.build();
  var prop = properties[propertyName];
  var DataType = prop.type;
  if (!DataType) {
    throw new Error(g.f('Invalid type for property %s', propertyName));
  }

  if (prop.required) {
    var requiredOptions = typeof prop.required === 'object' ? prop.required : undefined;
    ModelClass.validatesPresenceOf(propertyName, requiredOptions);
  }

  Object.defineProperty(ModelClass.prototype, propertyName, {
    get: function() {
      if (ModelClass.getter[propertyName]) {
        return ModelClass.getter[propertyName].call(this); // Try getter first
      } else {
        return this.__data && this.__data[propertyName]; // Try __data
      }
    },
    set: function(value) {
      var DataType = ModelClass.definition.properties[propertyName].type;
      if (Array.isArray(DataType) || DataType === Array) {
        DataType = List;
      } else if (DataType === Date) {
        DataType = DateType;
      } else if (DataType === Boolean) {
        DataType = BooleanType;
      } else if (typeof DataType === 'string') {
        DataType = modelBuilder.resolveType(DataType);
      }

      var persistUndefinedAsNull = ModelClass.definition.settings.persistUndefinedAsNull;
      if (value === undefined && persistUndefinedAsNull) {
        value = null;
      }

      if (ModelClass.setter[propertyName]) {
        ModelClass.setter[propertyName].call(this, value); // Try setter first
      } else {
        this.__data = this.__data || {};
        if (value === null || value === undefined) {
          this.__data[propertyName] = value;
        } else {
          if (DataType === List) {
            this.__data[propertyName] = DataType(value, properties[propertyName].type, this.__data);
          } else {
            // Assume the type constructor handles Constructor() call
            // If not, we should call new DataType(value).valueOf();
            this.__data[propertyName] = (value instanceof DataType) ? value : DataType(value);
          }
        }
      }
    },
    configurable: true,
    enumerable: true,
  });

  // FIXME: [rfeng] Do we need to keep the raw data?
  // Use $ as the prefix to avoid conflicts with properties such as _id
  Object.defineProperty(ModelClass.prototype, '$' + propertyName, {
    get: function() {
      return this.__data && this.__data[propertyName];
    },
    set: function(value) {
      if (!this.__data) {
        this.__data = {};
      }
      this.__data[propertyName] = value;
    },
    configurable: true,
    enumerable: false,
  });
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.super_.remoteMethod"></a>[function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>remoteMethod (name, options)](#apidoc.element.loopback.ACL.super_.remoteMethod)
- description and source-code
```javascript
remoteMethod = function (name, options) {
  if (options.isStatic === undefined) {
    var m = name.match(/^prototype\.(.*)$/);
    options.isStatic = !m;
    name = options.isStatic ? name : m[1];
  }

  if (options.accepts) {
    options = extend({}, options);
    options.accepts = setupOptionsArgs(options.accepts);
  }

  this.sharedClass.defineMethod(name, options);
  this.emit('remoteMethodAdded', this.sharedClass);
}
```
- example usage
```shell
...
  /**
* Enable remote invocation for the specified method.
* See [Remote methods](http://loopback.io/doc/en/lb2/Remote-methods.html) for more information.
*
* Static method example:
* '''js
* Model.myMethod();
* Model.remoteMethod('myMethod');
* '''
*
* @param {String} name The name of the method.
* @param {Object} options The remoting options.
* See [Remote methods - Options](http://loopback.io/doc/en/lb2/Remote-methods.html#options).
*/
...
```

#### <a name="apidoc.element.loopback.ACL.super_.remove"></a>[function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>remove (where, cb)](#apidoc.element.loopback.ACL.super_.remove)
- description and source-code
```javascript
function destroyAll(where, cb) {
  throwNotAttached(this.modelName, 'destroyAll');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.super_.removeAllListeners"></a>[function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>removeAllListeners ()](#apidoc.element.loopback.ACL.super_.removeAllListeners)
- description and source-code
```javascript
removeAllListeners = function () { [native code] }
```
- example usage
```shell
...

var idName = this.getIdName();
var Model = this;
var changes = new PassThrough({objectMode: true});
var writeable = true;

changes.destroy = function() {
  changes.removeAllListeners('error');
  changes.removeAllListeners('end');
  writeable = false;
  changes = null;
};

changes.on('error', function() {
  writeable = false;
...
```

#### <a name="apidoc.element.loopback.ACL.super_.removeById"></a>[function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>removeById (id, cb)](#apidoc.element.loopback.ACL.super_.removeById)
- description and source-code
```javascript
function deleteById(id, cb) {
  throwNotAttached(this.modelName, 'deleteById');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.super_.removeListener"></a>[function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>removeListener ()](#apidoc.element.loopback.ACL.super_.removeListener)
- description and source-code
```javascript
removeListener = function () { [native code] }
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.super_.removeObserver"></a>[function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>removeObserver (operation, listener)](#apidoc.element.loopback.ACL.super_.removeObserver)
- description and source-code
```javascript
removeObserver = function (operation, listener) {
  if (!(this._observers && this._observers[operation])) return;

  var index = this._observers[operation].indexOf(listener);
  if (index !== -1) {
    return this._observers[operation].splice(index, 1);
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.super_.replaceById"></a>[function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>replaceById (id, data, cb)](#apidoc.element.loopback.ACL.super_.replaceById)
- description and source-code
```javascript
function replaceById(id, data, cb) {
  throwNotAttached(this.modelName, 'replaceById');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.super_.replaceOrCreate"></a>[function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>replaceOrCreate (data, callback)](#apidoc.element.loopback.ACL.super_.replaceOrCreate)
- description and source-code
```javascript
function replaceOrCreate(data, callback) {
  throwNotAttached(this.modelName, 'replaceOrCreate');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.super_.replicate"></a>[function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>replicate (since, targetModel, options, callback)](#apidoc.element.loopback.ACL.super_.replicate)
- description and source-code
```javascript
replicate = function (since, targetModel, options, callback) {
  var lastArg = arguments[arguments.length - 1];

  if (typeof lastArg === 'function' && arguments.length > 1) {
    callback = lastArg;
  }

  if (typeof since === 'function' && since.modelName) {
    targetModel = since;
    since = -1;
  }

  if (typeof since !== 'object') {
    since = {source: since, target: since};
  }

  if (typeof options === 'function') {
    options = {};
  }

  options = options || {};

  var sourceModel = this;
  callback = callback || utils.createPromiseCallback();

  debug('replicating %s since %s to %s since %s',
    sourceModel.modelName,
    since.source,
    targetModel.modelName,
    since.target);
  if (options.filter) {
    debug('\twith filter %j', options.filter);
  }

  // In order to avoid a race condition between the replication and
  // other clients modifying the data, we must create the new target
  // checkpoint as the first step of the replication process.
  // As a side-effect of that, the replicated changes are associated
  // with the new target checkpoint. This is actually desired behaviour,
  // because that way clients replicating *from* the target model
  // since the new checkpoint will pick these changes up.
  // However, it increases the likelihood of (false) conflicts being detected.
  // In order to prevent that, we run the replication multiple times,
  // until no changes were replicated, but at most MAX_ATTEMPTS times
  // to prevent starvation. In most cases, the second run will find no changes
  // to replicate and we are done.
  var MAX_ATTEMPTS = 3;

  run(1, since);
  return callback.promise;

  function run(attempt, since) {
    debug('\titeration #%s', attempt);
    tryReplicate(sourceModel, targetModel, since, options, next);

    function next(err, conflicts, cps, updates) {
      var finished = err || conflicts.length ||
        !updates || updates.length === 0 ||
        attempt >= MAX_ATTEMPTS;

      if (finished)
        return callback(err, conflicts, cps);
      run(attempt + 1, cps);
    }
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.super_.scopeRemoting"></a>[function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>scopeRemoting (scopeName, scope, define)](#apidoc.element.loopback.ACL.super_.scopeRemoting)
- description and source-code
```javascript
scopeRemoting = function (scopeName, scope, define) {
  var pathName =
    (scope.options && scope.options.http && scope.options.http.path) || scopeName;

  var isStatic = scope.isStatic;
  var toModelName = scope.modelTo.modelName;

  // https://github.com/strongloop/loopback/issues/811
  // Check if the scope is for a hasMany relation
  var relation = this.relations[scopeName];
  if (relation && relation.modelTo) {
    // For a relation with through model, the toModelName should be the one
    // from the target model
    toModelName = relation.modelTo.modelName;
  }

  define('__get__' + scopeName, {
    isStatic: isStatic,
    http: {verb: 'get', path: '/' + pathName},
    accepts: [
      {arg: 'filter', type: 'object'},
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Queries %s of %s.', scopeName, this.modelName),
    accessType: 'READ',
    returns: {arg: scopeName, type: [toModelName], root: true},
  });

  define('__create__' + scopeName, {
    isStatic: isStatic,
    http: {verb: 'post', path: '/' + pathName},
    accepts: [
      {
        arg: 'data',
        type: 'object',
        allowArray: true,
        model: toModelName,
        http: {source: 'body'},
      },
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Creates a new instance in %s of this model.', scopeName),
    accessType: 'WRITE',
    returns: {arg: 'data', type: toModelName, root: true},
  });

  define('__delete__' + scopeName, {
    isStatic: isStatic,
    http: {verb: 'delete', path: '/' + pathName},
    accepts: [
      {
        arg: 'where', type: 'object',
        // The "where" argument is not exposed in the REST API
        // but we need to provide a value so that we can pass "options"
        // as the third argument.
        http: function(ctx) { return undefined; },
      },
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Deletes all %s of this model.', scopeName),
    accessType: 'WRITE',
  });

  define('__count__' + scopeName, {
    isStatic: isStatic,
    http: {verb: 'get', path: '/' + pathName + '/count'},
    accepts: [
      {
        arg: 'where', type: 'object',
        description: 'Criteria to match model instances',
      },
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Counts %s of %s.', scopeName, this.modelName),
    accessType: 'READ',
    returns: {arg: 'count',  type: 'number'},
  });
}
```
- example usage
```shell
...
        ModelCtor.hasManyRemoting(relationName, relation, define);
      }
    }

    // handle scopes
    var scopes = ModelCtor.scopes || {};
    for (var scopeName in scopes) {
      ModelCtor.scopeRemoting(scopeName, scopes[scopeName], define);
    }
  });

  return ModelCtor;
};

/*!
...
```

#### <a name="apidoc.element.loopback.ACL.super_.setMaxListeners"></a>[function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>setMaxListeners ()](#apidoc.element.loopback.ACL.super_.setMaxListeners)
- description and source-code
```javascript
setMaxListeners = function () { [native code] }
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.super_.setup"></a>[function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>setup ()](#apidoc.element.loopback.ACL.super_.setup)
- description and source-code
```javascript
function setupPersistedModel() {
  // call Model.setup first
  Model.setup.call(this);

  var PersistedModel = this;

  // enable change tracking (usually for replication)
  if (this.settings.trackChanges) {
    PersistedModel._defineChangeModel();
    PersistedModel.once('dataSourceAttached', function() {
      PersistedModel.enableChangeTracking();
    });
  } else if (this.settings.enableRemoteReplication) {
    PersistedModel._defineChangeModel();
  }

  PersistedModel.setupRemoting();
}
```
- example usage
```shell
...
  Model.createOptionsFromRemotingContext = function(ctx) {
    return {
      accessToken: ctx.req.accessToken,
    };
  };

  // setup the initial model
  Model.setup();

  return Model;
};
...
```

#### <a name="apidoc.element.loopback.ACL.super_.setupRemoting"></a>[function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>setupRemoting ()](#apidoc.element.loopback.ACL.super_.setupRemoting)
- description and source-code
```javascript
setupRemoting = function () {
  var PersistedModel = this;
  var typeName = PersistedModel.modelName;
  var options = PersistedModel.settings;

  // This is just for LB 3.x
  options.replaceOnPUT = options.replaceOnPUT !== false;

  function setRemoting(scope, name, options) {
    var fn = scope[name];
    fn._delegate = true;
    options.isStatic = scope === PersistedModel;
    PersistedModel.remoteMethod(name, options);
  }

  setRemoting(PersistedModel, 'create', {
    description: 'Create a new instance of the model and persist it into the data source.',
    accessType: 'WRITE',
    accepts: [
      {
        arg: 'data', type: 'object', model: typeName, allowArray: true,
        description: 'Model instance data',
        http: {source: 'body'},
      },
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    returns: {arg: 'data', type: typeName, root: true},
    http: {verb: 'post', path: '/'},
  });

  var upsertOptions = {
    aliases: ['upsert', 'updateOrCreate'],
    description: 'Patch an existing model instance or insert a new one ' +
      'into the data source.',
    accessType: 'WRITE',
    accepts: [
      {
        arg: 'data', type: 'object', model: typeName, http: {source: 'body'},
        description: 'Model instance data',
      },
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    returns: {arg: 'data', type: typeName, root: true},
    http: [{verb: 'patch', path: '/'}],
  };

  if (!options.replaceOnPUT) {
    upsertOptions.http.unshift({verb: 'put', path: '/'});
  }
  setRemoting(PersistedModel, 'patchOrCreate', upsertOptions);

  var replaceOrCreateOptions = {
    description: 'Replace an existing model instance or insert a new one into the data source.',
    accessType: 'WRITE',
    accepts: [
      {
        arg: 'data', type: 'object', model: typeName,
        http: {source: 'body'},
        description: 'Model instance data',
      },
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    returns: {arg: 'data', type: typeName, root: true},
    http: [{verb: 'post', path: '/replaceOrCreate'}],
  };

  if (options.replaceOnPUT) {
    replaceOrCreateOptions.http.push({verb: 'put', path: '/'});
  }

  setRemoting(PersistedModel, 'replaceOrCreate', replaceOrCreateOptions);

  setRemoting(PersistedModel, 'upsertWithWhere', {
    aliases: ['patchOrCreateWithWhere'],
    description: 'Update an existing model instance or insert a new one into ' +
      'the data source based on the where criteria.',
    accessType: 'WRITE',
    accepts: [
      {arg: 'where', type: 'object', http: {source: 'query'},
        description: 'Criteria to match model instances'},
      {arg: 'data', type: 'object', model: typeName, http: {source: 'body'},
        description: 'An object of model property name/value pairs'},
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    returns: {arg: 'data', type: typeName, root: true},
    http: {verb: 'post', path: '/upsertWithWhere'},
  });

  setRemoting(PersistedModel, 'exists', {
    description: 'Check whether a model instance exists in the data source.',
    accessType: 'READ',
    accepts: [
      {arg: 'id', type: 'any', description: 'Model id', required: true},
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    returns: {arg: 'exists', type: 'boolean'},
    http: [
      {verb: 'get', path: '/:id/exists'},
      {verb: 'head', path: '/:id'},
    ],
    rest: {
      // After hook to map exists to 200/404 for HEAD
      after: function(ctx, cb) {
        if (ctx.req.method === 'GET') {
          // For GET, return {exists: true|false} as is
          return cb();
        }
        if (!ctx.result.exists) {
          var modelName = ctx.method.sharedClass.name;
          var id = ctx.getArgByName('id');
          var msg = 'Unknown "' + modelName + '" id "' + id + '".';
          var error = new Error(msg);
          error.statusCode = error.status = 404;
          error.code = 'MODEL_NOT_FOUND';
          cb(error);
        } else {
          cb();
        } ...
```
- example usage
```shell
...
    PersistedModel.once('dataSourceAttached', function() {
      PersistedModel.enableChangeTracking();
    });
  } else if (this.settings.enableRemoteReplication) {
    PersistedModel._defineChangeModel();
  }

  PersistedModel.setupRemoting();
};

/*!
 * Throw an error telling the user that the method is not available and why.
 */

function throwNotAttached(modelName, methodName) {
...
```

#### <a name="apidoc.element.loopback.ACL.super_.sharedCtor"></a>[function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>sharedCtor (data, id, options, fn)](#apidoc.element.loopback.ACL.super_.sharedCtor)
- description and source-code
```javascript
sharedCtor = function (data, id, options, fn) {
  var ModelCtor = this;

  var isRemoteInvocationWithOptions = typeof data !== 'object' &&
    typeof id === 'object' &&
    typeof options === 'function';
  if (isRemoteInvocationWithOptions) {
    // sharedCtor(id, options, fn)
    fn = options;
    options = id;
    id = data;
    data = null;
  } else if (typeof data === 'function') {
    // sharedCtor(fn)
    fn = data;
    data = null;
    id = null;
    options = null;
  } else if (typeof id === 'function') {
    // sharedCtor(data, fn)
    // sharedCtor(id, fn)
    fn = id;
    options = null;

    if (typeof data !== 'object') {
      id = data;
      data = null;
    } else {
      id = null;
    }
  }

  if (id && data) {
    var model = new ModelCtor(data);
    model.id = id;
    fn(null, model);
  } else if (data) {
    fn(null, new ModelCtor(data));
  } else if (id) {
    var filter = {};
    ModelCtor.findById(id, filter, options, function(err, model) {
      if (err) {
        fn(err);
      } else if (model) {
        fn(null, model);
      } else {
        err = new Error(g.f('could not find a model with apidoc.element.loopback.ACL.super_.sharedCtor %s', id));
        err.statusCode = 404;
        err.code = 'MODEL_NOT_FOUND';
        fn(err);
      }
    });
  } else {
    fn(new Error(g.f('must specify an apidoc.element.loopback.ACL.super_.sharedCtor or {{data}}')));
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.super_.update"></a>[function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>update (where, data, cb)](#apidoc.element.loopback.ACL.super_.update)
- description and source-code
```javascript
function updateAll(where, data, cb) {
  throwNotAttached(this.modelName, 'updateAll');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.super_.updateAll"></a>[function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>updateAll (where, data, cb)](#apidoc.element.loopback.ACL.super_.updateAll)
- description and source-code
```javascript
function updateAll(where, data, cb) {
  throwNotAttached(this.modelName, 'updateAll');
}
```
- example usage
```shell
...

  /**
* Update multiple instances that match the where clause.
*
* Example:
*
*'''js
* Employee.updateAll({managerId: 'x001'}, {managerId: 'x002'}, function(err, info) {
*     ...
* });
* '''
*
* @param {Object} [where] Optional 'where' filter, like
* '''
* { key: val, key2: {gt: 'val2'}, ...}
...
```

#### <a name="apidoc.element.loopback.ACL.super_.updateLastChange"></a>[function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>updateLastChange (id, data, cb)](#apidoc.element.loopback.ACL.super_.updateLastChange)
- description and source-code
```javascript
updateLastChange = function (id, data, cb) {
  var self = this;
  this.findLastChange(id, function(err, inst) {
    if (err) return cb(err);
    if (!inst) {
      err = new Error(g.f('No change record found for %s with id %s',
        self.modelName, id));
      err.statusCode = 404;
      return cb(err);
    }

    inst.updateAttributes(data, cb);
  });
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.super_.updateOrCreate"></a>[function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>updateOrCreate (data, callback)](#apidoc.element.loopback.ACL.super_.updateOrCreate)
- description and source-code
```javascript
function upsert(data, callback) {
  throwNotAttached(this.modelName, 'upsert');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.super_.upsert"></a>[function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>upsert (data, callback)](#apidoc.element.loopback.ACL.super_.upsert)
- description and source-code
```javascript
function upsert(data, callback) {
  throwNotAttached(this.modelName, 'upsert');
}
```
- example usage
```shell
...
  }
});

// then save
function save() {
  inst.trigger('save', function(saveDone) {
    inst.trigger('update', function(updateDone) {
      Model.upsert(inst, function(err) {
        inst._initProperties(data);
        updateDone.call(inst, function() {
          saveDone.call(inst, function() {
            callback(err, inst);
          });
        });
      });
...
```

#### <a name="apidoc.element.loopback.ACL.super_.upsertWithWhere"></a>[function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>upsertWithWhere (where, data, callback)](#apidoc.element.loopback.ACL.super_.upsertWithWhere)
- description and source-code
```javascript
function upsertWithWhere(where, data, callback) {
  throwNotAttached(this.modelName, 'upsertWithWhere');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.super_.validate"></a>[function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>validate ()](#apidoc.element.loopback.ACL.super_.validate)
- description and source-code
```javascript
validate = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.super_.validateAsync"></a>[function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>validateAsync ()](#apidoc.element.loopback.ACL.super_.validateAsync)
- description and source-code
```javascript
validateAsync = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.super_.validatesAbsenceOf"></a>[function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>validatesAbsenceOf ()](#apidoc.element.loopback.ACL.super_.validatesAbsenceOf)
- description and source-code
```javascript
validatesAbsenceOf = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.super_.validatesExclusionOf"></a>[function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>validatesExclusionOf ()](#apidoc.element.loopback.ACL.super_.validatesExclusionOf)
- description and source-code
```javascript
validatesExclusionOf = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.super_.validatesFormatOf"></a>[function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>validatesFormatOf ()](#apidoc.element.loopback.ACL.super_.validatesFormatOf)
- description and source-code
```javascript
validatesFormatOf = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.super_.validatesInclusionOf"></a>[function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>validatesInclusionOf ()](#apidoc.element.loopback.ACL.super_.validatesInclusionOf)
- description and source-code
```javascript
validatesInclusionOf = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.super_.validatesLengthOf"></a>[function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>validatesLengthOf ()](#apidoc.element.loopback.ACL.super_.validatesLengthOf)
- description and source-code
```javascript
validatesLengthOf = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.super_.validatesNumericalityOf"></a>[function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>validatesNumericalityOf ()](#apidoc.element.loopback.ACL.super_.validatesNumericalityOf)
- description and source-code
```javascript
validatesNumericalityOf = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.super_.validatesPresenceOf"></a>[function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>validatesPresenceOf ()](#apidoc.element.loopback.ACL.super_.validatesPresenceOf)
- description and source-code
```javascript
validatesPresenceOf = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.super_.validatesUniquenessOf"></a>[function <span class="apidocSignatureSpan">loopback.ACL.super_.</span>validatesUniquenessOf ()](#apidoc.element.loopback.ACL.super_.validatesUniquenessOf)
- description and source-code
```javascript
validatesUniquenessOf = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```



# <a name="apidoc.module.loopback.ACL.super_.prototype"></a>[module loopback.ACL.super_.prototype](#apidoc.module.loopback.ACL.super_.prototype)

#### <a name="apidoc.element.loopback.ACL.super_.prototype.delete"></a>[function <span class="apidocSignatureSpan">loopback.ACL.super_.prototype.</span>delete (cb)](#apidoc.element.loopback.ACL.super_.prototype.delete)
- description and source-code
```javascript
delete = function (cb) {
  throwNotAttached(this.constructor.modelName, 'destroy');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.super_.prototype.destroy"></a>[function <span class="apidocSignatureSpan">loopback.ACL.super_.prototype.</span>destroy (cb)](#apidoc.element.loopback.ACL.super_.prototype.destroy)
- description and source-code
```javascript
destroy = function (cb) {
  throwNotAttached(this.constructor.modelName, 'destroy');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.super_.prototype.fillCustomChangeProperties"></a>[function <span class="apidocSignatureSpan">loopback.ACL.super_.prototype.</span>fillCustomChangeProperties (change, cb)](#apidoc.element.loopback.ACL.super_.prototype.fillCustomChangeProperties)
- description and source-code
```javascript
fillCustomChangeProperties = function (change, cb) {
  // no-op by default
  cb();
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.super_.prototype.getId"></a>[function <span class="apidocSignatureSpan">loopback.ACL.super_.prototype.</span>getId ()](#apidoc.element.loopback.ACL.super_.prototype.getId)
- description and source-code
```javascript
getId = function () {
  var data = this.toObject();
  if (!data) return;
  return data[this.getIdName()];
}
```
- example usage
```shell
...
}
if (!('throws' in options)) {
  options.throws = false;
}

var inst = this;
var data = inst.toObject(true);
var id = this.getId();

if (!id) {
  return Model.create(this, callback);
}

// validate first
if (!options.validate) {
...
```

#### <a name="apidoc.element.loopback.ACL.super_.prototype.getIdName"></a>[function <span class="apidocSignatureSpan">loopback.ACL.super_.prototype.</span>getIdName ()](#apidoc.element.loopback.ACL.super_.prototype.getIdName)
- description and source-code
```javascript
getIdName = function () {
  return this.constructor.getIdName();
}
```
- example usage
```shell
...
 * Override this method to handle complex IDs.
 *
 * @param {*} val The 'id' value. Will be converted to the type that the 'id' property specifies.
 */

PersistedModel.prototype.setId = function(val) {
  var ds = this.getDataSource();
  this[this.getIdName()] = val;
};

/**
 * Get the 'id' value for the 'PersistedModel'.
 *
 * @returns {*} The 'id' value
 */
...
```

#### <a name="apidoc.element.loopback.ACL.super_.prototype.isNewRecord"></a>[function <span class="apidocSignatureSpan">loopback.ACL.super_.prototype.</span>isNewRecord ()](#apidoc.element.loopback.ACL.super_.prototype.isNewRecord)
- description and source-code
```javascript
isNewRecord = function () {
  throwNotAttached(this.constructor.modelName, 'isNewRecord');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.super_.prototype.patchAttributes"></a>[function <span class="apidocSignatureSpan">loopback.ACL.super_.prototype.</span>patchAttributes (data, cb)](#apidoc.element.loopback.ACL.super_.prototype.patchAttributes)
- description and source-code
```javascript
function updateAttributes(data, cb) {
  throwNotAttached(this.modelName, 'updateAttributes');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.super_.prototype.reload"></a>[function <span class="apidocSignatureSpan">loopback.ACL.super_.prototype.</span>reload (callback)](#apidoc.element.loopback.ACL.super_.prototype.reload)
- description and source-code
```javascript
function reload(callback) {
  throwNotAttached(this.constructor.modelName, 'reload');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.super_.prototype.remove"></a>[function <span class="apidocSignatureSpan">loopback.ACL.super_.prototype.</span>remove (cb)](#apidoc.element.loopback.ACL.super_.prototype.remove)
- description and source-code
```javascript
remove = function (cb) {
  throwNotAttached(this.constructor.modelName, 'destroy');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.super_.prototype.replaceAttributes"></a>[function <span class="apidocSignatureSpan">loopback.ACL.super_.prototype.</span>replaceAttributes (data, cb)](#apidoc.element.loopback.ACL.super_.prototype.replaceAttributes)
- description and source-code
```javascript
function replaceAttributes(data, cb) {
  throwNotAttached(this.modelName, 'replaceAttributes');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.super_.prototype.save"></a>[function <span class="apidocSignatureSpan">loopback.ACL.super_.prototype.</span>save (options, callback)](#apidoc.element.loopback.ACL.super_.prototype.save)
- description and source-code
```javascript
save = function (options, callback) {
  var Model = this.constructor;

  if (typeof options == 'function') {
    callback = options;
    options = {};
  }

  callback = callback || function() {
  };
  options = options || {};

  if (!('validate' in options)) {
    options.validate = true;
  }
  if (!('throws' in options)) {
    options.throws = false;
  }

  var inst = this;
  var data = inst.toObject(true);
  var id = this.getId();

  if (!id) {
    return Model.create(this, callback);
  }

  // validate first
  if (!options.validate) {
    return save();
  }

  inst.isValid(function(valid) {
    if (valid) {
      save();
    } else {
      var err = new Model.ValidationError(inst);
      // throws option is dangerous for async usage
      if (options.throws) {
        throw err;
      }
      callback(err, inst);
    }
  });

  // then save
  function save() {
    inst.trigger('save', function(saveDone) {
      inst.trigger('update', function(updateDone) {
        Model.upsert(inst, function(err) {
          inst._initProperties(data);
          updateDone.call(inst, function() {
            saveDone.call(inst, function() {
              callback(err, inst);
            });
          });
        });
      }, data);
    }, data);
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.super_.prototype.setId"></a>[function <span class="apidocSignatureSpan">loopback.ACL.super_.prototype.</span>setId (val)](#apidoc.element.loopback.ACL.super_.prototype.setId)
- description and source-code
```javascript
setId = function (val) {
  var ds = this.getDataSource();
  this[this.getIdName()] = val;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.super_.prototype.updateAttribute"></a>[function <span class="apidocSignatureSpan">loopback.ACL.super_.prototype.</span>updateAttribute (name, value, callback)](#apidoc.element.loopback.ACL.super_.prototype.updateAttribute)
- description and source-code
```javascript
function updateAttribute(name, value, callback) {
  throwNotAttached(this.constructor.modelName, 'updateAttribute');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ACL.super_.prototype.updateAttributes"></a>[function <span class="apidocSignatureSpan">loopback.ACL.super_.prototype.</span>updateAttributes (data, cb)](#apidoc.element.loopback.ACL.super_.prototype.updateAttributes)
- description and source-code
```javascript
function updateAttributes(data, cb) {
  throwNotAttached(this.modelName, 'updateAttributes');
}
```
- example usage
```shell
...
    if (!inst) {
      err = new Error(g.f('No change record found for %s with id %s',
        self.modelName, id));
      err.statusCode = 404;
      return cb(err);
    }

    inst.updateAttributes(data, cb);
  });
};

/**
 * Create a change stream. [See here for more info](http://loopback.io/doc/en/lb2/Realtime-server-sent-events.html)
 *
 * @param {Object} options
...
```



# <a name="apidoc.module.loopback.AccessToken"></a>[module loopback.AccessToken](#apidoc.module.loopback.AccessToken)

#### <a name="apidoc.element.loopback.AccessToken.AccessToken"></a>[function <span class="apidocSignatureSpan">loopback.</span>AccessToken (data, options)](#apidoc.element.loopback.AccessToken.AccessToken)
- description and source-code
```javascript
function ModelConstructor(data, options) {
  if (!(this instanceof ModelConstructor)) {
    return new ModelConstructor(data, options);
  }
  if (ModelClass.settings.unresolved) {
    throw new Error(g.f('Model %s is not defined.', ModelClass.modelName));
  }
  ModelBaseClass.apply(this, arguments);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.AccessToken.ValidationError"></a>[function <span class="apidocSignatureSpan">loopback.AccessToken.</span>ValidationError (obj)](#apidoc.element.loopback.AccessToken.ValidationError)
- description and source-code
```javascript
function ValidationError(obj) {
  if (!(this instanceof ValidationError)) return new ValidationError(obj);

  this.name = 'ValidationError';

  var context = obj && obj.constructor && obj.constructor.modelName;
  this.message = g.f(
    'The %s instance is not valid. Details: %s.',
      context ? ''' + context + ''' : 'model',
      formatErrors(obj.errors, obj.toJSON()) || '(unknown)'
  );

  this.statusCode = 422;

  this.details = {
    context: context,
    codes: obj.errors && obj.errors.codes,
    messages: obj.errors,
  };

  if (Error.captureStackTrace) {
    // V8 (Chrome, Opera, Node)
    Error.captureStackTrace(this, this.constructor);
  } else if (errorHasStackProperty) {
    // Firefox
    this.stack = (new Error).stack;
  }
  // Safari and PhantomJS initializes 'error.stack' on throw
  // Internet Explorer does not support 'error.stack'
}
```
- example usage
```shell
...
  return save();
}

inst.isValid(function(valid) {
  if (valid) {
    save();
  } else {
    var err = new Model.ValidationError(inst);
    // throws option is dangerous for async usage
    if (options.throws) {
      throw err;
    }
    callback(err, inst);
  }
});
...
```

#### <a name="apidoc.element.loopback.AccessToken._ACL"></a>[function <span class="apidocSignatureSpan">loopback.AccessToken.</span>_ACL (ACL)](#apidoc.element.loopback.AccessToken._ACL)
- description and source-code
```javascript
function getACL(ACL) {
  var registry = this.registry;
  if (ACL !== undefined) {
    // The function is used as a setter
    _aclModel = ACL;
  }
  if (_aclModel) {
    return _aclModel;
  }
  var aclModel = registry.getModel('ACL');
  _aclModel = registry.getModelByType(aclModel);
  return _aclModel;
}
```
- example usage
```shell
...
   * @param {String|Error} err The error object.
   * @param {Boolean} allowed True if the request is allowed; false otherwise.
   */

  Model.checkAccess = function(token, modelId, sharedMethod, ctx, callback) {
var ANONYMOUS = registry.getModel('AccessToken').ANONYMOUS;
token = token || ANONYMOUS;
var aclModel = Model._ACL();

ctx = ctx || {};
if (typeof ctx === 'function' && callback === undefined) {
  callback = ctx;
  ctx = {};
}
...
```

#### <a name="apidoc.element.loopback.AccessToken._defineChangeModel"></a>[function <span class="apidocSignatureSpan">loopback.AccessToken.</span>_defineChangeModel ()](#apidoc.element.loopback.AccessToken._defineChangeModel)
- description and source-code
```javascript
_defineChangeModel = function () {
  var BaseChangeModel = this.registry.getModel('Change');
  assert(BaseChangeModel,
    'Change model must be defined before enabling change replication');

  const additionalChangeModelProperties =
    this.settings.additionalChangeModelProperties || {};

  this.Change = BaseChangeModel.extend(this.modelName + '-change',
    additionalChangeModelProperties,
    {trackModel: this}
  );

  if (this.dataSource) {
    attachRelatedModels(this);
  }

  // Re-attach related models whenever our datasource is changed.
  var self = this;
  this.on('dataSourceAttached', function() {
    attachRelatedModels(self);
  });

  return this.Change;

  function attachRelatedModels(self) {
    self.Change.attachTo(self.dataSource);
    self.Change.getCheckpointModel().attachTo(self.dataSource);
  }
}
```
- example usage
```shell
...
// call Model.setup first
Model.setup.call(this);

var PersistedModel = this;

// enable change tracking (usually for replication)
if (this.settings.trackChanges) {
  PersistedModel._defineChangeModel();
  PersistedModel.once('dataSourceAttached', function() {
    PersistedModel.enableChangeTracking();
  });
} else if (this.settings.enableRemoteReplication) {
  PersistedModel._defineChangeModel();
}
...
```

#### <a name="apidoc.element.loopback.AccessToken._getAccessTypeForMethod"></a>[function <span class="apidocSignatureSpan">loopback.AccessToken.</span>_getAccessTypeForMethod (method)](#apidoc.element.loopback.AccessToken._getAccessTypeForMethod)
- description and source-code
```javascript
_getAccessTypeForMethod = function (method) {
  if (typeof method === 'string') {
    method = {name: method};
  }
  assert(
    typeof method === 'object',
    'method is a required argument and must be a RemoteMethod object'
  );

  var ACL = Model._ACL();

  // Check the explicit setting of accessType
  if (method.accessType) {
    assert(method.accessType === ACL.READ ||
      method.accessType === ACL.REPLICATE ||
      method.accessType === ACL.WRITE ||
      method.accessType === ACL.EXECUTE, 'invalid accessType ' +
      method.accessType +
      '. It must be "READ", "REPLICATE", "WRITE", or "EXECUTE"');
    return method.accessType;
  }

  // Default GET requests to READ
  var verb = method.http && method.http.verb;
  if (typeof verb === 'string') {
    verb = verb.toUpperCase();
  }
  if (verb === 'GET' || verb === 'HEAD') {
    return ACL.READ;
  }

  switch (method.name) {
    case 'create':
      return ACL.WRITE;
    case 'updateOrCreate':
      return ACL.WRITE;
    case 'upsertWithWhere':
      return ACL.WRITE;
    case 'upsert':
      return ACL.WRITE;
    case 'exists':
      return ACL.READ;
    case 'findById':
      return ACL.READ;
    case 'find':
      return ACL.READ;
    case 'findOne':
      return ACL.READ;
    case 'destroyById':
      return ACL.WRITE;
    case 'deleteById':
      return ACL.WRITE;
    case 'removeById':
      return ACL.WRITE;
    case 'count':
      return ACL.READ;
    default:
      return ACL.EXECUTE;
  }
}
```
- example usage
```shell
...
if (this.sharedMethod) {
  this.methodNames = this.sharedMethod.aliases.concat([this.sharedMethod.name]);
} else {
  this.methodNames = [];
}

if (this.sharedMethod) {
  this.accessType = this.model._getAccessTypeForMethod(this.sharedMethod);
}

this.accessType = context.accessType || AccessContext.ALL;
assert(loopback.AccessToken,
  'AccessToken model must be defined before AccessContext model');
this.accessToken = context.accessToken || loopback.AccessToken.ANONYMOUS;
...
```

#### <a name="apidoc.element.loopback.AccessToken._notifyBaseObservers"></a>[function <span class="apidocSignatureSpan">loopback.AccessToken.</span>_notifyBaseObservers (operation, context, callback)](#apidoc.element.loopback.AccessToken._notifyBaseObservers)
- description and source-code
```javascript
_notifyBaseObservers = function (operation, context, callback) {
  if (this.base && this.base.notifyObserversOf)
    this.base.notifyObserversOf(operation, context, callback);
  else
    callback();
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.AccessToken._runWhenAttachedToApp"></a>[function <span class="apidocSignatureSpan">loopback.AccessToken.</span>_runWhenAttachedToApp (fn)](#apidoc.element.loopback.AccessToken._runWhenAttachedToApp)
- description and source-code
```javascript
_runWhenAttachedToApp = function (fn) {
  if (this.app) return fn(this.app);
  var self = this;
  self.once('attached', function() {
    fn(self.app);
  });
}
```
- example usage
```shell
...
  ModelCtor,
  remotingOptions
);

// before remote hook
ModelCtor.beforeRemote = function(name, fn) {
  var className = this.modelName;
  this._runWhenAttachedToApp(function(app) {
    var remotes = app.remotes();
    remotes.before(className + '.' + name, function(ctx, next) {
      return fn(ctx, ctx.result, next);
    });
  });
};
...
```

#### <a name="apidoc.element.loopback.AccessToken.addListener"></a>[function <span class="apidocSignatureSpan">loopback.AccessToken.</span>addListener ()](#apidoc.element.loopback.AccessToken.addListener)
- description and source-code
```javascript
addListener = function () { [native code] }
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.AccessToken.afterRemote"></a>[function <span class="apidocSignatureSpan">loopback.AccessToken.</span>afterRemote (name, fn)](#apidoc.element.loopback.AccessToken.afterRemote)
- description and source-code
```javascript
afterRemote = function (name, fn) {
  var className = this.modelName;
  this._runWhenAttachedToApp(function(app) {
    var remotes = app.remotes();
    remotes.after(className + '.' + name, function(ctx, next) {
      return fn(ctx, ctx.result, next);
    });
  });
}
```
- example usage
```shell
...
        var m = method.isStatic ? method.name : 'prototype.' + method.name;
        if (before && before[delegateTo.name]) {
          self.beforeRemote(m, function(ctx, result, next) {
            before[delegateTo.name]._listeners.call(null, ctx, next);
          });
        }
        if (after && after[delegateTo.name]) {
          self.afterRemote(m, function(ctx, result, next) {
            after[delegateTo.name]._listeners.call(null, ctx, next);
          });
        }
      }
    });
  });
} else {
...
```

#### <a name="apidoc.element.loopback.AccessToken.afterRemoteError"></a>[function <span class="apidocSignatureSpan">loopback.AccessToken.</span>afterRemoteError (name, fn)](#apidoc.element.loopback.AccessToken.afterRemoteError)
- description and source-code
```javascript
afterRemoteError = function (name, fn) {
  var className = this.modelName;
  this._runWhenAttachedToApp(function(app) {
    var remotes = app.remotes();
    remotes.afterError(className + '.' + name, fn);
  });
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.AccessToken.attachTo"></a>[function <span class="apidocSignatureSpan">loopback.AccessToken.</span>attachTo (dataSource)](#apidoc.element.loopback.AccessToken.attachTo)
- description and source-code
```javascript
attachTo = function (dataSource) {
  dataSource.attach(this);
}
```
- example usage
```shell
...
  this.on('dataSourceAttached', function() {
    attachRelatedModels(self);
  });

  return this.Change;

  function attachRelatedModels(self) {
    self.Change.attachTo(self.dataSource);
    self.Change.getCheckpointModel().attachTo(self.dataSource);
  }
};

PersistedModel.rectifyAllChanges = function(callback) {
  this.getChangeModel().rectifyAll(callback);
};
...
```

#### <a name="apidoc.element.loopback.AccessToken.beforeRemote"></a>[function <span class="apidocSignatureSpan">loopback.AccessToken.</span>beforeRemote (name, fn)](#apidoc.element.loopback.AccessToken.beforeRemote)
- description and source-code
```javascript
beforeRemote = function (name, fn) {
  var className = this.modelName;
  this._runWhenAttachedToApp(function(app) {
    var remotes = app.remotes();
    remotes.before(className + '.' + name, function(ctx, next) {
      return fn(ctx, ctx.result, next);
    });
  });
}
```
- example usage
```shell
...
        sharedClass.methods().forEach(function(method) {
var delegateTo = method.rest && method.rest.delegateTo;
if (delegateTo && delegateTo.ctor == relation.modelTo) {
  var before = method.isStatic ? beforeListeners : beforeListeners['prototype'];
  var after = method.isStatic ? afterListeners : afterListeners['prototype'];
  var m = method.isStatic ? method.name : 'prototype.' + method.name;
  if (before && before[delegateTo.name]) {
    self.beforeRemote(m, function(ctx, result, next) {
      before[delegateTo.name]._listeners.call(null, ctx, next);
    });
  }
  if (after && after[delegateTo.name]) {
    self.afterRemote(m, function(ctx, result, next) {
      after[delegateTo.name]._listeners.call(null, ctx, next);
    });
...
```

#### <a name="apidoc.element.loopback.AccessToken.belongsToRemoting"></a>[function <span class="apidocSignatureSpan">loopback.AccessToken.</span>belongsToRemoting (relationName, relation, define)](#apidoc.element.loopback.AccessToken.belongsToRemoting)
- description and source-code
```javascript
belongsToRemoting = function (relationName, relation, define) {
  var modelName = relation.modelTo && relation.modelTo.modelName;
  modelName = modelName || 'PersistedModel';
  var fn = this.prototype[relationName];
  var pathName = (relation.options.http && relation.options.http.path) || relationName;
  define('__get__' + relationName, {
    isStatic: false,
    http: {verb: 'get', path: '/' + pathName},
    accepts: [
      {arg: 'refresh', type: 'boolean', http: {source: 'query'}},
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    accessType: 'READ',
    description: format('Fetches belongsTo relation %s.', relationName),
    returns: {arg: relationName, type: modelName, root: true},
  }, fn);
}
```
- example usage
```shell
...
  defineRaw(name, options, fn);
};

// get the relations
for (var relationName in relations) {
  var relation = relations[relationName];
  if (relation.type === 'belongsTo') {
    ModelCtor.belongsToRemoting(relationName, relation, define);
  } else if (
    relation.type === 'hasOne' ||
    relation.type === 'embedsOne'
  ) {
    ModelCtor.hasOneRemoting(relationName, relation, define);
  } else if (
    relation.type === 'hasMany' ||
...
```

#### <a name="apidoc.element.loopback.AccessToken.bulkUpdate"></a>[function <span class="apidocSignatureSpan">loopback.AccessToken.</span>bulkUpdate (updates, options, callback)](#apidoc.element.loopback.AccessToken.bulkUpdate)
- description and source-code
```javascript
bulkUpdate = function (updates, options, callback) {
  var tasks = [];
  var Model = this;
  var Change = this.getChangeModel();
  var conflicts = [];

  var lastArg = arguments[arguments.length - 1];

  if (typeof lastArg === 'function' && arguments.length > 1) {
    callback = lastArg;
  }

  if (typeof options === 'function') {
    options = {};
  }

  options = options || {};

  buildLookupOfAffectedModelData(Model, updates, function(err, currentMap) {
    if (err) return callback(err);

    updates.forEach(function(update) {
      var id = update.change.modelId;
      var current = currentMap[id];
      switch (update.type) {
        case Change.UPDATE:
          tasks.push(function(cb) {
            applyUpdate(Model, id, current, update.data, update.change, conflicts, options, cb);
          });
          break;

        case Change.CREATE:
          tasks.push(function(cb) {
            applyCreate(Model, id, current, update.data, update.change, conflicts, options, cb);
          });
          break;
        case Change.DELETE:
          tasks.push(function(cb) {
            applyDelete(Model, id, current, update.change, conflicts, options, cb);
          });
          break;
      }
    });

    async.parallel(tasks, function(err) {
      if (err) return callback(err);
      if (conflicts.length) {
        err = new Error(g.f('Conflict'));
        err.statusCode = 409;
        err.details = {conflicts: conflicts};
        return callback(err);
      }
      callback();
    });
  });
}
```
- example usage
```shell
...
    function bulkUpdate(_updates, cb) {
debug('\tstarting bulk update');
updates = _updates;
utils.uploadInChunks(
  updates,
  replicationChunkSize,
  function(smallArray, chunkCallback) {
    return targetModel.bulkUpdate(smallArray, options, function(err) {
      // bulk update is a special case where we want to process all chunks and aggregate all errors
      chunkCallback(null, err);
    });
  },
  function(notUsed, err) {
    var conflicts = err && err.details && err.details.conflicts;
    if (conflicts && err.statusCode == 409) {
...
```

#### <a name="apidoc.element.loopback.AccessToken.changes"></a>[function <span class="apidocSignatureSpan">loopback.AccessToken.</span>changes (since, filter, callback)](#apidoc.element.loopback.AccessToken.changes)
- description and source-code
```javascript
changes = function (since, filter, callback) {
  if (typeof since === 'function') {
    filter = {};
    callback = since;
    since = -1;
  }
  if (typeof filter === 'function') {
    callback = filter;
    since = -1;
    filter = {};
  }

  var idName = this.dataSource.idName(this.modelName);
  var Change = this.getChangeModel();
  var model = this;
  const changeFilter = this.createChangeFilter(since, filter);

  filter = filter || {};
  filter.fields = {};
  filter.where = filter.where || {};
  filter.fields[idName] = true;

  // TODO(ritch) this whole thing could be optimized a bit more
  Change.find(changeFilter, function(err, changes) {
    if (err) return callback(err);
    if (!Array.isArray(changes) || changes.length === 0) return callback(null, []);
    var ids = changes.map(function(change) {
      return change.getModelId();
    });
    filter.where[idName] = {inq: ids};
    model.find(filter, function(err, models) {
      if (err) return callback(err);
      var modelIds = models.map(function(m) {
        return m[idName].toString();
      });
      callback(null, changes.filter(function(ch) {
        if (ch.type() === Change.DELETE) return true;
        return modelIds.indexOf(ch.modelId) > -1;
      }));
    });
  });
}
```
- example usage
```shell
...
    async.waterfall(tasks, done);

    function getSourceChanges(cb) {
utils.downloadInChunks(
  options.filter,
  replicationChunkSize,
  function(filter, pagingCallback) {
    sourceModel.changes(since.source, filter, pagingCallback);
  },
  debug.enabled ? log : cb);

function log(err, result) {
  if (err) return cb(err);
  debug('\tusing source changes');
  result.forEach(function(it) { debug('\t\t%j', it); });
...
```

#### <a name="apidoc.element.loopback.AccessToken.checkAccess"></a>[function <span class="apidocSignatureSpan">loopback.AccessToken.</span>checkAccess (token, modelId, sharedMethod, ctx, callback)](#apidoc.element.loopback.AccessToken.checkAccess)
- description and source-code
```javascript
checkAccess = function (token, modelId, sharedMethod, ctx, callback) {
  var ANONYMOUS = registry.getModel('AccessToken').ANONYMOUS;
  token = token || ANONYMOUS;
  var aclModel = Model._ACL();

  ctx = ctx || {};
  if (typeof ctx === 'function' && callback === undefined) {
    callback = ctx;
    ctx = {};
  }

  aclModel.checkAccessForContext({
    accessToken: token,
    model: this,
    property: sharedMethod.name,
    method: sharedMethod.name,
    sharedMethod: sharedMethod,
    modelId: modelId,
    accessType: this._getAccessTypeForMethod(sharedMethod),
    remotingContext: ctx,
  }, function(err, accessRequest) {
    if (err) return callback(err);
    callback(null, accessRequest.isAllowed());
  });
}
```
- example usage
```shell
...
var modelSettings = Model.settings || {};
var errStatusCode = modelSettings.aclErrorStatus || app.get('aclErrorStatus') || 401;
if (!req.accessToken) {
  errStatusCode = 401;
}

if (Model.checkAccess) {
  Model.checkAccess(
    req.accessToken,
    modelId,
    method,
    ctx,
    function(err, allowed) {
      if (err) {
        console.log(err);
...
```

#### <a name="apidoc.element.loopback.AccessToken.checkpoint"></a>[function <span class="apidocSignatureSpan">loopback.AccessToken.</span>checkpoint (cb)](#apidoc.element.loopback.AccessToken.checkpoint)
- description and source-code
```javascript
checkpoint = function (cb) {
  var Checkpoint = this.getChangeModel().getCheckpointModel();
  Checkpoint.bumpLastSeq(cb);
}
```
- example usage
```shell
...
      }
      cb(err);
    });
}

function checkpoints() {
  var cb = arguments[arguments.length - 1];
  sourceModel.checkpoint(function(err, source) {
    if (err) return cb(err);
    newSourceCp = source.seq;
    targetModel.checkpoint(function(err, target) {
      if (err) return cb(err);
      newTargetCp = target.seq;
      debug('\tcreated checkpoints');
      debug('\t\t%s for source model %s', newSourceCp, sourceModel.modelName);
...
```

#### <a name="apidoc.element.loopback.AccessToken.clearObservers"></a>[function <span class="apidocSignatureSpan">loopback.AccessToken.</span>clearObservers (operation)](#apidoc.element.loopback.AccessToken.clearObservers)
- description and source-code
```javascript
clearObservers = function (operation) {
  if (!(this._observers && this._observers[operation])) return;

  this._observers[operation].length = 0;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.AccessToken.count"></a>[function <span class="apidocSignatureSpan">loopback.AccessToken.</span>count (where, cb)](#apidoc.element.loopback.AccessToken.count)
- description and source-code
```javascript
count = function (where, cb) {
  throwNotAttached(this.modelName, 'count');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.AccessToken.create"></a>[function <span class="apidocSignatureSpan">loopback.AccessToken.</span>create (data, callback)](#apidoc.element.loopback.AccessToken.create)
- description and source-code
```javascript
create = function (data, callback) {
  throwNotAttached(this.modelName, 'create');
}
```
- example usage
```shell
...
 } else {
   var options = {};

   if (this.get) {
     options = this.get('remoting');
   }

   return (this._remotes = RemoteObjects.create(options));
 }
};

/*!
* Remove a route by reference.
*/
...
```

#### <a name="apidoc.element.loopback.AccessToken.createAccessTokenId"></a>[function <span class="apidocSignatureSpan">loopback.AccessToken.</span>createAccessTokenId (fn)](#apidoc.element.loopback.AccessToken.createAccessTokenId)
- description and source-code
```javascript
createAccessTokenId = function (fn) {
  uid(this.settings.accessTokenIdLength || DEFAULT_TOKEN_LEN, function(err, guid) {
    if (err) {
      fn(err);
    } else {
      fn(null, guid);
    }
  });
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.AccessToken.createChangeFilter"></a>[function <span class="apidocSignatureSpan">loopback.AccessToken.</span>createChangeFilter (since, modelFilter)](#apidoc.element.loopback.AccessToken.createChangeFilter)
- description and source-code
```javascript
createChangeFilter = function (since, modelFilter) {
  return {
    where: {
      checkpoint: {gte: since},
      modelName: this.modelName,
    },
  };
}
```
- example usage
```shell
...
  since = -1;
  filter = {};
}

var idName = this.dataSource.idName(this.modelName);
var Change = this.getChangeModel();
var model = this;
const changeFilter = this.createChangeFilter(since, filter);

filter = filter || {};
filter.fields = {};
filter.where = filter.where || {};
filter.fields[idName] = true;

// TODO(ritch) this whole thing could be optimized a bit more
...
```

#### <a name="apidoc.element.loopback.AccessToken.createChangeStream"></a>[function <span class="apidocSignatureSpan">loopback.AccessToken.</span>createChangeStream (options, cb)](#apidoc.element.loopback.AccessToken.createChangeStream)
- description and source-code
```javascript
createChangeStream = function (options, cb) {
  if (typeof options === 'function') {
    cb = options;
    options = undefined;
  }

  var idName = this.getIdName();
  var Model = this;
  var changes = new PassThrough({objectMode: true});
  var writeable = true;

  changes.destroy = function() {
    changes.removeAllListeners('error');
    changes.removeAllListeners('end');
    writeable = false;
    changes = null;
  };

  changes.on('error', function() {
    writeable = false;
  });
  changes.on('end', function() {
    writeable = false;
  });

  process.nextTick(function() {
    cb(null, changes);
  });

  Model.observe('after save', createChangeHandler('save'));
  Model.observe('after delete', createChangeHandler('delete'));

  function createChangeHandler(type) {
    return function(ctx, next) {
      // since it might have set to null via destroy
      if (!changes) {
        return next();
      }

      var where = ctx.where;
      var data = ctx.instance || ctx.data;
      var whereId = where && where[idName];

      // the data includes the id
      // or the where includes the id
      var target;

      if (data && (data[idName] || data[idName] === 0)) {
        target = data[idName];
      } else if (where && (where[idName] || where[idName] === 0)) {
        target = where[idName];
      }

      var hasTarget = target === 0 || !!target;

      var change = {
        target: target,
        where: where,
        data: data,
      };

      switch (type) {
        case 'save':
          if (ctx.isNewInstance === undefined) {
            change.type = hasTarget ? 'update' : 'create';
          } else {
            change.type = ctx.isNewInstance ? 'create' : 'update';
          }

          break;
        case 'delete':
          change.type = 'remove';
          break;
      }

      // TODO(ritch) this is ugly... maybe a ReadableStream would be better
      if (writeable) {
        changes.write(change);
      }

      next();
    };
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.AccessToken.createOptionsFromRemotingContext"></a>[function <span class="apidocSignatureSpan">loopback.AccessToken.</span>createOptionsFromRemotingContext (ctx)](#apidoc.element.loopback.AccessToken.createOptionsFromRemotingContext)
- description and source-code
```javascript
createOptionsFromRemotingContext = function (ctx) {
  return {
    accessToken: ctx.req.accessToken,
  };
}
```
- example usage
```shell
...
  var EMPTY_OPTIONS = {};
  var ModelCtor = ctx.method && ctx.method.ctor;
  if (!ModelCtor)
    return EMPTY_OPTIONS;
  if (typeof ModelCtor.createOptionsFromRemotingContext !== 'function')
    return EMPTY_OPTIONS;
  debug('createOptionsFromRemotingContext for %s', ctx.method.stringName);
  return ModelCtor.createOptionsFromRemotingContext(ctx);
}

/**
 * Disable remote invocation for the method with the given name.
 *
 * @param {String} name The name of the method.
 * @param {Boolean} isStatic Is the method static (eg. 'MyModel.myMethod')? Pass
...
```

#### <a name="apidoc.element.loopback.AccessToken.createUpdates"></a>[function <span class="apidocSignatureSpan">loopback.AccessToken.</span>createUpdates (deltas, cb)](#apidoc.element.loopback.AccessToken.createUpdates)
- description and source-code
```javascript
createUpdates = function (deltas, cb) {
  var Change = this.getChangeModel();
  var updates = [];
  var Model = this;
  var tasks = [];

  deltas.forEach(function(change) {
    change = new Change(change);
    var type = change.type();
    var update = {type: type, change: change};
    switch (type) {
      case Change.CREATE:
      case Change.UPDATE:
        tasks.push(function(cb) {
          Model.findById(change.modelId, function(err, inst) {
            if (err) return cb(err);
            if (!inst) {
              return cb &&
                cb(new Error(g.f('Missing data for change: %s', change.modelId)));
            }
            if (inst.toObject) {
              update.data = inst.toObject();
            } else {
              update.data = inst;
            }
            updates.push(update);
            cb();
          });
        });
        break;
      case Change.DELETE:
        updates.push(update);
        break;
    }
  });

  async.parallel(tasks, function(err) {
    if (err) return cb(err);
    cb(null, updates);
  });
}
```
- example usage
```shell
...

  if (diff && diff.deltas && diff.deltas.length) {
    debug('\tbuilding a list of updates');
    utils.uploadInChunks(
      diff.deltas,
      replicationChunkSize,
      function(smallArray, chunkCallback) {
        return sourceModel.createUpdates(smallArray, chunkCallback);
      },
      cb);
  } else {
    // nothing to replicate
    done();
  }
}
...
```

#### <a name="apidoc.element.loopback.AccessToken.currentCheckpoint"></a>[function <span class="apidocSignatureSpan">loopback.AccessToken.</span>currentCheckpoint (cb)](#apidoc.element.loopback.AccessToken.currentCheckpoint)
- description and source-code
```javascript
currentCheckpoint = function (cb) {
  var Checkpoint = this.getChangeModel().getCheckpointModel();
  Checkpoint.current(cb);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.AccessToken.defineProperty"></a>[function <span class="apidocSignatureSpan">loopback.AccessToken.</span>defineProperty (prop, params)](#apidoc.element.loopback.AccessToken.defineProperty)
- description and source-code
```javascript
defineProperty = function (prop, params) {
  if (this.dataSource) {
    this.dataSource.defineProperty(this.modelName, prop, params);
  } else {
    this.modelBuilder.defineProperty(this.modelName, prop, params);
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.AccessToken.deleteAll"></a>[function <span class="apidocSignatureSpan">loopback.AccessToken.</span>deleteAll (where, cb)](#apidoc.element.loopback.AccessToken.deleteAll)
- description and source-code
```javascript
function destroyAll(where, cb) {
  throwNotAttached(this.modelName, 'destroyAll');
}
```
- example usage
```shell
...
  Model.modelName, id);
debug('\tExpected revision: %s', change.rev);
debug('\tActual revision:   %s', rev);
conflicts.push(change);
return Change.rectifyModelChanges(Model.modelName, [id], cb);
    }

    Model.deleteAll(current.toObject(), options, function(err, result) {
if (err) return cb(err);

var count = result && result.count;
switch (count) {
  case 1:
    // The happy path, exactly one record was updated
    return cb();
...
```

#### <a name="apidoc.element.loopback.AccessToken.deleteById"></a>[function <span class="apidocSignatureSpan">loopback.AccessToken.</span>deleteById (id, cb)](#apidoc.element.loopback.AccessToken.deleteById)
- description and source-code
```javascript
function deleteById(id, cb) {
  throwNotAttached(this.modelName, 'deleteById');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.AccessToken.destroyAll"></a>[function <span class="apidocSignatureSpan">loopback.AccessToken.</span>destroyAll (where, cb)](#apidoc.element.loopback.AccessToken.destroyAll)
- description and source-code
```javascript
function destroyAll(where, cb) {
  throwNotAttached(this.modelName, 'destroyAll');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.AccessToken.destroyById"></a>[function <span class="apidocSignatureSpan">loopback.AccessToken.</span>destroyById (id, cb)](#apidoc.element.loopback.AccessToken.destroyById)
- description and source-code
```javascript
function deleteById(id, cb) {
  throwNotAttached(this.modelName, 'deleteById');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.AccessToken.diff"></a>[function <span class="apidocSignatureSpan">loopback.AccessToken.</span>diff (since, remoteChanges, callback)](#apidoc.element.loopback.AccessToken.diff)
- description and source-code
```javascript
diff = function (since, remoteChanges, callback) {
  var Change = this.getChangeModel();
  Change.diff(this.modelName, since, remoteChanges, callback);
}
```
- example usage
```shell
...
    },
  });
};

/**
 * Get a set of deltas and conflicts since the given checkpoint.
 *
 * See [Change.diff()](#change-diff) for details.
 *
 * @param  {Number}  since  Find deltas since this checkpoint.
 * @param  {Array}  remoteChanges  An array of change objects.
 * @callback {Function} callback Callback function called with '(err, result)' arguments.  Required.
 * @param {Error} err Error object; see [Error object](http://loopback.io/doc/en/lb2/Error-object.html).
 * @param {Object} result Object with 'deltas' and 'conflicts' properties; see [Change.diff()](#change-diff) for details.
 */
...
```

#### <a name="apidoc.element.loopback.AccessToken.disableRemoteMethod"></a>[function <span class="apidocSignatureSpan">loopback.AccessToken.</span>disableRemoteMethod (name, isStatic)](#apidoc.element.loopback.AccessToken.disableRemoteMethod)
- description and source-code
```javascript
disableRemoteMethod = function (name, isStatic) {
  deprecated('Model.disableRemoteMethod is deprecated. ' +
    'Use Model.disableRemoteMethodByName instead.');
  var key = this.sharedClass.getKeyFromMethodNameAndTarget(name, isStatic);
  this.sharedClass.disableMethodByName(key);
  this.emit('remoteMethodDisabled', this.sharedClass, key);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.AccessToken.disableRemoteMethodByName"></a>[function <span class="apidocSignatureSpan">loopback.AccessToken.</span>disableRemoteMethodByName (name)](#apidoc.element.loopback.AccessToken.disableRemoteMethodByName)
- description and source-code
```javascript
disableRemoteMethodByName = function (name) {
  this.sharedClass.disableMethodByName(name);
  this.emit('remoteMethodDisabled', this.sharedClass, name);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.AccessToken.emit"></a>[function <span class="apidocSignatureSpan">loopback.AccessToken.</span>emit ()](#apidoc.element.loopback.AccessToken.emit)
- description and source-code
```javascript
emit = function () { [native code] }
```
- example usage
```shell
...
    return new Model(data);
  });
  this.remotes().addClass(Model.sharedClass);
  if (Model.settings.trackChanges && Model.Change) {
    this.remotes().addClass(Model.Change.sharedClass);
  }
  clearHandlerCache(this);
  this.emit('modelRemoted', Model.sharedClass);
}

var self = this;
Model.on('remoteMethodDisabled', function(model, methodName) {
  self.emit('remoteMethodDisabled', model, methodName);
});
Model.on('remoteMethodAdded', function(model) {
...
```

#### <a name="apidoc.element.loopback.AccessToken.enableChangeTracking"></a>[function <span class="apidocSignatureSpan">loopback.AccessToken.</span>enableChangeTracking ()](#apidoc.element.loopback.AccessToken.enableChangeTracking)
- description and source-code
```javascript
enableChangeTracking = function () {
  var Model = this;
  var Change = this.Change || this._defineChangeModel();
  var cleanupInterval = Model.settings.changeCleanupInterval || 30000;

  assert(this.dataSource, 'Cannot enableChangeTracking(): ' + this.modelName +
    ' is not attached to a dataSource');

  var idName = this.getIdName();
  var idProp = this.definition.properties[idName];
  var idType = idProp && idProp.type;
  var idDefn = idProp && idProp.defaultFn;
  if (idType !== String || !(idDefn === 'uuid' || idDefn === 'guid')) {
    deprecated('The model ' + this.modelName + ' is tracking changes, ' +
      'which requires a string id with GUID/UUID default value.');
  }

  Model.observe('after save', rectifyOnSave);

  Model.observe('after delete', rectifyOnDelete);

  // Only run if the run time is server
  // Can switch off cleanup by setting the interval to -1
  if (runtime.isServer && cleanupInterval > 0) {
    // initial cleanup
    cleanup();

    // cleanup
    setInterval(cleanup, cleanupInterval);
  }

  function cleanup() {
    Model.rectifyAllChanges(function(err) {
      if (err) {
        Model.handleChangeError(err, 'cleanup');
      }
    });
  }
}
```
- example usage
```shell
...

  var PersistedModel = this;

  // enable change tracking (usually for replication)
  if (this.settings.trackChanges) {
    PersistedModel._defineChangeModel();
    PersistedModel.once('dataSourceAttached', function() {
      PersistedModel.enableChangeTracking();
    });
  } else if (this.settings.enableRemoteReplication) {
    PersistedModel._defineChangeModel();
  }

  PersistedModel.setupRemoting();
};
...
```

#### <a name="apidoc.element.loopback.AccessToken.eventNames"></a>[function <span class="apidocSignatureSpan">loopback.AccessToken.</span>eventNames ()](#apidoc.element.loopback.AccessToken.eventNames)
- description and source-code
```javascript
eventNames = function () { [native code] }
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.AccessToken.exists"></a>[function <span class="apidocSignatureSpan">loopback.AccessToken.</span>exists (id, cb)](#apidoc.element.loopback.AccessToken.exists)
- description and source-code
```javascript
function exists(id, cb) {
  throwNotAttached(this.modelName, 'exists');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.AccessToken.extend"></a>[function <span class="apidocSignatureSpan">loopback.AccessToken.</span>extend (className, subclassProperties, subclassSettings)](#apidoc.element.loopback.AccessToken.extend)
- description and source-code
```javascript
extend = function (className, subclassProperties, subclassSettings) {
  var properties = ModelClass.definition.properties;
  var settings = ModelClass.definition.settings;

  subclassProperties = subclassProperties || {};
  subclassSettings = subclassSettings || {};

  // Check if subclass redefines the ids
  var idFound = false;
  for (var k in subclassProperties) {
    if (subclassProperties[k] && subclassProperties[k].id) {
      idFound = true;
      break;
    }
  }

  // Merging the properties
  var keys = Object.keys(properties);
  for (var i = 0, n = keys.length; i < n; i++) {
    var key = keys[i];

    if (idFound && properties[key].id) {
      // don't inherit id properties
      continue;
    }
    if (subclassProperties[key] === undefined) {
      var baseProp = properties[key];
      var basePropCopy = baseProp;
      if (baseProp && typeof baseProp === 'object') {
        // Deep clone the base prop
        basePropCopy = mergeSettings(null, baseProp);
      }
      subclassProperties[key] = basePropCopy;
    }
  }

  // Merge the settings
  var originalSubclassSettings = subclassSettings;
  subclassSettings = mergeSettings(settings, subclassSettings);

  // Ensure 'base' is not inherited. Note we don't have to delete 'super'
  // as that is removed from settings by modelBuilder.define and thus
  // it is never inherited
  if (!originalSubclassSettings.base) {
    subclassSettings.base = ModelClass;
  }

  // Define the subclass
  var subClass = modelBuilder.define(className, subclassProperties, subclassSettings, ModelClass);

  // Calling the setup function
  if (typeof subClass.setup === 'function') {
    subClass.setup.call(subClass);
  }

  return subClass;
}
```
- example usage
```shell
...
* The base class for **all models**.
*
* **Inheriting from 'Model'**
*
* '''js
* var properties = {...};
* var options = {...};
* var MyModel = loopback.Model.extend('MyModel', properties, options);
* '''
*
* **Options**
*
*  - 'trackChanges' - If true, changes to the model will be tracked. **Required
* for replication.**
*
...
```

#### <a name="apidoc.element.loopback.AccessToken.find"></a>[function <span class="apidocSignatureSpan">loopback.AccessToken.</span>find (filter, cb)](#apidoc.element.loopback.AccessToken.find)
- description and source-code
```javascript
function find(filter, cb) {
  throwNotAttached(this.modelName, 'find');
}
```
- example usage
```shell
...

filter = filter || {};
filter.fields = {};
filter.where = filter.where || {};
filter.fields[idName] = true;

// TODO(ritch) this whole thing could be optimized a bit more
Change.find(changeFilter, function(err, changes) {
  if (err) return callback(err);
  if (!Array.isArray(changes) || changes.length === 0) return callback(null, []);
  var ids = changes.map(function(change) {
    return change.getModelId();
  });
  filter.where[idName] = {inq: ids};
  model.find(filter, function(err, models) {
...
```

#### <a name="apidoc.element.loopback.AccessToken.findById"></a>[function <span class="apidocSignatureSpan">loopback.AccessToken.</span>findById (id, filter, cb)](#apidoc.element.loopback.AccessToken.findById)
- description and source-code
```javascript
function findById(id, filter, cb) {
  throwNotAttached(this.modelName, 'findById');
}
```
- example usage
```shell
...
  var model = new ModelCtor(data);
  model.id = id;
  fn(null, model);
} else if (data) {
  fn(null, new ModelCtor(data));
} else if (id) {
  var filter = {};
  ModelCtor.findById(id, filter, options, function(err, model) {
    if (err) {
      fn(err);
    } else if (model) {
      fn(null, model);
    } else {
      err = new Error(g.f('could not find a model with apidoc.element.loopback.AccessToken.findById %s', id));
      err.statusCode = 404;
...
```

#### <a name="apidoc.element.loopback.AccessToken.findForRequest"></a>[function <span class="apidocSignatureSpan">loopback.AccessToken.</span>findForRequest (req, options, cb)](#apidoc.element.loopback.AccessToken.findForRequest)
- description and source-code
```javascript
findForRequest = function (req, options, cb) {
  if (cb === undefined && typeof options === 'function') {
    cb = options;
    options = {};
  }

  var id = tokenIdForRequest(req, options);

  if (id) {
    this.findById(id, function(err, token) {
      if (err) {
        cb(err);
      } else if (token) {
        token.validate(function(err, isValid) {
          if (err) {
            cb(err);
          } else if (isValid) {
            cb(null, token);
          } else {
            var e = new Error(g.f('Invalid Access Token'));
            e.status = e.statusCode = 401;
            e.code = 'INVALID_TOKEN';
            cb(e);
          }
        });
      } else {
        cb();
      }
    });
  } else {
    process.nextTick(function() {
      cb();
    });
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.AccessToken.findLastChange"></a>[function <span class="apidocSignatureSpan">loopback.AccessToken.</span>findLastChange (id, cb)](#apidoc.element.loopback.AccessToken.findLastChange)
- description and source-code
```javascript
findLastChange = function (id, cb) {
  var Change = this.getChangeModel();
  Change.findOne({where: {modelId: id}}, cb);
}
```
- example usage
```shell
...
PersistedModel.findLastChange = function(id, cb) {
  var Change = this.getChangeModel();
  Change.findOne({where: {modelId: id}}, cb);
};

PersistedModel.updateLastChange = function(id, data, cb) {
  var self = this;
  this.findLastChange(id, function(err, inst) {
    if (err) return cb(err);
    if (!inst) {
      err = new Error(g.f('No change record found for %s with id %s',
        self.modelName, id));
      err.statusCode = 404;
      return cb(err);
    }
...
```

#### <a name="apidoc.element.loopback.AccessToken.findOne"></a>[function <span class="apidocSignatureSpan">loopback.AccessToken.</span>findOne (filter, cb)](#apidoc.element.loopback.AccessToken.findOne)
- description and source-code
```javascript
function findOne(filter, cb) {
  throwNotAttached(this.modelName, 'findOne');
}
```
- example usage
```shell
...
PersistedModel.rectifyChange = function(id, callback) {
  var Change = this.getChangeModel();
  Change.rectifyModelChanges(this.modelName, [id], callback);
};

PersistedModel.findLastChange = function(id, cb) {
  var Change = this.getChangeModel();
  Change.findOne({where: {modelId: id}}, cb);
};

PersistedModel.updateLastChange = function(id, data, cb) {
  var self = this;
  this.findLastChange(id, function(err, inst) {
    if (err) return cb(err);
    if (!inst) {
...
```

#### <a name="apidoc.element.loopback.AccessToken.findOrCreate"></a>[function <span class="apidocSignatureSpan">loopback.AccessToken.</span>findOrCreate (query, data, callback)](#apidoc.element.loopback.AccessToken.findOrCreate)
- description and source-code
```javascript
function findOrCreate(query, data, callback) {
  throwNotAttached(this.modelName, 'findOrCreate');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.AccessToken.forEachProperty"></a>[function <span class="apidocSignatureSpan">loopback.AccessToken.</span>forEachProperty (cb)](#apidoc.element.loopback.AccessToken.forEachProperty)
- description and source-code
```javascript
forEachProperty = function (cb) {
  var props = ModelClass.definition.properties;
  var keys = Object.keys(props);
  for (var i = 0, n = keys.length; i < n; i++) {
    cb(keys[i], props[keys[i]]);
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.AccessToken.getApp"></a>[function <span class="apidocSignatureSpan">loopback.AccessToken.</span>getApp (callback)](#apidoc.element.loopback.AccessToken.getApp)
- description and source-code
```javascript
getApp = function (callback) {
  var self = this;
  self._runWhenAttachedToApp(function(app) {
    assert(self.app);
    assert.equal(app, self.app);
    callback(null, app);
  });
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.AccessToken.getChangeModel"></a>[function <span class="apidocSignatureSpan">loopback.AccessToken.</span>getChangeModel ()](#apidoc.element.loopback.AccessToken.getChangeModel)
- description and source-code
```javascript
getChangeModel = function () {
  var changeModel = this.Change;
  var isSetup = changeModel && changeModel.dataSource;

  assert(isSetup, 'Cannot get a setup Change model for ' + this.modelName);

  return changeModel;
}
```
- example usage
```shell
...
 * @param  {Array}  remoteChanges  An array of change objects.
 * @callback {Function} callback Callback function called with '(err, result)' arguments.  Required.
 * @param {Error} err Error object; see [Error object](http://loopback.io/doc/en/lb2/Error-object.html).
 * @param {Object} result Object with 'deltas' and 'conflicts' properties; see [Change.diff()](#change-diff) for details.
 */

PersistedModel.diff = function(since, remoteChanges, callback) {
  var Change = this.getChangeModel();
  Change.diff(this.modelName, since, remoteChanges, callback);
};

/**
 * Get the changes to a model since the specified checkpoint. Provide a filter object
 * to reduce the number of results returned.
 * @param  {Number}   since    Return only changes since this checkpoint.
...
```

#### <a name="apidoc.element.loopback.AccessToken.getDataSource"></a>[function <span class="apidocSignatureSpan">loopback.AccessToken.</span>getDataSource ()](#apidoc.element.loopback.AccessToken.getDataSource)
- description and source-code
```javascript
getDataSource = function () {
  return this.dataSource;
}
```
- example usage
```shell
...
 * connector that defines it.  Otherwise, uses the default lookup.
 * Override this method to handle complex IDs.
 *
 * @param {*} val The 'id' value. Will be converted to the type that the 'id' property specifies.
 */

PersistedModel.prototype.setId = function(val) {
  var ds = this.getDataSource();
  this[this.getIdName()] = val;
};

/**
 * Get the 'id' value for the 'PersistedModel'.
 *
 * @returns {*} The 'id' value
...
```

#### <a name="apidoc.element.loopback.AccessToken.getIdName"></a>[function <span class="apidocSignatureSpan">loopback.AccessToken.</span>getIdName ()](#apidoc.element.loopback.AccessToken.getIdName)
- description and source-code
```javascript
getIdName = function () {
  var Model = this;
  var ds = Model.getDataSource();

  if (ds.idName) {
    return ds.idName(Model.modelName);
  } else {
    return 'id';
  }
}
```
- example usage
```shell
...
 * Override this method to handle complex IDs.
 *
 * @param {*} val The 'id' value. Will be converted to the type that the 'id' property specifies.
 */

PersistedModel.prototype.setId = function(val) {
  var ds = this.getDataSource();
  this[this.getIdName()] = val;
};

/**
 * Get the 'id' value for the 'PersistedModel'.
 *
 * @returns {*} The 'id' value
 */
...
```

#### <a name="apidoc.element.loopback.AccessToken.getMaxListeners"></a>[function <span class="apidocSignatureSpan">loopback.AccessToken.</span>getMaxListeners ()](#apidoc.element.loopback.AccessToken.getMaxListeners)
- description and source-code
```javascript
getMaxListeners = function () { [native code] }
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.AccessToken.getPropertyType"></a>[function <span class="apidocSignatureSpan">loopback.AccessToken.</span>getPropertyType (propName)](#apidoc.element.loopback.AccessToken.getPropertyType)
- description and source-code
```javascript
getPropertyType = function (propName) {
  var prop = this.definition.properties[propName];
  if (!prop) {
    // The property is not part of the definition
    return null;
  }
  if (!prop.type) {
    throw new Error(g.f('Type not defined for property %s.%s', this.modelName, propName));
    // return null;
  }
  return prop.type.name;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.AccessToken.getSourceId"></a>[function <span class="apidocSignatureSpan">loopback.AccessToken.</span>getSourceId (cb)](#apidoc.element.loopback.AccessToken.getSourceId)
- description and source-code
```javascript
getSourceId = function (cb) {
  var dataSource = this.dataSource;
  if (!dataSource) {
    this.once('dataSourceAttached', this.getSourceId.bind(this, cb));
  }
  assert(
    dataSource.connector.name,
    'Model.getSourceId: cannot get id without dataSource.connector.name'
  );
  var id = [dataSource.connector.name, this.modelName].join('-');
  cb(null, id);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.AccessToken.handleChangeError"></a>[function <span class="apidocSignatureSpan">loopback.AccessToken.</span>handleChangeError (err, operationName)](#apidoc.element.loopback.AccessToken.handleChangeError)
- description and source-code
```javascript
handleChangeError = function (err, operationName) {
  if (!err) return;
  this.emit('error', err, operationName);
}
```
- example usage
```shell
...
    // cleanup
    setInterval(cleanup, cleanupInterval);
  }

  function cleanup() {
    Model.rectifyAllChanges(function(err) {
      if (err) {
        Model.handleChangeError(err, 'cleanup');
      }
    });
  }
};

function rectifyOnSave(ctx, next) {
  var instance = ctx.instance || ctx.currentInstance;
...
```

#### <a name="apidoc.element.loopback.AccessToken.hasManyRemoting"></a>[function <span class="apidocSignatureSpan">loopback.AccessToken.</span>hasManyRemoting (relationName, relation, define)](#apidoc.element.loopback.AccessToken.hasManyRemoting)
- description and source-code
```javascript
hasManyRemoting = function (relationName, relation, define) {
  var pathName = (relation.options.http && relation.options.http.path) || relationName;
  var toModelName = relation.modelTo.modelName;

  var findByIdFunc = this.prototype['__findById__' + relationName];
  define('__findById__' + relationName, {
    isStatic: false,
    http: {verb: 'get', path: '/' + pathName + '/:fk'},
    accepts: [
      {
        arg: 'fk', type: 'any',
        description: format('Foreign key for %s', relationName),
        required: true,
        http: {source: 'path'},
      },
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Find a related item by id for %s.', relationName),
    accessType: 'READ',
    returns: {arg: 'result', type: toModelName, root: true},
    rest: {after: convertNullToNotFoundError.bind(null, toModelName)},
  }, findByIdFunc);

  var destroyByIdFunc = this.prototype['__destroyById__' + relationName];
  define('__destroyById__' + relationName, {
    isStatic: false,
    http: {verb: 'delete', path: '/' + pathName + '/:fk'},
    accepts: [
      {
        arg: 'fk', type: 'any',
        description: format('Foreign key for %s', relationName),
        required: true,
        http: {source: 'path'},
      },
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Delete a related item by id for %s.', relationName),
    accessType: 'WRITE',
    returns: [],
  }, destroyByIdFunc);

  var updateByIdFunc = this.prototype['__updateById__' + relationName];
  define('__updateById__' + relationName, {
    isStatic: false,
    http: {verb: 'put', path: '/' + pathName + '/:fk'},
    accepts: [
      {arg: 'fk', type: 'any',
        description: format('Foreign key for %s', relationName),
        required: true,
        http: {source: 'path'}},
      {arg: 'data', type: 'object', model: toModelName, http: {source: 'body'}},
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Update a related item by id for %s.', relationName),
    accessType: 'WRITE',
    returns: {arg: 'result', type: toModelName, root: true},
  }, updateByIdFunc);

  if (relation.modelThrough || relation.type === 'referencesMany') {
    var modelThrough = relation.modelThrough || relation.modelTo;

    var accepts = [];
    if (relation.type === 'hasMany' && relation.modelThrough) {
      // Restrict: only hasManyThrough relation can have additional properties
      accepts.push({
        arg: 'data', type: 'object', model: modelThrough.modelName,
        http: {source: 'body'},
      });
    }

    var addFunc = this.prototype['__link__' + relationName];
    define('__link__' + relationName, {
      isStatic: false,
      http: {verb: 'put', path: '/' + pathName + '/rel/:fk'},
      accepts: [{arg: 'fk', type: 'any',
        description: format('Foreign key for %s', relationName),
        required: true,
        http: {source: 'path'}},
      ].concat(accepts).concat([
        {arg: 'options', type: 'object', http: 'optionsFromRequest'},
      ]),
      description: format('Add a related item by id for %s.', relationName),
      accessType: 'WRITE',
      returns: {arg: relationName, type: modelThrough.modelName, root: true},
    }, addFunc);

    var removeFunc = this.prototype['__unlink__' + relationName];
    define('__unlink__' + relationName, {
      isStatic: false,
      http: {verb: 'delete', path: '/' + pathName + '/rel/:fk'},
      accepts: [
        {
          arg: 'fk', type: 'any',
          description: format('Foreign key for %s', relationName),
          required: true,
          http: {source: 'path'},
        },
        {arg: 'options', type: 'object', http: 'optionsFromRequest'},
      ],
      description: format('Remove the %s relation to an item by id.', relationName),
      accessType: 'WRITE',
      returns: [],
    }, removeFunc);

    // FIXME: [rfeng] How to map a function with callback(err, true|false) to HEAD?
    // true --> 200 and false --> 404?
    var existsFunc = this.prototype['__exists__' + relatio ...
```
- example usage
```shell
...
    relation.type === 'embedsOne'
  ) {
    ModelCtor.hasOneRemoting(relationName, relation, define);
  } else if (
    relation.type === 'hasMany' ||
    relation.type === 'embedsMany' ||
    relation.type === 'referencesMany') {
    ModelCtor.hasManyRemoting(relationName, relation, define);
  }
}

// handle scopes
var scopes = ModelCtor.scopes || {};
for (var scopeName in scopes) {
  ModelCtor.scopeRemoting(scopeName, scopes[scopeName], define);
...
```

#### <a name="apidoc.element.loopback.AccessToken.hasOneRemoting"></a>[function <span class="apidocSignatureSpan">loopback.AccessToken.</span>hasOneRemoting (relationName, relation, define)](#apidoc.element.loopback.AccessToken.hasOneRemoting)
- description and source-code
```javascript
hasOneRemoting = function (relationName, relation, define) {
  var pathName = (relation.options.http && relation.options.http.path) || relationName;
  var toModelName = relation.modelTo.modelName;

  define('__get__' + relationName, {
    isStatic: false,
    http: {verb: 'get', path: '/' + pathName},
    accepts: [
      {arg: 'refresh', type: 'boolean', http: {source: 'query'}},
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Fetches hasOne relation %s.', relationName),
    accessType: 'READ',
    returns: {arg: relationName, type: relation.modelTo.modelName, root: true},
    rest: {after: convertNullToNotFoundError.bind(null, toModelName)},
  });

  define('__create__' + relationName, {
    isStatic: false,
    http: {verb: 'post', path: '/' + pathName},
    accepts: [
      {
        arg: 'data', type: 'object', model: toModelName,
        http: {source: 'body'},
      },
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Creates a new instance in %s of this model.', relationName),
    accessType: 'WRITE',
    returns: {arg: 'data', type: toModelName, root: true},
  });

  define('__update__' + relationName, {
    isStatic: false,
    http: {verb: 'put', path: '/' + pathName},
    accepts: [
      {
        arg: 'data', type: 'object', model: toModelName,
        http: {source: 'body'},
      },
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Update %s of this model.', relationName),
    accessType: 'WRITE',
    returns: {arg: 'data', type: toModelName, root: true},
  });

  define('__destroy__' + relationName, {
    isStatic: false,
    http: {verb: 'delete', path: '/' + pathName},
    accepts: [
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Deletes %s of this model.', relationName),
    accessType: 'WRITE',
  });
}
```
- example usage
```shell
...
  var relation = relations[relationName];
  if (relation.type === 'belongsTo') {
    ModelCtor.belongsToRemoting(relationName, relation, define);
  } else if (
    relation.type === 'hasOne' ||
    relation.type === 'embedsOne'
  ) {
    ModelCtor.hasOneRemoting(relationName, relation, define);
  } else if (
    relation.type === 'hasMany' ||
    relation.type === 'embedsMany' ||
    relation.type === 'referencesMany') {
    ModelCtor.hasManyRemoting(relationName, relation, define);
  }
}
...
```

#### <a name="apidoc.element.loopback.AccessToken.isHiddenProperty"></a>[function <span class="apidocSignatureSpan">loopback.AccessToken.</span>isHiddenProperty (propertyName)](#apidoc.element.loopback.AccessToken.isHiddenProperty)
- description and source-code
```javascript
isHiddenProperty = function (propertyName) {
  var Model = this;
  var settings = Model.definition && Model.definition.settings;
  var hiddenProperties = settings && (settings.hiddenProperties || settings.hidden);
  if (Array.isArray(hiddenProperties)) {
    // Cache the hidden properties as an object for quick lookup
    settings.hiddenProperties = {};
    for (var i = 0; i < hiddenProperties.length; i++) {
      settings.hiddenProperties[hiddenProperties[i]] = true;
    }
    hiddenProperties = settings.hiddenProperties;
  }
  if (hiddenProperties) {
    return hiddenProperties[propertyName];
  } else {
    return false;
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.AccessToken.isProtectedProperty"></a>[function <span class="apidocSignatureSpan">loopback.AccessToken.</span>isProtectedProperty (propertyName)](#apidoc.element.loopback.AccessToken.isProtectedProperty)
- description and source-code
```javascript
isProtectedProperty = function (propertyName) {
  var Model = this;
  var settings = Model.definition && Model.definition.settings;
  var protectedProperties = settings && (settings.protectedProperties || settings.protected);
  if (Array.isArray(protectedProperties)) {
    // Cache the protected properties as an object for quick lookup
    settings.protectedProperties = {};
    for (var i = 0; i < protectedProperties.length; i++) {
      settings.protectedProperties[protectedProperties[i]] = true;
    }
    protectedProperties = settings.protectedProperties;
  }
  if (protectedProperties) {
    return protectedProperties[propertyName];
  } else {
    return false;
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.AccessToken.listenerCount"></a>[function <span class="apidocSignatureSpan">loopback.AccessToken.</span>listenerCount ()](#apidoc.element.loopback.AccessToken.listenerCount)
- description and source-code
```javascript
listenerCount = function () { [native code] }
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.AccessToken.listeners"></a>[function <span class="apidocSignatureSpan">loopback.AccessToken.</span>listeners ()](#apidoc.element.loopback.AccessToken.listeners)
- description and source-code
```javascript
listeners = function () { [native code] }
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.AccessToken.mixin"></a>[function <span class="apidocSignatureSpan">loopback.AccessToken.</span>mixin (anotherClass, options)](#apidoc.element.loopback.AccessToken.mixin)
- description and source-code
```javascript
mixin = function (anotherClass, options) {
  if (typeof anotherClass === 'string') {
    this.modelBuilder.mixins.applyMixin(this, anotherClass, options);
  } else {
    if (anotherClass.prototype instanceof ModelBaseClass) {
      var props = anotherClass.definition.properties;
      for (var i in props) {
        if (this.definition.properties[i]) {
          continue;
        }
        this.defineProperty(i, props[i]);
      }
    }
    return jutil.mixin(this, anotherClass, options);
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.AccessToken.nestRemoting"></a>[function <span class="apidocSignatureSpan">loopback.AccessToken.</span>nestRemoting (relationName, options, filterCallback)](#apidoc.element.loopback.AccessToken.nestRemoting)
- description and source-code
```javascript
nestRemoting = function (relationName, options, filterCallback) {
  if (typeof options === 'function' && !filterCallback) {
    filterCallback = options;
    options = {};
  }
  options = options || {};

  var regExp = /^__([^_]+)__([^_]+)$/;
  var relation = this.relations[relationName];
  if (relation && relation.modelTo && relation.modelTo.sharedClass) {
    var self = this;
    var sharedClass = this.sharedClass;
    var sharedToClass = relation.modelTo.sharedClass;
    var toModelName = relation.modelTo.modelName;

    var pathName = options.pathName || relation.options.path || relationName;
    var paramName = options.paramName || 'nk';

    var http = [].concat(sharedToClass.http || [])[0];
    var httpPath, acceptArgs;

    if (relation.multiple) {
      httpPath = pathName + '/:' + paramName;
      acceptArgs = [
        {
          arg: paramName, type: 'any', http: {source: 'path'},
          description: format('Foreign key for %s.',  relation.name),
          required: true,
        },
      ];
    } else {
      httpPath = pathName;
      acceptArgs = [];
    }

    if (httpPath[0] !== '/') {
      httpPath = '/' + httpPath;
    }

    // A method should return the method name to use, if it is to be
    // included as a nested method - a falsy return value will skip.
    var filter = filterCallback || options.filterMethod || function(method, relation) {
      var matches = method.name.match(regExp);
      if (matches) {
        return '__' + matches[1] + '__' + relation.name + '__' + matches[2];
      }
    };

    sharedToClass.methods().forEach(function(method) {
      var methodName;
      if (!method.isStatic && (methodName = filter(method, relation))) {
        var prefix = relation.multiple ? '__findById__' : '__get__';
        var getterName = options.getterName || (prefix + relationName);

        var getterFn = relation.modelFrom.prototype[getterName];
        if (typeof getterFn !== 'function') {
          throw new Error(g.f('Invalid remote method: '%s'', getterName));
        }

        var nestedFn = relation.modelTo.prototype[method.name];
        if (typeof nestedFn !== 'function') {
          throw new Error(g.f('Invalid remote method: '%s'', method.name));
        }

        var opts = {};

        opts.accepts = acceptArgs.concat(method.accepts || []);
        opts.returns = [].concat(method.returns || []);
        opts.description = method.description;
        opts.accessType = method.accessType;
        opts.rest = extend({}, method.rest || {});
        opts.rest.delegateTo = method;

        opts.http = [];
        var routes = [].concat(method.http || []);
        routes.forEach(function(route) {
          if (route.path) {
            var copy = extend({}, route);
            copy.path = httpPath + route.path;
            opts.http.push(copy);
          }
        });

        if (relation.multiple) {
          sharedClass.defineMethod(methodName, opts, function(fkId) {
            var args = Array.prototype.slice.call(arguments, 1);
            var last = args[args.length - 1];
            var cb = typeof last === 'function' ? last : null;
            this[getterName](fkId, function(err, inst) {
              if (err && cb) return cb(err);
              if (inst instanceof relation.modelTo) {
                try {
                  nestedFn.apply(inst, args);
                } catch (err) {
                  if (cb) return cb(err);
                }
              } else if (cb) {
                cb(err, null);
              }
            });
          }, method.isStatic);
        } else {
          sharedClass.defineMethod(methodName, opts, function() {
            var args = Array.prototype.slice.call(arguments);
            var last = args[args.length - 1];
            var cb = typeof last === 'function' ? last : null;
            this[getterName](function(err, inst) {
              if (err && cb) return cb(err);
              if (inst instanceof relation.modelTo) {
                try {
                  nestedFn.apply(inst, args);
                } catch (err) {
                  if (cb) return ...
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.AccessToken.notifyObserversAround"></a>[function <span class="apidocSignatureSpan">loopback.AccessToken.</span>notifyObserversAround (operation, context, fn, callback)](#apidoc.element.loopback.AccessToken.notifyObserversAround)
- description and source-code
```javascript
notifyObserversAround = function (operation, context, fn, callback) {
  var self = this;
  context = context || {};
  // Add callback to the context object so that an observer can skip other
  // ones by calling the callback function directly and not calling next
  if (context.end === undefined) {
    context.end = callback;
  }
  // First notify before observers
  return self.notifyObserversOf('before ' + operation, context,
    function(err, context) {
      if (err) return callback(err);

      function cbForWork(err) {
        var args = [].slice.call(arguments, 0);
        if (err) return callback.apply(null, args);
        // Find the list of params from the callback in addition to err
        var returnedArgs = args.slice(1);
        // Set up the array of results
        context.results = returnedArgs;
        // Notify after observers
        self.notifyObserversOf('after ' + operation, context,
          function(err, context) {
            if (err) return callback(err, context);
            var results = returnedArgs;
            if (context && Array.isArray(context.results)) {
              // Pickup the results from context
              results = context.results;
            }
            // Build the list of params for final callback
            var args = [err].concat(results);
            callback.apply(null, args);
          });
      }

      if (fn.length === 1) {
        // fn(done)
        fn(cbForWork);
      } else {
        // fn(context, done)
        fn(context, cbForWork);
      }
    });
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.AccessToken.notifyObserversOf"></a>[function <span class="apidocSignatureSpan">loopback.AccessToken.</span>notifyObserversOf (operation, context, callback)](#apidoc.element.loopback.AccessToken.notifyObserversOf)
- description and source-code
```javascript
notifyObserversOf = function (operation, context, callback) {
  var self = this;
  if (!callback) callback = utils.createPromiseCallback();

  function createNotifier(op) {
    return function(ctx, done) {
      if (typeof ctx === 'function' && done === undefined) {
        done = ctx;
        ctx = context;
      }
      self.notifyObserversOf(op, context, done);
    };
  }

  if (Array.isArray(operation)) {
    var tasks = [];
    for (var i = 0, n = operation.length; i < n; i++) {
      tasks.push(createNotifier(operation[i]));
    }
    return async.waterfall(tasks, callback);
  }

  var observers = this._observers && this._observers[operation];

  this._notifyBaseObservers(operation, context, function doNotify(err) {
    if (err) return callback(err, context);
    if (!observers || !observers.length) return callback(null, context);

    async.eachSeries(
      observers,
      function notifySingleObserver(fn, next) {
        var retval = fn(context, next);
        if (retval && typeof retval.then === 'function') {
          retval.then(
            function() { next(); return null; },
            next // error handler
          );
        }
      },
      function(err) { callback(err, context); }
    );
  });
  return callback.promise;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.AccessToken.observe"></a>[function <span class="apidocSignatureSpan">loopback.AccessToken.</span>observe (operation, listener)](#apidoc.element.loopback.AccessToken.observe)
- description and source-code
```javascript
observe = function (operation, listener) {
  this._observers = this._observers || {};
  if (!this._observers[operation]) {
    this._observers[operation] = [];
  }

  this._observers[operation].push(listener);
}
```
- example usage
```shell
...
var idType = idProp && idProp.type;
var idDefn = idProp && idProp.defaultFn;
if (idType !== String || !(idDefn === 'uuid' || idDefn === 'guid')) {
  deprecated('The model ' + this.modelName + ' is tracking changes, ' +
    'which requires a string id with GUID/UUID default value.');
}

Model.observe('after save', rectifyOnSave);

Model.observe('after delete', rectifyOnDelete);

// Only run if the run time is server
// Can switch off cleanup by setting the interval to -1
if (runtime.isServer && cleanupInterval > 0) {
  // initial cleanup
...
```

#### <a name="apidoc.element.loopback.AccessToken.on"></a>[function <span class="apidocSignatureSpan">loopback.AccessToken.</span>on ()](#apidoc.element.loopback.AccessToken.on)
- description and source-code
```javascript
on = function () { [native code] }
```
- example usage
```shell
...
    this.remotes().addClass(Model.Change.sharedClass);
  }
  clearHandlerCache(this);
  this.emit('modelRemoted', Model.sharedClass);
}

var self = this;
Model.on('remoteMethodDisabled', function(model, methodName) {
  self.emit('remoteMethodDisabled', model, methodName);
});
Model.on('remoteMethodAdded', function(model) {
  self.emit('remoteMethodAdded', model);
});

Model.shared = isPublic;
...
```

#### <a name="apidoc.element.loopback.AccessToken.once"></a>[function <span class="apidocSignatureSpan">loopback.AccessToken.</span>once ()](#apidoc.element.loopback.AccessToken.once)
- description and source-code
```javascript
once = function () { [native code] }
```
- example usage
```shell
...
    remotes.afterError(className + '.' + name, fn);
  });
};

ModelCtor._runWhenAttachedToApp = function(fn) {
  if (this.app) return fn(this.app);
  var self = this;
  self.once('attached', function() {
    fn(self.app);
  });
};

if ('injectOptionsFromRemoteContext' in options) {
  console.warn(g.f(
    '%s is using model setting %s which is no longer available.',
...
```

#### <a name="apidoc.element.loopback.AccessToken.patchOrCreate"></a>[function <span class="apidocSignatureSpan">loopback.AccessToken.</span>patchOrCreate (data, callback)](#apidoc.element.loopback.AccessToken.patchOrCreate)
- description and source-code
```javascript
function upsert(data, callback) {
  throwNotAttached(this.modelName, 'upsert');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.AccessToken.patchOrCreateWithWhere"></a>[function <span class="apidocSignatureSpan">loopback.AccessToken.</span>patchOrCreateWithWhere (where, data, callback)](#apidoc.element.loopback.AccessToken.patchOrCreateWithWhere)
- description and source-code
```javascript
function upsertWithWhere(where, data, callback) {
  throwNotAttached(this.modelName, 'upsertWithWhere');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.AccessToken.prependListener"></a>[function <span class="apidocSignatureSpan">loopback.AccessToken.</span>prependListener ()](#apidoc.element.loopback.AccessToken.prependListener)
- description and source-code
```javascript
prependListener = function () { [native code] }
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.AccessToken.prependOnceListener"></a>[function <span class="apidocSignatureSpan">loopback.AccessToken.</span>prependOnceListener ()](#apidoc.element.loopback.AccessToken.prependOnceListener)
- description and source-code
```javascript
prependOnceListener = function () { [native code] }
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.AccessToken.rectifyAllChanges"></a>[function <span class="apidocSignatureSpan">loopback.AccessToken.</span>rectifyAllChanges (callback)](#apidoc.element.loopback.AccessToken.rectifyAllChanges)
- description and source-code
```javascript
rectifyAllChanges = function (callback) {
  this.getChangeModel().rectifyAll(callback);
}
```
- example usage
```shell
...
    cleanup();

    // cleanup
    setInterval(cleanup, cleanupInterval);
  }

  function cleanup() {
    Model.rectifyAllChanges(function(err) {
      if (err) {
        Model.handleChangeError(err, 'cleanup');
      }
    });
  }
};
...
```

#### <a name="apidoc.element.loopback.AccessToken.rectifyChange"></a>[function <span class="apidocSignatureSpan">loopback.AccessToken.</span>rectifyChange (id, callback)](#apidoc.element.loopback.AccessToken.rectifyChange)
- description and source-code
```javascript
rectifyChange = function (id, callback) {
  var Change = this.getChangeModel();
  Change.rectifyModelChanges(this.modelName, [id], callback);
}
```
- example usage
```shell
...
  debug('rectifyOnSave %s -> ' + (id ? 'id %j' : '%s'),
    ctx.Model.modelName, id ? id : 'ALL');
  debug('context instance:%j currentInstance:%j where:%j data %j',
    ctx.instance, ctx.currentInstance, ctx.where, ctx.data);
}

if (id) {
  ctx.Model.rectifyChange(id, reportErrorAndNext);
} else {
  ctx.Model.rectifyAllChanges(reportErrorAndNext);
}

function reportErrorAndNext(err) {
  if (err) {
    ctx.Model.handleChangeError(err, 'after save');
...
```

#### <a name="apidoc.element.loopback.AccessToken.registerProperty"></a>[function <span class="apidocSignatureSpan">loopback.AccessToken.</span>registerProperty (propertyName)](#apidoc.element.loopback.AccessToken.registerProperty)
- description and source-code
```javascript
registerProperty = function (propertyName) {
  var properties = modelDefinition.build();
  var prop = properties[propertyName];
  var DataType = prop.type;
  if (!DataType) {
    throw new Error(g.f('Invalid type for property %s', propertyName));
  }

  if (prop.required) {
    var requiredOptions = typeof prop.required === 'object' ? prop.required : undefined;
    ModelClass.validatesPresenceOf(propertyName, requiredOptions);
  }

  Object.defineProperty(ModelClass.prototype, propertyName, {
    get: function() {
      if (ModelClass.getter[propertyName]) {
        return ModelClass.getter[propertyName].call(this); // Try getter first
      } else {
        return this.__data && this.__data[propertyName]; // Try __data
      }
    },
    set: function(value) {
      var DataType = ModelClass.definition.properties[propertyName].type;
      if (Array.isArray(DataType) || DataType === Array) {
        DataType = List;
      } else if (DataType === Date) {
        DataType = DateType;
      } else if (DataType === Boolean) {
        DataType = BooleanType;
      } else if (typeof DataType === 'string') {
        DataType = modelBuilder.resolveType(DataType);
      }

      var persistUndefinedAsNull = ModelClass.definition.settings.persistUndefinedAsNull;
      if (value === undefined && persistUndefinedAsNull) {
        value = null;
      }

      if (ModelClass.setter[propertyName]) {
        ModelClass.setter[propertyName].call(this, value); // Try setter first
      } else {
        this.__data = this.__data || {};
        if (value === null || value === undefined) {
          this.__data[propertyName] = value;
        } else {
          if (DataType === List) {
            this.__data[propertyName] = DataType(value, properties[propertyName].type, this.__data);
          } else {
            // Assume the type constructor handles Constructor() call
            // If not, we should call new DataType(value).valueOf();
            this.__data[propertyName] = (value instanceof DataType) ? value : DataType(value);
          }
        }
      }
    },
    configurable: true,
    enumerable: true,
  });

  // FIXME: [rfeng] Do we need to keep the raw data?
  // Use $ as the prefix to avoid conflicts with properties such as _id
  Object.defineProperty(ModelClass.prototype, '$' + propertyName, {
    get: function() {
      return this.__data && this.__data[propertyName];
    },
    set: function(value) {
      if (!this.__data) {
        this.__data = {};
      }
      this.__data[propertyName] = value;
    },
    configurable: true,
    enumerable: false,
  });
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.AccessToken.remoteMethod"></a>[function <span class="apidocSignatureSpan">loopback.AccessToken.</span>remoteMethod (name, options)](#apidoc.element.loopback.AccessToken.remoteMethod)
- description and source-code
```javascript
remoteMethod = function (name, options) {
  if (options.isStatic === undefined) {
    var m = name.match(/^prototype\.(.*)$/);
    options.isStatic = !m;
    name = options.isStatic ? name : m[1];
  }

  if (options.accepts) {
    options = extend({}, options);
    options.accepts = setupOptionsArgs(options.accepts);
  }

  this.sharedClass.defineMethod(name, options);
  this.emit('remoteMethodAdded', this.sharedClass);
}
```
- example usage
```shell
...
  /**
* Enable remote invocation for the specified method.
* See [Remote methods](http://loopback.io/doc/en/lb2/Remote-methods.html) for more information.
*
* Static method example:
* '''js
* Model.myMethod();
* Model.remoteMethod('myMethod');
* '''
*
* @param {String} name The name of the method.
* @param {Object} options The remoting options.
* See [Remote methods - Options](http://loopback.io/doc/en/lb2/Remote-methods.html#options).
*/
...
```

#### <a name="apidoc.element.loopback.AccessToken.remove"></a>[function <span class="apidocSignatureSpan">loopback.AccessToken.</span>remove (where, cb)](#apidoc.element.loopback.AccessToken.remove)
- description and source-code
```javascript
function destroyAll(where, cb) {
  throwNotAttached(this.modelName, 'destroyAll');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.AccessToken.removeAllListeners"></a>[function <span class="apidocSignatureSpan">loopback.AccessToken.</span>removeAllListeners ()](#apidoc.element.loopback.AccessToken.removeAllListeners)
- description and source-code
```javascript
removeAllListeners = function () { [native code] }
```
- example usage
```shell
...

var idName = this.getIdName();
var Model = this;
var changes = new PassThrough({objectMode: true});
var writeable = true;

changes.destroy = function() {
  changes.removeAllListeners('error');
  changes.removeAllListeners('end');
  writeable = false;
  changes = null;
};

changes.on('error', function() {
  writeable = false;
...
```

#### <a name="apidoc.element.loopback.AccessToken.removeById"></a>[function <span class="apidocSignatureSpan">loopback.AccessToken.</span>removeById (id, cb)](#apidoc.element.loopback.AccessToken.removeById)
- description and source-code
```javascript
function deleteById(id, cb) {
  throwNotAttached(this.modelName, 'deleteById');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.AccessToken.removeListener"></a>[function <span class="apidocSignatureSpan">loopback.AccessToken.</span>removeListener ()](#apidoc.element.loopback.AccessToken.removeListener)
- description and source-code
```javascript
removeListener = function () { [native code] }
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.AccessToken.removeObserver"></a>[function <span class="apidocSignatureSpan">loopback.AccessToken.</span>removeObserver (operation, listener)](#apidoc.element.loopback.AccessToken.removeObserver)
- description and source-code
```javascript
removeObserver = function (operation, listener) {
  if (!(this._observers && this._observers[operation])) return;

  var index = this._observers[operation].indexOf(listener);
  if (index !== -1) {
    return this._observers[operation].splice(index, 1);
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.AccessToken.replaceById"></a>[function <span class="apidocSignatureSpan">loopback.AccessToken.</span>replaceById (id, data, cb)](#apidoc.element.loopback.AccessToken.replaceById)
- description and source-code
```javascript
function replaceById(id, data, cb) {
  throwNotAttached(this.modelName, 'replaceById');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.AccessToken.replaceOrCreate"></a>[function <span class="apidocSignatureSpan">loopback.AccessToken.</span>replaceOrCreate (data, callback)](#apidoc.element.loopback.AccessToken.replaceOrCreate)
- description and source-code
```javascript
function replaceOrCreate(data, callback) {
  throwNotAttached(this.modelName, 'replaceOrCreate');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.AccessToken.replicate"></a>[function <span class="apidocSignatureSpan">loopback.AccessToken.</span>replicate (since, targetModel, options, callback)](#apidoc.element.loopback.AccessToken.replicate)
- description and source-code
```javascript
replicate = function (since, targetModel, options, callback) {
  var lastArg = arguments[arguments.length - 1];

  if (typeof lastArg === 'function' && arguments.length > 1) {
    callback = lastArg;
  }

  if (typeof since === 'function' && since.modelName) {
    targetModel = since;
    since = -1;
  }

  if (typeof since !== 'object') {
    since = {source: since, target: since};
  }

  if (typeof options === 'function') {
    options = {};
  }

  options = options || {};

  var sourceModel = this;
  callback = callback || utils.createPromiseCallback();

  debug('replicating %s since %s to %s since %s',
    sourceModel.modelName,
    since.source,
    targetModel.modelName,
    since.target);
  if (options.filter) {
    debug('\twith filter %j', options.filter);
  }

  // In order to avoid a race condition between the replication and
  // other clients modifying the data, we must create the new target
  // checkpoint as the first step of the replication process.
  // As a side-effect of that, the replicated changes are associated
  // with the new target checkpoint. This is actually desired behaviour,
  // because that way clients replicating *from* the target model
  // since the new checkpoint will pick these changes up.
  // However, it increases the likelihood of (false) conflicts being detected.
  // In order to prevent that, we run the replication multiple times,
  // until no changes were replicated, but at most MAX_ATTEMPTS times
  // to prevent starvation. In most cases, the second run will find no changes
  // to replicate and we are done.
  var MAX_ATTEMPTS = 3;

  run(1, since);
  return callback.promise;

  function run(attempt, since) {
    debug('\titeration #%s', attempt);
    tryReplicate(sourceModel, targetModel, since, options, next);

    function next(err, conflicts, cps, updates) {
      var finished = err || conflicts.length ||
        !updates || updates.length === 0 ||
        attempt >= MAX_ATTEMPTS;

      if (finished)
        return callback(err, conflicts, cps);
      run(attempt + 1, cps);
    }
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.AccessToken.scopeRemoting"></a>[function <span class="apidocSignatureSpan">loopback.AccessToken.</span>scopeRemoting (scopeName, scope, define)](#apidoc.element.loopback.AccessToken.scopeRemoting)
- description and source-code
```javascript
scopeRemoting = function (scopeName, scope, define) {
  var pathName =
    (scope.options && scope.options.http && scope.options.http.path) || scopeName;

  var isStatic = scope.isStatic;
  var toModelName = scope.modelTo.modelName;

  // https://github.com/strongloop/loopback/issues/811
  // Check if the scope is for a hasMany relation
  var relation = this.relations[scopeName];
  if (relation && relation.modelTo) {
    // For a relation with through model, the toModelName should be the one
    // from the target model
    toModelName = relation.modelTo.modelName;
  }

  define('__get__' + scopeName, {
    isStatic: isStatic,
    http: {verb: 'get', path: '/' + pathName},
    accepts: [
      {arg: 'filter', type: 'object'},
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Queries %s of %s.', scopeName, this.modelName),
    accessType: 'READ',
    returns: {arg: scopeName, type: [toModelName], root: true},
  });

  define('__create__' + scopeName, {
    isStatic: isStatic,
    http: {verb: 'post', path: '/' + pathName},
    accepts: [
      {
        arg: 'data',
        type: 'object',
        allowArray: true,
        model: toModelName,
        http: {source: 'body'},
      },
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Creates a new instance in %s of this model.', scopeName),
    accessType: 'WRITE',
    returns: {arg: 'data', type: toModelName, root: true},
  });

  define('__delete__' + scopeName, {
    isStatic: isStatic,
    http: {verb: 'delete', path: '/' + pathName},
    accepts: [
      {
        arg: 'where', type: 'object',
        // The "where" argument is not exposed in the REST API
        // but we need to provide a value so that we can pass "options"
        // as the third argument.
        http: function(ctx) { return undefined; },
      },
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Deletes all %s of this model.', scopeName),
    accessType: 'WRITE',
  });

  define('__count__' + scopeName, {
    isStatic: isStatic,
    http: {verb: 'get', path: '/' + pathName + '/count'},
    accepts: [
      {
        arg: 'where', type: 'object',
        description: 'Criteria to match model instances',
      },
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Counts %s of %s.', scopeName, this.modelName),
    accessType: 'READ',
    returns: {arg: 'count',  type: 'number'},
  });
}
```
- example usage
```shell
...
        ModelCtor.hasManyRemoting(relationName, relation, define);
      }
    }

    // handle scopes
    var scopes = ModelCtor.scopes || {};
    for (var scopeName in scopes) {
      ModelCtor.scopeRemoting(scopeName, scopes[scopeName], define);
    }
  });

  return ModelCtor;
};

/*!
...
```

#### <a name="apidoc.element.loopback.AccessToken.setMaxListeners"></a>[function <span class="apidocSignatureSpan">loopback.AccessToken.</span>setMaxListeners ()](#apidoc.element.loopback.AccessToken.setMaxListeners)
- description and source-code
```javascript
setMaxListeners = function () { [native code] }
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.AccessToken.setup"></a>[function <span class="apidocSignatureSpan">loopback.AccessToken.</span>setup ()](#apidoc.element.loopback.AccessToken.setup)
- description and source-code
```javascript
function setupPersistedModel() {
  // call Model.setup first
  Model.setup.call(this);

  var PersistedModel = this;

  // enable change tracking (usually for replication)
  if (this.settings.trackChanges) {
    PersistedModel._defineChangeModel();
    PersistedModel.once('dataSourceAttached', function() {
      PersistedModel.enableChangeTracking();
    });
  } else if (this.settings.enableRemoteReplication) {
    PersistedModel._defineChangeModel();
  }

  PersistedModel.setupRemoting();
}
```
- example usage
```shell
...
  Model.createOptionsFromRemotingContext = function(ctx) {
    return {
      accessToken: ctx.req.accessToken,
    };
  };

  // setup the initial model
  Model.setup();

  return Model;
};
...
```

#### <a name="apidoc.element.loopback.AccessToken.setupRemoting"></a>[function <span class="apidocSignatureSpan">loopback.AccessToken.</span>setupRemoting ()](#apidoc.element.loopback.AccessToken.setupRemoting)
- description and source-code
```javascript
setupRemoting = function () {
  var PersistedModel = this;
  var typeName = PersistedModel.modelName;
  var options = PersistedModel.settings;

  // This is just for LB 3.x
  options.replaceOnPUT = options.replaceOnPUT !== false;

  function setRemoting(scope, name, options) {
    var fn = scope[name];
    fn._delegate = true;
    options.isStatic = scope === PersistedModel;
    PersistedModel.remoteMethod(name, options);
  }

  setRemoting(PersistedModel, 'create', {
    description: 'Create a new instance of the model and persist it into the data source.',
    accessType: 'WRITE',
    accepts: [
      {
        arg: 'data', type: 'object', model: typeName, allowArray: true,
        description: 'Model instance data',
        http: {source: 'body'},
      },
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    returns: {arg: 'data', type: typeName, root: true},
    http: {verb: 'post', path: '/'},
  });

  var upsertOptions = {
    aliases: ['upsert', 'updateOrCreate'],
    description: 'Patch an existing model instance or insert a new one ' +
      'into the data source.',
    accessType: 'WRITE',
    accepts: [
      {
        arg: 'data', type: 'object', model: typeName, http: {source: 'body'},
        description: 'Model instance data',
      },
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    returns: {arg: 'data', type: typeName, root: true},
    http: [{verb: 'patch', path: '/'}],
  };

  if (!options.replaceOnPUT) {
    upsertOptions.http.unshift({verb: 'put', path: '/'});
  }
  setRemoting(PersistedModel, 'patchOrCreate', upsertOptions);

  var replaceOrCreateOptions = {
    description: 'Replace an existing model instance or insert a new one into the data source.',
    accessType: 'WRITE',
    accepts: [
      {
        arg: 'data', type: 'object', model: typeName,
        http: {source: 'body'},
        description: 'Model instance data',
      },
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    returns: {arg: 'data', type: typeName, root: true},
    http: [{verb: 'post', path: '/replaceOrCreate'}],
  };

  if (options.replaceOnPUT) {
    replaceOrCreateOptions.http.push({verb: 'put', path: '/'});
  }

  setRemoting(PersistedModel, 'replaceOrCreate', replaceOrCreateOptions);

  setRemoting(PersistedModel, 'upsertWithWhere', {
    aliases: ['patchOrCreateWithWhere'],
    description: 'Update an existing model instance or insert a new one into ' +
      'the data source based on the where criteria.',
    accessType: 'WRITE',
    accepts: [
      {arg: 'where', type: 'object', http: {source: 'query'},
        description: 'Criteria to match model instances'},
      {arg: 'data', type: 'object', model: typeName, http: {source: 'body'},
        description: 'An object of model property name/value pairs'},
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    returns: {arg: 'data', type: typeName, root: true},
    http: {verb: 'post', path: '/upsertWithWhere'},
  });

  setRemoting(PersistedModel, 'exists', {
    description: 'Check whether a model instance exists in the data source.',
    accessType: 'READ',
    accepts: [
      {arg: 'id', type: 'any', description: 'Model id', required: true},
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    returns: {arg: 'exists', type: 'boolean'},
    http: [
      {verb: 'get', path: '/:id/exists'},
      {verb: 'head', path: '/:id'},
    ],
    rest: {
      // After hook to map exists to 200/404 for HEAD
      after: function(ctx, cb) {
        if (ctx.req.method === 'GET') {
          // For GET, return {exists: true|false} as is
          return cb();
        }
        if (!ctx.result.exists) {
          var modelName = ctx.method.sharedClass.name;
          var id = ctx.getArgByName('id');
          var msg = 'Unknown "' + modelName + '" id "' + id + '".';
          var error = new Error(msg);
          error.statusCode = error.status = 404;
          error.code = 'MODEL_NOT_FOUND';
          cb(error);
        } else {
          cb();
        } ...
```
- example usage
```shell
...
    PersistedModel.once('dataSourceAttached', function() {
      PersistedModel.enableChangeTracking();
    });
  } else if (this.settings.enableRemoteReplication) {
    PersistedModel._defineChangeModel();
  }

  PersistedModel.setupRemoting();
};

/*!
 * Throw an error telling the user that the method is not available and why.
 */

function throwNotAttached(modelName, methodName) {
...
```

#### <a name="apidoc.element.loopback.AccessToken.sharedCtor"></a>[function <span class="apidocSignatureSpan">loopback.AccessToken.</span>sharedCtor (data, id, options, fn)](#apidoc.element.loopback.AccessToken.sharedCtor)
- description and source-code
```javascript
sharedCtor = function (data, id, options, fn) {
  var ModelCtor = this;

  var isRemoteInvocationWithOptions = typeof data !== 'object' &&
    typeof id === 'object' &&
    typeof options === 'function';
  if (isRemoteInvocationWithOptions) {
    // sharedCtor(id, options, fn)
    fn = options;
    options = id;
    id = data;
    data = null;
  } else if (typeof data === 'function') {
    // sharedCtor(fn)
    fn = data;
    data = null;
    id = null;
    options = null;
  } else if (typeof id === 'function') {
    // sharedCtor(data, fn)
    // sharedCtor(id, fn)
    fn = id;
    options = null;

    if (typeof data !== 'object') {
      id = data;
      data = null;
    } else {
      id = null;
    }
  }

  if (id && data) {
    var model = new ModelCtor(data);
    model.id = id;
    fn(null, model);
  } else if (data) {
    fn(null, new ModelCtor(data));
  } else if (id) {
    var filter = {};
    ModelCtor.findById(id, filter, options, function(err, model) {
      if (err) {
        fn(err);
      } else if (model) {
        fn(null, model);
      } else {
        err = new Error(g.f('could not find a model with apidoc.element.loopback.AccessToken.sharedCtor %s', id));
        err.statusCode = 404;
        err.code = 'MODEL_NOT_FOUND';
        fn(err);
      }
    });
  } else {
    fn(new Error(g.f('must specify an apidoc.element.loopback.AccessToken.sharedCtor or {{data}}')));
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.AccessToken.super_"></a>[function <span class="apidocSignatureSpan">loopback.AccessToken.</span>super_ (data, options)](#apidoc.element.loopback.AccessToken.super_)
- description and source-code
```javascript
function ModelConstructor(data, options) {
  if (!(this instanceof ModelConstructor)) {
    return new ModelConstructor(data, options);
  }
  if (ModelClass.settings.unresolved) {
    throw new Error(g.f('Model %s is not defined.', ModelClass.modelName));
  }
  ModelBaseClass.apply(this, arguments);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.AccessToken.update"></a>[function <span class="apidocSignatureSpan">loopback.AccessToken.</span>update (where, data, cb)](#apidoc.element.loopback.AccessToken.update)
- description and source-code
```javascript
function updateAll(where, data, cb) {
  throwNotAttached(this.modelName, 'updateAll');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.AccessToken.updateAll"></a>[function <span class="apidocSignatureSpan">loopback.AccessToken.</span>updateAll (where, data, cb)](#apidoc.element.loopback.AccessToken.updateAll)
- description and source-code
```javascript
function updateAll(where, data, cb) {
  throwNotAttached(this.modelName, 'updateAll');
}
```
- example usage
```shell
...

  /**
* Update multiple instances that match the where clause.
*
* Example:
*
*'''js
* Employee.updateAll({managerId: 'x001'}, {managerId: 'x002'}, function(err, info) {
*     ...
* });
* '''
*
* @param {Object} [where] Optional 'where' filter, like
* '''
* { key: val, key2: {gt: 'val2'}, ...}
...
```

#### <a name="apidoc.element.loopback.AccessToken.updateLastChange"></a>[function <span class="apidocSignatureSpan">loopback.AccessToken.</span>updateLastChange (id, data, cb)](#apidoc.element.loopback.AccessToken.updateLastChange)
- description and source-code
```javascript
updateLastChange = function (id, data, cb) {
  var self = this;
  this.findLastChange(id, function(err, inst) {
    if (err) return cb(err);
    if (!inst) {
      err = new Error(g.f('No change record found for %s with id %s',
        self.modelName, id));
      err.statusCode = 404;
      return cb(err);
    }

    inst.updateAttributes(data, cb);
  });
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.AccessToken.updateOrCreate"></a>[function <span class="apidocSignatureSpan">loopback.AccessToken.</span>updateOrCreate (data, callback)](#apidoc.element.loopback.AccessToken.updateOrCreate)
- description and source-code
```javascript
function upsert(data, callback) {
  throwNotAttached(this.modelName, 'upsert');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.AccessToken.upsert"></a>[function <span class="apidocSignatureSpan">loopback.AccessToken.</span>upsert (data, callback)](#apidoc.element.loopback.AccessToken.upsert)
- description and source-code
```javascript
function upsert(data, callback) {
  throwNotAttached(this.modelName, 'upsert');
}
```
- example usage
```shell
...
  }
});

// then save
function save() {
  inst.trigger('save', function(saveDone) {
    inst.trigger('update', function(updateDone) {
      Model.upsert(inst, function(err) {
        inst._initProperties(data);
        updateDone.call(inst, function() {
          saveDone.call(inst, function() {
            callback(err, inst);
          });
        });
      });
...
```

#### <a name="apidoc.element.loopback.AccessToken.upsertWithWhere"></a>[function <span class="apidocSignatureSpan">loopback.AccessToken.</span>upsertWithWhere (where, data, callback)](#apidoc.element.loopback.AccessToken.upsertWithWhere)
- description and source-code
```javascript
function upsertWithWhere(where, data, callback) {
  throwNotAttached(this.modelName, 'upsertWithWhere');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.AccessToken.validate"></a>[function <span class="apidocSignatureSpan">loopback.AccessToken.</span>validate ()](#apidoc.element.loopback.AccessToken.validate)
- description and source-code
```javascript
validate = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.AccessToken.validateAsync"></a>[function <span class="apidocSignatureSpan">loopback.AccessToken.</span>validateAsync ()](#apidoc.element.loopback.AccessToken.validateAsync)
- description and source-code
```javascript
validateAsync = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.AccessToken.validatesAbsenceOf"></a>[function <span class="apidocSignatureSpan">loopback.AccessToken.</span>validatesAbsenceOf ()](#apidoc.element.loopback.AccessToken.validatesAbsenceOf)
- description and source-code
```javascript
validatesAbsenceOf = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.AccessToken.validatesExclusionOf"></a>[function <span class="apidocSignatureSpan">loopback.AccessToken.</span>validatesExclusionOf ()](#apidoc.element.loopback.AccessToken.validatesExclusionOf)
- description and source-code
```javascript
validatesExclusionOf = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.AccessToken.validatesFormatOf"></a>[function <span class="apidocSignatureSpan">loopback.AccessToken.</span>validatesFormatOf ()](#apidoc.element.loopback.AccessToken.validatesFormatOf)
- description and source-code
```javascript
validatesFormatOf = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.AccessToken.validatesInclusionOf"></a>[function <span class="apidocSignatureSpan">loopback.AccessToken.</span>validatesInclusionOf ()](#apidoc.element.loopback.AccessToken.validatesInclusionOf)
- description and source-code
```javascript
validatesInclusionOf = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.AccessToken.validatesLengthOf"></a>[function <span class="apidocSignatureSpan">loopback.AccessToken.</span>validatesLengthOf ()](#apidoc.element.loopback.AccessToken.validatesLengthOf)
- description and source-code
```javascript
validatesLengthOf = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.AccessToken.validatesNumericalityOf"></a>[function <span class="apidocSignatureSpan">loopback.AccessToken.</span>validatesNumericalityOf ()](#apidoc.element.loopback.AccessToken.validatesNumericalityOf)
- description and source-code
```javascript
validatesNumericalityOf = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.AccessToken.validatesPresenceOf"></a>[function <span class="apidocSignatureSpan">loopback.AccessToken.</span>validatesPresenceOf ()](#apidoc.element.loopback.AccessToken.validatesPresenceOf)
- description and source-code
```javascript
validatesPresenceOf = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.AccessToken.validatesUniquenessOf"></a>[function <span class="apidocSignatureSpan">loopback.AccessToken.</span>validatesUniquenessOf ()](#apidoc.element.loopback.AccessToken.validatesUniquenessOf)
- description and source-code
```javascript
validatesUniquenessOf = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```



# <a name="apidoc.module.loopback.AccessToken.prototype"></a>[module loopback.AccessToken.prototype](#apidoc.module.loopback.AccessToken.prototype)

#### <a name="apidoc.element.loopback.AccessToken.prototype.validate"></a>[function <span class="apidocSignatureSpan">loopback.AccessToken.prototype.</span>validate (cb)](#apidoc.element.loopback.AccessToken.prototype.validate)
- description and source-code
```javascript
validate = function (cb) {
  try {
    assert(
        this.created && typeof this.created.getTime === 'function',
      'token.created must be a valid Date'
    );
    assert(this.ttl !== 0, 'token.ttl must be not be 0');
    assert(this.ttl, 'token.ttl must exist');
    assert(this.ttl >= -1, 'token.ttl must be >= -1');

    var AccessToken = this.constructor;
    var userRelation = AccessToken.relations.user; // may not be set up
    var User = userRelation && userRelation.modelTo;

    // redefine user model if accessToken's principalType is available
    if (this.principalType) {
      User = AccessToken.registry.findModel(this.principalType);
      if (!User) {
        process.nextTick(function() {
          return cb(null, false);
        });
      }
    }

    var now = Date.now();
    var created = this.created.getTime();
    var elapsedSeconds = (now - created) / 1000;
    var secondsToLive = this.ttl;
    var eternalTokensAllowed = !!(User && User.settings.allowEternalTokens);
    var isEternalToken = secondsToLive === -1;
    var isValid = isEternalToken ?
      eternalTokensAllowed :
      elapsedSeconds < secondsToLive;

    if (isValid) {
      process.nextTick(function() {
        cb(null, isValid);
      });
    } else {
      this.destroy(function(err) {
        cb(err, isValid);
      });
    }
  } catch (e) {
    process.nextTick(function() {
      cb(e);
    });
  }
}
```
- example usage
```shell
n/a
```



# <a name="apidoc.module.loopback.AccessToken.settings"></a>[module loopback.AccessToken.settings](#apidoc.module.loopback.AccessToken.settings)

#### <a name="apidoc.element.loopback.AccessToken.settings.base"></a>[function <span class="apidocSignatureSpan">loopback.AccessToken.settings.</span>base (data, options)](#apidoc.element.loopback.AccessToken.settings.base)
- description and source-code
```javascript
function ModelConstructor(data, options) {
  if (!(this instanceof ModelConstructor)) {
    return new ModelConstructor(data, options);
  }
  if (ModelClass.settings.unresolved) {
    throw new Error(g.f('Model %s is not defined.', ModelClass.modelName));
  }
  ModelBaseClass.apply(this, arguments);
}
```
- example usage
```shell
n/a
```



# <a name="apidoc.module.loopback.AccessToken.sharedClass"></a>[module loopback.AccessToken.sharedClass](#apidoc.module.loopback.AccessToken.sharedClass)

#### <a name="apidoc.element.loopback.AccessToken.sharedClass.ctor"></a>[function <span class="apidocSignatureSpan">loopback.AccessToken.sharedClass.</span>ctor (data, options)](#apidoc.element.loopback.AccessToken.sharedClass.ctor)
- description and source-code
```javascript
function ModelConstructor(data, options) {
  if (!(this instanceof ModelConstructor)) {
    return new ModelConstructor(data, options);
  }
  if (ModelClass.settings.unresolved) {
    throw new Error(g.f('Model %s is not defined.', ModelClass.modelName));
  }
  ModelBaseClass.apply(this, arguments);
}
```
- example usage
```shell
n/a
```



# <a name="apidoc.module.loopback.Application"></a>[module loopback.Application](#apidoc.module.loopback.Application)

#### <a name="apidoc.element.loopback.Application.Application"></a>[function <span class="apidocSignatureSpan">loopback.</span>Application (data, options)](#apidoc.element.loopback.Application.Application)
- description and source-code
```javascript
function ModelConstructor(data, options) {
  if (!(this instanceof ModelConstructor)) {
    return new ModelConstructor(data, options);
  }
  if (ModelClass.settings.unresolved) {
    throw new Error(g.f('Model %s is not defined.', ModelClass.modelName));
  }
  ModelBaseClass.apply(this, arguments);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Application.ValidationError"></a>[function <span class="apidocSignatureSpan">loopback.Application.</span>ValidationError (obj)](#apidoc.element.loopback.Application.ValidationError)
- description and source-code
```javascript
function ValidationError(obj) {
  if (!(this instanceof ValidationError)) return new ValidationError(obj);

  this.name = 'ValidationError';

  var context = obj && obj.constructor && obj.constructor.modelName;
  this.message = g.f(
    'The %s instance is not valid. Details: %s.',
      context ? ''' + context + ''' : 'model',
      formatErrors(obj.errors, obj.toJSON()) || '(unknown)'
  );

  this.statusCode = 422;

  this.details = {
    context: context,
    codes: obj.errors && obj.errors.codes,
    messages: obj.errors,
  };

  if (Error.captureStackTrace) {
    // V8 (Chrome, Opera, Node)
    Error.captureStackTrace(this, this.constructor);
  } else if (errorHasStackProperty) {
    // Firefox
    this.stack = (new Error).stack;
  }
  // Safari and PhantomJS initializes 'error.stack' on throw
  // Internet Explorer does not support 'error.stack'
}
```
- example usage
```shell
...
  return save();
}

inst.isValid(function(valid) {
  if (valid) {
    save();
  } else {
    var err = new Model.ValidationError(inst);
    // throws option is dangerous for async usage
    if (options.throws) {
      throw err;
    }
    callback(err, inst);
  }
});
...
```

#### <a name="apidoc.element.loopback.Application._ACL"></a>[function <span class="apidocSignatureSpan">loopback.Application.</span>_ACL (ACL)](#apidoc.element.loopback.Application._ACL)
- description and source-code
```javascript
function getACL(ACL) {
  var registry = this.registry;
  if (ACL !== undefined) {
    // The function is used as a setter
    _aclModel = ACL;
  }
  if (_aclModel) {
    return _aclModel;
  }
  var aclModel = registry.getModel('ACL');
  _aclModel = registry.getModelByType(aclModel);
  return _aclModel;
}
```
- example usage
```shell
...
   * @param {String|Error} err The error object.
   * @param {Boolean} allowed True if the request is allowed; false otherwise.
   */

  Model.checkAccess = function(token, modelId, sharedMethod, ctx, callback) {
var ANONYMOUS = registry.getModel('AccessToken').ANONYMOUS;
token = token || ANONYMOUS;
var aclModel = Model._ACL();

ctx = ctx || {};
if (typeof ctx === 'function' && callback === undefined) {
  callback = ctx;
  ctx = {};
}
...
```

#### <a name="apidoc.element.loopback.Application._defineChangeModel"></a>[function <span class="apidocSignatureSpan">loopback.Application.</span>_defineChangeModel ()](#apidoc.element.loopback.Application._defineChangeModel)
- description and source-code
```javascript
_defineChangeModel = function () {
  var BaseChangeModel = this.registry.getModel('Change');
  assert(BaseChangeModel,
    'Change model must be defined before enabling change replication');

  const additionalChangeModelProperties =
    this.settings.additionalChangeModelProperties || {};

  this.Change = BaseChangeModel.extend(this.modelName + '-change',
    additionalChangeModelProperties,
    {trackModel: this}
  );

  if (this.dataSource) {
    attachRelatedModels(this);
  }

  // Re-attach related models whenever our datasource is changed.
  var self = this;
  this.on('dataSourceAttached', function() {
    attachRelatedModels(self);
  });

  return this.Change;

  function attachRelatedModels(self) {
    self.Change.attachTo(self.dataSource);
    self.Change.getCheckpointModel().attachTo(self.dataSource);
  }
}
```
- example usage
```shell
...
// call Model.setup first
Model.setup.call(this);

var PersistedModel = this;

// enable change tracking (usually for replication)
if (this.settings.trackChanges) {
  PersistedModel._defineChangeModel();
  PersistedModel.once('dataSourceAttached', function() {
    PersistedModel.enableChangeTracking();
  });
} else if (this.settings.enableRemoteReplication) {
  PersistedModel._defineChangeModel();
}
...
```

#### <a name="apidoc.element.loopback.Application._getAccessTypeForMethod"></a>[function <span class="apidocSignatureSpan">loopback.Application.</span>_getAccessTypeForMethod (method)](#apidoc.element.loopback.Application._getAccessTypeForMethod)
- description and source-code
```javascript
_getAccessTypeForMethod = function (method) {
  if (typeof method === 'string') {
    method = {name: method};
  }
  assert(
    typeof method === 'object',
    'method is a required argument and must be a RemoteMethod object'
  );

  var ACL = Model._ACL();

  // Check the explicit setting of accessType
  if (method.accessType) {
    assert(method.accessType === ACL.READ ||
      method.accessType === ACL.REPLICATE ||
      method.accessType === ACL.WRITE ||
      method.accessType === ACL.EXECUTE, 'invalid accessType ' +
      method.accessType +
      '. It must be "READ", "REPLICATE", "WRITE", or "EXECUTE"');
    return method.accessType;
  }

  // Default GET requests to READ
  var verb = method.http && method.http.verb;
  if (typeof verb === 'string') {
    verb = verb.toUpperCase();
  }
  if (verb === 'GET' || verb === 'HEAD') {
    return ACL.READ;
  }

  switch (method.name) {
    case 'create':
      return ACL.WRITE;
    case 'updateOrCreate':
      return ACL.WRITE;
    case 'upsertWithWhere':
      return ACL.WRITE;
    case 'upsert':
      return ACL.WRITE;
    case 'exists':
      return ACL.READ;
    case 'findById':
      return ACL.READ;
    case 'find':
      return ACL.READ;
    case 'findOne':
      return ACL.READ;
    case 'destroyById':
      return ACL.WRITE;
    case 'deleteById':
      return ACL.WRITE;
    case 'removeById':
      return ACL.WRITE;
    case 'count':
      return ACL.READ;
    default:
      return ACL.EXECUTE;
  }
}
```
- example usage
```shell
...
if (this.sharedMethod) {
  this.methodNames = this.sharedMethod.aliases.concat([this.sharedMethod.name]);
} else {
  this.methodNames = [];
}

if (this.sharedMethod) {
  this.accessType = this.model._getAccessTypeForMethod(this.sharedMethod);
}

this.accessType = context.accessType || AccessContext.ALL;
assert(loopback.AccessToken,
  'AccessToken model must be defined before AccessContext model');
this.accessToken = context.accessToken || loopback.AccessToken.ANONYMOUS;
...
```

#### <a name="apidoc.element.loopback.Application._notifyBaseObservers"></a>[function <span class="apidocSignatureSpan">loopback.Application.</span>_notifyBaseObservers (operation, context, callback)](#apidoc.element.loopback.Application._notifyBaseObservers)
- description and source-code
```javascript
_notifyBaseObservers = function (operation, context, callback) {
  if (this.base && this.base.notifyObserversOf)
    this.base.notifyObserversOf(operation, context, callback);
  else
    callback();
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Application._runWhenAttachedToApp"></a>[function <span class="apidocSignatureSpan">loopback.Application.</span>_runWhenAttachedToApp (fn)](#apidoc.element.loopback.Application._runWhenAttachedToApp)
- description and source-code
```javascript
_runWhenAttachedToApp = function (fn) {
  if (this.app) return fn(this.app);
  var self = this;
  self.once('attached', function() {
    fn(self.app);
  });
}
```
- example usage
```shell
...
  ModelCtor,
  remotingOptions
);

// before remote hook
ModelCtor.beforeRemote = function(name, fn) {
  var className = this.modelName;
  this._runWhenAttachedToApp(function(app) {
    var remotes = app.remotes();
    remotes.before(className + '.' + name, function(ctx, next) {
      return fn(ctx, ctx.result, next);
    });
  });
};
...
```

#### <a name="apidoc.element.loopback.Application.addListener"></a>[function <span class="apidocSignatureSpan">loopback.Application.</span>addListener ()](#apidoc.element.loopback.Application.addListener)
- description and source-code
```javascript
addListener = function () { [native code] }
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Application.afterRemote"></a>[function <span class="apidocSignatureSpan">loopback.Application.</span>afterRemote (name, fn)](#apidoc.element.loopback.Application.afterRemote)
- description and source-code
```javascript
afterRemote = function (name, fn) {
  var className = this.modelName;
  this._runWhenAttachedToApp(function(app) {
    var remotes = app.remotes();
    remotes.after(className + '.' + name, function(ctx, next) {
      return fn(ctx, ctx.result, next);
    });
  });
}
```
- example usage
```shell
...
        var m = method.isStatic ? method.name : 'prototype.' + method.name;
        if (before && before[delegateTo.name]) {
          self.beforeRemote(m, function(ctx, result, next) {
            before[delegateTo.name]._listeners.call(null, ctx, next);
          });
        }
        if (after && after[delegateTo.name]) {
          self.afterRemote(m, function(ctx, result, next) {
            after[delegateTo.name]._listeners.call(null, ctx, next);
          });
        }
      }
    });
  });
} else {
...
```

#### <a name="apidoc.element.loopback.Application.afterRemoteError"></a>[function <span class="apidocSignatureSpan">loopback.Application.</span>afterRemoteError (name, fn)](#apidoc.element.loopback.Application.afterRemoteError)
- description and source-code
```javascript
afterRemoteError = function (name, fn) {
  var className = this.modelName;
  this._runWhenAttachedToApp(function(app) {
    var remotes = app.remotes();
    remotes.afterError(className + '.' + name, fn);
  });
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Application.attachTo"></a>[function <span class="apidocSignatureSpan">loopback.Application.</span>attachTo (dataSource)](#apidoc.element.loopback.Application.attachTo)
- description and source-code
```javascript
attachTo = function (dataSource) {
  dataSource.attach(this);
}
```
- example usage
```shell
...
  this.on('dataSourceAttached', function() {
    attachRelatedModels(self);
  });

  return this.Change;

  function attachRelatedModels(self) {
    self.Change.attachTo(self.dataSource);
    self.Change.getCheckpointModel().attachTo(self.dataSource);
  }
};

PersistedModel.rectifyAllChanges = function(callback) {
  this.getChangeModel().rectifyAll(callback);
};
...
```

#### <a name="apidoc.element.loopback.Application.authenticate"></a>[function <span class="apidocSignatureSpan">loopback.Application.</span>authenticate (appId, key, cb)](#apidoc.element.loopback.Application.authenticate)
- description and source-code
```javascript
authenticate = function (appId, key, cb) {
  cb = cb || utils.createPromiseCallback();

  this.findById(appId, function(err, app) {
    if (err || !app) {
      cb(err, null);
      return cb.promise;
    }
    var result = null;
    var keyNames = ['clientKey', 'javaScriptKey', 'restApiKey', 'windowsKey', 'masterKey'];
    for (var i = 0; i < keyNames.length; i++) {
      if (app[keyNames[i]] === key) {
        result = {
          application: app,
          keyType: keyNames[i],
        };
        break;
      }
    }
    cb(null, result);
  });
  return cb.promise;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Application.beforeRemote"></a>[function <span class="apidocSignatureSpan">loopback.Application.</span>beforeRemote (name, fn)](#apidoc.element.loopback.Application.beforeRemote)
- description and source-code
```javascript
beforeRemote = function (name, fn) {
  var className = this.modelName;
  this._runWhenAttachedToApp(function(app) {
    var remotes = app.remotes();
    remotes.before(className + '.' + name, function(ctx, next) {
      return fn(ctx, ctx.result, next);
    });
  });
}
```
- example usage
```shell
...
        sharedClass.methods().forEach(function(method) {
var delegateTo = method.rest && method.rest.delegateTo;
if (delegateTo && delegateTo.ctor == relation.modelTo) {
  var before = method.isStatic ? beforeListeners : beforeListeners['prototype'];
  var after = method.isStatic ? afterListeners : afterListeners['prototype'];
  var m = method.isStatic ? method.name : 'prototype.' + method.name;
  if (before && before[delegateTo.name]) {
    self.beforeRemote(m, function(ctx, result, next) {
      before[delegateTo.name]._listeners.call(null, ctx, next);
    });
  }
  if (after && after[delegateTo.name]) {
    self.afterRemote(m, function(ctx, result, next) {
      after[delegateTo.name]._listeners.call(null, ctx, next);
    });
...
```

#### <a name="apidoc.element.loopback.Application.belongsToRemoting"></a>[function <span class="apidocSignatureSpan">loopback.Application.</span>belongsToRemoting (relationName, relation, define)](#apidoc.element.loopback.Application.belongsToRemoting)
- description and source-code
```javascript
belongsToRemoting = function (relationName, relation, define) {
  var modelName = relation.modelTo && relation.modelTo.modelName;
  modelName = modelName || 'PersistedModel';
  var fn = this.prototype[relationName];
  var pathName = (relation.options.http && relation.options.http.path) || relationName;
  define('__get__' + relationName, {
    isStatic: false,
    http: {verb: 'get', path: '/' + pathName},
    accepts: [
      {arg: 'refresh', type: 'boolean', http: {source: 'query'}},
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    accessType: 'READ',
    description: format('Fetches belongsTo relation %s.', relationName),
    returns: {arg: relationName, type: modelName, root: true},
  }, fn);
}
```
- example usage
```shell
...
  defineRaw(name, options, fn);
};

// get the relations
for (var relationName in relations) {
  var relation = relations[relationName];
  if (relation.type === 'belongsTo') {
    ModelCtor.belongsToRemoting(relationName, relation, define);
  } else if (
    relation.type === 'hasOne' ||
    relation.type === 'embedsOne'
  ) {
    ModelCtor.hasOneRemoting(relationName, relation, define);
  } else if (
    relation.type === 'hasMany' ||
...
```

#### <a name="apidoc.element.loopback.Application.bulkUpdate"></a>[function <span class="apidocSignatureSpan">loopback.Application.</span>bulkUpdate (updates, options, callback)](#apidoc.element.loopback.Application.bulkUpdate)
- description and source-code
```javascript
bulkUpdate = function (updates, options, callback) {
  var tasks = [];
  var Model = this;
  var Change = this.getChangeModel();
  var conflicts = [];

  var lastArg = arguments[arguments.length - 1];

  if (typeof lastArg === 'function' && arguments.length > 1) {
    callback = lastArg;
  }

  if (typeof options === 'function') {
    options = {};
  }

  options = options || {};

  buildLookupOfAffectedModelData(Model, updates, function(err, currentMap) {
    if (err) return callback(err);

    updates.forEach(function(update) {
      var id = update.change.modelId;
      var current = currentMap[id];
      switch (update.type) {
        case Change.UPDATE:
          tasks.push(function(cb) {
            applyUpdate(Model, id, current, update.data, update.change, conflicts, options, cb);
          });
          break;

        case Change.CREATE:
          tasks.push(function(cb) {
            applyCreate(Model, id, current, update.data, update.change, conflicts, options, cb);
          });
          break;
        case Change.DELETE:
          tasks.push(function(cb) {
            applyDelete(Model, id, current, update.change, conflicts, options, cb);
          });
          break;
      }
    });

    async.parallel(tasks, function(err) {
      if (err) return callback(err);
      if (conflicts.length) {
        err = new Error(g.f('Conflict'));
        err.statusCode = 409;
        err.details = {conflicts: conflicts};
        return callback(err);
      }
      callback();
    });
  });
}
```
- example usage
```shell
...
    function bulkUpdate(_updates, cb) {
debug('\tstarting bulk update');
updates = _updates;
utils.uploadInChunks(
  updates,
  replicationChunkSize,
  function(smallArray, chunkCallback) {
    return targetModel.bulkUpdate(smallArray, options, function(err) {
      // bulk update is a special case where we want to process all chunks and aggregate all errors
      chunkCallback(null, err);
    });
  },
  function(notUsed, err) {
    var conflicts = err && err.details && err.details.conflicts;
    if (conflicts && err.statusCode == 409) {
...
```

#### <a name="apidoc.element.loopback.Application.changes"></a>[function <span class="apidocSignatureSpan">loopback.Application.</span>changes (since, filter, callback)](#apidoc.element.loopback.Application.changes)
- description and source-code
```javascript
changes = function (since, filter, callback) {
  if (typeof since === 'function') {
    filter = {};
    callback = since;
    since = -1;
  }
  if (typeof filter === 'function') {
    callback = filter;
    since = -1;
    filter = {};
  }

  var idName = this.dataSource.idName(this.modelName);
  var Change = this.getChangeModel();
  var model = this;
  const changeFilter = this.createChangeFilter(since, filter);

  filter = filter || {};
  filter.fields = {};
  filter.where = filter.where || {};
  filter.fields[idName] = true;

  // TODO(ritch) this whole thing could be optimized a bit more
  Change.find(changeFilter, function(err, changes) {
    if (err) return callback(err);
    if (!Array.isArray(changes) || changes.length === 0) return callback(null, []);
    var ids = changes.map(function(change) {
      return change.getModelId();
    });
    filter.where[idName] = {inq: ids};
    model.find(filter, function(err, models) {
      if (err) return callback(err);
      var modelIds = models.map(function(m) {
        return m[idName].toString();
      });
      callback(null, changes.filter(function(ch) {
        if (ch.type() === Change.DELETE) return true;
        return modelIds.indexOf(ch.modelId) > -1;
      }));
    });
  });
}
```
- example usage
```shell
...
    async.waterfall(tasks, done);

    function getSourceChanges(cb) {
utils.downloadInChunks(
  options.filter,
  replicationChunkSize,
  function(filter, pagingCallback) {
    sourceModel.changes(since.source, filter, pagingCallback);
  },
  debug.enabled ? log : cb);

function log(err, result) {
  if (err) return cb(err);
  debug('\tusing source changes');
  result.forEach(function(it) { debug('\t\t%j', it); });
...
```

#### <a name="apidoc.element.loopback.Application.checkAccess"></a>[function <span class="apidocSignatureSpan">loopback.Application.</span>checkAccess (token, modelId, sharedMethod, ctx, callback)](#apidoc.element.loopback.Application.checkAccess)
- description and source-code
```javascript
checkAccess = function (token, modelId, sharedMethod, ctx, callback) {
  var ANONYMOUS = registry.getModel('AccessToken').ANONYMOUS;
  token = token || ANONYMOUS;
  var aclModel = Model._ACL();

  ctx = ctx || {};
  if (typeof ctx === 'function' && callback === undefined) {
    callback = ctx;
    ctx = {};
  }

  aclModel.checkAccessForContext({
    accessToken: token,
    model: this,
    property: sharedMethod.name,
    method: sharedMethod.name,
    sharedMethod: sharedMethod,
    modelId: modelId,
    accessType: this._getAccessTypeForMethod(sharedMethod),
    remotingContext: ctx,
  }, function(err, accessRequest) {
    if (err) return callback(err);
    callback(null, accessRequest.isAllowed());
  });
}
```
- example usage
```shell
...
var modelSettings = Model.settings || {};
var errStatusCode = modelSettings.aclErrorStatus || app.get('aclErrorStatus') || 401;
if (!req.accessToken) {
  errStatusCode = 401;
}

if (Model.checkAccess) {
  Model.checkAccess(
    req.accessToken,
    modelId,
    method,
    ctx,
    function(err, allowed) {
      if (err) {
        console.log(err);
...
```

#### <a name="apidoc.element.loopback.Application.checkpoint"></a>[function <span class="apidocSignatureSpan">loopback.Application.</span>checkpoint (cb)](#apidoc.element.loopback.Application.checkpoint)
- description and source-code
```javascript
checkpoint = function (cb) {
  var Checkpoint = this.getChangeModel().getCheckpointModel();
  Checkpoint.bumpLastSeq(cb);
}
```
- example usage
```shell
...
      }
      cb(err);
    });
}

function checkpoints() {
  var cb = arguments[arguments.length - 1];
  sourceModel.checkpoint(function(err, source) {
    if (err) return cb(err);
    newSourceCp = source.seq;
    targetModel.checkpoint(function(err, target) {
      if (err) return cb(err);
      newTargetCp = target.seq;
      debug('\tcreated checkpoints');
      debug('\t\t%s for source model %s', newSourceCp, sourceModel.modelName);
...
```

#### <a name="apidoc.element.loopback.Application.clearObservers"></a>[function <span class="apidocSignatureSpan">loopback.Application.</span>clearObservers (operation)](#apidoc.element.loopback.Application.clearObservers)
- description and source-code
```javascript
clearObservers = function (operation) {
  if (!(this._observers && this._observers[operation])) return;

  this._observers[operation].length = 0;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Application.count"></a>[function <span class="apidocSignatureSpan">loopback.Application.</span>count (where, cb)](#apidoc.element.loopback.Application.count)
- description and source-code
```javascript
count = function (where, cb) {
  throwNotAttached(this.modelName, 'count');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Application.create"></a>[function <span class="apidocSignatureSpan">loopback.Application.</span>create (data, callback)](#apidoc.element.loopback.Application.create)
- description and source-code
```javascript
create = function (data, callback) {
  throwNotAttached(this.modelName, 'create');
}
```
- example usage
```shell
...
 } else {
   var options = {};

   if (this.get) {
     options = this.get('remoting');
   }

   return (this._remotes = RemoteObjects.create(options));
 }
};

/*!
* Remove a route by reference.
*/
...
```

#### <a name="apidoc.element.loopback.Application.createChangeFilter"></a>[function <span class="apidocSignatureSpan">loopback.Application.</span>createChangeFilter (since, modelFilter)](#apidoc.element.loopback.Application.createChangeFilter)
- description and source-code
```javascript
createChangeFilter = function (since, modelFilter) {
  return {
    where: {
      checkpoint: {gte: since},
      modelName: this.modelName,
    },
  };
}
```
- example usage
```shell
...
  since = -1;
  filter = {};
}

var idName = this.dataSource.idName(this.modelName);
var Change = this.getChangeModel();
var model = this;
const changeFilter = this.createChangeFilter(since, filter);

filter = filter || {};
filter.fields = {};
filter.where = filter.where || {};
filter.fields[idName] = true;

// TODO(ritch) this whole thing could be optimized a bit more
...
```

#### <a name="apidoc.element.loopback.Application.createChangeStream"></a>[function <span class="apidocSignatureSpan">loopback.Application.</span>createChangeStream (options, cb)](#apidoc.element.loopback.Application.createChangeStream)
- description and source-code
```javascript
createChangeStream = function (options, cb) {
  if (typeof options === 'function') {
    cb = options;
    options = undefined;
  }

  var idName = this.getIdName();
  var Model = this;
  var changes = new PassThrough({objectMode: true});
  var writeable = true;

  changes.destroy = function() {
    changes.removeAllListeners('error');
    changes.removeAllListeners('end');
    writeable = false;
    changes = null;
  };

  changes.on('error', function() {
    writeable = false;
  });
  changes.on('end', function() {
    writeable = false;
  });

  process.nextTick(function() {
    cb(null, changes);
  });

  Model.observe('after save', createChangeHandler('save'));
  Model.observe('after delete', createChangeHandler('delete'));

  function createChangeHandler(type) {
    return function(ctx, next) {
      // since it might have set to null via destroy
      if (!changes) {
        return next();
      }

      var where = ctx.where;
      var data = ctx.instance || ctx.data;
      var whereId = where && where[idName];

      // the data includes the id
      // or the where includes the id
      var target;

      if (data && (data[idName] || data[idName] === 0)) {
        target = data[idName];
      } else if (where && (where[idName] || where[idName] === 0)) {
        target = where[idName];
      }

      var hasTarget = target === 0 || !!target;

      var change = {
        target: target,
        where: where,
        data: data,
      };

      switch (type) {
        case 'save':
          if (ctx.isNewInstance === undefined) {
            change.type = hasTarget ? 'update' : 'create';
          } else {
            change.type = ctx.isNewInstance ? 'create' : 'update';
          }

          break;
        case 'delete':
          change.type = 'remove';
          break;
      }

      // TODO(ritch) this is ugly... maybe a ReadableStream would be better
      if (writeable) {
        changes.write(change);
      }

      next();
    };
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Application.createOptionsFromRemotingContext"></a>[function <span class="apidocSignatureSpan">loopback.Application.</span>createOptionsFromRemotingContext (ctx)](#apidoc.element.loopback.Application.createOptionsFromRemotingContext)
- description and source-code
```javascript
createOptionsFromRemotingContext = function (ctx) {
  return {
    accessToken: ctx.req.accessToken,
  };
}
```
- example usage
```shell
...
  var EMPTY_OPTIONS = {};
  var ModelCtor = ctx.method && ctx.method.ctor;
  if (!ModelCtor)
    return EMPTY_OPTIONS;
  if (typeof ModelCtor.createOptionsFromRemotingContext !== 'function')
    return EMPTY_OPTIONS;
  debug('createOptionsFromRemotingContext for %s', ctx.method.stringName);
  return ModelCtor.createOptionsFromRemotingContext(ctx);
}

/**
 * Disable remote invocation for the method with the given name.
 *
 * @param {String} name The name of the method.
 * @param {Boolean} isStatic Is the method static (eg. 'MyModel.myMethod')? Pass
...
```

#### <a name="apidoc.element.loopback.Application.createUpdates"></a>[function <span class="apidocSignatureSpan">loopback.Application.</span>createUpdates (deltas, cb)](#apidoc.element.loopback.Application.createUpdates)
- description and source-code
```javascript
createUpdates = function (deltas, cb) {
  var Change = this.getChangeModel();
  var updates = [];
  var Model = this;
  var tasks = [];

  deltas.forEach(function(change) {
    change = new Change(change);
    var type = change.type();
    var update = {type: type, change: change};
    switch (type) {
      case Change.CREATE:
      case Change.UPDATE:
        tasks.push(function(cb) {
          Model.findById(change.modelId, function(err, inst) {
            if (err) return cb(err);
            if (!inst) {
              return cb &&
                cb(new Error(g.f('Missing data for change: %s', change.modelId)));
            }
            if (inst.toObject) {
              update.data = inst.toObject();
            } else {
              update.data = inst;
            }
            updates.push(update);
            cb();
          });
        });
        break;
      case Change.DELETE:
        updates.push(update);
        break;
    }
  });

  async.parallel(tasks, function(err) {
    if (err) return cb(err);
    cb(null, updates);
  });
}
```
- example usage
```shell
...

  if (diff && diff.deltas && diff.deltas.length) {
    debug('\tbuilding a list of updates');
    utils.uploadInChunks(
      diff.deltas,
      replicationChunkSize,
      function(smallArray, chunkCallback) {
        return sourceModel.createUpdates(smallArray, chunkCallback);
      },
      cb);
  } else {
    // nothing to replicate
    done();
  }
}
...
```

#### <a name="apidoc.element.loopback.Application.currentCheckpoint"></a>[function <span class="apidocSignatureSpan">loopback.Application.</span>currentCheckpoint (cb)](#apidoc.element.loopback.Application.currentCheckpoint)
- description and source-code
```javascript
currentCheckpoint = function (cb) {
  var Checkpoint = this.getChangeModel().getCheckpointModel();
  Checkpoint.current(cb);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Application.defineProperty"></a>[function <span class="apidocSignatureSpan">loopback.Application.</span>defineProperty (prop, params)](#apidoc.element.loopback.Application.defineProperty)
- description and source-code
```javascript
defineProperty = function (prop, params) {
  if (this.dataSource) {
    this.dataSource.defineProperty(this.modelName, prop, params);
  } else {
    this.modelBuilder.defineProperty(this.modelName, prop, params);
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Application.deleteAll"></a>[function <span class="apidocSignatureSpan">loopback.Application.</span>deleteAll (where, cb)](#apidoc.element.loopback.Application.deleteAll)
- description and source-code
```javascript
function destroyAll(where, cb) {
  throwNotAttached(this.modelName, 'destroyAll');
}
```
- example usage
```shell
...
  Model.modelName, id);
debug('\tExpected revision: %s', change.rev);
debug('\tActual revision:   %s', rev);
conflicts.push(change);
return Change.rectifyModelChanges(Model.modelName, [id], cb);
    }

    Model.deleteAll(current.toObject(), options, function(err, result) {
if (err) return cb(err);

var count = result && result.count;
switch (count) {
  case 1:
    // The happy path, exactly one record was updated
    return cb();
...
```

#### <a name="apidoc.element.loopback.Application.deleteById"></a>[function <span class="apidocSignatureSpan">loopback.Application.</span>deleteById (id, cb)](#apidoc.element.loopback.Application.deleteById)
- description and source-code
```javascript
function deleteById(id, cb) {
  throwNotAttached(this.modelName, 'deleteById');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Application.destroyAll"></a>[function <span class="apidocSignatureSpan">loopback.Application.</span>destroyAll (where, cb)](#apidoc.element.loopback.Application.destroyAll)
- description and source-code
```javascript
function destroyAll(where, cb) {
  throwNotAttached(this.modelName, 'destroyAll');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Application.destroyById"></a>[function <span class="apidocSignatureSpan">loopback.Application.</span>destroyById (id, cb)](#apidoc.element.loopback.Application.destroyById)
- description and source-code
```javascript
function deleteById(id, cb) {
  throwNotAttached(this.modelName, 'deleteById');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Application.diff"></a>[function <span class="apidocSignatureSpan">loopback.Application.</span>diff (since, remoteChanges, callback)](#apidoc.element.loopback.Application.diff)
- description and source-code
```javascript
diff = function (since, remoteChanges, callback) {
  var Change = this.getChangeModel();
  Change.diff(this.modelName, since, remoteChanges, callback);
}
```
- example usage
```shell
...
    },
  });
};

/**
 * Get a set of deltas and conflicts since the given checkpoint.
 *
 * See [Change.diff()](#change-diff) for details.
 *
 * @param  {Number}  since  Find deltas since this checkpoint.
 * @param  {Array}  remoteChanges  An array of change objects.
 * @callback {Function} callback Callback function called with '(err, result)' arguments.  Required.
 * @param {Error} err Error object; see [Error object](http://loopback.io/doc/en/lb2/Error-object.html).
 * @param {Object} result Object with 'deltas' and 'conflicts' properties; see [Change.diff()](#change-diff) for details.
 */
...
```

#### <a name="apidoc.element.loopback.Application.disableRemoteMethod"></a>[function <span class="apidocSignatureSpan">loopback.Application.</span>disableRemoteMethod (name, isStatic)](#apidoc.element.loopback.Application.disableRemoteMethod)
- description and source-code
```javascript
disableRemoteMethod = function (name, isStatic) {
  deprecated('Model.disableRemoteMethod is deprecated. ' +
    'Use Model.disableRemoteMethodByName instead.');
  var key = this.sharedClass.getKeyFromMethodNameAndTarget(name, isStatic);
  this.sharedClass.disableMethodByName(key);
  this.emit('remoteMethodDisabled', this.sharedClass, key);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Application.disableRemoteMethodByName"></a>[function <span class="apidocSignatureSpan">loopback.Application.</span>disableRemoteMethodByName (name)](#apidoc.element.loopback.Application.disableRemoteMethodByName)
- description and source-code
```javascript
disableRemoteMethodByName = function (name) {
  this.sharedClass.disableMethodByName(name);
  this.emit('remoteMethodDisabled', this.sharedClass, name);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Application.emit"></a>[function <span class="apidocSignatureSpan">loopback.Application.</span>emit ()](#apidoc.element.loopback.Application.emit)
- description and source-code
```javascript
emit = function () { [native code] }
```
- example usage
```shell
...
    return new Model(data);
  });
  this.remotes().addClass(Model.sharedClass);
  if (Model.settings.trackChanges && Model.Change) {
    this.remotes().addClass(Model.Change.sharedClass);
  }
  clearHandlerCache(this);
  this.emit('modelRemoted', Model.sharedClass);
}

var self = this;
Model.on('remoteMethodDisabled', function(model, methodName) {
  self.emit('remoteMethodDisabled', model, methodName);
});
Model.on('remoteMethodAdded', function(model) {
...
```

#### <a name="apidoc.element.loopback.Application.enableChangeTracking"></a>[function <span class="apidocSignatureSpan">loopback.Application.</span>enableChangeTracking ()](#apidoc.element.loopback.Application.enableChangeTracking)
- description and source-code
```javascript
enableChangeTracking = function () {
  var Model = this;
  var Change = this.Change || this._defineChangeModel();
  var cleanupInterval = Model.settings.changeCleanupInterval || 30000;

  assert(this.dataSource, 'Cannot enableChangeTracking(): ' + this.modelName +
    ' is not attached to a dataSource');

  var idName = this.getIdName();
  var idProp = this.definition.properties[idName];
  var idType = idProp && idProp.type;
  var idDefn = idProp && idProp.defaultFn;
  if (idType !== String || !(idDefn === 'uuid' || idDefn === 'guid')) {
    deprecated('The model ' + this.modelName + ' is tracking changes, ' +
      'which requires a string id with GUID/UUID default value.');
  }

  Model.observe('after save', rectifyOnSave);

  Model.observe('after delete', rectifyOnDelete);

  // Only run if the run time is server
  // Can switch off cleanup by setting the interval to -1
  if (runtime.isServer && cleanupInterval > 0) {
    // initial cleanup
    cleanup();

    // cleanup
    setInterval(cleanup, cleanupInterval);
  }

  function cleanup() {
    Model.rectifyAllChanges(function(err) {
      if (err) {
        Model.handleChangeError(err, 'cleanup');
      }
    });
  }
}
```
- example usage
```shell
...

  var PersistedModel = this;

  // enable change tracking (usually for replication)
  if (this.settings.trackChanges) {
    PersistedModel._defineChangeModel();
    PersistedModel.once('dataSourceAttached', function() {
      PersistedModel.enableChangeTracking();
    });
  } else if (this.settings.enableRemoteReplication) {
    PersistedModel._defineChangeModel();
  }

  PersistedModel.setupRemoting();
};
...
```

#### <a name="apidoc.element.loopback.Application.eventNames"></a>[function <span class="apidocSignatureSpan">loopback.Application.</span>eventNames ()](#apidoc.element.loopback.Application.eventNames)
- description and source-code
```javascript
eventNames = function () { [native code] }
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Application.exists"></a>[function <span class="apidocSignatureSpan">loopback.Application.</span>exists (id, cb)](#apidoc.element.loopback.Application.exists)
- description and source-code
```javascript
function exists(id, cb) {
  throwNotAttached(this.modelName, 'exists');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Application.extend"></a>[function <span class="apidocSignatureSpan">loopback.Application.</span>extend (className, subclassProperties, subclassSettings)](#apidoc.element.loopback.Application.extend)
- description and source-code
```javascript
extend = function (className, subclassProperties, subclassSettings) {
  var properties = ModelClass.definition.properties;
  var settings = ModelClass.definition.settings;

  subclassProperties = subclassProperties || {};
  subclassSettings = subclassSettings || {};

  // Check if subclass redefines the ids
  var idFound = false;
  for (var k in subclassProperties) {
    if (subclassProperties[k] && subclassProperties[k].id) {
      idFound = true;
      break;
    }
  }

  // Merging the properties
  var keys = Object.keys(properties);
  for (var i = 0, n = keys.length; i < n; i++) {
    var key = keys[i];

    if (idFound && properties[key].id) {
      // don't inherit id properties
      continue;
    }
    if (subclassProperties[key] === undefined) {
      var baseProp = properties[key];
      var basePropCopy = baseProp;
      if (baseProp && typeof baseProp === 'object') {
        // Deep clone the base prop
        basePropCopy = mergeSettings(null, baseProp);
      }
      subclassProperties[key] = basePropCopy;
    }
  }

  // Merge the settings
  var originalSubclassSettings = subclassSettings;
  subclassSettings = mergeSettings(settings, subclassSettings);

  // Ensure 'base' is not inherited. Note we don't have to delete 'super'
  // as that is removed from settings by modelBuilder.define and thus
  // it is never inherited
  if (!originalSubclassSettings.base) {
    subclassSettings.base = ModelClass;
  }

  // Define the subclass
  var subClass = modelBuilder.define(className, subclassProperties, subclassSettings, ModelClass);

  // Calling the setup function
  if (typeof subClass.setup === 'function') {
    subClass.setup.call(subClass);
  }

  return subClass;
}
```
- example usage
```shell
...
* The base class for **all models**.
*
* **Inheriting from 'Model'**
*
* '''js
* var properties = {...};
* var options = {...};
* var MyModel = loopback.Model.extend('MyModel', properties, options);
* '''
*
* **Options**
*
*  - 'trackChanges' - If true, changes to the model will be tracked. **Required
* for replication.**
*
...
```

#### <a name="apidoc.element.loopback.Application.find"></a>[function <span class="apidocSignatureSpan">loopback.Application.</span>find (filter, cb)](#apidoc.element.loopback.Application.find)
- description and source-code
```javascript
function find(filter, cb) {
  throwNotAttached(this.modelName, 'find');
}
```
- example usage
```shell
...

filter = filter || {};
filter.fields = {};
filter.where = filter.where || {};
filter.fields[idName] = true;

// TODO(ritch) this whole thing could be optimized a bit more
Change.find(changeFilter, function(err, changes) {
  if (err) return callback(err);
  if (!Array.isArray(changes) || changes.length === 0) return callback(null, []);
  var ids = changes.map(function(change) {
    return change.getModelId();
  });
  filter.where[idName] = {inq: ids};
  model.find(filter, function(err, models) {
...
```

#### <a name="apidoc.element.loopback.Application.findById"></a>[function <span class="apidocSignatureSpan">loopback.Application.</span>findById (id, filter, cb)](#apidoc.element.loopback.Application.findById)
- description and source-code
```javascript
function findById(id, filter, cb) {
  throwNotAttached(this.modelName, 'findById');
}
```
- example usage
```shell
...
  var model = new ModelCtor(data);
  model.id = id;
  fn(null, model);
} else if (data) {
  fn(null, new ModelCtor(data));
} else if (id) {
  var filter = {};
  ModelCtor.findById(id, filter, options, function(err, model) {
    if (err) {
      fn(err);
    } else if (model) {
      fn(null, model);
    } else {
      err = new Error(g.f('could not find a model with apidoc.element.loopback.Application.findById %s', id));
      err.statusCode = 404;
...
```

#### <a name="apidoc.element.loopback.Application.findLastChange"></a>[function <span class="apidocSignatureSpan">loopback.Application.</span>findLastChange (id, cb)](#apidoc.element.loopback.Application.findLastChange)
- description and source-code
```javascript
findLastChange = function (id, cb) {
  var Change = this.getChangeModel();
  Change.findOne({where: {modelId: id}}, cb);
}
```
- example usage
```shell
...
PersistedModel.findLastChange = function(id, cb) {
  var Change = this.getChangeModel();
  Change.findOne({where: {modelId: id}}, cb);
};

PersistedModel.updateLastChange = function(id, data, cb) {
  var self = this;
  this.findLastChange(id, function(err, inst) {
    if (err) return cb(err);
    if (!inst) {
      err = new Error(g.f('No change record found for %s with id %s',
        self.modelName, id));
      err.statusCode = 404;
      return cb(err);
    }
...
```

#### <a name="apidoc.element.loopback.Application.findOne"></a>[function <span class="apidocSignatureSpan">loopback.Application.</span>findOne (filter, cb)](#apidoc.element.loopback.Application.findOne)
- description and source-code
```javascript
function findOne(filter, cb) {
  throwNotAttached(this.modelName, 'findOne');
}
```
- example usage
```shell
...
PersistedModel.rectifyChange = function(id, callback) {
  var Change = this.getChangeModel();
  Change.rectifyModelChanges(this.modelName, [id], callback);
};

PersistedModel.findLastChange = function(id, cb) {
  var Change = this.getChangeModel();
  Change.findOne({where: {modelId: id}}, cb);
};

PersistedModel.updateLastChange = function(id, data, cb) {
  var self = this;
  this.findLastChange(id, function(err, inst) {
    if (err) return cb(err);
    if (!inst) {
...
```

#### <a name="apidoc.element.loopback.Application.findOrCreate"></a>[function <span class="apidocSignatureSpan">loopback.Application.</span>findOrCreate (query, data, callback)](#apidoc.element.loopback.Application.findOrCreate)
- description and source-code
```javascript
function findOrCreate(query, data, callback) {
  throwNotAttached(this.modelName, 'findOrCreate');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Application.forEachProperty"></a>[function <span class="apidocSignatureSpan">loopback.Application.</span>forEachProperty (cb)](#apidoc.element.loopback.Application.forEachProperty)
- description and source-code
```javascript
forEachProperty = function (cb) {
  var props = ModelClass.definition.properties;
  var keys = Object.keys(props);
  for (var i = 0, n = keys.length; i < n; i++) {
    cb(keys[i], props[keys[i]]);
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Application.getApp"></a>[function <span class="apidocSignatureSpan">loopback.Application.</span>getApp (callback)](#apidoc.element.loopback.Application.getApp)
- description and source-code
```javascript
getApp = function (callback) {
  var self = this;
  self._runWhenAttachedToApp(function(app) {
    assert(self.app);
    assert.equal(app, self.app);
    callback(null, app);
  });
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Application.getChangeModel"></a>[function <span class="apidocSignatureSpan">loopback.Application.</span>getChangeModel ()](#apidoc.element.loopback.Application.getChangeModel)
- description and source-code
```javascript
getChangeModel = function () {
  var changeModel = this.Change;
  var isSetup = changeModel && changeModel.dataSource;

  assert(isSetup, 'Cannot get a setup Change model for ' + this.modelName);

  return changeModel;
}
```
- example usage
```shell
...
 * @param  {Array}  remoteChanges  An array of change objects.
 * @callback {Function} callback Callback function called with '(err, result)' arguments.  Required.
 * @param {Error} err Error object; see [Error object](http://loopback.io/doc/en/lb2/Error-object.html).
 * @param {Object} result Object with 'deltas' and 'conflicts' properties; see [Change.diff()](#change-diff) for details.
 */

PersistedModel.diff = function(since, remoteChanges, callback) {
  var Change = this.getChangeModel();
  Change.diff(this.modelName, since, remoteChanges, callback);
};

/**
 * Get the changes to a model since the specified checkpoint. Provide a filter object
 * to reduce the number of results returned.
 * @param  {Number}   since    Return only changes since this checkpoint.
...
```

#### <a name="apidoc.element.loopback.Application.getDataSource"></a>[function <span class="apidocSignatureSpan">loopback.Application.</span>getDataSource ()](#apidoc.element.loopback.Application.getDataSource)
- description and source-code
```javascript
getDataSource = function () {
  return this.dataSource;
}
```
- example usage
```shell
...
 * connector that defines it.  Otherwise, uses the default lookup.
 * Override this method to handle complex IDs.
 *
 * @param {*} val The 'id' value. Will be converted to the type that the 'id' property specifies.
 */

PersistedModel.prototype.setId = function(val) {
  var ds = this.getDataSource();
  this[this.getIdName()] = val;
};

/**
 * Get the 'id' value for the 'PersistedModel'.
 *
 * @returns {*} The 'id' value
...
```

#### <a name="apidoc.element.loopback.Application.getIdName"></a>[function <span class="apidocSignatureSpan">loopback.Application.</span>getIdName ()](#apidoc.element.loopback.Application.getIdName)
- description and source-code
```javascript
getIdName = function () {
  var Model = this;
  var ds = Model.getDataSource();

  if (ds.idName) {
    return ds.idName(Model.modelName);
  } else {
    return 'id';
  }
}
```
- example usage
```shell
...
 * Override this method to handle complex IDs.
 *
 * @param {*} val The 'id' value. Will be converted to the type that the 'id' property specifies.
 */

PersistedModel.prototype.setId = function(val) {
  var ds = this.getDataSource();
  this[this.getIdName()] = val;
};

/**
 * Get the 'id' value for the 'PersistedModel'.
 *
 * @returns {*} The 'id' value
 */
...
```

#### <a name="apidoc.element.loopback.Application.getMaxListeners"></a>[function <span class="apidocSignatureSpan">loopback.Application.</span>getMaxListeners ()](#apidoc.element.loopback.Application.getMaxListeners)
- description and source-code
```javascript
getMaxListeners = function () { [native code] }
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Application.getPropertyType"></a>[function <span class="apidocSignatureSpan">loopback.Application.</span>getPropertyType (propName)](#apidoc.element.loopback.Application.getPropertyType)
- description and source-code
```javascript
getPropertyType = function (propName) {
  var prop = this.definition.properties[propName];
  if (!prop) {
    // The property is not part of the definition
    return null;
  }
  if (!prop.type) {
    throw new Error(g.f('Type not defined for property %s.%s', this.modelName, propName));
    // return null;
  }
  return prop.type.name;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Application.getSourceId"></a>[function <span class="apidocSignatureSpan">loopback.Application.</span>getSourceId (cb)](#apidoc.element.loopback.Application.getSourceId)
- description and source-code
```javascript
getSourceId = function (cb) {
  var dataSource = this.dataSource;
  if (!dataSource) {
    this.once('dataSourceAttached', this.getSourceId.bind(this, cb));
  }
  assert(
    dataSource.connector.name,
    'Model.getSourceId: cannot get id without dataSource.connector.name'
  );
  var id = [dataSource.connector.name, this.modelName].join('-');
  cb(null, id);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Application.handleChangeError"></a>[function <span class="apidocSignatureSpan">loopback.Application.</span>handleChangeError (err, operationName)](#apidoc.element.loopback.Application.handleChangeError)
- description and source-code
```javascript
handleChangeError = function (err, operationName) {
  if (!err) return;
  this.emit('error', err, operationName);
}
```
- example usage
```shell
...
    // cleanup
    setInterval(cleanup, cleanupInterval);
  }

  function cleanup() {
    Model.rectifyAllChanges(function(err) {
      if (err) {
        Model.handleChangeError(err, 'cleanup');
      }
    });
  }
};

function rectifyOnSave(ctx, next) {
  var instance = ctx.instance || ctx.currentInstance;
...
```

#### <a name="apidoc.element.loopback.Application.hasManyRemoting"></a>[function <span class="apidocSignatureSpan">loopback.Application.</span>hasManyRemoting (relationName, relation, define)](#apidoc.element.loopback.Application.hasManyRemoting)
- description and source-code
```javascript
hasManyRemoting = function (relationName, relation, define) {
  var pathName = (relation.options.http && relation.options.http.path) || relationName;
  var toModelName = relation.modelTo.modelName;

  var findByIdFunc = this.prototype['__findById__' + relationName];
  define('__findById__' + relationName, {
    isStatic: false,
    http: {verb: 'get', path: '/' + pathName + '/:fk'},
    accepts: [
      {
        arg: 'fk', type: 'any',
        description: format('Foreign key for %s', relationName),
        required: true,
        http: {source: 'path'},
      },
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Find a related item by id for %s.', relationName),
    accessType: 'READ',
    returns: {arg: 'result', type: toModelName, root: true},
    rest: {after: convertNullToNotFoundError.bind(null, toModelName)},
  }, findByIdFunc);

  var destroyByIdFunc = this.prototype['__destroyById__' + relationName];
  define('__destroyById__' + relationName, {
    isStatic: false,
    http: {verb: 'delete', path: '/' + pathName + '/:fk'},
    accepts: [
      {
        arg: 'fk', type: 'any',
        description: format('Foreign key for %s', relationName),
        required: true,
        http: {source: 'path'},
      },
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Delete a related item by id for %s.', relationName),
    accessType: 'WRITE',
    returns: [],
  }, destroyByIdFunc);

  var updateByIdFunc = this.prototype['__updateById__' + relationName];
  define('__updateById__' + relationName, {
    isStatic: false,
    http: {verb: 'put', path: '/' + pathName + '/:fk'},
    accepts: [
      {arg: 'fk', type: 'any',
        description: format('Foreign key for %s', relationName),
        required: true,
        http: {source: 'path'}},
      {arg: 'data', type: 'object', model: toModelName, http: {source: 'body'}},
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Update a related item by id for %s.', relationName),
    accessType: 'WRITE',
    returns: {arg: 'result', type: toModelName, root: true},
  }, updateByIdFunc);

  if (relation.modelThrough || relation.type === 'referencesMany') {
    var modelThrough = relation.modelThrough || relation.modelTo;

    var accepts = [];
    if (relation.type === 'hasMany' && relation.modelThrough) {
      // Restrict: only hasManyThrough relation can have additional properties
      accepts.push({
        arg: 'data', type: 'object', model: modelThrough.modelName,
        http: {source: 'body'},
      });
    }

    var addFunc = this.prototype['__link__' + relationName];
    define('__link__' + relationName, {
      isStatic: false,
      http: {verb: 'put', path: '/' + pathName + '/rel/:fk'},
      accepts: [{arg: 'fk', type: 'any',
        description: format('Foreign key for %s', relationName),
        required: true,
        http: {source: 'path'}},
      ].concat(accepts).concat([
        {arg: 'options', type: 'object', http: 'optionsFromRequest'},
      ]),
      description: format('Add a related item by id for %s.', relationName),
      accessType: 'WRITE',
      returns: {arg: relationName, type: modelThrough.modelName, root: true},
    }, addFunc);

    var removeFunc = this.prototype['__unlink__' + relationName];
    define('__unlink__' + relationName, {
      isStatic: false,
      http: {verb: 'delete', path: '/' + pathName + '/rel/:fk'},
      accepts: [
        {
          arg: 'fk', type: 'any',
          description: format('Foreign key for %s', relationName),
          required: true,
          http: {source: 'path'},
        },
        {arg: 'options', type: 'object', http: 'optionsFromRequest'},
      ],
      description: format('Remove the %s relation to an item by id.', relationName),
      accessType: 'WRITE',
      returns: [],
    }, removeFunc);

    // FIXME: [rfeng] How to map a function with callback(err, true|false) to HEAD?
    // true --> 200 and false --> 404?
    var existsFunc = this.prototype['__exists__' + relatio ...
```
- example usage
```shell
...
    relation.type === 'embedsOne'
  ) {
    ModelCtor.hasOneRemoting(relationName, relation, define);
  } else if (
    relation.type === 'hasMany' ||
    relation.type === 'embedsMany' ||
    relation.type === 'referencesMany') {
    ModelCtor.hasManyRemoting(relationName, relation, define);
  }
}

// handle scopes
var scopes = ModelCtor.scopes || {};
for (var scopeName in scopes) {
  ModelCtor.scopeRemoting(scopeName, scopes[scopeName], define);
...
```

#### <a name="apidoc.element.loopback.Application.hasOneRemoting"></a>[function <span class="apidocSignatureSpan">loopback.Application.</span>hasOneRemoting (relationName, relation, define)](#apidoc.element.loopback.Application.hasOneRemoting)
- description and source-code
```javascript
hasOneRemoting = function (relationName, relation, define) {
  var pathName = (relation.options.http && relation.options.http.path) || relationName;
  var toModelName = relation.modelTo.modelName;

  define('__get__' + relationName, {
    isStatic: false,
    http: {verb: 'get', path: '/' + pathName},
    accepts: [
      {arg: 'refresh', type: 'boolean', http: {source: 'query'}},
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Fetches hasOne relation %s.', relationName),
    accessType: 'READ',
    returns: {arg: relationName, type: relation.modelTo.modelName, root: true},
    rest: {after: convertNullToNotFoundError.bind(null, toModelName)},
  });

  define('__create__' + relationName, {
    isStatic: false,
    http: {verb: 'post', path: '/' + pathName},
    accepts: [
      {
        arg: 'data', type: 'object', model: toModelName,
        http: {source: 'body'},
      },
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Creates a new instance in %s of this model.', relationName),
    accessType: 'WRITE',
    returns: {arg: 'data', type: toModelName, root: true},
  });

  define('__update__' + relationName, {
    isStatic: false,
    http: {verb: 'put', path: '/' + pathName},
    accepts: [
      {
        arg: 'data', type: 'object', model: toModelName,
        http: {source: 'body'},
      },
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Update %s of this model.', relationName),
    accessType: 'WRITE',
    returns: {arg: 'data', type: toModelName, root: true},
  });

  define('__destroy__' + relationName, {
    isStatic: false,
    http: {verb: 'delete', path: '/' + pathName},
    accepts: [
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Deletes %s of this model.', relationName),
    accessType: 'WRITE',
  });
}
```
- example usage
```shell
...
  var relation = relations[relationName];
  if (relation.type === 'belongsTo') {
    ModelCtor.belongsToRemoting(relationName, relation, define);
  } else if (
    relation.type === 'hasOne' ||
    relation.type === 'embedsOne'
  ) {
    ModelCtor.hasOneRemoting(relationName, relation, define);
  } else if (
    relation.type === 'hasMany' ||
    relation.type === 'embedsMany' ||
    relation.type === 'referencesMany') {
    ModelCtor.hasManyRemoting(relationName, relation, define);
  }
}
...
```

#### <a name="apidoc.element.loopback.Application.isHiddenProperty"></a>[function <span class="apidocSignatureSpan">loopback.Application.</span>isHiddenProperty (propertyName)](#apidoc.element.loopback.Application.isHiddenProperty)
- description and source-code
```javascript
isHiddenProperty = function (propertyName) {
  var Model = this;
  var settings = Model.definition && Model.definition.settings;
  var hiddenProperties = settings && (settings.hiddenProperties || settings.hidden);
  if (Array.isArray(hiddenProperties)) {
    // Cache the hidden properties as an object for quick lookup
    settings.hiddenProperties = {};
    for (var i = 0; i < hiddenProperties.length; i++) {
      settings.hiddenProperties[hiddenProperties[i]] = true;
    }
    hiddenProperties = settings.hiddenProperties;
  }
  if (hiddenProperties) {
    return hiddenProperties[propertyName];
  } else {
    return false;
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Application.isProtectedProperty"></a>[function <span class="apidocSignatureSpan">loopback.Application.</span>isProtectedProperty (propertyName)](#apidoc.element.loopback.Application.isProtectedProperty)
- description and source-code
```javascript
isProtectedProperty = function (propertyName) {
  var Model = this;
  var settings = Model.definition && Model.definition.settings;
  var protectedProperties = settings && (settings.protectedProperties || settings.protected);
  if (Array.isArray(protectedProperties)) {
    // Cache the protected properties as an object for quick lookup
    settings.protectedProperties = {};
    for (var i = 0; i < protectedProperties.length; i++) {
      settings.protectedProperties[protectedProperties[i]] = true;
    }
    protectedProperties = settings.protectedProperties;
  }
  if (protectedProperties) {
    return protectedProperties[propertyName];
  } else {
    return false;
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Application.listenerCount"></a>[function <span class="apidocSignatureSpan">loopback.Application.</span>listenerCount ()](#apidoc.element.loopback.Application.listenerCount)
- description and source-code
```javascript
listenerCount = function () { [native code] }
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Application.listeners"></a>[function <span class="apidocSignatureSpan">loopback.Application.</span>listeners ()](#apidoc.element.loopback.Application.listeners)
- description and source-code
```javascript
listeners = function () { [native code] }
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Application.mixin"></a>[function <span class="apidocSignatureSpan">loopback.Application.</span>mixin (anotherClass, options)](#apidoc.element.loopback.Application.mixin)
- description and source-code
```javascript
mixin = function (anotherClass, options) {
  if (typeof anotherClass === 'string') {
    this.modelBuilder.mixins.applyMixin(this, anotherClass, options);
  } else {
    if (anotherClass.prototype instanceof ModelBaseClass) {
      var props = anotherClass.definition.properties;
      for (var i in props) {
        if (this.definition.properties[i]) {
          continue;
        }
        this.defineProperty(i, props[i]);
      }
    }
    return jutil.mixin(this, anotherClass, options);
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Application.nestRemoting"></a>[function <span class="apidocSignatureSpan">loopback.Application.</span>nestRemoting (relationName, options, filterCallback)](#apidoc.element.loopback.Application.nestRemoting)
- description and source-code
```javascript
nestRemoting = function (relationName, options, filterCallback) {
  if (typeof options === 'function' && !filterCallback) {
    filterCallback = options;
    options = {};
  }
  options = options || {};

  var regExp = /^__([^_]+)__([^_]+)$/;
  var relation = this.relations[relationName];
  if (relation && relation.modelTo && relation.modelTo.sharedClass) {
    var self = this;
    var sharedClass = this.sharedClass;
    var sharedToClass = relation.modelTo.sharedClass;
    var toModelName = relation.modelTo.modelName;

    var pathName = options.pathName || relation.options.path || relationName;
    var paramName = options.paramName || 'nk';

    var http = [].concat(sharedToClass.http || [])[0];
    var httpPath, acceptArgs;

    if (relation.multiple) {
      httpPath = pathName + '/:' + paramName;
      acceptArgs = [
        {
          arg: paramName, type: 'any', http: {source: 'path'},
          description: format('Foreign key for %s.',  relation.name),
          required: true,
        },
      ];
    } else {
      httpPath = pathName;
      acceptArgs = [];
    }

    if (httpPath[0] !== '/') {
      httpPath = '/' + httpPath;
    }

    // A method should return the method name to use, if it is to be
    // included as a nested method - a falsy return value will skip.
    var filter = filterCallback || options.filterMethod || function(method, relation) {
      var matches = method.name.match(regExp);
      if (matches) {
        return '__' + matches[1] + '__' + relation.name + '__' + matches[2];
      }
    };

    sharedToClass.methods().forEach(function(method) {
      var methodName;
      if (!method.isStatic && (methodName = filter(method, relation))) {
        var prefix = relation.multiple ? '__findById__' : '__get__';
        var getterName = options.getterName || (prefix + relationName);

        var getterFn = relation.modelFrom.prototype[getterName];
        if (typeof getterFn !== 'function') {
          throw new Error(g.f('Invalid remote method: '%s'', getterName));
        }

        var nestedFn = relation.modelTo.prototype[method.name];
        if (typeof nestedFn !== 'function') {
          throw new Error(g.f('Invalid remote method: '%s'', method.name));
        }

        var opts = {};

        opts.accepts = acceptArgs.concat(method.accepts || []);
        opts.returns = [].concat(method.returns || []);
        opts.description = method.description;
        opts.accessType = method.accessType;
        opts.rest = extend({}, method.rest || {});
        opts.rest.delegateTo = method;

        opts.http = [];
        var routes = [].concat(method.http || []);
        routes.forEach(function(route) {
          if (route.path) {
            var copy = extend({}, route);
            copy.path = httpPath + route.path;
            opts.http.push(copy);
          }
        });

        if (relation.multiple) {
          sharedClass.defineMethod(methodName, opts, function(fkId) {
            var args = Array.prototype.slice.call(arguments, 1);
            var last = args[args.length - 1];
            var cb = typeof last === 'function' ? last : null;
            this[getterName](fkId, function(err, inst) {
              if (err && cb) return cb(err);
              if (inst instanceof relation.modelTo) {
                try {
                  nestedFn.apply(inst, args);
                } catch (err) {
                  if (cb) return cb(err);
                }
              } else if (cb) {
                cb(err, null);
              }
            });
          }, method.isStatic);
        } else {
          sharedClass.defineMethod(methodName, opts, function() {
            var args = Array.prototype.slice.call(arguments);
            var last = args[args.length - 1];
            var cb = typeof last === 'function' ? last : null;
            this[getterName](function(err, inst) {
              if (err && cb) return cb(err);
              if (inst instanceof relation.modelTo) {
                try {
                  nestedFn.apply(inst, args);
                } catch (err) {
                  if (cb) return ...
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Application.notifyObserversAround"></a>[function <span class="apidocSignatureSpan">loopback.Application.</span>notifyObserversAround (operation, context, fn, callback)](#apidoc.element.loopback.Application.notifyObserversAround)
- description and source-code
```javascript
notifyObserversAround = function (operation, context, fn, callback) {
  var self = this;
  context = context || {};
  // Add callback to the context object so that an observer can skip other
  // ones by calling the callback function directly and not calling next
  if (context.end === undefined) {
    context.end = callback;
  }
  // First notify before observers
  return self.notifyObserversOf('before ' + operation, context,
    function(err, context) {
      if (err) return callback(err);

      function cbForWork(err) {
        var args = [].slice.call(arguments, 0);
        if (err) return callback.apply(null, args);
        // Find the list of params from the callback in addition to err
        var returnedArgs = args.slice(1);
        // Set up the array of results
        context.results = returnedArgs;
        // Notify after observers
        self.notifyObserversOf('after ' + operation, context,
          function(err, context) {
            if (err) return callback(err, context);
            var results = returnedArgs;
            if (context && Array.isArray(context.results)) {
              // Pickup the results from context
              results = context.results;
            }
            // Build the list of params for final callback
            var args = [err].concat(results);
            callback.apply(null, args);
          });
      }

      if (fn.length === 1) {
        // fn(done)
        fn(cbForWork);
      } else {
        // fn(context, done)
        fn(context, cbForWork);
      }
    });
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Application.notifyObserversOf"></a>[function <span class="apidocSignatureSpan">loopback.Application.</span>notifyObserversOf (operation, context, callback)](#apidoc.element.loopback.Application.notifyObserversOf)
- description and source-code
```javascript
notifyObserversOf = function (operation, context, callback) {
  var self = this;
  if (!callback) callback = utils.createPromiseCallback();

  function createNotifier(op) {
    return function(ctx, done) {
      if (typeof ctx === 'function' && done === undefined) {
        done = ctx;
        ctx = context;
      }
      self.notifyObserversOf(op, context, done);
    };
  }

  if (Array.isArray(operation)) {
    var tasks = [];
    for (var i = 0, n = operation.length; i < n; i++) {
      tasks.push(createNotifier(operation[i]));
    }
    return async.waterfall(tasks, callback);
  }

  var observers = this._observers && this._observers[operation];

  this._notifyBaseObservers(operation, context, function doNotify(err) {
    if (err) return callback(err, context);
    if (!observers || !observers.length) return callback(null, context);

    async.eachSeries(
      observers,
      function notifySingleObserver(fn, next) {
        var retval = fn(context, next);
        if (retval && typeof retval.then === 'function') {
          retval.then(
            function() { next(); return null; },
            next // error handler
          );
        }
      },
      function(err) { callback(err, context); }
    );
  });
  return callback.promise;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Application.observe"></a>[function <span class="apidocSignatureSpan">loopback.Application.</span>observe (operation, listener)](#apidoc.element.loopback.Application.observe)
- description and source-code
```javascript
observe = function (operation, listener) {
  this._observers = this._observers || {};
  if (!this._observers[operation]) {
    this._observers[operation] = [];
  }

  this._observers[operation].push(listener);
}
```
- example usage
```shell
...
var idType = idProp && idProp.type;
var idDefn = idProp && idProp.defaultFn;
if (idType !== String || !(idDefn === 'uuid' || idDefn === 'guid')) {
  deprecated('The model ' + this.modelName + ' is tracking changes, ' +
    'which requires a string id with GUID/UUID default value.');
}

Model.observe('after save', rectifyOnSave);

Model.observe('after delete', rectifyOnDelete);

// Only run if the run time is server
// Can switch off cleanup by setting the interval to -1
if (runtime.isServer && cleanupInterval > 0) {
  // initial cleanup
...
```

#### <a name="apidoc.element.loopback.Application.on"></a>[function <span class="apidocSignatureSpan">loopback.Application.</span>on ()](#apidoc.element.loopback.Application.on)
- description and source-code
```javascript
on = function () { [native code] }
```
- example usage
```shell
...
    this.remotes().addClass(Model.Change.sharedClass);
  }
  clearHandlerCache(this);
  this.emit('modelRemoted', Model.sharedClass);
}

var self = this;
Model.on('remoteMethodDisabled', function(model, methodName) {
  self.emit('remoteMethodDisabled', model, methodName);
});
Model.on('remoteMethodAdded', function(model) {
  self.emit('remoteMethodAdded', model);
});

Model.shared = isPublic;
...
```

#### <a name="apidoc.element.loopback.Application.once"></a>[function <span class="apidocSignatureSpan">loopback.Application.</span>once ()](#apidoc.element.loopback.Application.once)
- description and source-code
```javascript
once = function () { [native code] }
```
- example usage
```shell
...
    remotes.afterError(className + '.' + name, fn);
  });
};

ModelCtor._runWhenAttachedToApp = function(fn) {
  if (this.app) return fn(this.app);
  var self = this;
  self.once('attached', function() {
    fn(self.app);
  });
};

if ('injectOptionsFromRemoteContext' in options) {
  console.warn(g.f(
    '%s is using model setting %s which is no longer available.',
...
```

#### <a name="apidoc.element.loopback.Application.patchOrCreate"></a>[function <span class="apidocSignatureSpan">loopback.Application.</span>patchOrCreate (data, callback)](#apidoc.element.loopback.Application.patchOrCreate)
- description and source-code
```javascript
function upsert(data, callback) {
  throwNotAttached(this.modelName, 'upsert');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Application.patchOrCreateWithWhere"></a>[function <span class="apidocSignatureSpan">loopback.Application.</span>patchOrCreateWithWhere (where, data, callback)](#apidoc.element.loopback.Application.patchOrCreateWithWhere)
- description and source-code
```javascript
function upsertWithWhere(where, data, callback) {
  throwNotAttached(this.modelName, 'upsertWithWhere');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Application.prependListener"></a>[function <span class="apidocSignatureSpan">loopback.Application.</span>prependListener ()](#apidoc.element.loopback.Application.prependListener)
- description and source-code
```javascript
prependListener = function () { [native code] }
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Application.prependOnceListener"></a>[function <span class="apidocSignatureSpan">loopback.Application.</span>prependOnceListener ()](#apidoc.element.loopback.Application.prependOnceListener)
- description and source-code
```javascript
prependOnceListener = function () { [native code] }
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Application.rectifyAllChanges"></a>[function <span class="apidocSignatureSpan">loopback.Application.</span>rectifyAllChanges (callback)](#apidoc.element.loopback.Application.rectifyAllChanges)
- description and source-code
```javascript
rectifyAllChanges = function (callback) {
  this.getChangeModel().rectifyAll(callback);
}
```
- example usage
```shell
...
    cleanup();

    // cleanup
    setInterval(cleanup, cleanupInterval);
  }

  function cleanup() {
    Model.rectifyAllChanges(function(err) {
      if (err) {
        Model.handleChangeError(err, 'cleanup');
      }
    });
  }
};
...
```

#### <a name="apidoc.element.loopback.Application.rectifyChange"></a>[function <span class="apidocSignatureSpan">loopback.Application.</span>rectifyChange (id, callback)](#apidoc.element.loopback.Application.rectifyChange)
- description and source-code
```javascript
rectifyChange = function (id, callback) {
  var Change = this.getChangeModel();
  Change.rectifyModelChanges(this.modelName, [id], callback);
}
```
- example usage
```shell
...
  debug('rectifyOnSave %s -> ' + (id ? 'id %j' : '%s'),
    ctx.Model.modelName, id ? id : 'ALL');
  debug('context instance:%j currentInstance:%j where:%j data %j',
    ctx.instance, ctx.currentInstance, ctx.where, ctx.data);
}

if (id) {
  ctx.Model.rectifyChange(id, reportErrorAndNext);
} else {
  ctx.Model.rectifyAllChanges(reportErrorAndNext);
}

function reportErrorAndNext(err) {
  if (err) {
    ctx.Model.handleChangeError(err, 'after save');
...
```

#### <a name="apidoc.element.loopback.Application.register"></a>[function <span class="apidocSignatureSpan">loopback.Application.</span>register (owner, name, options, cb)](#apidoc.element.loopback.Application.register)
- description and source-code
```javascript
register = function (owner, name, options, cb) {
  assert(owner, 'owner is required');
  assert(name, 'name is required');

  if (typeof options === 'function' && !cb) {
    cb = options;
    options = {};
  }
  cb = cb || utils.createPromiseCallback();

  var props = {owner: owner, name: name};
  for (var p in options) {
    if (!(p in props)) {
      props[p] = options[p];
    }
  }
  this.create(props, cb);
  return cb.promise;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Application.registerProperty"></a>[function <span class="apidocSignatureSpan">loopback.Application.</span>registerProperty (propertyName)](#apidoc.element.loopback.Application.registerProperty)
- description and source-code
```javascript
registerProperty = function (propertyName) {
  var properties = modelDefinition.build();
  var prop = properties[propertyName];
  var DataType = prop.type;
  if (!DataType) {
    throw new Error(g.f('Invalid type for property %s', propertyName));
  }

  if (prop.required) {
    var requiredOptions = typeof prop.required === 'object' ? prop.required : undefined;
    ModelClass.validatesPresenceOf(propertyName, requiredOptions);
  }

  Object.defineProperty(ModelClass.prototype, propertyName, {
    get: function() {
      if (ModelClass.getter[propertyName]) {
        return ModelClass.getter[propertyName].call(this); // Try getter first
      } else {
        return this.__data && this.__data[propertyName]; // Try __data
      }
    },
    set: function(value) {
      var DataType = ModelClass.definition.properties[propertyName].type;
      if (Array.isArray(DataType) || DataType === Array) {
        DataType = List;
      } else if (DataType === Date) {
        DataType = DateType;
      } else if (DataType === Boolean) {
        DataType = BooleanType;
      } else if (typeof DataType === 'string') {
        DataType = modelBuilder.resolveType(DataType);
      }

      var persistUndefinedAsNull = ModelClass.definition.settings.persistUndefinedAsNull;
      if (value === undefined && persistUndefinedAsNull) {
        value = null;
      }

      if (ModelClass.setter[propertyName]) {
        ModelClass.setter[propertyName].call(this, value); // Try setter first
      } else {
        this.__data = this.__data || {};
        if (value === null || value === undefined) {
          this.__data[propertyName] = value;
        } else {
          if (DataType === List) {
            this.__data[propertyName] = DataType(value, properties[propertyName].type, this.__data);
          } else {
            // Assume the type constructor handles Constructor() call
            // If not, we should call new DataType(value).valueOf();
            this.__data[propertyName] = (value instanceof DataType) ? value : DataType(value);
          }
        }
      }
    },
    configurable: true,
    enumerable: true,
  });

  // FIXME: [rfeng] Do we need to keep the raw data?
  // Use $ as the prefix to avoid conflicts with properties such as _id
  Object.defineProperty(ModelClass.prototype, '$' + propertyName, {
    get: function() {
      return this.__data && this.__data[propertyName];
    },
    set: function(value) {
      if (!this.__data) {
        this.__data = {};
      }
      this.__data[propertyName] = value;
    },
    configurable: true,
    enumerable: false,
  });
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Application.remoteMethod"></a>[function <span class="apidocSignatureSpan">loopback.Application.</span>remoteMethod (name, options)](#apidoc.element.loopback.Application.remoteMethod)
- description and source-code
```javascript
remoteMethod = function (name, options) {
  if (options.isStatic === undefined) {
    var m = name.match(/^prototype\.(.*)$/);
    options.isStatic = !m;
    name = options.isStatic ? name : m[1];
  }

  if (options.accepts) {
    options = extend({}, options);
    options.accepts = setupOptionsArgs(options.accepts);
  }

  this.sharedClass.defineMethod(name, options);
  this.emit('remoteMethodAdded', this.sharedClass);
}
```
- example usage
```shell
...
  /**
* Enable remote invocation for the specified method.
* See [Remote methods](http://loopback.io/doc/en/lb2/Remote-methods.html) for more information.
*
* Static method example:
* '''js
* Model.myMethod();
* Model.remoteMethod('myMethod');
* '''
*
* @param {String} name The name of the method.
* @param {Object} options The remoting options.
* See [Remote methods - Options](http://loopback.io/doc/en/lb2/Remote-methods.html#options).
*/
...
```

#### <a name="apidoc.element.loopback.Application.remove"></a>[function <span class="apidocSignatureSpan">loopback.Application.</span>remove (where, cb)](#apidoc.element.loopback.Application.remove)
- description and source-code
```javascript
function destroyAll(where, cb) {
  throwNotAttached(this.modelName, 'destroyAll');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Application.removeAllListeners"></a>[function <span class="apidocSignatureSpan">loopback.Application.</span>removeAllListeners ()](#apidoc.element.loopback.Application.removeAllListeners)
- description and source-code
```javascript
removeAllListeners = function () { [native code] }
```
- example usage
```shell
...

var idName = this.getIdName();
var Model = this;
var changes = new PassThrough({objectMode: true});
var writeable = true;

changes.destroy = function() {
  changes.removeAllListeners('error');
  changes.removeAllListeners('end');
  writeable = false;
  changes = null;
};

changes.on('error', function() {
  writeable = false;
...
```

#### <a name="apidoc.element.loopback.Application.removeById"></a>[function <span class="apidocSignatureSpan">loopback.Application.</span>removeById (id, cb)](#apidoc.element.loopback.Application.removeById)
- description and source-code
```javascript
function deleteById(id, cb) {
  throwNotAttached(this.modelName, 'deleteById');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Application.removeListener"></a>[function <span class="apidocSignatureSpan">loopback.Application.</span>removeListener ()](#apidoc.element.loopback.Application.removeListener)
- description and source-code
```javascript
removeListener = function () { [native code] }
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Application.removeObserver"></a>[function <span class="apidocSignatureSpan">loopback.Application.</span>removeObserver (operation, listener)](#apidoc.element.loopback.Application.removeObserver)
- description and source-code
```javascript
removeObserver = function (operation, listener) {
  if (!(this._observers && this._observers[operation])) return;

  var index = this._observers[operation].indexOf(listener);
  if (index !== -1) {
    return this._observers[operation].splice(index, 1);
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Application.replaceById"></a>[function <span class="apidocSignatureSpan">loopback.Application.</span>replaceById (id, data, cb)](#apidoc.element.loopback.Application.replaceById)
- description and source-code
```javascript
function replaceById(id, data, cb) {
  throwNotAttached(this.modelName, 'replaceById');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Application.replaceOrCreate"></a>[function <span class="apidocSignatureSpan">loopback.Application.</span>replaceOrCreate (data, callback)](#apidoc.element.loopback.Application.replaceOrCreate)
- description and source-code
```javascript
function replaceOrCreate(data, callback) {
  throwNotAttached(this.modelName, 'replaceOrCreate');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Application.replicate"></a>[function <span class="apidocSignatureSpan">loopback.Application.</span>replicate (since, targetModel, options, callback)](#apidoc.element.loopback.Application.replicate)
- description and source-code
```javascript
replicate = function (since, targetModel, options, callback) {
  var lastArg = arguments[arguments.length - 1];

  if (typeof lastArg === 'function' && arguments.length > 1) {
    callback = lastArg;
  }

  if (typeof since === 'function' && since.modelName) {
    targetModel = since;
    since = -1;
  }

  if (typeof since !== 'object') {
    since = {source: since, target: since};
  }

  if (typeof options === 'function') {
    options = {};
  }

  options = options || {};

  var sourceModel = this;
  callback = callback || utils.createPromiseCallback();

  debug('replicating %s since %s to %s since %s',
    sourceModel.modelName,
    since.source,
    targetModel.modelName,
    since.target);
  if (options.filter) {
    debug('\twith filter %j', options.filter);
  }

  // In order to avoid a race condition between the replication and
  // other clients modifying the data, we must create the new target
  // checkpoint as the first step of the replication process.
  // As a side-effect of that, the replicated changes are associated
  // with the new target checkpoint. This is actually desired behaviour,
  // because that way clients replicating *from* the target model
  // since the new checkpoint will pick these changes up.
  // However, it increases the likelihood of (false) conflicts being detected.
  // In order to prevent that, we run the replication multiple times,
  // until no changes were replicated, but at most MAX_ATTEMPTS times
  // to prevent starvation. In most cases, the second run will find no changes
  // to replicate and we are done.
  var MAX_ATTEMPTS = 3;

  run(1, since);
  return callback.promise;

  function run(attempt, since) {
    debug('\titeration #%s', attempt);
    tryReplicate(sourceModel, targetModel, since, options, next);

    function next(err, conflicts, cps, updates) {
      var finished = err || conflicts.length ||
        !updates || updates.length === 0 ||
        attempt >= MAX_ATTEMPTS;

      if (finished)
        return callback(err, conflicts, cps);
      run(attempt + 1, cps);
    }
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Application.resetKeys"></a>[function <span class="apidocSignatureSpan">loopback.Application.</span>resetKeys (appId, cb)](#apidoc.element.loopback.Application.resetKeys)
- description and source-code
```javascript
resetKeys = function (appId, cb) {
  cb = cb || utils.createPromiseCallback();
  this.findById(appId, function(err, app) {
    if (err) {
      if (cb) cb(err, app);
      return;
    }
    app.resetKeys(cb);
  });
  return cb.promise;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Application.scopeRemoting"></a>[function <span class="apidocSignatureSpan">loopback.Application.</span>scopeRemoting (scopeName, scope, define)](#apidoc.element.loopback.Application.scopeRemoting)
- description and source-code
```javascript
scopeRemoting = function (scopeName, scope, define) {
  var pathName =
    (scope.options && scope.options.http && scope.options.http.path) || scopeName;

  var isStatic = scope.isStatic;
  var toModelName = scope.modelTo.modelName;

  // https://github.com/strongloop/loopback/issues/811
  // Check if the scope is for a hasMany relation
  var relation = this.relations[scopeName];
  if (relation && relation.modelTo) {
    // For a relation with through model, the toModelName should be the one
    // from the target model
    toModelName = relation.modelTo.modelName;
  }

  define('__get__' + scopeName, {
    isStatic: isStatic,
    http: {verb: 'get', path: '/' + pathName},
    accepts: [
      {arg: 'filter', type: 'object'},
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Queries %s of %s.', scopeName, this.modelName),
    accessType: 'READ',
    returns: {arg: scopeName, type: [toModelName], root: true},
  });

  define('__create__' + scopeName, {
    isStatic: isStatic,
    http: {verb: 'post', path: '/' + pathName},
    accepts: [
      {
        arg: 'data',
        type: 'object',
        allowArray: true,
        model: toModelName,
        http: {source: 'body'},
      },
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Creates a new instance in %s of this model.', scopeName),
    accessType: 'WRITE',
    returns: {arg: 'data', type: toModelName, root: true},
  });

  define('__delete__' + scopeName, {
    isStatic: isStatic,
    http: {verb: 'delete', path: '/' + pathName},
    accepts: [
      {
        arg: 'where', type: 'object',
        // The "where" argument is not exposed in the REST API
        // but we need to provide a value so that we can pass "options"
        // as the third argument.
        http: function(ctx) { return undefined; },
      },
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Deletes all %s of this model.', scopeName),
    accessType: 'WRITE',
  });

  define('__count__' + scopeName, {
    isStatic: isStatic,
    http: {verb: 'get', path: '/' + pathName + '/count'},
    accepts: [
      {
        arg: 'where', type: 'object',
        description: 'Criteria to match model instances',
      },
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Counts %s of %s.', scopeName, this.modelName),
    accessType: 'READ',
    returns: {arg: 'count',  type: 'number'},
  });
}
```
- example usage
```shell
...
        ModelCtor.hasManyRemoting(relationName, relation, define);
      }
    }

    // handle scopes
    var scopes = ModelCtor.scopes || {};
    for (var scopeName in scopes) {
      ModelCtor.scopeRemoting(scopeName, scopes[scopeName], define);
    }
  });

  return ModelCtor;
};

/*!
...
```

#### <a name="apidoc.element.loopback.Application.setMaxListeners"></a>[function <span class="apidocSignatureSpan">loopback.Application.</span>setMaxListeners ()](#apidoc.element.loopback.Application.setMaxListeners)
- description and source-code
```javascript
setMaxListeners = function () { [native code] }
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Application.setup"></a>[function <span class="apidocSignatureSpan">loopback.Application.</span>setup ()](#apidoc.element.loopback.Application.setup)
- description and source-code
```javascript
function setupPersistedModel() {
  // call Model.setup first
  Model.setup.call(this);

  var PersistedModel = this;

  // enable change tracking (usually for replication)
  if (this.settings.trackChanges) {
    PersistedModel._defineChangeModel();
    PersistedModel.once('dataSourceAttached', function() {
      PersistedModel.enableChangeTracking();
    });
  } else if (this.settings.enableRemoteReplication) {
    PersistedModel._defineChangeModel();
  }

  PersistedModel.setupRemoting();
}
```
- example usage
```shell
...
  Model.createOptionsFromRemotingContext = function(ctx) {
    return {
      accessToken: ctx.req.accessToken,
    };
  };

  // setup the initial model
  Model.setup();

  return Model;
};
...
```

#### <a name="apidoc.element.loopback.Application.setupRemoting"></a>[function <span class="apidocSignatureSpan">loopback.Application.</span>setupRemoting ()](#apidoc.element.loopback.Application.setupRemoting)
- description and source-code
```javascript
setupRemoting = function () {
  var PersistedModel = this;
  var typeName = PersistedModel.modelName;
  var options = PersistedModel.settings;

  // This is just for LB 3.x
  options.replaceOnPUT = options.replaceOnPUT !== false;

  function setRemoting(scope, name, options) {
    var fn = scope[name];
    fn._delegate = true;
    options.isStatic = scope === PersistedModel;
    PersistedModel.remoteMethod(name, options);
  }

  setRemoting(PersistedModel, 'create', {
    description: 'Create a new instance of the model and persist it into the data source.',
    accessType: 'WRITE',
    accepts: [
      {
        arg: 'data', type: 'object', model: typeName, allowArray: true,
        description: 'Model instance data',
        http: {source: 'body'},
      },
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    returns: {arg: 'data', type: typeName, root: true},
    http: {verb: 'post', path: '/'},
  });

  var upsertOptions = {
    aliases: ['upsert', 'updateOrCreate'],
    description: 'Patch an existing model instance or insert a new one ' +
      'into the data source.',
    accessType: 'WRITE',
    accepts: [
      {
        arg: 'data', type: 'object', model: typeName, http: {source: 'body'},
        description: 'Model instance data',
      },
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    returns: {arg: 'data', type: typeName, root: true},
    http: [{verb: 'patch', path: '/'}],
  };

  if (!options.replaceOnPUT) {
    upsertOptions.http.unshift({verb: 'put', path: '/'});
  }
  setRemoting(PersistedModel, 'patchOrCreate', upsertOptions);

  var replaceOrCreateOptions = {
    description: 'Replace an existing model instance or insert a new one into the data source.',
    accessType: 'WRITE',
    accepts: [
      {
        arg: 'data', type: 'object', model: typeName,
        http: {source: 'body'},
        description: 'Model instance data',
      },
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    returns: {arg: 'data', type: typeName, root: true},
    http: [{verb: 'post', path: '/replaceOrCreate'}],
  };

  if (options.replaceOnPUT) {
    replaceOrCreateOptions.http.push({verb: 'put', path: '/'});
  }

  setRemoting(PersistedModel, 'replaceOrCreate', replaceOrCreateOptions);

  setRemoting(PersistedModel, 'upsertWithWhere', {
    aliases: ['patchOrCreateWithWhere'],
    description: 'Update an existing model instance or insert a new one into ' +
      'the data source based on the where criteria.',
    accessType: 'WRITE',
    accepts: [
      {arg: 'where', type: 'object', http: {source: 'query'},
        description: 'Criteria to match model instances'},
      {arg: 'data', type: 'object', model: typeName, http: {source: 'body'},
        description: 'An object of model property name/value pairs'},
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    returns: {arg: 'data', type: typeName, root: true},
    http: {verb: 'post', path: '/upsertWithWhere'},
  });

  setRemoting(PersistedModel, 'exists', {
    description: 'Check whether a model instance exists in the data source.',
    accessType: 'READ',
    accepts: [
      {arg: 'id', type: 'any', description: 'Model id', required: true},
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    returns: {arg: 'exists', type: 'boolean'},
    http: [
      {verb: 'get', path: '/:id/exists'},
      {verb: 'head', path: '/:id'},
    ],
    rest: {
      // After hook to map exists to 200/404 for HEAD
      after: function(ctx, cb) {
        if (ctx.req.method === 'GET') {
          // For GET, return {exists: true|false} as is
          return cb();
        }
        if (!ctx.result.exists) {
          var modelName = ctx.method.sharedClass.name;
          var id = ctx.getArgByName('id');
          var msg = 'Unknown "' + modelName + '" id "' + id + '".';
          var error = new Error(msg);
          error.statusCode = error.status = 404;
          error.code = 'MODEL_NOT_FOUND';
          cb(error);
        } else {
          cb();
        } ...
```
- example usage
```shell
...
    PersistedModel.once('dataSourceAttached', function() {
      PersistedModel.enableChangeTracking();
    });
  } else if (this.settings.enableRemoteReplication) {
    PersistedModel._defineChangeModel();
  }

  PersistedModel.setupRemoting();
};

/*!
 * Throw an error telling the user that the method is not available and why.
 */

function throwNotAttached(modelName, methodName) {
...
```

#### <a name="apidoc.element.loopback.Application.sharedCtor"></a>[function <span class="apidocSignatureSpan">loopback.Application.</span>sharedCtor (data, id, options, fn)](#apidoc.element.loopback.Application.sharedCtor)
- description and source-code
```javascript
sharedCtor = function (data, id, options, fn) {
  var ModelCtor = this;

  var isRemoteInvocationWithOptions = typeof data !== 'object' &&
    typeof id === 'object' &&
    typeof options === 'function';
  if (isRemoteInvocationWithOptions) {
    // sharedCtor(id, options, fn)
    fn = options;
    options = id;
    id = data;
    data = null;
  } else if (typeof data === 'function') {
    // sharedCtor(fn)
    fn = data;
    data = null;
    id = null;
    options = null;
  } else if (typeof id === 'function') {
    // sharedCtor(data, fn)
    // sharedCtor(id, fn)
    fn = id;
    options = null;

    if (typeof data !== 'object') {
      id = data;
      data = null;
    } else {
      id = null;
    }
  }

  if (id && data) {
    var model = new ModelCtor(data);
    model.id = id;
    fn(null, model);
  } else if (data) {
    fn(null, new ModelCtor(data));
  } else if (id) {
    var filter = {};
    ModelCtor.findById(id, filter, options, function(err, model) {
      if (err) {
        fn(err);
      } else if (model) {
        fn(null, model);
      } else {
        err = new Error(g.f('could not find a model with apidoc.element.loopback.Application.sharedCtor %s', id));
        err.statusCode = 404;
        err.code = 'MODEL_NOT_FOUND';
        fn(err);
      }
    });
  } else {
    fn(new Error(g.f('must specify an apidoc.element.loopback.Application.sharedCtor or {{data}}')));
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Application.super_"></a>[function <span class="apidocSignatureSpan">loopback.Application.</span>super_ (data, options)](#apidoc.element.loopback.Application.super_)
- description and source-code
```javascript
function ModelConstructor(data, options) {
  if (!(this instanceof ModelConstructor)) {
    return new ModelConstructor(data, options);
  }
  if (ModelClass.settings.unresolved) {
    throw new Error(g.f('Model %s is not defined.', ModelClass.modelName));
  }
  ModelBaseClass.apply(this, arguments);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Application.update"></a>[function <span class="apidocSignatureSpan">loopback.Application.</span>update (where, data, cb)](#apidoc.element.loopback.Application.update)
- description and source-code
```javascript
function updateAll(where, data, cb) {
  throwNotAttached(this.modelName, 'updateAll');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Application.updateAll"></a>[function <span class="apidocSignatureSpan">loopback.Application.</span>updateAll (where, data, cb)](#apidoc.element.loopback.Application.updateAll)
- description and source-code
```javascript
function updateAll(where, data, cb) {
  throwNotAttached(this.modelName, 'updateAll');
}
```
- example usage
```shell
...

  /**
* Update multiple instances that match the where clause.
*
* Example:
*
*'''js
* Employee.updateAll({managerId: 'x001'}, {managerId: 'x002'}, function(err, info) {
*     ...
* });
* '''
*
* @param {Object} [where] Optional 'where' filter, like
* '''
* { key: val, key2: {gt: 'val2'}, ...}
...
```

#### <a name="apidoc.element.loopback.Application.updateLastChange"></a>[function <span class="apidocSignatureSpan">loopback.Application.</span>updateLastChange (id, data, cb)](#apidoc.element.loopback.Application.updateLastChange)
- description and source-code
```javascript
updateLastChange = function (id, data, cb) {
  var self = this;
  this.findLastChange(id, function(err, inst) {
    if (err) return cb(err);
    if (!inst) {
      err = new Error(g.f('No change record found for %s with id %s',
        self.modelName, id));
      err.statusCode = 404;
      return cb(err);
    }

    inst.updateAttributes(data, cb);
  });
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Application.updateOrCreate"></a>[function <span class="apidocSignatureSpan">loopback.Application.</span>updateOrCreate (data, callback)](#apidoc.element.loopback.Application.updateOrCreate)
- description and source-code
```javascript
function upsert(data, callback) {
  throwNotAttached(this.modelName, 'upsert');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Application.upsert"></a>[function <span class="apidocSignatureSpan">loopback.Application.</span>upsert (data, callback)](#apidoc.element.loopback.Application.upsert)
- description and source-code
```javascript
function upsert(data, callback) {
  throwNotAttached(this.modelName, 'upsert');
}
```
- example usage
```shell
...
  }
});

// then save
function save() {
  inst.trigger('save', function(saveDone) {
    inst.trigger('update', function(updateDone) {
      Model.upsert(inst, function(err) {
        inst._initProperties(data);
        updateDone.call(inst, function() {
          saveDone.call(inst, function() {
            callback(err, inst);
          });
        });
      });
...
```

#### <a name="apidoc.element.loopback.Application.upsertWithWhere"></a>[function <span class="apidocSignatureSpan">loopback.Application.</span>upsertWithWhere (where, data, callback)](#apidoc.element.loopback.Application.upsertWithWhere)
- description and source-code
```javascript
function upsertWithWhere(where, data, callback) {
  throwNotAttached(this.modelName, 'upsertWithWhere');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Application.validate"></a>[function <span class="apidocSignatureSpan">loopback.Application.</span>validate ()](#apidoc.element.loopback.Application.validate)
- description and source-code
```javascript
validate = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Application.validateAsync"></a>[function <span class="apidocSignatureSpan">loopback.Application.</span>validateAsync ()](#apidoc.element.loopback.Application.validateAsync)
- description and source-code
```javascript
validateAsync = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Application.validatesAbsenceOf"></a>[function <span class="apidocSignatureSpan">loopback.Application.</span>validatesAbsenceOf ()](#apidoc.element.loopback.Application.validatesAbsenceOf)
- description and source-code
```javascript
validatesAbsenceOf = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Application.validatesExclusionOf"></a>[function <span class="apidocSignatureSpan">loopback.Application.</span>validatesExclusionOf ()](#apidoc.element.loopback.Application.validatesExclusionOf)
- description and source-code
```javascript
validatesExclusionOf = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Application.validatesFormatOf"></a>[function <span class="apidocSignatureSpan">loopback.Application.</span>validatesFormatOf ()](#apidoc.element.loopback.Application.validatesFormatOf)
- description and source-code
```javascript
validatesFormatOf = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Application.validatesInclusionOf"></a>[function <span class="apidocSignatureSpan">loopback.Application.</span>validatesInclusionOf ()](#apidoc.element.loopback.Application.validatesInclusionOf)
- description and source-code
```javascript
validatesInclusionOf = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Application.validatesLengthOf"></a>[function <span class="apidocSignatureSpan">loopback.Application.</span>validatesLengthOf ()](#apidoc.element.loopback.Application.validatesLengthOf)
- description and source-code
```javascript
validatesLengthOf = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Application.validatesNumericalityOf"></a>[function <span class="apidocSignatureSpan">loopback.Application.</span>validatesNumericalityOf ()](#apidoc.element.loopback.Application.validatesNumericalityOf)
- description and source-code
```javascript
validatesNumericalityOf = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Application.validatesPresenceOf"></a>[function <span class="apidocSignatureSpan">loopback.Application.</span>validatesPresenceOf ()](#apidoc.element.loopback.Application.validatesPresenceOf)
- description and source-code
```javascript
validatesPresenceOf = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Application.validatesUniquenessOf"></a>[function <span class="apidocSignatureSpan">loopback.Application.</span>validatesUniquenessOf ()](#apidoc.element.loopback.Application.validatesUniquenessOf)
- description and source-code
```javascript
validatesUniquenessOf = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```



# <a name="apidoc.module.loopback.Application.prototype"></a>[module loopback.Application.prototype](#apidoc.module.loopback.Application.prototype)

#### <a name="apidoc.element.loopback.Application.prototype.resetKeys"></a>[function <span class="apidocSignatureSpan">loopback.Application.prototype.</span>resetKeys (cb)](#apidoc.element.loopback.Application.prototype.resetKeys)
- description and source-code
```javascript
resetKeys = function (cb) {
  this.clientKey = generateKey('client');
  this.javaScriptKey = generateKey('javaScript');
  this.restApiKey = generateKey('restApi');
  this.windowsKey = generateKey('windows');
  this.masterKey = generateKey('master');
  this.modified = new Date();
  this.save(cb);
}
```
- example usage
```shell
n/a
```



# <a name="apidoc.module.loopback.Application.settings"></a>[module loopback.Application.settings](#apidoc.module.loopback.Application.settings)

#### <a name="apidoc.element.loopback.Application.settings.base"></a>[function <span class="apidocSignatureSpan">loopback.Application.settings.</span>base (data, options)](#apidoc.element.loopback.Application.settings.base)
- description and source-code
```javascript
function ModelConstructor(data, options) {
  if (!(this instanceof ModelConstructor)) {
    return new ModelConstructor(data, options);
  }
  if (ModelClass.settings.unresolved) {
    throw new Error(g.f('Model %s is not defined.', ModelClass.modelName));
  }
  ModelBaseClass.apply(this, arguments);
}
```
- example usage
```shell
n/a
```



# <a name="apidoc.module.loopback.Application.sharedClass"></a>[module loopback.Application.sharedClass](#apidoc.module.loopback.Application.sharedClass)

#### <a name="apidoc.element.loopback.Application.sharedClass.ctor"></a>[function <span class="apidocSignatureSpan">loopback.Application.sharedClass.</span>ctor (data, options)](#apidoc.element.loopback.Application.sharedClass.ctor)
- description and source-code
```javascript
function ModelConstructor(data, options) {
  if (!(this instanceof ModelConstructor)) {
    return new ModelConstructor(data, options);
  }
  if (ModelClass.settings.unresolved) {
    throw new Error(g.f('Model %s is not defined.', ModelClass.modelName));
  }
  ModelBaseClass.apply(this, arguments);
}
```
- example usage
```shell
n/a
```



# <a name="apidoc.module.loopback.Change"></a>[module loopback.Change](#apidoc.module.loopback.Change)

#### <a name="apidoc.element.loopback.Change.Change"></a>[function <span class="apidocSignatureSpan">loopback.</span>Change (data, options)](#apidoc.element.loopback.Change.Change)
- description and source-code
```javascript
function ModelConstructor(data, options) {
  if (!(this instanceof ModelConstructor)) {
    return new ModelConstructor(data, options);
  }
  if (ModelClass.settings.unresolved) {
    throw new Error(g.f('Model %s is not defined.', ModelClass.modelName));
  }
  ModelBaseClass.apply(this, arguments);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Change.Conflict"></a>[function <span class="apidocSignatureSpan">loopback.Change.</span>Conflict (modelId, SourceModel, TargetModel)](#apidoc.element.loopback.Change.Conflict)
- description and source-code
```javascript
function Conflict(modelId, SourceModel, TargetModel) {
  this.SourceModel = SourceModel;
  this.TargetModel = TargetModel;
  this.SourceChange = SourceModel.getChangeModel();
  this.TargetChange = TargetModel.getChangeModel();
  this.modelId = modelId;
}
```
- example usage
```shell
...
debug('\treplication finished');
debug('\t\t%s conflict(s) detected', diff.conflicts.length);
debug('\t\t%s change(s) applied', updates ? updates.length : 0);
debug('\t\tnew checkpoints: { source: %j, target: %j }',
  newSourceCp, newTargetCp);

var conflicts = diff.conflicts.map(function(change) {
  return new Change.Conflict(
    change.modelId, sourceModel, targetModel
  );
});

if (conflicts.length) {
  sourceModel.emit('conflicts', conflicts);
}
...
```

#### <a name="apidoc.element.loopback.Change.ValidationError"></a>[function <span class="apidocSignatureSpan">loopback.Change.</span>ValidationError (obj)](#apidoc.element.loopback.Change.ValidationError)
- description and source-code
```javascript
function ValidationError(obj) {
  if (!(this instanceof ValidationError)) return new ValidationError(obj);

  this.name = 'ValidationError';

  var context = obj && obj.constructor && obj.constructor.modelName;
  this.message = g.f(
    'The %s instance is not valid. Details: %s.',
      context ? ''' + context + ''' : 'model',
      formatErrors(obj.errors, obj.toJSON()) || '(unknown)'
  );

  this.statusCode = 422;

  this.details = {
    context: context,
    codes: obj.errors && obj.errors.codes,
    messages: obj.errors,
  };

  if (Error.captureStackTrace) {
    // V8 (Chrome, Opera, Node)
    Error.captureStackTrace(this, this.constructor);
  } else if (errorHasStackProperty) {
    // Firefox
    this.stack = (new Error).stack;
  }
  // Safari and PhantomJS initializes 'error.stack' on throw
  // Internet Explorer does not support 'error.stack'
}
```
- example usage
```shell
...
  return save();
}

inst.isValid(function(valid) {
  if (valid) {
    save();
  } else {
    var err = new Model.ValidationError(inst);
    // throws option is dangerous for async usage
    if (options.throws) {
      throw err;
    }
    callback(err, inst);
  }
});
...
```

#### <a name="apidoc.element.loopback.Change._ACL"></a>[function <span class="apidocSignatureSpan">loopback.Change.</span>_ACL (ACL)](#apidoc.element.loopback.Change._ACL)
- description and source-code
```javascript
function getACL(ACL) {
  var registry = this.registry;
  if (ACL !== undefined) {
    // The function is used as a setter
    _aclModel = ACL;
  }
  if (_aclModel) {
    return _aclModel;
  }
  var aclModel = registry.getModel('ACL');
  _aclModel = registry.getModelByType(aclModel);
  return _aclModel;
}
```
- example usage
```shell
...
   * @param {String|Error} err The error object.
   * @param {Boolean} allowed True if the request is allowed; false otherwise.
   */

  Model.checkAccess = function(token, modelId, sharedMethod, ctx, callback) {
var ANONYMOUS = registry.getModel('AccessToken').ANONYMOUS;
token = token || ANONYMOUS;
var aclModel = Model._ACL();

ctx = ctx || {};
if (typeof ctx === 'function' && callback === undefined) {
  callback = ctx;
  ctx = {};
}
...
```

#### <a name="apidoc.element.loopback.Change._defineChangeModel"></a>[function <span class="apidocSignatureSpan">loopback.Change.</span>_defineChangeModel ()](#apidoc.element.loopback.Change._defineChangeModel)
- description and source-code
```javascript
_defineChangeModel = function () {
  var BaseChangeModel = this.registry.getModel('Change');
  assert(BaseChangeModel,
    'Change model must be defined before enabling change replication');

  const additionalChangeModelProperties =
    this.settings.additionalChangeModelProperties || {};

  this.Change = BaseChangeModel.extend(this.modelName + '-change',
    additionalChangeModelProperties,
    {trackModel: this}
  );

  if (this.dataSource) {
    attachRelatedModels(this);
  }

  // Re-attach related models whenever our datasource is changed.
  var self = this;
  this.on('dataSourceAttached', function() {
    attachRelatedModels(self);
  });

  return this.Change;

  function attachRelatedModels(self) {
    self.Change.attachTo(self.dataSource);
    self.Change.getCheckpointModel().attachTo(self.dataSource);
  }
}
```
- example usage
```shell
...
// call Model.setup first
Model.setup.call(this);

var PersistedModel = this;

// enable change tracking (usually for replication)
if (this.settings.trackChanges) {
  PersistedModel._defineChangeModel();
  PersistedModel.once('dataSourceAttached', function() {
    PersistedModel.enableChangeTracking();
  });
} else if (this.settings.enableRemoteReplication) {
  PersistedModel._defineChangeModel();
}
...
```

#### <a name="apidoc.element.loopback.Change._getAccessTypeForMethod"></a>[function <span class="apidocSignatureSpan">loopback.Change.</span>_getAccessTypeForMethod (method)](#apidoc.element.loopback.Change._getAccessTypeForMethod)
- description and source-code
```javascript
_getAccessTypeForMethod = function (method) {
  if (typeof method === 'string') {
    method = {name: method};
  }
  assert(
    typeof method === 'object',
    'method is a required argument and must be a RemoteMethod object'
  );

  var ACL = Model._ACL();

  // Check the explicit setting of accessType
  if (method.accessType) {
    assert(method.accessType === ACL.READ ||
      method.accessType === ACL.REPLICATE ||
      method.accessType === ACL.WRITE ||
      method.accessType === ACL.EXECUTE, 'invalid accessType ' +
      method.accessType +
      '. It must be "READ", "REPLICATE", "WRITE", or "EXECUTE"');
    return method.accessType;
  }

  // Default GET requests to READ
  var verb = method.http && method.http.verb;
  if (typeof verb === 'string') {
    verb = verb.toUpperCase();
  }
  if (verb === 'GET' || verb === 'HEAD') {
    return ACL.READ;
  }

  switch (method.name) {
    case 'create':
      return ACL.WRITE;
    case 'updateOrCreate':
      return ACL.WRITE;
    case 'upsertWithWhere':
      return ACL.WRITE;
    case 'upsert':
      return ACL.WRITE;
    case 'exists':
      return ACL.READ;
    case 'findById':
      return ACL.READ;
    case 'find':
      return ACL.READ;
    case 'findOne':
      return ACL.READ;
    case 'destroyById':
      return ACL.WRITE;
    case 'deleteById':
      return ACL.WRITE;
    case 'removeById':
      return ACL.WRITE;
    case 'count':
      return ACL.READ;
    default:
      return ACL.EXECUTE;
  }
}
```
- example usage
```shell
...
if (this.sharedMethod) {
  this.methodNames = this.sharedMethod.aliases.concat([this.sharedMethod.name]);
} else {
  this.methodNames = [];
}

if (this.sharedMethod) {
  this.accessType = this.model._getAccessTypeForMethod(this.sharedMethod);
}

this.accessType = context.accessType || AccessContext.ALL;
assert(loopback.AccessToken,
  'AccessToken model must be defined before AccessContext model');
this.accessToken = context.accessToken || loopback.AccessToken.ANONYMOUS;
...
```

#### <a name="apidoc.element.loopback.Change._notifyBaseObservers"></a>[function <span class="apidocSignatureSpan">loopback.Change.</span>_notifyBaseObservers (operation, context, callback)](#apidoc.element.loopback.Change._notifyBaseObservers)
- description and source-code
```javascript
_notifyBaseObservers = function (operation, context, callback) {
  if (this.base && this.base.notifyObserversOf)
    this.base.notifyObserversOf(operation, context, callback);
  else
    callback();
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Change._runWhenAttachedToApp"></a>[function <span class="apidocSignatureSpan">loopback.Change.</span>_runWhenAttachedToApp (fn)](#apidoc.element.loopback.Change._runWhenAttachedToApp)
- description and source-code
```javascript
_runWhenAttachedToApp = function (fn) {
  if (this.app) return fn(this.app);
  var self = this;
  self.once('attached', function() {
    fn(self.app);
  });
}
```
- example usage
```shell
...
  ModelCtor,
  remotingOptions
);

// before remote hook
ModelCtor.beforeRemote = function(name, fn) {
  var className = this.modelName;
  this._runWhenAttachedToApp(function(app) {
    var remotes = app.remotes();
    remotes.before(className + '.' + name, function(ctx, next) {
      return fn(ctx, ctx.result, next);
    });
  });
};
...
```

#### <a name="apidoc.element.loopback.Change.addListener"></a>[function <span class="apidocSignatureSpan">loopback.Change.</span>addListener ()](#apidoc.element.loopback.Change.addListener)
- description and source-code
```javascript
addListener = function () { [native code] }
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Change.afterRemote"></a>[function <span class="apidocSignatureSpan">loopback.Change.</span>afterRemote (name, fn)](#apidoc.element.loopback.Change.afterRemote)
- description and source-code
```javascript
afterRemote = function (name, fn) {
  var className = this.modelName;
  this._runWhenAttachedToApp(function(app) {
    var remotes = app.remotes();
    remotes.after(className + '.' + name, function(ctx, next) {
      return fn(ctx, ctx.result, next);
    });
  });
}
```
- example usage
```shell
...
        var m = method.isStatic ? method.name : 'prototype.' + method.name;
        if (before && before[delegateTo.name]) {
          self.beforeRemote(m, function(ctx, result, next) {
            before[delegateTo.name]._listeners.call(null, ctx, next);
          });
        }
        if (after && after[delegateTo.name]) {
          self.afterRemote(m, function(ctx, result, next) {
            after[delegateTo.name]._listeners.call(null, ctx, next);
          });
        }
      }
    });
  });
} else {
...
```

#### <a name="apidoc.element.loopback.Change.afterRemoteError"></a>[function <span class="apidocSignatureSpan">loopback.Change.</span>afterRemoteError (name, fn)](#apidoc.element.loopback.Change.afterRemoteError)
- description and source-code
```javascript
afterRemoteError = function (name, fn) {
  var className = this.modelName;
  this._runWhenAttachedToApp(function(app) {
    var remotes = app.remotes();
    remotes.afterError(className + '.' + name, fn);
  });
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Change.attachTo"></a>[function <span class="apidocSignatureSpan">loopback.Change.</span>attachTo (dataSource)](#apidoc.element.loopback.Change.attachTo)
- description and source-code
```javascript
attachTo = function (dataSource) {
  dataSource.attach(this);
}
```
- example usage
```shell
...
  this.on('dataSourceAttached', function() {
    attachRelatedModels(self);
  });

  return this.Change;

  function attachRelatedModels(self) {
    self.Change.attachTo(self.dataSource);
    self.Change.getCheckpointModel().attachTo(self.dataSource);
  }
};

PersistedModel.rectifyAllChanges = function(callback) {
  this.getChangeModel().rectifyAll(callback);
};
...
```

#### <a name="apidoc.element.loopback.Change.beforeRemote"></a>[function <span class="apidocSignatureSpan">loopback.Change.</span>beforeRemote (name, fn)](#apidoc.element.loopback.Change.beforeRemote)
- description and source-code
```javascript
beforeRemote = function (name, fn) {
  var className = this.modelName;
  this._runWhenAttachedToApp(function(app) {
    var remotes = app.remotes();
    remotes.before(className + '.' + name, function(ctx, next) {
      return fn(ctx, ctx.result, next);
    });
  });
}
```
- example usage
```shell
...
        sharedClass.methods().forEach(function(method) {
var delegateTo = method.rest && method.rest.delegateTo;
if (delegateTo && delegateTo.ctor == relation.modelTo) {
  var before = method.isStatic ? beforeListeners : beforeListeners['prototype'];
  var after = method.isStatic ? afterListeners : afterListeners['prototype'];
  var m = method.isStatic ? method.name : 'prototype.' + method.name;
  if (before && before[delegateTo.name]) {
    self.beforeRemote(m, function(ctx, result, next) {
      before[delegateTo.name]._listeners.call(null, ctx, next);
    });
  }
  if (after && after[delegateTo.name]) {
    self.afterRemote(m, function(ctx, result, next) {
      after[delegateTo.name]._listeners.call(null, ctx, next);
    });
...
```

#### <a name="apidoc.element.loopback.Change.belongsToRemoting"></a>[function <span class="apidocSignatureSpan">loopback.Change.</span>belongsToRemoting (relationName, relation, define)](#apidoc.element.loopback.Change.belongsToRemoting)
- description and source-code
```javascript
belongsToRemoting = function (relationName, relation, define) {
  var modelName = relation.modelTo && relation.modelTo.modelName;
  modelName = modelName || 'PersistedModel';
  var fn = this.prototype[relationName];
  var pathName = (relation.options.http && relation.options.http.path) || relationName;
  define('__get__' + relationName, {
    isStatic: false,
    http: {verb: 'get', path: '/' + pathName},
    accepts: [
      {arg: 'refresh', type: 'boolean', http: {source: 'query'}},
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    accessType: 'READ',
    description: format('Fetches belongsTo relation %s.', relationName),
    returns: {arg: relationName, type: modelName, root: true},
  }, fn);
}
```
- example usage
```shell
...
  defineRaw(name, options, fn);
};

// get the relations
for (var relationName in relations) {
  var relation = relations[relationName];
  if (relation.type === 'belongsTo') {
    ModelCtor.belongsToRemoting(relationName, relation, define);
  } else if (
    relation.type === 'hasOne' ||
    relation.type === 'embedsOne'
  ) {
    ModelCtor.hasOneRemoting(relationName, relation, define);
  } else if (
    relation.type === 'hasMany' ||
...
```

#### <a name="apidoc.element.loopback.Change.bothDeleted"></a>[function <span class="apidocSignatureSpan">loopback.Change.</span>bothDeleted (a, b)](#apidoc.element.loopback.Change.bothDeleted)
- description and source-code
```javascript
bothDeleted = function (a, b) {
  return a.type() === Change.DELETE &&
    b.type() === Change.DELETE;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Change.bulkUpdate"></a>[function <span class="apidocSignatureSpan">loopback.Change.</span>bulkUpdate (updates, options, callback)](#apidoc.element.loopback.Change.bulkUpdate)
- description and source-code
```javascript
bulkUpdate = function (updates, options, callback) {
  var tasks = [];
  var Model = this;
  var Change = this.getChangeModel();
  var conflicts = [];

  var lastArg = arguments[arguments.length - 1];

  if (typeof lastArg === 'function' && arguments.length > 1) {
    callback = lastArg;
  }

  if (typeof options === 'function') {
    options = {};
  }

  options = options || {};

  buildLookupOfAffectedModelData(Model, updates, function(err, currentMap) {
    if (err) return callback(err);

    updates.forEach(function(update) {
      var id = update.change.modelId;
      var current = currentMap[id];
      switch (update.type) {
        case Change.UPDATE:
          tasks.push(function(cb) {
            applyUpdate(Model, id, current, update.data, update.change, conflicts, options, cb);
          });
          break;

        case Change.CREATE:
          tasks.push(function(cb) {
            applyCreate(Model, id, current, update.data, update.change, conflicts, options, cb);
          });
          break;
        case Change.DELETE:
          tasks.push(function(cb) {
            applyDelete(Model, id, current, update.change, conflicts, options, cb);
          });
          break;
      }
    });

    async.parallel(tasks, function(err) {
      if (err) return callback(err);
      if (conflicts.length) {
        err = new Error(g.f('Conflict'));
        err.statusCode = 409;
        err.details = {conflicts: conflicts};
        return callback(err);
      }
      callback();
    });
  });
}
```
- example usage
```shell
...
    function bulkUpdate(_updates, cb) {
debug('\tstarting bulk update');
updates = _updates;
utils.uploadInChunks(
  updates,
  replicationChunkSize,
  function(smallArray, chunkCallback) {
    return targetModel.bulkUpdate(smallArray, options, function(err) {
      // bulk update is a special case where we want to process all chunks and aggregate all errors
      chunkCallback(null, err);
    });
  },
  function(notUsed, err) {
    var conflicts = err && err.details && err.details.conflicts;
    if (conflicts && err.statusCode == 409) {
...
```

#### <a name="apidoc.element.loopback.Change.changes"></a>[function <span class="apidocSignatureSpan">loopback.Change.</span>changes (since, filter, callback)](#apidoc.element.loopback.Change.changes)
- description and source-code
```javascript
changes = function (since, filter, callback) {
  if (typeof since === 'function') {
    filter = {};
    callback = since;
    since = -1;
  }
  if (typeof filter === 'function') {
    callback = filter;
    since = -1;
    filter = {};
  }

  var idName = this.dataSource.idName(this.modelName);
  var Change = this.getChangeModel();
  var model = this;
  const changeFilter = this.createChangeFilter(since, filter);

  filter = filter || {};
  filter.fields = {};
  filter.where = filter.where || {};
  filter.fields[idName] = true;

  // TODO(ritch) this whole thing could be optimized a bit more
  Change.find(changeFilter, function(err, changes) {
    if (err) return callback(err);
    if (!Array.isArray(changes) || changes.length === 0) return callback(null, []);
    var ids = changes.map(function(change) {
      return change.getModelId();
    });
    filter.where[idName] = {inq: ids};
    model.find(filter, function(err, models) {
      if (err) return callback(err);
      var modelIds = models.map(function(m) {
        return m[idName].toString();
      });
      callback(null, changes.filter(function(ch) {
        if (ch.type() === Change.DELETE) return true;
        return modelIds.indexOf(ch.modelId) > -1;
      }));
    });
  });
}
```
- example usage
```shell
...
    async.waterfall(tasks, done);

    function getSourceChanges(cb) {
utils.downloadInChunks(
  options.filter,
  replicationChunkSize,
  function(filter, pagingCallback) {
    sourceModel.changes(since.source, filter, pagingCallback);
  },
  debug.enabled ? log : cb);

function log(err, result) {
  if (err) return cb(err);
  debug('\tusing source changes');
  result.forEach(function(it) { debug('\t\t%j', it); });
...
```

#### <a name="apidoc.element.loopback.Change.checkAccess"></a>[function <span class="apidocSignatureSpan">loopback.Change.</span>checkAccess (token, modelId, sharedMethod, ctx, callback)](#apidoc.element.loopback.Change.checkAccess)
- description and source-code
```javascript
checkAccess = function (token, modelId, sharedMethod, ctx, callback) {
  var ANONYMOUS = registry.getModel('AccessToken').ANONYMOUS;
  token = token || ANONYMOUS;
  var aclModel = Model._ACL();

  ctx = ctx || {};
  if (typeof ctx === 'function' && callback === undefined) {
    callback = ctx;
    ctx = {};
  }

  aclModel.checkAccessForContext({
    accessToken: token,
    model: this,
    property: sharedMethod.name,
    method: sharedMethod.name,
    sharedMethod: sharedMethod,
    modelId: modelId,
    accessType: this._getAccessTypeForMethod(sharedMethod),
    remotingContext: ctx,
  }, function(err, accessRequest) {
    if (err) return callback(err);
    callback(null, accessRequest.isAllowed());
  });
}
```
- example usage
```shell
...
var modelSettings = Model.settings || {};
var errStatusCode = modelSettings.aclErrorStatus || app.get('aclErrorStatus') || 401;
if (!req.accessToken) {
  errStatusCode = 401;
}

if (Model.checkAccess) {
  Model.checkAccess(
    req.accessToken,
    modelId,
    method,
    ctx,
    function(err, allowed) {
      if (err) {
        console.log(err);
...
```

#### <a name="apidoc.element.loopback.Change.checkpoint"></a>[function <span class="apidocSignatureSpan">loopback.Change.</span>checkpoint (cb)](#apidoc.element.loopback.Change.checkpoint)
- description and source-code
```javascript
checkpoint = function (cb) {
  var Checkpoint = this.getChangeModel().getCheckpointModel();
  Checkpoint.bumpLastSeq(cb);
}
```
- example usage
```shell
...
      }
      cb(err);
    });
}

function checkpoints() {
  var cb = arguments[arguments.length - 1];
  sourceModel.checkpoint(function(err, source) {
    if (err) return cb(err);
    newSourceCp = source.seq;
    targetModel.checkpoint(function(err, target) {
      if (err) return cb(err);
      newTargetCp = target.seq;
      debug('\tcreated checkpoints');
      debug('\t\t%s for source model %s', newSourceCp, sourceModel.modelName);
...
```

#### <a name="apidoc.element.loopback.Change.clearObservers"></a>[function <span class="apidocSignatureSpan">loopback.Change.</span>clearObservers (operation)](#apidoc.element.loopback.Change.clearObservers)
- description and source-code
```javascript
clearObservers = function (operation) {
  if (!(this._observers && this._observers[operation])) return;

  this._observers[operation].length = 0;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Change.count"></a>[function <span class="apidocSignatureSpan">loopback.Change.</span>count (where, cb)](#apidoc.element.loopback.Change.count)
- description and source-code
```javascript
count = function (where, cb) {
  throwNotAttached(this.modelName, 'count');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Change.create"></a>[function <span class="apidocSignatureSpan">loopback.Change.</span>create (data, callback)](#apidoc.element.loopback.Change.create)
- description and source-code
```javascript
create = function (data, callback) {
  throwNotAttached(this.modelName, 'create');
}
```
- example usage
```shell
...
 } else {
   var options = {};

   if (this.get) {
     options = this.get('remoting');
   }

   return (this._remotes = RemoteObjects.create(options));
 }
};

/*!
* Remove a route by reference.
*/
...
```

#### <a name="apidoc.element.loopback.Change.createChangeFilter"></a>[function <span class="apidocSignatureSpan">loopback.Change.</span>createChangeFilter (since, modelFilter)](#apidoc.element.loopback.Change.createChangeFilter)
- description and source-code
```javascript
createChangeFilter = function (since, modelFilter) {
  return {
    where: {
      checkpoint: {gte: since},
      modelName: this.modelName,
    },
  };
}
```
- example usage
```shell
...
  since = -1;
  filter = {};
}

var idName = this.dataSource.idName(this.modelName);
var Change = this.getChangeModel();
var model = this;
const changeFilter = this.createChangeFilter(since, filter);

filter = filter || {};
filter.fields = {};
filter.where = filter.where || {};
filter.fields[idName] = true;

// TODO(ritch) this whole thing could be optimized a bit more
...
```

#### <a name="apidoc.element.loopback.Change.createChangeStream"></a>[function <span class="apidocSignatureSpan">loopback.Change.</span>createChangeStream (options, cb)](#apidoc.element.loopback.Change.createChangeStream)
- description and source-code
```javascript
createChangeStream = function (options, cb) {
  if (typeof options === 'function') {
    cb = options;
    options = undefined;
  }

  var idName = this.getIdName();
  var Model = this;
  var changes = new PassThrough({objectMode: true});
  var writeable = true;

  changes.destroy = function() {
    changes.removeAllListeners('error');
    changes.removeAllListeners('end');
    writeable = false;
    changes = null;
  };

  changes.on('error', function() {
    writeable = false;
  });
  changes.on('end', function() {
    writeable = false;
  });

  process.nextTick(function() {
    cb(null, changes);
  });

  Model.observe('after save', createChangeHandler('save'));
  Model.observe('after delete', createChangeHandler('delete'));

  function createChangeHandler(type) {
    return function(ctx, next) {
      // since it might have set to null via destroy
      if (!changes) {
        return next();
      }

      var where = ctx.where;
      var data = ctx.instance || ctx.data;
      var whereId = where && where[idName];

      // the data includes the id
      // or the where includes the id
      var target;

      if (data && (data[idName] || data[idName] === 0)) {
        target = data[idName];
      } else if (where && (where[idName] || where[idName] === 0)) {
        target = where[idName];
      }

      var hasTarget = target === 0 || !!target;

      var change = {
        target: target,
        where: where,
        data: data,
      };

      switch (type) {
        case 'save':
          if (ctx.isNewInstance === undefined) {
            change.type = hasTarget ? 'update' : 'create';
          } else {
            change.type = ctx.isNewInstance ? 'create' : 'update';
          }

          break;
        case 'delete':
          change.type = 'remove';
          break;
      }

      // TODO(ritch) this is ugly... maybe a ReadableStream would be better
      if (writeable) {
        changes.write(change);
      }

      next();
    };
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Change.createOptionsFromRemotingContext"></a>[function <span class="apidocSignatureSpan">loopback.Change.</span>createOptionsFromRemotingContext (ctx)](#apidoc.element.loopback.Change.createOptionsFromRemotingContext)
- description and source-code
```javascript
createOptionsFromRemotingContext = function (ctx) {
  return {
    accessToken: ctx.req.accessToken,
  };
}
```
- example usage
```shell
...
  var EMPTY_OPTIONS = {};
  var ModelCtor = ctx.method && ctx.method.ctor;
  if (!ModelCtor)
    return EMPTY_OPTIONS;
  if (typeof ModelCtor.createOptionsFromRemotingContext !== 'function')
    return EMPTY_OPTIONS;
  debug('createOptionsFromRemotingContext for %s', ctx.method.stringName);
  return ModelCtor.createOptionsFromRemotingContext(ctx);
}

/**
 * Disable remote invocation for the method with the given name.
 *
 * @param {String} name The name of the method.
 * @param {Boolean} isStatic Is the method static (eg. 'MyModel.myMethod')? Pass
...
```

#### <a name="apidoc.element.loopback.Change.createUpdates"></a>[function <span class="apidocSignatureSpan">loopback.Change.</span>createUpdates (deltas, cb)](#apidoc.element.loopback.Change.createUpdates)
- description and source-code
```javascript
createUpdates = function (deltas, cb) {
  var Change = this.getChangeModel();
  var updates = [];
  var Model = this;
  var tasks = [];

  deltas.forEach(function(change) {
    change = new Change(change);
    var type = change.type();
    var update = {type: type, change: change};
    switch (type) {
      case Change.CREATE:
      case Change.UPDATE:
        tasks.push(function(cb) {
          Model.findById(change.modelId, function(err, inst) {
            if (err) return cb(err);
            if (!inst) {
              return cb &&
                cb(new Error(g.f('Missing data for change: %s', change.modelId)));
            }
            if (inst.toObject) {
              update.data = inst.toObject();
            } else {
              update.data = inst;
            }
            updates.push(update);
            cb();
          });
        });
        break;
      case Change.DELETE:
        updates.push(update);
        break;
    }
  });

  async.parallel(tasks, function(err) {
    if (err) return cb(err);
    cb(null, updates);
  });
}
```
- example usage
```shell
...

  if (diff && diff.deltas && diff.deltas.length) {
    debug('\tbuilding a list of updates');
    utils.uploadInChunks(
      diff.deltas,
      replicationChunkSize,
      function(smallArray, chunkCallback) {
        return sourceModel.createUpdates(smallArray, chunkCallback);
      },
      cb);
  } else {
    // nothing to replicate
    done();
  }
}
...
```

#### <a name="apidoc.element.loopback.Change.currentCheckpoint"></a>[function <span class="apidocSignatureSpan">loopback.Change.</span>currentCheckpoint (cb)](#apidoc.element.loopback.Change.currentCheckpoint)
- description and source-code
```javascript
currentCheckpoint = function (cb) {
  var Checkpoint = this.getChangeModel().getCheckpointModel();
  Checkpoint.current(cb);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Change.defineProperty"></a>[function <span class="apidocSignatureSpan">loopback.Change.</span>defineProperty (prop, params)](#apidoc.element.loopback.Change.defineProperty)
- description and source-code
```javascript
defineProperty = function (prop, params) {
  if (this.dataSource) {
    this.dataSource.defineProperty(this.modelName, prop, params);
  } else {
    this.modelBuilder.defineProperty(this.modelName, prop, params);
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Change.deleteAll"></a>[function <span class="apidocSignatureSpan">loopback.Change.</span>deleteAll (where, cb)](#apidoc.element.loopback.Change.deleteAll)
- description and source-code
```javascript
function destroyAll(where, cb) {
  throwNotAttached(this.modelName, 'destroyAll');
}
```
- example usage
```shell
...
  Model.modelName, id);
debug('\tExpected revision: %s', change.rev);
debug('\tActual revision:   %s', rev);
conflicts.push(change);
return Change.rectifyModelChanges(Model.modelName, [id], cb);
    }

    Model.deleteAll(current.toObject(), options, function(err, result) {
if (err) return cb(err);

var count = result && result.count;
switch (count) {
  case 1:
    // The happy path, exactly one record was updated
    return cb();
...
```

#### <a name="apidoc.element.loopback.Change.deleteById"></a>[function <span class="apidocSignatureSpan">loopback.Change.</span>deleteById (id, cb)](#apidoc.element.loopback.Change.deleteById)
- description and source-code
```javascript
function deleteById(id, cb) {
  throwNotAttached(this.modelName, 'deleteById');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Change.destroyAll"></a>[function <span class="apidocSignatureSpan">loopback.Change.</span>destroyAll (where, cb)](#apidoc.element.loopback.Change.destroyAll)
- description and source-code
```javascript
function destroyAll(where, cb) {
  throwNotAttached(this.modelName, 'destroyAll');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Change.destroyById"></a>[function <span class="apidocSignatureSpan">loopback.Change.</span>destroyById (id, cb)](#apidoc.element.loopback.Change.destroyById)
- description and source-code
```javascript
function deleteById(id, cb) {
  throwNotAttached(this.modelName, 'deleteById');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Change.diff"></a>[function <span class="apidocSignatureSpan">loopback.Change.</span>diff (modelName, since, remoteChanges, callback)](#apidoc.element.loopback.Change.diff)
- description and source-code
```javascript
diff = function (modelName, since, remoteChanges, callback) {
  callback = callback || utils.createPromiseCallback();

  if (!Array.isArray(remoteChanges) || remoteChanges.length === 0) {
    callback(null, {deltas: [], conflicts: []});
    return callback.promise;
  }
  var remoteChangeIndex = {};
  var modelIds = [];
  remoteChanges.forEach(function(ch) {
    modelIds.push(ch.modelId);
    remoteChangeIndex[ch.modelId] = new Change(ch);
  });

  // normalize 'since'
  since = Number(since) || 0;
  this.find({
    where: {
      modelName: modelName,
      modelId: {inq: modelIds},
    },
  }, function(err, allLocalChanges) {
    if (err) return callback(err);
    var deltas = [];
    var conflicts = [];
    var localModelIds = [];

    var localChanges = allLocalChanges.filter(function(c) {
      return c.checkpoint >= since;
    });

    localChanges.forEach(function(localChange) {
      localChange = new Change(localChange);
      localModelIds.push(localChange.modelId);
      var remoteChange = remoteChangeIndex[localChange.modelId];
      if (remoteChange && !localChange.equals(remoteChange)) {
        if (remoteChange.conflictsWith(localChange)) {
          remoteChange.debug('remote conflict');
          localChange.debug('local conflict');
          conflicts.push(localChange);
        } else {
          remoteChange.debug('remote delta');
          deltas.push(remoteChange);
        }
      }
    });

    modelIds.forEach(function(id) {
      if (localModelIds.indexOf(id) !== -1) return;

      var d = remoteChangeIndex[id];
      var oldChange = allLocalChanges.filter(function(c) {
        return c.modelId === id;
      })[0];

      if (oldChange) {
        d.prev = oldChange.rev;
      } else {
        d.prev = null;
      }

      deltas.push(d);
    });

    callback(null, {
      deltas: deltas,
      conflicts: conflicts,
    });
  });
  return callback.promise;
}
```
- example usage
```shell
...
    },
  });
};

/**
 * Get a set of deltas and conflicts since the given checkpoint.
 *
 * See [Change.diff()](#change-diff) for details.
 *
 * @param  {Number}  since  Find deltas since this checkpoint.
 * @param  {Array}  remoteChanges  An array of change objects.
 * @callback {Function} callback Callback function called with '(err, result)' arguments.  Required.
 * @param {Error} err Error object; see [Error object](http://loopback.io/doc/en/lb2/Error-object.html).
 * @param {Object} result Object with 'deltas' and 'conflicts' properties; see [Change.diff()](#change-diff) for details.
 */
...
```

#### <a name="apidoc.element.loopback.Change.disableRemoteMethod"></a>[function <span class="apidocSignatureSpan">loopback.Change.</span>disableRemoteMethod (name, isStatic)](#apidoc.element.loopback.Change.disableRemoteMethod)
- description and source-code
```javascript
disableRemoteMethod = function (name, isStatic) {
  deprecated('Model.disableRemoteMethod is deprecated. ' +
    'Use Model.disableRemoteMethodByName instead.');
  var key = this.sharedClass.getKeyFromMethodNameAndTarget(name, isStatic);
  this.sharedClass.disableMethodByName(key);
  this.emit('remoteMethodDisabled', this.sharedClass, key);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Change.disableRemoteMethodByName"></a>[function <span class="apidocSignatureSpan">loopback.Change.</span>disableRemoteMethodByName (name)](#apidoc.element.loopback.Change.disableRemoteMethodByName)
- description and source-code
```javascript
disableRemoteMethodByName = function (name) {
  this.sharedClass.disableMethodByName(name);
  this.emit('remoteMethodDisabled', this.sharedClass, name);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Change.emit"></a>[function <span class="apidocSignatureSpan">loopback.Change.</span>emit ()](#apidoc.element.loopback.Change.emit)
- description and source-code
```javascript
emit = function () { [native code] }
```
- example usage
```shell
...
    return new Model(data);
  });
  this.remotes().addClass(Model.sharedClass);
  if (Model.settings.trackChanges && Model.Change) {
    this.remotes().addClass(Model.Change.sharedClass);
  }
  clearHandlerCache(this);
  this.emit('modelRemoted', Model.sharedClass);
}

var self = this;
Model.on('remoteMethodDisabled', function(model, methodName) {
  self.emit('remoteMethodDisabled', model, methodName);
});
Model.on('remoteMethodAdded', function(model) {
...
```

#### <a name="apidoc.element.loopback.Change.enableChangeTracking"></a>[function <span class="apidocSignatureSpan">loopback.Change.</span>enableChangeTracking ()](#apidoc.element.loopback.Change.enableChangeTracking)
- description and source-code
```javascript
enableChangeTracking = function () {
  var Model = this;
  var Change = this.Change || this._defineChangeModel();
  var cleanupInterval = Model.settings.changeCleanupInterval || 30000;

  assert(this.dataSource, 'Cannot enableChangeTracking(): ' + this.modelName +
    ' is not attached to a dataSource');

  var idName = this.getIdName();
  var idProp = this.definition.properties[idName];
  var idType = idProp && idProp.type;
  var idDefn = idProp && idProp.defaultFn;
  if (idType !== String || !(idDefn === 'uuid' || idDefn === 'guid')) {
    deprecated('The model ' + this.modelName + ' is tracking changes, ' +
      'which requires a string id with GUID/UUID default value.');
  }

  Model.observe('after save', rectifyOnSave);

  Model.observe('after delete', rectifyOnDelete);

  // Only run if the run time is server
  // Can switch off cleanup by setting the interval to -1
  if (runtime.isServer && cleanupInterval > 0) {
    // initial cleanup
    cleanup();

    // cleanup
    setInterval(cleanup, cleanupInterval);
  }

  function cleanup() {
    Model.rectifyAllChanges(function(err) {
      if (err) {
        Model.handleChangeError(err, 'cleanup');
      }
    });
  }
}
```
- example usage
```shell
...

  var PersistedModel = this;

  // enable change tracking (usually for replication)
  if (this.settings.trackChanges) {
    PersistedModel._defineChangeModel();
    PersistedModel.once('dataSourceAttached', function() {
      PersistedModel.enableChangeTracking();
    });
  } else if (this.settings.enableRemoteReplication) {
    PersistedModel._defineChangeModel();
  }

  PersistedModel.setupRemoting();
};
...
```

#### <a name="apidoc.element.loopback.Change.eventNames"></a>[function <span class="apidocSignatureSpan">loopback.Change.</span>eventNames ()](#apidoc.element.loopback.Change.eventNames)
- description and source-code
```javascript
eventNames = function () { [native code] }
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Change.exists"></a>[function <span class="apidocSignatureSpan">loopback.Change.</span>exists (id, cb)](#apidoc.element.loopback.Change.exists)
- description and source-code
```javascript
function exists(id, cb) {
  throwNotAttached(this.modelName, 'exists');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Change.extend"></a>[function <span class="apidocSignatureSpan">loopback.Change.</span>extend (className, subclassProperties, subclassSettings)](#apidoc.element.loopback.Change.extend)
- description and source-code
```javascript
extend = function (className, subclassProperties, subclassSettings) {
  var properties = ModelClass.definition.properties;
  var settings = ModelClass.definition.settings;

  subclassProperties = subclassProperties || {};
  subclassSettings = subclassSettings || {};

  // Check if subclass redefines the ids
  var idFound = false;
  for (var k in subclassProperties) {
    if (subclassProperties[k] && subclassProperties[k].id) {
      idFound = true;
      break;
    }
  }

  // Merging the properties
  var keys = Object.keys(properties);
  for (var i = 0, n = keys.length; i < n; i++) {
    var key = keys[i];

    if (idFound && properties[key].id) {
      // don't inherit id properties
      continue;
    }
    if (subclassProperties[key] === undefined) {
      var baseProp = properties[key];
      var basePropCopy = baseProp;
      if (baseProp && typeof baseProp === 'object') {
        // Deep clone the base prop
        basePropCopy = mergeSettings(null, baseProp);
      }
      subclassProperties[key] = basePropCopy;
    }
  }

  // Merge the settings
  var originalSubclassSettings = subclassSettings;
  subclassSettings = mergeSettings(settings, subclassSettings);

  // Ensure 'base' is not inherited. Note we don't have to delete 'super'
  // as that is removed from settings by modelBuilder.define and thus
  // it is never inherited
  if (!originalSubclassSettings.base) {
    subclassSettings.base = ModelClass;
  }

  // Define the subclass
  var subClass = modelBuilder.define(className, subclassProperties, subclassSettings, ModelClass);

  // Calling the setup function
  if (typeof subClass.setup === 'function') {
    subClass.setup.call(subClass);
  }

  return subClass;
}
```
- example usage
```shell
...
* The base class for **all models**.
*
* **Inheriting from 'Model'**
*
* '''js
* var properties = {...};
* var options = {...};
* var MyModel = loopback.Model.extend('MyModel', properties, options);
* '''
*
* **Options**
*
*  - 'trackChanges' - If true, changes to the model will be tracked. **Required
* for replication.**
*
...
```

#### <a name="apidoc.element.loopback.Change.find"></a>[function <span class="apidocSignatureSpan">loopback.Change.</span>find (filter, cb)](#apidoc.element.loopback.Change.find)
- description and source-code
```javascript
function find(filter, cb) {
  throwNotAttached(this.modelName, 'find');
}
```
- example usage
```shell
...

filter = filter || {};
filter.fields = {};
filter.where = filter.where || {};
filter.fields[idName] = true;

// TODO(ritch) this whole thing could be optimized a bit more
Change.find(changeFilter, function(err, changes) {
  if (err) return callback(err);
  if (!Array.isArray(changes) || changes.length === 0) return callback(null, []);
  var ids = changes.map(function(change) {
    return change.getModelId();
  });
  filter.where[idName] = {inq: ids};
  model.find(filter, function(err, models) {
...
```

#### <a name="apidoc.element.loopback.Change.findById"></a>[function <span class="apidocSignatureSpan">loopback.Change.</span>findById (id, filter, cb)](#apidoc.element.loopback.Change.findById)
- description and source-code
```javascript
function findById(id, filter, cb) {
  throwNotAttached(this.modelName, 'findById');
}
```
- example usage
```shell
...
  var model = new ModelCtor(data);
  model.id = id;
  fn(null, model);
} else if (data) {
  fn(null, new ModelCtor(data));
} else if (id) {
  var filter = {};
  ModelCtor.findById(id, filter, options, function(err, model) {
    if (err) {
      fn(err);
    } else if (model) {
      fn(null, model);
    } else {
      err = new Error(g.f('could not find a model with apidoc.element.loopback.Change.findById %s', id));
      err.statusCode = 404;
...
```

#### <a name="apidoc.element.loopback.Change.findLastChange"></a>[function <span class="apidocSignatureSpan">loopback.Change.</span>findLastChange (id, cb)](#apidoc.element.loopback.Change.findLastChange)
- description and source-code
```javascript
findLastChange = function (id, cb) {
  var Change = this.getChangeModel();
  Change.findOne({where: {modelId: id}}, cb);
}
```
- example usage
```shell
...
PersistedModel.findLastChange = function(id, cb) {
  var Change = this.getChangeModel();
  Change.findOne({where: {modelId: id}}, cb);
};

PersistedModel.updateLastChange = function(id, data, cb) {
  var self = this;
  this.findLastChange(id, function(err, inst) {
    if (err) return cb(err);
    if (!inst) {
      err = new Error(g.f('No change record found for %s with id %s',
        self.modelName, id));
      err.statusCode = 404;
      return cb(err);
    }
...
```

#### <a name="apidoc.element.loopback.Change.findOne"></a>[function <span class="apidocSignatureSpan">loopback.Change.</span>findOne (filter, cb)](#apidoc.element.loopback.Change.findOne)
- description and source-code
```javascript
function findOne(filter, cb) {
  throwNotAttached(this.modelName, 'findOne');
}
```
- example usage
```shell
...
PersistedModel.rectifyChange = function(id, callback) {
  var Change = this.getChangeModel();
  Change.rectifyModelChanges(this.modelName, [id], callback);
};

PersistedModel.findLastChange = function(id, cb) {
  var Change = this.getChangeModel();
  Change.findOne({where: {modelId: id}}, cb);
};

PersistedModel.updateLastChange = function(id, data, cb) {
  var self = this;
  this.findLastChange(id, function(err, inst) {
    if (err) return cb(err);
    if (!inst) {
...
```

#### <a name="apidoc.element.loopback.Change.findOrCreate"></a>[function <span class="apidocSignatureSpan">loopback.Change.</span>findOrCreate (query, data, callback)](#apidoc.element.loopback.Change.findOrCreate)
- description and source-code
```javascript
function findOrCreate(query, data, callback) {
  throwNotAttached(this.modelName, 'findOrCreate');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Change.findOrCreateChange"></a>[function <span class="apidocSignatureSpan">loopback.Change.</span>findOrCreateChange (modelName, modelId, callback)](#apidoc.element.loopback.Change.findOrCreateChange)
- description and source-code
```javascript
findOrCreateChange = function (modelName, modelId, callback) {
  assert(this.registry.findModel(modelName), modelName + ' does not exist');
  callback = callback || utils.createPromiseCallback();
  var id = this.idForModel(modelName, modelId);
  var Change = this;

  this.findById(id, function(err, change) {
    if (err) return callback(err);
    if (change) {
      callback(null, change);
    } else {
      var ch = new Change({
        id: id,
        modelName: modelName,
        modelId: modelId,
      });
      ch.debug('creating change');
      Change.updateOrCreate(ch, callback);
    }
  });
  return callback.promise;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Change.forEachProperty"></a>[function <span class="apidocSignatureSpan">loopback.Change.</span>forEachProperty (cb)](#apidoc.element.loopback.Change.forEachProperty)
- description and source-code
```javascript
forEachProperty = function (cb) {
  var props = ModelClass.definition.properties;
  var keys = Object.keys(props);
  for (var i = 0, n = keys.length; i < n; i++) {
    cb(keys[i], props[keys[i]]);
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Change.getApp"></a>[function <span class="apidocSignatureSpan">loopback.Change.</span>getApp (callback)](#apidoc.element.loopback.Change.getApp)
- description and source-code
```javascript
getApp = function (callback) {
  var self = this;
  self._runWhenAttachedToApp(function(app) {
    assert(self.app);
    assert.equal(app, self.app);
    callback(null, app);
  });
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Change.getChangeModel"></a>[function <span class="apidocSignatureSpan">loopback.Change.</span>getChangeModel ()](#apidoc.element.loopback.Change.getChangeModel)
- description and source-code
```javascript
getChangeModel = function () {
  var changeModel = this.Change;
  var isSetup = changeModel && changeModel.dataSource;

  assert(isSetup, 'Cannot get a setup Change model for ' + this.modelName);

  return changeModel;
}
```
- example usage
```shell
...
 * @param  {Array}  remoteChanges  An array of change objects.
 * @callback {Function} callback Callback function called with '(err, result)' arguments.  Required.
 * @param {Error} err Error object; see [Error object](http://loopback.io/doc/en/lb2/Error-object.html).
 * @param {Object} result Object with 'deltas' and 'conflicts' properties; see [Change.diff()](#change-diff) for details.
 */

PersistedModel.diff = function(since, remoteChanges, callback) {
  var Change = this.getChangeModel();
  Change.diff(this.modelName, since, remoteChanges, callback);
};

/**
 * Get the changes to a model since the specified checkpoint. Provide a filter object
 * to reduce the number of results returned.
 * @param  {Number}   since    Return only changes since this checkpoint.
...
```

#### <a name="apidoc.element.loopback.Change.getCheckpointModel"></a>[function <span class="apidocSignatureSpan">loopback.Change.</span>getCheckpointModel ()](#apidoc.element.loopback.Change.getCheckpointModel)
- description and source-code
```javascript
getCheckpointModel = function () {
  var checkpointModel = this.Checkpoint;
  if (checkpointModel) return checkpointModel;
  // FIXME(bajtos) This code creates multiple different models with the same
  // model name, which is not a valid supported usage of juggler's API.
  this.Checkpoint = checkpointModel = loopback.Checkpoint.extend('checkpoint');
  assert(this.dataSource, 'Cannot getCheckpointModel(): ' + this.modelName +
    ' is not attached to a dataSource');
  checkpointModel.attachTo(this.dataSource);
  return checkpointModel;
}
```
- example usage
```shell
...
/**
 * Create a checkpoint.
 *
 * @param  {Function} callback
 */

PersistedModel.checkpoint = function(cb) {
  var Checkpoint = this.getChangeModel().getCheckpointModel();
  Checkpoint.bumpLastSeq(cb);
};

/**
 * Get the current checkpoint ID.
 *
 * @callback {Function} callback Callback function called with '(err, currentCheckpointId)' arguments.  Required.
...
```

#### <a name="apidoc.element.loopback.Change.getDataSource"></a>[function <span class="apidocSignatureSpan">loopback.Change.</span>getDataSource ()](#apidoc.element.loopback.Change.getDataSource)
- description and source-code
```javascript
getDataSource = function () {
  return this.dataSource;
}
```
- example usage
```shell
...
 * connector that defines it.  Otherwise, uses the default lookup.
 * Override this method to handle complex IDs.
 *
 * @param {*} val The 'id' value. Will be converted to the type that the 'id' property specifies.
 */

PersistedModel.prototype.setId = function(val) {
  var ds = this.getDataSource();
  this[this.getIdName()] = val;
};

/**
 * Get the 'id' value for the 'PersistedModel'.
 *
 * @returns {*} The 'id' value
...
```

#### <a name="apidoc.element.loopback.Change.getIdName"></a>[function <span class="apidocSignatureSpan">loopback.Change.</span>getIdName ()](#apidoc.element.loopback.Change.getIdName)
- description and source-code
```javascript
getIdName = function () {
  var Model = this;
  var ds = Model.getDataSource();

  if (ds.idName) {
    return ds.idName(Model.modelName);
  } else {
    return 'id';
  }
}
```
- example usage
```shell
...
 * Override this method to handle complex IDs.
 *
 * @param {*} val The 'id' value. Will be converted to the type that the 'id' property specifies.
 */

PersistedModel.prototype.setId = function(val) {
  var ds = this.getDataSource();
  this[this.getIdName()] = val;
};

/**
 * Get the 'id' value for the 'PersistedModel'.
 *
 * @returns {*} The 'id' value
 */
...
```

#### <a name="apidoc.element.loopback.Change.getMaxListeners"></a>[function <span class="apidocSignatureSpan">loopback.Change.</span>getMaxListeners ()](#apidoc.element.loopback.Change.getMaxListeners)
- description and source-code
```javascript
getMaxListeners = function () { [native code] }
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Change.getPropertyType"></a>[function <span class="apidocSignatureSpan">loopback.Change.</span>getPropertyType (propName)](#apidoc.element.loopback.Change.getPropertyType)
- description and source-code
```javascript
getPropertyType = function (propName) {
  var prop = this.definition.properties[propName];
  if (!prop) {
    // The property is not part of the definition
    return null;
  }
  if (!prop.type) {
    throw new Error(g.f('Type not defined for property %s.%s', this.modelName, propName));
    // return null;
  }
  return prop.type.name;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Change.getSourceId"></a>[function <span class="apidocSignatureSpan">loopback.Change.</span>getSourceId (cb)](#apidoc.element.loopback.Change.getSourceId)
- description and source-code
```javascript
getSourceId = function (cb) {
  var dataSource = this.dataSource;
  if (!dataSource) {
    this.once('dataSourceAttached', this.getSourceId.bind(this, cb));
  }
  assert(
    dataSource.connector.name,
    'Model.getSourceId: cannot get id without dataSource.connector.name'
  );
  var id = [dataSource.connector.name, this.modelName].join('-');
  cb(null, id);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Change.handleChangeError"></a>[function <span class="apidocSignatureSpan">loopback.Change.</span>handleChangeError (err, operationName)](#apidoc.element.loopback.Change.handleChangeError)
- description and source-code
```javascript
handleChangeError = function (err, operationName) {
  if (!err) return;
  this.emit('error', err, operationName);
}
```
- example usage
```shell
...
    // cleanup
    setInterval(cleanup, cleanupInterval);
  }

  function cleanup() {
    Model.rectifyAllChanges(function(err) {
      if (err) {
        Model.handleChangeError(err, 'cleanup');
      }
    });
  }
};

function rectifyOnSave(ctx, next) {
  var instance = ctx.instance || ctx.currentInstance;
...
```

#### <a name="apidoc.element.loopback.Change.hasManyRemoting"></a>[function <span class="apidocSignatureSpan">loopback.Change.</span>hasManyRemoting (relationName, relation, define)](#apidoc.element.loopback.Change.hasManyRemoting)
- description and source-code
```javascript
hasManyRemoting = function (relationName, relation, define) {
  var pathName = (relation.options.http && relation.options.http.path) || relationName;
  var toModelName = relation.modelTo.modelName;

  var findByIdFunc = this.prototype['__findById__' + relationName];
  define('__findById__' + relationName, {
    isStatic: false,
    http: {verb: 'get', path: '/' + pathName + '/:fk'},
    accepts: [
      {
        arg: 'fk', type: 'any',
        description: format('Foreign key for %s', relationName),
        required: true,
        http: {source: 'path'},
      },
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Find a related item by id for %s.', relationName),
    accessType: 'READ',
    returns: {arg: 'result', type: toModelName, root: true},
    rest: {after: convertNullToNotFoundError.bind(null, toModelName)},
  }, findByIdFunc);

  var destroyByIdFunc = this.prototype['__destroyById__' + relationName];
  define('__destroyById__' + relationName, {
    isStatic: false,
    http: {verb: 'delete', path: '/' + pathName + '/:fk'},
    accepts: [
      {
        arg: 'fk', type: 'any',
        description: format('Foreign key for %s', relationName),
        required: true,
        http: {source: 'path'},
      },
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Delete a related item by id for %s.', relationName),
    accessType: 'WRITE',
    returns: [],
  }, destroyByIdFunc);

  var updateByIdFunc = this.prototype['__updateById__' + relationName];
  define('__updateById__' + relationName, {
    isStatic: false,
    http: {verb: 'put', path: '/' + pathName + '/:fk'},
    accepts: [
      {arg: 'fk', type: 'any',
        description: format('Foreign key for %s', relationName),
        required: true,
        http: {source: 'path'}},
      {arg: 'data', type: 'object', model: toModelName, http: {source: 'body'}},
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Update a related item by id for %s.', relationName),
    accessType: 'WRITE',
    returns: {arg: 'result', type: toModelName, root: true},
  }, updateByIdFunc);

  if (relation.modelThrough || relation.type === 'referencesMany') {
    var modelThrough = relation.modelThrough || relation.modelTo;

    var accepts = [];
    if (relation.type === 'hasMany' && relation.modelThrough) {
      // Restrict: only hasManyThrough relation can have additional properties
      accepts.push({
        arg: 'data', type: 'object', model: modelThrough.modelName,
        http: {source: 'body'},
      });
    }

    var addFunc = this.prototype['__link__' + relationName];
    define('__link__' + relationName, {
      isStatic: false,
      http: {verb: 'put', path: '/' + pathName + '/rel/:fk'},
      accepts: [{arg: 'fk', type: 'any',
        description: format('Foreign key for %s', relationName),
        required: true,
        http: {source: 'path'}},
      ].concat(accepts).concat([
        {arg: 'options', type: 'object', http: 'optionsFromRequest'},
      ]),
      description: format('Add a related item by id for %s.', relationName),
      accessType: 'WRITE',
      returns: {arg: relationName, type: modelThrough.modelName, root: true},
    }, addFunc);

    var removeFunc = this.prototype['__unlink__' + relationName];
    define('__unlink__' + relationName, {
      isStatic: false,
      http: {verb: 'delete', path: '/' + pathName + '/rel/:fk'},
      accepts: [
        {
          arg: 'fk', type: 'any',
          description: format('Foreign key for %s', relationName),
          required: true,
          http: {source: 'path'},
        },
        {arg: 'options', type: 'object', http: 'optionsFromRequest'},
      ],
      description: format('Remove the %s relation to an item by id.', relationName),
      accessType: 'WRITE',
      returns: [],
    }, removeFunc);

    // FIXME: [rfeng] How to map a function with callback(err, true|false) to HEAD?
    // true --> 200 and false --> 404?
    var existsFunc = this.prototype['__exists__' + relatio ...
```
- example usage
```shell
...
    relation.type === 'embedsOne'
  ) {
    ModelCtor.hasOneRemoting(relationName, relation, define);
  } else if (
    relation.type === 'hasMany' ||
    relation.type === 'embedsMany' ||
    relation.type === 'referencesMany') {
    ModelCtor.hasManyRemoting(relationName, relation, define);
  }
}

// handle scopes
var scopes = ModelCtor.scopes || {};
for (var scopeName in scopes) {
  ModelCtor.scopeRemoting(scopeName, scopes[scopeName], define);
...
```

#### <a name="apidoc.element.loopback.Change.hasOneRemoting"></a>[function <span class="apidocSignatureSpan">loopback.Change.</span>hasOneRemoting (relationName, relation, define)](#apidoc.element.loopback.Change.hasOneRemoting)
- description and source-code
```javascript
hasOneRemoting = function (relationName, relation, define) {
  var pathName = (relation.options.http && relation.options.http.path) || relationName;
  var toModelName = relation.modelTo.modelName;

  define('__get__' + relationName, {
    isStatic: false,
    http: {verb: 'get', path: '/' + pathName},
    accepts: [
      {arg: 'refresh', type: 'boolean', http: {source: 'query'}},
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Fetches hasOne relation %s.', relationName),
    accessType: 'READ',
    returns: {arg: relationName, type: relation.modelTo.modelName, root: true},
    rest: {after: convertNullToNotFoundError.bind(null, toModelName)},
  });

  define('__create__' + relationName, {
    isStatic: false,
    http: {verb: 'post', path: '/' + pathName},
    accepts: [
      {
        arg: 'data', type: 'object', model: toModelName,
        http: {source: 'body'},
      },
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Creates a new instance in %s of this model.', relationName),
    accessType: 'WRITE',
    returns: {arg: 'data', type: toModelName, root: true},
  });

  define('__update__' + relationName, {
    isStatic: false,
    http: {verb: 'put', path: '/' + pathName},
    accepts: [
      {
        arg: 'data', type: 'object', model: toModelName,
        http: {source: 'body'},
      },
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Update %s of this model.', relationName),
    accessType: 'WRITE',
    returns: {arg: 'data', type: toModelName, root: true},
  });

  define('__destroy__' + relationName, {
    isStatic: false,
    http: {verb: 'delete', path: '/' + pathName},
    accepts: [
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Deletes %s of this model.', relationName),
    accessType: 'WRITE',
  });
}
```
- example usage
```shell
...
  var relation = relations[relationName];
  if (relation.type === 'belongsTo') {
    ModelCtor.belongsToRemoting(relationName, relation, define);
  } else if (
    relation.type === 'hasOne' ||
    relation.type === 'embedsOne'
  ) {
    ModelCtor.hasOneRemoting(relationName, relation, define);
  } else if (
    relation.type === 'hasMany' ||
    relation.type === 'embedsMany' ||
    relation.type === 'referencesMany') {
    ModelCtor.hasManyRemoting(relationName, relation, define);
  }
}
...
```

#### <a name="apidoc.element.loopback.Change.hash"></a>[function <span class="apidocSignatureSpan">loopback.Change.</span>hash (str)](#apidoc.element.loopback.Change.hash)
- description and source-code
```javascript
hash = function (str) {
  return crypto
    .createHash(Change.settings.hashAlgorithm || 'sha1')
    .update(str)
    .digest('hex');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Change.idForModel"></a>[function <span class="apidocSignatureSpan">loopback.Change.</span>idForModel (modelName, modelId)](#apidoc.element.loopback.Change.idForModel)
- description and source-code
```javascript
idForModel = function (modelName, modelId) {
  return this.hash([modelName, modelId].join('-'));
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Change.isHiddenProperty"></a>[function <span class="apidocSignatureSpan">loopback.Change.</span>isHiddenProperty (propertyName)](#apidoc.element.loopback.Change.isHiddenProperty)
- description and source-code
```javascript
isHiddenProperty = function (propertyName) {
  var Model = this;
  var settings = Model.definition && Model.definition.settings;
  var hiddenProperties = settings && (settings.hiddenProperties || settings.hidden);
  if (Array.isArray(hiddenProperties)) {
    // Cache the hidden properties as an object for quick lookup
    settings.hiddenProperties = {};
    for (var i = 0; i < hiddenProperties.length; i++) {
      settings.hiddenProperties[hiddenProperties[i]] = true;
    }
    hiddenProperties = settings.hiddenProperties;
  }
  if (hiddenProperties) {
    return hiddenProperties[propertyName];
  } else {
    return false;
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Change.isProtectedProperty"></a>[function <span class="apidocSignatureSpan">loopback.Change.</span>isProtectedProperty (propertyName)](#apidoc.element.loopback.Change.isProtectedProperty)
- description and source-code
```javascript
isProtectedProperty = function (propertyName) {
  var Model = this;
  var settings = Model.definition && Model.definition.settings;
  var protectedProperties = settings && (settings.protectedProperties || settings.protected);
  if (Array.isArray(protectedProperties)) {
    // Cache the protected properties as an object for quick lookup
    settings.protectedProperties = {};
    for (var i = 0; i < protectedProperties.length; i++) {
      settings.protectedProperties[protectedProperties[i]] = true;
    }
    protectedProperties = settings.protectedProperties;
  }
  if (protectedProperties) {
    return protectedProperties[propertyName];
  } else {
    return false;
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Change.listenerCount"></a>[function <span class="apidocSignatureSpan">loopback.Change.</span>listenerCount ()](#apidoc.element.loopback.Change.listenerCount)
- description and source-code
```javascript
listenerCount = function () { [native code] }
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Change.listeners"></a>[function <span class="apidocSignatureSpan">loopback.Change.</span>listeners ()](#apidoc.element.loopback.Change.listeners)
- description and source-code
```javascript
listeners = function () { [native code] }
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Change.mixin"></a>[function <span class="apidocSignatureSpan">loopback.Change.</span>mixin (anotherClass, options)](#apidoc.element.loopback.Change.mixin)
- description and source-code
```javascript
mixin = function (anotherClass, options) {
  if (typeof anotherClass === 'string') {
    this.modelBuilder.mixins.applyMixin(this, anotherClass, options);
  } else {
    if (anotherClass.prototype instanceof ModelBaseClass) {
      var props = anotherClass.definition.properties;
      for (var i in props) {
        if (this.definition.properties[i]) {
          continue;
        }
        this.defineProperty(i, props[i]);
      }
    }
    return jutil.mixin(this, anotherClass, options);
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Change.nestRemoting"></a>[function <span class="apidocSignatureSpan">loopback.Change.</span>nestRemoting (relationName, options, filterCallback)](#apidoc.element.loopback.Change.nestRemoting)
- description and source-code
```javascript
nestRemoting = function (relationName, options, filterCallback) {
  if (typeof options === 'function' && !filterCallback) {
    filterCallback = options;
    options = {};
  }
  options = options || {};

  var regExp = /^__([^_]+)__([^_]+)$/;
  var relation = this.relations[relationName];
  if (relation && relation.modelTo && relation.modelTo.sharedClass) {
    var self = this;
    var sharedClass = this.sharedClass;
    var sharedToClass = relation.modelTo.sharedClass;
    var toModelName = relation.modelTo.modelName;

    var pathName = options.pathName || relation.options.path || relationName;
    var paramName = options.paramName || 'nk';

    var http = [].concat(sharedToClass.http || [])[0];
    var httpPath, acceptArgs;

    if (relation.multiple) {
      httpPath = pathName + '/:' + paramName;
      acceptArgs = [
        {
          arg: paramName, type: 'any', http: {source: 'path'},
          description: format('Foreign key for %s.',  relation.name),
          required: true,
        },
      ];
    } else {
      httpPath = pathName;
      acceptArgs = [];
    }

    if (httpPath[0] !== '/') {
      httpPath = '/' + httpPath;
    }

    // A method should return the method name to use, if it is to be
    // included as a nested method - a falsy return value will skip.
    var filter = filterCallback || options.filterMethod || function(method, relation) {
      var matches = method.name.match(regExp);
      if (matches) {
        return '__' + matches[1] + '__' + relation.name + '__' + matches[2];
      }
    };

    sharedToClass.methods().forEach(function(method) {
      var methodName;
      if (!method.isStatic && (methodName = filter(method, relation))) {
        var prefix = relation.multiple ? '__findById__' : '__get__';
        var getterName = options.getterName || (prefix + relationName);

        var getterFn = relation.modelFrom.prototype[getterName];
        if (typeof getterFn !== 'function') {
          throw new Error(g.f('Invalid remote method: '%s'', getterName));
        }

        var nestedFn = relation.modelTo.prototype[method.name];
        if (typeof nestedFn !== 'function') {
          throw new Error(g.f('Invalid remote method: '%s'', method.name));
        }

        var opts = {};

        opts.accepts = acceptArgs.concat(method.accepts || []);
        opts.returns = [].concat(method.returns || []);
        opts.description = method.description;
        opts.accessType = method.accessType;
        opts.rest = extend({}, method.rest || {});
        opts.rest.delegateTo = method;

        opts.http = [];
        var routes = [].concat(method.http || []);
        routes.forEach(function(route) {
          if (route.path) {
            var copy = extend({}, route);
            copy.path = httpPath + route.path;
            opts.http.push(copy);
          }
        });

        if (relation.multiple) {
          sharedClass.defineMethod(methodName, opts, function(fkId) {
            var args = Array.prototype.slice.call(arguments, 1);
            var last = args[args.length - 1];
            var cb = typeof last === 'function' ? last : null;
            this[getterName](fkId, function(err, inst) {
              if (err && cb) return cb(err);
              if (inst instanceof relation.modelTo) {
                try {
                  nestedFn.apply(inst, args);
                } catch (err) {
                  if (cb) return cb(err);
                }
              } else if (cb) {
                cb(err, null);
              }
            });
          }, method.isStatic);
        } else {
          sharedClass.defineMethod(methodName, opts, function() {
            var args = Array.prototype.slice.call(arguments);
            var last = args[args.length - 1];
            var cb = typeof last === 'function' ? last : null;
            this[getterName](function(err, inst) {
              if (err && cb) return cb(err);
              if (inst instanceof relation.modelTo) {
                try {
                  nestedFn.apply(inst, args);
                } catch (err) {
                  if (cb) return ...
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Change.notifyObserversAround"></a>[function <span class="apidocSignatureSpan">loopback.Change.</span>notifyObserversAround (operation, context, fn, callback)](#apidoc.element.loopback.Change.notifyObserversAround)
- description and source-code
```javascript
notifyObserversAround = function (operation, context, fn, callback) {
  var self = this;
  context = context || {};
  // Add callback to the context object so that an observer can skip other
  // ones by calling the callback function directly and not calling next
  if (context.end === undefined) {
    context.end = callback;
  }
  // First notify before observers
  return self.notifyObserversOf('before ' + operation, context,
    function(err, context) {
      if (err) return callback(err);

      function cbForWork(err) {
        var args = [].slice.call(arguments, 0);
        if (err) return callback.apply(null, args);
        // Find the list of params from the callback in addition to err
        var returnedArgs = args.slice(1);
        // Set up the array of results
        context.results = returnedArgs;
        // Notify after observers
        self.notifyObserversOf('after ' + operation, context,
          function(err, context) {
            if (err) return callback(err, context);
            var results = returnedArgs;
            if (context && Array.isArray(context.results)) {
              // Pickup the results from context
              results = context.results;
            }
            // Build the list of params for final callback
            var args = [err].concat(results);
            callback.apply(null, args);
          });
      }

      if (fn.length === 1) {
        // fn(done)
        fn(cbForWork);
      } else {
        // fn(context, done)
        fn(context, cbForWork);
      }
    });
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Change.notifyObserversOf"></a>[function <span class="apidocSignatureSpan">loopback.Change.</span>notifyObserversOf (operation, context, callback)](#apidoc.element.loopback.Change.notifyObserversOf)
- description and source-code
```javascript
notifyObserversOf = function (operation, context, callback) {
  var self = this;
  if (!callback) callback = utils.createPromiseCallback();

  function createNotifier(op) {
    return function(ctx, done) {
      if (typeof ctx === 'function' && done === undefined) {
        done = ctx;
        ctx = context;
      }
      self.notifyObserversOf(op, context, done);
    };
  }

  if (Array.isArray(operation)) {
    var tasks = [];
    for (var i = 0, n = operation.length; i < n; i++) {
      tasks.push(createNotifier(operation[i]));
    }
    return async.waterfall(tasks, callback);
  }

  var observers = this._observers && this._observers[operation];

  this._notifyBaseObservers(operation, context, function doNotify(err) {
    if (err) return callback(err, context);
    if (!observers || !observers.length) return callback(null, context);

    async.eachSeries(
      observers,
      function notifySingleObserver(fn, next) {
        var retval = fn(context, next);
        if (retval && typeof retval.then === 'function') {
          retval.then(
            function() { next(); return null; },
            next // error handler
          );
        }
      },
      function(err) { callback(err, context); }
    );
  });
  return callback.promise;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Change.observe"></a>[function <span class="apidocSignatureSpan">loopback.Change.</span>observe (operation, listener)](#apidoc.element.loopback.Change.observe)
- description and source-code
```javascript
observe = function (operation, listener) {
  this._observers = this._observers || {};
  if (!this._observers[operation]) {
    this._observers[operation] = [];
  }

  this._observers[operation].push(listener);
}
```
- example usage
```shell
...
var idType = idProp && idProp.type;
var idDefn = idProp && idProp.defaultFn;
if (idType !== String || !(idDefn === 'uuid' || idDefn === 'guid')) {
  deprecated('The model ' + this.modelName + ' is tracking changes, ' +
    'which requires a string id with GUID/UUID default value.');
}

Model.observe('after save', rectifyOnSave);

Model.observe('after delete', rectifyOnDelete);

// Only run if the run time is server
// Can switch off cleanup by setting the interval to -1
if (runtime.isServer && cleanupInterval > 0) {
  // initial cleanup
...
```

#### <a name="apidoc.element.loopback.Change.on"></a>[function <span class="apidocSignatureSpan">loopback.Change.</span>on ()](#apidoc.element.loopback.Change.on)
- description and source-code
```javascript
on = function () { [native code] }
```
- example usage
```shell
...
    this.remotes().addClass(Model.Change.sharedClass);
  }
  clearHandlerCache(this);
  this.emit('modelRemoted', Model.sharedClass);
}

var self = this;
Model.on('remoteMethodDisabled', function(model, methodName) {
  self.emit('remoteMethodDisabled', model, methodName);
});
Model.on('remoteMethodAdded', function(model) {
  self.emit('remoteMethodAdded', model);
});

Model.shared = isPublic;
...
```

#### <a name="apidoc.element.loopback.Change.once"></a>[function <span class="apidocSignatureSpan">loopback.Change.</span>once ()](#apidoc.element.loopback.Change.once)
- description and source-code
```javascript
once = function () { [native code] }
```
- example usage
```shell
...
    remotes.afterError(className + '.' + name, fn);
  });
};

ModelCtor._runWhenAttachedToApp = function(fn) {
  if (this.app) return fn(this.app);
  var self = this;
  self.once('attached', function() {
    fn(self.app);
  });
};

if ('injectOptionsFromRemoteContext' in options) {
  console.warn(g.f(
    '%s is using model setting %s which is no longer available.',
...
```

#### <a name="apidoc.element.loopback.Change.patchOrCreate"></a>[function <span class="apidocSignatureSpan">loopback.Change.</span>patchOrCreate (data, callback)](#apidoc.element.loopback.Change.patchOrCreate)
- description and source-code
```javascript
function upsert(data, callback) {
  throwNotAttached(this.modelName, 'upsert');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Change.patchOrCreateWithWhere"></a>[function <span class="apidocSignatureSpan">loopback.Change.</span>patchOrCreateWithWhere (where, data, callback)](#apidoc.element.loopback.Change.patchOrCreateWithWhere)
- description and source-code
```javascript
function upsertWithWhere(where, data, callback) {
  throwNotAttached(this.modelName, 'upsertWithWhere');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Change.prependListener"></a>[function <span class="apidocSignatureSpan">loopback.Change.</span>prependListener ()](#apidoc.element.loopback.Change.prependListener)
- description and source-code
```javascript
prependListener = function () { [native code] }
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Change.prependOnceListener"></a>[function <span class="apidocSignatureSpan">loopback.Change.</span>prependOnceListener ()](#apidoc.element.loopback.Change.prependOnceListener)
- description and source-code
```javascript
prependOnceListener = function () { [native code] }
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Change.rectifyAll"></a>[function <span class="apidocSignatureSpan">loopback.Change.</span>rectifyAll (cb)](#apidoc.element.loopback.Change.rectifyAll)
- description and source-code
```javascript
rectifyAll = function (cb) {
  debug('rectify all');
  var Change = this;
  // this should be optimized
  this.find(function(err, changes) {
    if (err) return cb(err);
    async.each(
      changes,
      function(c, next) { c.rectify(next); },
      cb);
  });
}
```
- example usage
```shell
...
  function attachRelatedModels(self) {
    self.Change.attachTo(self.dataSource);
    self.Change.getCheckpointModel().attachTo(self.dataSource);
  }
};

PersistedModel.rectifyAllChanges = function(callback) {
  this.getChangeModel().rectifyAll(callback);
};

/**
 * Handle a change error. Override this method in a subclassing model to customize
 * change error handling.
 *
 * @param {Error} err Error object; see [Error object](http://loopback.io/doc/en/lb2/Error-object.html).
...
```

#### <a name="apidoc.element.loopback.Change.rectifyAllChanges"></a>[function <span class="apidocSignatureSpan">loopback.Change.</span>rectifyAllChanges (callback)](#apidoc.element.loopback.Change.rectifyAllChanges)
- description and source-code
```javascript
rectifyAllChanges = function (callback) {
  this.getChangeModel().rectifyAll(callback);
}
```
- example usage
```shell
...
    cleanup();

    // cleanup
    setInterval(cleanup, cleanupInterval);
  }

  function cleanup() {
    Model.rectifyAllChanges(function(err) {
      if (err) {
        Model.handleChangeError(err, 'cleanup');
      }
    });
  }
};
...
```

#### <a name="apidoc.element.loopback.Change.rectifyChange"></a>[function <span class="apidocSignatureSpan">loopback.Change.</span>rectifyChange (id, callback)](#apidoc.element.loopback.Change.rectifyChange)
- description and source-code
```javascript
rectifyChange = function (id, callback) {
  var Change = this.getChangeModel();
  Change.rectifyModelChanges(this.modelName, [id], callback);
}
```
- example usage
```shell
...
  debug('rectifyOnSave %s -> ' + (id ? 'id %j' : '%s'),
    ctx.Model.modelName, id ? id : 'ALL');
  debug('context instance:%j currentInstance:%j where:%j data %j',
    ctx.instance, ctx.currentInstance, ctx.where, ctx.data);
}

if (id) {
  ctx.Model.rectifyChange(id, reportErrorAndNext);
} else {
  ctx.Model.rectifyAllChanges(reportErrorAndNext);
}

function reportErrorAndNext(err) {
  if (err) {
    ctx.Model.handleChangeError(err, 'after save');
...
```

#### <a name="apidoc.element.loopback.Change.rectifyModelChanges"></a>[function <span class="apidocSignatureSpan">loopback.Change.</span>rectifyModelChanges (modelName, modelIds, callback)](#apidoc.element.loopback.Change.rectifyModelChanges)
- description and source-code
```javascript
rectifyModelChanges = function (modelName, modelIds, callback) {
  var Change = this;
  var errors = [];

  callback = callback || utils.createPromiseCallback();

  var tasks = modelIds.map(function(id) {
    return function(cb) {
      Change.findOrCreateChange(modelName, id, function(err, change) {
        if (err) return next(err);
        change.rectify(next);
      });

      function next(err) {
        if (err) {
          err.modelName = modelName;
          err.modelId = id;
          errors.push(err);
        }
        cb();
      }
    };
  });

  async.parallel(tasks, function(err) {
    if (err) return callback(err);
    if (errors.length) {
      var desc = errors
        .map(function(e) {
          return '#' + e.modelId + ' - ' + e.toString();
        })
        .join('\n');

      var msg = g.f('Cannot rectify %s changes:\n%s', modelName, desc);
      err = new Error(msg);
      err.details = {errors: errors};
      return callback(err);
    }
    callback();
  });
  return callback.promise;
}
```
- example usage
```shell
...

if (rev !== change.prev) {
  debug('Detected non-rectified change of %s %j',
    Model.modelName, id);
  debug('\tExpected revision: %s', change.rev);
  debug('\tActual revision:   %s', rev);
  conflicts.push(change);
  return Change.rectifyModelChanges(Model.modelName, [id], cb);
}

// TODO(bajtos) modify 'data' so that it instructs
// the connector to remove any properties included in "inst"
// but not included in 'data'
// See https://github.com/strongloop/loopback/issues/1215
...
```

#### <a name="apidoc.element.loopback.Change.registerProperty"></a>[function <span class="apidocSignatureSpan">loopback.Change.</span>registerProperty (propertyName)](#apidoc.element.loopback.Change.registerProperty)
- description and source-code
```javascript
registerProperty = function (propertyName) {
  var properties = modelDefinition.build();
  var prop = properties[propertyName];
  var DataType = prop.type;
  if (!DataType) {
    throw new Error(g.f('Invalid type for property %s', propertyName));
  }

  if (prop.required) {
    var requiredOptions = typeof prop.required === 'object' ? prop.required : undefined;
    ModelClass.validatesPresenceOf(propertyName, requiredOptions);
  }

  Object.defineProperty(ModelClass.prototype, propertyName, {
    get: function() {
      if (ModelClass.getter[propertyName]) {
        return ModelClass.getter[propertyName].call(this); // Try getter first
      } else {
        return this.__data && this.__data[propertyName]; // Try __data
      }
    },
    set: function(value) {
      var DataType = ModelClass.definition.properties[propertyName].type;
      if (Array.isArray(DataType) || DataType === Array) {
        DataType = List;
      } else if (DataType === Date) {
        DataType = DateType;
      } else if (DataType === Boolean) {
        DataType = BooleanType;
      } else if (typeof DataType === 'string') {
        DataType = modelBuilder.resolveType(DataType);
      }

      var persistUndefinedAsNull = ModelClass.definition.settings.persistUndefinedAsNull;
      if (value === undefined && persistUndefinedAsNull) {
        value = null;
      }

      if (ModelClass.setter[propertyName]) {
        ModelClass.setter[propertyName].call(this, value); // Try setter first
      } else {
        this.__data = this.__data || {};
        if (value === null || value === undefined) {
          this.__data[propertyName] = value;
        } else {
          if (DataType === List) {
            this.__data[propertyName] = DataType(value, properties[propertyName].type, this.__data);
          } else {
            // Assume the type constructor handles Constructor() call
            // If not, we should call new DataType(value).valueOf();
            this.__data[propertyName] = (value instanceof DataType) ? value : DataType(value);
          }
        }
      }
    },
    configurable: true,
    enumerable: true,
  });

  // FIXME: [rfeng] Do we need to keep the raw data?
  // Use $ as the prefix to avoid conflicts with properties such as _id
  Object.defineProperty(ModelClass.prototype, '$' + propertyName, {
    get: function() {
      return this.__data && this.__data[propertyName];
    },
    set: function(value) {
      if (!this.__data) {
        this.__data = {};
      }
      this.__data[propertyName] = value;
    },
    configurable: true,
    enumerable: false,
  });
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Change.remoteMethod"></a>[function <span class="apidocSignatureSpan">loopback.Change.</span>remoteMethod (name, options)](#apidoc.element.loopback.Change.remoteMethod)
- description and source-code
```javascript
remoteMethod = function (name, options) {
  if (options.isStatic === undefined) {
    var m = name.match(/^prototype\.(.*)$/);
    options.isStatic = !m;
    name = options.isStatic ? name : m[1];
  }

  if (options.accepts) {
    options = extend({}, options);
    options.accepts = setupOptionsArgs(options.accepts);
  }

  this.sharedClass.defineMethod(name, options);
  this.emit('remoteMethodAdded', this.sharedClass);
}
```
- example usage
```shell
...
  /**
* Enable remote invocation for the specified method.
* See [Remote methods](http://loopback.io/doc/en/lb2/Remote-methods.html) for more information.
*
* Static method example:
* '''js
* Model.myMethod();
* Model.remoteMethod('myMethod');
* '''
*
* @param {String} name The name of the method.
* @param {Object} options The remoting options.
* See [Remote methods - Options](http://loopback.io/doc/en/lb2/Remote-methods.html#options).
*/
...
```

#### <a name="apidoc.element.loopback.Change.remove"></a>[function <span class="apidocSignatureSpan">loopback.Change.</span>remove (where, cb)](#apidoc.element.loopback.Change.remove)
- description and source-code
```javascript
function destroyAll(where, cb) {
  throwNotAttached(this.modelName, 'destroyAll');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Change.removeAllListeners"></a>[function <span class="apidocSignatureSpan">loopback.Change.</span>removeAllListeners ()](#apidoc.element.loopback.Change.removeAllListeners)
- description and source-code
```javascript
removeAllListeners = function () { [native code] }
```
- example usage
```shell
...

var idName = this.getIdName();
var Model = this;
var changes = new PassThrough({objectMode: true});
var writeable = true;

changes.destroy = function() {
  changes.removeAllListeners('error');
  changes.removeAllListeners('end');
  writeable = false;
  changes = null;
};

changes.on('error', function() {
  writeable = false;
...
```

#### <a name="apidoc.element.loopback.Change.removeById"></a>[function <span class="apidocSignatureSpan">loopback.Change.</span>removeById (id, cb)](#apidoc.element.loopback.Change.removeById)
- description and source-code
```javascript
function deleteById(id, cb) {
  throwNotAttached(this.modelName, 'deleteById');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Change.removeListener"></a>[function <span class="apidocSignatureSpan">loopback.Change.</span>removeListener ()](#apidoc.element.loopback.Change.removeListener)
- description and source-code
```javascript
removeListener = function () { [native code] }
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Change.removeObserver"></a>[function <span class="apidocSignatureSpan">loopback.Change.</span>removeObserver (operation, listener)](#apidoc.element.loopback.Change.removeObserver)
- description and source-code
```javascript
removeObserver = function (operation, listener) {
  if (!(this._observers && this._observers[operation])) return;

  var index = this._observers[operation].indexOf(listener);
  if (index !== -1) {
    return this._observers[operation].splice(index, 1);
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Change.replaceById"></a>[function <span class="apidocSignatureSpan">loopback.Change.</span>replaceById (id, data, cb)](#apidoc.element.loopback.Change.replaceById)
- description and source-code
```javascript
function replaceById(id, data, cb) {
  throwNotAttached(this.modelName, 'replaceById');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Change.replaceOrCreate"></a>[function <span class="apidocSignatureSpan">loopback.Change.</span>replaceOrCreate (data, callback)](#apidoc.element.loopback.Change.replaceOrCreate)
- description and source-code
```javascript
function replaceOrCreate(data, callback) {
  throwNotAttached(this.modelName, 'replaceOrCreate');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Change.replicate"></a>[function <span class="apidocSignatureSpan">loopback.Change.</span>replicate (since, targetModel, options, callback)](#apidoc.element.loopback.Change.replicate)
- description and source-code
```javascript
replicate = function (since, targetModel, options, callback) {
  var lastArg = arguments[arguments.length - 1];

  if (typeof lastArg === 'function' && arguments.length > 1) {
    callback = lastArg;
  }

  if (typeof since === 'function' && since.modelName) {
    targetModel = since;
    since = -1;
  }

  if (typeof since !== 'object') {
    since = {source: since, target: since};
  }

  if (typeof options === 'function') {
    options = {};
  }

  options = options || {};

  var sourceModel = this;
  callback = callback || utils.createPromiseCallback();

  debug('replicating %s since %s to %s since %s',
    sourceModel.modelName,
    since.source,
    targetModel.modelName,
    since.target);
  if (options.filter) {
    debug('\twith filter %j', options.filter);
  }

  // In order to avoid a race condition between the replication and
  // other clients modifying the data, we must create the new target
  // checkpoint as the first step of the replication process.
  // As a side-effect of that, the replicated changes are associated
  // with the new target checkpoint. This is actually desired behaviour,
  // because that way clients replicating *from* the target model
  // since the new checkpoint will pick these changes up.
  // However, it increases the likelihood of (false) conflicts being detected.
  // In order to prevent that, we run the replication multiple times,
  // until no changes were replicated, but at most MAX_ATTEMPTS times
  // to prevent starvation. In most cases, the second run will find no changes
  // to replicate and we are done.
  var MAX_ATTEMPTS = 3;

  run(1, since);
  return callback.promise;

  function run(attempt, since) {
    debug('\titeration #%s', attempt);
    tryReplicate(sourceModel, targetModel, since, options, next);

    function next(err, conflicts, cps, updates) {
      var finished = err || conflicts.length ||
        !updates || updates.length === 0 ||
        attempt >= MAX_ATTEMPTS;

      if (finished)
        return callback(err, conflicts, cps);
      run(attempt + 1, cps);
    }
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Change.revisionForInst"></a>[function <span class="apidocSignatureSpan">loopback.Change.</span>revisionForInst (inst)](#apidoc.element.loopback.Change.revisionForInst)
- description and source-code
```javascript
revisionForInst = function (inst) {
  assert(inst, 'Change.revisionForInst() requires an instance object.');
  return this.hash(CJSON.stringify(inst));
}
```
- example usage
```shell
...
  });
  callback(null, dataLookup);
});
  }

  function applyUpdate(Model, id, current, data, change, conflicts, options, cb) {
var Change = Model.getChangeModel();
var rev = current ?  Change.revisionForInst(current) : null;

if (rev !== change.prev) {
  debug('Detected non-rectified change of %s %j',
    Model.modelName, id);
  debug('\tExpected revision: %s', change.rev);
  debug('\tActual revision:   %s', rev);
  conflicts.push(change);
...
```

#### <a name="apidoc.element.loopback.Change.scopeRemoting"></a>[function <span class="apidocSignatureSpan">loopback.Change.</span>scopeRemoting (scopeName, scope, define)](#apidoc.element.loopback.Change.scopeRemoting)
- description and source-code
```javascript
scopeRemoting = function (scopeName, scope, define) {
  var pathName =
    (scope.options && scope.options.http && scope.options.http.path) || scopeName;

  var isStatic = scope.isStatic;
  var toModelName = scope.modelTo.modelName;

  // https://github.com/strongloop/loopback/issues/811
  // Check if the scope is for a hasMany relation
  var relation = this.relations[scopeName];
  if (relation && relation.modelTo) {
    // For a relation with through model, the toModelName should be the one
    // from the target model
    toModelName = relation.modelTo.modelName;
  }

  define('__get__' + scopeName, {
    isStatic: isStatic,
    http: {verb: 'get', path: '/' + pathName},
    accepts: [
      {arg: 'filter', type: 'object'},
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Queries %s of %s.', scopeName, this.modelName),
    accessType: 'READ',
    returns: {arg: scopeName, type: [toModelName], root: true},
  });

  define('__create__' + scopeName, {
    isStatic: isStatic,
    http: {verb: 'post', path: '/' + pathName},
    accepts: [
      {
        arg: 'data',
        type: 'object',
        allowArray: true,
        model: toModelName,
        http: {source: 'body'},
      },
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Creates a new instance in %s of this model.', scopeName),
    accessType: 'WRITE',
    returns: {arg: 'data', type: toModelName, root: true},
  });

  define('__delete__' + scopeName, {
    isStatic: isStatic,
    http: {verb: 'delete', path: '/' + pathName},
    accepts: [
      {
        arg: 'where', type: 'object',
        // The "where" argument is not exposed in the REST API
        // but we need to provide a value so that we can pass "options"
        // as the third argument.
        http: function(ctx) { return undefined; },
      },
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Deletes all %s of this model.', scopeName),
    accessType: 'WRITE',
  });

  define('__count__' + scopeName, {
    isStatic: isStatic,
    http: {verb: 'get', path: '/' + pathName + '/count'},
    accepts: [
      {
        arg: 'where', type: 'object',
        description: 'Criteria to match model instances',
      },
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Counts %s of %s.', scopeName, this.modelName),
    accessType: 'READ',
    returns: {arg: 'count',  type: 'number'},
  });
}
```
- example usage
```shell
...
        ModelCtor.hasManyRemoting(relationName, relation, define);
      }
    }

    // handle scopes
    var scopes = ModelCtor.scopes || {};
    for (var scopeName in scopes) {
      ModelCtor.scopeRemoting(scopeName, scopes[scopeName], define);
    }
  });

  return ModelCtor;
};

/*!
...
```

#### <a name="apidoc.element.loopback.Change.setMaxListeners"></a>[function <span class="apidocSignatureSpan">loopback.Change.</span>setMaxListeners ()](#apidoc.element.loopback.Change.setMaxListeners)
- description and source-code
```javascript
setMaxListeners = function () { [native code] }
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Change.setup"></a>[function <span class="apidocSignatureSpan">loopback.Change.</span>setup ()](#apidoc.element.loopback.Change.setup)
- description and source-code
```javascript
setup = function () {
  PersistedModel.setup.call(this);
  var Change = this;

  Change.getter.id = function() {
    var hasModel = this.modelName && this.modelId;
    if (!hasModel) return null;

    return Change.idForModel(this.modelName, this.modelId);
  };
}
```
- example usage
```shell
...
  Model.createOptionsFromRemotingContext = function(ctx) {
    return {
      accessToken: ctx.req.accessToken,
    };
  };

  // setup the initial model
  Model.setup();

  return Model;
};
...
```

#### <a name="apidoc.element.loopback.Change.setupRemoting"></a>[function <span class="apidocSignatureSpan">loopback.Change.</span>setupRemoting ()](#apidoc.element.loopback.Change.setupRemoting)
- description and source-code
```javascript
setupRemoting = function () {
  var PersistedModel = this;
  var typeName = PersistedModel.modelName;
  var options = PersistedModel.settings;

  // This is just for LB 3.x
  options.replaceOnPUT = options.replaceOnPUT !== false;

  function setRemoting(scope, name, options) {
    var fn = scope[name];
    fn._delegate = true;
    options.isStatic = scope === PersistedModel;
    PersistedModel.remoteMethod(name, options);
  }

  setRemoting(PersistedModel, 'create', {
    description: 'Create a new instance of the model and persist it into the data source.',
    accessType: 'WRITE',
    accepts: [
      {
        arg: 'data', type: 'object', model: typeName, allowArray: true,
        description: 'Model instance data',
        http: {source: 'body'},
      },
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    returns: {arg: 'data', type: typeName, root: true},
    http: {verb: 'post', path: '/'},
  });

  var upsertOptions = {
    aliases: ['upsert', 'updateOrCreate'],
    description: 'Patch an existing model instance or insert a new one ' +
      'into the data source.',
    accessType: 'WRITE',
    accepts: [
      {
        arg: 'data', type: 'object', model: typeName, http: {source: 'body'},
        description: 'Model instance data',
      },
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    returns: {arg: 'data', type: typeName, root: true},
    http: [{verb: 'patch', path: '/'}],
  };

  if (!options.replaceOnPUT) {
    upsertOptions.http.unshift({verb: 'put', path: '/'});
  }
  setRemoting(PersistedModel, 'patchOrCreate', upsertOptions);

  var replaceOrCreateOptions = {
    description: 'Replace an existing model instance or insert a new one into the data source.',
    accessType: 'WRITE',
    accepts: [
      {
        arg: 'data', type: 'object', model: typeName,
        http: {source: 'body'},
        description: 'Model instance data',
      },
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    returns: {arg: 'data', type: typeName, root: true},
    http: [{verb: 'post', path: '/replaceOrCreate'}],
  };

  if (options.replaceOnPUT) {
    replaceOrCreateOptions.http.push({verb: 'put', path: '/'});
  }

  setRemoting(PersistedModel, 'replaceOrCreate', replaceOrCreateOptions);

  setRemoting(PersistedModel, 'upsertWithWhere', {
    aliases: ['patchOrCreateWithWhere'],
    description: 'Update an existing model instance or insert a new one into ' +
      'the data source based on the where criteria.',
    accessType: 'WRITE',
    accepts: [
      {arg: 'where', type: 'object', http: {source: 'query'},
        description: 'Criteria to match model instances'},
      {arg: 'data', type: 'object', model: typeName, http: {source: 'body'},
        description: 'An object of model property name/value pairs'},
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    returns: {arg: 'data', type: typeName, root: true},
    http: {verb: 'post', path: '/upsertWithWhere'},
  });

  setRemoting(PersistedModel, 'exists', {
    description: 'Check whether a model instance exists in the data source.',
    accessType: 'READ',
    accepts: [
      {arg: 'id', type: 'any', description: 'Model id', required: true},
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    returns: {arg: 'exists', type: 'boolean'},
    http: [
      {verb: 'get', path: '/:id/exists'},
      {verb: 'head', path: '/:id'},
    ],
    rest: {
      // After hook to map exists to 200/404 for HEAD
      after: function(ctx, cb) {
        if (ctx.req.method === 'GET') {
          // For GET, return {exists: true|false} as is
          return cb();
        }
        if (!ctx.result.exists) {
          var modelName = ctx.method.sharedClass.name;
          var id = ctx.getArgByName('id');
          var msg = 'Unknown "' + modelName + '" id "' + id + '".';
          var error = new Error(msg);
          error.statusCode = error.status = 404;
          error.code = 'MODEL_NOT_FOUND';
          cb(error);
        } else {
          cb();
        } ...
```
- example usage
```shell
...
    PersistedModel.once('dataSourceAttached', function() {
      PersistedModel.enableChangeTracking();
    });
  } else if (this.settings.enableRemoteReplication) {
    PersistedModel._defineChangeModel();
  }

  PersistedModel.setupRemoting();
};

/*!
 * Throw an error telling the user that the method is not available and why.
 */

function throwNotAttached(modelName, methodName) {
...
```

#### <a name="apidoc.element.loopback.Change.sharedCtor"></a>[function <span class="apidocSignatureSpan">loopback.Change.</span>sharedCtor (data, id, options, fn)](#apidoc.element.loopback.Change.sharedCtor)
- description and source-code
```javascript
sharedCtor = function (data, id, options, fn) {
  var ModelCtor = this;

  var isRemoteInvocationWithOptions = typeof data !== 'object' &&
    typeof id === 'object' &&
    typeof options === 'function';
  if (isRemoteInvocationWithOptions) {
    // sharedCtor(id, options, fn)
    fn = options;
    options = id;
    id = data;
    data = null;
  } else if (typeof data === 'function') {
    // sharedCtor(fn)
    fn = data;
    data = null;
    id = null;
    options = null;
  } else if (typeof id === 'function') {
    // sharedCtor(data, fn)
    // sharedCtor(id, fn)
    fn = id;
    options = null;

    if (typeof data !== 'object') {
      id = data;
      data = null;
    } else {
      id = null;
    }
  }

  if (id && data) {
    var model = new ModelCtor(data);
    model.id = id;
    fn(null, model);
  } else if (data) {
    fn(null, new ModelCtor(data));
  } else if (id) {
    var filter = {};
    ModelCtor.findById(id, filter, options, function(err, model) {
      if (err) {
        fn(err);
      } else if (model) {
        fn(null, model);
      } else {
        err = new Error(g.f('could not find a model with apidoc.element.loopback.Change.sharedCtor %s', id));
        err.statusCode = 404;
        err.code = 'MODEL_NOT_FOUND';
        fn(err);
      }
    });
  } else {
    fn(new Error(g.f('must specify an apidoc.element.loopback.Change.sharedCtor or {{data}}')));
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Change.super_"></a>[function <span class="apidocSignatureSpan">loopback.Change.</span>super_ (data, options)](#apidoc.element.loopback.Change.super_)
- description and source-code
```javascript
function ModelConstructor(data, options) {
  if (!(this instanceof ModelConstructor)) {
    return new ModelConstructor(data, options);
  }
  if (ModelClass.settings.unresolved) {
    throw new Error(g.f('Model %s is not defined.', ModelClass.modelName));
  }
  ModelBaseClass.apply(this, arguments);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Change.update"></a>[function <span class="apidocSignatureSpan">loopback.Change.</span>update (where, data, cb)](#apidoc.element.loopback.Change.update)
- description and source-code
```javascript
function updateAll(where, data, cb) {
  throwNotAttached(this.modelName, 'updateAll');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Change.updateAll"></a>[function <span class="apidocSignatureSpan">loopback.Change.</span>updateAll (where, data, cb)](#apidoc.element.loopback.Change.updateAll)
- description and source-code
```javascript
function updateAll(where, data, cb) {
  throwNotAttached(this.modelName, 'updateAll');
}
```
- example usage
```shell
...

  /**
* Update multiple instances that match the where clause.
*
* Example:
*
*'''js
* Employee.updateAll({managerId: 'x001'}, {managerId: 'x002'}, function(err, info) {
*     ...
* });
* '''
*
* @param {Object} [where] Optional 'where' filter, like
* '''
* { key: val, key2: {gt: 'val2'}, ...}
...
```

#### <a name="apidoc.element.loopback.Change.updateLastChange"></a>[function <span class="apidocSignatureSpan">loopback.Change.</span>updateLastChange (id, data, cb)](#apidoc.element.loopback.Change.updateLastChange)
- description and source-code
```javascript
updateLastChange = function (id, data, cb) {
  var self = this;
  this.findLastChange(id, function(err, inst) {
    if (err) return cb(err);
    if (!inst) {
      err = new Error(g.f('No change record found for %s with id %s',
        self.modelName, id));
      err.statusCode = 404;
      return cb(err);
    }

    inst.updateAttributes(data, cb);
  });
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Change.updateOrCreate"></a>[function <span class="apidocSignatureSpan">loopback.Change.</span>updateOrCreate (data, callback)](#apidoc.element.loopback.Change.updateOrCreate)
- description and source-code
```javascript
function upsert(data, callback) {
  throwNotAttached(this.modelName, 'upsert');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Change.upsert"></a>[function <span class="apidocSignatureSpan">loopback.Change.</span>upsert (data, callback)](#apidoc.element.loopback.Change.upsert)
- description and source-code
```javascript
function upsert(data, callback) {
  throwNotAttached(this.modelName, 'upsert');
}
```
- example usage
```shell
...
  }
});

// then save
function save() {
  inst.trigger('save', function(saveDone) {
    inst.trigger('update', function(updateDone) {
      Model.upsert(inst, function(err) {
        inst._initProperties(data);
        updateDone.call(inst, function() {
          saveDone.call(inst, function() {
            callback(err, inst);
          });
        });
      });
...
```

#### <a name="apidoc.element.loopback.Change.upsertWithWhere"></a>[function <span class="apidocSignatureSpan">loopback.Change.</span>upsertWithWhere (where, data, callback)](#apidoc.element.loopback.Change.upsertWithWhere)
- description and source-code
```javascript
function upsertWithWhere(where, data, callback) {
  throwNotAttached(this.modelName, 'upsertWithWhere');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Change.validate"></a>[function <span class="apidocSignatureSpan">loopback.Change.</span>validate ()](#apidoc.element.loopback.Change.validate)
- description and source-code
```javascript
validate = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Change.validateAsync"></a>[function <span class="apidocSignatureSpan">loopback.Change.</span>validateAsync ()](#apidoc.element.loopback.Change.validateAsync)
- description and source-code
```javascript
validateAsync = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Change.validatesAbsenceOf"></a>[function <span class="apidocSignatureSpan">loopback.Change.</span>validatesAbsenceOf ()](#apidoc.element.loopback.Change.validatesAbsenceOf)
- description and source-code
```javascript
validatesAbsenceOf = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Change.validatesExclusionOf"></a>[function <span class="apidocSignatureSpan">loopback.Change.</span>validatesExclusionOf ()](#apidoc.element.loopback.Change.validatesExclusionOf)
- description and source-code
```javascript
validatesExclusionOf = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Change.validatesFormatOf"></a>[function <span class="apidocSignatureSpan">loopback.Change.</span>validatesFormatOf ()](#apidoc.element.loopback.Change.validatesFormatOf)
- description and source-code
```javascript
validatesFormatOf = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Change.validatesInclusionOf"></a>[function <span class="apidocSignatureSpan">loopback.Change.</span>validatesInclusionOf ()](#apidoc.element.loopback.Change.validatesInclusionOf)
- description and source-code
```javascript
validatesInclusionOf = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Change.validatesLengthOf"></a>[function <span class="apidocSignatureSpan">loopback.Change.</span>validatesLengthOf ()](#apidoc.element.loopback.Change.validatesLengthOf)
- description and source-code
```javascript
validatesLengthOf = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Change.validatesNumericalityOf"></a>[function <span class="apidocSignatureSpan">loopback.Change.</span>validatesNumericalityOf ()](#apidoc.element.loopback.Change.validatesNumericalityOf)
- description and source-code
```javascript
validatesNumericalityOf = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Change.validatesPresenceOf"></a>[function <span class="apidocSignatureSpan">loopback.Change.</span>validatesPresenceOf ()](#apidoc.element.loopback.Change.validatesPresenceOf)
- description and source-code
```javascript
validatesPresenceOf = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Change.validatesUniquenessOf"></a>[function <span class="apidocSignatureSpan">loopback.Change.</span>validatesUniquenessOf ()](#apidoc.element.loopback.Change.validatesUniquenessOf)
- description and source-code
```javascript
validatesUniquenessOf = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```



# <a name="apidoc.module.loopback.Change.Conflict"></a>[module loopback.Change.Conflict](#apidoc.module.loopback.Change.Conflict)

#### <a name="apidoc.element.loopback.Change.Conflict.Conflict"></a>[function <span class="apidocSignatureSpan">loopback.Change.</span>Conflict (modelId, SourceModel, TargetModel)](#apidoc.element.loopback.Change.Conflict.Conflict)
- description and source-code
```javascript
function Conflict(modelId, SourceModel, TargetModel) {
  this.SourceModel = SourceModel;
  this.TargetModel = TargetModel;
  this.SourceChange = SourceModel.getChangeModel();
  this.TargetChange = TargetModel.getChangeModel();
  this.modelId = modelId;
}
```
- example usage
```shell
...
debug('\treplication finished');
debug('\t\t%s conflict(s) detected', diff.conflicts.length);
debug('\t\t%s change(s) applied', updates ? updates.length : 0);
debug('\t\tnew checkpoints: { source: %j, target: %j }',
  newSourceCp, newTargetCp);

var conflicts = diff.conflicts.map(function(change) {
  return new Change.Conflict(
    change.modelId, sourceModel, targetModel
  );
});

if (conflicts.length) {
  sourceModel.emit('conflicts', conflicts);
}
...
```



# <a name="apidoc.module.loopback.Change.Conflict.prototype"></a>[module loopback.Change.Conflict.prototype](#apidoc.module.loopback.Change.Conflict.prototype)

#### <a name="apidoc.element.loopback.Change.Conflict.prototype.changes"></a>[function <span class="apidocSignatureSpan">loopback.Change.Conflict.prototype.</span>changes (cb)](#apidoc.element.loopback.Change.Conflict.prototype.changes)
- description and source-code
```javascript
changes = function (cb) {
  var conflict = this;
  var sourceChange, targetChange;

  async.parallel([
    getSourceChange,
    getTargetChange,
  ], done);

  function getSourceChange(cb) {
    var SourceModel = conflict.SourceModel;
    SourceModel.findLastChange(conflict.modelId, function(err, change) {
      if (err) return cb(err);
      sourceChange = change;
      cb();
    });
  }

  function getTargetChange(cb) {
    var TargetModel = conflict.TargetModel;
    TargetModel.findLastChange(conflict.modelId, function(err, change) {
      if (err) return cb(err);
      targetChange = change;
      cb();
    });
  }

  function done(err) {
    if (err) return cb(err);
    cb(null, sourceChange, targetChange);
  }
}
```
- example usage
```shell
...
    async.waterfall(tasks, done);

    function getSourceChanges(cb) {
utils.downloadInChunks(
  options.filter,
  replicationChunkSize,
  function(filter, pagingCallback) {
    sourceModel.changes(since.source, filter, pagingCallback);
  },
  debug.enabled ? log : cb);

function log(err, result) {
  if (err) return cb(err);
  debug('\tusing source changes');
  result.forEach(function(it) { debug('\t\t%j', it); });
...
```

#### <a name="apidoc.element.loopback.Change.Conflict.prototype.models"></a>[function <span class="apidocSignatureSpan">loopback.Change.Conflict.prototype.</span>models (cb)](#apidoc.element.loopback.Change.Conflict.prototype.models)
- description and source-code
```javascript
models = function (cb) {
  var conflict = this;
  var SourceModel = this.SourceModel;
  var TargetModel = this.TargetModel;
  var source, target;

  async.parallel([
    getSourceModel,
    getTargetModel,
  ], done);

  function getSourceModel(cb) {
    SourceModel.findById(conflict.modelId, function(err, model) {
      if (err) return cb(err);
      source = model;
      cb();
    });
  }

  function getTargetModel(cb) {
    TargetModel.findById(conflict.modelId, function(err, model) {
      if (err) return cb(err);
      target = model;
      cb();
    });
  }

  function done(err) {
    if (err) return cb(err);
    cb(null, source, target);
  }
}
```
- example usage
```shell
...
}

var modelName = Model.modelName;
this.models[modelName] =
  this.models[classify(modelName)] =
    this.models[camelize(modelName)] = Model;

this.models().push(Model);

if (isPublic && Model.sharedClass) {
  this.remotes().defineObjectType(Model.modelName, function(data) {
    return new Model(data);
  });
  this.remotes().addClass(Model.sharedClass);
  if (Model.settings.trackChanges && Model.Change) {
...
```

#### <a name="apidoc.element.loopback.Change.Conflict.prototype.resolve"></a>[function <span class="apidocSignatureSpan">loopback.Change.Conflict.prototype.</span>resolve (cb)](#apidoc.element.loopback.Change.Conflict.prototype.resolve)
- description and source-code
```javascript
resolve = function (cb) {
  var conflict = this;
  conflict.TargetModel.findLastChange(
    this.modelId,
    function(err, targetChange) {
      if (err) return cb(err);
      conflict.SourceModel.updateLastChange(
        conflict.modelId,
        {prev: targetChange.rev},
        cb);
    });
}
```
- example usage
```shell
...
  },
},
mochaTest: {
  'unit': {
    src: 'test/*.js',
    options: {
      reporter: 'dot',
      require: require.resolve('./test/helpers/use-english.js'),
    },
  },
  'unit-xml': {
    src: 'test/*.js',
    options: {
      reporter: 'xunit',
      captureFile: 'xunit.xml',
...
```

#### <a name="apidoc.element.loopback.Change.Conflict.prototype.resolveManually"></a>[function <span class="apidocSignatureSpan">loopback.Change.Conflict.prototype.</span>resolveManually (data, cb)](#apidoc.element.loopback.Change.Conflict.prototype.resolveManually)
- description and source-code
```javascript
resolveManually = function (data, cb) {
  var conflict = this;
  if (!data) {
    return conflict.SourceModel.deleteById(conflict.modelId, done);
  }

  conflict.models(function(err, source, target) {
    if (err) return done(err);
    var inst = source || new conflict.SourceModel(target);
    inst.setAttributes(data);
    inst.save(function(err) {
      if (err) return done(err);
      conflict.resolve(done);
    });
  });

  function done(err) {
    // don't forward any cb arguments from internal calls
    cb(err);
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Change.Conflict.prototype.resolveUsingSource"></a>[function <span class="apidocSignatureSpan">loopback.Change.Conflict.prototype.</span>resolveUsingSource (cb)](#apidoc.element.loopback.Change.Conflict.prototype.resolveUsingSource)
- description and source-code
```javascript
resolveUsingSource = function (cb) {
  this.resolve(function(err) {
    // don't forward any cb arguments from resolve()
    cb(err);
  });
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Change.Conflict.prototype.resolveUsingTarget"></a>[function <span class="apidocSignatureSpan">loopback.Change.Conflict.prototype.</span>resolveUsingTarget (cb)](#apidoc.element.loopback.Change.Conflict.prototype.resolveUsingTarget)
- description and source-code
```javascript
resolveUsingTarget = function (cb) {
  var conflict = this;

  conflict.models(function(err, source, target) {
    if (err) return done(err);
    if (target === null) {
      return conflict.SourceModel.deleteById(conflict.modelId, done);
    }
    var inst = new conflict.SourceModel(
      target.toObject(),
      {persisted: true});
    inst.save(done);
  });

  function done(err) {
    // don't forward any cb arguments from internal calls
    cb(err);
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Change.Conflict.prototype.swapParties"></a>[function <span class="apidocSignatureSpan">loopback.Change.Conflict.prototype.</span>swapParties ()](#apidoc.element.loopback.Change.Conflict.prototype.swapParties)
- description and source-code
```javascript
swapParties = function () {
  var Ctor = this.constructor;
  return new Ctor(this.modelId, this.TargetModel, this.SourceModel);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Change.Conflict.prototype.type"></a>[function <span class="apidocSignatureSpan">loopback.Change.Conflict.prototype.</span>type (cb)](#apidoc.element.loopback.Change.Conflict.prototype.type)
- description and source-code
```javascript
type = function (cb) {
  var conflict = this;
  this.changes(function(err, sourceChange, targetChange) {
    if (err) return cb(err);
    var sourceChangeType = sourceChange.type();
    var targetChangeType = targetChange.type();
    if (sourceChangeType === Change.UPDATE && targetChangeType === Change.UPDATE) {
      return cb(null, Change.UPDATE);
    }
    if (sourceChangeType === Change.DELETE || targetChangeType === Change.DELETE) {
      return cb(null, Change.DELETE);
    }
    return cb(null, Change.UNKNOWN);
  });
}
```
- example usage
```shell
...
    filter.where[idName] = {inq: ids};
    model.find(filter, function(err, models) {
      if (err) return callback(err);
      var modelIds = models.map(function(m) {
        return m[idName].toString();
      });
      callback(null, changes.filter(function(ch) {
        if (ch.type() === Change.DELETE) return true;
        return modelIds.indexOf(ch.modelId) > -1;
      }));
    });
  });
};

/**
...
```



# <a name="apidoc.module.loopback.Change.getter"></a>[module loopback.Change.getter](#apidoc.module.loopback.Change.getter)

#### <a name="apidoc.element.loopback.Change.getter.id"></a>[function <span class="apidocSignatureSpan">loopback.Change.getter.</span>id ()](#apidoc.element.loopback.Change.getter.id)
- description and source-code
```javascript
id = function () {
  var hasModel = this.modelName && this.modelId;
  if (!hasModel) return null;

  return Change.idForModel(this.modelName, this.modelId);
}
```
- example usage
```shell
n/a
```



# <a name="apidoc.module.loopback.Change.prototype"></a>[module loopback.Change.prototype](#apidoc.module.loopback.Change.prototype)

#### <a name="apidoc.element.loopback.Change.prototype.conflictsWith"></a>[function <span class="apidocSignatureSpan">loopback.Change.prototype.</span>conflictsWith (change)](#apidoc.element.loopback.Change.prototype.conflictsWith)
- description and source-code
```javascript
conflictsWith = function (change) {
  if (!change) return false;
  if (this.equals(change)) return false;
  if (Change.bothDeleted(this, change)) return false;
  if (this.isBasedOn(change)) return false;
  return true;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Change.prototype.currentRevision"></a>[function <span class="apidocSignatureSpan">loopback.Change.prototype.</span>currentRevision (cb)](#apidoc.element.loopback.Change.prototype.currentRevision)
- description and source-code
```javascript
currentRevision = function (cb) {
  cb = cb || utils.createPromiseCallback();
  var model = this.getModelCtor();
  var id = this.getModelId();
  model.findById(id, function(err, inst) {
    if (err) return cb(err);
    if (inst) {
      cb(null, Change.revisionForInst(inst));
    } else {
      cb(null, null);
    }
  });
  return cb.promise;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Change.prototype.debug"></a>[function <span class="apidocSignatureSpan">loopback.Change.prototype.</span>debug ()](#apidoc.element.loopback.Change.prototype.debug)
- description and source-code
```javascript
debug = function () {
  if (debug.enabled) {
    var args = Array.prototype.slice.call(arguments);
    args[0] = args[0] + ' %s';
    args.push(this.modelName);
    debug.apply(this, args);
    debug('\tid', this.id);
    debug('\trev', this.rev);
    debug('\tprev', this.prev);
    debug('\tcheckpoint', this.checkpoint);
    debug('\tmodelName', this.modelName);
    debug('\tmodelId', this.modelId);
    debug('\ttype', this.type());
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Change.prototype.equals"></a>[function <span class="apidocSignatureSpan">loopback.Change.prototype.</span>equals (change)](#apidoc.element.loopback.Change.prototype.equals)
- description and source-code
```javascript
equals = function (change) {
  if (!change) return false;
  var thisRev = this.rev || null;
  var thatRev = change.rev || null;
  return thisRev === thatRev;
}
```
- example usage
```shell
...
 * @param {String} [principalName] The principal name
 * @returns {boolean}
 */
AccessContext.prototype.addPrincipal = function(principalType, principalId, principalName) {
  var principal = new Principal(principalType, principalId, principalName);
  for (var i = 0; i < this.principals.length; i++) {
    var p = this.principals[i];
    if (p.equals(principal)) {
      return false;
    }
  }
  this.principals.push(principal);
  return true;
};
...
```

#### <a name="apidoc.element.loopback.Change.prototype.getModel"></a>[function <span class="apidocSignatureSpan">loopback.Change.prototype.</span>getModel (callback)](#apidoc.element.loopback.Change.prototype.getModel)
- description and source-code
```javascript
getModel = function (callback) {
  var Model = this.constructor.settings.trackModel;
  var id = this.getModelId();
  Model.findById(id, callback);
}
```
- example usage
```shell
...
context = context || {};

assert(context.registry,
  'Application registry is mandatory in AccessContext but missing in provided context');
this.registry = context.registry;
this.principals = context.principals || [];
var model = context.model;
model = ('string' === typeof model) ? this.registry.getModel(model) : model;
this.model = model;
this.modelName = model && model.modelName;

this.modelId = context.id || context.modelId;
this.property = context.property || AccessContext.ALL;

this.method = context.method;
...
```

#### <a name="apidoc.element.loopback.Change.prototype.getModelCtor"></a>[function <span class="apidocSignatureSpan">loopback.Change.prototype.</span>getModelCtor ()](#apidoc.element.loopback.Change.prototype.getModelCtor)
- description and source-code
```javascript
getModelCtor = function () {
  return this.constructor.settings.trackModel;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Change.prototype.getModelId"></a>[function <span class="apidocSignatureSpan">loopback.Change.prototype.</span>getModelId ()](#apidoc.element.loopback.Change.prototype.getModelId)
- description and source-code
```javascript
getModelId = function () {
  // TODO(ritch) get rid of the need to create an instance
  var Model = this.getModelCtor();
  var id = this.modelId;
  var m = new Model();
  m.setId(id);
  return m.getId();
}
```
- example usage
```shell
...
filter.fields[idName] = true;

// TODO(ritch) this whole thing could be optimized a bit more
Change.find(changeFilter, function(err, changes) {
  if (err) return callback(err);
  if (!Array.isArray(changes) || changes.length === 0) return callback(null, []);
  var ids = changes.map(function(change) {
    return change.getModelId();
  });
  filter.where[idName] = {inq: ids};
  model.find(filter, function(err, models) {
    if (err) return callback(err);
    var modelIds = models.map(function(m) {
      return m[idName].toString();
    });
...
```

#### <a name="apidoc.element.loopback.Change.prototype.isBasedOn"></a>[function <span class="apidocSignatureSpan">loopback.Change.prototype.</span>isBasedOn (change)](#apidoc.element.loopback.Change.prototype.isBasedOn)
- description and source-code
```javascript
isBasedOn = function (change) {
  return this.prev === change.rev;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Change.prototype.rectify"></a>[function <span class="apidocSignatureSpan">loopback.Change.prototype.</span>rectify (cb)](#apidoc.element.loopback.Change.prototype.rectify)
- description and source-code
```javascript
rectify = function (cb) {
  var change = this;
  var currentRev = this.rev;

  change.debug('rectify change');

  cb = cb || utils.createPromiseCallback();

  const model = this.getModelCtor();
  const id = this.getModelId();

  model.findById(id, function(err, inst) {
    if (err) return cb(err);

    if (inst) {
      inst.fillCustomChangeProperties(change, function() {
        const rev = Change.revisionForInst(inst);
        prepareAndDoRectify(rev);
      });
    } else {
      prepareAndDoRectify(null);
    }
  });

  return cb.promise;

  function prepareAndDoRectify(rev) {
    // avoid setting rev and prev to the same value
    if (currentRev === rev) {
      change.debug('rev and prev are equal (not updating anything)');
      return cb(null, change);
    }

    // FIXME(@bajtos) Allow callers to pass in the checkpoint value
    // (or even better - a memoized async function to get the cp value)
    // That will enable 'rectifyAll' to cache the checkpoint value
    change.constructor.getCheckpointModel().current(
      function(err, checkpoint) {
        if (err) return cb(err);
        doRectify(checkpoint, rev);
      }
    );
  }

  function doRectify(checkpoint, rev) {
    if (rev) {
      if (currentRev === rev) {
        change.debug('ASSERTION FAILED: Change currentRev==rev ' +
          'should have been already handled');
        return cb(null, change);
      } else {
        change.rev = rev;
        change.debug('updated revision (was ' + currentRev + ')');
        if (change.checkpoint !== checkpoint) {
          // previous revision is updated only across checkpoints
          change.prev = currentRev;
          change.debug('updated prev');
        }
      }
    } else {
      change.rev = null;
      change.debug('updated revision (was ' + currentRev + ')');
      if (change.checkpoint !== checkpoint) {
        // previous revision is updated only across checkpoints
        if (currentRev) {
          change.prev = currentRev;
        } else if (!change.prev) {
          change.debug('ERROR - could not determine prev');
          change.prev = Change.UNKNOWN;
        }
        change.debug('updated prev');
      }
    }

    if (change.checkpoint != checkpoint) {
      debug('update checkpoint to', checkpoint);
      change.checkpoint = checkpoint;
    }

    if (change.prev === Change.UNKNOWN) {
      // this occurs when a record of a change doesn't exist
      // and its current revision is null (not found)
      change.remove(cb);
    } else {
      change.save(cb);
    }
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Change.prototype.type"></a>[function <span class="apidocSignatureSpan">loopback.Change.prototype.</span>type ()](#apidoc.element.loopback.Change.prototype.type)
- description and source-code
```javascript
type = function () {
  if (this.rev && this.prev) {
    return Change.UPDATE;
  }
  if (this.rev && !this.prev) {
    return Change.CREATE;
  }
  if (!this.rev && this.prev) {
    return Change.DELETE;
  }
  return Change.UNKNOWN;
}
```
- example usage
```shell
...
    filter.where[idName] = {inq: ids};
    model.find(filter, function(err, models) {
      if (err) return callback(err);
      var modelIds = models.map(function(m) {
        return m[idName].toString();
      });
      callback(null, changes.filter(function(ch) {
        if (ch.type() === Change.DELETE) return true;
        return modelIds.indexOf(ch.modelId) > -1;
      }));
    });
  });
};

/**
...
```



# <a name="apidoc.module.loopback.Change.settings"></a>[module loopback.Change.settings](#apidoc.module.loopback.Change.settings)

#### <a name="apidoc.element.loopback.Change.settings.base"></a>[function <span class="apidocSignatureSpan">loopback.Change.settings.</span>base (data, options)](#apidoc.element.loopback.Change.settings.base)
- description and source-code
```javascript
function ModelConstructor(data, options) {
  if (!(this instanceof ModelConstructor)) {
    return new ModelConstructor(data, options);
  }
  if (ModelClass.settings.unresolved) {
    throw new Error(g.f('Model %s is not defined.', ModelClass.modelName));
  }
  ModelBaseClass.apply(this, arguments);
}
```
- example usage
```shell
n/a
```



# <a name="apidoc.module.loopback.Change.sharedClass"></a>[module loopback.Change.sharedClass](#apidoc.module.loopback.Change.sharedClass)

#### <a name="apidoc.element.loopback.Change.sharedClass.ctor"></a>[function <span class="apidocSignatureSpan">loopback.Change.sharedClass.</span>ctor (data, options)](#apidoc.element.loopback.Change.sharedClass.ctor)
- description and source-code
```javascript
function ModelConstructor(data, options) {
  if (!(this instanceof ModelConstructor)) {
    return new ModelConstructor(data, options);
  }
  if (ModelClass.settings.unresolved) {
    throw new Error(g.f('Model %s is not defined.', ModelClass.modelName));
  }
  ModelBaseClass.apply(this, arguments);
}
```
- example usage
```shell
n/a
```



# <a name="apidoc.module.loopback.Checkpoint"></a>[module loopback.Checkpoint](#apidoc.module.loopback.Checkpoint)

#### <a name="apidoc.element.loopback.Checkpoint.Checkpoint"></a>[function <span class="apidocSignatureSpan">loopback.</span>Checkpoint (data, options)](#apidoc.element.loopback.Checkpoint.Checkpoint)
- description and source-code
```javascript
function ModelConstructor(data, options) {
  if (!(this instanceof ModelConstructor)) {
    return new ModelConstructor(data, options);
  }
  if (ModelClass.settings.unresolved) {
    throw new Error(g.f('Model %s is not defined.', ModelClass.modelName));
  }
  ModelBaseClass.apply(this, arguments);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Checkpoint.ValidationError"></a>[function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>ValidationError (obj)](#apidoc.element.loopback.Checkpoint.ValidationError)
- description and source-code
```javascript
function ValidationError(obj) {
  if (!(this instanceof ValidationError)) return new ValidationError(obj);

  this.name = 'ValidationError';

  var context = obj && obj.constructor && obj.constructor.modelName;
  this.message = g.f(
    'The %s instance is not valid. Details: %s.',
      context ? ''' + context + ''' : 'model',
      formatErrors(obj.errors, obj.toJSON()) || '(unknown)'
  );

  this.statusCode = 422;

  this.details = {
    context: context,
    codes: obj.errors && obj.errors.codes,
    messages: obj.errors,
  };

  if (Error.captureStackTrace) {
    // V8 (Chrome, Opera, Node)
    Error.captureStackTrace(this, this.constructor);
  } else if (errorHasStackProperty) {
    // Firefox
    this.stack = (new Error).stack;
  }
  // Safari and PhantomJS initializes 'error.stack' on throw
  // Internet Explorer does not support 'error.stack'
}
```
- example usage
```shell
...
  return save();
}

inst.isValid(function(valid) {
  if (valid) {
    save();
  } else {
    var err = new Model.ValidationError(inst);
    // throws option is dangerous for async usage
    if (options.throws) {
      throw err;
    }
    callback(err, inst);
  }
});
...
```

#### <a name="apidoc.element.loopback.Checkpoint._ACL"></a>[function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>_ACL (ACL)](#apidoc.element.loopback.Checkpoint._ACL)
- description and source-code
```javascript
function getACL(ACL) {
  var registry = this.registry;
  if (ACL !== undefined) {
    // The function is used as a setter
    _aclModel = ACL;
  }
  if (_aclModel) {
    return _aclModel;
  }
  var aclModel = registry.getModel('ACL');
  _aclModel = registry.getModelByType(aclModel);
  return _aclModel;
}
```
- example usage
```shell
...
   * @param {String|Error} err The error object.
   * @param {Boolean} allowed True if the request is allowed; false otherwise.
   */

  Model.checkAccess = function(token, modelId, sharedMethod, ctx, callback) {
var ANONYMOUS = registry.getModel('AccessToken').ANONYMOUS;
token = token || ANONYMOUS;
var aclModel = Model._ACL();

ctx = ctx || {};
if (typeof ctx === 'function' && callback === undefined) {
  callback = ctx;
  ctx = {};
}
...
```

#### <a name="apidoc.element.loopback.Checkpoint._defineChangeModel"></a>[function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>_defineChangeModel ()](#apidoc.element.loopback.Checkpoint._defineChangeModel)
- description and source-code
```javascript
_defineChangeModel = function () {
  var BaseChangeModel = this.registry.getModel('Change');
  assert(BaseChangeModel,
    'Change model must be defined before enabling change replication');

  const additionalChangeModelProperties =
    this.settings.additionalChangeModelProperties || {};

  this.Change = BaseChangeModel.extend(this.modelName + '-change',
    additionalChangeModelProperties,
    {trackModel: this}
  );

  if (this.dataSource) {
    attachRelatedModels(this);
  }

  // Re-attach related models whenever our datasource is changed.
  var self = this;
  this.on('dataSourceAttached', function() {
    attachRelatedModels(self);
  });

  return this.Change;

  function attachRelatedModels(self) {
    self.Change.attachTo(self.dataSource);
    self.Change.getCheckpointModel().attachTo(self.dataSource);
  }
}
```
- example usage
```shell
...
// call Model.setup first
Model.setup.call(this);

var PersistedModel = this;

// enable change tracking (usually for replication)
if (this.settings.trackChanges) {
  PersistedModel._defineChangeModel();
  PersistedModel.once('dataSourceAttached', function() {
    PersistedModel.enableChangeTracking();
  });
} else if (this.settings.enableRemoteReplication) {
  PersistedModel._defineChangeModel();
}
...
```

#### <a name="apidoc.element.loopback.Checkpoint._getAccessTypeForMethod"></a>[function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>_getAccessTypeForMethod (method)](#apidoc.element.loopback.Checkpoint._getAccessTypeForMethod)
- description and source-code
```javascript
_getAccessTypeForMethod = function (method) {
  if (typeof method === 'string') {
    method = {name: method};
  }
  assert(
    typeof method === 'object',
    'method is a required argument and must be a RemoteMethod object'
  );

  var ACL = Model._ACL();

  // Check the explicit setting of accessType
  if (method.accessType) {
    assert(method.accessType === ACL.READ ||
      method.accessType === ACL.REPLICATE ||
      method.accessType === ACL.WRITE ||
      method.accessType === ACL.EXECUTE, 'invalid accessType ' +
      method.accessType +
      '. It must be "READ", "REPLICATE", "WRITE", or "EXECUTE"');
    return method.accessType;
  }

  // Default GET requests to READ
  var verb = method.http && method.http.verb;
  if (typeof verb === 'string') {
    verb = verb.toUpperCase();
  }
  if (verb === 'GET' || verb === 'HEAD') {
    return ACL.READ;
  }

  switch (method.name) {
    case 'create':
      return ACL.WRITE;
    case 'updateOrCreate':
      return ACL.WRITE;
    case 'upsertWithWhere':
      return ACL.WRITE;
    case 'upsert':
      return ACL.WRITE;
    case 'exists':
      return ACL.READ;
    case 'findById':
      return ACL.READ;
    case 'find':
      return ACL.READ;
    case 'findOne':
      return ACL.READ;
    case 'destroyById':
      return ACL.WRITE;
    case 'deleteById':
      return ACL.WRITE;
    case 'removeById':
      return ACL.WRITE;
    case 'count':
      return ACL.READ;
    default:
      return ACL.EXECUTE;
  }
}
```
- example usage
```shell
...
if (this.sharedMethod) {
  this.methodNames = this.sharedMethod.aliases.concat([this.sharedMethod.name]);
} else {
  this.methodNames = [];
}

if (this.sharedMethod) {
  this.accessType = this.model._getAccessTypeForMethod(this.sharedMethod);
}

this.accessType = context.accessType || AccessContext.ALL;
assert(loopback.AccessToken,
  'AccessToken model must be defined before AccessContext model');
this.accessToken = context.accessToken || loopback.AccessToken.ANONYMOUS;
...
```

#### <a name="apidoc.element.loopback.Checkpoint._getSingleton"></a>[function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>_getSingleton (cb)](#apidoc.element.loopback.Checkpoint._getSingleton)
- description and source-code
```javascript
_getSingleton = function (cb) {
  var query = {limit: 1}; // match all instances, return only one
  var initialData = {seq: 1};
  this.findOrCreate(query, initialData, cb);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Checkpoint._notifyBaseObservers"></a>[function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>_notifyBaseObservers (operation, context, callback)](#apidoc.element.loopback.Checkpoint._notifyBaseObservers)
- description and source-code
```javascript
_notifyBaseObservers = function (operation, context, callback) {
  if (this.base && this.base.notifyObserversOf)
    this.base.notifyObserversOf(operation, context, callback);
  else
    callback();
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Checkpoint._runWhenAttachedToApp"></a>[function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>_runWhenAttachedToApp (fn)](#apidoc.element.loopback.Checkpoint._runWhenAttachedToApp)
- description and source-code
```javascript
_runWhenAttachedToApp = function (fn) {
  if (this.app) return fn(this.app);
  var self = this;
  self.once('attached', function() {
    fn(self.app);
  });
}
```
- example usage
```shell
...
  ModelCtor,
  remotingOptions
);

// before remote hook
ModelCtor.beforeRemote = function(name, fn) {
  var className = this.modelName;
  this._runWhenAttachedToApp(function(app) {
    var remotes = app.remotes();
    remotes.before(className + '.' + name, function(ctx, next) {
      return fn(ctx, ctx.result, next);
    });
  });
};
...
```

#### <a name="apidoc.element.loopback.Checkpoint.addListener"></a>[function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>addListener ()](#apidoc.element.loopback.Checkpoint.addListener)
- description and source-code
```javascript
addListener = function () { [native code] }
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Checkpoint.afterRemote"></a>[function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>afterRemote (name, fn)](#apidoc.element.loopback.Checkpoint.afterRemote)
- description and source-code
```javascript
afterRemote = function (name, fn) {
  var className = this.modelName;
  this._runWhenAttachedToApp(function(app) {
    var remotes = app.remotes();
    remotes.after(className + '.' + name, function(ctx, next) {
      return fn(ctx, ctx.result, next);
    });
  });
}
```
- example usage
```shell
...
        var m = method.isStatic ? method.name : 'prototype.' + method.name;
        if (before && before[delegateTo.name]) {
          self.beforeRemote(m, function(ctx, result, next) {
            before[delegateTo.name]._listeners.call(null, ctx, next);
          });
        }
        if (after && after[delegateTo.name]) {
          self.afterRemote(m, function(ctx, result, next) {
            after[delegateTo.name]._listeners.call(null, ctx, next);
          });
        }
      }
    });
  });
} else {
...
```

#### <a name="apidoc.element.loopback.Checkpoint.afterRemoteError"></a>[function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>afterRemoteError (name, fn)](#apidoc.element.loopback.Checkpoint.afterRemoteError)
- description and source-code
```javascript
afterRemoteError = function (name, fn) {
  var className = this.modelName;
  this._runWhenAttachedToApp(function(app) {
    var remotes = app.remotes();
    remotes.afterError(className + '.' + name, fn);
  });
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Checkpoint.attachTo"></a>[function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>attachTo (dataSource)](#apidoc.element.loopback.Checkpoint.attachTo)
- description and source-code
```javascript
attachTo = function (dataSource) {
  dataSource.attach(this);
}
```
- example usage
```shell
...
  this.on('dataSourceAttached', function() {
    attachRelatedModels(self);
  });

  return this.Change;

  function attachRelatedModels(self) {
    self.Change.attachTo(self.dataSource);
    self.Change.getCheckpointModel().attachTo(self.dataSource);
  }
};

PersistedModel.rectifyAllChanges = function(callback) {
  this.getChangeModel().rectifyAll(callback);
};
...
```

#### <a name="apidoc.element.loopback.Checkpoint.beforeRemote"></a>[function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>beforeRemote (name, fn)](#apidoc.element.loopback.Checkpoint.beforeRemote)
- description and source-code
```javascript
beforeRemote = function (name, fn) {
  var className = this.modelName;
  this._runWhenAttachedToApp(function(app) {
    var remotes = app.remotes();
    remotes.before(className + '.' + name, function(ctx, next) {
      return fn(ctx, ctx.result, next);
    });
  });
}
```
- example usage
```shell
...
        sharedClass.methods().forEach(function(method) {
var delegateTo = method.rest && method.rest.delegateTo;
if (delegateTo && delegateTo.ctor == relation.modelTo) {
  var before = method.isStatic ? beforeListeners : beforeListeners['prototype'];
  var after = method.isStatic ? afterListeners : afterListeners['prototype'];
  var m = method.isStatic ? method.name : 'prototype.' + method.name;
  if (before && before[delegateTo.name]) {
    self.beforeRemote(m, function(ctx, result, next) {
      before[delegateTo.name]._listeners.call(null, ctx, next);
    });
  }
  if (after && after[delegateTo.name]) {
    self.afterRemote(m, function(ctx, result, next) {
      after[delegateTo.name]._listeners.call(null, ctx, next);
    });
...
```

#### <a name="apidoc.element.loopback.Checkpoint.belongsToRemoting"></a>[function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>belongsToRemoting (relationName, relation, define)](#apidoc.element.loopback.Checkpoint.belongsToRemoting)
- description and source-code
```javascript
belongsToRemoting = function (relationName, relation, define) {
  var modelName = relation.modelTo && relation.modelTo.modelName;
  modelName = modelName || 'PersistedModel';
  var fn = this.prototype[relationName];
  var pathName = (relation.options.http && relation.options.http.path) || relationName;
  define('__get__' + relationName, {
    isStatic: false,
    http: {verb: 'get', path: '/' + pathName},
    accepts: [
      {arg: 'refresh', type: 'boolean', http: {source: 'query'}},
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    accessType: 'READ',
    description: format('Fetches belongsTo relation %s.', relationName),
    returns: {arg: relationName, type: modelName, root: true},
  }, fn);
}
```
- example usage
```shell
...
  defineRaw(name, options, fn);
};

// get the relations
for (var relationName in relations) {
  var relation = relations[relationName];
  if (relation.type === 'belongsTo') {
    ModelCtor.belongsToRemoting(relationName, relation, define);
  } else if (
    relation.type === 'hasOne' ||
    relation.type === 'embedsOne'
  ) {
    ModelCtor.hasOneRemoting(relationName, relation, define);
  } else if (
    relation.type === 'hasMany' ||
...
```

#### <a name="apidoc.element.loopback.Checkpoint.bulkUpdate"></a>[function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>bulkUpdate (updates, options, callback)](#apidoc.element.loopback.Checkpoint.bulkUpdate)
- description and source-code
```javascript
bulkUpdate = function (updates, options, callback) {
  var tasks = [];
  var Model = this;
  var Change = this.getChangeModel();
  var conflicts = [];

  var lastArg = arguments[arguments.length - 1];

  if (typeof lastArg === 'function' && arguments.length > 1) {
    callback = lastArg;
  }

  if (typeof options === 'function') {
    options = {};
  }

  options = options || {};

  buildLookupOfAffectedModelData(Model, updates, function(err, currentMap) {
    if (err) return callback(err);

    updates.forEach(function(update) {
      var id = update.change.modelId;
      var current = currentMap[id];
      switch (update.type) {
        case Change.UPDATE:
          tasks.push(function(cb) {
            applyUpdate(Model, id, current, update.data, update.change, conflicts, options, cb);
          });
          break;

        case Change.CREATE:
          tasks.push(function(cb) {
            applyCreate(Model, id, current, update.data, update.change, conflicts, options, cb);
          });
          break;
        case Change.DELETE:
          tasks.push(function(cb) {
            applyDelete(Model, id, current, update.change, conflicts, options, cb);
          });
          break;
      }
    });

    async.parallel(tasks, function(err) {
      if (err) return callback(err);
      if (conflicts.length) {
        err = new Error(g.f('Conflict'));
        err.statusCode = 409;
        err.details = {conflicts: conflicts};
        return callback(err);
      }
      callback();
    });
  });
}
```
- example usage
```shell
...
    function bulkUpdate(_updates, cb) {
debug('\tstarting bulk update');
updates = _updates;
utils.uploadInChunks(
  updates,
  replicationChunkSize,
  function(smallArray, chunkCallback) {
    return targetModel.bulkUpdate(smallArray, options, function(err) {
      // bulk update is a special case where we want to process all chunks and aggregate all errors
      chunkCallback(null, err);
    });
  },
  function(notUsed, err) {
    var conflicts = err && err.details && err.details.conflicts;
    if (conflicts && err.statusCode == 409) {
...
```

#### <a name="apidoc.element.loopback.Checkpoint.bumpLastSeq"></a>[function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>bumpLastSeq (cb)](#apidoc.element.loopback.Checkpoint.bumpLastSeq)
- description and source-code
```javascript
bumpLastSeq = function (cb) {
  var Checkpoint = this;
  Checkpoint._getSingleton(function(err, cp) {
    if (err) return cb(err);
    var originalSeq = cp.seq;
    cp.seq++;
    // Update the checkpoint but only if it was not changed under our hands
    Checkpoint.updateAll({id: cp.id, seq: originalSeq}, {seq: cp.seq}, function(err, info) {
      if (err) return cb(err);
      // possible outcomes
      // 1) seq was updated to seq+1 - exactly what we wanted!
      // 2) somebody else already updated seq to seq+1 and our call was a no-op.
      //   That should be ok, checkpoints are time based, so we reuse the one created just now
      //  3) seq was bumped more than once, so we will be using a value that is behind the latest seq.
      //    @bajtos is not entirely sure if this is ok, but since it wasn't handled by the current implementation either,
      //    he thinks we can keep it this way.
      cb(null, cp);
    });
  });
}
```
- example usage
```shell
...
 * Create a checkpoint.
 *
 * @param  {Function} callback
 */

PersistedModel.checkpoint = function(cb) {
  var Checkpoint = this.getChangeModel().getCheckpointModel();
  Checkpoint.bumpLastSeq(cb);
};

/**
 * Get the current checkpoint ID.
 *
 * @callback {Function} callback Callback function called with '(err, currentCheckpointId)' arguments.  Required.
 * @param {Error} err Error object; see [Error object](http://loopback.io/doc/en/lb2/Error-object.html).
...
```

#### <a name="apidoc.element.loopback.Checkpoint.changes"></a>[function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>changes (since, filter, callback)](#apidoc.element.loopback.Checkpoint.changes)
- description and source-code
```javascript
changes = function (since, filter, callback) {
  if (typeof since === 'function') {
    filter = {};
    callback = since;
    since = -1;
  }
  if (typeof filter === 'function') {
    callback = filter;
    since = -1;
    filter = {};
  }

  var idName = this.dataSource.idName(this.modelName);
  var Change = this.getChangeModel();
  var model = this;
  const changeFilter = this.createChangeFilter(since, filter);

  filter = filter || {};
  filter.fields = {};
  filter.where = filter.where || {};
  filter.fields[idName] = true;

  // TODO(ritch) this whole thing could be optimized a bit more
  Change.find(changeFilter, function(err, changes) {
    if (err) return callback(err);
    if (!Array.isArray(changes) || changes.length === 0) return callback(null, []);
    var ids = changes.map(function(change) {
      return change.getModelId();
    });
    filter.where[idName] = {inq: ids};
    model.find(filter, function(err, models) {
      if (err) return callback(err);
      var modelIds = models.map(function(m) {
        return m[idName].toString();
      });
      callback(null, changes.filter(function(ch) {
        if (ch.type() === Change.DELETE) return true;
        return modelIds.indexOf(ch.modelId) > -1;
      }));
    });
  });
}
```
- example usage
```shell
...
    async.waterfall(tasks, done);

    function getSourceChanges(cb) {
utils.downloadInChunks(
  options.filter,
  replicationChunkSize,
  function(filter, pagingCallback) {
    sourceModel.changes(since.source, filter, pagingCallback);
  },
  debug.enabled ? log : cb);

function log(err, result) {
  if (err) return cb(err);
  debug('\tusing source changes');
  result.forEach(function(it) { debug('\t\t%j', it); });
...
```

#### <a name="apidoc.element.loopback.Checkpoint.checkAccess"></a>[function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>checkAccess (token, modelId, sharedMethod, ctx, callback)](#apidoc.element.loopback.Checkpoint.checkAccess)
- description and source-code
```javascript
checkAccess = function (token, modelId, sharedMethod, ctx, callback) {
  var ANONYMOUS = registry.getModel('AccessToken').ANONYMOUS;
  token = token || ANONYMOUS;
  var aclModel = Model._ACL();

  ctx = ctx || {};
  if (typeof ctx === 'function' && callback === undefined) {
    callback = ctx;
    ctx = {};
  }

  aclModel.checkAccessForContext({
    accessToken: token,
    model: this,
    property: sharedMethod.name,
    method: sharedMethod.name,
    sharedMethod: sharedMethod,
    modelId: modelId,
    accessType: this._getAccessTypeForMethod(sharedMethod),
    remotingContext: ctx,
  }, function(err, accessRequest) {
    if (err) return callback(err);
    callback(null, accessRequest.isAllowed());
  });
}
```
- example usage
```shell
...
var modelSettings = Model.settings || {};
var errStatusCode = modelSettings.aclErrorStatus || app.get('aclErrorStatus') || 401;
if (!req.accessToken) {
  errStatusCode = 401;
}

if (Model.checkAccess) {
  Model.checkAccess(
    req.accessToken,
    modelId,
    method,
    ctx,
    function(err, allowed) {
      if (err) {
        console.log(err);
...
```

#### <a name="apidoc.element.loopback.Checkpoint.checkpoint"></a>[function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>checkpoint (cb)](#apidoc.element.loopback.Checkpoint.checkpoint)
- description and source-code
```javascript
checkpoint = function (cb) {
  var Checkpoint = this.getChangeModel().getCheckpointModel();
  Checkpoint.bumpLastSeq(cb);
}
```
- example usage
```shell
...
      }
      cb(err);
    });
}

function checkpoints() {
  var cb = arguments[arguments.length - 1];
  sourceModel.checkpoint(function(err, source) {
    if (err) return cb(err);
    newSourceCp = source.seq;
    targetModel.checkpoint(function(err, target) {
      if (err) return cb(err);
      newTargetCp = target.seq;
      debug('\tcreated checkpoints');
      debug('\t\t%s for source model %s', newSourceCp, sourceModel.modelName);
...
```

#### <a name="apidoc.element.loopback.Checkpoint.clearObservers"></a>[function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>clearObservers (operation)](#apidoc.element.loopback.Checkpoint.clearObservers)
- description and source-code
```javascript
clearObservers = function (operation) {
  if (!(this._observers && this._observers[operation])) return;

  this._observers[operation].length = 0;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Checkpoint.count"></a>[function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>count (where, cb)](#apidoc.element.loopback.Checkpoint.count)
- description and source-code
```javascript
count = function (where, cb) {
  throwNotAttached(this.modelName, 'count');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Checkpoint.create"></a>[function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>create (data, callback)](#apidoc.element.loopback.Checkpoint.create)
- description and source-code
```javascript
create = function (data, callback) {
  throwNotAttached(this.modelName, 'create');
}
```
- example usage
```shell
...
 } else {
   var options = {};

   if (this.get) {
     options = this.get('remoting');
   }

   return (this._remotes = RemoteObjects.create(options));
 }
};

/*!
* Remove a route by reference.
*/
...
```

#### <a name="apidoc.element.loopback.Checkpoint.createChangeFilter"></a>[function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>createChangeFilter (since, modelFilter)](#apidoc.element.loopback.Checkpoint.createChangeFilter)
- description and source-code
```javascript
createChangeFilter = function (since, modelFilter) {
  return {
    where: {
      checkpoint: {gte: since},
      modelName: this.modelName,
    },
  };
}
```
- example usage
```shell
...
  since = -1;
  filter = {};
}

var idName = this.dataSource.idName(this.modelName);
var Change = this.getChangeModel();
var model = this;
const changeFilter = this.createChangeFilter(since, filter);

filter = filter || {};
filter.fields = {};
filter.where = filter.where || {};
filter.fields[idName] = true;

// TODO(ritch) this whole thing could be optimized a bit more
...
```

#### <a name="apidoc.element.loopback.Checkpoint.createChangeStream"></a>[function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>createChangeStream (options, cb)](#apidoc.element.loopback.Checkpoint.createChangeStream)
- description and source-code
```javascript
createChangeStream = function (options, cb) {
  if (typeof options === 'function') {
    cb = options;
    options = undefined;
  }

  var idName = this.getIdName();
  var Model = this;
  var changes = new PassThrough({objectMode: true});
  var writeable = true;

  changes.destroy = function() {
    changes.removeAllListeners('error');
    changes.removeAllListeners('end');
    writeable = false;
    changes = null;
  };

  changes.on('error', function() {
    writeable = false;
  });
  changes.on('end', function() {
    writeable = false;
  });

  process.nextTick(function() {
    cb(null, changes);
  });

  Model.observe('after save', createChangeHandler('save'));
  Model.observe('after delete', createChangeHandler('delete'));

  function createChangeHandler(type) {
    return function(ctx, next) {
      // since it might have set to null via destroy
      if (!changes) {
        return next();
      }

      var where = ctx.where;
      var data = ctx.instance || ctx.data;
      var whereId = where && where[idName];

      // the data includes the id
      // or the where includes the id
      var target;

      if (data && (data[idName] || data[idName] === 0)) {
        target = data[idName];
      } else if (where && (where[idName] || where[idName] === 0)) {
        target = where[idName];
      }

      var hasTarget = target === 0 || !!target;

      var change = {
        target: target,
        where: where,
        data: data,
      };

      switch (type) {
        case 'save':
          if (ctx.isNewInstance === undefined) {
            change.type = hasTarget ? 'update' : 'create';
          } else {
            change.type = ctx.isNewInstance ? 'create' : 'update';
          }

          break;
        case 'delete':
          change.type = 'remove';
          break;
      }

      // TODO(ritch) this is ugly... maybe a ReadableStream would be better
      if (writeable) {
        changes.write(change);
      }

      next();
    };
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Checkpoint.createOptionsFromRemotingContext"></a>[function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>createOptionsFromRemotingContext (ctx)](#apidoc.element.loopback.Checkpoint.createOptionsFromRemotingContext)
- description and source-code
```javascript
createOptionsFromRemotingContext = function (ctx) {
  return {
    accessToken: ctx.req.accessToken,
  };
}
```
- example usage
```shell
...
  var EMPTY_OPTIONS = {};
  var ModelCtor = ctx.method && ctx.method.ctor;
  if (!ModelCtor)
    return EMPTY_OPTIONS;
  if (typeof ModelCtor.createOptionsFromRemotingContext !== 'function')
    return EMPTY_OPTIONS;
  debug('createOptionsFromRemotingContext for %s', ctx.method.stringName);
  return ModelCtor.createOptionsFromRemotingContext(ctx);
}

/**
 * Disable remote invocation for the method with the given name.
 *
 * @param {String} name The name of the method.
 * @param {Boolean} isStatic Is the method static (eg. 'MyModel.myMethod')? Pass
...
```

#### <a name="apidoc.element.loopback.Checkpoint.createUpdates"></a>[function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>createUpdates (deltas, cb)](#apidoc.element.loopback.Checkpoint.createUpdates)
- description and source-code
```javascript
createUpdates = function (deltas, cb) {
  var Change = this.getChangeModel();
  var updates = [];
  var Model = this;
  var tasks = [];

  deltas.forEach(function(change) {
    change = new Change(change);
    var type = change.type();
    var update = {type: type, change: change};
    switch (type) {
      case Change.CREATE:
      case Change.UPDATE:
        tasks.push(function(cb) {
          Model.findById(change.modelId, function(err, inst) {
            if (err) return cb(err);
            if (!inst) {
              return cb &&
                cb(new Error(g.f('Missing data for change: %s', change.modelId)));
            }
            if (inst.toObject) {
              update.data = inst.toObject();
            } else {
              update.data = inst;
            }
            updates.push(update);
            cb();
          });
        });
        break;
      case Change.DELETE:
        updates.push(update);
        break;
    }
  });

  async.parallel(tasks, function(err) {
    if (err) return cb(err);
    cb(null, updates);
  });
}
```
- example usage
```shell
...

  if (diff && diff.deltas && diff.deltas.length) {
    debug('\tbuilding a list of updates');
    utils.uploadInChunks(
      diff.deltas,
      replicationChunkSize,
      function(smallArray, chunkCallback) {
        return sourceModel.createUpdates(smallArray, chunkCallback);
      },
      cb);
  } else {
    // nothing to replicate
    done();
  }
}
...
```

#### <a name="apidoc.element.loopback.Checkpoint.current"></a>[function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>current (cb)](#apidoc.element.loopback.Checkpoint.current)
- description and source-code
```javascript
current = function (cb) {
  var Checkpoint = this;
  Checkpoint._getSingleton(function(err, cp) {
    cb(err, cp.seq);
  });
}
```
- example usage
```shell
...
 * @callback {Function} callback Callback function called with '(err, currentCheckpointId)' arguments.  Required.
 * @param {Error} err Error object; see [Error object](http://loopback.io/doc/en/lb2/Error-object.html).
 * @param {Number} currentCheckpointId Current checkpoint ID.
 */

PersistedModel.currentCheckpoint = function(cb) {
  var Checkpoint = this.getChangeModel().getCheckpointModel();
  Checkpoint.current(cb);
};

/**
 * Replicate changes since the given checkpoint to the given target model.
 *
 * @param  {Number}   [since]  Since this checkpoint
 * @param  {Model}    targetModel  Target this model class
...
```

#### <a name="apidoc.element.loopback.Checkpoint.currentCheckpoint"></a>[function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>currentCheckpoint (cb)](#apidoc.element.loopback.Checkpoint.currentCheckpoint)
- description and source-code
```javascript
currentCheckpoint = function (cb) {
  var Checkpoint = this.getChangeModel().getCheckpointModel();
  Checkpoint.current(cb);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Checkpoint.defineProperty"></a>[function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>defineProperty (prop, params)](#apidoc.element.loopback.Checkpoint.defineProperty)
- description and source-code
```javascript
defineProperty = function (prop, params) {
  if (this.dataSource) {
    this.dataSource.defineProperty(this.modelName, prop, params);
  } else {
    this.modelBuilder.defineProperty(this.modelName, prop, params);
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Checkpoint.deleteAll"></a>[function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>deleteAll (where, cb)](#apidoc.element.loopback.Checkpoint.deleteAll)
- description and source-code
```javascript
function destroyAll(where, cb) {
  throwNotAttached(this.modelName, 'destroyAll');
}
```
- example usage
```shell
...
  Model.modelName, id);
debug('\tExpected revision: %s', change.rev);
debug('\tActual revision:   %s', rev);
conflicts.push(change);
return Change.rectifyModelChanges(Model.modelName, [id], cb);
    }

    Model.deleteAll(current.toObject(), options, function(err, result) {
if (err) return cb(err);

var count = result && result.count;
switch (count) {
  case 1:
    // The happy path, exactly one record was updated
    return cb();
...
```

#### <a name="apidoc.element.loopback.Checkpoint.deleteById"></a>[function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>deleteById (id, cb)](#apidoc.element.loopback.Checkpoint.deleteById)
- description and source-code
```javascript
function deleteById(id, cb) {
  throwNotAttached(this.modelName, 'deleteById');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Checkpoint.destroyAll"></a>[function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>destroyAll (where, cb)](#apidoc.element.loopback.Checkpoint.destroyAll)
- description and source-code
```javascript
function destroyAll(where, cb) {
  throwNotAttached(this.modelName, 'destroyAll');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Checkpoint.destroyById"></a>[function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>destroyById (id, cb)](#apidoc.element.loopback.Checkpoint.destroyById)
- description and source-code
```javascript
function deleteById(id, cb) {
  throwNotAttached(this.modelName, 'deleteById');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Checkpoint.diff"></a>[function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>diff (since, remoteChanges, callback)](#apidoc.element.loopback.Checkpoint.diff)
- description and source-code
```javascript
diff = function (since, remoteChanges, callback) {
  var Change = this.getChangeModel();
  Change.diff(this.modelName, since, remoteChanges, callback);
}
```
- example usage
```shell
...
    },
  });
};

/**
 * Get a set of deltas and conflicts since the given checkpoint.
 *
 * See [Change.diff()](#change-diff) for details.
 *
 * @param  {Number}  since  Find deltas since this checkpoint.
 * @param  {Array}  remoteChanges  An array of change objects.
 * @callback {Function} callback Callback function called with '(err, result)' arguments.  Required.
 * @param {Error} err Error object; see [Error object](http://loopback.io/doc/en/lb2/Error-object.html).
 * @param {Object} result Object with 'deltas' and 'conflicts' properties; see [Change.diff()](#change-diff) for details.
 */
...
```

#### <a name="apidoc.element.loopback.Checkpoint.disableRemoteMethod"></a>[function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>disableRemoteMethod (name, isStatic)](#apidoc.element.loopback.Checkpoint.disableRemoteMethod)
- description and source-code
```javascript
disableRemoteMethod = function (name, isStatic) {
  deprecated('Model.disableRemoteMethod is deprecated. ' +
    'Use Model.disableRemoteMethodByName instead.');
  var key = this.sharedClass.getKeyFromMethodNameAndTarget(name, isStatic);
  this.sharedClass.disableMethodByName(key);
  this.emit('remoteMethodDisabled', this.sharedClass, key);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Checkpoint.disableRemoteMethodByName"></a>[function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>disableRemoteMethodByName (name)](#apidoc.element.loopback.Checkpoint.disableRemoteMethodByName)
- description and source-code
```javascript
disableRemoteMethodByName = function (name) {
  this.sharedClass.disableMethodByName(name);
  this.emit('remoteMethodDisabled', this.sharedClass, name);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Checkpoint.emit"></a>[function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>emit ()](#apidoc.element.loopback.Checkpoint.emit)
- description and source-code
```javascript
emit = function () { [native code] }
```
- example usage
```shell
...
    return new Model(data);
  });
  this.remotes().addClass(Model.sharedClass);
  if (Model.settings.trackChanges && Model.Change) {
    this.remotes().addClass(Model.Change.sharedClass);
  }
  clearHandlerCache(this);
  this.emit('modelRemoted', Model.sharedClass);
}

var self = this;
Model.on('remoteMethodDisabled', function(model, methodName) {
  self.emit('remoteMethodDisabled', model, methodName);
});
Model.on('remoteMethodAdded', function(model) {
...
```

#### <a name="apidoc.element.loopback.Checkpoint.enableChangeTracking"></a>[function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>enableChangeTracking ()](#apidoc.element.loopback.Checkpoint.enableChangeTracking)
- description and source-code
```javascript
enableChangeTracking = function () {
  var Model = this;
  var Change = this.Change || this._defineChangeModel();
  var cleanupInterval = Model.settings.changeCleanupInterval || 30000;

  assert(this.dataSource, 'Cannot enableChangeTracking(): ' + this.modelName +
    ' is not attached to a dataSource');

  var idName = this.getIdName();
  var idProp = this.definition.properties[idName];
  var idType = idProp && idProp.type;
  var idDefn = idProp && idProp.defaultFn;
  if (idType !== String || !(idDefn === 'uuid' || idDefn === 'guid')) {
    deprecated('The model ' + this.modelName + ' is tracking changes, ' +
      'which requires a string id with GUID/UUID default value.');
  }

  Model.observe('after save', rectifyOnSave);

  Model.observe('after delete', rectifyOnDelete);

  // Only run if the run time is server
  // Can switch off cleanup by setting the interval to -1
  if (runtime.isServer && cleanupInterval > 0) {
    // initial cleanup
    cleanup();

    // cleanup
    setInterval(cleanup, cleanupInterval);
  }

  function cleanup() {
    Model.rectifyAllChanges(function(err) {
      if (err) {
        Model.handleChangeError(err, 'cleanup');
      }
    });
  }
}
```
- example usage
```shell
...

  var PersistedModel = this;

  // enable change tracking (usually for replication)
  if (this.settings.trackChanges) {
    PersistedModel._defineChangeModel();
    PersistedModel.once('dataSourceAttached', function() {
      PersistedModel.enableChangeTracking();
    });
  } else if (this.settings.enableRemoteReplication) {
    PersistedModel._defineChangeModel();
  }

  PersistedModel.setupRemoting();
};
...
```

#### <a name="apidoc.element.loopback.Checkpoint.eventNames"></a>[function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>eventNames ()](#apidoc.element.loopback.Checkpoint.eventNames)
- description and source-code
```javascript
eventNames = function () { [native code] }
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Checkpoint.exists"></a>[function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>exists (id, cb)](#apidoc.element.loopback.Checkpoint.exists)
- description and source-code
```javascript
function exists(id, cb) {
  throwNotAttached(this.modelName, 'exists');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Checkpoint.extend"></a>[function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>extend (className, subclassProperties, subclassSettings)](#apidoc.element.loopback.Checkpoint.extend)
- description and source-code
```javascript
extend = function (className, subclassProperties, subclassSettings) {
  var properties = ModelClass.definition.properties;
  var settings = ModelClass.definition.settings;

  subclassProperties = subclassProperties || {};
  subclassSettings = subclassSettings || {};

  // Check if subclass redefines the ids
  var idFound = false;
  for (var k in subclassProperties) {
    if (subclassProperties[k] && subclassProperties[k].id) {
      idFound = true;
      break;
    }
  }

  // Merging the properties
  var keys = Object.keys(properties);
  for (var i = 0, n = keys.length; i < n; i++) {
    var key = keys[i];

    if (idFound && properties[key].id) {
      // don't inherit id properties
      continue;
    }
    if (subclassProperties[key] === undefined) {
      var baseProp = properties[key];
      var basePropCopy = baseProp;
      if (baseProp && typeof baseProp === 'object') {
        // Deep clone the base prop
        basePropCopy = mergeSettings(null, baseProp);
      }
      subclassProperties[key] = basePropCopy;
    }
  }

  // Merge the settings
  var originalSubclassSettings = subclassSettings;
  subclassSettings = mergeSettings(settings, subclassSettings);

  // Ensure 'base' is not inherited. Note we don't have to delete 'super'
  // as that is removed from settings by modelBuilder.define and thus
  // it is never inherited
  if (!originalSubclassSettings.base) {
    subclassSettings.base = ModelClass;
  }

  // Define the subclass
  var subClass = modelBuilder.define(className, subclassProperties, subclassSettings, ModelClass);

  // Calling the setup function
  if (typeof subClass.setup === 'function') {
    subClass.setup.call(subClass);
  }

  return subClass;
}
```
- example usage
```shell
...
* The base class for **all models**.
*
* **Inheriting from 'Model'**
*
* '''js
* var properties = {...};
* var options = {...};
* var MyModel = loopback.Model.extend('MyModel', properties, options);
* '''
*
* **Options**
*
*  - 'trackChanges' - If true, changes to the model will be tracked. **Required
* for replication.**
*
...
```

#### <a name="apidoc.element.loopback.Checkpoint.find"></a>[function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>find (filter, cb)](#apidoc.element.loopback.Checkpoint.find)
- description and source-code
```javascript
function find(filter, cb) {
  throwNotAttached(this.modelName, 'find');
}
```
- example usage
```shell
...

filter = filter || {};
filter.fields = {};
filter.where = filter.where || {};
filter.fields[idName] = true;

// TODO(ritch) this whole thing could be optimized a bit more
Change.find(changeFilter, function(err, changes) {
  if (err) return callback(err);
  if (!Array.isArray(changes) || changes.length === 0) return callback(null, []);
  var ids = changes.map(function(change) {
    return change.getModelId();
  });
  filter.where[idName] = {inq: ids};
  model.find(filter, function(err, models) {
...
```

#### <a name="apidoc.element.loopback.Checkpoint.findById"></a>[function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>findById (id, filter, cb)](#apidoc.element.loopback.Checkpoint.findById)
- description and source-code
```javascript
function findById(id, filter, cb) {
  throwNotAttached(this.modelName, 'findById');
}
```
- example usage
```shell
...
  var model = new ModelCtor(data);
  model.id = id;
  fn(null, model);
} else if (data) {
  fn(null, new ModelCtor(data));
} else if (id) {
  var filter = {};
  ModelCtor.findById(id, filter, options, function(err, model) {
    if (err) {
      fn(err);
    } else if (model) {
      fn(null, model);
    } else {
      err = new Error(g.f('could not find a model with apidoc.element.loopback.Checkpoint.findById %s', id));
      err.statusCode = 404;
...
```

#### <a name="apidoc.element.loopback.Checkpoint.findLastChange"></a>[function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>findLastChange (id, cb)](#apidoc.element.loopback.Checkpoint.findLastChange)
- description and source-code
```javascript
findLastChange = function (id, cb) {
  var Change = this.getChangeModel();
  Change.findOne({where: {modelId: id}}, cb);
}
```
- example usage
```shell
...
PersistedModel.findLastChange = function(id, cb) {
  var Change = this.getChangeModel();
  Change.findOne({where: {modelId: id}}, cb);
};

PersistedModel.updateLastChange = function(id, data, cb) {
  var self = this;
  this.findLastChange(id, function(err, inst) {
    if (err) return cb(err);
    if (!inst) {
      err = new Error(g.f('No change record found for %s with id %s',
        self.modelName, id));
      err.statusCode = 404;
      return cb(err);
    }
...
```

#### <a name="apidoc.element.loopback.Checkpoint.findOne"></a>[function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>findOne (filter, cb)](#apidoc.element.loopback.Checkpoint.findOne)
- description and source-code
```javascript
function findOne(filter, cb) {
  throwNotAttached(this.modelName, 'findOne');
}
```
- example usage
```shell
...
PersistedModel.rectifyChange = function(id, callback) {
  var Change = this.getChangeModel();
  Change.rectifyModelChanges(this.modelName, [id], callback);
};

PersistedModel.findLastChange = function(id, cb) {
  var Change = this.getChangeModel();
  Change.findOne({where: {modelId: id}}, cb);
};

PersistedModel.updateLastChange = function(id, data, cb) {
  var self = this;
  this.findLastChange(id, function(err, inst) {
    if (err) return cb(err);
    if (!inst) {
...
```

#### <a name="apidoc.element.loopback.Checkpoint.findOrCreate"></a>[function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>findOrCreate (query, data, callback)](#apidoc.element.loopback.Checkpoint.findOrCreate)
- description and source-code
```javascript
function findOrCreate(query, data, callback) {
  throwNotAttached(this.modelName, 'findOrCreate');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Checkpoint.forEachProperty"></a>[function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>forEachProperty (cb)](#apidoc.element.loopback.Checkpoint.forEachProperty)
- description and source-code
```javascript
forEachProperty = function (cb) {
  var props = ModelClass.definition.properties;
  var keys = Object.keys(props);
  for (var i = 0, n = keys.length; i < n; i++) {
    cb(keys[i], props[keys[i]]);
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Checkpoint.getApp"></a>[function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>getApp (callback)](#apidoc.element.loopback.Checkpoint.getApp)
- description and source-code
```javascript
getApp = function (callback) {
  var self = this;
  self._runWhenAttachedToApp(function(app) {
    assert(self.app);
    assert.equal(app, self.app);
    callback(null, app);
  });
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Checkpoint.getChangeModel"></a>[function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>getChangeModel ()](#apidoc.element.loopback.Checkpoint.getChangeModel)
- description and source-code
```javascript
getChangeModel = function () {
  var changeModel = this.Change;
  var isSetup = changeModel && changeModel.dataSource;

  assert(isSetup, 'Cannot get a setup Change model for ' + this.modelName);

  return changeModel;
}
```
- example usage
```shell
...
 * @param  {Array}  remoteChanges  An array of change objects.
 * @callback {Function} callback Callback function called with '(err, result)' arguments.  Required.
 * @param {Error} err Error object; see [Error object](http://loopback.io/doc/en/lb2/Error-object.html).
 * @param {Object} result Object with 'deltas' and 'conflicts' properties; see [Change.diff()](#change-diff) for details.
 */

PersistedModel.diff = function(since, remoteChanges, callback) {
  var Change = this.getChangeModel();
  Change.diff(this.modelName, since, remoteChanges, callback);
};

/**
 * Get the changes to a model since the specified checkpoint. Provide a filter object
 * to reduce the number of results returned.
 * @param  {Number}   since    Return only changes since this checkpoint.
...
```

#### <a name="apidoc.element.loopback.Checkpoint.getDataSource"></a>[function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>getDataSource ()](#apidoc.element.loopback.Checkpoint.getDataSource)
- description and source-code
```javascript
getDataSource = function () {
  return this.dataSource;
}
```
- example usage
```shell
...
 * connector that defines it.  Otherwise, uses the default lookup.
 * Override this method to handle complex IDs.
 *
 * @param {*} val The 'id' value. Will be converted to the type that the 'id' property specifies.
 */

PersistedModel.prototype.setId = function(val) {
  var ds = this.getDataSource();
  this[this.getIdName()] = val;
};

/**
 * Get the 'id' value for the 'PersistedModel'.
 *
 * @returns {*} The 'id' value
...
```

#### <a name="apidoc.element.loopback.Checkpoint.getIdName"></a>[function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>getIdName ()](#apidoc.element.loopback.Checkpoint.getIdName)
- description and source-code
```javascript
getIdName = function () {
  var Model = this;
  var ds = Model.getDataSource();

  if (ds.idName) {
    return ds.idName(Model.modelName);
  } else {
    return 'id';
  }
}
```
- example usage
```shell
...
 * Override this method to handle complex IDs.
 *
 * @param {*} val The 'id' value. Will be converted to the type that the 'id' property specifies.
 */

PersistedModel.prototype.setId = function(val) {
  var ds = this.getDataSource();
  this[this.getIdName()] = val;
};

/**
 * Get the 'id' value for the 'PersistedModel'.
 *
 * @returns {*} The 'id' value
 */
...
```

#### <a name="apidoc.element.loopback.Checkpoint.getMaxListeners"></a>[function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>getMaxListeners ()](#apidoc.element.loopback.Checkpoint.getMaxListeners)
- description and source-code
```javascript
getMaxListeners = function () { [native code] }
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Checkpoint.getPropertyType"></a>[function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>getPropertyType (propName)](#apidoc.element.loopback.Checkpoint.getPropertyType)
- description and source-code
```javascript
getPropertyType = function (propName) {
  var prop = this.definition.properties[propName];
  if (!prop) {
    // The property is not part of the definition
    return null;
  }
  if (!prop.type) {
    throw new Error(g.f('Type not defined for property %s.%s', this.modelName, propName));
    // return null;
  }
  return prop.type.name;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Checkpoint.getSourceId"></a>[function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>getSourceId (cb)](#apidoc.element.loopback.Checkpoint.getSourceId)
- description and source-code
```javascript
getSourceId = function (cb) {
  var dataSource = this.dataSource;
  if (!dataSource) {
    this.once('dataSourceAttached', this.getSourceId.bind(this, cb));
  }
  assert(
    dataSource.connector.name,
    'Model.getSourceId: cannot get id without dataSource.connector.name'
  );
  var id = [dataSource.connector.name, this.modelName].join('-');
  cb(null, id);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Checkpoint.handleChangeError"></a>[function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>handleChangeError (err, operationName)](#apidoc.element.loopback.Checkpoint.handleChangeError)
- description and source-code
```javascript
handleChangeError = function (err, operationName) {
  if (!err) return;
  this.emit('error', err, operationName);
}
```
- example usage
```shell
...
    // cleanup
    setInterval(cleanup, cleanupInterval);
  }

  function cleanup() {
    Model.rectifyAllChanges(function(err) {
      if (err) {
        Model.handleChangeError(err, 'cleanup');
      }
    });
  }
};

function rectifyOnSave(ctx, next) {
  var instance = ctx.instance || ctx.currentInstance;
...
```

#### <a name="apidoc.element.loopback.Checkpoint.hasManyRemoting"></a>[function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>hasManyRemoting (relationName, relation, define)](#apidoc.element.loopback.Checkpoint.hasManyRemoting)
- description and source-code
```javascript
hasManyRemoting = function (relationName, relation, define) {
  var pathName = (relation.options.http && relation.options.http.path) || relationName;
  var toModelName = relation.modelTo.modelName;

  var findByIdFunc = this.prototype['__findById__' + relationName];
  define('__findById__' + relationName, {
    isStatic: false,
    http: {verb: 'get', path: '/' + pathName + '/:fk'},
    accepts: [
      {
        arg: 'fk', type: 'any',
        description: format('Foreign key for %s', relationName),
        required: true,
        http: {source: 'path'},
      },
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Find a related item by id for %s.', relationName),
    accessType: 'READ',
    returns: {arg: 'result', type: toModelName, root: true},
    rest: {after: convertNullToNotFoundError.bind(null, toModelName)},
  }, findByIdFunc);

  var destroyByIdFunc = this.prototype['__destroyById__' + relationName];
  define('__destroyById__' + relationName, {
    isStatic: false,
    http: {verb: 'delete', path: '/' + pathName + '/:fk'},
    accepts: [
      {
        arg: 'fk', type: 'any',
        description: format('Foreign key for %s', relationName),
        required: true,
        http: {source: 'path'},
      },
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Delete a related item by id for %s.', relationName),
    accessType: 'WRITE',
    returns: [],
  }, destroyByIdFunc);

  var updateByIdFunc = this.prototype['__updateById__' + relationName];
  define('__updateById__' + relationName, {
    isStatic: false,
    http: {verb: 'put', path: '/' + pathName + '/:fk'},
    accepts: [
      {arg: 'fk', type: 'any',
        description: format('Foreign key for %s', relationName),
        required: true,
        http: {source: 'path'}},
      {arg: 'data', type: 'object', model: toModelName, http: {source: 'body'}},
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Update a related item by id for %s.', relationName),
    accessType: 'WRITE',
    returns: {arg: 'result', type: toModelName, root: true},
  }, updateByIdFunc);

  if (relation.modelThrough || relation.type === 'referencesMany') {
    var modelThrough = relation.modelThrough || relation.modelTo;

    var accepts = [];
    if (relation.type === 'hasMany' && relation.modelThrough) {
      // Restrict: only hasManyThrough relation can have additional properties
      accepts.push({
        arg: 'data', type: 'object', model: modelThrough.modelName,
        http: {source: 'body'},
      });
    }

    var addFunc = this.prototype['__link__' + relationName];
    define('__link__' + relationName, {
      isStatic: false,
      http: {verb: 'put', path: '/' + pathName + '/rel/:fk'},
      accepts: [{arg: 'fk', type: 'any',
        description: format('Foreign key for %s', relationName),
        required: true,
        http: {source: 'path'}},
      ].concat(accepts).concat([
        {arg: 'options', type: 'object', http: 'optionsFromRequest'},
      ]),
      description: format('Add a related item by id for %s.', relationName),
      accessType: 'WRITE',
      returns: {arg: relationName, type: modelThrough.modelName, root: true},
    }, addFunc);

    var removeFunc = this.prototype['__unlink__' + relationName];
    define('__unlink__' + relationName, {
      isStatic: false,
      http: {verb: 'delete', path: '/' + pathName + '/rel/:fk'},
      accepts: [
        {
          arg: 'fk', type: 'any',
          description: format('Foreign key for %s', relationName),
          required: true,
          http: {source: 'path'},
        },
        {arg: 'options', type: 'object', http: 'optionsFromRequest'},
      ],
      description: format('Remove the %s relation to an item by id.', relationName),
      accessType: 'WRITE',
      returns: [],
    }, removeFunc);

    // FIXME: [rfeng] How to map a function with callback(err, true|false) to HEAD?
    // true --> 200 and false --> 404?
    var existsFunc = this.prototype['__exists__' + relatio ...
```
- example usage
```shell
...
    relation.type === 'embedsOne'
  ) {
    ModelCtor.hasOneRemoting(relationName, relation, define);
  } else if (
    relation.type === 'hasMany' ||
    relation.type === 'embedsMany' ||
    relation.type === 'referencesMany') {
    ModelCtor.hasManyRemoting(relationName, relation, define);
  }
}

// handle scopes
var scopes = ModelCtor.scopes || {};
for (var scopeName in scopes) {
  ModelCtor.scopeRemoting(scopeName, scopes[scopeName], define);
...
```

#### <a name="apidoc.element.loopback.Checkpoint.hasOneRemoting"></a>[function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>hasOneRemoting (relationName, relation, define)](#apidoc.element.loopback.Checkpoint.hasOneRemoting)
- description and source-code
```javascript
hasOneRemoting = function (relationName, relation, define) {
  var pathName = (relation.options.http && relation.options.http.path) || relationName;
  var toModelName = relation.modelTo.modelName;

  define('__get__' + relationName, {
    isStatic: false,
    http: {verb: 'get', path: '/' + pathName},
    accepts: [
      {arg: 'refresh', type: 'boolean', http: {source: 'query'}},
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Fetches hasOne relation %s.', relationName),
    accessType: 'READ',
    returns: {arg: relationName, type: relation.modelTo.modelName, root: true},
    rest: {after: convertNullToNotFoundError.bind(null, toModelName)},
  });

  define('__create__' + relationName, {
    isStatic: false,
    http: {verb: 'post', path: '/' + pathName},
    accepts: [
      {
        arg: 'data', type: 'object', model: toModelName,
        http: {source: 'body'},
      },
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Creates a new instance in %s of this model.', relationName),
    accessType: 'WRITE',
    returns: {arg: 'data', type: toModelName, root: true},
  });

  define('__update__' + relationName, {
    isStatic: false,
    http: {verb: 'put', path: '/' + pathName},
    accepts: [
      {
        arg: 'data', type: 'object', model: toModelName,
        http: {source: 'body'},
      },
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Update %s of this model.', relationName),
    accessType: 'WRITE',
    returns: {arg: 'data', type: toModelName, root: true},
  });

  define('__destroy__' + relationName, {
    isStatic: false,
    http: {verb: 'delete', path: '/' + pathName},
    accepts: [
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Deletes %s of this model.', relationName),
    accessType: 'WRITE',
  });
}
```
- example usage
```shell
...
  var relation = relations[relationName];
  if (relation.type === 'belongsTo') {
    ModelCtor.belongsToRemoting(relationName, relation, define);
  } else if (
    relation.type === 'hasOne' ||
    relation.type === 'embedsOne'
  ) {
    ModelCtor.hasOneRemoting(relationName, relation, define);
  } else if (
    relation.type === 'hasMany' ||
    relation.type === 'embedsMany' ||
    relation.type === 'referencesMany') {
    ModelCtor.hasManyRemoting(relationName, relation, define);
  }
}
...
```

#### <a name="apidoc.element.loopback.Checkpoint.isHiddenProperty"></a>[function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>isHiddenProperty (propertyName)](#apidoc.element.loopback.Checkpoint.isHiddenProperty)
- description and source-code
```javascript
isHiddenProperty = function (propertyName) {
  var Model = this;
  var settings = Model.definition && Model.definition.settings;
  var hiddenProperties = settings && (settings.hiddenProperties || settings.hidden);
  if (Array.isArray(hiddenProperties)) {
    // Cache the hidden properties as an object for quick lookup
    settings.hiddenProperties = {};
    for (var i = 0; i < hiddenProperties.length; i++) {
      settings.hiddenProperties[hiddenProperties[i]] = true;
    }
    hiddenProperties = settings.hiddenProperties;
  }
  if (hiddenProperties) {
    return hiddenProperties[propertyName];
  } else {
    return false;
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Checkpoint.isProtectedProperty"></a>[function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>isProtectedProperty (propertyName)](#apidoc.element.loopback.Checkpoint.isProtectedProperty)
- description and source-code
```javascript
isProtectedProperty = function (propertyName) {
  var Model = this;
  var settings = Model.definition && Model.definition.settings;
  var protectedProperties = settings && (settings.protectedProperties || settings.protected);
  if (Array.isArray(protectedProperties)) {
    // Cache the protected properties as an object for quick lookup
    settings.protectedProperties = {};
    for (var i = 0; i < protectedProperties.length; i++) {
      settings.protectedProperties[protectedProperties[i]] = true;
    }
    protectedProperties = settings.protectedProperties;
  }
  if (protectedProperties) {
    return protectedProperties[propertyName];
  } else {
    return false;
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Checkpoint.listenerCount"></a>[function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>listenerCount ()](#apidoc.element.loopback.Checkpoint.listenerCount)
- description and source-code
```javascript
listenerCount = function () { [native code] }
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Checkpoint.listeners"></a>[function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>listeners ()](#apidoc.element.loopback.Checkpoint.listeners)
- description and source-code
```javascript
listeners = function () { [native code] }
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Checkpoint.mixin"></a>[function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>mixin (anotherClass, options)](#apidoc.element.loopback.Checkpoint.mixin)
- description and source-code
```javascript
mixin = function (anotherClass, options) {
  if (typeof anotherClass === 'string') {
    this.modelBuilder.mixins.applyMixin(this, anotherClass, options);
  } else {
    if (anotherClass.prototype instanceof ModelBaseClass) {
      var props = anotherClass.definition.properties;
      for (var i in props) {
        if (this.definition.properties[i]) {
          continue;
        }
        this.defineProperty(i, props[i]);
      }
    }
    return jutil.mixin(this, anotherClass, options);
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Checkpoint.nestRemoting"></a>[function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>nestRemoting (relationName, options, filterCallback)](#apidoc.element.loopback.Checkpoint.nestRemoting)
- description and source-code
```javascript
nestRemoting = function (relationName, options, filterCallback) {
  if (typeof options === 'function' && !filterCallback) {
    filterCallback = options;
    options = {};
  }
  options = options || {};

  var regExp = /^__([^_]+)__([^_]+)$/;
  var relation = this.relations[relationName];
  if (relation && relation.modelTo && relation.modelTo.sharedClass) {
    var self = this;
    var sharedClass = this.sharedClass;
    var sharedToClass = relation.modelTo.sharedClass;
    var toModelName = relation.modelTo.modelName;

    var pathName = options.pathName || relation.options.path || relationName;
    var paramName = options.paramName || 'nk';

    var http = [].concat(sharedToClass.http || [])[0];
    var httpPath, acceptArgs;

    if (relation.multiple) {
      httpPath = pathName + '/:' + paramName;
      acceptArgs = [
        {
          arg: paramName, type: 'any', http: {source: 'path'},
          description: format('Foreign key for %s.',  relation.name),
          required: true,
        },
      ];
    } else {
      httpPath = pathName;
      acceptArgs = [];
    }

    if (httpPath[0] !== '/') {
      httpPath = '/' + httpPath;
    }

    // A method should return the method name to use, if it is to be
    // included as a nested method - a falsy return value will skip.
    var filter = filterCallback || options.filterMethod || function(method, relation) {
      var matches = method.name.match(regExp);
      if (matches) {
        return '__' + matches[1] + '__' + relation.name + '__' + matches[2];
      }
    };

    sharedToClass.methods().forEach(function(method) {
      var methodName;
      if (!method.isStatic && (methodName = filter(method, relation))) {
        var prefix = relation.multiple ? '__findById__' : '__get__';
        var getterName = options.getterName || (prefix + relationName);

        var getterFn = relation.modelFrom.prototype[getterName];
        if (typeof getterFn !== 'function') {
          throw new Error(g.f('Invalid remote method: '%s'', getterName));
        }

        var nestedFn = relation.modelTo.prototype[method.name];
        if (typeof nestedFn !== 'function') {
          throw new Error(g.f('Invalid remote method: '%s'', method.name));
        }

        var opts = {};

        opts.accepts = acceptArgs.concat(method.accepts || []);
        opts.returns = [].concat(method.returns || []);
        opts.description = method.description;
        opts.accessType = method.accessType;
        opts.rest = extend({}, method.rest || {});
        opts.rest.delegateTo = method;

        opts.http = [];
        var routes = [].concat(method.http || []);
        routes.forEach(function(route) {
          if (route.path) {
            var copy = extend({}, route);
            copy.path = httpPath + route.path;
            opts.http.push(copy);
          }
        });

        if (relation.multiple) {
          sharedClass.defineMethod(methodName, opts, function(fkId) {
            var args = Array.prototype.slice.call(arguments, 1);
            var last = args[args.length - 1];
            var cb = typeof last === 'function' ? last : null;
            this[getterName](fkId, function(err, inst) {
              if (err && cb) return cb(err);
              if (inst instanceof relation.modelTo) {
                try {
                  nestedFn.apply(inst, args);
                } catch (err) {
                  if (cb) return cb(err);
                }
              } else if (cb) {
                cb(err, null);
              }
            });
          }, method.isStatic);
        } else {
          sharedClass.defineMethod(methodName, opts, function() {
            var args = Array.prototype.slice.call(arguments);
            var last = args[args.length - 1];
            var cb = typeof last === 'function' ? last : null;
            this[getterName](function(err, inst) {
              if (err && cb) return cb(err);
              if (inst instanceof relation.modelTo) {
                try {
                  nestedFn.apply(inst, args);
                } catch (err) {
                  if (cb) return ...
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Checkpoint.notifyObserversAround"></a>[function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>notifyObserversAround (operation, context, fn, callback)](#apidoc.element.loopback.Checkpoint.notifyObserversAround)
- description and source-code
```javascript
notifyObserversAround = function (operation, context, fn, callback) {
  var self = this;
  context = context || {};
  // Add callback to the context object so that an observer can skip other
  // ones by calling the callback function directly and not calling next
  if (context.end === undefined) {
    context.end = callback;
  }
  // First notify before observers
  return self.notifyObserversOf('before ' + operation, context,
    function(err, context) {
      if (err) return callback(err);

      function cbForWork(err) {
        var args = [].slice.call(arguments, 0);
        if (err) return callback.apply(null, args);
        // Find the list of params from the callback in addition to err
        var returnedArgs = args.slice(1);
        // Set up the array of results
        context.results = returnedArgs;
        // Notify after observers
        self.notifyObserversOf('after ' + operation, context,
          function(err, context) {
            if (err) return callback(err, context);
            var results = returnedArgs;
            if (context && Array.isArray(context.results)) {
              // Pickup the results from context
              results = context.results;
            }
            // Build the list of params for final callback
            var args = [err].concat(results);
            callback.apply(null, args);
          });
      }

      if (fn.length === 1) {
        // fn(done)
        fn(cbForWork);
      } else {
        // fn(context, done)
        fn(context, cbForWork);
      }
    });
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Checkpoint.notifyObserversOf"></a>[function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>notifyObserversOf (operation, context, callback)](#apidoc.element.loopback.Checkpoint.notifyObserversOf)
- description and source-code
```javascript
notifyObserversOf = function (operation, context, callback) {
  var self = this;
  if (!callback) callback = utils.createPromiseCallback();

  function createNotifier(op) {
    return function(ctx, done) {
      if (typeof ctx === 'function' && done === undefined) {
        done = ctx;
        ctx = context;
      }
      self.notifyObserversOf(op, context, done);
    };
  }

  if (Array.isArray(operation)) {
    var tasks = [];
    for (var i = 0, n = operation.length; i < n; i++) {
      tasks.push(createNotifier(operation[i]));
    }
    return async.waterfall(tasks, callback);
  }

  var observers = this._observers && this._observers[operation];

  this._notifyBaseObservers(operation, context, function doNotify(err) {
    if (err) return callback(err, context);
    if (!observers || !observers.length) return callback(null, context);

    async.eachSeries(
      observers,
      function notifySingleObserver(fn, next) {
        var retval = fn(context, next);
        if (retval && typeof retval.then === 'function') {
          retval.then(
            function() { next(); return null; },
            next // error handler
          );
        }
      },
      function(err) { callback(err, context); }
    );
  });
  return callback.promise;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Checkpoint.observe"></a>[function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>observe (operation, listener)](#apidoc.element.loopback.Checkpoint.observe)
- description and source-code
```javascript
observe = function (operation, listener) {
  this._observers = this._observers || {};
  if (!this._observers[operation]) {
    this._observers[operation] = [];
  }

  this._observers[operation].push(listener);
}
```
- example usage
```shell
...
var idType = idProp && idProp.type;
var idDefn = idProp && idProp.defaultFn;
if (idType !== String || !(idDefn === 'uuid' || idDefn === 'guid')) {
  deprecated('The model ' + this.modelName + ' is tracking changes, ' +
    'which requires a string id with GUID/UUID default value.');
}

Model.observe('after save', rectifyOnSave);

Model.observe('after delete', rectifyOnDelete);

// Only run if the run time is server
// Can switch off cleanup by setting the interval to -1
if (runtime.isServer && cleanupInterval > 0) {
  // initial cleanup
...
```

#### <a name="apidoc.element.loopback.Checkpoint.on"></a>[function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>on ()](#apidoc.element.loopback.Checkpoint.on)
- description and source-code
```javascript
on = function () { [native code] }
```
- example usage
```shell
...
    this.remotes().addClass(Model.Change.sharedClass);
  }
  clearHandlerCache(this);
  this.emit('modelRemoted', Model.sharedClass);
}

var self = this;
Model.on('remoteMethodDisabled', function(model, methodName) {
  self.emit('remoteMethodDisabled', model, methodName);
});
Model.on('remoteMethodAdded', function(model) {
  self.emit('remoteMethodAdded', model);
});

Model.shared = isPublic;
...
```

#### <a name="apidoc.element.loopback.Checkpoint.once"></a>[function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>once ()](#apidoc.element.loopback.Checkpoint.once)
- description and source-code
```javascript
once = function () { [native code] }
```
- example usage
```shell
...
    remotes.afterError(className + '.' + name, fn);
  });
};

ModelCtor._runWhenAttachedToApp = function(fn) {
  if (this.app) return fn(this.app);
  var self = this;
  self.once('attached', function() {
    fn(self.app);
  });
};

if ('injectOptionsFromRemoteContext' in options) {
  console.warn(g.f(
    '%s is using model setting %s which is no longer available.',
...
```

#### <a name="apidoc.element.loopback.Checkpoint.patchOrCreate"></a>[function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>patchOrCreate (data, callback)](#apidoc.element.loopback.Checkpoint.patchOrCreate)
- description and source-code
```javascript
function upsert(data, callback) {
  throwNotAttached(this.modelName, 'upsert');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Checkpoint.patchOrCreateWithWhere"></a>[function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>patchOrCreateWithWhere (where, data, callback)](#apidoc.element.loopback.Checkpoint.patchOrCreateWithWhere)
- description and source-code
```javascript
function upsertWithWhere(where, data, callback) {
  throwNotAttached(this.modelName, 'upsertWithWhere');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Checkpoint.prependListener"></a>[function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>prependListener ()](#apidoc.element.loopback.Checkpoint.prependListener)
- description and source-code
```javascript
prependListener = function () { [native code] }
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Checkpoint.prependOnceListener"></a>[function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>prependOnceListener ()](#apidoc.element.loopback.Checkpoint.prependOnceListener)
- description and source-code
```javascript
prependOnceListener = function () { [native code] }
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Checkpoint.rectifyAllChanges"></a>[function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>rectifyAllChanges (callback)](#apidoc.element.loopback.Checkpoint.rectifyAllChanges)
- description and source-code
```javascript
rectifyAllChanges = function (callback) {
  this.getChangeModel().rectifyAll(callback);
}
```
- example usage
```shell
...
    cleanup();

    // cleanup
    setInterval(cleanup, cleanupInterval);
  }

  function cleanup() {
    Model.rectifyAllChanges(function(err) {
      if (err) {
        Model.handleChangeError(err, 'cleanup');
      }
    });
  }
};
...
```

#### <a name="apidoc.element.loopback.Checkpoint.rectifyChange"></a>[function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>rectifyChange (id, callback)](#apidoc.element.loopback.Checkpoint.rectifyChange)
- description and source-code
```javascript
rectifyChange = function (id, callback) {
  var Change = this.getChangeModel();
  Change.rectifyModelChanges(this.modelName, [id], callback);
}
```
- example usage
```shell
...
  debug('rectifyOnSave %s -> ' + (id ? 'id %j' : '%s'),
    ctx.Model.modelName, id ? id : 'ALL');
  debug('context instance:%j currentInstance:%j where:%j data %j',
    ctx.instance, ctx.currentInstance, ctx.where, ctx.data);
}

if (id) {
  ctx.Model.rectifyChange(id, reportErrorAndNext);
} else {
  ctx.Model.rectifyAllChanges(reportErrorAndNext);
}

function reportErrorAndNext(err) {
  if (err) {
    ctx.Model.handleChangeError(err, 'after save');
...
```

#### <a name="apidoc.element.loopback.Checkpoint.registerProperty"></a>[function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>registerProperty (propertyName)](#apidoc.element.loopback.Checkpoint.registerProperty)
- description and source-code
```javascript
registerProperty = function (propertyName) {
  var properties = modelDefinition.build();
  var prop = properties[propertyName];
  var DataType = prop.type;
  if (!DataType) {
    throw new Error(g.f('Invalid type for property %s', propertyName));
  }

  if (prop.required) {
    var requiredOptions = typeof prop.required === 'object' ? prop.required : undefined;
    ModelClass.validatesPresenceOf(propertyName, requiredOptions);
  }

  Object.defineProperty(ModelClass.prototype, propertyName, {
    get: function() {
      if (ModelClass.getter[propertyName]) {
        return ModelClass.getter[propertyName].call(this); // Try getter first
      } else {
        return this.__data && this.__data[propertyName]; // Try __data
      }
    },
    set: function(value) {
      var DataType = ModelClass.definition.properties[propertyName].type;
      if (Array.isArray(DataType) || DataType === Array) {
        DataType = List;
      } else if (DataType === Date) {
        DataType = DateType;
      } else if (DataType === Boolean) {
        DataType = BooleanType;
      } else if (typeof DataType === 'string') {
        DataType = modelBuilder.resolveType(DataType);
      }

      var persistUndefinedAsNull = ModelClass.definition.settings.persistUndefinedAsNull;
      if (value === undefined && persistUndefinedAsNull) {
        value = null;
      }

      if (ModelClass.setter[propertyName]) {
        ModelClass.setter[propertyName].call(this, value); // Try setter first
      } else {
        this.__data = this.__data || {};
        if (value === null || value === undefined) {
          this.__data[propertyName] = value;
        } else {
          if (DataType === List) {
            this.__data[propertyName] = DataType(value, properties[propertyName].type, this.__data);
          } else {
            // Assume the type constructor handles Constructor() call
            // If not, we should call new DataType(value).valueOf();
            this.__data[propertyName] = (value instanceof DataType) ? value : DataType(value);
          }
        }
      }
    },
    configurable: true,
    enumerable: true,
  });

  // FIXME: [rfeng] Do we need to keep the raw data?
  // Use $ as the prefix to avoid conflicts with properties such as _id
  Object.defineProperty(ModelClass.prototype, '$' + propertyName, {
    get: function() {
      return this.__data && this.__data[propertyName];
    },
    set: function(value) {
      if (!this.__data) {
        this.__data = {};
      }
      this.__data[propertyName] = value;
    },
    configurable: true,
    enumerable: false,
  });
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Checkpoint.remoteMethod"></a>[function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>remoteMethod (name, options)](#apidoc.element.loopback.Checkpoint.remoteMethod)
- description and source-code
```javascript
remoteMethod = function (name, options) {
  if (options.isStatic === undefined) {
    var m = name.match(/^prototype\.(.*)$/);
    options.isStatic = !m;
    name = options.isStatic ? name : m[1];
  }

  if (options.accepts) {
    options = extend({}, options);
    options.accepts = setupOptionsArgs(options.accepts);
  }

  this.sharedClass.defineMethod(name, options);
  this.emit('remoteMethodAdded', this.sharedClass);
}
```
- example usage
```shell
...
  /**
* Enable remote invocation for the specified method.
* See [Remote methods](http://loopback.io/doc/en/lb2/Remote-methods.html) for more information.
*
* Static method example:
* '''js
* Model.myMethod();
* Model.remoteMethod('myMethod');
* '''
*
* @param {String} name The name of the method.
* @param {Object} options The remoting options.
* See [Remote methods - Options](http://loopback.io/doc/en/lb2/Remote-methods.html#options).
*/
...
```

#### <a name="apidoc.element.loopback.Checkpoint.remove"></a>[function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>remove (where, cb)](#apidoc.element.loopback.Checkpoint.remove)
- description and source-code
```javascript
function destroyAll(where, cb) {
  throwNotAttached(this.modelName, 'destroyAll');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Checkpoint.removeAllListeners"></a>[function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>removeAllListeners ()](#apidoc.element.loopback.Checkpoint.removeAllListeners)
- description and source-code
```javascript
removeAllListeners = function () { [native code] }
```
- example usage
```shell
...

var idName = this.getIdName();
var Model = this;
var changes = new PassThrough({objectMode: true});
var writeable = true;

changes.destroy = function() {
  changes.removeAllListeners('error');
  changes.removeAllListeners('end');
  writeable = false;
  changes = null;
};

changes.on('error', function() {
  writeable = false;
...
```

#### <a name="apidoc.element.loopback.Checkpoint.removeById"></a>[function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>removeById (id, cb)](#apidoc.element.loopback.Checkpoint.removeById)
- description and source-code
```javascript
function deleteById(id, cb) {
  throwNotAttached(this.modelName, 'deleteById');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Checkpoint.removeListener"></a>[function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>removeListener ()](#apidoc.element.loopback.Checkpoint.removeListener)
- description and source-code
```javascript
removeListener = function () { [native code] }
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Checkpoint.removeObserver"></a>[function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>removeObserver (operation, listener)](#apidoc.element.loopback.Checkpoint.removeObserver)
- description and source-code
```javascript
removeObserver = function (operation, listener) {
  if (!(this._observers && this._observers[operation])) return;

  var index = this._observers[operation].indexOf(listener);
  if (index !== -1) {
    return this._observers[operation].splice(index, 1);
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Checkpoint.replaceById"></a>[function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>replaceById (id, data, cb)](#apidoc.element.loopback.Checkpoint.replaceById)
- description and source-code
```javascript
function replaceById(id, data, cb) {
  throwNotAttached(this.modelName, 'replaceById');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Checkpoint.replaceOrCreate"></a>[function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>replaceOrCreate (data, callback)](#apidoc.element.loopback.Checkpoint.replaceOrCreate)
- description and source-code
```javascript
function replaceOrCreate(data, callback) {
  throwNotAttached(this.modelName, 'replaceOrCreate');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Checkpoint.replicate"></a>[function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>replicate (since, targetModel, options, callback)](#apidoc.element.loopback.Checkpoint.replicate)
- description and source-code
```javascript
replicate = function (since, targetModel, options, callback) {
  var lastArg = arguments[arguments.length - 1];

  if (typeof lastArg === 'function' && arguments.length > 1) {
    callback = lastArg;
  }

  if (typeof since === 'function' && since.modelName) {
    targetModel = since;
    since = -1;
  }

  if (typeof since !== 'object') {
    since = {source: since, target: since};
  }

  if (typeof options === 'function') {
    options = {};
  }

  options = options || {};

  var sourceModel = this;
  callback = callback || utils.createPromiseCallback();

  debug('replicating %s since %s to %s since %s',
    sourceModel.modelName,
    since.source,
    targetModel.modelName,
    since.target);
  if (options.filter) {
    debug('\twith filter %j', options.filter);
  }

  // In order to avoid a race condition between the replication and
  // other clients modifying the data, we must create the new target
  // checkpoint as the first step of the replication process.
  // As a side-effect of that, the replicated changes are associated
  // with the new target checkpoint. This is actually desired behaviour,
  // because that way clients replicating *from* the target model
  // since the new checkpoint will pick these changes up.
  // However, it increases the likelihood of (false) conflicts being detected.
  // In order to prevent that, we run the replication multiple times,
  // until no changes were replicated, but at most MAX_ATTEMPTS times
  // to prevent starvation. In most cases, the second run will find no changes
  // to replicate and we are done.
  var MAX_ATTEMPTS = 3;

  run(1, since);
  return callback.promise;

  function run(attempt, since) {
    debug('\titeration #%s', attempt);
    tryReplicate(sourceModel, targetModel, since, options, next);

    function next(err, conflicts, cps, updates) {
      var finished = err || conflicts.length ||
        !updates || updates.length === 0 ||
        attempt >= MAX_ATTEMPTS;

      if (finished)
        return callback(err, conflicts, cps);
      run(attempt + 1, cps);
    }
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Checkpoint.scopeRemoting"></a>[function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>scopeRemoting (scopeName, scope, define)](#apidoc.element.loopback.Checkpoint.scopeRemoting)
- description and source-code
```javascript
scopeRemoting = function (scopeName, scope, define) {
  var pathName =
    (scope.options && scope.options.http && scope.options.http.path) || scopeName;

  var isStatic = scope.isStatic;
  var toModelName = scope.modelTo.modelName;

  // https://github.com/strongloop/loopback/issues/811
  // Check if the scope is for a hasMany relation
  var relation = this.relations[scopeName];
  if (relation && relation.modelTo) {
    // For a relation with through model, the toModelName should be the one
    // from the target model
    toModelName = relation.modelTo.modelName;
  }

  define('__get__' + scopeName, {
    isStatic: isStatic,
    http: {verb: 'get', path: '/' + pathName},
    accepts: [
      {arg: 'filter', type: 'object'},
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Queries %s of %s.', scopeName, this.modelName),
    accessType: 'READ',
    returns: {arg: scopeName, type: [toModelName], root: true},
  });

  define('__create__' + scopeName, {
    isStatic: isStatic,
    http: {verb: 'post', path: '/' + pathName},
    accepts: [
      {
        arg: 'data',
        type: 'object',
        allowArray: true,
        model: toModelName,
        http: {source: 'body'},
      },
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Creates a new instance in %s of this model.', scopeName),
    accessType: 'WRITE',
    returns: {arg: 'data', type: toModelName, root: true},
  });

  define('__delete__' + scopeName, {
    isStatic: isStatic,
    http: {verb: 'delete', path: '/' + pathName},
    accepts: [
      {
        arg: 'where', type: 'object',
        // The "where" argument is not exposed in the REST API
        // but we need to provide a value so that we can pass "options"
        // as the third argument.
        http: function(ctx) { return undefined; },
      },
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Deletes all %s of this model.', scopeName),
    accessType: 'WRITE',
  });

  define('__count__' + scopeName, {
    isStatic: isStatic,
    http: {verb: 'get', path: '/' + pathName + '/count'},
    accepts: [
      {
        arg: 'where', type: 'object',
        description: 'Criteria to match model instances',
      },
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Counts %s of %s.', scopeName, this.modelName),
    accessType: 'READ',
    returns: {arg: 'count',  type: 'number'},
  });
}
```
- example usage
```shell
...
        ModelCtor.hasManyRemoting(relationName, relation, define);
      }
    }

    // handle scopes
    var scopes = ModelCtor.scopes || {};
    for (var scopeName in scopes) {
      ModelCtor.scopeRemoting(scopeName, scopes[scopeName], define);
    }
  });

  return ModelCtor;
};

/*!
...
```

#### <a name="apidoc.element.loopback.Checkpoint.setMaxListeners"></a>[function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>setMaxListeners ()](#apidoc.element.loopback.Checkpoint.setMaxListeners)
- description and source-code
```javascript
setMaxListeners = function () { [native code] }
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Checkpoint.setup"></a>[function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>setup ()](#apidoc.element.loopback.Checkpoint.setup)
- description and source-code
```javascript
function setupPersistedModel() {
  // call Model.setup first
  Model.setup.call(this);

  var PersistedModel = this;

  // enable change tracking (usually for replication)
  if (this.settings.trackChanges) {
    PersistedModel._defineChangeModel();
    PersistedModel.once('dataSourceAttached', function() {
      PersistedModel.enableChangeTracking();
    });
  } else if (this.settings.enableRemoteReplication) {
    PersistedModel._defineChangeModel();
  }

  PersistedModel.setupRemoting();
}
```
- example usage
```shell
...
  Model.createOptionsFromRemotingContext = function(ctx) {
    return {
      accessToken: ctx.req.accessToken,
    };
  };

  // setup the initial model
  Model.setup();

  return Model;
};
...
```

#### <a name="apidoc.element.loopback.Checkpoint.setupRemoting"></a>[function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>setupRemoting ()](#apidoc.element.loopback.Checkpoint.setupRemoting)
- description and source-code
```javascript
setupRemoting = function () {
  var PersistedModel = this;
  var typeName = PersistedModel.modelName;
  var options = PersistedModel.settings;

  // This is just for LB 3.x
  options.replaceOnPUT = options.replaceOnPUT !== false;

  function setRemoting(scope, name, options) {
    var fn = scope[name];
    fn._delegate = true;
    options.isStatic = scope === PersistedModel;
    PersistedModel.remoteMethod(name, options);
  }

  setRemoting(PersistedModel, 'create', {
    description: 'Create a new instance of the model and persist it into the data source.',
    accessType: 'WRITE',
    accepts: [
      {
        arg: 'data', type: 'object', model: typeName, allowArray: true,
        description: 'Model instance data',
        http: {source: 'body'},
      },
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    returns: {arg: 'data', type: typeName, root: true},
    http: {verb: 'post', path: '/'},
  });

  var upsertOptions = {
    aliases: ['upsert', 'updateOrCreate'],
    description: 'Patch an existing model instance or insert a new one ' +
      'into the data source.',
    accessType: 'WRITE',
    accepts: [
      {
        arg: 'data', type: 'object', model: typeName, http: {source: 'body'},
        description: 'Model instance data',
      },
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    returns: {arg: 'data', type: typeName, root: true},
    http: [{verb: 'patch', path: '/'}],
  };

  if (!options.replaceOnPUT) {
    upsertOptions.http.unshift({verb: 'put', path: '/'});
  }
  setRemoting(PersistedModel, 'patchOrCreate', upsertOptions);

  var replaceOrCreateOptions = {
    description: 'Replace an existing model instance or insert a new one into the data source.',
    accessType: 'WRITE',
    accepts: [
      {
        arg: 'data', type: 'object', model: typeName,
        http: {source: 'body'},
        description: 'Model instance data',
      },
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    returns: {arg: 'data', type: typeName, root: true},
    http: [{verb: 'post', path: '/replaceOrCreate'}],
  };

  if (options.replaceOnPUT) {
    replaceOrCreateOptions.http.push({verb: 'put', path: '/'});
  }

  setRemoting(PersistedModel, 'replaceOrCreate', replaceOrCreateOptions);

  setRemoting(PersistedModel, 'upsertWithWhere', {
    aliases: ['patchOrCreateWithWhere'],
    description: 'Update an existing model instance or insert a new one into ' +
      'the data source based on the where criteria.',
    accessType: 'WRITE',
    accepts: [
      {arg: 'where', type: 'object', http: {source: 'query'},
        description: 'Criteria to match model instances'},
      {arg: 'data', type: 'object', model: typeName, http: {source: 'body'},
        description: 'An object of model property name/value pairs'},
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    returns: {arg: 'data', type: typeName, root: true},
    http: {verb: 'post', path: '/upsertWithWhere'},
  });

  setRemoting(PersistedModel, 'exists', {
    description: 'Check whether a model instance exists in the data source.',
    accessType: 'READ',
    accepts: [
      {arg: 'id', type: 'any', description: 'Model id', required: true},
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    returns: {arg: 'exists', type: 'boolean'},
    http: [
      {verb: 'get', path: '/:id/exists'},
      {verb: 'head', path: '/:id'},
    ],
    rest: {
      // After hook to map exists to 200/404 for HEAD
      after: function(ctx, cb) {
        if (ctx.req.method === 'GET') {
          // For GET, return {exists: true|false} as is
          return cb();
        }
        if (!ctx.result.exists) {
          var modelName = ctx.method.sharedClass.name;
          var id = ctx.getArgByName('id');
          var msg = 'Unknown "' + modelName + '" id "' + id + '".';
          var error = new Error(msg);
          error.statusCode = error.status = 404;
          error.code = 'MODEL_NOT_FOUND';
          cb(error);
        } else {
          cb();
        } ...
```
- example usage
```shell
...
    PersistedModel.once('dataSourceAttached', function() {
      PersistedModel.enableChangeTracking();
    });
  } else if (this.settings.enableRemoteReplication) {
    PersistedModel._defineChangeModel();
  }

  PersistedModel.setupRemoting();
};

/*!
 * Throw an error telling the user that the method is not available and why.
 */

function throwNotAttached(modelName, methodName) {
...
```

#### <a name="apidoc.element.loopback.Checkpoint.sharedCtor"></a>[function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>sharedCtor (data, id, options, fn)](#apidoc.element.loopback.Checkpoint.sharedCtor)
- description and source-code
```javascript
sharedCtor = function (data, id, options, fn) {
  var ModelCtor = this;

  var isRemoteInvocationWithOptions = typeof data !== 'object' &&
    typeof id === 'object' &&
    typeof options === 'function';
  if (isRemoteInvocationWithOptions) {
    // sharedCtor(id, options, fn)
    fn = options;
    options = id;
    id = data;
    data = null;
  } else if (typeof data === 'function') {
    // sharedCtor(fn)
    fn = data;
    data = null;
    id = null;
    options = null;
  } else if (typeof id === 'function') {
    // sharedCtor(data, fn)
    // sharedCtor(id, fn)
    fn = id;
    options = null;

    if (typeof data !== 'object') {
      id = data;
      data = null;
    } else {
      id = null;
    }
  }

  if (id && data) {
    var model = new ModelCtor(data);
    model.id = id;
    fn(null, model);
  } else if (data) {
    fn(null, new ModelCtor(data));
  } else if (id) {
    var filter = {};
    ModelCtor.findById(id, filter, options, function(err, model) {
      if (err) {
        fn(err);
      } else if (model) {
        fn(null, model);
      } else {
        err = new Error(g.f('could not find a model with apidoc.element.loopback.Checkpoint.sharedCtor %s', id));
        err.statusCode = 404;
        err.code = 'MODEL_NOT_FOUND';
        fn(err);
      }
    });
  } else {
    fn(new Error(g.f('must specify an apidoc.element.loopback.Checkpoint.sharedCtor or {{data}}')));
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Checkpoint.super_"></a>[function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>super_ (data, options)](#apidoc.element.loopback.Checkpoint.super_)
- description and source-code
```javascript
function ModelConstructor(data, options) {
  if (!(this instanceof ModelConstructor)) {
    return new ModelConstructor(data, options);
  }
  if (ModelClass.settings.unresolved) {
    throw new Error(g.f('Model %s is not defined.', ModelClass.modelName));
  }
  ModelBaseClass.apply(this, arguments);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Checkpoint.update"></a>[function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>update (where, data, cb)](#apidoc.element.loopback.Checkpoint.update)
- description and source-code
```javascript
function updateAll(where, data, cb) {
  throwNotAttached(this.modelName, 'updateAll');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Checkpoint.updateAll"></a>[function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>updateAll (where, data, cb)](#apidoc.element.loopback.Checkpoint.updateAll)
- description and source-code
```javascript
function updateAll(where, data, cb) {
  throwNotAttached(this.modelName, 'updateAll');
}
```
- example usage
```shell
...

  /**
* Update multiple instances that match the where clause.
*
* Example:
*
*'''js
* Employee.updateAll({managerId: 'x001'}, {managerId: 'x002'}, function(err, info) {
*     ...
* });
* '''
*
* @param {Object} [where] Optional 'where' filter, like
* '''
* { key: val, key2: {gt: 'val2'}, ...}
...
```

#### <a name="apidoc.element.loopback.Checkpoint.updateLastChange"></a>[function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>updateLastChange (id, data, cb)](#apidoc.element.loopback.Checkpoint.updateLastChange)
- description and source-code
```javascript
updateLastChange = function (id, data, cb) {
  var self = this;
  this.findLastChange(id, function(err, inst) {
    if (err) return cb(err);
    if (!inst) {
      err = new Error(g.f('No change record found for %s with id %s',
        self.modelName, id));
      err.statusCode = 404;
      return cb(err);
    }

    inst.updateAttributes(data, cb);
  });
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Checkpoint.updateOrCreate"></a>[function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>updateOrCreate (data, callback)](#apidoc.element.loopback.Checkpoint.updateOrCreate)
- description and source-code
```javascript
function upsert(data, callback) {
  throwNotAttached(this.modelName, 'upsert');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Checkpoint.upsert"></a>[function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>upsert (data, callback)](#apidoc.element.loopback.Checkpoint.upsert)
- description and source-code
```javascript
function upsert(data, callback) {
  throwNotAttached(this.modelName, 'upsert');
}
```
- example usage
```shell
...
  }
});

// then save
function save() {
  inst.trigger('save', function(saveDone) {
    inst.trigger('update', function(updateDone) {
      Model.upsert(inst, function(err) {
        inst._initProperties(data);
        updateDone.call(inst, function() {
          saveDone.call(inst, function() {
            callback(err, inst);
          });
        });
      });
...
```

#### <a name="apidoc.element.loopback.Checkpoint.upsertWithWhere"></a>[function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>upsertWithWhere (where, data, callback)](#apidoc.element.loopback.Checkpoint.upsertWithWhere)
- description and source-code
```javascript
function upsertWithWhere(where, data, callback) {
  throwNotAttached(this.modelName, 'upsertWithWhere');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Checkpoint.validate"></a>[function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>validate ()](#apidoc.element.loopback.Checkpoint.validate)
- description and source-code
```javascript
validate = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Checkpoint.validateAsync"></a>[function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>validateAsync ()](#apidoc.element.loopback.Checkpoint.validateAsync)
- description and source-code
```javascript
validateAsync = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Checkpoint.validatesAbsenceOf"></a>[function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>validatesAbsenceOf ()](#apidoc.element.loopback.Checkpoint.validatesAbsenceOf)
- description and source-code
```javascript
validatesAbsenceOf = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Checkpoint.validatesExclusionOf"></a>[function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>validatesExclusionOf ()](#apidoc.element.loopback.Checkpoint.validatesExclusionOf)
- description and source-code
```javascript
validatesExclusionOf = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Checkpoint.validatesFormatOf"></a>[function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>validatesFormatOf ()](#apidoc.element.loopback.Checkpoint.validatesFormatOf)
- description and source-code
```javascript
validatesFormatOf = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Checkpoint.validatesInclusionOf"></a>[function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>validatesInclusionOf ()](#apidoc.element.loopback.Checkpoint.validatesInclusionOf)
- description and source-code
```javascript
validatesInclusionOf = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Checkpoint.validatesLengthOf"></a>[function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>validatesLengthOf ()](#apidoc.element.loopback.Checkpoint.validatesLengthOf)
- description and source-code
```javascript
validatesLengthOf = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Checkpoint.validatesNumericalityOf"></a>[function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>validatesNumericalityOf ()](#apidoc.element.loopback.Checkpoint.validatesNumericalityOf)
- description and source-code
```javascript
validatesNumericalityOf = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Checkpoint.validatesPresenceOf"></a>[function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>validatesPresenceOf ()](#apidoc.element.loopback.Checkpoint.validatesPresenceOf)
- description and source-code
```javascript
validatesPresenceOf = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Checkpoint.validatesUniquenessOf"></a>[function <span class="apidocSignatureSpan">loopback.Checkpoint.</span>validatesUniquenessOf ()](#apidoc.element.loopback.Checkpoint.validatesUniquenessOf)
- description and source-code
```javascript
validatesUniquenessOf = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```



# <a name="apidoc.module.loopback.Checkpoint.settings"></a>[module loopback.Checkpoint.settings](#apidoc.module.loopback.Checkpoint.settings)

#### <a name="apidoc.element.loopback.Checkpoint.settings.base"></a>[function <span class="apidocSignatureSpan">loopback.Checkpoint.settings.</span>base (data, options)](#apidoc.element.loopback.Checkpoint.settings.base)
- description and source-code
```javascript
function ModelConstructor(data, options) {
  if (!(this instanceof ModelConstructor)) {
    return new ModelConstructor(data, options);
  }
  if (ModelClass.settings.unresolved) {
    throw new Error(g.f('Model %s is not defined.', ModelClass.modelName));
  }
  ModelBaseClass.apply(this, arguments);
}
```
- example usage
```shell
n/a
```



# <a name="apidoc.module.loopback.Checkpoint.sharedClass"></a>[module loopback.Checkpoint.sharedClass](#apidoc.module.loopback.Checkpoint.sharedClass)

#### <a name="apidoc.element.loopback.Checkpoint.sharedClass.ctor"></a>[function <span class="apidocSignatureSpan">loopback.Checkpoint.sharedClass.</span>ctor (data, options)](#apidoc.element.loopback.Checkpoint.sharedClass.ctor)
- description and source-code
```javascript
function ModelConstructor(data, options) {
  if (!(this instanceof ModelConstructor)) {
    return new ModelConstructor(data, options);
  }
  if (ModelClass.settings.unresolved) {
    throw new Error(g.f('Model %s is not defined.', ModelClass.modelName));
  }
  ModelBaseClass.apply(this, arguments);
}
```
- example usage
```shell
n/a
```



# <a name="apidoc.module.loopback.Connector"></a>[module loopback.Connector](#apidoc.module.loopback.Connector)

#### <a name="apidoc.element.loopback.Connector.Connector"></a>[function <span class="apidocSignatureSpan">loopback.</span>Connector (options)](#apidoc.element.loopback.Connector.Connector)
- description and source-code
```javascript
function Connector(options) {
  EventEmitter.apply(this, arguments);
  this.options = options;

  debug('created with options', options);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Connector._createJDBAdapter"></a>[function <span class="apidocSignatureSpan">loopback.Connector.</span>_createJDBAdapter (jdbModule)](#apidoc.element.loopback.Connector._createJDBAdapter)
- description and source-code
```javascript
_createJDBAdapter = function (jdbModule) {
  var fauxSchema = {};
  jdbModule.initialize(fauxSchema, function() {
    // connected
  });
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Connector.super_"></a>[function <span class="apidocSignatureSpan">loopback.Connector.</span>super_ ()](#apidoc.element.loopback.Connector.super_)
- description and source-code
```javascript
function EventEmitter() {
  EventEmitter.init.call(this);
}
```
- example usage
```shell
n/a
```



# <a name="apidoc.module.loopback.Connector.prototype"></a>[module loopback.Connector.prototype](#apidoc.module.loopback.Connector.prototype)

#### <a name="apidoc.element.loopback.Connector.prototype._addCrudOperationsFromJDBAdapter"></a>[function <span class="apidocSignatureSpan">loopback.Connector.prototype.</span>_addCrudOperationsFromJDBAdapter (connector)](#apidoc.element.loopback.Connector.prototype._addCrudOperationsFromJDBAdapter)
- description and source-code
```javascript
_addCrudOperationsFromJDBAdapter = function (connector) {

}
```
- example usage
```shell
n/a
```



# <a name="apidoc.module.loopback.DataSource"></a>[module loopback.DataSource](#apidoc.module.loopback.DataSource)

#### <a name="apidoc.element.loopback.DataSource.DataSource"></a>[function <span class="apidocSignatureSpan">loopback.</span>DataSource (name, settings, modelBuilder)](#apidoc.element.loopback.DataSource.DataSource)
- description and source-code
```javascript
function DataSource(name, settings, modelBuilder) {
  if (!(this instanceof DataSource)) {
    return new DataSource(name, settings);
  }

  // Check if the settings object is passed as the first argument
  if (typeof name === 'object' && settings === undefined) {
    settings = name;
    name = undefined;
  }

  // Check if the first argument is a URL
  if (typeof name === 'string' && name.indexOf('://') !== -1) {
    name = utils.parseSettings(name);
  }

  // Check if the settings is in the form of URL string
  if (typeof settings === 'string' && settings.indexOf('://') !== -1) {
    settings = utils.parseSettings(settings);
  }

  this.modelBuilder = modelBuilder || new ModelBuilder();
  this.models = this.modelBuilder.models;
  this.definitions = this.modelBuilder.definitions;
  this.juggler = juggler;

  // operation metadata
  // Initialize it before calling setup as the connector might register operations
  this._operations = {};

  this.setup(name, settings);

  this._setupConnector();

  // connector
  var connector = this.connector;

  // DataAccessObject - connector defined or supply the default
  var dao = (connector && connector.DataAccessObject) || this.constructor.DataAccessObject;
  this.DataAccessObject = function() {
  };

  // define DataAccessObject methods
  Object.keys(dao).forEach(function(name) {
    var fn = dao[name];
    this.DataAccessObject[name] = fn;

    if (typeof fn === 'function') {
      this.defineOperation(name, {
        accepts: fn.accepts,
        'returns': fn.returns,
        http: fn.http,
        remoteEnabled: fn.shared ? true : false,
        scope: this.DataAccessObject,
        fnName: name,
      });
    }
  }.bind(this));

  // define DataAccessObject.prototype methods
  Object.keys(dao.prototype).forEach(function(name) {
    var fn = dao.prototype[name];
    this.DataAccessObject.prototype[name] = fn;
    if (typeof fn === 'function') {
      this.defineOperation(name, {
        prototype: true,
        accepts: fn.accepts,
        'returns': fn.returns,
        http: fn.http,
        remoteEnabled: fn.shared ? true : false,
        scope: this.DataAccessObject.prototype,
        fnName: name,
      });
    }
  }.bind(this));
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.DataSource.Any"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.</span>Any (value)](#apidoc.element.loopback.DataSource.Any)
- description and source-code
```javascript
function Any(value) {
  if (!(this instanceof Any)) {
    return value;
  }
  this.value = value;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.DataSource.DataAccessObject"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.</span>DataAccessObject ()](#apidoc.element.loopback.DataSource.DataAccessObject)
- description and source-code
```javascript
function DataAccessObject() {
  if (DataAccessObject._mixins) {
    var self = this;
    var args = arguments;
    DataAccessObject._mixins.forEach(function(m) {
      m.call(self, args);
    });
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.DataSource.JSON"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.</span>JSON (value)](#apidoc.element.loopback.DataSource.JSON)
- description and source-code
```javascript
function JSON(value) {
  if (!(this instanceof JSON)) {
    return value;
  }
  this.value = value;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.DataSource.Text"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.</span>Text (value)](#apidoc.element.loopback.DataSource.Text)
- description and source-code
```javascript
function Text(value) {
  if (!(this instanceof Text)) {
    return value;
  }
  this.value = value;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.DataSource._resolveConnector"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.</span>_resolveConnector (name, loader)](#apidoc.element.loopback.DataSource._resolveConnector)
- description and source-code
```javascript
_resolveConnector = function (name, loader) {
  var names = connectorModuleNames(name);
  var connector = tryModules(names, loader);
  var error = null;
  if (!connector) {
    error = g.f('\nWARNING: {{LoopBack}} connector "%s" is not installed ' +
      'as any of the following modules:\n\n %s\n\nTo fix, run:\n\n    {{npm install %s --save}}\n',
      name, names.join('\n'), names[names.length - 1]);
  }
  return {
    connector: connector,
    error: error,
  };
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.DataSource.super_"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.</span>super_ ()](#apidoc.element.loopback.DataSource.super_)
- description and source-code
```javascript
function EventEmitter() {
  EventEmitter.init.call(this);
}
```
- example usage
```shell
n/a
```



# <a name="apidoc.module.loopback.DataSource.Any"></a>[module loopback.DataSource.Any](#apidoc.module.loopback.DataSource.Any)

#### <a name="apidoc.element.loopback.DataSource.Any.Any"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.</span>Any (value)](#apidoc.element.loopback.DataSource.Any.Any)
- description and source-code
```javascript
function Any(value) {
  if (!(this instanceof Any)) {
    return value;
  }
  this.value = value;
}
```
- example usage
```shell
n/a
```



# <a name="apidoc.module.loopback.DataSource.Any.prototype"></a>[module loopback.DataSource.Any.prototype](#apidoc.module.loopback.DataSource.Any.prototype)

#### <a name="apidoc.element.loopback.DataSource.Any.prototype.toJSON"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.Any.prototype.</span>toJSON ()](#apidoc.element.loopback.DataSource.Any.prototype.toJSON)
- description and source-code
```javascript
toJSON = function () {
  return this.value;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.DataSource.Any.prototype.toObject"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.Any.prototype.</span>toObject ()](#apidoc.element.loopback.DataSource.Any.prototype.toObject)
- description and source-code
```javascript
toObject = function () {
  return this.value;
}
```
- example usage
```shell
...
  options.validate = true;
}
if (!('throws' in options)) {
  options.throws = false;
}

var inst = this;
var data = inst.toObject(true);
var id = this.getId();

if (!id) {
  return Model.create(this, callback);
}

// validate first
...
```



# <a name="apidoc.module.loopback.DataSource.DataAccessObject"></a>[module loopback.DataSource.DataAccessObject](#apidoc.module.loopback.DataSource.DataAccessObject)

#### <a name="apidoc.element.loopback.DataSource.DataAccessObject.DataAccessObject"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.</span>DataAccessObject ()](#apidoc.element.loopback.DataSource.DataAccessObject.DataAccessObject)
- description and source-code
```javascript
function DataAccessObject() {
  if (DataAccessObject._mixins) {
    var self = this;
    var args = arguments;
    DataAccessObject._mixins.forEach(function(m) {
      m.call(self, args);
    });
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.DataSource.DataAccessObject.Transaction"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.</span>Transaction (connector, connection)](#apidoc.element.loopback.DataSource.DataAccessObject.Transaction)
- description and source-code
```javascript
function Transaction(connector, connection) {
  this.connector = connector;
  this.connection = connection;
  EventEmitter.call(this);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.DataSource.DataAccessObject._allowExtendedOperators"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.</span>_allowExtendedOperators (options)](#apidoc.element.loopback.DataSource.DataAccessObject._allowExtendedOperators)
- description and source-code
```javascript
_allowExtendedOperators = function (options) {
  options = options || {};

  var Model = this;
  var dsSettings = this.getDataSource().settings;
  var allowExtendedOperators = dsSettings.allowExtendedOperators;
  // options settings enable allowExtendedOperators per request (for example if
  // enable allowExtendedOperators only server side);
  // model settings enable allowExtendedOperators only for specific model.
  // dataSource settings enable allowExtendedOperators globally (all models);
  // options -> model -> dataSource (connector)
  if (options.hasOwnProperty('allowExtendedOperators')) {
    allowExtendedOperators = options.allowExtendedOperators === true;
  } else if (Model.settings && Model.settings.hasOwnProperty('allowExtendedOperators')) {
    allowExtendedOperators = Model.settings.allowExtendedOperators === true;
  }
  return allowExtendedOperators;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.DataSource.DataAccessObject._coerce"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.</span>_coerce (where, options)](#apidoc.element.loopback.DataSource.DataAccessObject._coerce)
- description and source-code
```javascript
_coerce = function (where, options) {
  var self = this;
  if (!where) {
    return where;
  }

  options = options || {};

  var err;
  if (typeof where !== 'object' || Array.isArray(where)) {
    err = new Error(g.f('The where clause %j is not an {{object}}', where));
    err.statusCode = 400;
    throw err;
  }

  var props = self.definition.properties;
  for (var p in where) {
    // Handle logical operators
    if (p === 'and' || p === 'or' || p === 'nor') {
      var clauses = where[p];
      try {
        clauses = coerceArray(clauses);
      } catch (e) {
        err = new Error(g.f('The %s operator has invalid clauses %j: %s', p, clauses, e.message));
        err.statusCode = 400;
        throw err;
      }

      for (var k = 0; k < clauses.length; k++) {
        self._coerce(clauses[k], options);
      }

      continue;
    }
    var DataType = props[p] && props[p].type;
    if (!DataType) {
      continue;
    }
    if (Array.isArray(DataType) || DataType === Array) {
      DataType = DataType[0];
    }
    if (DataType === Date) {
      DataType = DateType;
    } else if (DataType === Boolean) {
      DataType = BooleanType;
    } else if (DataType === Number) {
      // This fixes a regression in mongodb connector
      // For numbers, only convert it produces a valid number
      // LoopBack by default injects a number id. We should fix it based
      // on the connector's input, for example, MongoDB should use string
      // while RDBs typically use number
      DataType = NumberType;
    }

    if (!DataType) {
      continue;
    }

    if (DataType.prototype instanceof BaseModel) {
      continue;
    }

    if (DataType === geo.GeoPoint) {
      // Skip the GeoPoint as the near operator breaks the assumption that
      // an operation has only one property
      // We should probably fix it based on
      // http://docs.mongodb.org/manual/reference/operator/query/near/
      // The other option is to make operators start with $
      continue;
    }

    var val = where[p];
    if (val === null || val === undefined) {
      continue;
    }
    // Check there is an operator
    var operator = null;
    var exp = val;
    if (val.constructor === Object) {
      for (var op in operators) {
        if (op in val) {
          val = val[op];
          operator = op;
          switch (operator) {
            case 'inq':
            case 'nin':
            case 'between':
              try {
                val = coerceArray(val);
              } catch (e) {
                err = new Error(g.f('The %s property has invalid clause %j: %s', p, where[p], e));
                err.statusCode = 400;
                throw err;
              }

              if (operator === 'between' && val.length !== 2) {
                err = new Error(g.f(
                  'The %s property has invalid clause %j: Expected precisely 2 values, received %d',
                  p,
                  where[p],
                  val.length));
                err.statusCode = 400;
                throw err;
              }
              break;
            case 'like':
            case 'nlike':
            case 'ilike':
            case 'nilike':
              if (!(typeof val === 'string' || val instanceof RegExp)) {
                err = new Error(g.f(
                  'The %s property has invalid clause %j: Expected a string or RegExp',
                  p,
                  where[p]));
                err.statusCode = 400;
                throw err;
              }
              break;
            case 'regexp':
              val = utils.toRegExp(val);
              if (val instanceof Error) {
                val.statusCode = 400;
                throw err;
              }
              break;
          }
          break;
        }
      }
    }

    try {
      // Coerce val into an array if it resembles an array-like object
      val = coerceArray(val);
    } catch (e) {
      // NOOP when not coercable into an array.
    }

    // Coerce the array items
    if (Array.isArray(val)) {
      for (var i = 0; i < val.length; i++) {
        if (v ...
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.DataSource.DataAccessObject._forDB"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.</span>_forDB (data)](#apidoc.element.loopback.DataSource.DataAccessObject._forDB)
- description and source-code
```javascript
_forDB = function (data) {
  if (!(this.getDataSource().isRelational && this.getDataSource().isRelational())) {
    return data;
  }
  var res = {};
  for (var propName in data) {
    var type = this.getPropertyType(propName);
    if (type === 'JSON' || type === 'Any' || type === 'Object' || data[propName] instanceof Array) {
      res[propName] = JSON.stringify(data[propName]);
    } else {
      res[propName] = data[propName];
    }
  }
  return res;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.DataSource.DataAccessObject._getSetting"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.</span>_getSetting (key)](#apidoc.element.loopback.DataSource.DataAccessObject._getSetting)
- description and source-code
```javascript
_getSetting = function (key) {
  // Check for settings in model
  var m = this.definition;
  if (m && m.settings && m.settings[key]) {
    return m.settings[key];
  }

  // Check for settings in connector
  var ds = this.getDataSource();
  if (ds && ds.settings && ds.settings[key]) {
    return ds.settings[key];
  }

  return;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.DataSource.DataAccessObject._normalize"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.</span>_normalize (filter, options)](#apidoc.element.loopback.DataSource.DataAccessObject._normalize)
- description and source-code
```javascript
_normalize = function (filter, options) {
  if (!filter) {
    return undefined;
  }
  var err = null;
  if ((typeof filter !== 'object') || Array.isArray(filter)) {
    err = new Error(g.f('The query filter %j is not an {{object}}', filter));
    err.statusCode = 400;
    throw err;
  }
  if (filter.limit || filter.skip || filter.offset) {
    var limit = Number(filter.limit || 100);
    var offset = Number(filter.skip || filter.offset || 0);
    if (isNaN(limit) || limit <= 0 || Math.ceil(limit) !== limit) {
      err = new Error(g.f('The {{limit}} parameter %j is not valid',
        filter.limit));
      err.statusCode = 400;
      throw err;
    }
    if (isNaN(offset) || offset < 0 || Math.ceil(offset) !== offset) {
      err = new Error(g.f('The {{offset/skip}} parameter %j is not valid',
          filter.skip || filter.offset));
      err.statusCode = 400;
      throw err;
    }
    filter.limit = limit;
    filter.offset = offset;
    filter.skip = offset;
  }

  if (filter.order) {
    var order = filter.order;
    if (!Array.isArray(order)) {
      order = [order];
    }
    var fields = [];
    for (var i = 0, m = order.length; i < m; i++) {
      if (typeof order[i] === 'string') {
        // Normalize 'f1 ASC, f2 DESC, f3' to ['f1 ASC', 'f2 DESC', 'f3']
        var tokens = order[i].split(/(?:\s*,\s*)+/);
        for (var t = 0, n = tokens.length; t < n; t++) {
          var token = tokens[t];
          if (token.length === 0) {
            // Skip empty token
            continue;
          }
          var parts = token.split(/\s+/);
          if (parts.length >= 2) {
            var dir = parts[1].toUpperCase();
            if (dir === 'ASC' || dir === 'DESC') {
              token = parts[0] + ' ' + dir;
            } else {
              err = new Error(g.f('The {{order}} %j has invalid direction', token));
              err.statusCode = 400;
              throw err;
            }
          }
          fields.push(token);
        }
      } else {
        err = new Error(g.f('The order %j is not valid', order[i]));
        err.statusCode = 400;
        throw err;
      }
    }
    if (fields.length === 1 && typeof filter.order === 'string') {
      filter.order = fields[0];
    } else {
      filter.order = fields;
    }
  }

  // normalize fields as array of included property names
  if (filter.fields) {
    filter.fields = fieldsToArray(filter.fields,
      Object.keys(this.definition.properties), this.settings.strict);
  }

  var handleUndefined =  this._getSetting('normalizeUndefinedInQuery');
  // alter configuration of how removeUndefined handles undefined values
  filter = removeUndefined(filter, handleUndefined);
  this._coerce(filter.where, options);
  return filter;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.DataSource.DataAccessObject.all"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.</span>all ()](#apidoc.element.loopback.DataSource.DataAccessObject.all)
- description and source-code
```javascript
all = function () {
  return DataAccessObject.find.apply(this, arguments);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.DataSource.DataAccessObject.applyProperties"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.</span>applyProperties (data, inst)](#apidoc.element.loopback.DataSource.DataAccessObject.applyProperties)
- description and source-code
```javascript
applyProperties = function (data, inst) {
  var properties = this.definition.settings.properties;
  properties = properties || this.definition.settings.attributes;
  if (typeof properties === 'object') {
    util._extend(data, properties);
  } else if (typeof properties === 'function') {
    util._extend(data, properties.call(this, data, inst) || {});
  } else if (properties !== false) {
    var scope = this.defaultScope(data, inst) || {};
    if (typeof scope.where === 'object') {
      setScopeValuesFromWhere(data, scope.where, this);
    }
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.DataSource.DataAccessObject.applyScope"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.</span>applyScope (query, inst)](#apidoc.element.loopback.DataSource.DataAccessObject.applyScope)
- description and source-code
```javascript
applyScope = function (query, inst) {
  var scope = this.defaultScope(query, inst) || {};
  if (typeof scope === 'object') {
    mergeQuery(query, scope || {}, this.definition.settings.scope);
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.DataSource.DataAccessObject.beginTransaction"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.</span>beginTransaction (options, cb)](#apidoc.element.loopback.DataSource.DataAccessObject.beginTransaction)
- description and source-code
```javascript
beginTransaction = function (options, cb) {
  cb = cb || utils.createPromiseCallback();
  if (Transaction) {
    var connector = this.getConnector();
    Transaction.begin(connector, options, function(err, transaction) {
      if (err) return cb(err);
      if (transaction) {
        // Set an informational transaction id
        transaction.id = uuid.v1();
      }
      if (options.timeout) {
        setTimeout(function() {
          var context = {
            transaction: transaction,
            operation: 'timeout',
          };
          transaction.notifyObserversOf('timeout', context, function(err) {
            if (!err) {
              transaction.rollback(function() {
                debug('Transaction %s is rolled back due to timeout',
                  transaction.id);
              });
            }
          });
        }, options.timeout);
      }
      cb(err, transaction);
    });
  } else {
    process.nextTick(function() {
      var err = new Error(g.f('{{Transaction}} is not supported'));
      cb(err);
    });
  }
  return cb.promise;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.DataSource.DataAccessObject.belongsTo"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.</span>belongsTo (modelTo, params)](#apidoc.element.loopback.DataSource.DataAccessObject.belongsTo)
- description and source-code
```javascript
belongsTo = function (modelTo, params) {
  return RelationDefinition.belongsTo(this, modelTo, params);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.DataSource.DataAccessObject.count"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.</span>count (where, options, cb)](#apidoc.element.loopback.DataSource.DataAccessObject.count)
- description and source-code
```javascript
count = function (where, options, cb) {
  var connectionPromise = stillConnecting(this.getDataSource(), this, arguments);
  if (connectionPromise) {
    return connectionPromise;
  }

  if (options === undefined && cb === undefined) {
    if (typeof where === 'function') {
      // count(cb)
      cb = where;
      where = {};
    }
  } else if (cb === undefined) {
    if (typeof options === 'function') {
      // count(where, cb)
      cb = options;
      options = {};
    }
  }

  cb = cb || utils.createPromiseCallback();
  where = where || {};
  options = options || {};

  assert(typeof where === 'object', 'The where argument must be an object');
  assert(typeof options === 'object', 'The options argument must be an object');
  assert(typeof cb === 'function', 'The cb argument must be a function');

  var Model = this;
  var connector = Model.getConnector();
  assert(typeof connector.count === 'function',
    'count() must be implemented by the connector');
  assert(connector.count.length >= 3,
    'count() must take at least 3 arguments');

  var hookState = {};

  var query = {where: where};
  this.applyScope(query);
  where = query.where;

  try {
    where = removeUndefined(where);
    where = this._coerce(where, options);
  } catch (err) {
    process.nextTick(function() {
      cb(err);
    });
    return cb.promise;
  }

  var context = {
    Model: Model,
    query: {where: where},
    hookState: hookState,
    options: options,
  };
  this.notifyObserversOf('access', context, function(err, ctx) {
    if (err) return cb(err);
    where = ctx.query.where;

    if (connector.count.length <= 3) {
      // Old signature, please note where is the last
      // count(model, cb, where)
      connector.count(Model.modelName, cb, where);
    } else {
      // New signature
      // count(model, where, options, cb)
      connector.count(Model.modelName, where, options, cb);
    }
  });
  return cb.promise;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.DataSource.DataAccessObject.create"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.</span>create (data, options, cb)](#apidoc.element.loopback.DataSource.DataAccessObject.create)
- description and source-code
```javascript
create = function (data, options, cb) {
  var connectionPromise = stillConnecting(this.getDataSource(), this, arguments);
  if (connectionPromise) {
    return connectionPromise;
  }

  var Model = this;
  var connector = Model.getConnector();
  assert(typeof connector.create === 'function',
    'create() must be implemented by the connector');

  var self = this;

  if (options === undefined && cb === undefined) {
    if (typeof data === 'function') {
      // create(cb)
      cb = data;
      data = {};
    }
  } else if (cb === undefined) {
    if (typeof options === 'function') {
      // create(data, cb);
      cb = options;
      options = {};
    }
  }

  data = data || {};
  options = options || {};
  cb = cb || (Array.isArray(data) ? noCallback : utils.createPromiseCallback());

  assert(typeof data === 'object', 'The data argument must be an object or array');
  assert(typeof options === 'object', 'The options argument must be an object');
  assert(typeof cb === 'function', 'The cb argument must be a function');

  var hookState = {};

  if (Array.isArray(data)) {
    // Undefined item will be skipped by async.map() which internally uses
    // Array.prototype.map(). The following loop makes sure all items are
    // iterated
    for (var i = 0, n = data.length; i < n; i++) {
      if (data[i] === undefined) {
        data[i] = {};
      }
    }
    async.map(data, function(item, done) {
      self.create(item, options, function(err, result) {
        // Collect all errors and results
        done(null, {err: err, result: result || item});
      });
    }, function(err, results) {
      if (err) {
        return cb(err, results);
      }
      // Convert the results into two arrays
      var errors = null;
      var data = [];
      for (var i = 0, n = results.length; i < n; i++) {
        if (results[i].err) {
          if (!errors) {
            errors = [];
          }
          errors[i] = results[i].err;
        }
        data[i] = results[i].result;
      }
      cb(errors, data);
    });
    return;
  }

  var enforced = {};
  var obj;
  var idValue = getIdValue(this, data);

  // if we come from save
  if (data instanceof Model && !idValue) {
    obj = data;
  } else {
    obj = new Model(data);
  }

  this.applyProperties(enforced, obj);
  obj.setAttributes(enforced);

  Model = this.lookupModel(data); // data-specific
  if (Model !== obj.constructor) obj = new Model(data);

  var context = {
    Model: Model,
    instance: obj,
    isNewInstance: true,
    hookState: hookState,
    options: options,
  };
  Model.notifyObserversOf('before save', context, function(err) {
    if (err) return cb(err);

    data = obj.toObject(true);

    // options has precedence on model-setting
    if (options.validate === false) {
      return create();
    }

    // only when options.validate is not set, take model-setting into consideration
    if (options.validate === undefined && Model.settings.automaticValidation === false) {
      return create();
    }

    // validation required
    obj.isValid(function(valid) {
      if (valid) {
        create();
      } else {
        cb(new ValidationError(obj), obj);
      }
    }, data, options);
  });

  function create() {
    obj.trigger('create', function(createDone) {
      obj.trigger('save', function(saveDone) {
        var _idName = idName(Model);
        var modelName = Model.modelName;
        var val = removeUndefined(obj.toObject(true));
        function createCallback(err, id, rev) {
          if (id) {
            obj.__data[_idName] = id;
            defineReadonlyProp(obj, _idName, id);
          }
          if (rev) {
            obj._rev = rev;
          }
          if (err) {
            return cb(err, obj);
          }
          obj.__persisted = true;

          var context = {
            Model: Model,
            data: val,
            isNewInstance: true,
            hookState: hookState,
            options: options,
          };
          Model.notifyObserversOf('loaded', context, function(err) {
            if (err) return cb(err);

            // By def ...
```
- example usage
```shell
...
 } else {
   var options = {};

   if (this.get) {
     options = this.get('remoting');
   }

   return (this._remotes = RemoteObjects.create(options));
 }
};

/*!
* Remove a route by reference.
*/
...
```

#### <a name="apidoc.element.loopback.DataSource.DataAccessObject.defaultScope"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.</span>defaultScope (target, inst)](#apidoc.element.loopback.DataSource.DataAccessObject.defaultScope)
- description and source-code
```javascript
defaultScope = function (target, inst) {
  var scope = this.definition.settings.scope;
  if (typeof scope === 'function') {
    scope = this.definition.settings.scope.call(this, target, inst);
  }
  return scope;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.DataSource.DataAccessObject.deleteAll"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.</span>deleteAll (where, options, cb)](#apidoc.element.loopback.DataSource.DataAccessObject.deleteAll)
- description and source-code
```javascript
function destroyAll(where, options, cb) {
  var connectionPromise = stillConnecting(this.getDataSource(), this, arguments);
  if (connectionPromise) {
    return connectionPromise;
  }

  var Model = this;
  var connector = Model.getConnector();

  assert(typeof connector.destroyAll === 'function',
    'destroyAll() must be implemented by the connector');

  if (options === undefined && cb === undefined) {
    if (typeof where === 'function') {
      cb = where;
      where = {};
    }
  } else if (cb === undefined) {
    if (typeof options === 'function') {
      cb = options;
      options = {};
    }
  }

  cb = cb || utils.createPromiseCallback();
  where = where || {};
  options = options || {};

  assert(typeof where === 'object', 'The where argument must be an object');
  assert(typeof options === 'object', 'The options argument must be an object');
  assert(typeof cb === 'function', 'The cb argument must be a function');

  var hookState = {};

  var query = {where: where};
  this.applyScope(query);
  where = query.where;

  if (options.notify === false) {
    doDelete(where);
  } else {
    query = {where: whereIsEmpty(where) ? {} : where};
    var context = {
      Model: Model,
      query: query,
      hookState: hookState,
      options: options,
    };
    Model.notifyObserversOf('access', context, function(err, ctx) {
      if (err) return cb(err);
      var context = {
        Model: Model,
        where: ctx.query.where,
        hookState: hookState,
        options: options,
      };
      Model.notifyObserversOf('before delete', context, function(err, ctx) {
        if (err) return cb(err);
        doDelete(ctx.where);
      });
    });
  }

  function doDelete(where) {
    var context = {
      Model: Model,
      where: whereIsEmpty(where) ? {} : where,
      hookState: hookState,
      options: options,
    };

    if (whereIsEmpty(where)) {
      if (connector.destroyAll.length === 4) {
        connector.destroyAll(Model.modelName, {}, options, done);
      } else {
        connector.destroyAll(Model.modelName, {}, done);
      }
    } else {
      try {
        // Support an optional where object
        where = removeUndefined(where);
        where = Model._coerce(where, options);
      } catch (err) {
        return process.nextTick(function() {
          cb(err);
        });
      }

      if (connector.destroyAll.length === 4) {
        connector.destroyAll(Model.modelName, where, options, done);
      } else {
        connector.destroyAll(Model.modelName, where, done);
      }
    }

    function done(err, info) {
      if (err) return cb(err);

      if (options.notify === false) {
        return cb(err, info);
      }

      var context = {
        Model: Model,
        where: where,
        hookState: hookState,
        options: options,
      };
      Model.notifyObserversOf('after delete', context, function(err) {
        cb(err, info);
      });
    }
  }
  return cb.promise;
}
```
- example usage
```shell
...
  Model.modelName, id);
debug('\tExpected revision: %s', change.rev);
debug('\tActual revision:   %s', rev);
conflicts.push(change);
return Change.rectifyModelChanges(Model.modelName, [id], cb);
    }

    Model.deleteAll(current.toObject(), options, function(err, result) {
if (err) return cb(err);

var count = result && result.count;
switch (count) {
  case 1:
    // The happy path, exactly one record was updated
    return cb();
...
```

#### <a name="apidoc.element.loopback.DataSource.DataAccessObject.deleteById"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.</span>deleteById (id, options, cb)](#apidoc.element.loopback.DataSource.DataAccessObject.deleteById)
- description and source-code
```javascript
function deleteById(id, options, cb) {
  var connectionPromise = stillConnecting(this.getDataSource(), this, arguments);
  if (connectionPromise) {
    return connectionPromise;
  }

  assert(arguments.length >= 1, 'The id argument is required');
  if (cb === undefined) {
    if (typeof options === 'function') {
      // destroyById(id, cb)
      cb = options;
      options = {};
    }
  }

  options = options || {};
  cb = cb || utils.createPromiseCallback();

  assert(typeof options === 'object', 'The options argument must be an object');
  assert(typeof cb === 'function', 'The cb argument must be a function');

  if (isPKMissing(this, cb)) {
    return cb.promise;
  } else if (id == null || id === '') {
    process.nextTick(function() {
      cb(new Error(g.f('{{Model::deleteById}} requires the apidoc.element.loopback.DataSource.DataAccessObject.deleteById argument')));
    });
    return cb.promise;
  }

  var Model = this;

  this.remove(byIdQuery(this, id).where, options, function(err, info) {
    if (err) return cb(err);
    var deleted = info && info.count > 0;
    if (Model.settings.strictDelete && !deleted) {
      err = new Error(g.f('No instance with apidoc.element.loopback.DataSource.DataAccessObject.deleteById %s found for %s', id, Model.modelName));
      err.code = 'NOT_FOUND';
      err.statusCode = 404;
      return cb(err);
    }

    cb(null, info);
  });
  return cb.promise;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.DataSource.DataAccessObject.destroyAll"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.</span>destroyAll (where, options, cb)](#apidoc.element.loopback.DataSource.DataAccessObject.destroyAll)
- description and source-code
```javascript
function destroyAll(where, options, cb) {
  var connectionPromise = stillConnecting(this.getDataSource(), this, arguments);
  if (connectionPromise) {
    return connectionPromise;
  }

  var Model = this;
  var connector = Model.getConnector();

  assert(typeof connector.destroyAll === 'function',
    'destroyAll() must be implemented by the connector');

  if (options === undefined && cb === undefined) {
    if (typeof where === 'function') {
      cb = where;
      where = {};
    }
  } else if (cb === undefined) {
    if (typeof options === 'function') {
      cb = options;
      options = {};
    }
  }

  cb = cb || utils.createPromiseCallback();
  where = where || {};
  options = options || {};

  assert(typeof where === 'object', 'The where argument must be an object');
  assert(typeof options === 'object', 'The options argument must be an object');
  assert(typeof cb === 'function', 'The cb argument must be a function');

  var hookState = {};

  var query = {where: where};
  this.applyScope(query);
  where = query.where;

  if (options.notify === false) {
    doDelete(where);
  } else {
    query = {where: whereIsEmpty(where) ? {} : where};
    var context = {
      Model: Model,
      query: query,
      hookState: hookState,
      options: options,
    };
    Model.notifyObserversOf('access', context, function(err, ctx) {
      if (err) return cb(err);
      var context = {
        Model: Model,
        where: ctx.query.where,
        hookState: hookState,
        options: options,
      };
      Model.notifyObserversOf('before delete', context, function(err, ctx) {
        if (err) return cb(err);
        doDelete(ctx.where);
      });
    });
  }

  function doDelete(where) {
    var context = {
      Model: Model,
      where: whereIsEmpty(where) ? {} : where,
      hookState: hookState,
      options: options,
    };

    if (whereIsEmpty(where)) {
      if (connector.destroyAll.length === 4) {
        connector.destroyAll(Model.modelName, {}, options, done);
      } else {
        connector.destroyAll(Model.modelName, {}, done);
      }
    } else {
      try {
        // Support an optional where object
        where = removeUndefined(where);
        where = Model._coerce(where, options);
      } catch (err) {
        return process.nextTick(function() {
          cb(err);
        });
      }

      if (connector.destroyAll.length === 4) {
        connector.destroyAll(Model.modelName, where, options, done);
      } else {
        connector.destroyAll(Model.modelName, where, done);
      }
    }

    function done(err, info) {
      if (err) return cb(err);

      if (options.notify === false) {
        return cb(err, info);
      }

      var context = {
        Model: Model,
        where: where,
        hookState: hookState,
        options: options,
      };
      Model.notifyObserversOf('after delete', context, function(err) {
        cb(err, info);
      });
    }
  }
  return cb.promise;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.DataSource.DataAccessObject.destroyById"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.</span>destroyById (id, options, cb)](#apidoc.element.loopback.DataSource.DataAccessObject.destroyById)
- description and source-code
```javascript
function deleteById(id, options, cb) {
  var connectionPromise = stillConnecting(this.getDataSource(), this, arguments);
  if (connectionPromise) {
    return connectionPromise;
  }

  assert(arguments.length >= 1, 'The id argument is required');
  if (cb === undefined) {
    if (typeof options === 'function') {
      // destroyById(id, cb)
      cb = options;
      options = {};
    }
  }

  options = options || {};
  cb = cb || utils.createPromiseCallback();

  assert(typeof options === 'object', 'The options argument must be an object');
  assert(typeof cb === 'function', 'The cb argument must be a function');

  if (isPKMissing(this, cb)) {
    return cb.promise;
  } else if (id == null || id === '') {
    process.nextTick(function() {
      cb(new Error(g.f('{{Model::deleteById}} requires the apidoc.element.loopback.DataSource.DataAccessObject.destroyById argument')));
    });
    return cb.promise;
  }

  var Model = this;

  this.remove(byIdQuery(this, id).where, options, function(err, info) {
    if (err) return cb(err);
    var deleted = info && info.count > 0;
    if (Model.settings.strictDelete && !deleted) {
      err = new Error(g.f('No instance with apidoc.element.loopback.DataSource.DataAccessObject.destroyById %s found for %s', id, Model.modelName));
      err.code = 'NOT_FOUND';
      err.statusCode = 404;
      return cb(err);
    }

    cb(null, info);
  });
  return cb.promise;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.DataSource.DataAccessObject.embedsMany"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.</span>embedsMany (modelTo, params)](#apidoc.element.loopback.DataSource.DataAccessObject.embedsMany)
- description and source-code
```javascript
function embedsMany(modelTo, params) {
  return RelationDefinition.embedsMany(this, modelTo, params);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.DataSource.DataAccessObject.embedsOne"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.</span>embedsOne (modelTo, params)](#apidoc.element.loopback.DataSource.DataAccessObject.embedsOne)
- description and source-code
```javascript
function embedsOne(modelTo, params) {
  return RelationDefinition.embedsOne(this, modelTo, params);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.DataSource.DataAccessObject.exists"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.</span>exists (id, options, cb)](#apidoc.element.loopback.DataSource.DataAccessObject.exists)
- description and source-code
```javascript
function exists(id, options, cb) {
  var connectionPromise = stillConnecting(this.getDataSource(), this, arguments);
  if (connectionPromise) {
    return connectionPromise;
  }

  assert(arguments.length >= 1, 'The id argument is required');
  if (cb === undefined) {
    if (typeof options === 'function') {
      // exists(id, cb)
      cb = options;
      options = {};
    }
  }

  cb = cb || utils.createPromiseCallback();
  options = options || {};

  assert(typeof options === 'object', 'The options argument must be an object');
  assert(typeof cb === 'function', 'The cb argument must be a function');

  if (id !== undefined && id !== null && id !== '') {
    this.count(byIdQuery(this, id).where, options, function(err, count) {
      cb(err, err ? false : count === 1);
    });
  } else {
    process.nextTick(function() {
      cb(new Error(g.f('{{Model::exists}} requires the apidoc.element.loopback.DataSource.DataAccessObject.exists argument')));
    });
  }
  return cb.promise;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.DataSource.DataAccessObject.find"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.</span>find (query, options, cb)](#apidoc.element.loopback.DataSource.DataAccessObject.find)
- description and source-code
```javascript
function find(query, options, cb) {
  var connectionPromise = stillConnecting(this.getDataSource(), this, arguments);
  if (connectionPromise) {
    return connectionPromise;
  }

  if (options === undefined && cb === undefined) {
    if (typeof query === 'function') {
      // find(cb);
      cb = query;
      query = {};
    }
  } else if (cb === undefined) {
    if (typeof options === 'function') {
      // find(query, cb);
      cb = options;
      options = {};
    }
  }

  cb = cb || utils.createPromiseCallback();
  query = query || {};
  options = options || {};

  assert(typeof query === 'object', 'The query argument must be an object');
  assert(typeof options === 'object', 'The options argument must be an object');
  assert(typeof cb === 'function', 'The cb argument must be a function');

  var hookState = {};
  var self = this;
  var connector = self.getConnector();

  assert(typeof connector.all === 'function',
    'all() must be implemented by the connector');

  try {
    this._normalize(query, options);
  } catch (err) {
    process.nextTick(function() {
      cb(err);
    });
    return cb.promise;
  }

  this.applyScope(query);

  var near = query && geo.nearFilter(query.where);
  var supportsGeo = !!connector.buildNearFilter;

  if (near) {
    if (supportsGeo) {
      // convert it
      connector.buildNearFilter(query, near);
    } else if (query.where) {
      // do in memory query
      // using all documents
      // TODO [fabien] use default scope here?
      if (options.notify === false) {
        queryGeo(query);
      } else {
        withNotifyGeo();
      }

      function withNotifyGeo() {
        var context = {
          Model: self,
          query: query,
          hookState: hookState,
          options: options,
        };
        self.notifyObserversOf('access', context, function(err, ctx) {
          if (err) return cb(err);
          queryGeo(ctx.query);
        });
      }

      function queryGeo(query) {
        function geoCallbackWithoutNotify(err, data) {
          var memory = new Memory();
          var modelName = self.modelName;

          if (err) {
            cb(err);
          } else if (Array.isArray(data)) {
            memory.define({
              properties: self.dataSource.definitions[self.modelName].properties,
              settings: self.dataSource.definitions[self.modelName].settings,
              model: self,
            });

            data.forEach(function(obj) {
              memory.create(modelName, obj, options, function() {
                // noop
              });
            });

            // FIXME: apply "includes" and other transforms - see allCb below
            memory.all(modelName, query, options, cb);
          } else {
            cb(null, []);
          }
        }

        function geoCallbackWithNotify(err, data) {
          if (err) return cb(err);

          async.map(data, function(item, next) {
            var context = {
              Model: self,
              data: item,
              isNewInstance: false,
              hookState: hookState,
              options: options,
            };

            self.notifyObserversOf('loaded', context, function(err) {
              if (err) return next(err);
              next(null, context.data);
            });
          }, function(err, results) {
            if (err) return cb(err);
            geoCallbackWithoutNotify(null, results);
          });
        }

        var geoCallback = options.notify === false ? geoCallbackWithoutNotify : geoCallbackWithNotify;
        if (connector.all.length === 4) {
          connector.all(self.modelName, {}, options, geoCallback);
        } else {
          connector.all(self.modelName, {}, geoCallback);
        }
      }
      // already handled
      return cb.promise;
    }
  }

  var allCb = function(err, data) {
    if (!err && Array.isArray(data)) {
      async.map(data, function(item, next) {
        var Model = self.lookupModel(item);
        if (options.notify === false) {
          buildResult(item, next);
        } else {
          withNo ...
```
- example usage
```shell
...

filter = filter || {};
filter.fields = {};
filter.where = filter.where || {};
filter.fields[idName] = true;

// TODO(ritch) this whole thing could be optimized a bit more
Change.find(changeFilter, function(err, changes) {
  if (err) return callback(err);
  if (!Array.isArray(changes) || changes.length === 0) return callback(null, []);
  var ids = changes.map(function(change) {
    return change.getModelId();
  });
  filter.where[idName] = {inq: ids};
  model.find(filter, function(err, models) {
...
```

#### <a name="apidoc.element.loopback.DataSource.DataAccessObject.findById"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.</span>findById (id, filter, options, cb)](#apidoc.element.loopback.DataSource.DataAccessObject.findById)
- description and source-code
```javascript
function findById(id, filter, options, cb) {
  var connectionPromise = stillConnecting(this.getDataSource(), this, arguments);
  if (connectionPromise) {
    return connectionPromise;
  }

  assert(arguments.length >= 1, 'The id argument is required');

  if (options === undefined && cb === undefined) {
    if (typeof filter === 'function') {
      // findById(id, cb)
      cb = filter;
      filter = {};
    }
  } else if (cb === undefined) {
    if (typeof options === 'function') {
      // findById(id, query, cb)
      cb = options;
      options = {};
      if (typeof filter === 'object' && !(filter.include || filter.fields)) {
        // If filter doesn't have include or fields, assuming it's options
        options = filter;
        filter = {};
      }
    }
  }

  cb = cb || utils.createPromiseCallback();
  options = options || {};
  filter = filter || {};

  assert(typeof filter === 'object', 'The filter argument must be an object');
  assert(typeof options === 'object', 'The options argument must be an object');
  assert(typeof cb === 'function', 'The cb argument must be a function');

  if (isPKMissing(this, cb)) {
    return cb.promise;
  } else if (id == null || id === '') {
    process.nextTick(function() {
      cb(new Error(g.f('{{Model::findById}} requires the apidoc.element.loopback.DataSource.DataAccessObject.findById argument')));
    });
  } else {
    var query = byIdQuery(this, id);
    if (filter.include) {
      query.include = filter.include;
    }
    if (filter.fields) {
      query.fields = filter.fields;
    }
    this.findOne(query, options, cb);
  }
  return cb.promise;
}
```
- example usage
```shell
...
  var model = new ModelCtor(data);
  model.id = id;
  fn(null, model);
} else if (data) {
  fn(null, new ModelCtor(data));
} else if (id) {
  var filter = {};
  ModelCtor.findById(id, filter, options, function(err, model) {
    if (err) {
      fn(err);
    } else if (model) {
      fn(null, model);
    } else {
      err = new Error(g.f('could not find a model with apidoc.element.loopback.DataSource.DataAccessObject.findById %s', id));
      err.statusCode = 404;
...
```

#### <a name="apidoc.element.loopback.DataSource.DataAccessObject.findByIds"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.</span>findByIds (ids, query, options, cb)](#apidoc.element.loopback.DataSource.DataAccessObject.findByIds)
- description and source-code
```javascript
findByIds = function (ids, query, options, cb) {
  if (options === undefined && cb === undefined) {
    if (typeof query === 'function') {
      // findByIds(ids, cb)
      cb = query;
      query = {};
    }
  } else if (cb === undefined) {
    if (typeof options === 'function') {
      // findByIds(ids, query, cb)
      cb = options;
      options = {};
    }
  }

  cb = cb || utils.createPromiseCallback();
  options = options || {};
  query = query || {};

  assert(Array.isArray(ids), 'The ids argument must be an array');
  assert(typeof query === 'object', 'The query argument must be an object');
  assert(typeof options === 'object', 'The options argument must be an object');
  assert(typeof cb === 'function', 'The cb argument must be a function');

  if (isPKMissing(this, cb)) {
    return cb.promise;
  } else if (ids.length === 0) {
    process.nextTick(function() { cb(null, []); });
    return cb.promise;
  }

  var filter = {where: {}};
  var pk = idName(this);
  filter.where[pk] = {inq: [].concat(ids)};
  mergeQuery(filter, query || {});

  // to know if the result need to be sorted by ids or not
  // this variable need to be initialized before the call to find, because filter is updated during the call with an order
  var toSortObjectsByIds = filter.order ? false : true;

  this.find(filter, options, function(err, results) {
    cb(err, toSortObjectsByIds ? utils.sortObjectsByIds(pk, ids, results) : results);
  });
  return cb.promise;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.DataSource.DataAccessObject.findOne"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.</span>findOne (query, options, cb)](#apidoc.element.loopback.DataSource.DataAccessObject.findOne)
- description and source-code
```javascript
function findOne(query, options, cb) {
  var connectionPromise = stillConnecting(this.getDataSource(), this, arguments);
  if (connectionPromise) {
    return connectionPromise;
  }

  if (options === undefined && cb === undefined) {
    if (typeof query === 'function') {
      cb = query;
      query = {};
    }
  } else if (cb === undefined) {
    if (typeof options === 'function') {
      cb = options;
      options = {};
    }
  }

  cb = cb || utils.createPromiseCallback();
  query = query || {};
  options = options || {};

  assert(typeof query === 'object', 'The query argument must be an object');
  assert(typeof options === 'object', 'The options argument must be an object');
  assert(typeof cb === 'function', 'The cb argument must be a function');

  query.limit = 1;
  this.find(query, options, function(err, collection) {
    if (err || !collection || !collection.length > 0) return cb(err, null);
    cb(err, collection[0]);
  });
  return cb.promise;
}
```
- example usage
```shell
...
PersistedModel.rectifyChange = function(id, callback) {
  var Change = this.getChangeModel();
  Change.rectifyModelChanges(this.modelName, [id], callback);
};

PersistedModel.findLastChange = function(id, cb) {
  var Change = this.getChangeModel();
  Change.findOne({where: {modelId: id}}, cb);
};

PersistedModel.updateLastChange = function(id, data, cb) {
  var self = this;
  this.findLastChange(id, function(err, inst) {
    if (err) return cb(err);
    if (!inst) {
...
```

#### <a name="apidoc.element.loopback.DataSource.DataAccessObject.findOrCreate"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.</span>findOrCreate (query, data, options, cb)](#apidoc.element.loopback.DataSource.DataAccessObject.findOrCreate)
- description and source-code
```javascript
function findOrCreate(query, data, options, cb) {
  var connectionPromise = stillConnecting(this.getDataSource(), this, arguments);
  if (connectionPromise) {
    return connectionPromise;
  }

  assert(arguments.length >= 1, 'At least one argument is required');
  if (data === undefined && options === undefined && cb === undefined) {
    assert(typeof query === 'object', 'Single argument must be data object');
    // findOrCreate(data);
    // query will be built from data, and method will return Promise
    data = query;
    query = {where: data};
  } else  if (options === undefined && cb === undefined) {
    if (typeof data === 'function') {
      // findOrCreate(data, cb);
      // query will be built from data
      cb = data;
      data = query;
      query = {where: data};
    }
  } else if (cb === undefined) {
    if (typeof options === 'function') {
      // findOrCreate(query, data, cb)
      cb = options;
      options = {};
    }
  }

  cb = cb || utils.createPromiseCallback();
  query = query || {where: {}};
  data = data || {};
  options = options || {};

  assert(typeof query === 'object', 'The query argument must be an object');
  assert(typeof data === 'object', 'The data argument must be an object');
  assert(typeof options === 'object', 'The options argument must be an object');
  assert(typeof cb === 'function', 'The cb argument must be a function');

  var hookState = {};

  var Model = this;
  var self = this;
  var connector = Model.getConnector();

  function _findOrCreate(query, data, currentInstance) {
    var modelName = self.modelName;
    function findOrCreateCallback(err, data, created) {
      if (err) return cb(err);
      var context = {
        Model: Model,
        data: data,
        isNewInstance: created,
        hookState: hookState,
        options: options,
      };
      Model.notifyObserversOf('loaded', context, function(err) {
        if (err) return cb(err);

        var obj, Model = self.lookupModel(data);

        if (data) {
          obj = new Model(data, {fields: query.fields, applySetters: false,
            persisted: true});
        }

        if (created) {
          var context = {
            Model: Model,
            instance: obj,
            isNewInstance: true,
            hookState: hookState,
            options: options,
          };
          Model.notifyObserversOf('after save', context, function(err) {
            if (cb.promise) {
              cb(err, [obj, created]);
            } else {
              cb(err, obj, created);
            }
          });
        } else {
          if (cb.promise) {
            cb(err, [obj, created]);
          } else {
            cb(err, obj, created);
          }
        }
      });
    }

    data = removeUndefined(data);
    var context = {
      Model: Model,
      where: query.where,
      data: data,
      isNewInstance: true,
      currentInstance: currentInstance,
      hookState: hookState,
      options: options,
    };

    Model.notifyObserversOf('persist', context, function(err) {
      if (err) return cb(err);

      if (connector.findOrCreate.length === 5) {
        connector.findOrCreate(modelName, query, self._forDB(context.data), options, findOrCreateCallback);
      } else {
        connector.findOrCreate(modelName, query, self._forDB(context.data), findOrCreateCallback);
      }
    });
  }

  if (connector.findOrCreate) {
    query.limit = 1;

    try {
      this._normalize(query, options);
    } catch (err) {
      process.nextTick(function() {
        cb(err);
      });
      return cb.promise;
    }

    this.applyScope(query);

    var context = {
      Model: Model,
      query: query,
      hookState: hookState,
      options: options,
    };
    Model.notifyObserversOf('access', context, function(err, ctx) {
      if (err) return cb(err);

      var query = ctx.query;

      var enforced = {};
      var Model = self.lookupModel(data);
      var obj = data instanceof Model ? data : new Model(data);

      Model.applyProperties(enforced, obj);
      obj.setAttributes(enforced);

      var conte ...
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.DataSource.DataAccessObject.getConnector"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.</span>getConnector ()](#apidoc.element.loopback.DataSource.DataAccessObject.getConnector)
- description and source-code
```javascript
getConnector = function () {
  return this.getDataSource().connector;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.DataSource.DataAccessObject.hasAndBelongsToMany"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.</span>hasAndBelongsToMany (modelTo, params)](#apidoc.element.loopback.DataSource.DataAccessObject.hasAndBelongsToMany)
- description and source-code
```javascript
function hasAndBelongsToMany(modelTo, params) {
  return RelationDefinition.hasAndBelongsToMany(this, modelTo, params);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.DataSource.DataAccessObject.hasMany"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.</span>hasMany (modelTo, params)](#apidoc.element.loopback.DataSource.DataAccessObject.hasMany)
- description and source-code
```javascript
function hasMany(modelTo, params) {
  return RelationDefinition.hasMany(this, modelTo, params);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.DataSource.DataAccessObject.hasOne"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.</span>hasOne (modelTo, params)](#apidoc.element.loopback.DataSource.DataAccessObject.hasOne)
- description and source-code
```javascript
function hasOne(modelTo, params) {
  return RelationDefinition.hasOne(this, modelTo, params);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.DataSource.DataAccessObject.include"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.</span>include (objects, include, options, cb)](#apidoc.element.loopback.DataSource.DataAccessObject.include)
- description and source-code
```javascript
include = function (objects, include, options, cb) {
  if (typeof options === 'function' && cb === undefined) {
    cb = options;
    options = {};
  }
  var self = this;

  if (!include || (Array.isArray(include) && include.length === 0) ||
      (Array.isArray(objects) && objects.length === 0) ||
      (isPlainObject(include) && Object.keys(include).length === 0)) {
    // The objects are empty
    return process.nextTick(function() {
      cb && cb(null, objects);
    });
  }

  include = normalizeInclude(include);

  // Find the limit of items for 'inq'
  var inqLimit = 256;
  if (self.dataSource && self.dataSource.settings &&
    self.dataSource.settings.inqLimit) {
    inqLimit = self.dataSource.settings.inqLimit;
  }

  async.each(include, function(item, callback) {
    processIncludeItem(objects, item, options, callback);
  }, function(err) {
    cb && cb(err, objects);
  });

<span class="apidocCodeCommentSpan">  /**
   * Find related items with an array of foreign keys by page
   * @param model The model class
   * @param filter The query filter
   * @param fkName The name of the foreign key property
   * @param pageSize The size of page
   * @param options Options
   * @param cb
   */
</span>  function findWithForeignKeysByPage(model, filter, fkName, pageSize, options, cb) {
    var foreignKeys = [];
    if (filter.where[fkName]) {
      foreignKeys = filter.where[fkName].inq;
    } else if (filter.where.and) {
      // The inq can be embedded inside 'and: []'. No or: [] is needed as
      // include only uses and. We only deal with the generated inq for include.
      for (var j in filter.where.and) {
        if (filter.where.and[j][fkName] &&
          Array.isArray(filter.where.and[j][fkName].inq)) {
          foreignKeys = filter.where.and[j][fkName].inq;
          break;
        }
      }
    }
    if (!foreignKeys.length) {
      return cb(null, []);
    }
    if (filter.limit || filter.skip || filter.offset) {
      // Force the find to be performed per FK to honor the pagination
      pageSize = 1;
    }
    var size = foreignKeys.length;
    if (size > inqLimit && pageSize <= 0) {
      pageSize = inqLimit;
    }
    if (pageSize <= 0) {
      return model.find(filter, options, cb);
    }

    var listOfFKs = [];

    for (var i = 0; i < size; i += pageSize) {
      var end = i + pageSize;
      if (end > size) {
        end = size;
      }
      listOfFKs.push(foreignKeys.slice(i, end));
    }

    var items = [];
    // Optimization: no need to resolve keys that are an empty array
    listOfFKs = listOfFKs.filter(function(keys) {
      return keys.length > 0;
    });
    async.each(listOfFKs, function(foreignKeys, done) {
      var newFilter = {};
      for (var f in filter) {
        newFilter[f] = filter[f];
      }
      if (filter.where) {
        newFilter.where = {};
        for (var w in filter.where) {
          newFilter.where[w] = filter.where[w];
        }
      }
      newFilter.where[fkName] = {
        inq: foreignKeys,
      };
      model.find(newFilter, options, function(err, results) {
        if (err) return done(err);
        items = items.concat(results);
        done();
      });
    }, function(err) {
      if (err) return cb(err);
      cb(null, items);
    });
  }

  function processIncludeItem(objs, include, options, cb) {
    var relations = self.relations;

    var relationName;
    var subInclude = null, scope = null;

    if (isPlainObject(include)) {
      relationName = Object.keys(include)[0];
      if (include[relationName] instanceof IncludeScope) {
        scope = include[relationName];
        subInclude = scope.include();
      } else {
        subInclude = include[relationName];
        // when include = {user:true}, it does not have subInclude
        if (subInclude === true) {
          subInclude = null;
        }
      }
    } else {
      relationName = include;
      subInclude = null;
    }

    var relation = relations[relationName];
    if (!relation) {
      cb(new Error(g.f('Relation "%s" is not defined for %s model', relationName, self.modelName)));
      return;
    }
    var polymorphic = relation.p ...
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.DataSource.DataAccessObject.lookupModel"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.</span>lookupModel (data)](#apidoc.element.loopback.DataSource.DataAccessObject.lookupModel)
- description and source-code
```javascript
lookupModel = function (data) {
  return this;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.DataSource.DataAccessObject.normalizeInclude"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.</span>normalizeInclude (include)](#apidoc.element.loopback.DataSource.DataAccessObject.normalizeInclude)
- description and source-code
```javascript
function normalizeInclude(include) {
  var newInclude;
  if (typeof include === 'string') {
    return [include];
  } else if (isPlainObject(include)) {
    // Build an array of key/value pairs
    newInclude = [];
    var rel = include.rel || include.relation;
    var obj = {};
    if (typeof rel === 'string') {
      obj[rel] = new IncludeScope(include.scope);
      newInclude.push(obj);
    } else {
      for (var key in include) {
        obj[key] = include[key];
        newInclude.push(obj);
      }
    }
    return newInclude;
  } else if (Array.isArray(include)) {
    newInclude = [];
    for (var i = 0, n = include.length; i < n; i++) {
      var subIncludes = normalizeInclude(include[i]);
      newInclude = newInclude.concat(subIncludes);
    }
    return newInclude;
  } else {
    return include;
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.DataSource.DataAccessObject.patchOrCreate"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.</span>patchOrCreate (data, options, cb)](#apidoc.element.loopback.DataSource.DataAccessObject.patchOrCreate)
- description and source-code
```javascript
patchOrCreate = function (data, options, cb) {
  var connectionPromise = stillConnecting(this.getDataSource(), this, arguments);
  if (connectionPromise) {
    return connectionPromise;
  }

  if (options === undefined && cb === undefined) {
    if (typeof data === 'function') {
      // upsert(cb)
      cb = data;
      data = {};
    }
  } else if (cb === undefined) {
    if (typeof options === 'function') {
      // upsert(data, cb)
      cb = options;
      options = {};
    }
  }

  cb = cb || utils.createPromiseCallback();
  data = data || {};
  options = options || {};

  assert(typeof data === 'object', 'The data argument must be an object');
  assert(typeof options === 'object', 'The options argument must be an object');
  assert(typeof cb === 'function', 'The cb argument must be a function');

  if (Array.isArray(data)) {
    cb(new Error('updateOrCreate does not support bulk mode or any array input'));
    return cb.promise;
  }

  var hookState = {};

  var self = this;
  var Model = this;
  var connector = Model.getConnector();

  var id = getIdValue(this, data);
  if (id === undefined || id === null) {
    return this.create(data, options, cb);
  }

  var context = {
    Model: Model,
    query: byIdQuery(Model, id),
    hookState: hookState,
    options: options,
  };
  Model.notifyObserversOf('access', context, doUpdateOrCreate);

  function doUpdateOrCreate(err, ctx) {
    if (err) return cb(err);

    var isOriginalQuery = isWhereByGivenId(Model, ctx.query.where, id);
    if (connector.updateOrCreate && isOriginalQuery) {
      var context = {
        Model: Model,
        where: ctx.query.where,
        data: data,
        hookState: hookState,
        options: options,
      };
      Model.notifyObserversOf('before save', context, function(err, ctx) {
        if (err) return cb(err);

        data = ctx.data;
        var update = data;
        var inst = data;
        if (!(data instanceof Model)) {
          inst = new Model(data, {applyDefaultValues: false});
        }
        update = inst.toObject(false);

        Model.applyProperties(update, inst);
        Model = Model.lookupModel(update);

        var connector = self.getConnector();

        var doValidate = undefined;
        if (options.validate === undefined) {
          if (Model.settings.validateUpsert === undefined) {
            if (Model.settings.automaticValidation !== undefined) {
              doValidate = Model.settings.automaticValidation;
            }
          } else {
            doValidate = Model.settings.validateUpsert;
          }
        } else {
          doValidate = options.validate;
        }

        if (doValidate === false) {
          callConnector();
        } else {
          inst.isValid(function(valid) {
            if (!valid) {
              if (doValidate) { // backwards compatibility with validateUpsert:undefined
                return cb(new ValidationError(inst), inst);
              } else {
                // TODO(bajtos) Remove validateUpsert:undefined in v3.0
                g.warn('Ignoring validation errors in {{updateOrCreate()}}:');
                g.warn('  %s', new ValidationError(inst).message);
                // continue with updateOrCreate
              }
            }
            callConnector();
          }, update, options);
        }

        function callConnector() {
          update = removeUndefined(update);
          context = {
            Model: Model,
            where: ctx.where,
            data: update,
            currentInstance: inst,
            hookState: ctx.hookState,
            options: options,
          };
          Model.notifyObserversOf('persist', context, function(err) {
            if (err) return done(err);
            if (connector.updateOrCreate.length === 4) {
              connector.updateOrCreate(Model.modelName, update, options, done);
            } else {
              connector.updateOrCreate(Model.modelName, update, done);
            }
          });
        }
        function done(err, data, info) {
          if (err) return cb(err);
          var context = { ...
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.DataSource.DataAccessObject.patchOrCreateWithWhere"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.</span>patchOrCreateWithWhere (where, data, options, cb)](#apidoc.element.loopback.DataSource.DataAccessObject.patchOrCreateWithWhere)
- description and source-code
```javascript
patchOrCreateWithWhere = function (where, data, options, cb) {
  var connectionPromise = stillConnecting(this.getDataSource(), this, arguments);
  if (connectionPromise) { return connectionPromise; }
  if (cb === undefined) {
    if (typeof options === 'function') {
      // upsertWithWhere(where, data, cb)
      cb = options;
      options = {};
    }
  }
  cb = cb || utils.createPromiseCallback();
  options = options || {};
  assert(typeof where === 'object', 'The where argument must be an object');
  assert(typeof data === 'object', 'The data argument must be an object');
  assert(typeof options === 'object', 'The options argument must be an object');
  assert(typeof cb === 'function', 'The cb argument must be a function');
  if (Object.keys(data).length === 0) {
    var err = new Error('data object cannot be empty!');
    err.statusCode = 400;
    process.nextTick(function() { cb(err); });
    return cb.promise;
  }
  var hookState = {};
  var self = this;
  var Model = this;
  var connector = Model.getConnector();
  var modelName = Model.modelName;
  var query = {where: where};
  var context = {
    Model: Model,
    query: query,
    hookState: hookState,
    options: options,
  };
  Model.notifyObserversOf('access', context, doUpsertWithWhere);
  function doUpsertWithWhere(err, ctx) {
    if (err) return cb(err);
    ctx.data = data;
    if (connector.upsertWithWhere) {
      var context = {
        Model: Model,
        where: ctx.query.where,
        data: ctx.data,
        hookState: hookState,
        options: options,
      };
      Model.notifyObserversOf('before save', context, function(err, ctx) {
        if (err) return cb(err);
        data = ctx.data;
        var update = data;
        var inst = data;
        if (!(data instanceof Model)) {
          inst = new Model(data, {applyDefaultValues: false});
        }
        update = inst.toObject(false);
        Model.applyScope(query);
        Model.applyProperties(update, inst);
        Model = Model.lookupModel(update);
        if (options.validate === false) {
          return callConnector();
        }
        if (options.validate === undefined && Model.settings.automaticValidation === false) {
          return callConnector();
        }
        inst.isValid(function(valid) {
          if (!valid) return cb(new ValidationError(inst), inst);
          callConnector();
        }, update, options);

        function callConnector() {
          try {
            ctx.where = removeUndefined(ctx.where);
            ctx.where = Model._coerce(ctx.where, options);
            update = removeUndefined(update);
            update = Model._coerce(update, options);
          } catch (err) {
            return process.nextTick(function() {
              cb(err);
            });
          }
          context = {
            Model: Model,
            where: ctx.where,
            data: update,
            currentInstance: inst,
            hookState: ctx.hookState,
            options: options,
          };
          Model.notifyObserversOf('persist', context, function(err) {
            if (err) return done(err);
            connector.upsertWithWhere(modelName, ctx.where, update, options, done);
          });
        }
        function done(err, data, info) {
          if (err) return cb(err);
          var contxt = {
            Model: Model,
            data: data,
            isNewInstance: info && info.isNewInstance,
            hookState: ctx.hookState,
            options: options,
          };
          Model.notifyObserversOf('loaded', contxt, function(err) {
            if (err) return cb(err);
            var obj;
            if (contxt.data && !(contxt.data instanceof Model)) {
              inst._initProperties(contxt.data, {persisted: true});
              obj = inst;
            } else {
              obj = contxt.data;
            }
            var context = {
              Model: Model,
              instance: obj,
              isNewInstance: info ? info.isNewInstance : undefined,
              hookState: hookState,
              options: options,
            }; ...
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.DataSource.DataAccessObject.referencesMany"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.</span>referencesMany (modelTo, params)](#apidoc.element.loopback.DataSource.DataAccessObject.referencesMany)
- description and source-code
```javascript
function referencesMany(modelTo, params) {
  return RelationDefinition.referencesMany(this, modelTo, params);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.DataSource.DataAccessObject.remove"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.</span>remove (where, options, cb)](#apidoc.element.loopback.DataSource.DataAccessObject.remove)
- description and source-code
```javascript
function destroyAll(where, options, cb) {
  var connectionPromise = stillConnecting(this.getDataSource(), this, arguments);
  if (connectionPromise) {
    return connectionPromise;
  }

  var Model = this;
  var connector = Model.getConnector();

  assert(typeof connector.destroyAll === 'function',
    'destroyAll() must be implemented by the connector');

  if (options === undefined && cb === undefined) {
    if (typeof where === 'function') {
      cb = where;
      where = {};
    }
  } else if (cb === undefined) {
    if (typeof options === 'function') {
      cb = options;
      options = {};
    }
  }

  cb = cb || utils.createPromiseCallback();
  where = where || {};
  options = options || {};

  assert(typeof where === 'object', 'The where argument must be an object');
  assert(typeof options === 'object', 'The options argument must be an object');
  assert(typeof cb === 'function', 'The cb argument must be a function');

  var hookState = {};

  var query = {where: where};
  this.applyScope(query);
  where = query.where;

  if (options.notify === false) {
    doDelete(where);
  } else {
    query = {where: whereIsEmpty(where) ? {} : where};
    var context = {
      Model: Model,
      query: query,
      hookState: hookState,
      options: options,
    };
    Model.notifyObserversOf('access', context, function(err, ctx) {
      if (err) return cb(err);
      var context = {
        Model: Model,
        where: ctx.query.where,
        hookState: hookState,
        options: options,
      };
      Model.notifyObserversOf('before delete', context, function(err, ctx) {
        if (err) return cb(err);
        doDelete(ctx.where);
      });
    });
  }

  function doDelete(where) {
    var context = {
      Model: Model,
      where: whereIsEmpty(where) ? {} : where,
      hookState: hookState,
      options: options,
    };

    if (whereIsEmpty(where)) {
      if (connector.destroyAll.length === 4) {
        connector.destroyAll(Model.modelName, {}, options, done);
      } else {
        connector.destroyAll(Model.modelName, {}, done);
      }
    } else {
      try {
        // Support an optional where object
        where = removeUndefined(where);
        where = Model._coerce(where, options);
      } catch (err) {
        return process.nextTick(function() {
          cb(err);
        });
      }

      if (connector.destroyAll.length === 4) {
        connector.destroyAll(Model.modelName, where, options, done);
      } else {
        connector.destroyAll(Model.modelName, where, done);
      }
    }

    function done(err, info) {
      if (err) return cb(err);

      if (options.notify === false) {
        return cb(err, info);
      }

      var context = {
        Model: Model,
        where: where,
        hookState: hookState,
        options: options,
      };
      Model.notifyObserversOf('after delete', context, function(err) {
        cb(err, info);
      });
    }
  }
  return cb.promise;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.DataSource.DataAccessObject.removeById"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.</span>removeById (id, options, cb)](#apidoc.element.loopback.DataSource.DataAccessObject.removeById)
- description and source-code
```javascript
function deleteById(id, options, cb) {
  var connectionPromise = stillConnecting(this.getDataSource(), this, arguments);
  if (connectionPromise) {
    return connectionPromise;
  }

  assert(arguments.length >= 1, 'The id argument is required');
  if (cb === undefined) {
    if (typeof options === 'function') {
      // destroyById(id, cb)
      cb = options;
      options = {};
    }
  }

  options = options || {};
  cb = cb || utils.createPromiseCallback();

  assert(typeof options === 'object', 'The options argument must be an object');
  assert(typeof cb === 'function', 'The cb argument must be a function');

  if (isPKMissing(this, cb)) {
    return cb.promise;
  } else if (id == null || id === '') {
    process.nextTick(function() {
      cb(new Error(g.f('{{Model::deleteById}} requires the apidoc.element.loopback.DataSource.DataAccessObject.removeById argument')));
    });
    return cb.promise;
  }

  var Model = this;

  this.remove(byIdQuery(this, id).where, options, function(err, info) {
    if (err) return cb(err);
    var deleted = info && info.count > 0;
    if (Model.settings.strictDelete && !deleted) {
      err = new Error(g.f('No instance with apidoc.element.loopback.DataSource.DataAccessObject.removeById %s found for %s', id, Model.modelName));
      err.code = 'NOT_FOUND';
      err.statusCode = 404;
      return cb(err);
    }

    cb(null, info);
  });
  return cb.promise;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.DataSource.DataAccessObject.replaceById"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.</span>replaceById (id, data, options, cb)](#apidoc.element.loopback.DataSource.DataAccessObject.replaceById)
- description and source-code
```javascript
replaceById = function (id, data, options, cb) {
  var connectionPromise = stillConnecting(this.getDataSource(), this, arguments);
  if (connectionPromise) {
    return connectionPromise;
  }

  if (cb === undefined) {
    if (typeof options === 'function') {
      cb = options;
      options = {};
    }
  }

  cb = cb || utils.createPromiseCallback();
  options = options || {};

  assert((typeof data === 'object') && (data !== null),
          'The data argument must be an object');
  assert(typeof options === 'object', 'The options argument must be an object');
  assert(typeof cb === 'function', 'The cb argument must be a function');

  var connector = this.getConnector();

  var err;
  if (typeof connector.replaceById !== 'function') {
    err = new Error(g.f(
      'The connector %s does not support {{replaceById}} operation. This is not a bug in LoopBack. ' +
      'Please contact the authors of the connector, preferably via GitHub issues.',
      connector.name));
    return cb(err);
  }

  var pkName = idName(this);
  if (!data[pkName]) data[pkName] = id;

  var Model = this;
  var inst = new Model(data, {persisted: true});
  var enforced = {};
  this.applyProperties(enforced, inst);
  inst.setAttributes(enforced);
  Model = this.lookupModel(data); // data-specific
  if (Model !== inst.constructor) inst = new Model(data);
  var strict = inst.__strict;

  if (isPKMissing(Model, cb))
    return cb.promise;

  var model = Model.modelName;
  var hookState = {};

  if (id !== data[pkName]) {
    err = new Error(g.f('apidoc.element.loopback.DataSource.DataAccessObject.replaceById property (%s) ' +
            'cannot be updated from %s to %s', pkName, id, data[pkName]));
    err.statusCode = 400;
    process.nextTick(function() { cb(err); });
    return cb.promise;
  }

  var context = {
    Model: Model,
    instance: inst,
    isNewInstance: false,
    hookState: hookState,
    options: options,
  };

  Model.notifyObserversOf('before save', context, function(err, ctx) {
    if (err) return cb(err);

    if (ctx.instance[pkName] !== id && !Model._warned.cannotOverwritePKInBeforeSaveHook) {
      Model._warned.cannotOverwritePKInBeforeSaveHook = true;
      g.warn('WARNING: apidoc.element.loopback.DataSource.DataAccessObject.replaceById property cannot be changed from %s to %s for model:%s ' +
        'in {{\'before save\'}} operation hook', id, inst[pkName], Model.modelName);
    }

    data = inst.toObject(false);

    if (strict) {
      applyStrictCheck(Model, strict, data, inst, validateAndCallConnector);
    } else {
      validateAndCallConnector(null, data);
    }

    function validateAndCallConnector(err, data) {
      if (err) return cb(err);
      data = removeUndefined(data);
      // update instance's properties
      inst.setAttributes(data);

      var doValidate = true;
      if (options.validate === undefined) {
        if (Model.settings.automaticValidation !== undefined) {
          doValidate = Model.settings.automaticValidation;
        }
      } else {
        doValidate = options.validate;
      }

      if (doValidate) {
        inst.isValid(function(valid) {
          if (!valid) return cb(new ValidationError(inst), inst);

          callConnector();
        }, data, options);
      } else {
        callConnector();
      }

      function callConnector() {
        copyData(data, inst);
        var typedData = convertSubsetOfPropertiesByType(inst, data);
        context.data = typedData;

        function replaceCallback(err, data) {
          if (err) return cb(err);

          var ctx = {
            Model: Model,
            hookState: hookState,
            data: context.data,
            isNewInstance: false,
            options: options,
          };
          Model.notifyObserversOf('loaded', ctx, function(err) {
            if (err) return cb(err);

            if (ctx.data[pkName] !== id && !Model._warned.cannotOverwritePKInLoadedHook) {
              Model._warned.cannotOverwritePKInLoadedHook = true;
              g.warn('WARNING: apidoc.element.loopback.DataSource.DataAccessObject.replaceById property cannot be changed from %s to %s for model:%s in ' +
                '{{\'loaded\'}} operation hook',
                id, ctx.data[pkName], Model.modelName); ...
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.DataSource.DataAccessObject.replaceOrCreate"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.</span>replaceOrCreate (data, options, cb)](#apidoc.element.loopback.DataSource.DataAccessObject.replaceOrCreate)
- description and source-code
```javascript
function replaceOrCreate(data, options, cb) {
  var connectionPromise = stillConnecting(this.getDataSource(), this, arguments);
  if (connectionPromise) {
    return connectionPromise;
  }

  if (cb === undefined) {
    if (typeof options === 'function') {
      // replaceOrCreta(data,cb)
      cb = options;
      options = {};
    }
  }

  cb = cb || utils.createPromiseCallback();
  data = data || {};
  options = options || {};

  assert(typeof data === 'object', 'The data argument must be an object');
  assert(typeof options === 'object', 'The options argument must be an object');
  assert(typeof cb === 'function', 'The cb argument must be a function');

  var hookState = {};

  var self = this;
  var Model = this;
  var connector = Model.getConnector();

  var id = getIdValue(this, data);
  if (id === undefined || id === null) {
    return this.create(data, options, cb);
  }

  var forceId = this.settings.forceId;
  if (forceId) {
    return Model.replaceById(id, data, options, cb);
  }

  var inst;
  if (data instanceof Model) {
    inst = data;
  } else {
    inst = new Model(data);
  }

  var strict = inst.__strict;
  var context = {
    Model: Model,
    query: byIdQuery(Model, id),
    hookState: hookState,
    options: options,
  };
  Model.notifyObserversOf('access', context, doReplaceOrCreate);

  function doReplaceOrCreate(err, ctx) {
    if (err) return cb(err);

    var isOriginalQuery = isWhereByGivenId(Model, ctx.query.where, id);
    var where = ctx.query.where;
    if (connector.replaceOrCreate && isOriginalQuery) {
      var context = {
        Model: Model,
        instance: inst,
        hookState: hookState,
        options: options,
      };
      Model.notifyObserversOf('before save', context, function(err, ctx) {
        if (err) return cb(err);
        var update = inst.toObject(false);
        if (strict) {
          applyStrictCheck(Model, strict, update, inst, validateAndCallConnector);
        } else {
          validateAndCallConnector();
        }

        function validateAndCallConnector(err) {
          if (err) return cb(err);
          Model.applyProperties(update, inst);
          Model = Model.lookupModel(update);

          var connector = self.getConnector();

          if (options.validate === false) {
            return callConnector();
          }

          // only when options.validate is not set, take model-setting into consideration
          if (options.validate === undefined && Model.settings.automaticValidation === false) {
            return callConnector();
          }

          inst.isValid(function(valid) {
            if (!valid) return cb(new ValidationError(inst), inst);
            callConnector();
          }, update, options);

          function callConnector() {
            update = removeUndefined(update);
            context = {
              Model: Model,
              where: where,
              data: update,
              currentInstance: inst,
              hookState: ctx.hookState,
              options: options,
            };
            Model.notifyObserversOf('persist', context, function(err) {
              if (err) return done(err);
              connector.replaceOrCreate(Model.modelName, context.data, options, done);
            });
          }
          function done(err, data, info) {
            if (err) return cb(err);
            var context = {
              Model: Model,
              data: data,
              isNewInstance: info ? info.isNewInstance : undefined,
              hookState: ctx.hookState,
              options: options,
            };
            Model.notifyObserversOf('loaded', context, function(err) {
              if (err) return cb(err);

              var obj;
              if (data && !(data instanceof Model)) {
                inst._initProperties(data, {persisted: true});
                obj = inst;
              } else {
                obj = data;
              }
              if (err) {
                cb(err, obj);
              } else {
                var context = {
                  Model: Model, ...
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.DataSource.DataAccessObject.scope"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.</span>scope (name, query, targetClass, methods, options)](#apidoc.element.loopback.DataSource.DataAccessObject.scope)
- description and source-code
```javascript
scope = function (name, query, targetClass, methods, options) {
  var cls = this;
  if (options && options.isStatic === false) {
    cls = cls.prototype;
  }
  return defineScope(cls, targetClass || cls, name, query, methods, options);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.DataSource.DataAccessObject.update"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.</span>update (where, data, options, cb)](#apidoc.element.loopback.DataSource.DataAccessObject.update)
- description and source-code
```javascript
update = function (where, data, options, cb) {
  var connectionPromise = stillConnecting(this.getDataSource(), this, arguments);
  if (connectionPromise) {
    return connectionPromise;
  }

  assert(arguments.length >= 1, 'At least one argument is required');

  if (data === undefined && options === undefined && cb === undefined && arguments.length === 1) {
    data = where;
    where = {};
  } else if (options === undefined && cb === undefined) {
    // One of:
    // updateAll(data, cb)
    // updateAll(where, data) -> Promise
    if (typeof data === 'function') {
      cb = data;
      data = where;
      where = {};
    }
  } else if (cb === undefined) {
    // One of:
    // updateAll(where, data, options) -> Promise
    // updateAll(where, data, cb)
    if (typeof options === 'function') {
      cb = options;
      options = {};
    }
  }

  data = data || {};
  options = options || {};
  cb = cb || utils.createPromiseCallback();

  assert(typeof where === 'object', 'The where argument must be an object');
  assert(typeof data === 'object', 'The data argument must be an object');
  assert(typeof options === 'object', 'The options argument must be an object');
  assert(typeof cb === 'function', 'The cb argument must be a function');

  var Model = this;
  var connector = Model.getDataSource().connector;
  assert(typeof connector.update === 'function',
    'update() must be implemented by the connector');

  var hookState = {};

  var query = {where: where};
  this.applyScope(query);
  this.applyProperties(data);

  where = query.where;

  var context = {
    Model: Model,
    query: {where: where},
    hookState: hookState,
    options: options,
  };
  Model.notifyObserversOf('access', context, function(err, ctx) {
    if (err) return cb(err);
    var context = {
      Model: Model,
      where: ctx.query.where,
      data: data,
      hookState: hookState,
      options: options,
    };
    Model.notifyObserversOf('before save', context,
      function(err, ctx) {
        if (err) return cb(err);
        doUpdate(ctx.where, ctx.data);
      });
  });

  function doUpdate(where, data) {
    try {
      where = removeUndefined(where);
      where = Model._coerce(where, options);
      data = removeUndefined(data);
      data = Model._coerce(data, options);
    } catch (err) {
      return process.nextTick(function() {
        cb(err);
      });
    }

    function updateCallback(err, info) {
      if (err) return cb(err);

      var context = {
        Model: Model,
        where: where,
        data: data,
        hookState: hookState,
        options: options,
      };
      Model.notifyObserversOf('after save', context, function(err, ctx) {
        return cb(err, info);
      });
    }

    var context = {
      Model: Model,
      where: where,
      data: data,
      hookState: hookState,
      options: options,
    };
    Model.notifyObserversOf('persist', context, function(err, ctx) {
      if (err) return cb(err);

      if (connector.update.length === 5) {
        connector.update(Model.modelName, where, data, options, updateCallback);
      } else {
        connector.update(Model.modelName, where, data, updateCallback);
      }
    });
  }
  return cb.promise;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.DataSource.DataAccessObject.updateAll"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.</span>updateAll (where, data, options, cb)](#apidoc.element.loopback.DataSource.DataAccessObject.updateAll)
- description and source-code
```javascript
updateAll = function (where, data, options, cb) {
  var connectionPromise = stillConnecting(this.getDataSource(), this, arguments);
  if (connectionPromise) {
    return connectionPromise;
  }

  assert(arguments.length >= 1, 'At least one argument is required');

  if (data === undefined && options === undefined && cb === undefined && arguments.length === 1) {
    data = where;
    where = {};
  } else if (options === undefined && cb === undefined) {
    // One of:
    // updateAll(data, cb)
    // updateAll(where, data) -> Promise
    if (typeof data === 'function') {
      cb = data;
      data = where;
      where = {};
    }
  } else if (cb === undefined) {
    // One of:
    // updateAll(where, data, options) -> Promise
    // updateAll(where, data, cb)
    if (typeof options === 'function') {
      cb = options;
      options = {};
    }
  }

  data = data || {};
  options = options || {};
  cb = cb || utils.createPromiseCallback();

  assert(typeof where === 'object', 'The where argument must be an object');
  assert(typeof data === 'object', 'The data argument must be an object');
  assert(typeof options === 'object', 'The options argument must be an object');
  assert(typeof cb === 'function', 'The cb argument must be a function');

  var Model = this;
  var connector = Model.getDataSource().connector;
  assert(typeof connector.update === 'function',
    'update() must be implemented by the connector');

  var hookState = {};

  var query = {where: where};
  this.applyScope(query);
  this.applyProperties(data);

  where = query.where;

  var context = {
    Model: Model,
    query: {where: where},
    hookState: hookState,
    options: options,
  };
  Model.notifyObserversOf('access', context, function(err, ctx) {
    if (err) return cb(err);
    var context = {
      Model: Model,
      where: ctx.query.where,
      data: data,
      hookState: hookState,
      options: options,
    };
    Model.notifyObserversOf('before save', context,
      function(err, ctx) {
        if (err) return cb(err);
        doUpdate(ctx.where, ctx.data);
      });
  });

  function doUpdate(where, data) {
    try {
      where = removeUndefined(where);
      where = Model._coerce(where, options);
      data = removeUndefined(data);
      data = Model._coerce(data, options);
    } catch (err) {
      return process.nextTick(function() {
        cb(err);
      });
    }

    function updateCallback(err, info) {
      if (err) return cb(err);

      var context = {
        Model: Model,
        where: where,
        data: data,
        hookState: hookState,
        options: options,
      };
      Model.notifyObserversOf('after save', context, function(err, ctx) {
        return cb(err, info);
      });
    }

    var context = {
      Model: Model,
      where: where,
      data: data,
      hookState: hookState,
      options: options,
    };
    Model.notifyObserversOf('persist', context, function(err, ctx) {
      if (err) return cb(err);

      if (connector.update.length === 5) {
        connector.update(Model.modelName, where, data, options, updateCallback);
      } else {
        connector.update(Model.modelName, where, data, updateCallback);
      }
    });
  }
  return cb.promise;
}
```
- example usage
```shell
...

  /**
* Update multiple instances that match the where clause.
*
* Example:
*
*'''js
* Employee.updateAll({managerId: 'x001'}, {managerId: 'x002'}, function(err, info) {
*     ...
* });
* '''
*
* @param {Object} [where] Optional 'where' filter, like
* '''
* { key: val, key2: {gt: 'val2'}, ...}
...
```

#### <a name="apidoc.element.loopback.DataSource.DataAccessObject.updateOrCreate"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.</span>updateOrCreate (data, options, cb)](#apidoc.element.loopback.DataSource.DataAccessObject.updateOrCreate)
- description and source-code
```javascript
updateOrCreate = function (data, options, cb) {
  var connectionPromise = stillConnecting(this.getDataSource(), this, arguments);
  if (connectionPromise) {
    return connectionPromise;
  }

  if (options === undefined && cb === undefined) {
    if (typeof data === 'function') {
      // upsert(cb)
      cb = data;
      data = {};
    }
  } else if (cb === undefined) {
    if (typeof options === 'function') {
      // upsert(data, cb)
      cb = options;
      options = {};
    }
  }

  cb = cb || utils.createPromiseCallback();
  data = data || {};
  options = options || {};

  assert(typeof data === 'object', 'The data argument must be an object');
  assert(typeof options === 'object', 'The options argument must be an object');
  assert(typeof cb === 'function', 'The cb argument must be a function');

  if (Array.isArray(data)) {
    cb(new Error('updateOrCreate does not support bulk mode or any array input'));
    return cb.promise;
  }

  var hookState = {};

  var self = this;
  var Model = this;
  var connector = Model.getConnector();

  var id = getIdValue(this, data);
  if (id === undefined || id === null) {
    return this.create(data, options, cb);
  }

  var context = {
    Model: Model,
    query: byIdQuery(Model, id),
    hookState: hookState,
    options: options,
  };
  Model.notifyObserversOf('access', context, doUpdateOrCreate);

  function doUpdateOrCreate(err, ctx) {
    if (err) return cb(err);

    var isOriginalQuery = isWhereByGivenId(Model, ctx.query.where, id);
    if (connector.updateOrCreate && isOriginalQuery) {
      var context = {
        Model: Model,
        where: ctx.query.where,
        data: data,
        hookState: hookState,
        options: options,
      };
      Model.notifyObserversOf('before save', context, function(err, ctx) {
        if (err) return cb(err);

        data = ctx.data;
        var update = data;
        var inst = data;
        if (!(data instanceof Model)) {
          inst = new Model(data, {applyDefaultValues: false});
        }
        update = inst.toObject(false);

        Model.applyProperties(update, inst);
        Model = Model.lookupModel(update);

        var connector = self.getConnector();

        var doValidate = undefined;
        if (options.validate === undefined) {
          if (Model.settings.validateUpsert === undefined) {
            if (Model.settings.automaticValidation !== undefined) {
              doValidate = Model.settings.automaticValidation;
            }
          } else {
            doValidate = Model.settings.validateUpsert;
          }
        } else {
          doValidate = options.validate;
        }

        if (doValidate === false) {
          callConnector();
        } else {
          inst.isValid(function(valid) {
            if (!valid) {
              if (doValidate) { // backwards compatibility with validateUpsert:undefined
                return cb(new ValidationError(inst), inst);
              } else {
                // TODO(bajtos) Remove validateUpsert:undefined in v3.0
                g.warn('Ignoring validation errors in {{updateOrCreate()}}:');
                g.warn('  %s', new ValidationError(inst).message);
                // continue with updateOrCreate
              }
            }
            callConnector();
          }, update, options);
        }

        function callConnector() {
          update = removeUndefined(update);
          context = {
            Model: Model,
            where: ctx.where,
            data: update,
            currentInstance: inst,
            hookState: ctx.hookState,
            options: options,
          };
          Model.notifyObserversOf('persist', context, function(err) {
            if (err) return done(err);
            if (connector.updateOrCreate.length === 4) {
              connector.updateOrCreate(Model.modelName, update, options, done);
            } else {
              connector.updateOrCreate(Model.modelName, update, done);
            }
          });
        }
        function done(err, data, info) {
          if (err) return cb(err);
          var context = { ...
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.DataSource.DataAccessObject.upsert"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.</span>upsert (data, options, cb)](#apidoc.element.loopback.DataSource.DataAccessObject.upsert)
- description and source-code
```javascript
upsert = function (data, options, cb) {
  var connectionPromise = stillConnecting(this.getDataSource(), this, arguments);
  if (connectionPromise) {
    return connectionPromise;
  }

  if (options === undefined && cb === undefined) {
    if (typeof data === 'function') {
      // upsert(cb)
      cb = data;
      data = {};
    }
  } else if (cb === undefined) {
    if (typeof options === 'function') {
      // upsert(data, cb)
      cb = options;
      options = {};
    }
  }

  cb = cb || utils.createPromiseCallback();
  data = data || {};
  options = options || {};

  assert(typeof data === 'object', 'The data argument must be an object');
  assert(typeof options === 'object', 'The options argument must be an object');
  assert(typeof cb === 'function', 'The cb argument must be a function');

  if (Array.isArray(data)) {
    cb(new Error('updateOrCreate does not support bulk mode or any array input'));
    return cb.promise;
  }

  var hookState = {};

  var self = this;
  var Model = this;
  var connector = Model.getConnector();

  var id = getIdValue(this, data);
  if (id === undefined || id === null) {
    return this.create(data, options, cb);
  }

  var context = {
    Model: Model,
    query: byIdQuery(Model, id),
    hookState: hookState,
    options: options,
  };
  Model.notifyObserversOf('access', context, doUpdateOrCreate);

  function doUpdateOrCreate(err, ctx) {
    if (err) return cb(err);

    var isOriginalQuery = isWhereByGivenId(Model, ctx.query.where, id);
    if (connector.updateOrCreate && isOriginalQuery) {
      var context = {
        Model: Model,
        where: ctx.query.where,
        data: data,
        hookState: hookState,
        options: options,
      };
      Model.notifyObserversOf('before save', context, function(err, ctx) {
        if (err) return cb(err);

        data = ctx.data;
        var update = data;
        var inst = data;
        if (!(data instanceof Model)) {
          inst = new Model(data, {applyDefaultValues: false});
        }
        update = inst.toObject(false);

        Model.applyProperties(update, inst);
        Model = Model.lookupModel(update);

        var connector = self.getConnector();

        var doValidate = undefined;
        if (options.validate === undefined) {
          if (Model.settings.validateUpsert === undefined) {
            if (Model.settings.automaticValidation !== undefined) {
              doValidate = Model.settings.automaticValidation;
            }
          } else {
            doValidate = Model.settings.validateUpsert;
          }
        } else {
          doValidate = options.validate;
        }

        if (doValidate === false) {
          callConnector();
        } else {
          inst.isValid(function(valid) {
            if (!valid) {
              if (doValidate) { // backwards compatibility with validateUpsert:undefined
                return cb(new ValidationError(inst), inst);
              } else {
                // TODO(bajtos) Remove validateUpsert:undefined in v3.0
                g.warn('Ignoring validation errors in {{updateOrCreate()}}:');
                g.warn('  %s', new ValidationError(inst).message);
                // continue with updateOrCreate
              }
            }
            callConnector();
          }, update, options);
        }

        function callConnector() {
          update = removeUndefined(update);
          context = {
            Model: Model,
            where: ctx.where,
            data: update,
            currentInstance: inst,
            hookState: ctx.hookState,
            options: options,
          };
          Model.notifyObserversOf('persist', context, function(err) {
            if (err) return done(err);
            if (connector.updateOrCreate.length === 4) {
              connector.updateOrCreate(Model.modelName, update, options, done);
            } else {
              connector.updateOrCreate(Model.modelName, update, done);
            }
          });
        }
        function done(err, data, info) {
          if (err) return cb(err);
          var context = { ...
```
- example usage
```shell
...
  }
});

// then save
function save() {
  inst.trigger('save', function(saveDone) {
    inst.trigger('update', function(updateDone) {
      Model.upsert(inst, function(err) {
        inst._initProperties(data);
        updateDone.call(inst, function() {
          saveDone.call(inst, function() {
            callback(err, inst);
          });
        });
      });
...
```

#### <a name="apidoc.element.loopback.DataSource.DataAccessObject.upsertWithWhere"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.</span>upsertWithWhere (where, data, options, cb)](#apidoc.element.loopback.DataSource.DataAccessObject.upsertWithWhere)
- description and source-code
```javascript
upsertWithWhere = function (where, data, options, cb) {
  var connectionPromise = stillConnecting(this.getDataSource(), this, arguments);
  if (connectionPromise) { return connectionPromise; }
  if (cb === undefined) {
    if (typeof options === 'function') {
      // upsertWithWhere(where, data, cb)
      cb = options;
      options = {};
    }
  }
  cb = cb || utils.createPromiseCallback();
  options = options || {};
  assert(typeof where === 'object', 'The where argument must be an object');
  assert(typeof data === 'object', 'The data argument must be an object');
  assert(typeof options === 'object', 'The options argument must be an object');
  assert(typeof cb === 'function', 'The cb argument must be a function');
  if (Object.keys(data).length === 0) {
    var err = new Error('data object cannot be empty!');
    err.statusCode = 400;
    process.nextTick(function() { cb(err); });
    return cb.promise;
  }
  var hookState = {};
  var self = this;
  var Model = this;
  var connector = Model.getConnector();
  var modelName = Model.modelName;
  var query = {where: where};
  var context = {
    Model: Model,
    query: query,
    hookState: hookState,
    options: options,
  };
  Model.notifyObserversOf('access', context, doUpsertWithWhere);
  function doUpsertWithWhere(err, ctx) {
    if (err) return cb(err);
    ctx.data = data;
    if (connector.upsertWithWhere) {
      var context = {
        Model: Model,
        where: ctx.query.where,
        data: ctx.data,
        hookState: hookState,
        options: options,
      };
      Model.notifyObserversOf('before save', context, function(err, ctx) {
        if (err) return cb(err);
        data = ctx.data;
        var update = data;
        var inst = data;
        if (!(data instanceof Model)) {
          inst = new Model(data, {applyDefaultValues: false});
        }
        update = inst.toObject(false);
        Model.applyScope(query);
        Model.applyProperties(update, inst);
        Model = Model.lookupModel(update);
        if (options.validate === false) {
          return callConnector();
        }
        if (options.validate === undefined && Model.settings.automaticValidation === false) {
          return callConnector();
        }
        inst.isValid(function(valid) {
          if (!valid) return cb(new ValidationError(inst), inst);
          callConnector();
        }, update, options);

        function callConnector() {
          try {
            ctx.where = removeUndefined(ctx.where);
            ctx.where = Model._coerce(ctx.where, options);
            update = removeUndefined(update);
            update = Model._coerce(update, options);
          } catch (err) {
            return process.nextTick(function() {
              cb(err);
            });
          }
          context = {
            Model: Model,
            where: ctx.where,
            data: update,
            currentInstance: inst,
            hookState: ctx.hookState,
            options: options,
          };
          Model.notifyObserversOf('persist', context, function(err) {
            if (err) return done(err);
            connector.upsertWithWhere(modelName, ctx.where, update, options, done);
          });
        }
        function done(err, data, info) {
          if (err) return cb(err);
          var contxt = {
            Model: Model,
            data: data,
            isNewInstance: info && info.isNewInstance,
            hookState: ctx.hookState,
            options: options,
          };
          Model.notifyObserversOf('loaded', contxt, function(err) {
            if (err) return cb(err);
            var obj;
            if (contxt.data && !(contxt.data instanceof Model)) {
              inst._initProperties(contxt.data, {persisted: true});
              obj = inst;
            } else {
              obj = contxt.data;
            }
            var context = {
              Model: Model,
              instance: obj,
              isNewInstance: info ? info.isNewInstance : undefined,
              hookState: hookState,
              options: options,
            }; ...
```
- example usage
```shell
n/a
```



# <a name="apidoc.module.loopback.DataSource.DataAccessObject.Transaction.prototype"></a>[module loopback.DataSource.DataAccessObject.Transaction.prototype](#apidoc.module.loopback.DataSource.DataAccessObject.Transaction.prototype)

#### <a name="apidoc.element.loopback.DataSource.DataAccessObject.Transaction.prototype._notifyBaseObservers"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.Transaction.prototype.</span>_notifyBaseObservers (operation, context, callback)](#apidoc.element.loopback.DataSource.DataAccessObject.Transaction.prototype._notifyBaseObservers)
- description and source-code
```javascript
_notifyBaseObservers = function (operation, context, callback) {
  if (this.base && this.base.notifyObserversOf)
    this.base.notifyObserversOf(operation, context, callback);
  else
    callback();
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.DataSource.DataAccessObject.Transaction.prototype.clearObservers"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.Transaction.prototype.</span>clearObservers (operation)](#apidoc.element.loopback.DataSource.DataAccessObject.Transaction.prototype.clearObservers)
- description and source-code
```javascript
clearObservers = function (operation) {
  if (!(this._observers && this._observers[operation])) return;

  this._observers[operation].length = 0;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.DataSource.DataAccessObject.Transaction.prototype.commit"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.Transaction.prototype.</span>commit (cb)](#apidoc.element.loopback.DataSource.DataAccessObject.Transaction.prototype.commit)
- description and source-code
```javascript
commit = function (cb) {
  var self = this;
  cb = cb || utils.createPromiseCallback();
  // Report an error if the transaction is not active
  if (!self.connection) {
    process.nextTick(function() {
      cb(new Error(g.f('The {{transaction}} is not active: %s', self.id)));
    });
    return cb.promise;
  }
  var context = {
    transaction: self,
    operation: 'commit',
  };

  function work(done) {
    self.connector.commit(self.connection, done);
  }

  self.notifyObserversAround('commit', context, work, function(err) {
    // Deference the connection to mark the transaction is not active
    // The connection should have been released back the pool
    self.connection = null;
    cb(err);
  });

  return cb.promise;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.DataSource.DataAccessObject.Transaction.prototype.notifyObserversAround"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.Transaction.prototype.</span>notifyObserversAround (operation, context, fn, callback)](#apidoc.element.loopback.DataSource.DataAccessObject.Transaction.prototype.notifyObserversAround)
- description and source-code
```javascript
notifyObserversAround = function (operation, context, fn, callback) {
  var self = this;
  context = context || {};
  // Add callback to the context object so that an observer can skip other
  // ones by calling the callback function directly and not calling next
  if (context.end === undefined) {
    context.end = callback;
  }
  // First notify before observers
  return self.notifyObserversOf('before ' + operation, context,
    function(err, context) {
      if (err) return callback(err);

      function cbForWork(err) {
        var args = [].slice.call(arguments, 0);
        if (err) return callback.apply(null, args);
        // Find the list of params from the callback in addition to err
        var returnedArgs = args.slice(1);
        // Set up the array of results
        context.results = returnedArgs;
        // Notify after observers
        self.notifyObserversOf('after ' + operation, context,
          function(err, context) {
            if (err) return callback(err, context);
            var results = returnedArgs;
            if (context && Array.isArray(context.results)) {
              // Pickup the results from context
              results = context.results;
            }
            // Build the list of params for final callback
            var args = [err].concat(results);
            callback.apply(null, args);
          });
      }

      if (fn.length === 1) {
        // fn(done)
        fn(cbForWork);
      } else {
        // fn(context, done)
        fn(context, cbForWork);
      }
    });
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.DataSource.DataAccessObject.Transaction.prototype.notifyObserversOf"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.Transaction.prototype.</span>notifyObserversOf (operation, context, callback)](#apidoc.element.loopback.DataSource.DataAccessObject.Transaction.prototype.notifyObserversOf)
- description and source-code
```javascript
notifyObserversOf = function (operation, context, callback) {
  var self = this;
  if (!callback) callback = utils.createPromiseCallback();

  function createNotifier(op) {
    return function(ctx, done) {
      if (typeof ctx === 'function' && done === undefined) {
        done = ctx;
        ctx = context;
      }
      self.notifyObserversOf(op, context, done);
    };
  }

  if (Array.isArray(operation)) {
    var tasks = [];
    for (var i = 0, n = operation.length; i < n; i++) {
      tasks.push(createNotifier(operation[i]));
    }
    return async.waterfall(tasks, callback);
  }

  var observers = this._observers && this._observers[operation];

  this._notifyBaseObservers(operation, context, function doNotify(err) {
    if (err) return callback(err, context);
    if (!observers || !observers.length) return callback(null, context);

    async.eachSeries(
      observers,
      function notifySingleObserver(fn, next) {
        var retval = fn(context, next);
        if (retval && typeof retval.then === 'function') {
          retval.then(
            function() { next(); return null; },
            next // error handler
          );
        }
      },
      function(err) { callback(err, context); }
    );
  });
  return callback.promise;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.DataSource.DataAccessObject.Transaction.prototype.observe"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.Transaction.prototype.</span>observe (operation, listener)](#apidoc.element.loopback.DataSource.DataAccessObject.Transaction.prototype.observe)
- description and source-code
```javascript
observe = function (operation, listener) {
  this._observers = this._observers || {};
  if (!this._observers[operation]) {
    this._observers[operation] = [];
  }

  this._observers[operation].push(listener);
}
```
- example usage
```shell
...
var idType = idProp && idProp.type;
var idDefn = idProp && idProp.defaultFn;
if (idType !== String || !(idDefn === 'uuid' || idDefn === 'guid')) {
  deprecated('The model ' + this.modelName + ' is tracking changes, ' +
    'which requires a string id with GUID/UUID default value.');
}

Model.observe('after save', rectifyOnSave);

Model.observe('after delete', rectifyOnDelete);

// Only run if the run time is server
// Can switch off cleanup by setting the interval to -1
if (runtime.isServer && cleanupInterval > 0) {
  // initial cleanup
...
```

#### <a name="apidoc.element.loopback.DataSource.DataAccessObject.Transaction.prototype.removeObserver"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.Transaction.prototype.</span>removeObserver (operation, listener)](#apidoc.element.loopback.DataSource.DataAccessObject.Transaction.prototype.removeObserver)
- description and source-code
```javascript
removeObserver = function (operation, listener) {
  if (!(this._observers && this._observers[operation])) return;

  var index = this._observers[operation].indexOf(listener);
  if (index !== -1) {
    return this._observers[operation].splice(index, 1);
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.DataSource.DataAccessObject.Transaction.prototype.rollback"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.Transaction.prototype.</span>rollback (cb)](#apidoc.element.loopback.DataSource.DataAccessObject.Transaction.prototype.rollback)
- description and source-code
```javascript
rollback = function (cb) {
  var self = this;
  cb = cb || utils.createPromiseCallback();
  // Report an error if the transaction is not active
  if (!self.connection) {
    process.nextTick(function() {
      cb(new Error(g.f('The {{transaction}} is not active: %s', self.id)));
    });
    return cb.promise;
  }
  var context = {
    transaction: self,
    operation: 'rollback',
  };

  function work(done) {
    self.connector.rollback(self.connection, done);
  }

  self.notifyObserversAround('rollback', context, work, function(err) {
    // Deference the connection to mark the transaction is not active
    // The connection should have been released back the pool
    self.connection = null;
    cb(err);
  });

  return cb.promise;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.DataSource.DataAccessObject.Transaction.prototype.toJSON"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.Transaction.prototype.</span>toJSON ()](#apidoc.element.loopback.DataSource.DataAccessObject.Transaction.prototype.toJSON)
- description and source-code
```javascript
toJSON = function () {
  return this.id;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.DataSource.DataAccessObject.Transaction.prototype.toString"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.Transaction.prototype.</span>toString ()](#apidoc.element.loopback.DataSource.DataAccessObject.Transaction.prototype.toString)
- description and source-code
```javascript
toString = function () {
  return this.id;
}
```
- example usage
```shell
...
  var ids = changes.map(function(change) {
    return change.getModelId();
  });
  filter.where[idName] = {inq: ids};
  model.find(filter, function(err, models) {
    if (err) return callback(err);
    var modelIds = models.map(function(m) {
      return m[idName].toString();
    });
    callback(null, changes.filter(function(ch) {
      if (ch.type() === Change.DELETE) return true;
      return modelIds.indexOf(ch.modelId) > -1;
    }));
  });
});
...
```



# <a name="apidoc.module.loopback.DataSource.DataAccessObject.prototype"></a>[module loopback.DataSource.DataAccessObject.prototype](#apidoc.module.loopback.DataSource.DataAccessObject.prototype)

#### <a name="apidoc.element.loopback.DataSource.DataAccessObject.prototype.delete"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.prototype.</span>delete (options, cb)](#apidoc.element.loopback.DataSource.DataAccessObject.prototype.delete)
- description and source-code
```javascript
delete = function (options, cb) {
  var connectionPromise = stillConnecting(this.getDataSource(), this, arguments);
  if (connectionPromise) {
    return connectionPromise;
  }

  if (cb === undefined && typeof options === 'function') {
    cb = options;
    options = {};
  }

  cb = cb || utils.createPromiseCallback();
  options = options || {};

  assert(typeof options === 'object', 'The options argument should be an object');
  assert(typeof cb === 'function', 'The cb argument should be a function');

  var inst = this;
  var connector = this.getConnector();

  var Model = this.constructor;
  var id = getIdValue(this.constructor, this);
  var hookState = {};

  if (isPKMissing(Model, cb))
    return cb.promise;

  var context = {
    Model: Model,
    query: byIdQuery(Model, id),
    hookState: hookState,
    options: options,
  };

  Model.notifyObserversOf('access', context, function(err, ctx) {
    if (err) return cb(err);
    var context = {
      Model: Model,
      where: ctx.query.where,
      instance: inst,
      hookState: hookState,
      options: options,
    };
    Model.notifyObserversOf('before delete', context, function(err, ctx) {
      if (err) return cb(err);
      doDeleteInstance(ctx.where);
    });
  });

  function doDeleteInstance(where) {
    if (!isWhereByGivenId(Model, where, id)) {
      // A hook modified the query, it is no longer
      // a simple 'delete model with the given id'.
      // We must switch to full query-based delete.
      Model.deleteAll(where, {notify: false}, function(err, info) {
        if (err) return cb(err, false);
        var deleted = info && info.count > 0;
        if (Model.settings.strictDelete && !deleted) {
          err = new Error(g.f('No instance with apidoc.element.loopback.DataSource.DataAccessObject.prototype.delete %s found for %s', id, Model.modelName));
          err.code = 'NOT_FOUND';
          err.statusCode = 404;
          return cb(err, false);
        }
        var context = {
          Model: Model,
          where: where,
          instance: inst,
          hookState: hookState,
          options: options,
        };
        Model.notifyObserversOf('after delete', context, function(err) {
          cb(err, info);
        });
      });
      return;
    }

    inst.trigger('destroy', function(destroyed) {
      function destroyCallback(err, info) {
        if (err) return cb(err);
        var deleted = info && info.count > 0;
        if (Model.settings.strictDelete && !deleted) {
          err = new Error(g.f('No instance with apidoc.element.loopback.DataSource.DataAccessObject.prototype.delete %s found for %s', id, Model.modelName));
          err.code = 'NOT_FOUND';
          err.statusCode = 404;
          return cb(err);
        }

        destroyed(function() {
          var context = {
            Model: Model,
            where: where,
            instance: inst,
            hookState: hookState,
            options: options,
          };
          Model.notifyObserversOf('after delete', context, function(err) {
            cb(err, info);
          });
        });
      }

      if (connector.destroy.length === 4) {
        connector.destroy(inst.constructor.modelName, id, options, destroyCallback);
      } else {
        connector.destroy(inst.constructor.modelName, id, destroyCallback);
      }
    }, null, cb);
  }
  return cb.promise;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.DataSource.DataAccessObject.prototype.destroy"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.prototype.</span>destroy (options, cb)](#apidoc.element.loopback.DataSource.DataAccessObject.prototype.destroy)
- description and source-code
```javascript
destroy = function (options, cb) {
  var connectionPromise = stillConnecting(this.getDataSource(), this, arguments);
  if (connectionPromise) {
    return connectionPromise;
  }

  if (cb === undefined && typeof options === 'function') {
    cb = options;
    options = {};
  }

  cb = cb || utils.createPromiseCallback();
  options = options || {};

  assert(typeof options === 'object', 'The options argument should be an object');
  assert(typeof cb === 'function', 'The cb argument should be a function');

  var inst = this;
  var connector = this.getConnector();

  var Model = this.constructor;
  var id = getIdValue(this.constructor, this);
  var hookState = {};

  if (isPKMissing(Model, cb))
    return cb.promise;

  var context = {
    Model: Model,
    query: byIdQuery(Model, id),
    hookState: hookState,
    options: options,
  };

  Model.notifyObserversOf('access', context, function(err, ctx) {
    if (err) return cb(err);
    var context = {
      Model: Model,
      where: ctx.query.where,
      instance: inst,
      hookState: hookState,
      options: options,
    };
    Model.notifyObserversOf('before delete', context, function(err, ctx) {
      if (err) return cb(err);
      doDeleteInstance(ctx.where);
    });
  });

  function doDeleteInstance(where) {
    if (!isWhereByGivenId(Model, where, id)) {
      // A hook modified the query, it is no longer
      // a simple 'delete model with the given id'.
      // We must switch to full query-based delete.
      Model.deleteAll(where, {notify: false}, function(err, info) {
        if (err) return cb(err, false);
        var deleted = info && info.count > 0;
        if (Model.settings.strictDelete && !deleted) {
          err = new Error(g.f('No instance with apidoc.element.loopback.DataSource.DataAccessObject.prototype.destroy %s found for %s', id, Model.modelName));
          err.code = 'NOT_FOUND';
          err.statusCode = 404;
          return cb(err, false);
        }
        var context = {
          Model: Model,
          where: where,
          instance: inst,
          hookState: hookState,
          options: options,
        };
        Model.notifyObserversOf('after delete', context, function(err) {
          cb(err, info);
        });
      });
      return;
    }

    inst.trigger('destroy', function(destroyed) {
      function destroyCallback(err, info) {
        if (err) return cb(err);
        var deleted = info && info.count > 0;
        if (Model.settings.strictDelete && !deleted) {
          err = new Error(g.f('No instance with apidoc.element.loopback.DataSource.DataAccessObject.prototype.destroy %s found for %s', id, Model.modelName));
          err.code = 'NOT_FOUND';
          err.statusCode = 404;
          return cb(err);
        }

        destroyed(function() {
          var context = {
            Model: Model,
            where: where,
            instance: inst,
            hookState: hookState,
            options: options,
          };
          Model.notifyObserversOf('after delete', context, function(err) {
            cb(err, info);
          });
        });
      }

      if (connector.destroy.length === 4) {
        connector.destroy(inst.constructor.modelName, id, options, destroyCallback);
      } else {
        connector.destroy(inst.constructor.modelName, id, destroyCallback);
      }
    }, null, cb);
  }
  return cb.promise;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.DataSource.DataAccessObject.prototype.getConnector"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.prototype.</span>getConnector ()](#apidoc.element.loopback.DataSource.DataAccessObject.prototype.getConnector)
- description and source-code
```javascript
getConnector = function () {
  return this.getDataSource().connector;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.DataSource.DataAccessObject.prototype.isNewRecord"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.prototype.</span>isNewRecord ()](#apidoc.element.loopback.DataSource.DataAccessObject.prototype.isNewRecord)
- description and source-code
```javascript
isNewRecord = function () {
  return !this.__persisted;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.DataSource.DataAccessObject.prototype.patchAttributes"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.prototype.</span>patchAttributes (data, options, cb)](#apidoc.element.loopback.DataSource.DataAccessObject.prototype.patchAttributes)
- description and source-code
```javascript
patchAttributes = function (data, options, cb) {
  var self = this;
  var connectionPromise = stillConnecting(this.getDataSource(), this, arguments);
  if (connectionPromise) {
    return connectionPromise;
  }

  if (options === undefined && cb === undefined) {
    if (typeof data === 'function') {
      // updateAttributes(cb)
      cb = data;
      data = undefined;
    }
  } else if (cb === undefined) {
    if (typeof options === 'function') {
      // updateAttributes(data, cb)
      cb = options;
      options = {};
    }
  }

  cb = cb || utils.createPromiseCallback();
  options = options || {};

  assert((typeof data === 'object') && (data !== null),
    'The data argument must be an object');
  assert(typeof options === 'object', 'The options argument must be an object');
  assert(typeof cb === 'function', 'The cb argument must be a function');

  var inst = this;
  var Model = this.constructor;
  var connector = inst.getConnector();
  assert(typeof connector.updateAttributes === 'function',
    'updateAttributes() must be implemented by the connector');

  if (isPKMissing(Model, cb))
    return cb.promise;

  var allowExtendedOperators = Model._allowExtendedOperators(options);
  var strict = this.__strict;
  var model = Model.modelName;
  var hookState = {};

  // Convert the data to be plain object so that update won't be confused
  if (data instanceof Model) {
    data = data.toObject(false);
  }
  data = removeUndefined(data);

  // Make sure id(s) cannot be changed
  var idNames = Model.definition.idNames();
  for (var i = 0, n = idNames.length; i < n; i++) {
    var idName = idNames[i];
    if (data[idName] !== undefined && !idEquals(data[idName], inst[idName])) {
      var err = new Error(g.f('apidoc.element.loopback.DataSource.DataAccessObject.prototype.patchAttributes cannot be updated from ' +
        '%s to %s when {{forceId}} is set to true',
        inst[idName], data[idName]));
      err.statusCode = 400;
      process.nextTick(function() {
        cb(err);
      });
      return cb.promise;
    }
  }

  var context = {
    Model: Model,
    where: byIdQuery(Model, getIdValue(Model, inst)).where,
    data: data,
    currentInstance: inst,
    hookState: hookState,
    options: options,
  };

  Model.notifyObserversOf('before save', context, function(err, ctx) {
    if (err) return cb(err);
    data = ctx.data;

    if (strict && !allowExtendedOperators) {
      applyStrictCheck(self.constructor, strict, data, inst, validateAndSave);
    } else {
      validateAndSave(null, data);
    }

    function validateAndSave(err, data) {
      if (err) return cb(err);
      data = removeUndefined(data);
      var doValidate = true;
      if (options.validate === undefined) {
        if (Model.settings.automaticValidation !== undefined) {
          doValidate = Model.settings.automaticValidation;
        }
      } else {
        doValidate = options.validate;
      }

      // update instance's properties
      try {
        inst.setAttributes(data);
      } catch (err) {
        return cb(err);
      }

      if (doValidate) {
        inst.isValid(function(valid) {
          if (!valid) {
            cb(new ValidationError(inst), inst);
            return;
          }

          triggerSave();
        }, data, options);
      } else {
        triggerSave();
      }

      function triggerSave() {
        inst.trigger('save', function(saveDone) {
          inst.trigger('update', function(done) {
            copyData(data, inst);
            var typedData = convertSubsetOfPropertiesByType(inst, data);
            context.data = typedData;

            function updateAttributesCallback(err) {
              if (err) return cb(err);
              var ctx = {
                Model: Model,
                data: context.data,
                hookState: hookState,
                options: options,
                isNewInstance: false,
              };
              Model.notifyObserversOf('loaded', ctx, function(err) {
                if (err) return cb(err);

                inst.__persisted = true;

                // By default, the instance passed to updateAttributes callback is NOT updated ...
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.DataSource.DataAccessObject.prototype.reload"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.prototype.</span>reload (cb)](#apidoc.element.loopback.DataSource.DataAccessObject.prototype.reload)
- description and source-code
```javascript
function reload(cb) {
  var connectionPromise = stillConnecting(this.getDataSource(), this, arguments);
  if (connectionPromise) {
    return connectionPromise;
  }

  return this.constructor.findById(getIdValue(this.constructor, this), cb);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.DataSource.DataAccessObject.prototype.remove"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.prototype.</span>remove (options, cb)](#apidoc.element.loopback.DataSource.DataAccessObject.prototype.remove)
- description and source-code
```javascript
remove = function (options, cb) {
  var connectionPromise = stillConnecting(this.getDataSource(), this, arguments);
  if (connectionPromise) {
    return connectionPromise;
  }

  if (cb === undefined && typeof options === 'function') {
    cb = options;
    options = {};
  }

  cb = cb || utils.createPromiseCallback();
  options = options || {};

  assert(typeof options === 'object', 'The options argument should be an object');
  assert(typeof cb === 'function', 'The cb argument should be a function');

  var inst = this;
  var connector = this.getConnector();

  var Model = this.constructor;
  var id = getIdValue(this.constructor, this);
  var hookState = {};

  if (isPKMissing(Model, cb))
    return cb.promise;

  var context = {
    Model: Model,
    query: byIdQuery(Model, id),
    hookState: hookState,
    options: options,
  };

  Model.notifyObserversOf('access', context, function(err, ctx) {
    if (err) return cb(err);
    var context = {
      Model: Model,
      where: ctx.query.where,
      instance: inst,
      hookState: hookState,
      options: options,
    };
    Model.notifyObserversOf('before delete', context, function(err, ctx) {
      if (err) return cb(err);
      doDeleteInstance(ctx.where);
    });
  });

  function doDeleteInstance(where) {
    if (!isWhereByGivenId(Model, where, id)) {
      // A hook modified the query, it is no longer
      // a simple 'delete model with the given id'.
      // We must switch to full query-based delete.
      Model.deleteAll(where, {notify: false}, function(err, info) {
        if (err) return cb(err, false);
        var deleted = info && info.count > 0;
        if (Model.settings.strictDelete && !deleted) {
          err = new Error(g.f('No instance with apidoc.element.loopback.DataSource.DataAccessObject.prototype.remove %s found for %s', id, Model.modelName));
          err.code = 'NOT_FOUND';
          err.statusCode = 404;
          return cb(err, false);
        }
        var context = {
          Model: Model,
          where: where,
          instance: inst,
          hookState: hookState,
          options: options,
        };
        Model.notifyObserversOf('after delete', context, function(err) {
          cb(err, info);
        });
      });
      return;
    }

    inst.trigger('destroy', function(destroyed) {
      function destroyCallback(err, info) {
        if (err) return cb(err);
        var deleted = info && info.count > 0;
        if (Model.settings.strictDelete && !deleted) {
          err = new Error(g.f('No instance with apidoc.element.loopback.DataSource.DataAccessObject.prototype.remove %s found for %s', id, Model.modelName));
          err.code = 'NOT_FOUND';
          err.statusCode = 404;
          return cb(err);
        }

        destroyed(function() {
          var context = {
            Model: Model,
            where: where,
            instance: inst,
            hookState: hookState,
            options: options,
          };
          Model.notifyObserversOf('after delete', context, function(err) {
            cb(err, info);
          });
        });
      }

      if (connector.destroy.length === 4) {
        connector.destroy(inst.constructor.modelName, id, options, destroyCallback);
      } else {
        connector.destroy(inst.constructor.modelName, id, destroyCallback);
      }
    }, null, cb);
  }
  return cb.promise;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.DataSource.DataAccessObject.prototype.replaceAttributes"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.prototype.</span>replaceAttributes (data, options, cb)](#apidoc.element.loopback.DataSource.DataAccessObject.prototype.replaceAttributes)
- description and source-code
```javascript
replaceAttributes = function (data, options, cb) {
  var Model = this.constructor;
  var id = getIdValue(this.constructor, this);
  return Model.replaceById(id, data, options, cb);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.DataSource.DataAccessObject.prototype.save"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.prototype.</span>save (options, cb)](#apidoc.element.loopback.DataSource.DataAccessObject.prototype.save)
- description and source-code
```javascript
save = function (options, cb) {
  var connectionPromise = stillConnecting(this.getDataSource(), this, arguments);
  if (connectionPromise) {
    return connectionPromise;
  }
  var Model = this.constructor;

  if (typeof options === 'function') {
    cb = options;
    options = {};
  }

  cb = cb || utils.createPromiseCallback();
  options = options || {};

  assert(typeof options === 'object', 'The options argument should be an object');
  assert(typeof cb === 'function', 'The cb argument should be a function');

  if (isPKMissing(Model, cb)) {
    return cb.promise;
  }  else if (this.isNewRecord()) {
    return Model.create(this, options, cb);
  }

  var hookState = {};

  if (options.validate === undefined) {
    if (Model.settings.automaticValidation === undefined) {
      options.validate = true;
    } else {
      options.validate = Model.settings.automaticValidation;
    }
  }

  if (options.throws === undefined) {
    options.throws = false;
  }

  var inst = this;
  var connector = inst.getConnector();
  var modelName = Model.modelName;

  var context = {
    Model: Model,
    instance: inst,
    hookState: hookState,
    options: options,
  };
  Model.notifyObserversOf('before save', context, function(err) {
    if (err) return cb(err);

    var data = inst.toObject(true);
    Model.applyProperties(data, inst);
    inst.setAttributes(data);

    // validate first
    if (!options.validate) {
      return save();
    }

    inst.isValid(function(valid) {
      if (valid) {
        save();
      } else {
        var err = new ValidationError(inst);
        // throws option is dangerous for async usage
        if (options.throws) {
          throw err;
        }
        cb(err, inst);
      }
    }, data, options);

    // then save
    function save() {
      inst.trigger('save', function(saveDone) {
        inst.trigger('update', function(updateDone) {
          data = removeUndefined(data);
          function saveCallback(err, unusedData, result) {
            if (err) {
              return cb(err, inst);
            }

            var context = {
              Model: Model,
              data: data,
              isNewInstance: result && result.isNewInstance,
              hookState: hookState,
              options: options,
            };
            Model.notifyObserversOf('loaded', context, function(err) {
              if (err) return cb(err);

              inst._initProperties(data, {persisted: true});

              var context = {
                Model: Model,
                instance: inst,
                isNewInstance: result && result.isNewInstance,
                hookState: hookState,
                options: options,
              };
              Model.notifyObserversOf('after save', context, function(err) {
                if (err) return cb(err, inst);
                updateDone.call(inst, function() {
                  saveDone.call(inst, function() {
                    cb(err, inst);
                  });
                });
              });
            });
          }

          context = {
            Model: Model,
            data: data,
            where: byIdQuery(Model, getIdValue(Model, inst)).where,
            currentInstance: inst,
            hookState: hookState,
            options: options,
          };

          Model.notifyObserversOf('persist', context, function(err) {
            if (err) return cb(err);

            if (connector.save.length === 4) {
              connector.save(modelName, inst.constructor._forDB(data), options, saveCallback);
            } else {
              connector.save(modelName, inst.constructor._forDB(data), saveCallback);
            }
          });
        }, data, cb);
      }, data, cb);
    }
  });
  return cb.promise;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.DataSource.DataAccessObject.prototype.setAttribute"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.prototype.</span>setAttribute (name, value)](#apidoc.element.loopback.DataSource.DataAccessObject.prototype.setAttribute)
- description and source-code
```javascript
function setAttribute(name, value) {
  this[name] = value; // TODO [fabien] - currently not protected by applyProperties
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.DataSource.DataAccessObject.prototype.setAttributes"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.prototype.</span>setAttributes (data)](#apidoc.element.loopback.DataSource.DataAccessObject.prototype.setAttributes)
- description and source-code
```javascript
function setAttributes(data) {
  if (typeof data !== 'object') return;

  this.constructor.applyProperties(data, this);

  var Model = this.constructor;
  var inst = this;

  // update instance's properties
  for (var key in data) {
    inst.setAttribute(key, data[key]);
  }

  Model.emit('set', inst);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.DataSource.DataAccessObject.prototype.unsetAttribute"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.prototype.</span>unsetAttribute (name, nullify)](#apidoc.element.loopback.DataSource.DataAccessObject.prototype.unsetAttribute)
- description and source-code
```javascript
function unsetAttribute(name, nullify) {
  if (nullify || this.constructor.definition.settings.persistUndefinedAsNull) {
    this[name] = this.__data[name] = null;
  } else {
    delete this[name];
    delete this.__data[name];
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.DataSource.DataAccessObject.prototype.updateAttribute"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.prototype.</span>updateAttribute (name, value, options, cb)](#apidoc.element.loopback.DataSource.DataAccessObject.prototype.updateAttribute)
- description and source-code
```javascript
function updateAttribute(name, value, options, cb) {
  var data = {};
  data[name] = value;
  return this.updateAttributes(data, options, cb);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.DataSource.DataAccessObject.prototype.updateAttributes"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.DataAccessObject.prototype.</span>updateAttributes (data, options, cb)](#apidoc.element.loopback.DataSource.DataAccessObject.prototype.updateAttributes)
- description and source-code
```javascript
updateAttributes = function (data, options, cb) {
  var self = this;
  var connectionPromise = stillConnecting(this.getDataSource(), this, arguments);
  if (connectionPromise) {
    return connectionPromise;
  }

  if (options === undefined && cb === undefined) {
    if (typeof data === 'function') {
      // updateAttributes(cb)
      cb = data;
      data = undefined;
    }
  } else if (cb === undefined) {
    if (typeof options === 'function') {
      // updateAttributes(data, cb)
      cb = options;
      options = {};
    }
  }

  cb = cb || utils.createPromiseCallback();
  options = options || {};

  assert((typeof data === 'object') && (data !== null),
    'The data argument must be an object');
  assert(typeof options === 'object', 'The options argument must be an object');
  assert(typeof cb === 'function', 'The cb argument must be a function');

  var inst = this;
  var Model = this.constructor;
  var connector = inst.getConnector();
  assert(typeof connector.updateAttributes === 'function',
    'updateAttributes() must be implemented by the connector');

  if (isPKMissing(Model, cb))
    return cb.promise;

  var allowExtendedOperators = Model._allowExtendedOperators(options);
  var strict = this.__strict;
  var model = Model.modelName;
  var hookState = {};

  // Convert the data to be plain object so that update won't be confused
  if (data instanceof Model) {
    data = data.toObject(false);
  }
  data = removeUndefined(data);

  // Make sure id(s) cannot be changed
  var idNames = Model.definition.idNames();
  for (var i = 0, n = idNames.length; i < n; i++) {
    var idName = idNames[i];
    if (data[idName] !== undefined && !idEquals(data[idName], inst[idName])) {
      var err = new Error(g.f('apidoc.element.loopback.DataSource.DataAccessObject.prototype.updateAttributes cannot be updated from ' +
        '%s to %s when {{forceId}} is set to true',
        inst[idName], data[idName]));
      err.statusCode = 400;
      process.nextTick(function() {
        cb(err);
      });
      return cb.promise;
    }
  }

  var context = {
    Model: Model,
    where: byIdQuery(Model, getIdValue(Model, inst)).where,
    data: data,
    currentInstance: inst,
    hookState: hookState,
    options: options,
  };

  Model.notifyObserversOf('before save', context, function(err, ctx) {
    if (err) return cb(err);
    data = ctx.data;

    if (strict && !allowExtendedOperators) {
      applyStrictCheck(self.constructor, strict, data, inst, validateAndSave);
    } else {
      validateAndSave(null, data);
    }

    function validateAndSave(err, data) {
      if (err) return cb(err);
      data = removeUndefined(data);
      var doValidate = true;
      if (options.validate === undefined) {
        if (Model.settings.automaticValidation !== undefined) {
          doValidate = Model.settings.automaticValidation;
        }
      } else {
        doValidate = options.validate;
      }

      // update instance's properties
      try {
        inst.setAttributes(data);
      } catch (err) {
        return cb(err);
      }

      if (doValidate) {
        inst.isValid(function(valid) {
          if (!valid) {
            cb(new ValidationError(inst), inst);
            return;
          }

          triggerSave();
        }, data, options);
      } else {
        triggerSave();
      }

      function triggerSave() {
        inst.trigger('save', function(saveDone) {
          inst.trigger('update', function(done) {
            copyData(data, inst);
            var typedData = convertSubsetOfPropertiesByType(inst, data);
            context.data = typedData;

            function updateAttributesCallback(err) {
              if (err) return cb(err);
              var ctx = {
                Model: Model,
                data: context.data,
                hookState: hookState,
                options: options,
                isNewInstance: false,
              };
              Model.notifyObserversOf('loaded', ctx, function(err) {
                if (err) return cb(err);

                inst.__persisted = true;

                // By default, the instance passed to updateAttributes callback is NOT updated ...
```
- example usage
```shell
...
    if (!inst) {
      err = new Error(g.f('No change record found for %s with id %s',
        self.modelName, id));
      err.statusCode = 404;
      return cb(err);
    }

    inst.updateAttributes(data, cb);
  });
};

/**
 * Create a change stream. [See here for more info](http://loopback.io/doc/en/lb2/Realtime-server-sent-events.html)
 *
 * @param {Object} options
...
```



# <a name="apidoc.module.loopback.DataSource.JSON"></a>[module loopback.DataSource.JSON](#apidoc.module.loopback.DataSource.JSON)

#### <a name="apidoc.element.loopback.DataSource.JSON.JSON"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.</span>JSON (value)](#apidoc.element.loopback.DataSource.JSON.JSON)
- description and source-code
```javascript
function JSON(value) {
  if (!(this instanceof JSON)) {
    return value;
  }
  this.value = value;
}
```
- example usage
```shell
n/a
```



# <a name="apidoc.module.loopback.DataSource.JSON.prototype"></a>[module loopback.DataSource.JSON.prototype](#apidoc.module.loopback.DataSource.JSON.prototype)

#### <a name="apidoc.element.loopback.DataSource.JSON.prototype.toJSON"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.JSON.prototype.</span>toJSON ()](#apidoc.element.loopback.DataSource.JSON.prototype.toJSON)
- description and source-code
```javascript
toJSON = function () {
  return this.value;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.DataSource.JSON.prototype.toObject"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.JSON.prototype.</span>toObject ()](#apidoc.element.loopback.DataSource.JSON.prototype.toObject)
- description and source-code
```javascript
toObject = function () {
  return this.value;
}
```
- example usage
```shell
...
  options.validate = true;
}
if (!('throws' in options)) {
  options.throws = false;
}

var inst = this;
var data = inst.toObject(true);
var id = this.getId();

if (!id) {
  return Model.create(this, callback);
}

// validate first
...
```



# <a name="apidoc.module.loopback.DataSource.Text"></a>[module loopback.DataSource.Text](#apidoc.module.loopback.DataSource.Text)

#### <a name="apidoc.element.loopback.DataSource.Text.Text"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.</span>Text (value)](#apidoc.element.loopback.DataSource.Text.Text)
- description and source-code
```javascript
function Text(value) {
  if (!(this instanceof Text)) {
    return value;
  }
  this.value = value;
}
```
- example usage
```shell
n/a
```



# <a name="apidoc.module.loopback.DataSource.Text.prototype"></a>[module loopback.DataSource.Text.prototype](#apidoc.module.loopback.DataSource.Text.prototype)

#### <a name="apidoc.element.loopback.DataSource.Text.prototype.toJSON"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.Text.prototype.</span>toJSON ()](#apidoc.element.loopback.DataSource.Text.prototype.toJSON)
- description and source-code
```javascript
toJSON = function () {
  return this.value;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.DataSource.Text.prototype.toObject"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.Text.prototype.</span>toObject ()](#apidoc.element.loopback.DataSource.Text.prototype.toObject)
- description and source-code
```javascript
toObject = function () {
  return this.value;
}
```
- example usage
```shell
...
  options.validate = true;
}
if (!('throws' in options)) {
  options.throws = false;
}

var inst = this;
var data = inst.toObject(true);
var id = this.getId();

if (!id) {
  return Model.create(this, callback);
}

// validate first
...
```



# <a name="apidoc.module.loopback.DataSource.prototype"></a>[module loopback.DataSource.prototype](#apidoc.module.loopback.DataSource.prototype)

#### <a name="apidoc.element.loopback.DataSource.prototype._setupConnector"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.prototype.</span>_setupConnector ()](#apidoc.element.loopback.DataSource.prototype._setupConnector)
- description and source-code
```javascript
_setupConnector = function () {
  this.connector = this.connector || this.adapter; // The legacy JugglingDB adapter will set up 'adapter' property
  this.adapter = this.connector; // Keep the adapter as an alias to connector
  if (this.connector) {
    if (!this.connector.dataSource) {
      // Set up the dataSource if the connector doesn't do so
      this.connector.dataSource = this;
    }
    var dataSource = this;
    this.connector.log = function(query, start) {
      dataSource.log(query, start);
    };

    this.connector.logger = function(query) {
      var t1 = Date.now();
      var log = this.log;
      return function(q) {
        log(q || query, t1);
      };
    };
    // Configure the connector instance to mix in observer functions
    jutil.mixin(this.connector, OberserverMixin);
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.DataSource.prototype.attach"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.prototype.</span>attach (modelClass)](#apidoc.element.loopback.DataSource.prototype.attach)
- description and source-code
```javascript
attach = function (modelClass) {
  if (modelClass.dataSource === this) {
    // Already attached to the data source
    return modelClass;
  }

  if (modelClass.modelBuilder !== this.modelBuilder) {
    this.modelBuilder.definitions[modelClass.modelName] = modelClass.definition;
    this.modelBuilder.models[modelClass.modelName] = modelClass;
    // reset the modelBuilder
    modelClass.modelBuilder = this.modelBuilder;
  }

  // redefine the dataSource
  modelClass.dataSource = this;

  this.setupDataAccess(modelClass, modelClass.settings);
  modelClass.emit('dataSourceAttached', modelClass);
  return modelClass;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.DataSource.prototype.automigrate"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.prototype.</span>automigrate (models, cb)](#apidoc.element.loopback.DataSource.prototype.automigrate)
- description and source-code
```javascript
automigrate = function (models, cb) {
  this.freeze();

  if ((!cb) && ('function' === typeof models)) {
    cb = models;
    models = undefined;
  }

  cb = cb || utils.createPromiseCallback();

  if (!this.connector.automigrate) {
    // NOOP
    process.nextTick(cb);
    return cb.promise;
  }

  // First argument is a model name
  if ('string' === typeof models) {
    models = [models];
  }

  var attachedModels = this.connector._models;

  if (attachedModels && typeof attachedModels === 'object') {
    models = models || Object.keys(attachedModels);

    if (models.length === 0) {
      process.nextTick(cb);
      return cb.promise;
    }

    var invalidModels = models.filter(function(m) {
      return !(m in attachedModels);
    });

    if (invalidModels.length) {
      process.nextTick(function() {
        cb(new Error(g.f('Cannot migrate models not attached to this datasource: %s',
          invalidModels.join(' '))));
      });
      return cb.promise;
    }
  }

  this.connector.automigrate(models, cb);
  return cb.promise;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.DataSource.prototype.autoupdate"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.prototype.</span>autoupdate (models, cb)](#apidoc.element.loopback.DataSource.prototype.autoupdate)
- description and source-code
```javascript
autoupdate = function (models, cb) {
  this.freeze();

  if ((!cb) && ('function' === typeof models)) {
    cb = models;
    models = undefined;
  }

  cb = cb || utils.createPromiseCallback();

  if (!this.connector.autoupdate) {
    // NOOP
    process.nextTick(cb);
    return cb.promise;
  }

  // First argument is a model name
  if ('string' === typeof models) {
    models = [models];
  }

  var attachedModels = this.connector._models;

  if (attachedModels && typeof attachedModels === 'object') {
    models = models || Object.keys(attachedModels);

    if (models.length === 0) {
      process.nextTick(cb);
      return cb.promise;
    }

    var invalidModels = models.filter(function(m) {
      return !(m in attachedModels);
    });

    if (invalidModels.length) {
      process.nextTick(function() {
        cb(new Error(g.f('Cannot migrate models not attached to this datasource: %s',
        invalidModels.join(' '))));
      });
      return cb.promise;
    }
  }

  this.connector.autoupdate(models, cb);
  return cb.promise;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.DataSource.prototype.buildModelFromInstance"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.prototype.</span>buildModelFromInstance (name, json, options)](#apidoc.element.loopback.DataSource.prototype.buildModelFromInstance)
- description and source-code
```javascript
buildModelFromInstance = function (name, json, options) {
  // Introspect the JSON document to generate a schema
  var schema = ModelBuilder.introspect(json);

  // Create a model for the generated schema
  return this.createModel(name, schema, options);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.DataSource.prototype.columnMetadata"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.prototype.</span>columnMetadata (modelName, propertyName)](#apidoc.element.loopback.DataSource.prototype.columnMetadata)
- description and source-code
```javascript
columnMetadata = function (modelName, propertyName) {
  return this.getModelDefinition(modelName).columnMetadata(this.connector.name, propertyName);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.DataSource.prototype.columnName"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.prototype.</span>columnName (modelName, propertyName)](#apidoc.element.loopback.DataSource.prototype.columnName)
- description and source-code
```javascript
columnName = function (modelName, propertyName) {
  return this.getModelDefinition(modelName).columnName(this.connector.name, propertyName);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.DataSource.prototype.columnNames"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.prototype.</span>columnNames (modelName)](#apidoc.element.loopback.DataSource.prototype.columnNames)
- description and source-code
```javascript
columnNames = function (modelName) {
  return this.getModelDefinition(modelName).columnNames(this.connector.name);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.DataSource.prototype.copyModel"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.prototype.</span>copyModel (Master)](#apidoc.element.loopback.DataSource.prototype.copyModel)
- description and source-code
```javascript
function copyModel(Master) {
  var dataSource = this;
  var className = Master.modelName;
  var md = Master.modelBuilder.getModelDefinition(className);
  var Slave = function SlaveModel() {
    Master.apply(this, [].slice.call(arguments));
  };

  util.inherits(Slave, Master);

  // Delegating static properties
  Slave.__proto__ = Master;

  hiddenProperty(Slave, 'dataSource', dataSource);
  hiddenProperty(Slave, 'modelName', className);
  hiddenProperty(Slave, 'relations', Master.relations);

  if (!(className in dataSource.modelBuilder.models)) {
    // store class in model pool
    dataSource.modelBuilder.models[className] = Slave;
    dataSource.modelBuilder.definitions[className] =
      new ModelDefinition(dataSource.modelBuilder, md.name, md.properties, md.settings);

    if ((!dataSource.isTransaction) && dataSource.connector && dataSource.connector.define) {
      dataSource.connector.define({
        model: Slave,
        properties: md.properties,
        settings: md.settings,
      });
    }
  }

  return Slave;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.DataSource.prototype.createModel"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.prototype.</span>createModel (className, properties, settings)](#apidoc.element.loopback.DataSource.prototype.createModel)
- description and source-code
```javascript
function defineClass(className, properties, settings) {
  var args = slice.call(arguments);

  if (!className) {
    throw new Error(g.f('Class name required'));
  }
  if (args.length === 1) {
    properties = {};
    args.push(properties);
  }
  if (args.length === 2) {
    settings = {};
    args.push(settings);
  }

  properties = properties || {};
  settings = settings || {};

  if (this.isRelational()) {
    // Set the strict mode to be true for relational DBs by default
    if (settings.strict === undefined || settings.strict === null) {
      settings.strict = true;
    }
    if (settings.strict === false) {
      settings.strict = 'throw';
    }
  }

  var modelClass = this.modelBuilder.define(className, properties, settings);
  modelClass.dataSource = this;

  if (settings.unresolved) {
    return modelClass;
  }

  this.setupDataAccess(modelClass, settings);
  modelClass.emit('dataSourceAttached', modelClass);

  return modelClass;
}
```
- example usage
```shell
...

app.model = function(Model, config) {
var isPublic = true;
var registry = this.registry;

if (typeof Model === 'string') {
  var msg = 'app.model(modelName, settings) is no longer supported. ' +
    'Use app.registry.createModel(modelName, definition) and ' +
    'app.model(ModelCtor, config) instead.';
  throw new Error(msg);
}

if (arguments.length > 1) {
  config = config || {};
  configureModel(Model, config, this);
...
```

#### <a name="apidoc.element.loopback.DataSource.prototype.define"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.prototype.</span>define (className, properties, settings)](#apidoc.element.loopback.DataSource.prototype.define)
- description and source-code
```javascript
function defineClass(className, properties, settings) {
  var args = slice.call(arguments);

  if (!className) {
    throw new Error(g.f('Class name required'));
  }
  if (args.length === 1) {
    properties = {};
    args.push(properties);
  }
  if (args.length === 2) {
    settings = {};
    args.push(settings);
  }

  properties = properties || {};
  settings = settings || {};

  if (this.isRelational()) {
    // Set the strict mode to be true for relational DBs by default
    if (settings.strict === undefined || settings.strict === null) {
      settings.strict = true;
    }
    if (settings.strict === false) {
      settings.strict = 'throw';
    }
  }

  var modelClass = this.modelBuilder.define(className, properties, settings);
  modelClass.dataSource = this;

  if (settings.unresolved) {
    return modelClass;
  }

  this.setupDataAccess(modelClass, settings);
  modelClass.emit('dataSourceAttached', modelClass);

  return modelClass;
}
```
- example usage
```shell
...
 * @property {DataSource} Model.dataSource Data source to which the model is connected, if any. Static property.
 * @property {SharedClass} Model.sharedMethod The 'strong-remoting' [SharedClass](http://apidocs.strongloop.com/strong-remoting/#
sharedclass) that contains remoting (and http) metadata. Static property.
 * @property {Object} settings Contains additional model settings.
 * @property {string} settings.http.path Base URL of the model HTTP route.
 * @property [{string}] settings.acls Array of ACLs for the model.
 * @class
 */
var Model = registry.modelBuilder.define('Model');

Model.registry = registry;

/**
 * The 'loopback.Model.extend()' method calls this when you create a model that extends another model.
 * Add any setup or configuration code you want executed when the model is created.
 * See  [Setting up a custom model](http://loopback.io/doc/en/lb2/Extending-built-in-models.html#setting-up-a-custom-model).
...
```

#### <a name="apidoc.element.loopback.DataSource.prototype.defineForeignKey"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.prototype.</span>defineForeignKey (className, key, foreignClassName, pkName)](#apidoc.element.loopback.DataSource.prototype.defineForeignKey)
- description and source-code
```javascript
function defineForeignKey(className, key, foreignClassName, pkName) {
  var pkType = null;
  var foreignModel = this.getModelDefinition(foreignClassName);
  pkName = pkName || foreignModel && foreignModel.idName();
  if (pkName) {
    pkType = foreignModel.properties[pkName].type;
  }
  var model = this.getModelDefinition(className);
  if (model.properties[key]) {
    if (pkType) {
      // Reset the type of the foreign key
      model.rawProperties[key].type = model.properties[key].type = pkType;
    }
    return;
  }

  var fkDef = {type: pkType};
  var foreignMeta = this.columnMetadata(foreignClassName, pkName);
  if (foreignMeta && (foreignMeta.dataType || foreignMeta.dataLength)) {
    fkDef[this.connector.name] = {};
    if (foreignMeta.dataType) {
      fkDef[this.connector.name].dataType = foreignMeta.dataType;
    }
    if (foreignMeta.dataLength) {
      fkDef[this.connector.name].dataLength = foreignMeta.dataLength;
    }
  }
  if (this.connector.defineForeignKey) {
    var cb = function(err, keyType) {
      if (err) throw err;
      fkDef.type = keyType || pkType;
      // Add the foreign key property to the data source _models
      this.defineProperty(className, key, fkDef);
    }.bind(this);
    switch (this.connector.defineForeignKey.length) {
      case 4:
        this.connector.defineForeignKey(className, key, foreignClassName, cb);
        break;
      default:
      case 3:
        this.connector.defineForeignKey(className, key, cb);
        break;
    }
  } else {
    // Add the foreign key property to the data source _models
    this.defineProperty(className, key, fkDef);
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.DataSource.prototype.defineOperation"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.prototype.</span>defineOperation (name, options, fn)](#apidoc.element.loopback.DataSource.prototype.defineOperation)
- description and source-code
```javascript
defineOperation = function (name, options, fn) {
  options.fn = fn;
  options.name = name;
  this._operations[name] = options;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.DataSource.prototype.defineProperty"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.prototype.</span>defineProperty (model, prop, params)](#apidoc.element.loopback.DataSource.prototype.defineProperty)
- description and source-code
```javascript
defineProperty = function (model, prop, params) {
  this.modelBuilder.defineProperty(model, prop, params);

  var resolvedProp = this.getModelDefinition(model).properties[prop];
  if (this.connector && this.connector.defineProperty) {
    this.connector.defineProperty(model, prop, resolvedProp);
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.DataSource.prototype.defineRelations"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.prototype.</span>defineRelations (modelClass, relations)](#apidoc.element.loopback.DataSource.prototype.defineRelations)
- description and source-code
```javascript
defineRelations = function (modelClass, relations) {
  var self = this;

  // Create a function for the closure in the loop
  var createListener = function(name, relation, targetModel, throughModel) {
    if (!isModelDataSourceAttached(targetModel)) {
      targetModel.once('dataAccessConfigured', function(model) {
        // Check if the through model doesn't exist or resolved
        if (!throughModel || isModelDataSourceAttached(throughModel)) {
          // The target model is resolved
          var params = traverse(relation).clone();
          params.as = name;
          params.model = model;
          if (throughModel) {
            params.through = throughModel;
          }
          modelClass[relation.type].call(modelClass, name, params);
        }
      });
    }

    if (throughModel && !isModelDataSourceAttached(throughModel)) {
      // Set up a listener to the through model
      throughModel.once('dataAccessConfigured', function(model) {
        if (isModelDataSourceAttached(targetModel)) {
          // The target model is resolved
          var params = traverse(relation).clone();
          params.as = name;
          params.model = targetModel;
          params.through = model;
          modelClass[relation.type].call(modelClass, name, params);
        }
      });
    }
  };

  // Set up the relations
  if (relations) {
    Object.keys(relations).forEach(function(rn) {
      var r = relations[rn];
      assert(DataSource.relationTypes.indexOf(r.type) !== -1, 'Invalid relation type: ' + r.type);
      assert(isValidRelationName(rn), 'Invalid relation name: ' + rn);

      var targetModel, polymorphicName;

      if (r.polymorphic && r.type !== 'belongsTo' && !r.model) {
        throw new Error(g.f('No model specified for {{polymorphic}} %s: %s', r.type, rn));
      }

      if (r.polymorphic) {
        polymorphicName = typeof r.model === 'string' ? r.model : rn;
        if (typeof r.polymorphic === 'string') {
          polymorphicName = r.polymorphic;
        } else if (typeof r.polymorphic === 'object' && typeof r.polymorphic.as === 'string') {
          polymorphicName = r.polymorphic.as;
        }
      }

      if (r.model) {
        targetModel = isModelClass(r.model) ? r.model : self.getModel(r.model, true);
      }

      var throughModel = null;
      if (r.through) {
        throughModel = isModelClass(r.through) ? r.through : self.getModel(r.through, true);
      }

      if ((targetModel && !isModelDataSourceAttached(targetModel)) ||
          (throughModel && !isModelDataSourceAttached(throughModel))) {
        // Create a listener to defer the relation set up
        createListener(rn, r, targetModel, throughModel);
      } else {
        // The target model is resolved
        var params = traverse(r).clone();
        params.as = rn;
        params.model = polymorphicName || targetModel;
        if (throughModel) {
          params.through = throughModel;
        }
        modelClass[r.type].call(modelClass, rn, params);
      }
    });
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.DataSource.prototype.defineScopes"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.prototype.</span>defineScopes (modelClass, scopes)](#apidoc.element.loopback.DataSource.prototype.defineScopes)
- description and source-code
```javascript
defineScopes = function (modelClass, scopes) {
  if (scopes) {
    for (var s in scopes) {
      defineScope(modelClass, modelClass, s, scopes[s], {}, scopes[s].options);
    }
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.DataSource.prototype.disableRemote"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.prototype.</span>disableRemote (operation)](#apidoc.element.loopback.DataSource.prototype.disableRemote)
- description and source-code
```javascript
disableRemote = function (operation) {
  var op = this.getOperation(operation);
  if (op) {
    op.remoteEnabled = false;
  } else {
    throw new Error(g.f('%s is not provided by the attached connector', operation));
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.DataSource.prototype.disconnect"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.prototype.</span>disconnect (cb)](#apidoc.element.loopback.DataSource.prototype.disconnect)
- description and source-code
```javascript
function disconnect(cb) {
  var self = this;
  if (this.connected && (typeof this.connector.disconnect === 'function')) {
    this.connector.disconnect(function(err, result) {
      self.connected = false;
      cb && cb(err, result);
    });
  } else {
    process.nextTick(function() {
      cb && cb();
    });
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.DataSource.prototype.discoverAndBuildModels"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.prototype.</span>discoverAndBuildModels (modelName, options, cb)](#apidoc.element.loopback.DataSource.prototype.discoverAndBuildModels)
- description and source-code
```javascript
discoverAndBuildModels = function (modelName, options, cb) {
  var self = this;
  options = options || {};
  this.discoverSchemas(modelName, options, function(err, schemas) {
    if (err) {
      cb && cb(err, schemas);
      return;
    }

    var schemaList = [];
    for (var s in schemas) {
      var schema = schemas[s];
      if (options.base) {
        schema.options = schema.options || {};
        schema.options.base = options.base;
      }
      schemaList.push(schema);
    }

    var models = self.modelBuilder.buildModels(schemaList,
      self.createModel.bind(self));

    cb && cb(err, models);
  });
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.DataSource.prototype.discoverAndBuildModelsSync"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.prototype.</span>discoverAndBuildModelsSync (modelName, options)](#apidoc.element.loopback.DataSource.prototype.discoverAndBuildModelsSync)
- description and source-code
```javascript
discoverAndBuildModelsSync = function (modelName, options) {
  options = options || {};
  var schemas = this.discoverSchemasSync(modelName, options);

  var schemaList = [];
  for (var s in schemas) {
    var schema = schemas[s];
    if (options.base) {
      schema.options = schema.options || {};
      schema.options.base = options.base;
    }
    schemaList.push(schema);
  }

  var models = this.modelBuilder.buildModels(schemaList,
    this.createModel.bind(this));

  return models;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.DataSource.prototype.discoverExportedForeignKeys"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.prototype.</span>discoverExportedForeignKeys (modelName, options, cb)](#apidoc.element.loopback.DataSource.prototype.discoverExportedForeignKeys)
- description and source-code
```javascript
discoverExportedForeignKeys = function (modelName, options, cb) {
  this.freeze();

  if (cb === undefined && typeof options === 'function') {
    cb = options;
    options = {};
  }
  options = options || {};
  cb = cb || utils.createPromiseCallback();

  if (this.connector.discoverExportedForeignKeys) {
    this.connector.discoverExportedForeignKeys(modelName, options, cb);
  } else if (cb) {
    process.nextTick(cb);
  }
  return cb.promise;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.DataSource.prototype.discoverExportedForeignKeysSync"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.prototype.</span>discoverExportedForeignKeysSync (modelName, options)](#apidoc.element.loopback.DataSource.prototype.discoverExportedForeignKeysSync)
- description and source-code
```javascript
discoverExportedForeignKeysSync = function (modelName, options) {
  this.freeze();
  if (this.connector.discoverExportedForeignKeysSync) {
    return this.connector.discoverExportedForeignKeysSync(modelName, options);
  }
  return null;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.DataSource.prototype.discoverForeignKeys"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.prototype.</span>discoverForeignKeys (modelName, options, cb)](#apidoc.element.loopback.DataSource.prototype.discoverForeignKeys)
- description and source-code
```javascript
discoverForeignKeys = function (modelName, options, cb) {
  this.freeze();

  if (cb === undefined && typeof options === 'function') {
    cb = options;
    options = {};
  }
  options = options || {};
  cb = cb || utils.createPromiseCallback();

  if (this.connector.discoverForeignKeys) {
    this.connector.discoverForeignKeys(modelName, options, cb);
  } else if (cb) {
    process.nextTick(cb);
  }
  return cb.promise;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.DataSource.prototype.discoverForeignKeysSync"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.prototype.</span>discoverForeignKeysSync (modelName, options)](#apidoc.element.loopback.DataSource.prototype.discoverForeignKeysSync)
- description and source-code
```javascript
discoverForeignKeysSync = function (modelName, options) {
  this.freeze();
  if (this.connector.discoverForeignKeysSync) {
    return this.connector.discoverForeignKeysSync(modelName, options);
  }
  return null;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.DataSource.prototype.discoverModelDefinitions"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.prototype.</span>discoverModelDefinitions (options, cb)](#apidoc.element.loopback.DataSource.prototype.discoverModelDefinitions)
- description and source-code
```javascript
discoverModelDefinitions = function (options, cb) {
  this.freeze();

  if (cb === undefined && typeof options === 'function') {
    cb = options;
    options = {};
  }
  options = options || {};
  cb = cb || utils.createPromiseCallback();

  if (this.connector.discoverModelDefinitions) {
    this.connector.discoverModelDefinitions(options, cb);
  } else if (cb) {
    process.nextTick(cb);
  }
  return cb.promise;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.DataSource.prototype.discoverModelDefinitionsSync"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.prototype.</span>discoverModelDefinitionsSync (options)](#apidoc.element.loopback.DataSource.prototype.discoverModelDefinitionsSync)
- description and source-code
```javascript
discoverModelDefinitionsSync = function (options) {
  this.freeze();
  if (this.connector.discoverModelDefinitionsSync) {
    return this.connector.discoverModelDefinitionsSync(options);
  }
  return null;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.DataSource.prototype.discoverModelProperties"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.prototype.</span>discoverModelProperties (modelName, options, cb)](#apidoc.element.loopback.DataSource.prototype.discoverModelProperties)
- description and source-code
```javascript
discoverModelProperties = function (modelName, options, cb) {
  this.freeze();

  if (cb === undefined && typeof options === 'function') {
    cb = options;
    options = {};
  }
  options = options || {};
  cb = cb || utils.createPromiseCallback();

  if (this.connector.discoverModelProperties) {
    this.connector.discoverModelProperties(modelName, options, cb);
  } else if (cb) {
    process.nextTick(cb);
  }
  return cb.promise;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.DataSource.prototype.discoverModelPropertiesSync"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.prototype.</span>discoverModelPropertiesSync (modelName, options)](#apidoc.element.loopback.DataSource.prototype.discoverModelPropertiesSync)
- description and source-code
```javascript
discoverModelPropertiesSync = function (modelName, options) {
  this.freeze();
  if (this.connector.discoverModelPropertiesSync) {
    return this.connector.discoverModelPropertiesSync(modelName, options);
  }
  return null;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.DataSource.prototype.discoverPrimaryKeys"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.prototype.</span>discoverPrimaryKeys (modelName, options, cb)](#apidoc.element.loopback.DataSource.prototype.discoverPrimaryKeys)
- description and source-code
```javascript
discoverPrimaryKeys = function (modelName, options, cb) {
  this.freeze();

  if (cb === undefined && typeof options === 'function') {
    cb = options;
    options = {};
  }
  options = options || {};
  cb = cb || utils.createPromiseCallback();

  if (this.connector.discoverPrimaryKeys) {
    this.connector.discoverPrimaryKeys(modelName, options, cb);
  } else if (cb) {
    process.nextTick(cb);
  }
  return cb.promise;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.DataSource.prototype.discoverPrimaryKeysSync"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.prototype.</span>discoverPrimaryKeysSync (modelName, options)](#apidoc.element.loopback.DataSource.prototype.discoverPrimaryKeysSync)
- description and source-code
```javascript
discoverPrimaryKeysSync = function (modelName, options) {
  this.freeze();
  if (this.connector.discoverPrimaryKeysSync) {
    return this.connector.discoverPrimaryKeysSync(modelName, options);
  }
  return null;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.DataSource.prototype.discoverSchema"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.prototype.</span>discoverSchema (modelName, options, cb)](#apidoc.element.loopback.DataSource.prototype.discoverSchema)
- description and source-code
```javascript
discoverSchema = function (modelName, options, cb) {
  options = options || {};

  if (!cb && 'function' === typeof options) {
    cb = options;
    options = {};
  }
  options.visited = {};
  options.relations = false;

  cb = cb || utils.createPromiseCallback();

  this.discoverSchemas(modelName, options, function(err, schemas) {
    if (err || !schemas) {
      cb && cb(err, schemas);
      return;
    }
    for (var s in schemas) {
      cb && cb(null, schemas[s]);
      return;
    }
  });
  return cb.promise;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.DataSource.prototype.discoverSchemas"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.prototype.</span>discoverSchemas (modelName, options, cb)](#apidoc.element.loopback.DataSource.prototype.discoverSchemas)
- description and source-code
```javascript
discoverSchemas = function (modelName, options, cb) {
  options = options || {};

  if (!cb && 'function' === typeof options) {
    cb = options;
    options = {};
  }

  cb = cb || utils.createPromiseCallback();

  var self = this;
  var dbType = this.connector.name || this.name;

  var nameMapper;
  if (options.nameMapper === null) {
    // No mapping
    nameMapper = function(type, name) {
      return name;
    };
  } else if (typeof options.nameMapper === 'function') {
    // Custom name mapper
    nameMapper = options.nameMapper;
  } else {
    // Default name mapper
    nameMapper = function mapName(type, name) {
      if (type === 'table' || type === 'model') {
        return fromDBName(name, false);
      } else {
        return fromDBName(name, true);
      }
    };
  }

  if (this.connector.discoverSchemas) {
    // Delegate to the connector implementation
    this.connector.discoverSchemas(modelName, options, cb);
    return cb.promise;
  }

  var tasks = [
    this.discoverModelProperties.bind(this, modelName, options),
    this.discoverPrimaryKeys.bind(this, modelName, options)];

  var followingRelations = options.associations || options.relations;
  if (followingRelations) {
    tasks.push(this.discoverForeignKeys.bind(this, modelName, options));
  }

  async.parallel(tasks, function(err, results) {
    if (err) {
      cb(err);
      return cb.promise;
    }

    var columns = results[0];
    if (!columns || columns.length === 0) {
      cb(new Error(g.f('Table \'%s\' does not exist.', modelName)));
      return cb.promise;
    }

    // Handle primary keys
    var primaryKeys = results[1] || [];
    var pks = {};
    primaryKeys.forEach(function(pk) {
      pks[pk.columnName] = pk.keySeq;
    });

    if (self.settings.debug) {
      debug('Primary keys: ', pks);
    }

    var schema = {
      name: nameMapper('table', modelName),
      options: {
        idInjection: false, // DO NOT add id property
      },
      properties: {},
    };

    schema.options[dbType] = {
      schema: columns[0].owner,
      table: modelName,
    };

    columns.forEach(function(item) {
      var propName = nameMapper('column', item.columnName);
      schema.properties[propName] = {
        type: item.type,
        required: (item.nullable === 'N' || item.nullable === 'NO' ||
          item.nullable === 0 || item.nullable === false),
        length: item.dataLength,
        precision: item.dataPrecision,
        scale: item.dataScale,
      };

      if (pks[item.columnName]) {
        schema.properties[propName].id = pks[item.columnName];
      }
      var dbSpecific = schema.properties[propName][dbType] = {
        columnName: item.columnName,
        dataType: item.dataType,
        dataLength: item.dataLength,
        dataPrecision: item.dataPrecision,
        dataScale: item.dataScale,
        nullable: item.nullable,
      };
      // merge connector-specific properties
      if (item[dbType]) {
        for (var k in item[dbType]) {
          dbSpecific[k] = item[dbType][k];
        }
      }
    });

    // Add current modelName to the visited tables
    options.visited = options.visited || {};
    var schemaKey = columns[0].owner + '.' + modelName;
    if (!options.visited.hasOwnProperty(schemaKey)) {
      if (self.settings.debug) {
        debug('Adding schema for ' + schemaKey);
      }
      options.visited[schemaKey] = schema;
    }

    var otherTables = {};
    if (followingRelations) {
      // Handle foreign keys
      var fks = {};
      var foreignKeys = results[2] || [];
      foreignKeys.forEach(function(fk) {
        var fkInfo = {
          keySeq: fk.keySeq,
          owner: fk.pkOwner,
          tableName: fk.pkTableName,
          columnName: fk.pkColumnName,
        };
        if (fks[fk.fkName]) {
          fks[fk.fkName].push(fkInfo);
        } else {
          fks[fk.fkName] = [fkInfo];
        }
      });

      if (self.settings.debug) {
        debug('Foreign keys: ', fks);
      }

      schema.options.relations = {};
      foreignKeys.forEach(function(fk) {
        var propName = nameMapper('column', fk. ...
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.DataSource.prototype.discoverSchemasSync"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.prototype.</span>discoverSchemasSync (modelName, options)](#apidoc.element.loopback.DataSource.prototype.discoverSchemasSync)
- description and source-code
```javascript
discoverSchemasSync = function (modelName, options) {
  var self = this;
  var dbType = this.name || this.connector.name;

  var columns = this.discoverModelPropertiesSync(modelName, options);
  if (!columns || columns.length === 0) {
    return [];
  }

  var nameMapper = options.nameMapper || function mapName(type, name) {
    if (type === 'table' || type === 'model') {
      return fromDBName(name, false);
    } else {
      return fromDBName(name, true);
    }
  };

  // Handle primary keys
  var primaryKeys = this.discoverPrimaryKeysSync(modelName, options);
  var pks = {};
  primaryKeys.forEach(function(pk) {
    pks[pk.columnName] = pk.keySeq;
  });

  if (self.settings.debug) {
    debug('Primary keys: ', pks);
  }

  var schema = {
    name: nameMapper('table', modelName),
    options: {
      idInjection: false, // DO NOT add id property
    },
    properties: {},
  };

  schema.options[dbType] = {
    schema: columns.length > 0 && columns[0].owner,
    table: modelName,
  };

  columns.forEach(function(item) {
    var i = item;

    var propName = nameMapper('column', item.columnName);
    schema.properties[propName] = {
      type: item.type,
      required: (item.nullable === 'N'),
      length: item.dataLength,
      precision: item.dataPrecision,
      scale: item.dataScale,
    };

    if (pks[item.columnName]) {
      schema.properties[propName].id = pks[item.columnName];
    }
    schema.properties[propName][dbType] = {
      columnName: i.columnName,
      dataType: i.dataType,
      dataLength: i.dataLength,
      dataPrecision: item.dataPrecision,
      dataScale: item.dataScale,
      nullable: i.nullable,
    };
  });

  // Add current modelName to the visited tables
  options.visited = options.visited || {};
  var schemaKey = columns[0].owner + '.' + modelName;
  if (!options.visited.hasOwnProperty(schemaKey)) {
    if (self.settings.debug) {
      debug('Adding schema for ' + schemaKey);
    }
    options.visited[schemaKey] = schema;
  }

  var otherTables = {};
  var followingRelations = options.associations || options.relations;
  if (followingRelations) {
    // Handle foreign keys
    var fks = {};
    var foreignKeys = this.discoverForeignKeysSync(modelName, options);
    foreignKeys.forEach(function(fk) {
      var fkInfo = {
        keySeq: fk.keySeq,
        owner: fk.pkOwner,
        tableName: fk.pkTableName,
        columnName: fk.pkColumnName,
      };
      if (fks[fk.fkName]) {
        fks[fk.fkName].push(fkInfo);
      } else {
        fks[fk.fkName] = [fkInfo];
      }
    });

    if (self.settings.debug) {
      debug('Foreign keys: ', fks);
    }

    schema.options.relations = {};
    foreignKeys.forEach(function(fk) {
      var propName = nameMapper('column', fk.pkTableName);
      schema.options.relations[propName] = {
        model: nameMapper('table', fk.pkTableName),
        type: 'belongsTo',
        foreignKey: nameMapper('column', fk.fkColumnName),
      };

      var key = fk.pkOwner + '.' + fk.pkTableName;
      if (!options.visited.hasOwnProperty(key) && !otherTables.hasOwnProperty(key)) {
        otherTables[key] = {owner: fk.pkOwner, tableName: fk.pkTableName};
      }
    });
  }

  if (Object.keys(otherTables).length === 0) {
    return options.visited;
  } else {
    var moreTasks = [];
    for (var t in otherTables) {
      if (self.settings.debug) {
        debug('Discovering related schema for ' + schemaKey);
      }
      var newOptions = {};
      for (var key in options) {
        newOptions[key] = options[key];
      }
      newOptions.owner = otherTables[t].owner;
      self.discoverSchemasSync(otherTables[t].tableName, newOptions);
    }
    return options.visited;
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.DataSource.prototype.enableRemote"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.prototype.</span>enableRemote (operation)](#apidoc.element.loopback.DataSource.prototype.enableRemote)
- description and source-code
```javascript
enableRemote = function (operation) {
  var op = this.getOperation(operation);
  if (op) {
    op.remoteEnabled = true;
  } else {
    throw new Error(g.f('%s is not provided by the attached connector', operation));
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.DataSource.prototype.freeze"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.prototype.</span>freeze ()](#apidoc.element.loopback.DataSource.prototype.freeze)
- description and source-code
```javascript
function freeze() {
  if (!this.connector) {
    throw new Error(g.f('The connector has not been initialized.'));
  }
  if (this.connector.freezeDataSource) {
    this.connector.freezeDataSource();
  }
  if (this.connector.freezeSchema) {
    this.connector.freezeSchema();
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.DataSource.prototype.getModel"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.prototype.</span>getModel (name, forceCreate)](#apidoc.element.loopback.DataSource.prototype.getModel)
- description and source-code
```javascript
getModel = function (name, forceCreate) {
  return this.modelBuilder.getModel(name, forceCreate);
}
```
- example usage
```shell
...
context = context || {};

assert(context.registry,
  'Application registry is mandatory in AccessContext but missing in provided context');
this.registry = context.registry;
this.principals = context.principals || [];
var model = context.model;
model = ('string' === typeof model) ? this.registry.getModel(model) : model;
this.model = model;
this.modelName = model && model.modelName;

this.modelId = context.id || context.modelId;
this.property = context.property || AccessContext.ALL;

this.method = context.method;
...
```

#### <a name="apidoc.element.loopback.DataSource.prototype.getModelDefinition"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.prototype.</span>getModelDefinition (name)](#apidoc.element.loopback.DataSource.prototype.getModelDefinition)
- description and source-code
```javascript
getModelDefinition = function (name) {
  return this.modelBuilder.getModelDefinition(name);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.DataSource.prototype.getOperation"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.prototype.</span>getOperation (operation)](#apidoc.element.loopback.DataSource.prototype.getOperation)
- description and source-code
```javascript
getOperation = function (operation) {
  var ops = this.operations();
  var opKeys = Object.keys(ops);

  for (var i = 0; i < opKeys.length; i++) {
    var op = ops[opKeys[i]];

    if (op.name === operation) {
      return op;
    }
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.DataSource.prototype.getTypes"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.prototype.</span>getTypes ()](#apidoc.element.loopback.DataSource.prototype.getTypes)
- description and source-code
```javascript
getTypes = function () {
  var getTypes = this.connector && this.connector.getTypes;
  var types = getTypes && getTypes() || [];
  if (typeof types === 'string') {
    types = types.split(/[\s,\/]+/);
  }
  return types;
}
```
- example usage
```shell
...

var ds = new DataSource(name, options, self.modelBuilder);
ds.createModel = function(name, properties, settings) {
  settings = settings || {};
  var BaseModel = settings.base || settings.super;
  if (!BaseModel) {
    // Check the connector types
    var connectorTypes = ds.getTypes();
    if (Array.isArray(connectorTypes) && connectorTypes.indexOf('db') !== -1) {
      // Only set up the base model to PersistedModel if the connector is DB
      BaseModel = self.PersistedModel;
    } else {
      BaseModel = self.Model;
    }
    settings.base = BaseModel;
...
```

#### <a name="apidoc.element.loopback.DataSource.prototype.idColumnName"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.prototype.</span>idColumnName (modelName)](#apidoc.element.loopback.DataSource.prototype.idColumnName)
- description and source-code
```javascript
idColumnName = function (modelName) {
  return this.getModelDefinition(modelName).idColumnName(this.connector.name);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.DataSource.prototype.idName"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.prototype.</span>idName (modelName)](#apidoc.element.loopback.DataSource.prototype.idName)
- description and source-code
```javascript
idName = function (modelName) {
  if (!this.getModelDefinition(modelName).idName) {
    g.error('No apidoc.element.loopback.DataSource.prototype.idName name %s', this.getModelDefinition(modelName));
  }
  return this.getModelDefinition(modelName).idName();
}
```
- example usage
```shell
...
 */

PersistedModel.getIdName = function() {
  var Model = this;
  var ds = Model.getDataSource();

  if (ds.idName) {
    return ds.idName(Model.modelName);
  } else {
    return 'id';
  }
};

PersistedModel.setupRemoting = function() {
  var PersistedModel = this;
...
```

#### <a name="apidoc.element.loopback.DataSource.prototype.idNames"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.prototype.</span>idNames (modelName)](#apidoc.element.loopback.DataSource.prototype.idNames)
- description and source-code
```javascript
idNames = function (modelName) {
  return this.getModelDefinition(modelName).idNames();
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.DataSource.prototype.idProperty"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.prototype.</span>idProperty (modelName)](#apidoc.element.loopback.DataSource.prototype.idProperty)
- description and source-code
```javascript
idProperty = function (modelName) {
  var def = this.getModelDefinition(modelName);
  var idProps = def && def.ids();
  return idProps && idProps[0] && idProps[0].property;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.DataSource.prototype.isActual"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.prototype.</span>isActual (models, cb)](#apidoc.element.loopback.DataSource.prototype.isActual)
- description and source-code
```javascript
isActual = function (models, cb) {
  this.freeze();
  if (this.connector.isActual) {
    this.connector.isActual(models, cb);
  } else {
    if ((!cb) && ('function' === typeof models)) {
      cb = models;
      models = undefined;
    }
    if (cb) {
      process.nextTick(function() {
        cb(null, true);
      });
    }
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.DataSource.prototype.isRelational"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.prototype.</span>isRelational ()](#apidoc.element.loopback.DataSource.prototype.isRelational)
- description and source-code
```javascript
isRelational = function () {
  return this.connector && this.connector.relational;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.DataSource.prototype.log"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.prototype.</span>log (sql, t)](#apidoc.element.loopback.DataSource.prototype.log)
- description and source-code
```javascript
log = function (sql, t) {
  debug(sql, t);
  this.emit('log', sql, t);
}
```
- example usage
```shell
...
  app.listen(0, function() {
    process.env.PORT = this.address().port;
    done();
  });
});

grunt.registerTask('skip-karma-on-windows', function() {
  console.log('*** SKIPPING PHANTOM-JS BASED TESTS ON WINDOWS ***');
});

grunt.registerTask('e2e', ['e2e-server', 'karma:e2e']);

// Default task.
grunt.registerTask('default', ['browserify']);
...
```

#### <a name="apidoc.element.loopback.DataSource.prototype.mixin"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.prototype.</span>mixin (ModelCtor)](#apidoc.element.loopback.DataSource.prototype.mixin)
- description and source-code
```javascript
mixin = function (ModelCtor) {
  var ops = this.operations();
  var DAO = this.DataAccessObject;

  // mixin DAO
  jutil.mixin(ModelCtor, DAO, {proxyFunctions: true, override: true});

  // decorate operations as alias functions
  Object.keys(ops).forEach(function(name) {
    var op = ops[name];
    var scope;

    if (op.enabled) {
      scope = op.prototype ? ModelCtor.prototype : ModelCtor;
      // var sfn = scope[name] = function () {
      //   op.scope[op.fnName].apply(self, arguments);
      // }
      Object.keys(op)
        .filter(function(key) {
          // filter out the following keys
          return ~[
            'scope',
            'fnName',
            'prototype',
          ].indexOf(key);
        })
        .forEach(function(key) {
          if (typeof op[key] !== 'undefined') {
            op.scope[op.fnName][key] = op[key];
          }
        });
    }
  });
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.DataSource.prototype.operations"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.prototype.</span>operations ()](#apidoc.element.loopback.DataSource.prototype.operations)
- description and source-code
```javascript
operations = function () {
  return this._operations;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.DataSource.prototype.ping"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.prototype.</span>ping (cb)](#apidoc.element.loopback.DataSource.prototype.ping)
- description and source-code
```javascript
ping = function (cb) {
  var self = this;
  if (self.connector.ping) {
    this.connector.ping(cb);
  } else if (self.connector.discoverModelProperties) {
    self.discoverModelProperties('dummy', {}, cb);
  } else {
    process.nextTick(function() {
      var err = self.connected ? null : new Error(g.f('Not connected'));
      cb(err);
    });
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.DataSource.prototype.ready"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.prototype.</span>ready (obj, args)](#apidoc.element.loopback.DataSource.prototype.ready)
- description and source-code
```javascript
ready = function (obj, args) {
  var self = this;
  if (this.connected) {
    // Connected
    return false;
  }

  var method = args.callee;
  // Set up a callback after the connection is established to continue the method call

  var onConnected = null, onError = null, timeoutHandle = null;
  onConnected = function() {
    // Remove the error handler
    self.removeListener('error', onError);
    if (timeoutHandle) {
      clearTimeout(timeoutHandle);
    }
    var params = [].slice.call(args);
    try {
      method.apply(obj, params);
    } catch (err) {
      // Catch the exception and report it via callback
      var cb = params.pop();
      if (typeof cb === 'function') {
        process.nextTick(function() {
          cb(err);
        });
      } else {
        throw err;
      }
    }
  };
  onError = function(err) {
    // Remove the connected listener
    self.removeListener('connected', onConnected);
    if (timeoutHandle) {
      clearTimeout(timeoutHandle);
    }
    var params = [].slice.call(args);
    var cb = params.pop();
    if (typeof cb === 'function') {
      process.nextTick(function() {
        cb(err);
      });
    }
  };
  this.once('connected', onConnected);
  this.once('error', onError);

  // Set up a timeout to cancel the invocation
  var timeout = this.settings.connectionTimeout || 5000;
  timeoutHandle = setTimeout(function() {
    self.removeListener('error', onError);
    self.removeListener('connected', onConnected);
    var params = [].slice.call(args);
    var cb = params.pop();
    if (typeof cb === 'function') {
      cb(new Error(g.f('Timeout in connecting after %s ms', timeout)));
    }
  }, timeout);

  if (!this.connecting) {
    this.connect();
  }
  return true;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.DataSource.prototype.setup"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.prototype.</span>setup (name, settings)](#apidoc.element.loopback.DataSource.prototype.setup)
- description and source-code
```javascript
setup = function (name, settings) {
  var dataSource = this;
  var connector;

  // support single settings object
  if (name && typeof name === 'object' && !settings) {
    settings = name;
    name = undefined;
  }

  if (typeof settings === 'object') {
    if (settings.initialize) {
      connector = settings;
    } else if (settings.connector) {
      connector = settings.connector;
    } else if (settings.adapter) {
      connector = settings.adapter;
    }
  }

  // just save everything we get
  this.settings = settings || {};

  this.settings.debug = this.settings.debug || debug.enabled;

  if (this.settings.debug) {
    debug('Settings: %j', this.settings);
  }

  // Disconnected by default
  this.connected = false;
  this.connecting = false;

  if (typeof connector === 'string') {
    name = connector;
    connector = undefined;
  }
  name = name || (connector && connector.name);
  this.name = name;

  if (name && !connector) {
    if (typeof name === 'object') {
      // The first argument might be the connector itself
      connector = name;
      this.name = connector.name;
    } else {
      // The connector has not been resolved
      var result = DataSource._resolveConnector(name);
      connector = result.connector;
      if (!connector) {
        console.error(result.error);
        this.emit('error', new Error(result.error));
        return;
      }
    }
  }

  if (connector) {
    var postInit = function postInit(err, result) {
      this._setupConnector();
      // we have an connector now?
      if (!this.connector) {
        throw new Error(g.f('Connector is not defined correctly: ' +
          'it should create '{{connector}}' member of dataSource'));
      }
      this.connected = !err; // Connected now
      if (this.connected) {
        this.emit('connected');
      } else {
        // The connection fails, let's report it and hope it will be recovered in the next call
        g.error('Connection fails: %s\nIt will be retried for the next request.', err);
        this.emit('error', err);
        this.connecting = false;
      }
    }.bind(this);

    try {
      if ('function' === typeof connector.initialize) {
        // Call the async initialize method
        connector.initialize(this, postInit);
      } else if ('function' === typeof connector) {
        // Use the connector constructor directly
        this.connector = new connector(this.settings);
        postInit();
      }
    } catch (err) {
      if (err.message) {
        err.message = 'Cannot initialize connector ' +
          JSON.stringify(connector.name || name)  + ': ' +
          err.message;
      }
      throw err;
    }
  }

  dataSource.connect = function(cb) {
    var dataSource = this;
    if (dataSource.connected || dataSource.connecting) {
      process.nextTick(function() {
        cb && cb();
      });
      return;
    }
    dataSource.connecting = true;
    if (dataSource.connector.connect) {
      dataSource.connector.connect(function(err, result) {
        if (!err) {
          dataSource.connected = true;
          dataSource.connecting = false;
          dataSource.emit('connected');
        } else {
          dataSource.connected = false;
          dataSource.connecting = false;
          dataSource.emit('error', err);
        }
        cb && cb(err, result);
      });
    } else {
      process.nextTick(function() {
        dataSource.connected = true;
        dataSource.connecting = false;
        dataSource.emit('connected');
        cb && cb();
      });
    }
  };
}
```
- example usage
```shell
...
  Model.createOptionsFromRemotingContext = function(ctx) {
    return {
      accessToken: ctx.req.accessToken,
    };
  };

  // setup the initial model
  Model.setup();

  return Model;
};
...
```

#### <a name="apidoc.element.loopback.DataSource.prototype.setupDataAccess"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.prototype.</span>setupDataAccess (modelClass, settings)](#apidoc.element.loopback.DataSource.prototype.setupDataAccess)
- description and source-code
```javascript
setupDataAccess = function (modelClass, settings) {
  if (this.connector) {
    // Check if the id property should be generated
    var idName = modelClass.definition.idName();
    var idProp = modelClass.definition.rawProperties[idName];
    if (idProp && idProp.generated && this.connector.getDefaultIdType) {
      // Set the default id type from connector's ability
      var idType = this.connector.getDefaultIdType() || String;
      idProp.type = idType;
      modelClass.definition.rawProperties[idName].type = idType;
      modelClass.definition.properties[idName].type = idType;
      var forceId = settings.forceId;
      if (idProp.generated && forceId !== false) {
        forceId = true;
      }
      if (forceId) {
        modelClass.validatesAbsenceOf(idName, {if: 'isNewRecord'});
      }
    }
    if (this.connector.define) {
      // pass control to connector
      this.connector.define({
        model: modelClass,
        properties: modelClass.definition.properties,
        settings: settings,
      });
    }
  }

  // add data access objects
  this.mixin(modelClass);

  // define relations from LDL (options.relations)
  var relations = settings.relationships || settings.relations;
  this.defineRelations(modelClass, relations);

  // Emit the dataAccessConfigured event to indicate all the methods for data
  // access have been mixed into the model class
  modelClass.emit('dataAccessConfigured', modelClass);

  // define scopes from LDL (options.relations)
  var scopes = settings.scopes || {};
  this.defineScopes(modelClass, scopes);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.DataSource.prototype.supportTypes"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.prototype.</span>supportTypes (types)](#apidoc.element.loopback.DataSource.prototype.supportTypes)
- description and source-code
```javascript
supportTypes = function (types) {
  var supportedTypes = this.getTypes();
  if (Array.isArray(types)) {
    // Check each of the types
    for (var i = 0; i < types.length; i++) {
      if (supportedTypes.indexOf(types[i]) === -1) {
        // Not supported
        return false;
      }
    }
    return true;
  } else {
    // The types is a string
    return supportedTypes.indexOf(types) !== -1;
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.DataSource.prototype.tableName"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.prototype.</span>tableName (modelName)](#apidoc.element.loopback.DataSource.prototype.tableName)
- description and source-code
```javascript
tableName = function (modelName) {
  return this.getModelDefinition(modelName).tableName(this.connector.name);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.DataSource.prototype.transaction"></a>[function <span class="apidocSignatureSpan">loopback.DataSource.prototype.</span>transaction ()](#apidoc.element.loopback.DataSource.prototype.transaction)
- description and source-code
```javascript
transaction = function () {
  var dataSource = this;
  var transaction = new EventEmitter();

  for (var p in dataSource) {
    transaction[p] = dataSource[p];
  }

  transaction.isTransaction = true;
  transaction.origin = dataSource;
  transaction.name = dataSource.name;
  transaction.settings = dataSource.settings;
  transaction.connected = false;
  transaction.connecting = false;
  transaction.connector = dataSource.connector.transaction();

  // create blank models pool
  transaction.modelBuilder = new ModelBuilder();
  transaction.models = transaction.modelBuilder.models;
  transaction.definitions = transaction.modelBuilder.definitions;

  for (var i in dataSource.modelBuilder.models) {
    dataSource.copyModel.call(transaction, dataSource.modelBuilder.models[i]);
  }

  transaction.exec = function(cb) {
    transaction.connector.exec(cb);
  };

  return transaction;
}
```
- example usage
```shell
n/a
```



# <a name="apidoc.module.loopback.Email"></a>[module loopback.Email](#apidoc.module.loopback.Email)

#### <a name="apidoc.element.loopback.Email.Email"></a>[function <span class="apidocSignatureSpan">loopback.</span>Email (data, options)](#apidoc.element.loopback.Email.Email)
- description and source-code
```javascript
function ModelConstructor(data, options) {
  if (!(this instanceof ModelConstructor)) {
    return new ModelConstructor(data, options);
  }
  if (ModelClass.settings.unresolved) {
    throw new Error(g.f('Model %s is not defined.', ModelClass.modelName));
  }
  ModelBaseClass.apply(this, arguments);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Email.ValidationError"></a>[function <span class="apidocSignatureSpan">loopback.Email.</span>ValidationError (obj)](#apidoc.element.loopback.Email.ValidationError)
- description and source-code
```javascript
function ValidationError(obj) {
  if (!(this instanceof ValidationError)) return new ValidationError(obj);

  this.name = 'ValidationError';

  var context = obj && obj.constructor && obj.constructor.modelName;
  this.message = g.f(
    'The %s instance is not valid. Details: %s.',
      context ? ''' + context + ''' : 'model',
      formatErrors(obj.errors, obj.toJSON()) || '(unknown)'
  );

  this.statusCode = 422;

  this.details = {
    context: context,
    codes: obj.errors && obj.errors.codes,
    messages: obj.errors,
  };

  if (Error.captureStackTrace) {
    // V8 (Chrome, Opera, Node)
    Error.captureStackTrace(this, this.constructor);
  } else if (errorHasStackProperty) {
    // Firefox
    this.stack = (new Error).stack;
  }
  // Safari and PhantomJS initializes 'error.stack' on throw
  // Internet Explorer does not support 'error.stack'
}
```
- example usage
```shell
...
  return save();
}

inst.isValid(function(valid) {
  if (valid) {
    save();
  } else {
    var err = new Model.ValidationError(inst);
    // throws option is dangerous for async usage
    if (options.throws) {
      throw err;
    }
    callback(err, inst);
  }
});
...
```

#### <a name="apidoc.element.loopback.Email._ACL"></a>[function <span class="apidocSignatureSpan">loopback.Email.</span>_ACL (ACL)](#apidoc.element.loopback.Email._ACL)
- description and source-code
```javascript
function getACL(ACL) {
  var registry = this.registry;
  if (ACL !== undefined) {
    // The function is used as a setter
    _aclModel = ACL;
  }
  if (_aclModel) {
    return _aclModel;
  }
  var aclModel = registry.getModel('ACL');
  _aclModel = registry.getModelByType(aclModel);
  return _aclModel;
}
```
- example usage
```shell
...
   * @param {String|Error} err The error object.
   * @param {Boolean} allowed True if the request is allowed; false otherwise.
   */

  Model.checkAccess = function(token, modelId, sharedMethod, ctx, callback) {
var ANONYMOUS = registry.getModel('AccessToken').ANONYMOUS;
token = token || ANONYMOUS;
var aclModel = Model._ACL();

ctx = ctx || {};
if (typeof ctx === 'function' && callback === undefined) {
  callback = ctx;
  ctx = {};
}
...
```

#### <a name="apidoc.element.loopback.Email._getAccessTypeForMethod"></a>[function <span class="apidocSignatureSpan">loopback.Email.</span>_getAccessTypeForMethod (method)](#apidoc.element.loopback.Email._getAccessTypeForMethod)
- description and source-code
```javascript
_getAccessTypeForMethod = function (method) {
  if (typeof method === 'string') {
    method = {name: method};
  }
  assert(
    typeof method === 'object',
    'method is a required argument and must be a RemoteMethod object'
  );

  var ACL = Model._ACL();

  // Check the explicit setting of accessType
  if (method.accessType) {
    assert(method.accessType === ACL.READ ||
      method.accessType === ACL.REPLICATE ||
      method.accessType === ACL.WRITE ||
      method.accessType === ACL.EXECUTE, 'invalid accessType ' +
      method.accessType +
      '. It must be "READ", "REPLICATE", "WRITE", or "EXECUTE"');
    return method.accessType;
  }

  // Default GET requests to READ
  var verb = method.http && method.http.verb;
  if (typeof verb === 'string') {
    verb = verb.toUpperCase();
  }
  if (verb === 'GET' || verb === 'HEAD') {
    return ACL.READ;
  }

  switch (method.name) {
    case 'create':
      return ACL.WRITE;
    case 'updateOrCreate':
      return ACL.WRITE;
    case 'upsertWithWhere':
      return ACL.WRITE;
    case 'upsert':
      return ACL.WRITE;
    case 'exists':
      return ACL.READ;
    case 'findById':
      return ACL.READ;
    case 'find':
      return ACL.READ;
    case 'findOne':
      return ACL.READ;
    case 'destroyById':
      return ACL.WRITE;
    case 'deleteById':
      return ACL.WRITE;
    case 'removeById':
      return ACL.WRITE;
    case 'count':
      return ACL.READ;
    default:
      return ACL.EXECUTE;
  }
}
```
- example usage
```shell
...
if (this.sharedMethod) {
  this.methodNames = this.sharedMethod.aliases.concat([this.sharedMethod.name]);
} else {
  this.methodNames = [];
}

if (this.sharedMethod) {
  this.accessType = this.model._getAccessTypeForMethod(this.sharedMethod);
}

this.accessType = context.accessType || AccessContext.ALL;
assert(loopback.AccessToken,
  'AccessToken model must be defined before AccessContext model');
this.accessToken = context.accessToken || loopback.AccessToken.ANONYMOUS;
...
```

#### <a name="apidoc.element.loopback.Email._notifyBaseObservers"></a>[function <span class="apidocSignatureSpan">loopback.Email.</span>_notifyBaseObservers (operation, context, callback)](#apidoc.element.loopback.Email._notifyBaseObservers)
- description and source-code
```javascript
_notifyBaseObservers = function (operation, context, callback) {
  if (this.base && this.base.notifyObserversOf)
    this.base.notifyObserversOf(operation, context, callback);
  else
    callback();
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Email._runWhenAttachedToApp"></a>[function <span class="apidocSignatureSpan">loopback.Email.</span>_runWhenAttachedToApp (fn)](#apidoc.element.loopback.Email._runWhenAttachedToApp)
- description and source-code
```javascript
_runWhenAttachedToApp = function (fn) {
  if (this.app) return fn(this.app);
  var self = this;
  self.once('attached', function() {
    fn(self.app);
  });
}
```
- example usage
```shell
...
  ModelCtor,
  remotingOptions
);

// before remote hook
ModelCtor.beforeRemote = function(name, fn) {
  var className = this.modelName;
  this._runWhenAttachedToApp(function(app) {
    var remotes = app.remotes();
    remotes.before(className + '.' + name, function(ctx, next) {
      return fn(ctx, ctx.result, next);
    });
  });
};
...
```

#### <a name="apidoc.element.loopback.Email.addListener"></a>[function <span class="apidocSignatureSpan">loopback.Email.</span>addListener ()](#apidoc.element.loopback.Email.addListener)
- description and source-code
```javascript
addListener = function () { [native code] }
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Email.afterRemote"></a>[function <span class="apidocSignatureSpan">loopback.Email.</span>afterRemote (name, fn)](#apidoc.element.loopback.Email.afterRemote)
- description and source-code
```javascript
afterRemote = function (name, fn) {
  var className = this.modelName;
  this._runWhenAttachedToApp(function(app) {
    var remotes = app.remotes();
    remotes.after(className + '.' + name, function(ctx, next) {
      return fn(ctx, ctx.result, next);
    });
  });
}
```
- example usage
```shell
...
        var m = method.isStatic ? method.name : 'prototype.' + method.name;
        if (before && before[delegateTo.name]) {
          self.beforeRemote(m, function(ctx, result, next) {
            before[delegateTo.name]._listeners.call(null, ctx, next);
          });
        }
        if (after && after[delegateTo.name]) {
          self.afterRemote(m, function(ctx, result, next) {
            after[delegateTo.name]._listeners.call(null, ctx, next);
          });
        }
      }
    });
  });
} else {
...
```

#### <a name="apidoc.element.loopback.Email.afterRemoteError"></a>[function <span class="apidocSignatureSpan">loopback.Email.</span>afterRemoteError (name, fn)](#apidoc.element.loopback.Email.afterRemoteError)
- description and source-code
```javascript
afterRemoteError = function (name, fn) {
  var className = this.modelName;
  this._runWhenAttachedToApp(function(app) {
    var remotes = app.remotes();
    remotes.afterError(className + '.' + name, fn);
  });
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Email.attachTo"></a>[function <span class="apidocSignatureSpan">loopback.Email.</span>attachTo (dataSource)](#apidoc.element.loopback.Email.attachTo)
- description and source-code
```javascript
attachTo = function (dataSource) {
  dataSource.attach(this);
}
```
- example usage
```shell
...
  this.on('dataSourceAttached', function() {
    attachRelatedModels(self);
  });

  return this.Change;

  function attachRelatedModels(self) {
    self.Change.attachTo(self.dataSource);
    self.Change.getCheckpointModel().attachTo(self.dataSource);
  }
};

PersistedModel.rectifyAllChanges = function(callback) {
  this.getChangeModel().rectifyAll(callback);
};
...
```

#### <a name="apidoc.element.loopback.Email.beforeRemote"></a>[function <span class="apidocSignatureSpan">loopback.Email.</span>beforeRemote (name, fn)](#apidoc.element.loopback.Email.beforeRemote)
- description and source-code
```javascript
beforeRemote = function (name, fn) {
  var className = this.modelName;
  this._runWhenAttachedToApp(function(app) {
    var remotes = app.remotes();
    remotes.before(className + '.' + name, function(ctx, next) {
      return fn(ctx, ctx.result, next);
    });
  });
}
```
- example usage
```shell
...
        sharedClass.methods().forEach(function(method) {
var delegateTo = method.rest && method.rest.delegateTo;
if (delegateTo && delegateTo.ctor == relation.modelTo) {
  var before = method.isStatic ? beforeListeners : beforeListeners['prototype'];
  var after = method.isStatic ? afterListeners : afterListeners['prototype'];
  var m = method.isStatic ? method.name : 'prototype.' + method.name;
  if (before && before[delegateTo.name]) {
    self.beforeRemote(m, function(ctx, result, next) {
      before[delegateTo.name]._listeners.call(null, ctx, next);
    });
  }
  if (after && after[delegateTo.name]) {
    self.afterRemote(m, function(ctx, result, next) {
      after[delegateTo.name]._listeners.call(null, ctx, next);
    });
...
```

#### <a name="apidoc.element.loopback.Email.belongsToRemoting"></a>[function <span class="apidocSignatureSpan">loopback.Email.</span>belongsToRemoting (relationName, relation, define)](#apidoc.element.loopback.Email.belongsToRemoting)
- description and source-code
```javascript
belongsToRemoting = function (relationName, relation, define) {
  var modelName = relation.modelTo && relation.modelTo.modelName;
  modelName = modelName || 'PersistedModel';
  var fn = this.prototype[relationName];
  var pathName = (relation.options.http && relation.options.http.path) || relationName;
  define('__get__' + relationName, {
    isStatic: false,
    http: {verb: 'get', path: '/' + pathName},
    accepts: [
      {arg: 'refresh', type: 'boolean', http: {source: 'query'}},
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    accessType: 'READ',
    description: format('Fetches belongsTo relation %s.', relationName),
    returns: {arg: relationName, type: modelName, root: true},
  }, fn);
}
```
- example usage
```shell
...
  defineRaw(name, options, fn);
};

// get the relations
for (var relationName in relations) {
  var relation = relations[relationName];
  if (relation.type === 'belongsTo') {
    ModelCtor.belongsToRemoting(relationName, relation, define);
  } else if (
    relation.type === 'hasOne' ||
    relation.type === 'embedsOne'
  ) {
    ModelCtor.hasOneRemoting(relationName, relation, define);
  } else if (
    relation.type === 'hasMany' ||
...
```

#### <a name="apidoc.element.loopback.Email.checkAccess"></a>[function <span class="apidocSignatureSpan">loopback.Email.</span>checkAccess (token, modelId, sharedMethod, ctx, callback)](#apidoc.element.loopback.Email.checkAccess)
- description and source-code
```javascript
checkAccess = function (token, modelId, sharedMethod, ctx, callback) {
  var ANONYMOUS = registry.getModel('AccessToken').ANONYMOUS;
  token = token || ANONYMOUS;
  var aclModel = Model._ACL();

  ctx = ctx || {};
  if (typeof ctx === 'function' && callback === undefined) {
    callback = ctx;
    ctx = {};
  }

  aclModel.checkAccessForContext({
    accessToken: token,
    model: this,
    property: sharedMethod.name,
    method: sharedMethod.name,
    sharedMethod: sharedMethod,
    modelId: modelId,
    accessType: this._getAccessTypeForMethod(sharedMethod),
    remotingContext: ctx,
  }, function(err, accessRequest) {
    if (err) return callback(err);
    callback(null, accessRequest.isAllowed());
  });
}
```
- example usage
```shell
...
var modelSettings = Model.settings || {};
var errStatusCode = modelSettings.aclErrorStatus || app.get('aclErrorStatus') || 401;
if (!req.accessToken) {
  errStatusCode = 401;
}

if (Model.checkAccess) {
  Model.checkAccess(
    req.accessToken,
    modelId,
    method,
    ctx,
    function(err, allowed) {
      if (err) {
        console.log(err);
...
```

#### <a name="apidoc.element.loopback.Email.clearObservers"></a>[function <span class="apidocSignatureSpan">loopback.Email.</span>clearObservers (operation)](#apidoc.element.loopback.Email.clearObservers)
- description and source-code
```javascript
clearObservers = function (operation) {
  if (!(this._observers && this._observers[operation])) return;

  this._observers[operation].length = 0;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Email.createOptionsFromRemotingContext"></a>[function <span class="apidocSignatureSpan">loopback.Email.</span>createOptionsFromRemotingContext (ctx)](#apidoc.element.loopback.Email.createOptionsFromRemotingContext)
- description and source-code
```javascript
createOptionsFromRemotingContext = function (ctx) {
  return {
    accessToken: ctx.req.accessToken,
  };
}
```
- example usage
```shell
...
  var EMPTY_OPTIONS = {};
  var ModelCtor = ctx.method && ctx.method.ctor;
  if (!ModelCtor)
    return EMPTY_OPTIONS;
  if (typeof ModelCtor.createOptionsFromRemotingContext !== 'function')
    return EMPTY_OPTIONS;
  debug('createOptionsFromRemotingContext for %s', ctx.method.stringName);
  return ModelCtor.createOptionsFromRemotingContext(ctx);
}

/**
 * Disable remote invocation for the method with the given name.
 *
 * @param {String} name The name of the method.
 * @param {Boolean} isStatic Is the method static (eg. 'MyModel.myMethod')? Pass
...
```

#### <a name="apidoc.element.loopback.Email.defineProperty"></a>[function <span class="apidocSignatureSpan">loopback.Email.</span>defineProperty (prop, params)](#apidoc.element.loopback.Email.defineProperty)
- description and source-code
```javascript
defineProperty = function (prop, params) {
  if (this.dataSource) {
    this.dataSource.defineProperty(this.modelName, prop, params);
  } else {
    this.modelBuilder.defineProperty(this.modelName, prop, params);
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Email.disableRemoteMethod"></a>[function <span class="apidocSignatureSpan">loopback.Email.</span>disableRemoteMethod (name, isStatic)](#apidoc.element.loopback.Email.disableRemoteMethod)
- description and source-code
```javascript
disableRemoteMethod = function (name, isStatic) {
  deprecated('Model.disableRemoteMethod is deprecated. ' +
    'Use Model.disableRemoteMethodByName instead.');
  var key = this.sharedClass.getKeyFromMethodNameAndTarget(name, isStatic);
  this.sharedClass.disableMethodByName(key);
  this.emit('remoteMethodDisabled', this.sharedClass, key);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Email.disableRemoteMethodByName"></a>[function <span class="apidocSignatureSpan">loopback.Email.</span>disableRemoteMethodByName (name)](#apidoc.element.loopback.Email.disableRemoteMethodByName)
- description and source-code
```javascript
disableRemoteMethodByName = function (name) {
  this.sharedClass.disableMethodByName(name);
  this.emit('remoteMethodDisabled', this.sharedClass, name);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Email.emit"></a>[function <span class="apidocSignatureSpan">loopback.Email.</span>emit ()](#apidoc.element.loopback.Email.emit)
- description and source-code
```javascript
emit = function () { [native code] }
```
- example usage
```shell
...
    return new Model(data);
  });
  this.remotes().addClass(Model.sharedClass);
  if (Model.settings.trackChanges && Model.Change) {
    this.remotes().addClass(Model.Change.sharedClass);
  }
  clearHandlerCache(this);
  this.emit('modelRemoted', Model.sharedClass);
}

var self = this;
Model.on('remoteMethodDisabled', function(model, methodName) {
  self.emit('remoteMethodDisabled', model, methodName);
});
Model.on('remoteMethodAdded', function(model) {
...
```

#### <a name="apidoc.element.loopback.Email.eventNames"></a>[function <span class="apidocSignatureSpan">loopback.Email.</span>eventNames ()](#apidoc.element.loopback.Email.eventNames)
- description and source-code
```javascript
eventNames = function () { [native code] }
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Email.extend"></a>[function <span class="apidocSignatureSpan">loopback.Email.</span>extend (className, subclassProperties, subclassSettings)](#apidoc.element.loopback.Email.extend)
- description and source-code
```javascript
extend = function (className, subclassProperties, subclassSettings) {
  var properties = ModelClass.definition.properties;
  var settings = ModelClass.definition.settings;

  subclassProperties = subclassProperties || {};
  subclassSettings = subclassSettings || {};

  // Check if subclass redefines the ids
  var idFound = false;
  for (var k in subclassProperties) {
    if (subclassProperties[k] && subclassProperties[k].id) {
      idFound = true;
      break;
    }
  }

  // Merging the properties
  var keys = Object.keys(properties);
  for (var i = 0, n = keys.length; i < n; i++) {
    var key = keys[i];

    if (idFound && properties[key].id) {
      // don't inherit id properties
      continue;
    }
    if (subclassProperties[key] === undefined) {
      var baseProp = properties[key];
      var basePropCopy = baseProp;
      if (baseProp && typeof baseProp === 'object') {
        // Deep clone the base prop
        basePropCopy = mergeSettings(null, baseProp);
      }
      subclassProperties[key] = basePropCopy;
    }
  }

  // Merge the settings
  var originalSubclassSettings = subclassSettings;
  subclassSettings = mergeSettings(settings, subclassSettings);

  // Ensure 'base' is not inherited. Note we don't have to delete 'super'
  // as that is removed from settings by modelBuilder.define and thus
  // it is never inherited
  if (!originalSubclassSettings.base) {
    subclassSettings.base = ModelClass;
  }

  // Define the subclass
  var subClass = modelBuilder.define(className, subclassProperties, subclassSettings, ModelClass);

  // Calling the setup function
  if (typeof subClass.setup === 'function') {
    subClass.setup.call(subClass);
  }

  return subClass;
}
```
- example usage
```shell
...
* The base class for **all models**.
*
* **Inheriting from 'Model'**
*
* '''js
* var properties = {...};
* var options = {...};
* var MyModel = loopback.Model.extend('MyModel', properties, options);
* '''
*
* **Options**
*
*  - 'trackChanges' - If true, changes to the model will be tracked. **Required
* for replication.**
*
...
```

#### <a name="apidoc.element.loopback.Email.forEachProperty"></a>[function <span class="apidocSignatureSpan">loopback.Email.</span>forEachProperty (cb)](#apidoc.element.loopback.Email.forEachProperty)
- description and source-code
```javascript
forEachProperty = function (cb) {
  var props = ModelClass.definition.properties;
  var keys = Object.keys(props);
  for (var i = 0, n = keys.length; i < n; i++) {
    cb(keys[i], props[keys[i]]);
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Email.getApp"></a>[function <span class="apidocSignatureSpan">loopback.Email.</span>getApp (callback)](#apidoc.element.loopback.Email.getApp)
- description and source-code
```javascript
getApp = function (callback) {
  var self = this;
  self._runWhenAttachedToApp(function(app) {
    assert(self.app);
    assert.equal(app, self.app);
    callback(null, app);
  });
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Email.getDataSource"></a>[function <span class="apidocSignatureSpan">loopback.Email.</span>getDataSource ()](#apidoc.element.loopback.Email.getDataSource)
- description and source-code
```javascript
getDataSource = function () {
  return this.dataSource;
}
```
- example usage
```shell
...
 * connector that defines it.  Otherwise, uses the default lookup.
 * Override this method to handle complex IDs.
 *
 * @param {*} val The 'id' value. Will be converted to the type that the 'id' property specifies.
 */

PersistedModel.prototype.setId = function(val) {
  var ds = this.getDataSource();
  this[this.getIdName()] = val;
};

/**
 * Get the 'id' value for the 'PersistedModel'.
 *
 * @returns {*} The 'id' value
...
```

#### <a name="apidoc.element.loopback.Email.getMaxListeners"></a>[function <span class="apidocSignatureSpan">loopback.Email.</span>getMaxListeners ()](#apidoc.element.loopback.Email.getMaxListeners)
- description and source-code
```javascript
getMaxListeners = function () { [native code] }
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Email.getPropertyType"></a>[function <span class="apidocSignatureSpan">loopback.Email.</span>getPropertyType (propName)](#apidoc.element.loopback.Email.getPropertyType)
- description and source-code
```javascript
getPropertyType = function (propName) {
  var prop = this.definition.properties[propName];
  if (!prop) {
    // The property is not part of the definition
    return null;
  }
  if (!prop.type) {
    throw new Error(g.f('Type not defined for property %s.%s', this.modelName, propName));
    // return null;
  }
  return prop.type.name;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Email.hasManyRemoting"></a>[function <span class="apidocSignatureSpan">loopback.Email.</span>hasManyRemoting (relationName, relation, define)](#apidoc.element.loopback.Email.hasManyRemoting)
- description and source-code
```javascript
hasManyRemoting = function (relationName, relation, define) {
  var pathName = (relation.options.http && relation.options.http.path) || relationName;
  var toModelName = relation.modelTo.modelName;

  var findByIdFunc = this.prototype['__findById__' + relationName];
  define('__findById__' + relationName, {
    isStatic: false,
    http: {verb: 'get', path: '/' + pathName + '/:fk'},
    accepts: [
      {
        arg: 'fk', type: 'any',
        description: format('Foreign key for %s', relationName),
        required: true,
        http: {source: 'path'},
      },
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Find a related item by id for %s.', relationName),
    accessType: 'READ',
    returns: {arg: 'result', type: toModelName, root: true},
    rest: {after: convertNullToNotFoundError.bind(null, toModelName)},
  }, findByIdFunc);

  var destroyByIdFunc = this.prototype['__destroyById__' + relationName];
  define('__destroyById__' + relationName, {
    isStatic: false,
    http: {verb: 'delete', path: '/' + pathName + '/:fk'},
    accepts: [
      {
        arg: 'fk', type: 'any',
        description: format('Foreign key for %s', relationName),
        required: true,
        http: {source: 'path'},
      },
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Delete a related item by id for %s.', relationName),
    accessType: 'WRITE',
    returns: [],
  }, destroyByIdFunc);

  var updateByIdFunc = this.prototype['__updateById__' + relationName];
  define('__updateById__' + relationName, {
    isStatic: false,
    http: {verb: 'put', path: '/' + pathName + '/:fk'},
    accepts: [
      {arg: 'fk', type: 'any',
        description: format('Foreign key for %s', relationName),
        required: true,
        http: {source: 'path'}},
      {arg: 'data', type: 'object', model: toModelName, http: {source: 'body'}},
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Update a related item by id for %s.', relationName),
    accessType: 'WRITE',
    returns: {arg: 'result', type: toModelName, root: true},
  }, updateByIdFunc);

  if (relation.modelThrough || relation.type === 'referencesMany') {
    var modelThrough = relation.modelThrough || relation.modelTo;

    var accepts = [];
    if (relation.type === 'hasMany' && relation.modelThrough) {
      // Restrict: only hasManyThrough relation can have additional properties
      accepts.push({
        arg: 'data', type: 'object', model: modelThrough.modelName,
        http: {source: 'body'},
      });
    }

    var addFunc = this.prototype['__link__' + relationName];
    define('__link__' + relationName, {
      isStatic: false,
      http: {verb: 'put', path: '/' + pathName + '/rel/:fk'},
      accepts: [{arg: 'fk', type: 'any',
        description: format('Foreign key for %s', relationName),
        required: true,
        http: {source: 'path'}},
      ].concat(accepts).concat([
        {arg: 'options', type: 'object', http: 'optionsFromRequest'},
      ]),
      description: format('Add a related item by id for %s.', relationName),
      accessType: 'WRITE',
      returns: {arg: relationName, type: modelThrough.modelName, root: true},
    }, addFunc);

    var removeFunc = this.prototype['__unlink__' + relationName];
    define('__unlink__' + relationName, {
      isStatic: false,
      http: {verb: 'delete', path: '/' + pathName + '/rel/:fk'},
      accepts: [
        {
          arg: 'fk', type: 'any',
          description: format('Foreign key for %s', relationName),
          required: true,
          http: {source: 'path'},
        },
        {arg: 'options', type: 'object', http: 'optionsFromRequest'},
      ],
      description: format('Remove the %s relation to an item by id.', relationName),
      accessType: 'WRITE',
      returns: [],
    }, removeFunc);

    // FIXME: [rfeng] How to map a function with callback(err, true|false) to HEAD?
    // true --> 200 and false --> 404?
    var existsFunc = this.prototype['__exists__' + relatio ...
```
- example usage
```shell
...
    relation.type === 'embedsOne'
  ) {
    ModelCtor.hasOneRemoting(relationName, relation, define);
  } else if (
    relation.type === 'hasMany' ||
    relation.type === 'embedsMany' ||
    relation.type === 'referencesMany') {
    ModelCtor.hasManyRemoting(relationName, relation, define);
  }
}

// handle scopes
var scopes = ModelCtor.scopes || {};
for (var scopeName in scopes) {
  ModelCtor.scopeRemoting(scopeName, scopes[scopeName], define);
...
```

#### <a name="apidoc.element.loopback.Email.hasOneRemoting"></a>[function <span class="apidocSignatureSpan">loopback.Email.</span>hasOneRemoting (relationName, relation, define)](#apidoc.element.loopback.Email.hasOneRemoting)
- description and source-code
```javascript
hasOneRemoting = function (relationName, relation, define) {
  var pathName = (relation.options.http && relation.options.http.path) || relationName;
  var toModelName = relation.modelTo.modelName;

  define('__get__' + relationName, {
    isStatic: false,
    http: {verb: 'get', path: '/' + pathName},
    accepts: [
      {arg: 'refresh', type: 'boolean', http: {source: 'query'}},
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Fetches hasOne relation %s.', relationName),
    accessType: 'READ',
    returns: {arg: relationName, type: relation.modelTo.modelName, root: true},
    rest: {after: convertNullToNotFoundError.bind(null, toModelName)},
  });

  define('__create__' + relationName, {
    isStatic: false,
    http: {verb: 'post', path: '/' + pathName},
    accepts: [
      {
        arg: 'data', type: 'object', model: toModelName,
        http: {source: 'body'},
      },
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Creates a new instance in %s of this model.', relationName),
    accessType: 'WRITE',
    returns: {arg: 'data', type: toModelName, root: true},
  });

  define('__update__' + relationName, {
    isStatic: false,
    http: {verb: 'put', path: '/' + pathName},
    accepts: [
      {
        arg: 'data', type: 'object', model: toModelName,
        http: {source: 'body'},
      },
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Update %s of this model.', relationName),
    accessType: 'WRITE',
    returns: {arg: 'data', type: toModelName, root: true},
  });

  define('__destroy__' + relationName, {
    isStatic: false,
    http: {verb: 'delete', path: '/' + pathName},
    accepts: [
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Deletes %s of this model.', relationName),
    accessType: 'WRITE',
  });
}
```
- example usage
```shell
...
  var relation = relations[relationName];
  if (relation.type === 'belongsTo') {
    ModelCtor.belongsToRemoting(relationName, relation, define);
  } else if (
    relation.type === 'hasOne' ||
    relation.type === 'embedsOne'
  ) {
    ModelCtor.hasOneRemoting(relationName, relation, define);
  } else if (
    relation.type === 'hasMany' ||
    relation.type === 'embedsMany' ||
    relation.type === 'referencesMany') {
    ModelCtor.hasManyRemoting(relationName, relation, define);
  }
}
...
```

#### <a name="apidoc.element.loopback.Email.isHiddenProperty"></a>[function <span class="apidocSignatureSpan">loopback.Email.</span>isHiddenProperty (propertyName)](#apidoc.element.loopback.Email.isHiddenProperty)
- description and source-code
```javascript
isHiddenProperty = function (propertyName) {
  var Model = this;
  var settings = Model.definition && Model.definition.settings;
  var hiddenProperties = settings && (settings.hiddenProperties || settings.hidden);
  if (Array.isArray(hiddenProperties)) {
    // Cache the hidden properties as an object for quick lookup
    settings.hiddenProperties = {};
    for (var i = 0; i < hiddenProperties.length; i++) {
      settings.hiddenProperties[hiddenProperties[i]] = true;
    }
    hiddenProperties = settings.hiddenProperties;
  }
  if (hiddenProperties) {
    return hiddenProperties[propertyName];
  } else {
    return false;
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Email.isProtectedProperty"></a>[function <span class="apidocSignatureSpan">loopback.Email.</span>isProtectedProperty (propertyName)](#apidoc.element.loopback.Email.isProtectedProperty)
- description and source-code
```javascript
isProtectedProperty = function (propertyName) {
  var Model = this;
  var settings = Model.definition && Model.definition.settings;
  var protectedProperties = settings && (settings.protectedProperties || settings.protected);
  if (Array.isArray(protectedProperties)) {
    // Cache the protected properties as an object for quick lookup
    settings.protectedProperties = {};
    for (var i = 0; i < protectedProperties.length; i++) {
      settings.protectedProperties[protectedProperties[i]] = true;
    }
    protectedProperties = settings.protectedProperties;
  }
  if (protectedProperties) {
    return protectedProperties[propertyName];
  } else {
    return false;
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Email.listenerCount"></a>[function <span class="apidocSignatureSpan">loopback.Email.</span>listenerCount ()](#apidoc.element.loopback.Email.listenerCount)
- description and source-code
```javascript
listenerCount = function () { [native code] }
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Email.listeners"></a>[function <span class="apidocSignatureSpan">loopback.Email.</span>listeners ()](#apidoc.element.loopback.Email.listeners)
- description and source-code
```javascript
listeners = function () { [native code] }
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Email.mixin"></a>[function <span class="apidocSignatureSpan">loopback.Email.</span>mixin (anotherClass, options)](#apidoc.element.loopback.Email.mixin)
- description and source-code
```javascript
mixin = function (anotherClass, options) {
  if (typeof anotherClass === 'string') {
    this.modelBuilder.mixins.applyMixin(this, anotherClass, options);
  } else {
    if (anotherClass.prototype instanceof ModelBaseClass) {
      var props = anotherClass.definition.properties;
      for (var i in props) {
        if (this.definition.properties[i]) {
          continue;
        }
        this.defineProperty(i, props[i]);
      }
    }
    return jutil.mixin(this, anotherClass, options);
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Email.nestRemoting"></a>[function <span class="apidocSignatureSpan">loopback.Email.</span>nestRemoting (relationName, options, filterCallback)](#apidoc.element.loopback.Email.nestRemoting)
- description and source-code
```javascript
nestRemoting = function (relationName, options, filterCallback) {
  if (typeof options === 'function' && !filterCallback) {
    filterCallback = options;
    options = {};
  }
  options = options || {};

  var regExp = /^__([^_]+)__([^_]+)$/;
  var relation = this.relations[relationName];
  if (relation && relation.modelTo && relation.modelTo.sharedClass) {
    var self = this;
    var sharedClass = this.sharedClass;
    var sharedToClass = relation.modelTo.sharedClass;
    var toModelName = relation.modelTo.modelName;

    var pathName = options.pathName || relation.options.path || relationName;
    var paramName = options.paramName || 'nk';

    var http = [].concat(sharedToClass.http || [])[0];
    var httpPath, acceptArgs;

    if (relation.multiple) {
      httpPath = pathName + '/:' + paramName;
      acceptArgs = [
        {
          arg: paramName, type: 'any', http: {source: 'path'},
          description: format('Foreign key for %s.',  relation.name),
          required: true,
        },
      ];
    } else {
      httpPath = pathName;
      acceptArgs = [];
    }

    if (httpPath[0] !== '/') {
      httpPath = '/' + httpPath;
    }

    // A method should return the method name to use, if it is to be
    // included as a nested method - a falsy return value will skip.
    var filter = filterCallback || options.filterMethod || function(method, relation) {
      var matches = method.name.match(regExp);
      if (matches) {
        return '__' + matches[1] + '__' + relation.name + '__' + matches[2];
      }
    };

    sharedToClass.methods().forEach(function(method) {
      var methodName;
      if (!method.isStatic && (methodName = filter(method, relation))) {
        var prefix = relation.multiple ? '__findById__' : '__get__';
        var getterName = options.getterName || (prefix + relationName);

        var getterFn = relation.modelFrom.prototype[getterName];
        if (typeof getterFn !== 'function') {
          throw new Error(g.f('Invalid remote method: '%s'', getterName));
        }

        var nestedFn = relation.modelTo.prototype[method.name];
        if (typeof nestedFn !== 'function') {
          throw new Error(g.f('Invalid remote method: '%s'', method.name));
        }

        var opts = {};

        opts.accepts = acceptArgs.concat(method.accepts || []);
        opts.returns = [].concat(method.returns || []);
        opts.description = method.description;
        opts.accessType = method.accessType;
        opts.rest = extend({}, method.rest || {});
        opts.rest.delegateTo = method;

        opts.http = [];
        var routes = [].concat(method.http || []);
        routes.forEach(function(route) {
          if (route.path) {
            var copy = extend({}, route);
            copy.path = httpPath + route.path;
            opts.http.push(copy);
          }
        });

        if (relation.multiple) {
          sharedClass.defineMethod(methodName, opts, function(fkId) {
            var args = Array.prototype.slice.call(arguments, 1);
            var last = args[args.length - 1];
            var cb = typeof last === 'function' ? last : null;
            this[getterName](fkId, function(err, inst) {
              if (err && cb) return cb(err);
              if (inst instanceof relation.modelTo) {
                try {
                  nestedFn.apply(inst, args);
                } catch (err) {
                  if (cb) return cb(err);
                }
              } else if (cb) {
                cb(err, null);
              }
            });
          }, method.isStatic);
        } else {
          sharedClass.defineMethod(methodName, opts, function() {
            var args = Array.prototype.slice.call(arguments);
            var last = args[args.length - 1];
            var cb = typeof last === 'function' ? last : null;
            this[getterName](function(err, inst) {
              if (err && cb) return cb(err);
              if (inst instanceof relation.modelTo) {
                try {
                  nestedFn.apply(inst, args);
                } catch (err) {
                  if (cb) return ...
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Email.notifyObserversAround"></a>[function <span class="apidocSignatureSpan">loopback.Email.</span>notifyObserversAround (operation, context, fn, callback)](#apidoc.element.loopback.Email.notifyObserversAround)
- description and source-code
```javascript
notifyObserversAround = function (operation, context, fn, callback) {
  var self = this;
  context = context || {};
  // Add callback to the context object so that an observer can skip other
  // ones by calling the callback function directly and not calling next
  if (context.end === undefined) {
    context.end = callback;
  }
  // First notify before observers
  return self.notifyObserversOf('before ' + operation, context,
    function(err, context) {
      if (err) return callback(err);

      function cbForWork(err) {
        var args = [].slice.call(arguments, 0);
        if (err) return callback.apply(null, args);
        // Find the list of params from the callback in addition to err
        var returnedArgs = args.slice(1);
        // Set up the array of results
        context.results = returnedArgs;
        // Notify after observers
        self.notifyObserversOf('after ' + operation, context,
          function(err, context) {
            if (err) return callback(err, context);
            var results = returnedArgs;
            if (context && Array.isArray(context.results)) {
              // Pickup the results from context
              results = context.results;
            }
            // Build the list of params for final callback
            var args = [err].concat(results);
            callback.apply(null, args);
          });
      }

      if (fn.length === 1) {
        // fn(done)
        fn(cbForWork);
      } else {
        // fn(context, done)
        fn(context, cbForWork);
      }
    });
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Email.notifyObserversOf"></a>[function <span class="apidocSignatureSpan">loopback.Email.</span>notifyObserversOf (operation, context, callback)](#apidoc.element.loopback.Email.notifyObserversOf)
- description and source-code
```javascript
notifyObserversOf = function (operation, context, callback) {
  var self = this;
  if (!callback) callback = utils.createPromiseCallback();

  function createNotifier(op) {
    return function(ctx, done) {
      if (typeof ctx === 'function' && done === undefined) {
        done = ctx;
        ctx = context;
      }
      self.notifyObserversOf(op, context, done);
    };
  }

  if (Array.isArray(operation)) {
    var tasks = [];
    for (var i = 0, n = operation.length; i < n; i++) {
      tasks.push(createNotifier(operation[i]));
    }
    return async.waterfall(tasks, callback);
  }

  var observers = this._observers && this._observers[operation];

  this._notifyBaseObservers(operation, context, function doNotify(err) {
    if (err) return callback(err, context);
    if (!observers || !observers.length) return callback(null, context);

    async.eachSeries(
      observers,
      function notifySingleObserver(fn, next) {
        var retval = fn(context, next);
        if (retval && typeof retval.then === 'function') {
          retval.then(
            function() { next(); return null; },
            next // error handler
          );
        }
      },
      function(err) { callback(err, context); }
    );
  });
  return callback.promise;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Email.observe"></a>[function <span class="apidocSignatureSpan">loopback.Email.</span>observe (operation, listener)](#apidoc.element.loopback.Email.observe)
- description and source-code
```javascript
observe = function (operation, listener) {
  this._observers = this._observers || {};
  if (!this._observers[operation]) {
    this._observers[operation] = [];
  }

  this._observers[operation].push(listener);
}
```
- example usage
```shell
...
var idType = idProp && idProp.type;
var idDefn = idProp && idProp.defaultFn;
if (idType !== String || !(idDefn === 'uuid' || idDefn === 'guid')) {
  deprecated('The model ' + this.modelName + ' is tracking changes, ' +
    'which requires a string id with GUID/UUID default value.');
}

Model.observe('after save', rectifyOnSave);

Model.observe('after delete', rectifyOnDelete);

// Only run if the run time is server
// Can switch off cleanup by setting the interval to -1
if (runtime.isServer && cleanupInterval > 0) {
  // initial cleanup
...
```

#### <a name="apidoc.element.loopback.Email.on"></a>[function <span class="apidocSignatureSpan">loopback.Email.</span>on ()](#apidoc.element.loopback.Email.on)
- description and source-code
```javascript
on = function () { [native code] }
```
- example usage
```shell
...
    this.remotes().addClass(Model.Change.sharedClass);
  }
  clearHandlerCache(this);
  this.emit('modelRemoted', Model.sharedClass);
}

var self = this;
Model.on('remoteMethodDisabled', function(model, methodName) {
  self.emit('remoteMethodDisabled', model, methodName);
});
Model.on('remoteMethodAdded', function(model) {
  self.emit('remoteMethodAdded', model);
});

Model.shared = isPublic;
...
```

#### <a name="apidoc.element.loopback.Email.once"></a>[function <span class="apidocSignatureSpan">loopback.Email.</span>once ()](#apidoc.element.loopback.Email.once)
- description and source-code
```javascript
once = function () { [native code] }
```
- example usage
```shell
...
    remotes.afterError(className + '.' + name, fn);
  });
};

ModelCtor._runWhenAttachedToApp = function(fn) {
  if (this.app) return fn(this.app);
  var self = this;
  self.once('attached', function() {
    fn(self.app);
  });
};

if ('injectOptionsFromRemoteContext' in options) {
  console.warn(g.f(
    '%s is using model setting %s which is no longer available.',
...
```

#### <a name="apidoc.element.loopback.Email.prependListener"></a>[function <span class="apidocSignatureSpan">loopback.Email.</span>prependListener ()](#apidoc.element.loopback.Email.prependListener)
- description and source-code
```javascript
prependListener = function () { [native code] }
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Email.prependOnceListener"></a>[function <span class="apidocSignatureSpan">loopback.Email.</span>prependOnceListener ()](#apidoc.element.loopback.Email.prependOnceListener)
- description and source-code
```javascript
prependOnceListener = function () { [native code] }
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Email.registerProperty"></a>[function <span class="apidocSignatureSpan">loopback.Email.</span>registerProperty (propertyName)](#apidoc.element.loopback.Email.registerProperty)
- description and source-code
```javascript
registerProperty = function (propertyName) {
  var properties = modelDefinition.build();
  var prop = properties[propertyName];
  var DataType = prop.type;
  if (!DataType) {
    throw new Error(g.f('Invalid type for property %s', propertyName));
  }

  if (prop.required) {
    var requiredOptions = typeof prop.required === 'object' ? prop.required : undefined;
    ModelClass.validatesPresenceOf(propertyName, requiredOptions);
  }

  Object.defineProperty(ModelClass.prototype, propertyName, {
    get: function() {
      if (ModelClass.getter[propertyName]) {
        return ModelClass.getter[propertyName].call(this); // Try getter first
      } else {
        return this.__data && this.__data[propertyName]; // Try __data
      }
    },
    set: function(value) {
      var DataType = ModelClass.definition.properties[propertyName].type;
      if (Array.isArray(DataType) || DataType === Array) {
        DataType = List;
      } else if (DataType === Date) {
        DataType = DateType;
      } else if (DataType === Boolean) {
        DataType = BooleanType;
      } else if (typeof DataType === 'string') {
        DataType = modelBuilder.resolveType(DataType);
      }

      var persistUndefinedAsNull = ModelClass.definition.settings.persistUndefinedAsNull;
      if (value === undefined && persistUndefinedAsNull) {
        value = null;
      }

      if (ModelClass.setter[propertyName]) {
        ModelClass.setter[propertyName].call(this, value); // Try setter first
      } else {
        this.__data = this.__data || {};
        if (value === null || value === undefined) {
          this.__data[propertyName] = value;
        } else {
          if (DataType === List) {
            this.__data[propertyName] = DataType(value, properties[propertyName].type, this.__data);
          } else {
            // Assume the type constructor handles Constructor() call
            // If not, we should call new DataType(value).valueOf();
            this.__data[propertyName] = (value instanceof DataType) ? value : DataType(value);
          }
        }
      }
    },
    configurable: true,
    enumerable: true,
  });

  // FIXME: [rfeng] Do we need to keep the raw data?
  // Use $ as the prefix to avoid conflicts with properties such as _id
  Object.defineProperty(ModelClass.prototype, '$' + propertyName, {
    get: function() {
      return this.__data && this.__data[propertyName];
    },
    set: function(value) {
      if (!this.__data) {
        this.__data = {};
      }
      this.__data[propertyName] = value;
    },
    configurable: true,
    enumerable: false,
  });
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Email.remoteMethod"></a>[function <span class="apidocSignatureSpan">loopback.Email.</span>remoteMethod (name, options)](#apidoc.element.loopback.Email.remoteMethod)
- description and source-code
```javascript
remoteMethod = function (name, options) {
  if (options.isStatic === undefined) {
    var m = name.match(/^prototype\.(.*)$/);
    options.isStatic = !m;
    name = options.isStatic ? name : m[1];
  }

  if (options.accepts) {
    options = extend({}, options);
    options.accepts = setupOptionsArgs(options.accepts);
  }

  this.sharedClass.defineMethod(name, options);
  this.emit('remoteMethodAdded', this.sharedClass);
}
```
- example usage
```shell
...
  /**
* Enable remote invocation for the specified method.
* See [Remote methods](http://loopback.io/doc/en/lb2/Remote-methods.html) for more information.
*
* Static method example:
* '''js
* Model.myMethod();
* Model.remoteMethod('myMethod');
* '''
*
* @param {String} name The name of the method.
* @param {Object} options The remoting options.
* See [Remote methods - Options](http://loopback.io/doc/en/lb2/Remote-methods.html#options).
*/
...
```

#### <a name="apidoc.element.loopback.Email.removeAllListeners"></a>[function <span class="apidocSignatureSpan">loopback.Email.</span>removeAllListeners ()](#apidoc.element.loopback.Email.removeAllListeners)
- description and source-code
```javascript
removeAllListeners = function () { [native code] }
```
- example usage
```shell
...

var idName = this.getIdName();
var Model = this;
var changes = new PassThrough({objectMode: true});
var writeable = true;

changes.destroy = function() {
  changes.removeAllListeners('error');
  changes.removeAllListeners('end');
  writeable = false;
  changes = null;
};

changes.on('error', function() {
  writeable = false;
...
```

#### <a name="apidoc.element.loopback.Email.removeListener"></a>[function <span class="apidocSignatureSpan">loopback.Email.</span>removeListener ()](#apidoc.element.loopback.Email.removeListener)
- description and source-code
```javascript
removeListener = function () { [native code] }
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Email.removeObserver"></a>[function <span class="apidocSignatureSpan">loopback.Email.</span>removeObserver (operation, listener)](#apidoc.element.loopback.Email.removeObserver)
- description and source-code
```javascript
removeObserver = function (operation, listener) {
  if (!(this._observers && this._observers[operation])) return;

  var index = this._observers[operation].indexOf(listener);
  if (index !== -1) {
    return this._observers[operation].splice(index, 1);
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Email.scopeRemoting"></a>[function <span class="apidocSignatureSpan">loopback.Email.</span>scopeRemoting (scopeName, scope, define)](#apidoc.element.loopback.Email.scopeRemoting)
- description and source-code
```javascript
scopeRemoting = function (scopeName, scope, define) {
  var pathName =
    (scope.options && scope.options.http && scope.options.http.path) || scopeName;

  var isStatic = scope.isStatic;
  var toModelName = scope.modelTo.modelName;

  // https://github.com/strongloop/loopback/issues/811
  // Check if the scope is for a hasMany relation
  var relation = this.relations[scopeName];
  if (relation && relation.modelTo) {
    // For a relation with through model, the toModelName should be the one
    // from the target model
    toModelName = relation.modelTo.modelName;
  }

  define('__get__' + scopeName, {
    isStatic: isStatic,
    http: {verb: 'get', path: '/' + pathName},
    accepts: [
      {arg: 'filter', type: 'object'},
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Queries %s of %s.', scopeName, this.modelName),
    accessType: 'READ',
    returns: {arg: scopeName, type: [toModelName], root: true},
  });

  define('__create__' + scopeName, {
    isStatic: isStatic,
    http: {verb: 'post', path: '/' + pathName},
    accepts: [
      {
        arg: 'data',
        type: 'object',
        allowArray: true,
        model: toModelName,
        http: {source: 'body'},
      },
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Creates a new instance in %s of this model.', scopeName),
    accessType: 'WRITE',
    returns: {arg: 'data', type: toModelName, root: true},
  });

  define('__delete__' + scopeName, {
    isStatic: isStatic,
    http: {verb: 'delete', path: '/' + pathName},
    accepts: [
      {
        arg: 'where', type: 'object',
        // The "where" argument is not exposed in the REST API
        // but we need to provide a value so that we can pass "options"
        // as the third argument.
        http: function(ctx) { return undefined; },
      },
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Deletes all %s of this model.', scopeName),
    accessType: 'WRITE',
  });

  define('__count__' + scopeName, {
    isStatic: isStatic,
    http: {verb: 'get', path: '/' + pathName + '/count'},
    accepts: [
      {
        arg: 'where', type: 'object',
        description: 'Criteria to match model instances',
      },
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Counts %s of %s.', scopeName, this.modelName),
    accessType: 'READ',
    returns: {arg: 'count',  type: 'number'},
  });
}
```
- example usage
```shell
...
        ModelCtor.hasManyRemoting(relationName, relation, define);
      }
    }

    // handle scopes
    var scopes = ModelCtor.scopes || {};
    for (var scopeName in scopes) {
      ModelCtor.scopeRemoting(scopeName, scopes[scopeName], define);
    }
  });

  return ModelCtor;
};

/*!
...
```

#### <a name="apidoc.element.loopback.Email.send"></a>[function <span class="apidocSignatureSpan">loopback.Email.</span>send ()](#apidoc.element.loopback.Email.send)
- description and source-code
```javascript
send = function () {
  throw new Error(g.f('You must connect the {{Email}} Model to a {{Mail}} connector'));
}
```
- example usage
```shell
...
* [Express documentation](http://expressjs.com/) for details.
*
* '''js
* var loopback = require('loopback');
* var app = loopback();
*
* app.get('/', function(req, res){
*   res.send('hello world');
* });
*
* app.listen(3000);
* '''
*
* @class LoopBackApplication
* @header var app = loopback()
...
```

#### <a name="apidoc.element.loopback.Email.setMaxListeners"></a>[function <span class="apidocSignatureSpan">loopback.Email.</span>setMaxListeners ()](#apidoc.element.loopback.Email.setMaxListeners)
- description and source-code
```javascript
setMaxListeners = function () { [native code] }
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Email.setup"></a>[function <span class="apidocSignatureSpan">loopback.Email.</span>setup ()](#apidoc.element.loopback.Email.setup)
- description and source-code
```javascript
setup = function () {
  var ModelCtor = this;
  var Parent = this.super_;

  if (!ModelCtor.registry && Parent && Parent.registry) {
    ModelCtor.registry = Parent.registry;
  }

  var options = this.settings;
  var typeName = this.modelName;

  // support remoting prototype methods
  // it's important to setup this function *before* calling 'new SharedClass'
  // otherwise remoting metadata from our base model is picked up
  ModelCtor.sharedCtor = function(data, id, options, fn) {
    var ModelCtor = this;

    var isRemoteInvocationWithOptions = typeof data !== 'object' &&
      typeof id === 'object' &&
      typeof options === 'function';
    if (isRemoteInvocationWithOptions) {
      // sharedCtor(id, options, fn)
      fn = options;
      options = id;
      id = data;
      data = null;
    } else if (typeof data === 'function') {
      // sharedCtor(fn)
      fn = data;
      data = null;
      id = null;
      options = null;
    } else if (typeof id === 'function') {
      // sharedCtor(data, fn)
      // sharedCtor(id, fn)
      fn = id;
      options = null;

      if (typeof data !== 'object') {
        id = data;
        data = null;
      } else {
        id = null;
      }
    }

    if (id && data) {
      var model = new ModelCtor(data);
      model.id = id;
      fn(null, model);
    } else if (data) {
      fn(null, new ModelCtor(data));
    } else if (id) {
      var filter = {};
      ModelCtor.findById(id, filter, options, function(err, model) {
        if (err) {
          fn(err);
        } else if (model) {
          fn(null, model);
        } else {
          err = new Error(g.f('could not find a model with apidoc.element.loopback.Email.setup %s', id));
          err.statusCode = 404;
          err.code = 'MODEL_NOT_FOUND';
          fn(err);
        }
      });
    } else {
      fn(new Error(g.f('must specify an apidoc.element.loopback.Email.setup or {{data}}')));
    }
  };

  var idDesc = ModelCtor.modelName + ' id';
  ModelCtor.sharedCtor.accepts = [
    {arg: 'id', type: 'any', required: true, http: {source: 'path'},
      description: idDesc},
    // {arg: 'instance', type: 'object', http: {source: 'body'}}
    {arg: 'options', type: 'object', http: createOptionsViaModelMethod},
  ];

  ModelCtor.sharedCtor.http = [
    {path: '/:id'},
  ];

  ModelCtor.sharedCtor.returns = {root: true};

  var remotingOptions = {};
  extend(remotingOptions, options.remoting || {});

  // create a sharedClass
  var sharedClass = ModelCtor.sharedClass = new SharedClass(
    ModelCtor.modelName,
    ModelCtor,
    remotingOptions
  );

  // before remote hook
  ModelCtor.beforeRemote = function(name, fn) {
    var className = this.modelName;
    this._runWhenAttachedToApp(function(app) {
      var remotes = app.remotes();
      remotes.before(className + '.' + name, function(ctx, next) {
        return fn(ctx, ctx.result, next);
      });
    });
  };

  // after remote hook
  ModelCtor.afterRemote = function(name, fn) {
    var className = this.modelName;
    this._runWhenAttachedToApp(function(app) {
      var remotes = app.remotes();
      remotes.after(className + '.' + name, function(ctx, next) {
        return fn(ctx, ctx.result, next);
      });
    });
  };

  ModelCtor.afterRemoteError = function(name, fn) {
    var className = this.modelName;
    this._runWhenAttachedToApp(function(app) {
      var remotes = app.remotes();
      remotes.afterError(className + '.' + name, fn);
    });
  };

  ModelCtor._runWhenAttachedToApp = function(fn) {
    if (this.app) return fn(this.app);
    var self = this;
    self.once('attached', function() {
      fn(self.app);
    });
  };

  if ('injectOptionsFromRemoteContext' in options) {
    console.warn(g.f(
      '%s is using model setting %s which is no longer available.',
      typeName, 'injectOptionsFromRemoteContext'));
    console.warn(g.f(
      'Please rework your app to use the offical solution for injecting ' +
        '"options" argument from request context,\nsee %s',
      'http://loopback.io/doc/en/lb3/Using-current-context.html'));
  }

  // resolve relation functions
  sharedClass.resolve(function resolver(d ...
```
- example usage
```shell
...
  Model.createOptionsFromRemotingContext = function(ctx) {
    return {
      accessToken: ctx.req.accessToken,
    };
  };

  // setup the initial model
  Model.setup();

  return Model;
};
...
```

#### <a name="apidoc.element.loopback.Email.sharedCtor"></a>[function <span class="apidocSignatureSpan">loopback.Email.</span>sharedCtor (data, id, options, fn)](#apidoc.element.loopback.Email.sharedCtor)
- description and source-code
```javascript
sharedCtor = function (data, id, options, fn) {
  var ModelCtor = this;

  var isRemoteInvocationWithOptions = typeof data !== 'object' &&
    typeof id === 'object' &&
    typeof options === 'function';
  if (isRemoteInvocationWithOptions) {
    // sharedCtor(id, options, fn)
    fn = options;
    options = id;
    id = data;
    data = null;
  } else if (typeof data === 'function') {
    // sharedCtor(fn)
    fn = data;
    data = null;
    id = null;
    options = null;
  } else if (typeof id === 'function') {
    // sharedCtor(data, fn)
    // sharedCtor(id, fn)
    fn = id;
    options = null;

    if (typeof data !== 'object') {
      id = data;
      data = null;
    } else {
      id = null;
    }
  }

  if (id && data) {
    var model = new ModelCtor(data);
    model.id = id;
    fn(null, model);
  } else if (data) {
    fn(null, new ModelCtor(data));
  } else if (id) {
    var filter = {};
    ModelCtor.findById(id, filter, options, function(err, model) {
      if (err) {
        fn(err);
      } else if (model) {
        fn(null, model);
      } else {
        err = new Error(g.f('could not find a model with apidoc.element.loopback.Email.sharedCtor %s', id));
        err.statusCode = 404;
        err.code = 'MODEL_NOT_FOUND';
        fn(err);
      }
    });
  } else {
    fn(new Error(g.f('must specify an apidoc.element.loopback.Email.sharedCtor or {{data}}')));
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Email.super_"></a>[function <span class="apidocSignatureSpan">loopback.Email.</span>super_ (data, options)](#apidoc.element.loopback.Email.super_)
- description and source-code
```javascript
function ModelConstructor(data, options) {
  if (!(this instanceof ModelConstructor)) {
    return new ModelConstructor(data, options);
  }
  if (ModelClass.settings.unresolved) {
    throw new Error(g.f('Model %s is not defined.', ModelClass.modelName));
  }
  ModelBaseClass.apply(this, arguments);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Email.validate"></a>[function <span class="apidocSignatureSpan">loopback.Email.</span>validate ()](#apidoc.element.loopback.Email.validate)
- description and source-code
```javascript
validate = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Email.validateAsync"></a>[function <span class="apidocSignatureSpan">loopback.Email.</span>validateAsync ()](#apidoc.element.loopback.Email.validateAsync)
- description and source-code
```javascript
validateAsync = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Email.validatesAbsenceOf"></a>[function <span class="apidocSignatureSpan">loopback.Email.</span>validatesAbsenceOf ()](#apidoc.element.loopback.Email.validatesAbsenceOf)
- description and source-code
```javascript
validatesAbsenceOf = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Email.validatesExclusionOf"></a>[function <span class="apidocSignatureSpan">loopback.Email.</span>validatesExclusionOf ()](#apidoc.element.loopback.Email.validatesExclusionOf)
- description and source-code
```javascript
validatesExclusionOf = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Email.validatesFormatOf"></a>[function <span class="apidocSignatureSpan">loopback.Email.</span>validatesFormatOf ()](#apidoc.element.loopback.Email.validatesFormatOf)
- description and source-code
```javascript
validatesFormatOf = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Email.validatesInclusionOf"></a>[function <span class="apidocSignatureSpan">loopback.Email.</span>validatesInclusionOf ()](#apidoc.element.loopback.Email.validatesInclusionOf)
- description and source-code
```javascript
validatesInclusionOf = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Email.validatesLengthOf"></a>[function <span class="apidocSignatureSpan">loopback.Email.</span>validatesLengthOf ()](#apidoc.element.loopback.Email.validatesLengthOf)
- description and source-code
```javascript
validatesLengthOf = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Email.validatesNumericalityOf"></a>[function <span class="apidocSignatureSpan">loopback.Email.</span>validatesNumericalityOf ()](#apidoc.element.loopback.Email.validatesNumericalityOf)
- description and source-code
```javascript
validatesNumericalityOf = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Email.validatesPresenceOf"></a>[function <span class="apidocSignatureSpan">loopback.Email.</span>validatesPresenceOf ()](#apidoc.element.loopback.Email.validatesPresenceOf)
- description and source-code
```javascript
validatesPresenceOf = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Email.validatesUniquenessOf"></a>[function <span class="apidocSignatureSpan">loopback.Email.</span>validatesUniquenessOf ()](#apidoc.element.loopback.Email.validatesUniquenessOf)
- description and source-code
```javascript
validatesUniquenessOf = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```



# <a name="apidoc.module.loopback.Email.prototype"></a>[module loopback.Email.prototype](#apidoc.module.loopback.Email.prototype)

#### <a name="apidoc.element.loopback.Email.prototype.send"></a>[function <span class="apidocSignatureSpan">loopback.Email.prototype.</span>send ()](#apidoc.element.loopback.Email.prototype.send)
- description and source-code
```javascript
send = function () {
  throw new Error(g.f('You must connect the {{Email}} Model to a {{Mail}} connector'));
}
```
- example usage
```shell
...
* [Express documentation](http://expressjs.com/) for details.
*
* '''js
* var loopback = require('loopback');
* var app = loopback();
*
* app.get('/', function(req, res){
*   res.send('hello world');
* });
*
* app.listen(3000);
* '''
*
* @class LoopBackApplication
* @header var app = loopback()
...
```



# <a name="apidoc.module.loopback.Email.sharedClass"></a>[module loopback.Email.sharedClass](#apidoc.module.loopback.Email.sharedClass)

#### <a name="apidoc.element.loopback.Email.sharedClass.ctor"></a>[function <span class="apidocSignatureSpan">loopback.Email.sharedClass.</span>ctor (data, options)](#apidoc.element.loopback.Email.sharedClass.ctor)
- description and source-code
```javascript
function ModelConstructor(data, options) {
  if (!(this instanceof ModelConstructor)) {
    return new ModelConstructor(data, options);
  }
  if (ModelClass.settings.unresolved) {
    throw new Error(g.f('Model %s is not defined.', ModelClass.modelName));
  }
  ModelBaseClass.apply(this, arguments);
}
```
- example usage
```shell
n/a
```



# <a name="apidoc.module.loopback.Email.super_"></a>[module loopback.Email.super_](#apidoc.module.loopback.Email.super_)

#### <a name="apidoc.element.loopback.Email.super_.super_"></a>[function <span class="apidocSignatureSpan">loopback.Email.</span>super_ {{signature}}](#apidoc.element.loopback.Email.super_.super_)
- description and source-code
```javascript
[Model undefined]
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Email.super_.ValidationError"></a>[function <span class="apidocSignatureSpan">loopback.Email.super_.</span>ValidationError (obj)](#apidoc.element.loopback.Email.super_.ValidationError)
- description and source-code
```javascript
function ValidationError(obj) {
  if (!(this instanceof ValidationError)) return new ValidationError(obj);

  this.name = 'ValidationError';

  var context = obj && obj.constructor && obj.constructor.modelName;
  this.message = g.f(
    'The %s instance is not valid. Details: %s.',
      context ? ''' + context + ''' : 'model',
      formatErrors(obj.errors, obj.toJSON()) || '(unknown)'
  );

  this.statusCode = 422;

  this.details = {
    context: context,
    codes: obj.errors && obj.errors.codes,
    messages: obj.errors,
  };

  if (Error.captureStackTrace) {
    // V8 (Chrome, Opera, Node)
    Error.captureStackTrace(this, this.constructor);
  } else if (errorHasStackProperty) {
    // Firefox
    this.stack = (new Error).stack;
  }
  // Safari and PhantomJS initializes 'error.stack' on throw
  // Internet Explorer does not support 'error.stack'
}
```
- example usage
```shell
...
  return save();
}

inst.isValid(function(valid) {
  if (valid) {
    save();
  } else {
    var err = new Model.ValidationError(inst);
    // throws option is dangerous for async usage
    if (options.throws) {
      throw err;
    }
    callback(err, inst);
  }
});
...
```

#### <a name="apidoc.element.loopback.Email.super_._ACL"></a>[function <span class="apidocSignatureSpan">loopback.Email.super_.</span>_ACL (ACL)](#apidoc.element.loopback.Email.super_._ACL)
- description and source-code
```javascript
function getACL(ACL) {
  var registry = this.registry;
  if (ACL !== undefined) {
    // The function is used as a setter
    _aclModel = ACL;
  }
  if (_aclModel) {
    return _aclModel;
  }
  var aclModel = registry.getModel('ACL');
  _aclModel = registry.getModelByType(aclModel);
  return _aclModel;
}
```
- example usage
```shell
...
   * @param {String|Error} err The error object.
   * @param {Boolean} allowed True if the request is allowed; false otherwise.
   */

  Model.checkAccess = function(token, modelId, sharedMethod, ctx, callback) {
var ANONYMOUS = registry.getModel('AccessToken').ANONYMOUS;
token = token || ANONYMOUS;
var aclModel = Model._ACL();

ctx = ctx || {};
if (typeof ctx === 'function' && callback === undefined) {
  callback = ctx;
  ctx = {};
}
...
```

#### <a name="apidoc.element.loopback.Email.super_._getAccessTypeForMethod"></a>[function <span class="apidocSignatureSpan">loopback.Email.super_.</span>_getAccessTypeForMethod (method)](#apidoc.element.loopback.Email.super_._getAccessTypeForMethod)
- description and source-code
```javascript
_getAccessTypeForMethod = function (method) {
  if (typeof method === 'string') {
    method = {name: method};
  }
  assert(
    typeof method === 'object',
    'method is a required argument and must be a RemoteMethod object'
  );

  var ACL = Model._ACL();

  // Check the explicit setting of accessType
  if (method.accessType) {
    assert(method.accessType === ACL.READ ||
      method.accessType === ACL.REPLICATE ||
      method.accessType === ACL.WRITE ||
      method.accessType === ACL.EXECUTE, 'invalid accessType ' +
      method.accessType +
      '. It must be "READ", "REPLICATE", "WRITE", or "EXECUTE"');
    return method.accessType;
  }

  // Default GET requests to READ
  var verb = method.http && method.http.verb;
  if (typeof verb === 'string') {
    verb = verb.toUpperCase();
  }
  if (verb === 'GET' || verb === 'HEAD') {
    return ACL.READ;
  }

  switch (method.name) {
    case 'create':
      return ACL.WRITE;
    case 'updateOrCreate':
      return ACL.WRITE;
    case 'upsertWithWhere':
      return ACL.WRITE;
    case 'upsert':
      return ACL.WRITE;
    case 'exists':
      return ACL.READ;
    case 'findById':
      return ACL.READ;
    case 'find':
      return ACL.READ;
    case 'findOne':
      return ACL.READ;
    case 'destroyById':
      return ACL.WRITE;
    case 'deleteById':
      return ACL.WRITE;
    case 'removeById':
      return ACL.WRITE;
    case 'count':
      return ACL.READ;
    default:
      return ACL.EXECUTE;
  }
}
```
- example usage
```shell
...
if (this.sharedMethod) {
  this.methodNames = this.sharedMethod.aliases.concat([this.sharedMethod.name]);
} else {
  this.methodNames = [];
}

if (this.sharedMethod) {
  this.accessType = this.model._getAccessTypeForMethod(this.sharedMethod);
}

this.accessType = context.accessType || AccessContext.ALL;
assert(loopback.AccessToken,
  'AccessToken model must be defined before AccessContext model');
this.accessToken = context.accessToken || loopback.AccessToken.ANONYMOUS;
...
```

#### <a name="apidoc.element.loopback.Email.super_._notifyBaseObservers"></a>[function <span class="apidocSignatureSpan">loopback.Email.super_.</span>_notifyBaseObservers (operation, context, callback)](#apidoc.element.loopback.Email.super_._notifyBaseObservers)
- description and source-code
```javascript
_notifyBaseObservers = function (operation, context, callback) {
  if (this.base && this.base.notifyObserversOf)
    this.base.notifyObserversOf(operation, context, callback);
  else
    callback();
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Email.super_._runWhenAttachedToApp"></a>[function <span class="apidocSignatureSpan">loopback.Email.super_.</span>_runWhenAttachedToApp (fn)](#apidoc.element.loopback.Email.super_._runWhenAttachedToApp)
- description and source-code
```javascript
_runWhenAttachedToApp = function (fn) {
  if (this.app) return fn(this.app);
  var self = this;
  self.once('attached', function() {
    fn(self.app);
  });
}
```
- example usage
```shell
...
  ModelCtor,
  remotingOptions
);

// before remote hook
ModelCtor.beforeRemote = function(name, fn) {
  var className = this.modelName;
  this._runWhenAttachedToApp(function(app) {
    var remotes = app.remotes();
    remotes.before(className + '.' + name, function(ctx, next) {
      return fn(ctx, ctx.result, next);
    });
  });
};
...
```

#### <a name="apidoc.element.loopback.Email.super_.addListener"></a>[function <span class="apidocSignatureSpan">loopback.Email.super_.</span>addListener ()](#apidoc.element.loopback.Email.super_.addListener)
- description and source-code
```javascript
addListener = function () { [native code] }
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Email.super_.afterRemote"></a>[function <span class="apidocSignatureSpan">loopback.Email.super_.</span>afterRemote (name, fn)](#apidoc.element.loopback.Email.super_.afterRemote)
- description and source-code
```javascript
afterRemote = function (name, fn) {
  var className = this.modelName;
  this._runWhenAttachedToApp(function(app) {
    var remotes = app.remotes();
    remotes.after(className + '.' + name, function(ctx, next) {
      return fn(ctx, ctx.result, next);
    });
  });
}
```
- example usage
```shell
...
        var m = method.isStatic ? method.name : 'prototype.' + method.name;
        if (before && before[delegateTo.name]) {
          self.beforeRemote(m, function(ctx, result, next) {
            before[delegateTo.name]._listeners.call(null, ctx, next);
          });
        }
        if (after && after[delegateTo.name]) {
          self.afterRemote(m, function(ctx, result, next) {
            after[delegateTo.name]._listeners.call(null, ctx, next);
          });
        }
      }
    });
  });
} else {
...
```

#### <a name="apidoc.element.loopback.Email.super_.afterRemoteError"></a>[function <span class="apidocSignatureSpan">loopback.Email.super_.</span>afterRemoteError (name, fn)](#apidoc.element.loopback.Email.super_.afterRemoteError)
- description and source-code
```javascript
afterRemoteError = function (name, fn) {
  var className = this.modelName;
  this._runWhenAttachedToApp(function(app) {
    var remotes = app.remotes();
    remotes.afterError(className + '.' + name, fn);
  });
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Email.super_.attachTo"></a>[function <span class="apidocSignatureSpan">loopback.Email.super_.</span>attachTo (dataSource)](#apidoc.element.loopback.Email.super_.attachTo)
- description and source-code
```javascript
attachTo = function (dataSource) {
  dataSource.attach(this);
}
```
- example usage
```shell
...
  this.on('dataSourceAttached', function() {
    attachRelatedModels(self);
  });

  return this.Change;

  function attachRelatedModels(self) {
    self.Change.attachTo(self.dataSource);
    self.Change.getCheckpointModel().attachTo(self.dataSource);
  }
};

PersistedModel.rectifyAllChanges = function(callback) {
  this.getChangeModel().rectifyAll(callback);
};
...
```

#### <a name="apidoc.element.loopback.Email.super_.beforeRemote"></a>[function <span class="apidocSignatureSpan">loopback.Email.super_.</span>beforeRemote (name, fn)](#apidoc.element.loopback.Email.super_.beforeRemote)
- description and source-code
```javascript
beforeRemote = function (name, fn) {
  var className = this.modelName;
  this._runWhenAttachedToApp(function(app) {
    var remotes = app.remotes();
    remotes.before(className + '.' + name, function(ctx, next) {
      return fn(ctx, ctx.result, next);
    });
  });
}
```
- example usage
```shell
...
        sharedClass.methods().forEach(function(method) {
var delegateTo = method.rest && method.rest.delegateTo;
if (delegateTo && delegateTo.ctor == relation.modelTo) {
  var before = method.isStatic ? beforeListeners : beforeListeners['prototype'];
  var after = method.isStatic ? afterListeners : afterListeners['prototype'];
  var m = method.isStatic ? method.name : 'prototype.' + method.name;
  if (before && before[delegateTo.name]) {
    self.beforeRemote(m, function(ctx, result, next) {
      before[delegateTo.name]._listeners.call(null, ctx, next);
    });
  }
  if (after && after[delegateTo.name]) {
    self.afterRemote(m, function(ctx, result, next) {
      after[delegateTo.name]._listeners.call(null, ctx, next);
    });
...
```

#### <a name="apidoc.element.loopback.Email.super_.belongsToRemoting"></a>[function <span class="apidocSignatureSpan">loopback.Email.super_.</span>belongsToRemoting (relationName, relation, define)](#apidoc.element.loopback.Email.super_.belongsToRemoting)
- description and source-code
```javascript
belongsToRemoting = function (relationName, relation, define) {
  var modelName = relation.modelTo && relation.modelTo.modelName;
  modelName = modelName || 'PersistedModel';
  var fn = this.prototype[relationName];
  var pathName = (relation.options.http && relation.options.http.path) || relationName;
  define('__get__' + relationName, {
    isStatic: false,
    http: {verb: 'get', path: '/' + pathName},
    accepts: [
      {arg: 'refresh', type: 'boolean', http: {source: 'query'}},
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    accessType: 'READ',
    description: format('Fetches belongsTo relation %s.', relationName),
    returns: {arg: relationName, type: modelName, root: true},
  }, fn);
}
```
- example usage
```shell
...
  defineRaw(name, options, fn);
};

// get the relations
for (var relationName in relations) {
  var relation = relations[relationName];
  if (relation.type === 'belongsTo') {
    ModelCtor.belongsToRemoting(relationName, relation, define);
  } else if (
    relation.type === 'hasOne' ||
    relation.type === 'embedsOne'
  ) {
    ModelCtor.hasOneRemoting(relationName, relation, define);
  } else if (
    relation.type === 'hasMany' ||
...
```

#### <a name="apidoc.element.loopback.Email.super_.checkAccess"></a>[function <span class="apidocSignatureSpan">loopback.Email.super_.</span>checkAccess (token, modelId, sharedMethod, ctx, callback)](#apidoc.element.loopback.Email.super_.checkAccess)
- description and source-code
```javascript
checkAccess = function (token, modelId, sharedMethod, ctx, callback) {
  var ANONYMOUS = registry.getModel('AccessToken').ANONYMOUS;
  token = token || ANONYMOUS;
  var aclModel = Model._ACL();

  ctx = ctx || {};
  if (typeof ctx === 'function' && callback === undefined) {
    callback = ctx;
    ctx = {};
  }

  aclModel.checkAccessForContext({
    accessToken: token,
    model: this,
    property: sharedMethod.name,
    method: sharedMethod.name,
    sharedMethod: sharedMethod,
    modelId: modelId,
    accessType: this._getAccessTypeForMethod(sharedMethod),
    remotingContext: ctx,
  }, function(err, accessRequest) {
    if (err) return callback(err);
    callback(null, accessRequest.isAllowed());
  });
}
```
- example usage
```shell
...
var modelSettings = Model.settings || {};
var errStatusCode = modelSettings.aclErrorStatus || app.get('aclErrorStatus') || 401;
if (!req.accessToken) {
  errStatusCode = 401;
}

if (Model.checkAccess) {
  Model.checkAccess(
    req.accessToken,
    modelId,
    method,
    ctx,
    function(err, allowed) {
      if (err) {
        console.log(err);
...
```

#### <a name="apidoc.element.loopback.Email.super_.clearObservers"></a>[function <span class="apidocSignatureSpan">loopback.Email.super_.</span>clearObservers (operation)](#apidoc.element.loopback.Email.super_.clearObservers)
- description and source-code
```javascript
clearObservers = function (operation) {
  if (!(this._observers && this._observers[operation])) return;

  this._observers[operation].length = 0;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Email.super_.createOptionsFromRemotingContext"></a>[function <span class="apidocSignatureSpan">loopback.Email.super_.</span>createOptionsFromRemotingContext (ctx)](#apidoc.element.loopback.Email.super_.createOptionsFromRemotingContext)
- description and source-code
```javascript
createOptionsFromRemotingContext = function (ctx) {
  return {
    accessToken: ctx.req.accessToken,
  };
}
```
- example usage
```shell
...
  var EMPTY_OPTIONS = {};
  var ModelCtor = ctx.method && ctx.method.ctor;
  if (!ModelCtor)
    return EMPTY_OPTIONS;
  if (typeof ModelCtor.createOptionsFromRemotingContext !== 'function')
    return EMPTY_OPTIONS;
  debug('createOptionsFromRemotingContext for %s', ctx.method.stringName);
  return ModelCtor.createOptionsFromRemotingContext(ctx);
}

/**
 * Disable remote invocation for the method with the given name.
 *
 * @param {String} name The name of the method.
 * @param {Boolean} isStatic Is the method static (eg. 'MyModel.myMethod')? Pass
...
```

#### <a name="apidoc.element.loopback.Email.super_.defineProperty"></a>[function <span class="apidocSignatureSpan">loopback.Email.super_.</span>defineProperty (prop, params)](#apidoc.element.loopback.Email.super_.defineProperty)
- description and source-code
```javascript
defineProperty = function (prop, params) {
  if (this.dataSource) {
    this.dataSource.defineProperty(this.modelName, prop, params);
  } else {
    this.modelBuilder.defineProperty(this.modelName, prop, params);
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Email.super_.disableRemoteMethod"></a>[function <span class="apidocSignatureSpan">loopback.Email.super_.</span>disableRemoteMethod (name, isStatic)](#apidoc.element.loopback.Email.super_.disableRemoteMethod)
- description and source-code
```javascript
disableRemoteMethod = function (name, isStatic) {
  deprecated('Model.disableRemoteMethod is deprecated. ' +
    'Use Model.disableRemoteMethodByName instead.');
  var key = this.sharedClass.getKeyFromMethodNameAndTarget(name, isStatic);
  this.sharedClass.disableMethodByName(key);
  this.emit('remoteMethodDisabled', this.sharedClass, key);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Email.super_.disableRemoteMethodByName"></a>[function <span class="apidocSignatureSpan">loopback.Email.super_.</span>disableRemoteMethodByName (name)](#apidoc.element.loopback.Email.super_.disableRemoteMethodByName)
- description and source-code
```javascript
disableRemoteMethodByName = function (name) {
  this.sharedClass.disableMethodByName(name);
  this.emit('remoteMethodDisabled', this.sharedClass, name);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Email.super_.emit"></a>[function <span class="apidocSignatureSpan">loopback.Email.super_.</span>emit ()](#apidoc.element.loopback.Email.super_.emit)
- description and source-code
```javascript
emit = function () { [native code] }
```
- example usage
```shell
...
    return new Model(data);
  });
  this.remotes().addClass(Model.sharedClass);
  if (Model.settings.trackChanges && Model.Change) {
    this.remotes().addClass(Model.Change.sharedClass);
  }
  clearHandlerCache(this);
  this.emit('modelRemoted', Model.sharedClass);
}

var self = this;
Model.on('remoteMethodDisabled', function(model, methodName) {
  self.emit('remoteMethodDisabled', model, methodName);
});
Model.on('remoteMethodAdded', function(model) {
...
```

#### <a name="apidoc.element.loopback.Email.super_.eventNames"></a>[function <span class="apidocSignatureSpan">loopback.Email.super_.</span>eventNames ()](#apidoc.element.loopback.Email.super_.eventNames)
- description and source-code
```javascript
eventNames = function () { [native code] }
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Email.super_.extend"></a>[function <span class="apidocSignatureSpan">loopback.Email.super_.</span>extend (className, subclassProperties, subclassSettings)](#apidoc.element.loopback.Email.super_.extend)
- description and source-code
```javascript
extend = function (className, subclassProperties, subclassSettings) {
  var properties = ModelClass.definition.properties;
  var settings = ModelClass.definition.settings;

  subclassProperties = subclassProperties || {};
  subclassSettings = subclassSettings || {};

  // Check if subclass redefines the ids
  var idFound = false;
  for (var k in subclassProperties) {
    if (subclassProperties[k] && subclassProperties[k].id) {
      idFound = true;
      break;
    }
  }

  // Merging the properties
  var keys = Object.keys(properties);
  for (var i = 0, n = keys.length; i < n; i++) {
    var key = keys[i];

    if (idFound && properties[key].id) {
      // don't inherit id properties
      continue;
    }
    if (subclassProperties[key] === undefined) {
      var baseProp = properties[key];
      var basePropCopy = baseProp;
      if (baseProp && typeof baseProp === 'object') {
        // Deep clone the base prop
        basePropCopy = mergeSettings(null, baseProp);
      }
      subclassProperties[key] = basePropCopy;
    }
  }

  // Merge the settings
  var originalSubclassSettings = subclassSettings;
  subclassSettings = mergeSettings(settings, subclassSettings);

  // Ensure 'base' is not inherited. Note we don't have to delete 'super'
  // as that is removed from settings by modelBuilder.define and thus
  // it is never inherited
  if (!originalSubclassSettings.base) {
    subclassSettings.base = ModelClass;
  }

  // Define the subclass
  var subClass = modelBuilder.define(className, subclassProperties, subclassSettings, ModelClass);

  // Calling the setup function
  if (typeof subClass.setup === 'function') {
    subClass.setup.call(subClass);
  }

  return subClass;
}
```
- example usage
```shell
...
* The base class for **all models**.
*
* **Inheriting from 'Model'**
*
* '''js
* var properties = {...};
* var options = {...};
* var MyModel = loopback.Model.extend('MyModel', properties, options);
* '''
*
* **Options**
*
*  - 'trackChanges' - If true, changes to the model will be tracked. **Required
* for replication.**
*
...
```

#### <a name="apidoc.element.loopback.Email.super_.forEachProperty"></a>[function <span class="apidocSignatureSpan">loopback.Email.super_.</span>forEachProperty (cb)](#apidoc.element.loopback.Email.super_.forEachProperty)
- description and source-code
```javascript
forEachProperty = function (cb) {
  var props = ModelClass.definition.properties;
  var keys = Object.keys(props);
  for (var i = 0, n = keys.length; i < n; i++) {
    cb(keys[i], props[keys[i]]);
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Email.super_.getApp"></a>[function <span class="apidocSignatureSpan">loopback.Email.super_.</span>getApp (callback)](#apidoc.element.loopback.Email.super_.getApp)
- description and source-code
```javascript
getApp = function (callback) {
  var self = this;
  self._runWhenAttachedToApp(function(app) {
    assert(self.app);
    assert.equal(app, self.app);
    callback(null, app);
  });
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Email.super_.getDataSource"></a>[function <span class="apidocSignatureSpan">loopback.Email.super_.</span>getDataSource ()](#apidoc.element.loopback.Email.super_.getDataSource)
- description and source-code
```javascript
getDataSource = function () {
  return this.dataSource;
}
```
- example usage
```shell
...
 * connector that defines it.  Otherwise, uses the default lookup.
 * Override this method to handle complex IDs.
 *
 * @param {*} val The 'id' value. Will be converted to the type that the 'id' property specifies.
 */

PersistedModel.prototype.setId = function(val) {
  var ds = this.getDataSource();
  this[this.getIdName()] = val;
};

/**
 * Get the 'id' value for the 'PersistedModel'.
 *
 * @returns {*} The 'id' value
...
```

#### <a name="apidoc.element.loopback.Email.super_.getMaxListeners"></a>[function <span class="apidocSignatureSpan">loopback.Email.super_.</span>getMaxListeners ()](#apidoc.element.loopback.Email.super_.getMaxListeners)
- description and source-code
```javascript
getMaxListeners = function () { [native code] }
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Email.super_.getPropertyType"></a>[function <span class="apidocSignatureSpan">loopback.Email.super_.</span>getPropertyType (propName)](#apidoc.element.loopback.Email.super_.getPropertyType)
- description and source-code
```javascript
getPropertyType = function (propName) {
  var prop = this.definition.properties[propName];
  if (!prop) {
    // The property is not part of the definition
    return null;
  }
  if (!prop.type) {
    throw new Error(g.f('Type not defined for property %s.%s', this.modelName, propName));
    // return null;
  }
  return prop.type.name;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Email.super_.hasManyRemoting"></a>[function <span class="apidocSignatureSpan">loopback.Email.super_.</span>hasManyRemoting (relationName, relation, define)](#apidoc.element.loopback.Email.super_.hasManyRemoting)
- description and source-code
```javascript
hasManyRemoting = function (relationName, relation, define) {
  var pathName = (relation.options.http && relation.options.http.path) || relationName;
  var toModelName = relation.modelTo.modelName;

  var findByIdFunc = this.prototype['__findById__' + relationName];
  define('__findById__' + relationName, {
    isStatic: false,
    http: {verb: 'get', path: '/' + pathName + '/:fk'},
    accepts: [
      {
        arg: 'fk', type: 'any',
        description: format('Foreign key for %s', relationName),
        required: true,
        http: {source: 'path'},
      },
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Find a related item by id for %s.', relationName),
    accessType: 'READ',
    returns: {arg: 'result', type: toModelName, root: true},
    rest: {after: convertNullToNotFoundError.bind(null, toModelName)},
  }, findByIdFunc);

  var destroyByIdFunc = this.prototype['__destroyById__' + relationName];
  define('__destroyById__' + relationName, {
    isStatic: false,
    http: {verb: 'delete', path: '/' + pathName + '/:fk'},
    accepts: [
      {
        arg: 'fk', type: 'any',
        description: format('Foreign key for %s', relationName),
        required: true,
        http: {source: 'path'},
      },
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Delete a related item by id for %s.', relationName),
    accessType: 'WRITE',
    returns: [],
  }, destroyByIdFunc);

  var updateByIdFunc = this.prototype['__updateById__' + relationName];
  define('__updateById__' + relationName, {
    isStatic: false,
    http: {verb: 'put', path: '/' + pathName + '/:fk'},
    accepts: [
      {arg: 'fk', type: 'any',
        description: format('Foreign key for %s', relationName),
        required: true,
        http: {source: 'path'}},
      {arg: 'data', type: 'object', model: toModelName, http: {source: 'body'}},
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Update a related item by id for %s.', relationName),
    accessType: 'WRITE',
    returns: {arg: 'result', type: toModelName, root: true},
  }, updateByIdFunc);

  if (relation.modelThrough || relation.type === 'referencesMany') {
    var modelThrough = relation.modelThrough || relation.modelTo;

    var accepts = [];
    if (relation.type === 'hasMany' && relation.modelThrough) {
      // Restrict: only hasManyThrough relation can have additional properties
      accepts.push({
        arg: 'data', type: 'object', model: modelThrough.modelName,
        http: {source: 'body'},
      });
    }

    var addFunc = this.prototype['__link__' + relationName];
    define('__link__' + relationName, {
      isStatic: false,
      http: {verb: 'put', path: '/' + pathName + '/rel/:fk'},
      accepts: [{arg: 'fk', type: 'any',
        description: format('Foreign key for %s', relationName),
        required: true,
        http: {source: 'path'}},
      ].concat(accepts).concat([
        {arg: 'options', type: 'object', http: 'optionsFromRequest'},
      ]),
      description: format('Add a related item by id for %s.', relationName),
      accessType: 'WRITE',
      returns: {arg: relationName, type: modelThrough.modelName, root: true},
    }, addFunc);

    var removeFunc = this.prototype['__unlink__' + relationName];
    define('__unlink__' + relationName, {
      isStatic: false,
      http: {verb: 'delete', path: '/' + pathName + '/rel/:fk'},
      accepts: [
        {
          arg: 'fk', type: 'any',
          description: format('Foreign key for %s', relationName),
          required: true,
          http: {source: 'path'},
        },
        {arg: 'options', type: 'object', http: 'optionsFromRequest'},
      ],
      description: format('Remove the %s relation to an item by id.', relationName),
      accessType: 'WRITE',
      returns: [],
    }, removeFunc);

    // FIXME: [rfeng] How to map a function with callback(err, true|false) to HEAD?
    // true --> 200 and false --> 404?
    var existsFunc = this.prototype['__exists__' + relatio ...
```
- example usage
```shell
...
    relation.type === 'embedsOne'
  ) {
    ModelCtor.hasOneRemoting(relationName, relation, define);
  } else if (
    relation.type === 'hasMany' ||
    relation.type === 'embedsMany' ||
    relation.type === 'referencesMany') {
    ModelCtor.hasManyRemoting(relationName, relation, define);
  }
}

// handle scopes
var scopes = ModelCtor.scopes || {};
for (var scopeName in scopes) {
  ModelCtor.scopeRemoting(scopeName, scopes[scopeName], define);
...
```

#### <a name="apidoc.element.loopback.Email.super_.hasOneRemoting"></a>[function <span class="apidocSignatureSpan">loopback.Email.super_.</span>hasOneRemoting (relationName, relation, define)](#apidoc.element.loopback.Email.super_.hasOneRemoting)
- description and source-code
```javascript
hasOneRemoting = function (relationName, relation, define) {
  var pathName = (relation.options.http && relation.options.http.path) || relationName;
  var toModelName = relation.modelTo.modelName;

  define('__get__' + relationName, {
    isStatic: false,
    http: {verb: 'get', path: '/' + pathName},
    accepts: [
      {arg: 'refresh', type: 'boolean', http: {source: 'query'}},
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Fetches hasOne relation %s.', relationName),
    accessType: 'READ',
    returns: {arg: relationName, type: relation.modelTo.modelName, root: true},
    rest: {after: convertNullToNotFoundError.bind(null, toModelName)},
  });

  define('__create__' + relationName, {
    isStatic: false,
    http: {verb: 'post', path: '/' + pathName},
    accepts: [
      {
        arg: 'data', type: 'object', model: toModelName,
        http: {source: 'body'},
      },
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Creates a new instance in %s of this model.', relationName),
    accessType: 'WRITE',
    returns: {arg: 'data', type: toModelName, root: true},
  });

  define('__update__' + relationName, {
    isStatic: false,
    http: {verb: 'put', path: '/' + pathName},
    accepts: [
      {
        arg: 'data', type: 'object', model: toModelName,
        http: {source: 'body'},
      },
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Update %s of this model.', relationName),
    accessType: 'WRITE',
    returns: {arg: 'data', type: toModelName, root: true},
  });

  define('__destroy__' + relationName, {
    isStatic: false,
    http: {verb: 'delete', path: '/' + pathName},
    accepts: [
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Deletes %s of this model.', relationName),
    accessType: 'WRITE',
  });
}
```
- example usage
```shell
...
  var relation = relations[relationName];
  if (relation.type === 'belongsTo') {
    ModelCtor.belongsToRemoting(relationName, relation, define);
  } else if (
    relation.type === 'hasOne' ||
    relation.type === 'embedsOne'
  ) {
    ModelCtor.hasOneRemoting(relationName, relation, define);
  } else if (
    relation.type === 'hasMany' ||
    relation.type === 'embedsMany' ||
    relation.type === 'referencesMany') {
    ModelCtor.hasManyRemoting(relationName, relation, define);
  }
}
...
```

#### <a name="apidoc.element.loopback.Email.super_.isHiddenProperty"></a>[function <span class="apidocSignatureSpan">loopback.Email.super_.</span>isHiddenProperty (propertyName)](#apidoc.element.loopback.Email.super_.isHiddenProperty)
- description and source-code
```javascript
isHiddenProperty = function (propertyName) {
  var Model = this;
  var settings = Model.definition && Model.definition.settings;
  var hiddenProperties = settings && (settings.hiddenProperties || settings.hidden);
  if (Array.isArray(hiddenProperties)) {
    // Cache the hidden properties as an object for quick lookup
    settings.hiddenProperties = {};
    for (var i = 0; i < hiddenProperties.length; i++) {
      settings.hiddenProperties[hiddenProperties[i]] = true;
    }
    hiddenProperties = settings.hiddenProperties;
  }
  if (hiddenProperties) {
    return hiddenProperties[propertyName];
  } else {
    return false;
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Email.super_.isProtectedProperty"></a>[function <span class="apidocSignatureSpan">loopback.Email.super_.</span>isProtectedProperty (propertyName)](#apidoc.element.loopback.Email.super_.isProtectedProperty)
- description and source-code
```javascript
isProtectedProperty = function (propertyName) {
  var Model = this;
  var settings = Model.definition && Model.definition.settings;
  var protectedProperties = settings && (settings.protectedProperties || settings.protected);
  if (Array.isArray(protectedProperties)) {
    // Cache the protected properties as an object for quick lookup
    settings.protectedProperties = {};
    for (var i = 0; i < protectedProperties.length; i++) {
      settings.protectedProperties[protectedProperties[i]] = true;
    }
    protectedProperties = settings.protectedProperties;
  }
  if (protectedProperties) {
    return protectedProperties[propertyName];
  } else {
    return false;
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Email.super_.listenerCount"></a>[function <span class="apidocSignatureSpan">loopback.Email.super_.</span>listenerCount ()](#apidoc.element.loopback.Email.super_.listenerCount)
- description and source-code
```javascript
listenerCount = function () { [native code] }
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Email.super_.listeners"></a>[function <span class="apidocSignatureSpan">loopback.Email.super_.</span>listeners ()](#apidoc.element.loopback.Email.super_.listeners)
- description and source-code
```javascript
listeners = function () { [native code] }
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Email.super_.mixin"></a>[function <span class="apidocSignatureSpan">loopback.Email.super_.</span>mixin (anotherClass, options)](#apidoc.element.loopback.Email.super_.mixin)
- description and source-code
```javascript
mixin = function (anotherClass, options) {
  if (typeof anotherClass === 'string') {
    this.modelBuilder.mixins.applyMixin(this, anotherClass, options);
  } else {
    if (anotherClass.prototype instanceof ModelBaseClass) {
      var props = anotherClass.definition.properties;
      for (var i in props) {
        if (this.definition.properties[i]) {
          continue;
        }
        this.defineProperty(i, props[i]);
      }
    }
    return jutil.mixin(this, anotherClass, options);
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Email.super_.nestRemoting"></a>[function <span class="apidocSignatureSpan">loopback.Email.super_.</span>nestRemoting (relationName, options, filterCallback)](#apidoc.element.loopback.Email.super_.nestRemoting)
- description and source-code
```javascript
nestRemoting = function (relationName, options, filterCallback) {
  if (typeof options === 'function' && !filterCallback) {
    filterCallback = options;
    options = {};
  }
  options = options || {};

  var regExp = /^__([^_]+)__([^_]+)$/;
  var relation = this.relations[relationName];
  if (relation && relation.modelTo && relation.modelTo.sharedClass) {
    var self = this;
    var sharedClass = this.sharedClass;
    var sharedToClass = relation.modelTo.sharedClass;
    var toModelName = relation.modelTo.modelName;

    var pathName = options.pathName || relation.options.path || relationName;
    var paramName = options.paramName || 'nk';

    var http = [].concat(sharedToClass.http || [])[0];
    var httpPath, acceptArgs;

    if (relation.multiple) {
      httpPath = pathName + '/:' + paramName;
      acceptArgs = [
        {
          arg: paramName, type: 'any', http: {source: 'path'},
          description: format('Foreign key for %s.',  relation.name),
          required: true,
        },
      ];
    } else {
      httpPath = pathName;
      acceptArgs = [];
    }

    if (httpPath[0] !== '/') {
      httpPath = '/' + httpPath;
    }

    // A method should return the method name to use, if it is to be
    // included as a nested method - a falsy return value will skip.
    var filter = filterCallback || options.filterMethod || function(method, relation) {
      var matches = method.name.match(regExp);
      if (matches) {
        return '__' + matches[1] + '__' + relation.name + '__' + matches[2];
      }
    };

    sharedToClass.methods().forEach(function(method) {
      var methodName;
      if (!method.isStatic && (methodName = filter(method, relation))) {
        var prefix = relation.multiple ? '__findById__' : '__get__';
        var getterName = options.getterName || (prefix + relationName);

        var getterFn = relation.modelFrom.prototype[getterName];
        if (typeof getterFn !== 'function') {
          throw new Error(g.f('Invalid remote method: '%s'', getterName));
        }

        var nestedFn = relation.modelTo.prototype[method.name];
        if (typeof nestedFn !== 'function') {
          throw new Error(g.f('Invalid remote method: '%s'', method.name));
        }

        var opts = {};

        opts.accepts = acceptArgs.concat(method.accepts || []);
        opts.returns = [].concat(method.returns || []);
        opts.description = method.description;
        opts.accessType = method.accessType;
        opts.rest = extend({}, method.rest || {});
        opts.rest.delegateTo = method;

        opts.http = [];
        var routes = [].concat(method.http || []);
        routes.forEach(function(route) {
          if (route.path) {
            var copy = extend({}, route);
            copy.path = httpPath + route.path;
            opts.http.push(copy);
          }
        });

        if (relation.multiple) {
          sharedClass.defineMethod(methodName, opts, function(fkId) {
            var args = Array.prototype.slice.call(arguments, 1);
            var last = args[args.length - 1];
            var cb = typeof last === 'function' ? last : null;
            this[getterName](fkId, function(err, inst) {
              if (err && cb) return cb(err);
              if (inst instanceof relation.modelTo) {
                try {
                  nestedFn.apply(inst, args);
                } catch (err) {
                  if (cb) return cb(err);
                }
              } else if (cb) {
                cb(err, null);
              }
            });
          }, method.isStatic);
        } else {
          sharedClass.defineMethod(methodName, opts, function() {
            var args = Array.prototype.slice.call(arguments);
            var last = args[args.length - 1];
            var cb = typeof last === 'function' ? last : null;
            this[getterName](function(err, inst) {
              if (err && cb) return cb(err);
              if (inst instanceof relation.modelTo) {
                try {
                  nestedFn.apply(inst, args);
                } catch (err) {
                  if (cb) return ...
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Email.super_.notifyObserversAround"></a>[function <span class="apidocSignatureSpan">loopback.Email.super_.</span>notifyObserversAround (operation, context, fn, callback)](#apidoc.element.loopback.Email.super_.notifyObserversAround)
- description and source-code
```javascript
notifyObserversAround = function (operation, context, fn, callback) {
  var self = this;
  context = context || {};
  // Add callback to the context object so that an observer can skip other
  // ones by calling the callback function directly and not calling next
  if (context.end === undefined) {
    context.end = callback;
  }
  // First notify before observers
  return self.notifyObserversOf('before ' + operation, context,
    function(err, context) {
      if (err) return callback(err);

      function cbForWork(err) {
        var args = [].slice.call(arguments, 0);
        if (err) return callback.apply(null, args);
        // Find the list of params from the callback in addition to err
        var returnedArgs = args.slice(1);
        // Set up the array of results
        context.results = returnedArgs;
        // Notify after observers
        self.notifyObserversOf('after ' + operation, context,
          function(err, context) {
            if (err) return callback(err, context);
            var results = returnedArgs;
            if (context && Array.isArray(context.results)) {
              // Pickup the results from context
              results = context.results;
            }
            // Build the list of params for final callback
            var args = [err].concat(results);
            callback.apply(null, args);
          });
      }

      if (fn.length === 1) {
        // fn(done)
        fn(cbForWork);
      } else {
        // fn(context, done)
        fn(context, cbForWork);
      }
    });
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Email.super_.notifyObserversOf"></a>[function <span class="apidocSignatureSpan">loopback.Email.super_.</span>notifyObserversOf (operation, context, callback)](#apidoc.element.loopback.Email.super_.notifyObserversOf)
- description and source-code
```javascript
notifyObserversOf = function (operation, context, callback) {
  var self = this;
  if (!callback) callback = utils.createPromiseCallback();

  function createNotifier(op) {
    return function(ctx, done) {
      if (typeof ctx === 'function' && done === undefined) {
        done = ctx;
        ctx = context;
      }
      self.notifyObserversOf(op, context, done);
    };
  }

  if (Array.isArray(operation)) {
    var tasks = [];
    for (var i = 0, n = operation.length; i < n; i++) {
      tasks.push(createNotifier(operation[i]));
    }
    return async.waterfall(tasks, callback);
  }

  var observers = this._observers && this._observers[operation];

  this._notifyBaseObservers(operation, context, function doNotify(err) {
    if (err) return callback(err, context);
    if (!observers || !observers.length) return callback(null, context);

    async.eachSeries(
      observers,
      function notifySingleObserver(fn, next) {
        var retval = fn(context, next);
        if (retval && typeof retval.then === 'function') {
          retval.then(
            function() { next(); return null; },
            next // error handler
          );
        }
      },
      function(err) { callback(err, context); }
    );
  });
  return callback.promise;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Email.super_.observe"></a>[function <span class="apidocSignatureSpan">loopback.Email.super_.</span>observe (operation, listener)](#apidoc.element.loopback.Email.super_.observe)
- description and source-code
```javascript
observe = function (operation, listener) {
  this._observers = this._observers || {};
  if (!this._observers[operation]) {
    this._observers[operation] = [];
  }

  this._observers[operation].push(listener);
}
```
- example usage
```shell
...
var idType = idProp && idProp.type;
var idDefn = idProp && idProp.defaultFn;
if (idType !== String || !(idDefn === 'uuid' || idDefn === 'guid')) {
  deprecated('The model ' + this.modelName + ' is tracking changes, ' +
    'which requires a string id with GUID/UUID default value.');
}

Model.observe('after save', rectifyOnSave);

Model.observe('after delete', rectifyOnDelete);

// Only run if the run time is server
// Can switch off cleanup by setting the interval to -1
if (runtime.isServer && cleanupInterval > 0) {
  // initial cleanup
...
```

#### <a name="apidoc.element.loopback.Email.super_.on"></a>[function <span class="apidocSignatureSpan">loopback.Email.super_.</span>on ()](#apidoc.element.loopback.Email.super_.on)
- description and source-code
```javascript
on = function () { [native code] }
```
- example usage
```shell
...
    this.remotes().addClass(Model.Change.sharedClass);
  }
  clearHandlerCache(this);
  this.emit('modelRemoted', Model.sharedClass);
}

var self = this;
Model.on('remoteMethodDisabled', function(model, methodName) {
  self.emit('remoteMethodDisabled', model, methodName);
});
Model.on('remoteMethodAdded', function(model) {
  self.emit('remoteMethodAdded', model);
});

Model.shared = isPublic;
...
```

#### <a name="apidoc.element.loopback.Email.super_.once"></a>[function <span class="apidocSignatureSpan">loopback.Email.super_.</span>once ()](#apidoc.element.loopback.Email.super_.once)
- description and source-code
```javascript
once = function () { [native code] }
```
- example usage
```shell
...
    remotes.afterError(className + '.' + name, fn);
  });
};

ModelCtor._runWhenAttachedToApp = function(fn) {
  if (this.app) return fn(this.app);
  var self = this;
  self.once('attached', function() {
    fn(self.app);
  });
};

if ('injectOptionsFromRemoteContext' in options) {
  console.warn(g.f(
    '%s is using model setting %s which is no longer available.',
...
```

#### <a name="apidoc.element.loopback.Email.super_.prependListener"></a>[function <span class="apidocSignatureSpan">loopback.Email.super_.</span>prependListener ()](#apidoc.element.loopback.Email.super_.prependListener)
- description and source-code
```javascript
prependListener = function () { [native code] }
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Email.super_.prependOnceListener"></a>[function <span class="apidocSignatureSpan">loopback.Email.super_.</span>prependOnceListener ()](#apidoc.element.loopback.Email.super_.prependOnceListener)
- description and source-code
```javascript
prependOnceListener = function () { [native code] }
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Email.super_.registerProperty"></a>[function <span class="apidocSignatureSpan">loopback.Email.super_.</span>registerProperty (propertyName)](#apidoc.element.loopback.Email.super_.registerProperty)
- description and source-code
```javascript
registerProperty = function (propertyName) {
  var properties = modelDefinition.build();
  var prop = properties[propertyName];
  var DataType = prop.type;
  if (!DataType) {
    throw new Error(g.f('Invalid type for property %s', propertyName));
  }

  if (prop.required) {
    var requiredOptions = typeof prop.required === 'object' ? prop.required : undefined;
    ModelClass.validatesPresenceOf(propertyName, requiredOptions);
  }

  Object.defineProperty(ModelClass.prototype, propertyName, {
    get: function() {
      if (ModelClass.getter[propertyName]) {
        return ModelClass.getter[propertyName].call(this); // Try getter first
      } else {
        return this.__data && this.__data[propertyName]; // Try __data
      }
    },
    set: function(value) {
      var DataType = ModelClass.definition.properties[propertyName].type;
      if (Array.isArray(DataType) || DataType === Array) {
        DataType = List;
      } else if (DataType === Date) {
        DataType = DateType;
      } else if (DataType === Boolean) {
        DataType = BooleanType;
      } else if (typeof DataType === 'string') {
        DataType = modelBuilder.resolveType(DataType);
      }

      var persistUndefinedAsNull = ModelClass.definition.settings.persistUndefinedAsNull;
      if (value === undefined && persistUndefinedAsNull) {
        value = null;
      }

      if (ModelClass.setter[propertyName]) {
        ModelClass.setter[propertyName].call(this, value); // Try setter first
      } else {
        this.__data = this.__data || {};
        if (value === null || value === undefined) {
          this.__data[propertyName] = value;
        } else {
          if (DataType === List) {
            this.__data[propertyName] = DataType(value, properties[propertyName].type, this.__data);
          } else {
            // Assume the type constructor handles Constructor() call
            // If not, we should call new DataType(value).valueOf();
            this.__data[propertyName] = (value instanceof DataType) ? value : DataType(value);
          }
        }
      }
    },
    configurable: true,
    enumerable: true,
  });

  // FIXME: [rfeng] Do we need to keep the raw data?
  // Use $ as the prefix to avoid conflicts with properties such as _id
  Object.defineProperty(ModelClass.prototype, '$' + propertyName, {
    get: function() {
      return this.__data && this.__data[propertyName];
    },
    set: function(value) {
      if (!this.__data) {
        this.__data = {};
      }
      this.__data[propertyName] = value;
    },
    configurable: true,
    enumerable: false,
  });
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Email.super_.remoteMethod"></a>[function <span class="apidocSignatureSpan">loopback.Email.super_.</span>remoteMethod (name, options)](#apidoc.element.loopback.Email.super_.remoteMethod)
- description and source-code
```javascript
remoteMethod = function (name, options) {
  if (options.isStatic === undefined) {
    var m = name.match(/^prototype\.(.*)$/);
    options.isStatic = !m;
    name = options.isStatic ? name : m[1];
  }

  if (options.accepts) {
    options = extend({}, options);
    options.accepts = setupOptionsArgs(options.accepts);
  }

  this.sharedClass.defineMethod(name, options);
  this.emit('remoteMethodAdded', this.sharedClass);
}
```
- example usage
```shell
...
  /**
* Enable remote invocation for the specified method.
* See [Remote methods](http://loopback.io/doc/en/lb2/Remote-methods.html) for more information.
*
* Static method example:
* '''js
* Model.myMethod();
* Model.remoteMethod('myMethod');
* '''
*
* @param {String} name The name of the method.
* @param {Object} options The remoting options.
* See [Remote methods - Options](http://loopback.io/doc/en/lb2/Remote-methods.html#options).
*/
...
```

#### <a name="apidoc.element.loopback.Email.super_.removeAllListeners"></a>[function <span class="apidocSignatureSpan">loopback.Email.super_.</span>removeAllListeners ()](#apidoc.element.loopback.Email.super_.removeAllListeners)
- description and source-code
```javascript
removeAllListeners = function () { [native code] }
```
- example usage
```shell
...

var idName = this.getIdName();
var Model = this;
var changes = new PassThrough({objectMode: true});
var writeable = true;

changes.destroy = function() {
  changes.removeAllListeners('error');
  changes.removeAllListeners('end');
  writeable = false;
  changes = null;
};

changes.on('error', function() {
  writeable = false;
...
```

#### <a name="apidoc.element.loopback.Email.super_.removeListener"></a>[function <span class="apidocSignatureSpan">loopback.Email.super_.</span>removeListener ()](#apidoc.element.loopback.Email.super_.removeListener)
- description and source-code
```javascript
removeListener = function () { [native code] }
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Email.super_.removeObserver"></a>[function <span class="apidocSignatureSpan">loopback.Email.super_.</span>removeObserver (operation, listener)](#apidoc.element.loopback.Email.super_.removeObserver)
- description and source-code
```javascript
removeObserver = function (operation, listener) {
  if (!(this._observers && this._observers[operation])) return;

  var index = this._observers[operation].indexOf(listener);
  if (index !== -1) {
    return this._observers[operation].splice(index, 1);
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Email.super_.scopeRemoting"></a>[function <span class="apidocSignatureSpan">loopback.Email.super_.</span>scopeRemoting (scopeName, scope, define)](#apidoc.element.loopback.Email.super_.scopeRemoting)
- description and source-code
```javascript
scopeRemoting = function (scopeName, scope, define) {
  var pathName =
    (scope.options && scope.options.http && scope.options.http.path) || scopeName;

  var isStatic = scope.isStatic;
  var toModelName = scope.modelTo.modelName;

  // https://github.com/strongloop/loopback/issues/811
  // Check if the scope is for a hasMany relation
  var relation = this.relations[scopeName];
  if (relation && relation.modelTo) {
    // For a relation with through model, the toModelName should be the one
    // from the target model
    toModelName = relation.modelTo.modelName;
  }

  define('__get__' + scopeName, {
    isStatic: isStatic,
    http: {verb: 'get', path: '/' + pathName},
    accepts: [
      {arg: 'filter', type: 'object'},
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Queries %s of %s.', scopeName, this.modelName),
    accessType: 'READ',
    returns: {arg: scopeName, type: [toModelName], root: true},
  });

  define('__create__' + scopeName, {
    isStatic: isStatic,
    http: {verb: 'post', path: '/' + pathName},
    accepts: [
      {
        arg: 'data',
        type: 'object',
        allowArray: true,
        model: toModelName,
        http: {source: 'body'},
      },
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Creates a new instance in %s of this model.', scopeName),
    accessType: 'WRITE',
    returns: {arg: 'data', type: toModelName, root: true},
  });

  define('__delete__' + scopeName, {
    isStatic: isStatic,
    http: {verb: 'delete', path: '/' + pathName},
    accepts: [
      {
        arg: 'where', type: 'object',
        // The "where" argument is not exposed in the REST API
        // but we need to provide a value so that we can pass "options"
        // as the third argument.
        http: function(ctx) { return undefined; },
      },
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Deletes all %s of this model.', scopeName),
    accessType: 'WRITE',
  });

  define('__count__' + scopeName, {
    isStatic: isStatic,
    http: {verb: 'get', path: '/' + pathName + '/count'},
    accepts: [
      {
        arg: 'where', type: 'object',
        description: 'Criteria to match model instances',
      },
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Counts %s of %s.', scopeName, this.modelName),
    accessType: 'READ',
    returns: {arg: 'count',  type: 'number'},
  });
}
```
- example usage
```shell
...
        ModelCtor.hasManyRemoting(relationName, relation, define);
      }
    }

    // handle scopes
    var scopes = ModelCtor.scopes || {};
    for (var scopeName in scopes) {
      ModelCtor.scopeRemoting(scopeName, scopes[scopeName], define);
    }
  });

  return ModelCtor;
};

/*!
...
```

#### <a name="apidoc.element.loopback.Email.super_.setMaxListeners"></a>[function <span class="apidocSignatureSpan">loopback.Email.super_.</span>setMaxListeners ()](#apidoc.element.loopback.Email.super_.setMaxListeners)
- description and source-code
```javascript
setMaxListeners = function () { [native code] }
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Email.super_.setup"></a>[function <span class="apidocSignatureSpan">loopback.Email.super_.</span>setup ()](#apidoc.element.loopback.Email.super_.setup)
- description and source-code
```javascript
setup = function () {
  var ModelCtor = this;
  var Parent = this.super_;

  if (!ModelCtor.registry && Parent && Parent.registry) {
    ModelCtor.registry = Parent.registry;
  }

  var options = this.settings;
  var typeName = this.modelName;

  // support remoting prototype methods
  // it's important to setup this function *before* calling 'new SharedClass'
  // otherwise remoting metadata from our base model is picked up
  ModelCtor.sharedCtor = function(data, id, options, fn) {
    var ModelCtor = this;

    var isRemoteInvocationWithOptions = typeof data !== 'object' &&
      typeof id === 'object' &&
      typeof options === 'function';
    if (isRemoteInvocationWithOptions) {
      // sharedCtor(id, options, fn)
      fn = options;
      options = id;
      id = data;
      data = null;
    } else if (typeof data === 'function') {
      // sharedCtor(fn)
      fn = data;
      data = null;
      id = null;
      options = null;
    } else if (typeof id === 'function') {
      // sharedCtor(data, fn)
      // sharedCtor(id, fn)
      fn = id;
      options = null;

      if (typeof data !== 'object') {
        id = data;
        data = null;
      } else {
        id = null;
      }
    }

    if (id && data) {
      var model = new ModelCtor(data);
      model.id = id;
      fn(null, model);
    } else if (data) {
      fn(null, new ModelCtor(data));
    } else if (id) {
      var filter = {};
      ModelCtor.findById(id, filter, options, function(err, model) {
        if (err) {
          fn(err);
        } else if (model) {
          fn(null, model);
        } else {
          err = new Error(g.f('could not find a model with apidoc.element.loopback.Email.super_.setup %s', id));
          err.statusCode = 404;
          err.code = 'MODEL_NOT_FOUND';
          fn(err);
        }
      });
    } else {
      fn(new Error(g.f('must specify an apidoc.element.loopback.Email.super_.setup or {{data}}')));
    }
  };

  var idDesc = ModelCtor.modelName + ' id';
  ModelCtor.sharedCtor.accepts = [
    {arg: 'id', type: 'any', required: true, http: {source: 'path'},
      description: idDesc},
    // {arg: 'instance', type: 'object', http: {source: 'body'}}
    {arg: 'options', type: 'object', http: createOptionsViaModelMethod},
  ];

  ModelCtor.sharedCtor.http = [
    {path: '/:id'},
  ];

  ModelCtor.sharedCtor.returns = {root: true};

  var remotingOptions = {};
  extend(remotingOptions, options.remoting || {});

  // create a sharedClass
  var sharedClass = ModelCtor.sharedClass = new SharedClass(
    ModelCtor.modelName,
    ModelCtor,
    remotingOptions
  );

  // before remote hook
  ModelCtor.beforeRemote = function(name, fn) {
    var className = this.modelName;
    this._runWhenAttachedToApp(function(app) {
      var remotes = app.remotes();
      remotes.before(className + '.' + name, function(ctx, next) {
        return fn(ctx, ctx.result, next);
      });
    });
  };

  // after remote hook
  ModelCtor.afterRemote = function(name, fn) {
    var className = this.modelName;
    this._runWhenAttachedToApp(function(app) {
      var remotes = app.remotes();
      remotes.after(className + '.' + name, function(ctx, next) {
        return fn(ctx, ctx.result, next);
      });
    });
  };

  ModelCtor.afterRemoteError = function(name, fn) {
    var className = this.modelName;
    this._runWhenAttachedToApp(function(app) {
      var remotes = app.remotes();
      remotes.afterError(className + '.' + name, fn);
    });
  };

  ModelCtor._runWhenAttachedToApp = function(fn) {
    if (this.app) return fn(this.app);
    var self = this;
    self.once('attached', function() {
      fn(self.app);
    });
  };

  if ('injectOptionsFromRemoteContext' in options) {
    console.warn(g.f(
      '%s is using model setting %s which is no longer available.',
      typeName, 'injectOptionsFromRemoteContext'));
    console.warn(g.f(
      'Please rework your app to use the offical solution for injecting ' +
        '"options" argument from request context,\nsee %s',
      'http://loopback.io/doc/en/lb3/Using-current-context.html'));
  }

  // resolve relation functions
  sharedClass.resolve(function resolver(d ...
```
- example usage
```shell
...
  Model.createOptionsFromRemotingContext = function(ctx) {
    return {
      accessToken: ctx.req.accessToken,
    };
  };

  // setup the initial model
  Model.setup();

  return Model;
};
...
```

#### <a name="apidoc.element.loopback.Email.super_.sharedCtor"></a>[function <span class="apidocSignatureSpan">loopback.Email.super_.</span>sharedCtor (data, id, options, fn)](#apidoc.element.loopback.Email.super_.sharedCtor)
- description and source-code
```javascript
sharedCtor = function (data, id, options, fn) {
  var ModelCtor = this;

  var isRemoteInvocationWithOptions = typeof data !== 'object' &&
    typeof id === 'object' &&
    typeof options === 'function';
  if (isRemoteInvocationWithOptions) {
    // sharedCtor(id, options, fn)
    fn = options;
    options = id;
    id = data;
    data = null;
  } else if (typeof data === 'function') {
    // sharedCtor(fn)
    fn = data;
    data = null;
    id = null;
    options = null;
  } else if (typeof id === 'function') {
    // sharedCtor(data, fn)
    // sharedCtor(id, fn)
    fn = id;
    options = null;

    if (typeof data !== 'object') {
      id = data;
      data = null;
    } else {
      id = null;
    }
  }

  if (id && data) {
    var model = new ModelCtor(data);
    model.id = id;
    fn(null, model);
  } else if (data) {
    fn(null, new ModelCtor(data));
  } else if (id) {
    var filter = {};
    ModelCtor.findById(id, filter, options, function(err, model) {
      if (err) {
        fn(err);
      } else if (model) {
        fn(null, model);
      } else {
        err = new Error(g.f('could not find a model with apidoc.element.loopback.Email.super_.sharedCtor %s', id));
        err.statusCode = 404;
        err.code = 'MODEL_NOT_FOUND';
        fn(err);
      }
    });
  } else {
    fn(new Error(g.f('must specify an apidoc.element.loopback.Email.super_.sharedCtor or {{data}}')));
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Email.super_.validate"></a>[function <span class="apidocSignatureSpan">loopback.Email.super_.</span>validate ()](#apidoc.element.loopback.Email.super_.validate)
- description and source-code
```javascript
validate = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Email.super_.validateAsync"></a>[function <span class="apidocSignatureSpan">loopback.Email.super_.</span>validateAsync ()](#apidoc.element.loopback.Email.super_.validateAsync)
- description and source-code
```javascript
validateAsync = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Email.super_.validatesAbsenceOf"></a>[function <span class="apidocSignatureSpan">loopback.Email.super_.</span>validatesAbsenceOf ()](#apidoc.element.loopback.Email.super_.validatesAbsenceOf)
- description and source-code
```javascript
validatesAbsenceOf = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Email.super_.validatesExclusionOf"></a>[function <span class="apidocSignatureSpan">loopback.Email.super_.</span>validatesExclusionOf ()](#apidoc.element.loopback.Email.super_.validatesExclusionOf)
- description and source-code
```javascript
validatesExclusionOf = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Email.super_.validatesFormatOf"></a>[function <span class="apidocSignatureSpan">loopback.Email.super_.</span>validatesFormatOf ()](#apidoc.element.loopback.Email.super_.validatesFormatOf)
- description and source-code
```javascript
validatesFormatOf = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Email.super_.validatesInclusionOf"></a>[function <span class="apidocSignatureSpan">loopback.Email.super_.</span>validatesInclusionOf ()](#apidoc.element.loopback.Email.super_.validatesInclusionOf)
- description and source-code
```javascript
validatesInclusionOf = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Email.super_.validatesLengthOf"></a>[function <span class="apidocSignatureSpan">loopback.Email.super_.</span>validatesLengthOf ()](#apidoc.element.loopback.Email.super_.validatesLengthOf)
- description and source-code
```javascript
validatesLengthOf = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Email.super_.validatesNumericalityOf"></a>[function <span class="apidocSignatureSpan">loopback.Email.super_.</span>validatesNumericalityOf ()](#apidoc.element.loopback.Email.super_.validatesNumericalityOf)
- description and source-code
```javascript
validatesNumericalityOf = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Email.super_.validatesPresenceOf"></a>[function <span class="apidocSignatureSpan">loopback.Email.super_.</span>validatesPresenceOf ()](#apidoc.element.loopback.Email.super_.validatesPresenceOf)
- description and source-code
```javascript
validatesPresenceOf = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Email.super_.validatesUniquenessOf"></a>[function <span class="apidocSignatureSpan">loopback.Email.super_.</span>validatesUniquenessOf ()](#apidoc.element.loopback.Email.super_.validatesUniquenessOf)
- description and source-code
```javascript
validatesUniquenessOf = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```



# <a name="apidoc.module.loopback.Email.super_.super_.prototype"></a>[module loopback.Email.super_.super_.prototype](#apidoc.module.loopback.Email.super_.super_.prototype)

#### <a name="apidoc.element.loopback.Email.super_.super_.prototype._initProperties"></a>[function <span class="apidocSignatureSpan">loopback.Email.super_.super_.prototype.</span>_initProperties (data, options)](#apidoc.element.loopback.Email.super_.super_.prototype._initProperties)
- description and source-code
```javascript
_initProperties = function (data, options) {
  var self = this;
  var ctor = this.constructor;

  if (typeof data !== 'undefined' &&
      typeof (data.constructor) !== 'function') {
    throw new Error(g.f('Property name "function Object() { [native code] }" is not allowed in %s data', ctor.modelName));
  }

  if (data instanceof ctor) {
    // Convert the data to be plain object to avoid pollutions
    data = data.toObject(false);
  }
  var properties = _extend({}, ctor.definition.properties);
  data = data || {};

  if (typeof ctor.applyProperties === 'function') {
    ctor.applyProperties(data);
  }

  options = options || {};
  var applySetters = options.applySetters;
  var applyDefaultValues = options.applyDefaultValues;
  var strict = options.strict;

  if (strict === undefined) {
    strict = ctor.definition.settings.strict;
  } else if (strict === 'throw') {
    g.warn('Warning: Model %s, {{strict mode: 'throw'}} has been removed, ' +
      'please use {{'strict: true'}} instead, which returns' +
      '{{'Validation Error'}} for unknown properties,', ctor.modelName);
  }

  var persistUndefinedAsNull = ctor.definition.settings.persistUndefinedAsNull;

  if (ctor.hideInternalProperties) {
    // Object.defineProperty() is expensive. We only try to make the internal
    // properties hidden (non-enumerable) if the model class has the
    // 'hideInternalProperties' set to true
    Object.defineProperties(this, {
      __cachedRelations: {
        writable: true,
        enumerable: false,
        configurable: true,
        value: {},
      },

      __data: {
        writable: true,
        enumerable: false,
        configurable: true,
        value: {},
      },

      // Instance level data source
      __dataSource: {
        writable: true,
        enumerable: false,
        configurable: true,
        value: options.dataSource,
      },

      // Instance level strict mode
      __strict: {
        writable: true,
        enumerable: false,
        configurable: true,
        value: strict,
      },

      __persisted: {
        writable: true,
        enumerable: false,
        configurable: true,
        value: false,
      },
    });

    if (strict) {
      Object.defineProperty(this, '__unknownProperties', {
        writable: true,
        enumerable: false,
        configrable: true,
        value: [],
      });
    }
  } else {
    this.__cachedRelations = {};
    this.__data = {};
    this.__dataSource = options.dataSource;
    this.__strict = strict;
    this.__persisted = false;
    if (strict) {
      this.__unknownProperties = [];
    }
  }

  if (options.persisted !== undefined) {
    this.__persisted = options.persisted === true;
  }

  if (data.__cachedRelations) {
    this.__cachedRelations = data.__cachedRelations;
  }

  var keys = Object.keys(data);

  if (Array.isArray(options.fields)) {
    keys = keys.filter(function(k) {
      return (options.fields.indexOf(k) != -1);
    });
  }

  var size = keys.length;
  var p, propVal;
  for (var k = 0; k < size; k++) {
    p = keys[k];
    propVal = data[p];
    if (typeof propVal === 'function') {
      continue;
    }

    if (propVal === undefined && persistUndefinedAsNull) {
      propVal = null;
    }

    if (properties[p]) {
      // Managed property
      if (applySetters || properties[p].id) {
        self[p] = propVal;
      } else {
        self.__data[p] = propVal;
      }
    } else if (ctor.relations[p]) {
      var relationType = ctor.relations[p].type;

      var modelTo;
      if (!properties[p]) {
        modelTo = ctor.relations[p].modelTo || ModelBaseClass;
        var multiple = ctor.relations[p].multiple;
        var typeName = multiple ? 'Array' : modelTo.modelName;
        var propType = multiple ? [modelTo] : modelTo;
        properties[p] = {name: typeName, type: propType};
<span class="apidocCodeCommentSpan">        /* Issue #1252
        this.setStrict(false);
        */
</span>      }

      // Relation
      if (relationType === 'belongsTo' && propVal != null) {
        // If the related model is populated
        self.__data[ctor.relations[p].keyFrom] = propVal[ctor.relations[p].keyTo]; ...
```
- example usage
```shell
...
});

// then save
function save() {
  inst.trigger('save', function(saveDone) {
    inst.trigger('update', function(updateDone) {
      Model.upsert(inst, function(err) {
        inst._initProperties(data);
        updateDone.call(inst, function() {
          saveDone.call(inst, function() {
            callback(err, inst);
          });
        });
      });
    }, data);
...
```

#### <a name="apidoc.element.loopback.Email.super_.super_.prototype.fromObject"></a>[function <span class="apidocSignatureSpan">loopback.Email.super_.super_.prototype.</span>fromObject (obj)](#apidoc.element.loopback.Email.super_.super_.prototype.fromObject)
- description and source-code
```javascript
fromObject = function (obj) {
  for (var key in obj) {
    this[key] = obj[key];
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Email.super_.super_.prototype.getDataSource"></a>[function <span class="apidocSignatureSpan">loopback.Email.super_.super_.prototype.</span>getDataSource ()](#apidoc.element.loopback.Email.super_.super_.prototype.getDataSource)
- description and source-code
```javascript
getDataSource = function () {
  return this.__dataSource || this.constructor.dataSource;
}
```
- example usage
```shell
...
 * connector that defines it.  Otherwise, uses the default lookup.
 * Override this method to handle complex IDs.
 *
 * @param {*} val The 'id' value. Will be converted to the type that the 'id' property specifies.
 */

PersistedModel.prototype.setId = function(val) {
  var ds = this.getDataSource();
  this[this.getIdName()] = val;
};

/**
 * Get the 'id' value for the 'PersistedModel'.
 *
 * @returns {*} The 'id' value
...
```

#### <a name="apidoc.element.loopback.Email.super_.super_.prototype.getPropertyType"></a>[function <span class="apidocSignatureSpan">loopback.Email.super_.super_.prototype.</span>getPropertyType (propName)](#apidoc.element.loopback.Email.super_.super_.prototype.getPropertyType)
- description and source-code
```javascript
getPropertyType = function (propName) {
  return this.constructor.getPropertyType(propName);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Email.super_.super_.prototype.inspect"></a>[function <span class="apidocSignatureSpan">loopback.Email.super_.super_.prototype.</span>inspect (depth)](#apidoc.element.loopback.Email.super_.super_.prototype.inspect)
- description and source-code
```javascript
inspect = function (depth) {
  if (INSPECT_SUPPORTS_OBJECT_RETVAL)
    return this.__data;

  // Workaround for older versions
  // See also https://github.com/joyent/node/commit/66280de133
  return util.inspect(this.__data, {
    showHidden: false,
    depth: depth,
    colors: false,
  });
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Email.super_.super_.prototype.isValid"></a>[function <span class="apidocSignatureSpan">loopback.Email.super_.super_.prototype.</span>isValid (callback, data, options)](#apidoc.element.loopback.Email.super_.super_.prototype.isValid)
- description and source-code
```javascript
isValid = function (callback, data, options) {
  options = options || {};
  var valid = true, inst = this, wait = 0, async = false;
  var validations = this.constructor.validations;

  var reportDiscardedProperties = this.__strict &&
    this.__unknownProperties && this.__unknownProperties.length;

  // exit with success when no errors
  if (typeof validations !== 'object' && !reportDiscardedProperties) {
    cleanErrors(this);
    if (callback) {
      this.trigger('validate', function(validationsDone) {
        validationsDone.call(inst, function() {
          callback(valid);
        });
      }, data, callback);
    }
    return valid;
  }

  Object.defineProperty(this, 'errors', {
    enumerable: false,
    configurable: true,
    value: new Errors,
  });

  this.trigger('validate', function(validationsDone) {
    var inst = this,
      asyncFail = false;

    var attrs = Object.keys(validations || {});

    attrs.forEach(function(attr) {
      var attrValidations = validations[attr] || [];
      attrValidations.forEach(function(v) {
        if (v.options && v.options.async) {
          async = true;
          wait += 1;
          process.nextTick(function() {
            validationFailed(inst, attr, v, options, done);
          });
        } else {
          if (validationFailed(inst, attr, v)) {
            valid = false;
          }
        }
      });
    });

    if (reportDiscardedProperties) {
      for (var ix in inst.__unknownProperties) {
        var key = inst.__unknownProperties[ix];
        var code = 'unknown-property';
        var msg = defaultMessages[code];
        inst.errors.add(key, msg, code);
        valid = false;
      }
    }

    if (!async) {
      validationsDone.call(inst, function() {
        if (valid) cleanErrors(inst);
        if (callback) {
          callback(valid);
        }
      });
    }

    function done(fail) {
      asyncFail = asyncFail || fail;
      if (--wait === 0) {
        validationsDone.call(inst, function() {
          if (valid && !asyncFail) cleanErrors(inst);
          if (callback) {
            callback(valid && !asyncFail);
          }
        });
      }
    }
  }, data, callback);

  if (async) {
    // in case of async validation we should return undefined here,
    // because not all validations are finished yet
    return;
  } else {
    return valid;
  }
}
```
- example usage
```shell
...
}

// validate first
if (!options.validate) {
  return save();
}

inst.isValid(function(valid) {
  if (valid) {
    save();
  } else {
    var err = new Model.ValidationError(inst);
    // throws option is dangerous for async usage
    if (options.throws) {
      throw err;
...
```

#### <a name="apidoc.element.loopback.Email.super_.super_.prototype.reset"></a>[function <span class="apidocSignatureSpan">loopback.Email.super_.super_.prototype.</span>reset ()](#apidoc.element.loopback.Email.super_.super_.prototype.reset)
- description and source-code
```javascript
reset = function () {
  var obj = this;
  for (var k in obj) {
    if (k !== 'id' && !obj.constructor.dataSource.definitions[obj.constructor.modelName].properties[k]) {
      delete obj[k];
    }
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Email.super_.super_.prototype.setStrict"></a>[function <span class="apidocSignatureSpan">loopback.Email.super_.super_.prototype.</span>setStrict (strict)](#apidoc.element.loopback.Email.super_.super_.prototype.setStrict)
- description and source-code
```javascript
setStrict = function (strict) {
  this.__strict = strict;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Email.super_.super_.prototype.toJSON"></a>[function <span class="apidocSignatureSpan">loopback.Email.super_.super_.prototype.</span>toJSON ()](#apidoc.element.loopback.Email.super_.super_.prototype.toJSON)
- description and source-code
```javascript
toJSON = function () {
  return this.toObject(false, true, false);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Email.super_.super_.prototype.toObject"></a>[function <span class="apidocSignatureSpan">loopback.Email.super_.super_.prototype.</span>toObject (onlySchema, removeHidden, removeProtected)](#apidoc.element.loopback.Email.super_.super_.prototype.toObject)
- description and source-code
```javascript
toObject = function (onlySchema, removeHidden, removeProtected) {
  if (onlySchema === undefined) {
    onlySchema = true;
  }
  var data = {};
  var self = this;
  var Model = this.constructor;

  // if it is already an Object
  if (Model === Object) {
    return self;
  }

  var strict = this.__strict;
  var schemaLess = (strict === false) || !onlySchema;
  var persistUndefinedAsNull = Model.definition.settings.persistUndefinedAsNull;

  var props = Model.definition.properties;
  var keys = Object.keys(props);
  var propertyName, val;

  for (var i = 0; i < keys.length; i++) {
    propertyName = keys[i];
    val = self[propertyName];

    // Exclude functions
    if (typeof val === 'function') {
      continue;
    }
    // Exclude hidden properties
    if (removeHidden && Model.isHiddenProperty(propertyName)) {
      continue;
    }

    if (removeProtected && Model.isProtectedProperty(propertyName)) {
      continue;
    }

    if (val instanceof List) {
      data[propertyName] = val.toObject(!schemaLess, removeHidden, true);
    } else {
      if (val !== undefined && val !== null && val.toObject) {
        data[propertyName] = val.toObject(!schemaLess, removeHidden, true);
      } else {
        if (val === undefined && persistUndefinedAsNull) {
          val = null;
        }
        data[propertyName] = val;
      }
    }
  }

  if (schemaLess) {
    // Find its own properties which can be set via myModel.myProperty = 'myValue'.
    // If the property is not declared in the model definition, no setter will be
    // triggered to add it to __data
    keys = Object.keys(self);
    var size = keys.length;
    for (i = 0; i < size; i++) {
      propertyName = keys[i];
      if (props[propertyName]) {
        continue;
      }
      if (propertyName.indexOf('__') === 0) {
        continue;
      }
      if (removeHidden && Model.isHiddenProperty(propertyName)) {
        continue;
      }
      if (removeProtected && Model.isProtectedProperty(propertyName)) {
        continue;
      }
      if (data[propertyName] !== undefined) {
        continue;
      }
      val = self[propertyName];
      if (val !== undefined) {
        if (typeof val === 'function') {
          continue;
        }
        if (val !== null && val.toObject) {
          data[propertyName] = val.toObject(!schemaLess, removeHidden, true);
        } else {
          data[propertyName] = val;
        }
      } else if (persistUndefinedAsNull) {
        data[propertyName] = null;
      }
    }
    // Now continue to check __data
    keys = Object.keys(self.__data);
    size = keys.length;
    for (i = 0; i < size; i++) {
      propertyName = keys[i];
      if (propertyName.indexOf('__') === 0) {
        continue;
      }
      if (data[propertyName] === undefined) {
        if (removeHidden && Model.isHiddenProperty(propertyName)) {
          continue;
        }
        if (removeProtected && Model.isProtectedProperty(propertyName)) {
          continue;
        }
        var ownVal = self[propertyName];
        // The ownVal can be a relation function
        val = (ownVal !== undefined && (typeof ownVal !== 'function')) ? ownVal : self.__data[propertyName];
        if (typeof val === 'function') {
          continue;
        }

        if (val !== undefined && val !== null && val.toObject) {
          data[propertyName] = val.toObject(!schemaLess, removeHidden, true);
        } else if (val === undefined && persistUndefinedAsNull) {
          data[propertyName] = null;
        } else {
          data[propertyName] = val;
        }
      }
    }
  }

  return data;
}
```
- example usage
```shell
...
  options.validate = true;
}
if (!('throws' in options)) {
  options.throws = false;
}

var inst = this;
var data = inst.toObject(true);
var id = this.getId();

if (!id) {
  return Model.create(this, callback);
}

// validate first
...
```

#### <a name="apidoc.element.loopback.Email.super_.super_.prototype.trigger"></a>[function <span class="apidocSignatureSpan">loopback.Email.super_.super_.prototype.</span>trigger (actionName, work, data, callback)](#apidoc.element.loopback.Email.super_.super_.prototype.trigger)
- description and source-code
```javascript
function trigger(actionName, work, data, callback) {
  var capitalizedName = capitalize(actionName);
  var beforeHook = this.constructor['before' + capitalizedName] ||
    this.constructor['pre' + capitalizedName];
  var afterHook = this.constructor['after' + capitalizedName] ||
    this.constructor['post' + capitalizedName];
  if (actionName === 'validate') {
    beforeHook = beforeHook || this.constructor.beforeValidation;
    afterHook = afterHook || this.constructor.afterValidation;
  }
  var inst = this;

  if (actionName !== 'initialize') {
    if (beforeHook)
      deprecateHook(inst.constructor, ['before', 'pre'], capitalizedName);
    if (afterHook)
      deprecateHook(inst.constructor, ['after', 'post'], capitalizedName);
  }

  // we only call "before" hook when we have actual action (work) to perform
  if (work) {
    if (beforeHook) {
      // before hook should be called on instance with two parameters: next and data
      beforeHook.call(inst, function() {
        // Check arguments to next(err, result)
        if (arguments.length) {
          return callback && callback.apply(null, arguments);
        }
        // No err & result is present, proceed with the real work
        // actual action also have one param: callback
        work.call(inst, next);
      }, data);
    } else {
      work.call(inst, next);
    }
  } else {
    next();
  }

  function next(done) {
    if (afterHook) {
      afterHook.call(inst, done);
    } else if (done) {
      done.call(this);
    }
  }
}
```
- example usage
```shell
...
    }
    callback(err, inst);
  }
});

// then save
function save() {
  inst.trigger('save', function(saveDone) {
    inst.trigger('update', function(updateDone) {
      Model.upsert(inst, function(err) {
        inst._initProperties(data);
        updateDone.call(inst, function() {
          saveDone.call(inst, function() {
            callback(err, inst);
          });
...
```



# <a name="apidoc.module.loopback.GeoPoint"></a>[module loopback.GeoPoint](#apidoc.module.loopback.GeoPoint)

#### <a name="apidoc.element.loopback.GeoPoint.GeoPoint"></a>[function <span class="apidocSignatureSpan">loopback.</span>GeoPoint (data)](#apidoc.element.loopback.GeoPoint.GeoPoint)
- description and source-code
```javascript
function GeoPoint(data) {
  if (!(this instanceof GeoPoint)) {
    return new GeoPoint(data);
  }

  if (arguments.length === 2) {
    data = {
      lat: arguments[0],
      lng: arguments[1],
    };
  }

  assert(Array.isArray(data) || typeof data === 'object' || typeof data === 'string',
    'must provide valid geo-coordinates array [lat, lng] or object or a "lat, lng" string');

  if (typeof data === 'string') {
    data = data.split(/,\s*/);
    assert(data.length === 2, 'must provide a string "lat,lng" creating a GeoPoint with a string');
  }
  if (Array.isArray(data)) {
    data = {
      lat: Number(data[0]),
      lng: Number(data[1]),
    };
  } else {
    data.lng = Number(data.lng);
    data.lat = Number(data.lat);
  }

  assert(typeof data === 'object', 'must provide a lat and lng object when creating a GeoPoint');
  assert(typeof data.lat === 'number' && !isNaN(data.lat), 'lat must be a number when creating a GeoPoint');
  assert(typeof data.lng === 'number' && !isNaN(data.lng), 'lng must be a number when creating a GeoPoint');
  assert(data.lng <= 180, 'lng must be <= 180');
  assert(data.lng >= -180, 'lng must be >= -180');
  assert(data.lat <= 90, 'lat must be <= 90');
  assert(data.lat >= -90, 'lat must be >= -90');

  this.lat = data.lat;
  this.lng = data.lng;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.GeoPoint.distanceBetween"></a>[function <span class="apidocSignatureSpan">loopback.GeoPoint.</span>distanceBetween (a, b, options)](#apidoc.element.loopback.GeoPoint.distanceBetween)
- description and source-code
```javascript
function distanceBetween(a, b, options) {
  if (!(a instanceof GeoPoint)) {
    a = GeoPoint(a);
  }
  if (!(b instanceof GeoPoint)) {
    b = GeoPoint(b);
  }

  var x1 = a.lat;
  var y1 = a.lng;

  var x2 = b.lat;
  var y2 = b.lng;

  return geoDistance(x1, y1, x2, y2, options);
}
```
- example usage
```shell
n/a
```



# <a name="apidoc.module.loopback.GeoPoint.prototype"></a>[module loopback.GeoPoint.prototype](#apidoc.module.loopback.GeoPoint.prototype)

#### <a name="apidoc.element.loopback.GeoPoint.prototype.distanceTo"></a>[function <span class="apidocSignatureSpan">loopback.GeoPoint.prototype.</span>distanceTo (point, options)](#apidoc.element.loopback.GeoPoint.prototype.distanceTo)
- description and source-code
```javascript
distanceTo = function (point, options) {
  return GeoPoint.distanceBetween(this, point, options);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.GeoPoint.prototype.toString"></a>[function <span class="apidocSignatureSpan">loopback.GeoPoint.prototype.</span>toString ()](#apidoc.element.loopback.GeoPoint.prototype.toString)
- description and source-code
```javascript
toString = function () {
  return this.lat + ',' + this.lng;
}
```
- example usage
```shell
...
  var ids = changes.map(function(change) {
    return change.getModelId();
  });
  filter.where[idName] = {inq: ids};
  model.find(filter, function(err, models) {
    if (err) return callback(err);
    var modelIds = models.map(function(m) {
      return m[idName].toString();
    });
    callback(null, changes.filter(function(ch) {
      if (ch.type() === Change.DELETE) return true;
      return modelIds.indexOf(ch.modelId) > -1;
    }));
  });
});
...
```



# <a name="apidoc.module.loopback.KeyValueModel"></a>[module loopback.KeyValueModel](#apidoc.module.loopback.KeyValueModel)

#### <a name="apidoc.element.loopback.KeyValueModel.KeyValueModel"></a>[function <span class="apidocSignatureSpan">loopback.</span>KeyValueModel (data, options)](#apidoc.element.loopback.KeyValueModel.KeyValueModel)
- description and source-code
```javascript
function ModelConstructor(data, options) {
  if (!(this instanceof ModelConstructor)) {
    return new ModelConstructor(data, options);
  }
  if (ModelClass.settings.unresolved) {
    throw new Error(g.f('Model %s is not defined.', ModelClass.modelName));
  }
  ModelBaseClass.apply(this, arguments);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.KeyValueModel.ValidationError"></a>[function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>ValidationError (obj)](#apidoc.element.loopback.KeyValueModel.ValidationError)
- description and source-code
```javascript
function ValidationError(obj) {
  if (!(this instanceof ValidationError)) return new ValidationError(obj);

  this.name = 'ValidationError';

  var context = obj && obj.constructor && obj.constructor.modelName;
  this.message = g.f(
    'The %s instance is not valid. Details: %s.',
      context ? ''' + context + ''' : 'model',
      formatErrors(obj.errors, obj.toJSON()) || '(unknown)'
  );

  this.statusCode = 422;

  this.details = {
    context: context,
    codes: obj.errors && obj.errors.codes,
    messages: obj.errors,
  };

  if (Error.captureStackTrace) {
    // V8 (Chrome, Opera, Node)
    Error.captureStackTrace(this, this.constructor);
  } else if (errorHasStackProperty) {
    // Firefox
    this.stack = (new Error).stack;
  }
  // Safari and PhantomJS initializes 'error.stack' on throw
  // Internet Explorer does not support 'error.stack'
}
```
- example usage
```shell
...
  return save();
}

inst.isValid(function(valid) {
  if (valid) {
    save();
  } else {
    var err = new Model.ValidationError(inst);
    // throws option is dangerous for async usage
    if (options.throws) {
      throw err;
    }
    callback(err, inst);
  }
});
...
```

#### <a name="apidoc.element.loopback.KeyValueModel._ACL"></a>[function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>_ACL (ACL)](#apidoc.element.loopback.KeyValueModel._ACL)
- description and source-code
```javascript
function getACL(ACL) {
  var registry = this.registry;
  if (ACL !== undefined) {
    // The function is used as a setter
    _aclModel = ACL;
  }
  if (_aclModel) {
    return _aclModel;
  }
  var aclModel = registry.getModel('ACL');
  _aclModel = registry.getModelByType(aclModel);
  return _aclModel;
}
```
- example usage
```shell
...
   * @param {String|Error} err The error object.
   * @param {Boolean} allowed True if the request is allowed; false otherwise.
   */

  Model.checkAccess = function(token, modelId, sharedMethod, ctx, callback) {
var ANONYMOUS = registry.getModel('AccessToken').ANONYMOUS;
token = token || ANONYMOUS;
var aclModel = Model._ACL();

ctx = ctx || {};
if (typeof ctx === 'function' && callback === undefined) {
  callback = ctx;
  ctx = {};
}
...
```

#### <a name="apidoc.element.loopback.KeyValueModel._getAccessTypeForMethod"></a>[function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>_getAccessTypeForMethod (method)](#apidoc.element.loopback.KeyValueModel._getAccessTypeForMethod)
- description and source-code
```javascript
_getAccessTypeForMethod = function (method) {
  if (typeof method === 'string') {
    method = {name: method};
  }
  assert(
    typeof method === 'object',
    'method is a required argument and must be a RemoteMethod object'
  );

  var ACL = Model._ACL();

  // Check the explicit setting of accessType
  if (method.accessType) {
    assert(method.accessType === ACL.READ ||
      method.accessType === ACL.REPLICATE ||
      method.accessType === ACL.WRITE ||
      method.accessType === ACL.EXECUTE, 'invalid accessType ' +
      method.accessType +
      '. It must be "READ", "REPLICATE", "WRITE", or "EXECUTE"');
    return method.accessType;
  }

  // Default GET requests to READ
  var verb = method.http && method.http.verb;
  if (typeof verb === 'string') {
    verb = verb.toUpperCase();
  }
  if (verb === 'GET' || verb === 'HEAD') {
    return ACL.READ;
  }

  switch (method.name) {
    case 'create':
      return ACL.WRITE;
    case 'updateOrCreate':
      return ACL.WRITE;
    case 'upsertWithWhere':
      return ACL.WRITE;
    case 'upsert':
      return ACL.WRITE;
    case 'exists':
      return ACL.READ;
    case 'findById':
      return ACL.READ;
    case 'find':
      return ACL.READ;
    case 'findOne':
      return ACL.READ;
    case 'destroyById':
      return ACL.WRITE;
    case 'deleteById':
      return ACL.WRITE;
    case 'removeById':
      return ACL.WRITE;
    case 'count':
      return ACL.READ;
    default:
      return ACL.EXECUTE;
  }
}
```
- example usage
```shell
...
if (this.sharedMethod) {
  this.methodNames = this.sharedMethod.aliases.concat([this.sharedMethod.name]);
} else {
  this.methodNames = [];
}

if (this.sharedMethod) {
  this.accessType = this.model._getAccessTypeForMethod(this.sharedMethod);
}

this.accessType = context.accessType || AccessContext.ALL;
assert(loopback.AccessToken,
  'AccessToken model must be defined before AccessContext model');
this.accessToken = context.accessToken || loopback.AccessToken.ANONYMOUS;
...
```

#### <a name="apidoc.element.loopback.KeyValueModel._notifyBaseObservers"></a>[function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>_notifyBaseObservers (operation, context, callback)](#apidoc.element.loopback.KeyValueModel._notifyBaseObservers)
- description and source-code
```javascript
_notifyBaseObservers = function (operation, context, callback) {
  if (this.base && this.base.notifyObserversOf)
    this.base.notifyObserversOf(operation, context, callback);
  else
    callback();
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.KeyValueModel._runWhenAttachedToApp"></a>[function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>_runWhenAttachedToApp (fn)](#apidoc.element.loopback.KeyValueModel._runWhenAttachedToApp)
- description and source-code
```javascript
_runWhenAttachedToApp = function (fn) {
  if (this.app) return fn(this.app);
  var self = this;
  self.once('attached', function() {
    fn(self.app);
  });
}
```
- example usage
```shell
...
  ModelCtor,
  remotingOptions
);

// before remote hook
ModelCtor.beforeRemote = function(name, fn) {
  var className = this.modelName;
  this._runWhenAttachedToApp(function(app) {
    var remotes = app.remotes();
    remotes.before(className + '.' + name, function(ctx, next) {
      return fn(ctx, ctx.result, next);
    });
  });
};
...
```

#### <a name="apidoc.element.loopback.KeyValueModel.addListener"></a>[function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>addListener ()](#apidoc.element.loopback.KeyValueModel.addListener)
- description and source-code
```javascript
addListener = function () { [native code] }
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.KeyValueModel.afterRemote"></a>[function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>afterRemote (name, fn)](#apidoc.element.loopback.KeyValueModel.afterRemote)
- description and source-code
```javascript
afterRemote = function (name, fn) {
  var className = this.modelName;
  this._runWhenAttachedToApp(function(app) {
    var remotes = app.remotes();
    remotes.after(className + '.' + name, function(ctx, next) {
      return fn(ctx, ctx.result, next);
    });
  });
}
```
- example usage
```shell
...
        var m = method.isStatic ? method.name : 'prototype.' + method.name;
        if (before && before[delegateTo.name]) {
          self.beforeRemote(m, function(ctx, result, next) {
            before[delegateTo.name]._listeners.call(null, ctx, next);
          });
        }
        if (after && after[delegateTo.name]) {
          self.afterRemote(m, function(ctx, result, next) {
            after[delegateTo.name]._listeners.call(null, ctx, next);
          });
        }
      }
    });
  });
} else {
...
```

#### <a name="apidoc.element.loopback.KeyValueModel.afterRemoteError"></a>[function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>afterRemoteError (name, fn)](#apidoc.element.loopback.KeyValueModel.afterRemoteError)
- description and source-code
```javascript
afterRemoteError = function (name, fn) {
  var className = this.modelName;
  this._runWhenAttachedToApp(function(app) {
    var remotes = app.remotes();
    remotes.afterError(className + '.' + name, fn);
  });
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.KeyValueModel.attachTo"></a>[function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>attachTo (dataSource)](#apidoc.element.loopback.KeyValueModel.attachTo)
- description and source-code
```javascript
attachTo = function (dataSource) {
  dataSource.attach(this);
}
```
- example usage
```shell
...
  this.on('dataSourceAttached', function() {
    attachRelatedModels(self);
  });

  return this.Change;

  function attachRelatedModels(self) {
    self.Change.attachTo(self.dataSource);
    self.Change.getCheckpointModel().attachTo(self.dataSource);
  }
};

PersistedModel.rectifyAllChanges = function(callback) {
  this.getChangeModel().rectifyAll(callback);
};
...
```

#### <a name="apidoc.element.loopback.KeyValueModel.beforeRemote"></a>[function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>beforeRemote (name, fn)](#apidoc.element.loopback.KeyValueModel.beforeRemote)
- description and source-code
```javascript
beforeRemote = function (name, fn) {
  var className = this.modelName;
  this._runWhenAttachedToApp(function(app) {
    var remotes = app.remotes();
    remotes.before(className + '.' + name, function(ctx, next) {
      return fn(ctx, ctx.result, next);
    });
  });
}
```
- example usage
```shell
...
        sharedClass.methods().forEach(function(method) {
var delegateTo = method.rest && method.rest.delegateTo;
if (delegateTo && delegateTo.ctor == relation.modelTo) {
  var before = method.isStatic ? beforeListeners : beforeListeners['prototype'];
  var after = method.isStatic ? afterListeners : afterListeners['prototype'];
  var m = method.isStatic ? method.name : 'prototype.' + method.name;
  if (before && before[delegateTo.name]) {
    self.beforeRemote(m, function(ctx, result, next) {
      before[delegateTo.name]._listeners.call(null, ctx, next);
    });
  }
  if (after && after[delegateTo.name]) {
    self.afterRemote(m, function(ctx, result, next) {
      after[delegateTo.name]._listeners.call(null, ctx, next);
    });
...
```

#### <a name="apidoc.element.loopback.KeyValueModel.belongsToRemoting"></a>[function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>belongsToRemoting (relationName, relation, define)](#apidoc.element.loopback.KeyValueModel.belongsToRemoting)
- description and source-code
```javascript
belongsToRemoting = function (relationName, relation, define) {
  var modelName = relation.modelTo && relation.modelTo.modelName;
  modelName = modelName || 'PersistedModel';
  var fn = this.prototype[relationName];
  var pathName = (relation.options.http && relation.options.http.path) || relationName;
  define('__get__' + relationName, {
    isStatic: false,
    http: {verb: 'get', path: '/' + pathName},
    accepts: [
      {arg: 'refresh', type: 'boolean', http: {source: 'query'}},
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    accessType: 'READ',
    description: format('Fetches belongsTo relation %s.', relationName),
    returns: {arg: relationName, type: modelName, root: true},
  }, fn);
}
```
- example usage
```shell
...
  defineRaw(name, options, fn);
};

// get the relations
for (var relationName in relations) {
  var relation = relations[relationName];
  if (relation.type === 'belongsTo') {
    ModelCtor.belongsToRemoting(relationName, relation, define);
  } else if (
    relation.type === 'hasOne' ||
    relation.type === 'embedsOne'
  ) {
    ModelCtor.hasOneRemoting(relationName, relation, define);
  } else if (
    relation.type === 'hasMany' ||
...
```

#### <a name="apidoc.element.loopback.KeyValueModel.checkAccess"></a>[function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>checkAccess (token, modelId, sharedMethod, ctx, callback)](#apidoc.element.loopback.KeyValueModel.checkAccess)
- description and source-code
```javascript
checkAccess = function (token, modelId, sharedMethod, ctx, callback) {
  var ANONYMOUS = registry.getModel('AccessToken').ANONYMOUS;
  token = token || ANONYMOUS;
  var aclModel = Model._ACL();

  ctx = ctx || {};
  if (typeof ctx === 'function' && callback === undefined) {
    callback = ctx;
    ctx = {};
  }

  aclModel.checkAccessForContext({
    accessToken: token,
    model: this,
    property: sharedMethod.name,
    method: sharedMethod.name,
    sharedMethod: sharedMethod,
    modelId: modelId,
    accessType: this._getAccessTypeForMethod(sharedMethod),
    remotingContext: ctx,
  }, function(err, accessRequest) {
    if (err) return callback(err);
    callback(null, accessRequest.isAllowed());
  });
}
```
- example usage
```shell
...
var modelSettings = Model.settings || {};
var errStatusCode = modelSettings.aclErrorStatus || app.get('aclErrorStatus') || 401;
if (!req.accessToken) {
  errStatusCode = 401;
}

if (Model.checkAccess) {
  Model.checkAccess(
    req.accessToken,
    modelId,
    method,
    ctx,
    function(err, allowed) {
      if (err) {
        console.log(err);
...
```

#### <a name="apidoc.element.loopback.KeyValueModel.clearObservers"></a>[function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>clearObservers (operation)](#apidoc.element.loopback.KeyValueModel.clearObservers)
- description and source-code
```javascript
clearObservers = function (operation) {
  if (!(this._observers && this._observers[operation])) return;

  this._observers[operation].length = 0;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.KeyValueModel.createOptionsFromRemotingContext"></a>[function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>createOptionsFromRemotingContext (ctx)](#apidoc.element.loopback.KeyValueModel.createOptionsFromRemotingContext)
- description and source-code
```javascript
createOptionsFromRemotingContext = function (ctx) {
  return {
    accessToken: ctx.req.accessToken,
  };
}
```
- example usage
```shell
...
  var EMPTY_OPTIONS = {};
  var ModelCtor = ctx.method && ctx.method.ctor;
  if (!ModelCtor)
    return EMPTY_OPTIONS;
  if (typeof ModelCtor.createOptionsFromRemotingContext !== 'function')
    return EMPTY_OPTIONS;
  debug('createOptionsFromRemotingContext for %s', ctx.method.stringName);
  return ModelCtor.createOptionsFromRemotingContext(ctx);
}

/**
 * Disable remote invocation for the method with the given name.
 *
 * @param {String} name The name of the method.
 * @param {Boolean} isStatic Is the method static (eg. 'MyModel.myMethod')? Pass
...
```

#### <a name="apidoc.element.loopback.KeyValueModel.defineProperty"></a>[function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>defineProperty (prop, params)](#apidoc.element.loopback.KeyValueModel.defineProperty)
- description and source-code
```javascript
defineProperty = function (prop, params) {
  if (this.dataSource) {
    this.dataSource.defineProperty(this.modelName, prop, params);
  } else {
    this.modelBuilder.defineProperty(this.modelName, prop, params);
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.KeyValueModel.disableRemoteMethod"></a>[function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>disableRemoteMethod (name, isStatic)](#apidoc.element.loopback.KeyValueModel.disableRemoteMethod)
- description and source-code
```javascript
disableRemoteMethod = function (name, isStatic) {
  deprecated('Model.disableRemoteMethod is deprecated. ' +
    'Use Model.disableRemoteMethodByName instead.');
  var key = this.sharedClass.getKeyFromMethodNameAndTarget(name, isStatic);
  this.sharedClass.disableMethodByName(key);
  this.emit('remoteMethodDisabled', this.sharedClass, key);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.KeyValueModel.disableRemoteMethodByName"></a>[function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>disableRemoteMethodByName (name)](#apidoc.element.loopback.KeyValueModel.disableRemoteMethodByName)
- description and source-code
```javascript
disableRemoteMethodByName = function (name) {
  this.sharedClass.disableMethodByName(name);
  this.emit('remoteMethodDisabled', this.sharedClass, name);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.KeyValueModel.emit"></a>[function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>emit ()](#apidoc.element.loopback.KeyValueModel.emit)
- description and source-code
```javascript
emit = function () { [native code] }
```
- example usage
```shell
...
    return new Model(data);
  });
  this.remotes().addClass(Model.sharedClass);
  if (Model.settings.trackChanges && Model.Change) {
    this.remotes().addClass(Model.Change.sharedClass);
  }
  clearHandlerCache(this);
  this.emit('modelRemoted', Model.sharedClass);
}

var self = this;
Model.on('remoteMethodDisabled', function(model, methodName) {
  self.emit('remoteMethodDisabled', model, methodName);
});
Model.on('remoteMethodAdded', function(model) {
...
```

#### <a name="apidoc.element.loopback.KeyValueModel.eventNames"></a>[function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>eventNames ()](#apidoc.element.loopback.KeyValueModel.eventNames)
- description and source-code
```javascript
eventNames = function () { [native code] }
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.KeyValueModel.expire"></a>[function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>expire (key, ttl, options, callback)](#apidoc.element.loopback.KeyValueModel.expire)
- description and source-code
```javascript
expire = function (key, ttl, options, callback) {
  throwNotAttached(this.modelName, 'expire');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.KeyValueModel.extend"></a>[function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>extend (className, subclassProperties, subclassSettings)](#apidoc.element.loopback.KeyValueModel.extend)
- description and source-code
```javascript
extend = function (className, subclassProperties, subclassSettings) {
  var properties = ModelClass.definition.properties;
  var settings = ModelClass.definition.settings;

  subclassProperties = subclassProperties || {};
  subclassSettings = subclassSettings || {};

  // Check if subclass redefines the ids
  var idFound = false;
  for (var k in subclassProperties) {
    if (subclassProperties[k] && subclassProperties[k].id) {
      idFound = true;
      break;
    }
  }

  // Merging the properties
  var keys = Object.keys(properties);
  for (var i = 0, n = keys.length; i < n; i++) {
    var key = keys[i];

    if (idFound && properties[key].id) {
      // don't inherit id properties
      continue;
    }
    if (subclassProperties[key] === undefined) {
      var baseProp = properties[key];
      var basePropCopy = baseProp;
      if (baseProp && typeof baseProp === 'object') {
        // Deep clone the base prop
        basePropCopy = mergeSettings(null, baseProp);
      }
      subclassProperties[key] = basePropCopy;
    }
  }

  // Merge the settings
  var originalSubclassSettings = subclassSettings;
  subclassSettings = mergeSettings(settings, subclassSettings);

  // Ensure 'base' is not inherited. Note we don't have to delete 'super'
  // as that is removed from settings by modelBuilder.define and thus
  // it is never inherited
  if (!originalSubclassSettings.base) {
    subclassSettings.base = ModelClass;
  }

  // Define the subclass
  var subClass = modelBuilder.define(className, subclassProperties, subclassSettings, ModelClass);

  // Calling the setup function
  if (typeof subClass.setup === 'function') {
    subClass.setup.call(subClass);
  }

  return subClass;
}
```
- example usage
```shell
...
* The base class for **all models**.
*
* **Inheriting from 'Model'**
*
* '''js
* var properties = {...};
* var options = {...};
* var MyModel = loopback.Model.extend('MyModel', properties, options);
* '''
*
* **Options**
*
*  - 'trackChanges' - If true, changes to the model will be tracked. **Required
* for replication.**
*
...
```

#### <a name="apidoc.element.loopback.KeyValueModel.forEachProperty"></a>[function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>forEachProperty (cb)](#apidoc.element.loopback.KeyValueModel.forEachProperty)
- description and source-code
```javascript
forEachProperty = function (cb) {
  var props = ModelClass.definition.properties;
  var keys = Object.keys(props);
  for (var i = 0, n = keys.length; i < n; i++) {
    cb(keys[i], props[keys[i]]);
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.KeyValueModel.get"></a>[function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>get (key, options, callback)](#apidoc.element.loopback.KeyValueModel.get)
- description and source-code
```javascript
get = function (key, options, callback) {
  throwNotAttached(this.modelName, 'get');
}
```
- example usage
```shell
...
* supports Express middleware. See
* [Express documentation](http://expressjs.com/) for details.
*
* '''js
* var loopback = require('loopback');
* var app = loopback();
*
* app.get('/', function(req, res){
*   res.send('hello world');
* });
*
* app.listen(3000);
* '''
*
* @class LoopBackApplication
...
```

#### <a name="apidoc.element.loopback.KeyValueModel.getApp"></a>[function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>getApp (callback)](#apidoc.element.loopback.KeyValueModel.getApp)
- description and source-code
```javascript
getApp = function (callback) {
  var self = this;
  self._runWhenAttachedToApp(function(app) {
    assert(self.app);
    assert.equal(app, self.app);
    callback(null, app);
  });
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.KeyValueModel.getDataSource"></a>[function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>getDataSource ()](#apidoc.element.loopback.KeyValueModel.getDataSource)
- description and source-code
```javascript
getDataSource = function () {
  return this.dataSource;
}
```
- example usage
```shell
...
 * connector that defines it.  Otherwise, uses the default lookup.
 * Override this method to handle complex IDs.
 *
 * @param {*} val The 'id' value. Will be converted to the type that the 'id' property specifies.
 */

PersistedModel.prototype.setId = function(val) {
  var ds = this.getDataSource();
  this[this.getIdName()] = val;
};

/**
 * Get the 'id' value for the 'PersistedModel'.
 *
 * @returns {*} The 'id' value
...
```

#### <a name="apidoc.element.loopback.KeyValueModel.getMaxListeners"></a>[function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>getMaxListeners ()](#apidoc.element.loopback.KeyValueModel.getMaxListeners)
- description and source-code
```javascript
getMaxListeners = function () { [native code] }
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.KeyValueModel.getPropertyType"></a>[function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>getPropertyType (propName)](#apidoc.element.loopback.KeyValueModel.getPropertyType)
- description and source-code
```javascript
getPropertyType = function (propName) {
  var prop = this.definition.properties[propName];
  if (!prop) {
    // The property is not part of the definition
    return null;
  }
  if (!prop.type) {
    throw new Error(g.f('Type not defined for property %s.%s', this.modelName, propName));
    // return null;
  }
  return prop.type.name;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.KeyValueModel.hasManyRemoting"></a>[function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>hasManyRemoting (relationName, relation, define)](#apidoc.element.loopback.KeyValueModel.hasManyRemoting)
- description and source-code
```javascript
hasManyRemoting = function (relationName, relation, define) {
  var pathName = (relation.options.http && relation.options.http.path) || relationName;
  var toModelName = relation.modelTo.modelName;

  var findByIdFunc = this.prototype['__findById__' + relationName];
  define('__findById__' + relationName, {
    isStatic: false,
    http: {verb: 'get', path: '/' + pathName + '/:fk'},
    accepts: [
      {
        arg: 'fk', type: 'any',
        description: format('Foreign key for %s', relationName),
        required: true,
        http: {source: 'path'},
      },
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Find a related item by id for %s.', relationName),
    accessType: 'READ',
    returns: {arg: 'result', type: toModelName, root: true},
    rest: {after: convertNullToNotFoundError.bind(null, toModelName)},
  }, findByIdFunc);

  var destroyByIdFunc = this.prototype['__destroyById__' + relationName];
  define('__destroyById__' + relationName, {
    isStatic: false,
    http: {verb: 'delete', path: '/' + pathName + '/:fk'},
    accepts: [
      {
        arg: 'fk', type: 'any',
        description: format('Foreign key for %s', relationName),
        required: true,
        http: {source: 'path'},
      },
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Delete a related item by id for %s.', relationName),
    accessType: 'WRITE',
    returns: [],
  }, destroyByIdFunc);

  var updateByIdFunc = this.prototype['__updateById__' + relationName];
  define('__updateById__' + relationName, {
    isStatic: false,
    http: {verb: 'put', path: '/' + pathName + '/:fk'},
    accepts: [
      {arg: 'fk', type: 'any',
        description: format('Foreign key for %s', relationName),
        required: true,
        http: {source: 'path'}},
      {arg: 'data', type: 'object', model: toModelName, http: {source: 'body'}},
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Update a related item by id for %s.', relationName),
    accessType: 'WRITE',
    returns: {arg: 'result', type: toModelName, root: true},
  }, updateByIdFunc);

  if (relation.modelThrough || relation.type === 'referencesMany') {
    var modelThrough = relation.modelThrough || relation.modelTo;

    var accepts = [];
    if (relation.type === 'hasMany' && relation.modelThrough) {
      // Restrict: only hasManyThrough relation can have additional properties
      accepts.push({
        arg: 'data', type: 'object', model: modelThrough.modelName,
        http: {source: 'body'},
      });
    }

    var addFunc = this.prototype['__link__' + relationName];
    define('__link__' + relationName, {
      isStatic: false,
      http: {verb: 'put', path: '/' + pathName + '/rel/:fk'},
      accepts: [{arg: 'fk', type: 'any',
        description: format('Foreign key for %s', relationName),
        required: true,
        http: {source: 'path'}},
      ].concat(accepts).concat([
        {arg: 'options', type: 'object', http: 'optionsFromRequest'},
      ]),
      description: format('Add a related item by id for %s.', relationName),
      accessType: 'WRITE',
      returns: {arg: relationName, type: modelThrough.modelName, root: true},
    }, addFunc);

    var removeFunc = this.prototype['__unlink__' + relationName];
    define('__unlink__' + relationName, {
      isStatic: false,
      http: {verb: 'delete', path: '/' + pathName + '/rel/:fk'},
      accepts: [
        {
          arg: 'fk', type: 'any',
          description: format('Foreign key for %s', relationName),
          required: true,
          http: {source: 'path'},
        },
        {arg: 'options', type: 'object', http: 'optionsFromRequest'},
      ],
      description: format('Remove the %s relation to an item by id.', relationName),
      accessType: 'WRITE',
      returns: [],
    }, removeFunc);

    // FIXME: [rfeng] How to map a function with callback(err, true|false) to HEAD?
    // true --> 200 and false --> 404?
    var existsFunc = this.prototype['__exists__' + relatio ...
```
- example usage
```shell
...
    relation.type === 'embedsOne'
  ) {
    ModelCtor.hasOneRemoting(relationName, relation, define);
  } else if (
    relation.type === 'hasMany' ||
    relation.type === 'embedsMany' ||
    relation.type === 'referencesMany') {
    ModelCtor.hasManyRemoting(relationName, relation, define);
  }
}

// handle scopes
var scopes = ModelCtor.scopes || {};
for (var scopeName in scopes) {
  ModelCtor.scopeRemoting(scopeName, scopes[scopeName], define);
...
```

#### <a name="apidoc.element.loopback.KeyValueModel.hasOneRemoting"></a>[function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>hasOneRemoting (relationName, relation, define)](#apidoc.element.loopback.KeyValueModel.hasOneRemoting)
- description and source-code
```javascript
hasOneRemoting = function (relationName, relation, define) {
  var pathName = (relation.options.http && relation.options.http.path) || relationName;
  var toModelName = relation.modelTo.modelName;

  define('__get__' + relationName, {
    isStatic: false,
    http: {verb: 'get', path: '/' + pathName},
    accepts: [
      {arg: 'refresh', type: 'boolean', http: {source: 'query'}},
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Fetches hasOne relation %s.', relationName),
    accessType: 'READ',
    returns: {arg: relationName, type: relation.modelTo.modelName, root: true},
    rest: {after: convertNullToNotFoundError.bind(null, toModelName)},
  });

  define('__create__' + relationName, {
    isStatic: false,
    http: {verb: 'post', path: '/' + pathName},
    accepts: [
      {
        arg: 'data', type: 'object', model: toModelName,
        http: {source: 'body'},
      },
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Creates a new instance in %s of this model.', relationName),
    accessType: 'WRITE',
    returns: {arg: 'data', type: toModelName, root: true},
  });

  define('__update__' + relationName, {
    isStatic: false,
    http: {verb: 'put', path: '/' + pathName},
    accepts: [
      {
        arg: 'data', type: 'object', model: toModelName,
        http: {source: 'body'},
      },
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Update %s of this model.', relationName),
    accessType: 'WRITE',
    returns: {arg: 'data', type: toModelName, root: true},
  });

  define('__destroy__' + relationName, {
    isStatic: false,
    http: {verb: 'delete', path: '/' + pathName},
    accepts: [
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Deletes %s of this model.', relationName),
    accessType: 'WRITE',
  });
}
```
- example usage
```shell
...
  var relation = relations[relationName];
  if (relation.type === 'belongsTo') {
    ModelCtor.belongsToRemoting(relationName, relation, define);
  } else if (
    relation.type === 'hasOne' ||
    relation.type === 'embedsOne'
  ) {
    ModelCtor.hasOneRemoting(relationName, relation, define);
  } else if (
    relation.type === 'hasMany' ||
    relation.type === 'embedsMany' ||
    relation.type === 'referencesMany') {
    ModelCtor.hasManyRemoting(relationName, relation, define);
  }
}
...
```

#### <a name="apidoc.element.loopback.KeyValueModel.isHiddenProperty"></a>[function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>isHiddenProperty (propertyName)](#apidoc.element.loopback.KeyValueModel.isHiddenProperty)
- description and source-code
```javascript
isHiddenProperty = function (propertyName) {
  var Model = this;
  var settings = Model.definition && Model.definition.settings;
  var hiddenProperties = settings && (settings.hiddenProperties || settings.hidden);
  if (Array.isArray(hiddenProperties)) {
    // Cache the hidden properties as an object for quick lookup
    settings.hiddenProperties = {};
    for (var i = 0; i < hiddenProperties.length; i++) {
      settings.hiddenProperties[hiddenProperties[i]] = true;
    }
    hiddenProperties = settings.hiddenProperties;
  }
  if (hiddenProperties) {
    return hiddenProperties[propertyName];
  } else {
    return false;
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.KeyValueModel.isProtectedProperty"></a>[function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>isProtectedProperty (propertyName)](#apidoc.element.loopback.KeyValueModel.isProtectedProperty)
- description and source-code
```javascript
isProtectedProperty = function (propertyName) {
  var Model = this;
  var settings = Model.definition && Model.definition.settings;
  var protectedProperties = settings && (settings.protectedProperties || settings.protected);
  if (Array.isArray(protectedProperties)) {
    // Cache the protected properties as an object for quick lookup
    settings.protectedProperties = {};
    for (var i = 0; i < protectedProperties.length; i++) {
      settings.protectedProperties[protectedProperties[i]] = true;
    }
    protectedProperties = settings.protectedProperties;
  }
  if (protectedProperties) {
    return protectedProperties[propertyName];
  } else {
    return false;
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.KeyValueModel.iterateKeys"></a>[function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>iterateKeys (filter, options)](#apidoc.element.loopback.KeyValueModel.iterateKeys)
- description and source-code
```javascript
iterateKeys = function (filter, options) {
  throwNotAttached(this.modelName, 'iterateKeys');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.KeyValueModel.keys"></a>[function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>keys (filter, options, callback)](#apidoc.element.loopback.KeyValueModel.keys)
- description and source-code
```javascript
keys = function (filter, options, callback) {
  throwNotAttached(this.modelName, 'keys');
}
```
- example usage
```shell
...
    modelConfig.remoting &&
    modelConfig.remoting.sharedMethods &&
    typeof modelConfig.remoting.sharedMethods === 'object';
if (modelConfigHasSharedMethodsSettings)
  util._extend(settings, modelConfig.remoting.sharedMethods);

// validate setting values
Object.keys(settings).forEach(function(setting) {
  var settingValue = settings[setting];
  var settingValueType = typeof settingValue;
  if (settingValueType !== 'boolean')
    throw new TypeError(g.f('Expected boolean, got %s', settingValueType));
});

// set sharedMethod.shared using the merged settings
...
```

#### <a name="apidoc.element.loopback.KeyValueModel.listenerCount"></a>[function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>listenerCount ()](#apidoc.element.loopback.KeyValueModel.listenerCount)
- description and source-code
```javascript
listenerCount = function () { [native code] }
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.KeyValueModel.listeners"></a>[function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>listeners ()](#apidoc.element.loopback.KeyValueModel.listeners)
- description and source-code
```javascript
listeners = function () { [native code] }
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.KeyValueModel.mixin"></a>[function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>mixin (anotherClass, options)](#apidoc.element.loopback.KeyValueModel.mixin)
- description and source-code
```javascript
mixin = function (anotherClass, options) {
  if (typeof anotherClass === 'string') {
    this.modelBuilder.mixins.applyMixin(this, anotherClass, options);
  } else {
    if (anotherClass.prototype instanceof ModelBaseClass) {
      var props = anotherClass.definition.properties;
      for (var i in props) {
        if (this.definition.properties[i]) {
          continue;
        }
        this.defineProperty(i, props[i]);
      }
    }
    return jutil.mixin(this, anotherClass, options);
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.KeyValueModel.nestRemoting"></a>[function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>nestRemoting (relationName, options, filterCallback)](#apidoc.element.loopback.KeyValueModel.nestRemoting)
- description and source-code
```javascript
nestRemoting = function (relationName, options, filterCallback) {
  if (typeof options === 'function' && !filterCallback) {
    filterCallback = options;
    options = {};
  }
  options = options || {};

  var regExp = /^__([^_]+)__([^_]+)$/;
  var relation = this.relations[relationName];
  if (relation && relation.modelTo && relation.modelTo.sharedClass) {
    var self = this;
    var sharedClass = this.sharedClass;
    var sharedToClass = relation.modelTo.sharedClass;
    var toModelName = relation.modelTo.modelName;

    var pathName = options.pathName || relation.options.path || relationName;
    var paramName = options.paramName || 'nk';

    var http = [].concat(sharedToClass.http || [])[0];
    var httpPath, acceptArgs;

    if (relation.multiple) {
      httpPath = pathName + '/:' + paramName;
      acceptArgs = [
        {
          arg: paramName, type: 'any', http: {source: 'path'},
          description: format('Foreign key for %s.',  relation.name),
          required: true,
        },
      ];
    } else {
      httpPath = pathName;
      acceptArgs = [];
    }

    if (httpPath[0] !== '/') {
      httpPath = '/' + httpPath;
    }

    // A method should return the method name to use, if it is to be
    // included as a nested method - a falsy return value will skip.
    var filter = filterCallback || options.filterMethod || function(method, relation) {
      var matches = method.name.match(regExp);
      if (matches) {
        return '__' + matches[1] + '__' + relation.name + '__' + matches[2];
      }
    };

    sharedToClass.methods().forEach(function(method) {
      var methodName;
      if (!method.isStatic && (methodName = filter(method, relation))) {
        var prefix = relation.multiple ? '__findById__' : '__get__';
        var getterName = options.getterName || (prefix + relationName);

        var getterFn = relation.modelFrom.prototype[getterName];
        if (typeof getterFn !== 'function') {
          throw new Error(g.f('Invalid remote method: '%s'', getterName));
        }

        var nestedFn = relation.modelTo.prototype[method.name];
        if (typeof nestedFn !== 'function') {
          throw new Error(g.f('Invalid remote method: '%s'', method.name));
        }

        var opts = {};

        opts.accepts = acceptArgs.concat(method.accepts || []);
        opts.returns = [].concat(method.returns || []);
        opts.description = method.description;
        opts.accessType = method.accessType;
        opts.rest = extend({}, method.rest || {});
        opts.rest.delegateTo = method;

        opts.http = [];
        var routes = [].concat(method.http || []);
        routes.forEach(function(route) {
          if (route.path) {
            var copy = extend({}, route);
            copy.path = httpPath + route.path;
            opts.http.push(copy);
          }
        });

        if (relation.multiple) {
          sharedClass.defineMethod(methodName, opts, function(fkId) {
            var args = Array.prototype.slice.call(arguments, 1);
            var last = args[args.length - 1];
            var cb = typeof last === 'function' ? last : null;
            this[getterName](fkId, function(err, inst) {
              if (err && cb) return cb(err);
              if (inst instanceof relation.modelTo) {
                try {
                  nestedFn.apply(inst, args);
                } catch (err) {
                  if (cb) return cb(err);
                }
              } else if (cb) {
                cb(err, null);
              }
            });
          }, method.isStatic);
        } else {
          sharedClass.defineMethod(methodName, opts, function() {
            var args = Array.prototype.slice.call(arguments);
            var last = args[args.length - 1];
            var cb = typeof last === 'function' ? last : null;
            this[getterName](function(err, inst) {
              if (err && cb) return cb(err);
              if (inst instanceof relation.modelTo) {
                try {
                  nestedFn.apply(inst, args);
                } catch (err) {
                  if (cb) return ...
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.KeyValueModel.notifyObserversAround"></a>[function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>notifyObserversAround (operation, context, fn, callback)](#apidoc.element.loopback.KeyValueModel.notifyObserversAround)
- description and source-code
```javascript
notifyObserversAround = function (operation, context, fn, callback) {
  var self = this;
  context = context || {};
  // Add callback to the context object so that an observer can skip other
  // ones by calling the callback function directly and not calling next
  if (context.end === undefined) {
    context.end = callback;
  }
  // First notify before observers
  return self.notifyObserversOf('before ' + operation, context,
    function(err, context) {
      if (err) return callback(err);

      function cbForWork(err) {
        var args = [].slice.call(arguments, 0);
        if (err) return callback.apply(null, args);
        // Find the list of params from the callback in addition to err
        var returnedArgs = args.slice(1);
        // Set up the array of results
        context.results = returnedArgs;
        // Notify after observers
        self.notifyObserversOf('after ' + operation, context,
          function(err, context) {
            if (err) return callback(err, context);
            var results = returnedArgs;
            if (context && Array.isArray(context.results)) {
              // Pickup the results from context
              results = context.results;
            }
            // Build the list of params for final callback
            var args = [err].concat(results);
            callback.apply(null, args);
          });
      }

      if (fn.length === 1) {
        // fn(done)
        fn(cbForWork);
      } else {
        // fn(context, done)
        fn(context, cbForWork);
      }
    });
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.KeyValueModel.notifyObserversOf"></a>[function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>notifyObserversOf (operation, context, callback)](#apidoc.element.loopback.KeyValueModel.notifyObserversOf)
- description and source-code
```javascript
notifyObserversOf = function (operation, context, callback) {
  var self = this;
  if (!callback) callback = utils.createPromiseCallback();

  function createNotifier(op) {
    return function(ctx, done) {
      if (typeof ctx === 'function' && done === undefined) {
        done = ctx;
        ctx = context;
      }
      self.notifyObserversOf(op, context, done);
    };
  }

  if (Array.isArray(operation)) {
    var tasks = [];
    for (var i = 0, n = operation.length; i < n; i++) {
      tasks.push(createNotifier(operation[i]));
    }
    return async.waterfall(tasks, callback);
  }

  var observers = this._observers && this._observers[operation];

  this._notifyBaseObservers(operation, context, function doNotify(err) {
    if (err) return callback(err, context);
    if (!observers || !observers.length) return callback(null, context);

    async.eachSeries(
      observers,
      function notifySingleObserver(fn, next) {
        var retval = fn(context, next);
        if (retval && typeof retval.then === 'function') {
          retval.then(
            function() { next(); return null; },
            next // error handler
          );
        }
      },
      function(err) { callback(err, context); }
    );
  });
  return callback.promise;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.KeyValueModel.observe"></a>[function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>observe (operation, listener)](#apidoc.element.loopback.KeyValueModel.observe)
- description and source-code
```javascript
observe = function (operation, listener) {
  this._observers = this._observers || {};
  if (!this._observers[operation]) {
    this._observers[operation] = [];
  }

  this._observers[operation].push(listener);
}
```
- example usage
```shell
...
var idType = idProp && idProp.type;
var idDefn = idProp && idProp.defaultFn;
if (idType !== String || !(idDefn === 'uuid' || idDefn === 'guid')) {
  deprecated('The model ' + this.modelName + ' is tracking changes, ' +
    'which requires a string id with GUID/UUID default value.');
}

Model.observe('after save', rectifyOnSave);

Model.observe('after delete', rectifyOnDelete);

// Only run if the run time is server
// Can switch off cleanup by setting the interval to -1
if (runtime.isServer && cleanupInterval > 0) {
  // initial cleanup
...
```

#### <a name="apidoc.element.loopback.KeyValueModel.on"></a>[function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>on ()](#apidoc.element.loopback.KeyValueModel.on)
- description and source-code
```javascript
on = function () { [native code] }
```
- example usage
```shell
...
    this.remotes().addClass(Model.Change.sharedClass);
  }
  clearHandlerCache(this);
  this.emit('modelRemoted', Model.sharedClass);
}

var self = this;
Model.on('remoteMethodDisabled', function(model, methodName) {
  self.emit('remoteMethodDisabled', model, methodName);
});
Model.on('remoteMethodAdded', function(model) {
  self.emit('remoteMethodAdded', model);
});

Model.shared = isPublic;
...
```

#### <a name="apidoc.element.loopback.KeyValueModel.once"></a>[function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>once ()](#apidoc.element.loopback.KeyValueModel.once)
- description and source-code
```javascript
once = function () { [native code] }
```
- example usage
```shell
...
    remotes.afterError(className + '.' + name, fn);
  });
};

ModelCtor._runWhenAttachedToApp = function(fn) {
  if (this.app) return fn(this.app);
  var self = this;
  self.once('attached', function() {
    fn(self.app);
  });
};

if ('injectOptionsFromRemoteContext' in options) {
  console.warn(g.f(
    '%s is using model setting %s which is no longer available.',
...
```

#### <a name="apidoc.element.loopback.KeyValueModel.prependListener"></a>[function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>prependListener ()](#apidoc.element.loopback.KeyValueModel.prependListener)
- description and source-code
```javascript
prependListener = function () { [native code] }
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.KeyValueModel.prependOnceListener"></a>[function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>prependOnceListener ()](#apidoc.element.loopback.KeyValueModel.prependOnceListener)
- description and source-code
```javascript
prependOnceListener = function () { [native code] }
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.KeyValueModel.registerProperty"></a>[function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>registerProperty (propertyName)](#apidoc.element.loopback.KeyValueModel.registerProperty)
- description and source-code
```javascript
registerProperty = function (propertyName) {
  var properties = modelDefinition.build();
  var prop = properties[propertyName];
  var DataType = prop.type;
  if (!DataType) {
    throw new Error(g.f('Invalid type for property %s', propertyName));
  }

  if (prop.required) {
    var requiredOptions = typeof prop.required === 'object' ? prop.required : undefined;
    ModelClass.validatesPresenceOf(propertyName, requiredOptions);
  }

  Object.defineProperty(ModelClass.prototype, propertyName, {
    get: function() {
      if (ModelClass.getter[propertyName]) {
        return ModelClass.getter[propertyName].call(this); // Try getter first
      } else {
        return this.__data && this.__data[propertyName]; // Try __data
      }
    },
    set: function(value) {
      var DataType = ModelClass.definition.properties[propertyName].type;
      if (Array.isArray(DataType) || DataType === Array) {
        DataType = List;
      } else if (DataType === Date) {
        DataType = DateType;
      } else if (DataType === Boolean) {
        DataType = BooleanType;
      } else if (typeof DataType === 'string') {
        DataType = modelBuilder.resolveType(DataType);
      }

      var persistUndefinedAsNull = ModelClass.definition.settings.persistUndefinedAsNull;
      if (value === undefined && persistUndefinedAsNull) {
        value = null;
      }

      if (ModelClass.setter[propertyName]) {
        ModelClass.setter[propertyName].call(this, value); // Try setter first
      } else {
        this.__data = this.__data || {};
        if (value === null || value === undefined) {
          this.__data[propertyName] = value;
        } else {
          if (DataType === List) {
            this.__data[propertyName] = DataType(value, properties[propertyName].type, this.__data);
          } else {
            // Assume the type constructor handles Constructor() call
            // If not, we should call new DataType(value).valueOf();
            this.__data[propertyName] = (value instanceof DataType) ? value : DataType(value);
          }
        }
      }
    },
    configurable: true,
    enumerable: true,
  });

  // FIXME: [rfeng] Do we need to keep the raw data?
  // Use $ as the prefix to avoid conflicts with properties such as _id
  Object.defineProperty(ModelClass.prototype, '$' + propertyName, {
    get: function() {
      return this.__data && this.__data[propertyName];
    },
    set: function(value) {
      if (!this.__data) {
        this.__data = {};
      }
      this.__data[propertyName] = value;
    },
    configurable: true,
    enumerable: false,
  });
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.KeyValueModel.remoteMethod"></a>[function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>remoteMethod (name, options)](#apidoc.element.loopback.KeyValueModel.remoteMethod)
- description and source-code
```javascript
remoteMethod = function (name, options) {
  if (options.isStatic === undefined) {
    var m = name.match(/^prototype\.(.*)$/);
    options.isStatic = !m;
    name = options.isStatic ? name : m[1];
  }

  if (options.accepts) {
    options = extend({}, options);
    options.accepts = setupOptionsArgs(options.accepts);
  }

  this.sharedClass.defineMethod(name, options);
  this.emit('remoteMethodAdded', this.sharedClass);
}
```
- example usage
```shell
...
  /**
* Enable remote invocation for the specified method.
* See [Remote methods](http://loopback.io/doc/en/lb2/Remote-methods.html) for more information.
*
* Static method example:
* '''js
* Model.myMethod();
* Model.remoteMethod('myMethod');
* '''
*
* @param {String} name The name of the method.
* @param {Object} options The remoting options.
* See [Remote methods - Options](http://loopback.io/doc/en/lb2/Remote-methods.html#options).
*/
...
```

#### <a name="apidoc.element.loopback.KeyValueModel.removeAllListeners"></a>[function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>removeAllListeners ()](#apidoc.element.loopback.KeyValueModel.removeAllListeners)
- description and source-code
```javascript
removeAllListeners = function () { [native code] }
```
- example usage
```shell
...

var idName = this.getIdName();
var Model = this;
var changes = new PassThrough({objectMode: true});
var writeable = true;

changes.destroy = function() {
  changes.removeAllListeners('error');
  changes.removeAllListeners('end');
  writeable = false;
  changes = null;
};

changes.on('error', function() {
  writeable = false;
...
```

#### <a name="apidoc.element.loopback.KeyValueModel.removeListener"></a>[function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>removeListener ()](#apidoc.element.loopback.KeyValueModel.removeListener)
- description and source-code
```javascript
removeListener = function () { [native code] }
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.KeyValueModel.removeObserver"></a>[function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>removeObserver (operation, listener)](#apidoc.element.loopback.KeyValueModel.removeObserver)
- description and source-code
```javascript
removeObserver = function (operation, listener) {
  if (!(this._observers && this._observers[operation])) return;

  var index = this._observers[operation].indexOf(listener);
  if (index !== -1) {
    return this._observers[operation].splice(index, 1);
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.KeyValueModel.scopeRemoting"></a>[function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>scopeRemoting (scopeName, scope, define)](#apidoc.element.loopback.KeyValueModel.scopeRemoting)
- description and source-code
```javascript
scopeRemoting = function (scopeName, scope, define) {
  var pathName =
    (scope.options && scope.options.http && scope.options.http.path) || scopeName;

  var isStatic = scope.isStatic;
  var toModelName = scope.modelTo.modelName;

  // https://github.com/strongloop/loopback/issues/811
  // Check if the scope is for a hasMany relation
  var relation = this.relations[scopeName];
  if (relation && relation.modelTo) {
    // For a relation with through model, the toModelName should be the one
    // from the target model
    toModelName = relation.modelTo.modelName;
  }

  define('__get__' + scopeName, {
    isStatic: isStatic,
    http: {verb: 'get', path: '/' + pathName},
    accepts: [
      {arg: 'filter', type: 'object'},
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Queries %s of %s.', scopeName, this.modelName),
    accessType: 'READ',
    returns: {arg: scopeName, type: [toModelName], root: true},
  });

  define('__create__' + scopeName, {
    isStatic: isStatic,
    http: {verb: 'post', path: '/' + pathName},
    accepts: [
      {
        arg: 'data',
        type: 'object',
        allowArray: true,
        model: toModelName,
        http: {source: 'body'},
      },
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Creates a new instance in %s of this model.', scopeName),
    accessType: 'WRITE',
    returns: {arg: 'data', type: toModelName, root: true},
  });

  define('__delete__' + scopeName, {
    isStatic: isStatic,
    http: {verb: 'delete', path: '/' + pathName},
    accepts: [
      {
        arg: 'where', type: 'object',
        // The "where" argument is not exposed in the REST API
        // but we need to provide a value so that we can pass "options"
        // as the third argument.
        http: function(ctx) { return undefined; },
      },
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Deletes all %s of this model.', scopeName),
    accessType: 'WRITE',
  });

  define('__count__' + scopeName, {
    isStatic: isStatic,
    http: {verb: 'get', path: '/' + pathName + '/count'},
    accepts: [
      {
        arg: 'where', type: 'object',
        description: 'Criteria to match model instances',
      },
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Counts %s of %s.', scopeName, this.modelName),
    accessType: 'READ',
    returns: {arg: 'count',  type: 'number'},
  });
}
```
- example usage
```shell
...
        ModelCtor.hasManyRemoting(relationName, relation, define);
      }
    }

    // handle scopes
    var scopes = ModelCtor.scopes || {};
    for (var scopeName in scopes) {
      ModelCtor.scopeRemoting(scopeName, scopes[scopeName], define);
    }
  });

  return ModelCtor;
};

/*!
...
```

#### <a name="apidoc.element.loopback.KeyValueModel.set"></a>[function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>set (key, value, options, callback)](#apidoc.element.loopback.KeyValueModel.set)
- description and source-code
```javascript
set = function (key, value, options, callback) {
  throwNotAttached(this.modelName, 'set');
}
```
- example usage
```shell
...
*
* For example, to listen on the specified port and all hosts, and ignore app config.
* '''js
* app.listen(80);
* '''
*
* The function also installs a 'listening' callback that calls
* 'app.set('port')' with the value returned by 'server.address().port'.
* This way the port param contains always the real port number, even when
* listen was called with port number 0.
*
* @param {Function} [cb] If specified, the callback is added as a listener
*   for the server's "listening" event.
* @returns {http.Server} A node 'http.Server' with this application configured
*   as the request handler.
...
```

#### <a name="apidoc.element.loopback.KeyValueModel.setMaxListeners"></a>[function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>setMaxListeners ()](#apidoc.element.loopback.KeyValueModel.setMaxListeners)
- description and source-code
```javascript
setMaxListeners = function () { [native code] }
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.KeyValueModel.setup"></a>[function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>setup ()](#apidoc.element.loopback.KeyValueModel.setup)
- description and source-code
```javascript
setup = function () {
  KeyValueModel.base.setup.apply(this, arguments);

  this.remoteMethod('get', {
    accepts: {
      arg: 'key', type: 'string', required: true,
      http: {source: 'path'},
    },
    returns: {arg: 'value', type: 'any', root: true},
    http: {path: '/:key', verb: 'get'},
    rest: {after: convertNullToNotFoundError},
  });

  this.remoteMethod('set', {
    accepts: [
      {arg: 'key', type: 'string', required: true,
        http: {source: 'path'}},
      {arg: 'value', type: 'any', required: true,
        http: {source: 'body'}},
      {arg: 'ttl', type: 'number',
        http: {source: 'query'},
        description: 'time to live in milliseconds'},
    ],
    http: {path: '/:key', verb: 'put'},
  });

  this.remoteMethod('expire', {
    accepts: [
      {arg: 'key', type: 'string', required: true,
        http: {source: 'path'}},
      {arg: 'ttl', type: 'number', required: true,
        http: {source: 'form'}},
    ],
    http: {path: '/:key/expire', verb: 'put'},
  });

  this.remoteMethod('ttl', {
    accepts: {
      arg: 'key', type: 'string', required: true,
      http: {source: 'path'},
    },
    returns: {arg: 'value', type: 'any', root: true},
    http: {path: '/:key/ttl', verb: 'get'},
  });

  this.remoteMethod('keys', {
    accepts: {
      arg: 'filter', type: 'object', required: false,
      http: {source: 'query'},
    },
    returns: {arg: 'keys', type: ['string'], root: true},
    http: {path: '/keys', verb: 'get'},
  });
}
```
- example usage
```shell
...
  Model.createOptionsFromRemotingContext = function(ctx) {
    return {
      accessToken: ctx.req.accessToken,
    };
  };

  // setup the initial model
  Model.setup();

  return Model;
};
...
```

#### <a name="apidoc.element.loopback.KeyValueModel.sharedCtor"></a>[function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>sharedCtor (data, id, options, fn)](#apidoc.element.loopback.KeyValueModel.sharedCtor)
- description and source-code
```javascript
sharedCtor = function (data, id, options, fn) {
  var ModelCtor = this;

  var isRemoteInvocationWithOptions = typeof data !== 'object' &&
    typeof id === 'object' &&
    typeof options === 'function';
  if (isRemoteInvocationWithOptions) {
    // sharedCtor(id, options, fn)
    fn = options;
    options = id;
    id = data;
    data = null;
  } else if (typeof data === 'function') {
    // sharedCtor(fn)
    fn = data;
    data = null;
    id = null;
    options = null;
  } else if (typeof id === 'function') {
    // sharedCtor(data, fn)
    // sharedCtor(id, fn)
    fn = id;
    options = null;

    if (typeof data !== 'object') {
      id = data;
      data = null;
    } else {
      id = null;
    }
  }

  if (id && data) {
    var model = new ModelCtor(data);
    model.id = id;
    fn(null, model);
  } else if (data) {
    fn(null, new ModelCtor(data));
  } else if (id) {
    var filter = {};
    ModelCtor.findById(id, filter, options, function(err, model) {
      if (err) {
        fn(err);
      } else if (model) {
        fn(null, model);
      } else {
        err = new Error(g.f('could not find a model with apidoc.element.loopback.KeyValueModel.sharedCtor %s', id));
        err.statusCode = 404;
        err.code = 'MODEL_NOT_FOUND';
        fn(err);
      }
    });
  } else {
    fn(new Error(g.f('must specify an apidoc.element.loopback.KeyValueModel.sharedCtor or {{data}}')));
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.KeyValueModel.super_"></a>[function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>super_ (data, options)](#apidoc.element.loopback.KeyValueModel.super_)
- description and source-code
```javascript
function ModelConstructor(data, options) {
  if (!(this instanceof ModelConstructor)) {
    return new ModelConstructor(data, options);
  }
  if (ModelClass.settings.unresolved) {
    throw new Error(g.f('Model %s is not defined.', ModelClass.modelName));
  }
  ModelBaseClass.apply(this, arguments);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.KeyValueModel.ttl"></a>[function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>ttl (key, options, callback)](#apidoc.element.loopback.KeyValueModel.ttl)
- description and source-code
```javascript
ttl = function (key, options, callback) {
  throwNotAttached(this.modelName, 'ttl');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.KeyValueModel.validate"></a>[function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>validate ()](#apidoc.element.loopback.KeyValueModel.validate)
- description and source-code
```javascript
validate = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.KeyValueModel.validateAsync"></a>[function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>validateAsync ()](#apidoc.element.loopback.KeyValueModel.validateAsync)
- description and source-code
```javascript
validateAsync = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.KeyValueModel.validatesAbsenceOf"></a>[function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>validatesAbsenceOf ()](#apidoc.element.loopback.KeyValueModel.validatesAbsenceOf)
- description and source-code
```javascript
validatesAbsenceOf = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.KeyValueModel.validatesExclusionOf"></a>[function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>validatesExclusionOf ()](#apidoc.element.loopback.KeyValueModel.validatesExclusionOf)
- description and source-code
```javascript
validatesExclusionOf = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.KeyValueModel.validatesFormatOf"></a>[function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>validatesFormatOf ()](#apidoc.element.loopback.KeyValueModel.validatesFormatOf)
- description and source-code
```javascript
validatesFormatOf = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.KeyValueModel.validatesInclusionOf"></a>[function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>validatesInclusionOf ()](#apidoc.element.loopback.KeyValueModel.validatesInclusionOf)
- description and source-code
```javascript
validatesInclusionOf = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.KeyValueModel.validatesLengthOf"></a>[function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>validatesLengthOf ()](#apidoc.element.loopback.KeyValueModel.validatesLengthOf)
- description and source-code
```javascript
validatesLengthOf = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.KeyValueModel.validatesNumericalityOf"></a>[function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>validatesNumericalityOf ()](#apidoc.element.loopback.KeyValueModel.validatesNumericalityOf)
- description and source-code
```javascript
validatesNumericalityOf = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.KeyValueModel.validatesPresenceOf"></a>[function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>validatesPresenceOf ()](#apidoc.element.loopback.KeyValueModel.validatesPresenceOf)
- description and source-code
```javascript
validatesPresenceOf = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.KeyValueModel.validatesUniquenessOf"></a>[function <span class="apidocSignatureSpan">loopback.KeyValueModel.</span>validatesUniquenessOf ()](#apidoc.element.loopback.KeyValueModel.validatesUniquenessOf)
- description and source-code
```javascript
validatesUniquenessOf = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```



# <a name="apidoc.module.loopback.KeyValueModel.sharedClass"></a>[module loopback.KeyValueModel.sharedClass](#apidoc.module.loopback.KeyValueModel.sharedClass)

#### <a name="apidoc.element.loopback.KeyValueModel.sharedClass.ctor"></a>[function <span class="apidocSignatureSpan">loopback.KeyValueModel.sharedClass.</span>ctor (data, options)](#apidoc.element.loopback.KeyValueModel.sharedClass.ctor)
- description and source-code
```javascript
function ModelConstructor(data, options) {
  if (!(this instanceof ModelConstructor)) {
    return new ModelConstructor(data, options);
  }
  if (ModelClass.settings.unresolved) {
    throw new Error(g.f('Model %s is not defined.', ModelClass.modelName));
  }
  ModelBaseClass.apply(this, arguments);
}
```
- example usage
```shell
n/a
```



# <a name="apidoc.module.loopback.Mail"></a>[module loopback.Mail](#apidoc.module.loopback.Mail)

#### <a name="apidoc.element.loopback.Mail.Mail"></a>[function <span class="apidocSignatureSpan">loopback.</span>Mail (settings)](#apidoc.element.loopback.Mail.Mail)
- description and source-code
```javascript
function MailConnector(settings) {
  assert(typeof settings === 'object', 'cannot initialize MailConnector without a settings object');

  var transports = settings.transports;

  // if transports is not in settings object AND settings.transport exists
  if (!transports && settings.transport) {
    // then wrap single transport in an array and assign to transports
    transports = [settings.transport];
  }

  if (!transports) {
    transports = [];
  }

  this.transportsIndex = {};
  this.transports = [];

  if (loopback.isServer) {
    transports.forEach(this.setupTransport.bind(this));
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Mail.initialize"></a>[function <span class="apidocSignatureSpan">loopback.Mail.</span>initialize (dataSource, callback)](#apidoc.element.loopback.Mail.initialize)
- description and source-code
```javascript
initialize = function (dataSource, callback) {
  dataSource.connector = new MailConnector(dataSource.settings);
  callback();
}
```
- example usage
```shell
n/a
```



# <a name="apidoc.module.loopback.Mail.mailer"></a>[module loopback.Mail.mailer](#apidoc.module.loopback.Mail.mailer)

#### <a name="apidoc.element.loopback.Mail.mailer.createTransport"></a>[function <span class="apidocSignatureSpan">loopback.Mail.mailer.</span>createTransport (transporter, defaults)](#apidoc.element.loopback.Mail.mailer.createTransport)
- description and source-code
```javascript
createTransport = function (transporter, defaults) {
    var urlConfig;
    var options;
    var mailer;
    var proxyUrl;

    // if no transporter configuration is provided use direct as default
    transporter = transporter || directTransport({
        debug: true
    });

    if (
        // provided transporter is a configuration object, not transporter plugin
        (typeof transporter === 'object' && typeof transporter.send !== 'function') ||
        // provided transporter looks like a connection url
        (typeof transporter === 'string' && /^(smtps?|direct):/i.test(transporter))
    ) {

        if ((urlConfig = typeof transporter === 'string' ? transporter : transporter.url)) {
            // parse a configuration URL into configuration options
            options = shared.parseConnectionUrl(urlConfig);
        } else {
            options = transporter;
        }

        if (options.proxy && typeof options.proxy === 'string') {
            proxyUrl = options.proxy;
        }

        if (options.transport && typeof options.transport === 'string') {
            try {
                transporter = require('nodemailer-' + (options.transport).toLowerCase() + '-transport')(options);
            } catch (E) {
                // if transporter loader fails, return an error when sending mail
                transporter = {
                    send: function (mail, callback) {
                        var errmsg = 'Requested transport plugin  "nodemailer-' + (options.transport).toLowerCase() + '-transport
" could not be initiated';
                        var err = new Error(errmsg);
                        err.code = 'EINIT';
                        setImmediate(function () {
                            return callback(err);
                        });
                    }
                };
            }
        } else if (options.direct) {
            transporter = directTransport(options);
        } else if (options.pool) {
            transporter = smtpPoolTransport(options);
        } else {
            transporter = smtpTransport(options);
        }
    }

    mailer = new Nodemailer(transporter, options, defaults);

    if (proxyUrl) {
        setupProxy(mailer, proxyUrl);
    }

    return mailer;
}
```
- example usage
```shell
n/a
```



# <a name="apidoc.module.loopback.Mail.prototype"></a>[module loopback.Mail.prototype](#apidoc.module.loopback.Mail.prototype)

#### <a name="apidoc.element.loopback.Mail.prototype.DataAccessObject"></a>[function <span class="apidocSignatureSpan">loopback.Mail.prototype.</span>DataAccessObject ()](#apidoc.element.loopback.Mail.prototype.DataAccessObject)
- description and source-code
```javascript
function Mailer() {

}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Mail.prototype.defaultTransport"></a>[function <span class="apidocSignatureSpan">loopback.Mail.prototype.</span>defaultTransport ()](#apidoc.element.loopback.Mail.prototype.defaultTransport)
- description and source-code
```javascript
defaultTransport = function () {
  return this.transports[0] || this.stubTransport;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Mail.prototype.setupTransport"></a>[function <span class="apidocSignatureSpan">loopback.Mail.prototype.</span>setupTransport (setting)](#apidoc.element.loopback.Mail.prototype.setupTransport)
- description and source-code
```javascript
setupTransport = function (setting) {
  var connector = this;
  connector.transports = connector.transports || [];
  connector.transportsIndex = connector.transportsIndex || {};

  var transport;
  var transportType = (setting.type || 'STUB').toLowerCase();
  if (transportType === 'direct') {
    transport = mailer.createTransport();
  } else if (transportType === 'smtp') {
    transport = mailer.createTransport(setting);
  } else {
    var transportModuleName = 'nodemailer-' + transportType + '-transport';
    var transportModule = require(transportModuleName);
    transport = mailer.createTransport(transportModule(setting));
  }

  connector.transportsIndex[setting.alias || setting.type] = transport;
  connector.transports.push(transport);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Mail.prototype.transportForName"></a>[function <span class="apidocSignatureSpan">loopback.Mail.prototype.</span>transportForName (name)](#apidoc.element.loopback.Mail.prototype.transportForName)
- description and source-code
```javascript
transportForName = function (name) {
  return this.transportsIndex[name];
}
```
- example usage
```shell
n/a
```



# <a name="apidoc.module.loopback.Mail.prototype.DataAccessObject"></a>[module loopback.Mail.prototype.DataAccessObject](#apidoc.module.loopback.Mail.prototype.DataAccessObject)

#### <a name="apidoc.element.loopback.Mail.prototype.DataAccessObject.DataAccessObject"></a>[function <span class="apidocSignatureSpan">loopback.Mail.prototype.</span>DataAccessObject ()](#apidoc.element.loopback.Mail.prototype.DataAccessObject.DataAccessObject)
- description and source-code
```javascript
function Mailer() {

}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Mail.prototype.DataAccessObject.send"></a>[function <span class="apidocSignatureSpan">loopback.Mail.prototype.DataAccessObject.</span>send (options, fn)](#apidoc.element.loopback.Mail.prototype.DataAccessObject.send)
- description and source-code
```javascript
send = function (options, fn) {
  var dataSource = this.dataSource;
  var settings = dataSource && dataSource.settings;
  var connector = dataSource.connector;
  assert(connector, 'Cannot send mail without a connector!');

  var transport = connector.transportForName(options.transport);

  if (!transport) {
    transport = connector.defaultTransport();
  }

  if (debug.enabled || settings && settings.debug) {
    g.log('Sending Mail:');
    if (options.transport) {
      console.log(g.f('\t TRANSPORT:%s', options.transport));
    }
    g.log('\t TO:%s', options.to);
    g.log('\t FROM:%s', options.from);
    g.log('\t SUBJECT:%s', options.subject);
    g.log('\t TEXT:%s', options.text);
    g.log('\t HTML:%s', options.html);
  }

  if (transport) {
    assert(transport.sendMail,
      'You must supply an Email.settings.transports containing a valid transport');
    transport.sendMail(options, fn);
  } else {
    g.warn('Warning: No email transport specified for sending email.' +
      ' Setup a transport to send mail messages.');
    process.nextTick(function() {
      fn(null, options);
    });
  }
}
```
- example usage
```shell
...
* [Express documentation](http://expressjs.com/) for details.
*
* '''js
* var loopback = require('loopback');
* var app = loopback();
*
* app.get('/', function(req, res){
*   res.send('hello world');
* });
*
* app.listen(3000);
* '''
*
* @class LoopBackApplication
* @header var app = loopback()
...
```



# <a name="apidoc.module.loopback.Mail.prototype.DataAccessObject.prototype"></a>[module loopback.Mail.prototype.DataAccessObject.prototype](#apidoc.module.loopback.Mail.prototype.DataAccessObject.prototype)

#### <a name="apidoc.element.loopback.Mail.prototype.DataAccessObject.prototype.send"></a>[function <span class="apidocSignatureSpan">loopback.Mail.prototype.DataAccessObject.prototype.</span>send (fn)](#apidoc.element.loopback.Mail.prototype.DataAccessObject.prototype.send)
- description and source-code
```javascript
send = function (fn) {
  this.constructor.send(this, fn);
}
```
- example usage
```shell
...
* [Express documentation](http://expressjs.com/) for details.
*
* '''js
* var loopback = require('loopback');
* var app = loopback();
*
* app.get('/', function(req, res){
*   res.send('hello world');
* });
*
* app.listen(3000);
* '''
*
* @class LoopBackApplication
* @header var app = loopback()
...
```



# <a name="apidoc.module.loopback.Memory"></a>[module loopback.Memory](#apidoc.module.loopback.Memory)

#### <a name="apidoc.element.loopback.Memory.Memory"></a>[function <span class="apidocSignatureSpan">loopback.</span>Memory ()](#apidoc.element.loopback.Memory.Memory)
- description and source-code
```javascript
function Memory() {
  // TODO implement entire memory connector
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Memory.initialize"></a>[function <span class="apidocSignatureSpan">loopback.Memory.</span>initialize (dataSource, callback)](#apidoc.element.loopback.Memory.initialize)
- description and source-code
```javascript
function initializeDataSource(dataSource, callback) {
  dataSource.connector = new Memory(null, dataSource.settings);
  dataSource.connector.connect(callback);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Memory.super_"></a>[function <span class="apidocSignatureSpan">loopback.Memory.</span>super_ (options)](#apidoc.element.loopback.Memory.super_)
- description and source-code
```javascript
function Connector(options) {
  EventEmitter.apply(this, arguments);
  this.options = options;

  debug('created with options', options);
}
```
- example usage
```shell
n/a
```



# <a name="apidoc.module.loopback.Remote"></a>[module loopback.Remote](#apidoc.module.loopback.Remote)

#### <a name="apidoc.element.loopback.Remote.Remote"></a>[function <span class="apidocSignatureSpan">loopback.</span>Remote (settings)](#apidoc.element.loopback.Remote.Remote)
- description and source-code
```javascript
function RemoteConnector(settings) {
  assert(typeof settings ===
    'object',
    'cannot initiaze RemoteConnector without a settings object');
  this.client = settings.client;
  this.adapter = settings.adapter || 'rest';
  this.protocol = settings.protocol || 'http';
  this.root = settings.root || '';
  this.host = settings.host || 'localhost';
  this.port = settings.port || 3000;
  this.remotes = remoting.create();
  this.name = 'remote-connector';

  if (settings.url) {
    this.url = settings.url;
  } else {
    this.url = this.protocol + '://' + this.host + ':' + this.port + this.root;
  }

  // handle mixins in the define() method
  var DAO = this.DataAccessObject = function() {
  };

}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Remote.initialize"></a>[function <span class="apidocSignatureSpan">loopback.Remote.</span>initialize (dataSource, callback)](#apidoc.element.loopback.Remote.initialize)
- description and source-code
```javascript
initialize = function (dataSource, callback) {
  var connector = dataSource.connector =
    new RemoteConnector(dataSource.settings);
  connector.connect();
  process.nextTick(callback);
}
```
- example usage
```shell
n/a
```



# <a name="apidoc.module.loopback.Remote.prototype"></a>[module loopback.Remote.prototype](#apidoc.module.loopback.Remote.prototype)

#### <a name="apidoc.element.loopback.Remote.prototype.connect"></a>[function <span class="apidocSignatureSpan">loopback.Remote.prototype.</span>connect ()](#apidoc.element.loopback.Remote.prototype.connect)
- description and source-code
```javascript
connect = function () {
  this.remotes.connect(this.url, this.adapter);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Remote.prototype.define"></a>[function <span class="apidocSignatureSpan">loopback.Remote.prototype.</span>define (definition)](#apidoc.element.loopback.Remote.prototype.define)
- description and source-code
```javascript
define = function (definition) {
  var Model = definition.model;
  var remotes = this.remotes;

  assert(Model.sharedClass,
      'cannot attach ' +
      Model.modelName +
      ' to a remote connector without a Model.sharedClass');

  jutil.mixin(Model, RelationMixin);
  jutil.mixin(Model, InclusionMixin);
  remotes.addClass(Model.sharedClass);
  this.resolve(Model);
}
```
- example usage
```shell
...
 * @property {DataSource} Model.dataSource Data source to which the model is connected, if any. Static property.
 * @property {SharedClass} Model.sharedMethod The 'strong-remoting' [SharedClass](http://apidocs.strongloop.com/strong-remoting/#
sharedclass) that contains remoting (and http) metadata. Static property.
 * @property {Object} settings Contains additional model settings.
 * @property {string} settings.http.path Base URL of the model HTTP route.
 * @property [{string}] settings.acls Array of ACLs for the model.
 * @class
 */
var Model = registry.modelBuilder.define('Model');

Model.registry = registry;

/**
 * The 'loopback.Model.extend()' method calls this when you create a model that extends another model.
 * Add any setup or configuration code you want executed when the model is created.
 * See  [Setting up a custom model](http://loopback.io/doc/en/lb2/Extending-built-in-models.html#setting-up-a-custom-model).
...
```

#### <a name="apidoc.element.loopback.Remote.prototype.resolve"></a>[function <span class="apidocSignatureSpan">loopback.Remote.prototype.</span>resolve (Model)](#apidoc.element.loopback.Remote.prototype.resolve)
- description and source-code
```javascript
resolve = function (Model) {
  var remotes = this.remotes;

  Model.sharedClass.methods().forEach(function(remoteMethod) {
    if (remoteMethod.name !== 'Change' && remoteMethod.name !== 'Checkpoint') {
      createProxyMethod(Model, remotes, remoteMethod);
    }
  });

  // setup a remoting type converter for this model
  remotes.defineObjectType(Model.modelName, function(data) {
    return new Model(data);
  });
}
```
- example usage
```shell
...
  },
},
mochaTest: {
  'unit': {
    src: 'test/*.js',
    options: {
      reporter: 'dot',
      require: require.resolve('./test/helpers/use-english.js'),
    },
  },
  'unit-xml': {
    src: 'test/*.js',
    options: {
      reporter: 'xunit',
      captureFile: 'xunit.xml',
...
```



# <a name="apidoc.module.loopback.Role"></a>[module loopback.Role](#apidoc.module.loopback.Role)

#### <a name="apidoc.element.loopback.Role.Role"></a>[function <span class="apidocSignatureSpan">loopback.</span>Role (data, options)](#apidoc.element.loopback.Role.Role)
- description and source-code
```javascript
function ModelConstructor(data, options) {
  if (!(this instanceof ModelConstructor)) {
    return new ModelConstructor(data, options);
  }
  if (ModelClass.settings.unresolved) {
    throw new Error(g.f('Model %s is not defined.', ModelClass.modelName));
  }
  ModelBaseClass.apply(this, arguments);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Role.ValidationError"></a>[function <span class="apidocSignatureSpan">loopback.Role.</span>ValidationError (obj)](#apidoc.element.loopback.Role.ValidationError)
- description and source-code
```javascript
function ValidationError(obj) {
  if (!(this instanceof ValidationError)) return new ValidationError(obj);

  this.name = 'ValidationError';

  var context = obj && obj.constructor && obj.constructor.modelName;
  this.message = g.f(
    'The %s instance is not valid. Details: %s.',
      context ? ''' + context + ''' : 'model',
      formatErrors(obj.errors, obj.toJSON()) || '(unknown)'
  );

  this.statusCode = 422;

  this.details = {
    context: context,
    codes: obj.errors && obj.errors.codes,
    messages: obj.errors,
  };

  if (Error.captureStackTrace) {
    // V8 (Chrome, Opera, Node)
    Error.captureStackTrace(this, this.constructor);
  } else if (errorHasStackProperty) {
    // Firefox
    this.stack = (new Error).stack;
  }
  // Safari and PhantomJS initializes 'error.stack' on throw
  // Internet Explorer does not support 'error.stack'
}
```
- example usage
```shell
...
  return save();
}

inst.isValid(function(valid) {
  if (valid) {
    save();
  } else {
    var err = new Model.ValidationError(inst);
    // throws option is dangerous for async usage
    if (options.throws) {
      throw err;
    }
    callback(err, inst);
  }
});
...
```

#### <a name="apidoc.element.loopback.Role._ACL"></a>[function <span class="apidocSignatureSpan">loopback.Role.</span>_ACL (ACL)](#apidoc.element.loopback.Role._ACL)
- description and source-code
```javascript
function getACL(ACL) {
  var registry = this.registry;
  if (ACL !== undefined) {
    // The function is used as a setter
    _aclModel = ACL;
  }
  if (_aclModel) {
    return _aclModel;
  }
  var aclModel = registry.getModel('ACL');
  _aclModel = registry.getModelByType(aclModel);
  return _aclModel;
}
```
- example usage
```shell
...
   * @param {String|Error} err The error object.
   * @param {Boolean} allowed True if the request is allowed; false otherwise.
   */

  Model.checkAccess = function(token, modelId, sharedMethod, ctx, callback) {
var ANONYMOUS = registry.getModel('AccessToken').ANONYMOUS;
token = token || ANONYMOUS;
var aclModel = Model._ACL();

ctx = ctx || {};
if (typeof ctx === 'function' && callback === undefined) {
  callback = ctx;
  ctx = {};
}
...
```

#### <a name="apidoc.element.loopback.Role._defineChangeModel"></a>[function <span class="apidocSignatureSpan">loopback.Role.</span>_defineChangeModel ()](#apidoc.element.loopback.Role._defineChangeModel)
- description and source-code
```javascript
_defineChangeModel = function () {
  var BaseChangeModel = this.registry.getModel('Change');
  assert(BaseChangeModel,
    'Change model must be defined before enabling change replication');

  const additionalChangeModelProperties =
    this.settings.additionalChangeModelProperties || {};

  this.Change = BaseChangeModel.extend(this.modelName + '-change',
    additionalChangeModelProperties,
    {trackModel: this}
  );

  if (this.dataSource) {
    attachRelatedModels(this);
  }

  // Re-attach related models whenever our datasource is changed.
  var self = this;
  this.on('dataSourceAttached', function() {
    attachRelatedModels(self);
  });

  return this.Change;

  function attachRelatedModels(self) {
    self.Change.attachTo(self.dataSource);
    self.Change.getCheckpointModel().attachTo(self.dataSource);
  }
}
```
- example usage
```shell
...
// call Model.setup first
Model.setup.call(this);

var PersistedModel = this;

// enable change tracking (usually for replication)
if (this.settings.trackChanges) {
  PersistedModel._defineChangeModel();
  PersistedModel.once('dataSourceAttached', function() {
    PersistedModel.enableChangeTracking();
  });
} else if (this.settings.enableRemoteReplication) {
  PersistedModel._defineChangeModel();
}
...
```

#### <a name="apidoc.element.loopback.Role._getAccessTypeForMethod"></a>[function <span class="apidocSignatureSpan">loopback.Role.</span>_getAccessTypeForMethod (method)](#apidoc.element.loopback.Role._getAccessTypeForMethod)
- description and source-code
```javascript
_getAccessTypeForMethod = function (method) {
  if (typeof method === 'string') {
    method = {name: method};
  }
  assert(
    typeof method === 'object',
    'method is a required argument and must be a RemoteMethod object'
  );

  var ACL = Model._ACL();

  // Check the explicit setting of accessType
  if (method.accessType) {
    assert(method.accessType === ACL.READ ||
      method.accessType === ACL.REPLICATE ||
      method.accessType === ACL.WRITE ||
      method.accessType === ACL.EXECUTE, 'invalid accessType ' +
      method.accessType +
      '. It must be "READ", "REPLICATE", "WRITE", or "EXECUTE"');
    return method.accessType;
  }

  // Default GET requests to READ
  var verb = method.http && method.http.verb;
  if (typeof verb === 'string') {
    verb = verb.toUpperCase();
  }
  if (verb === 'GET' || verb === 'HEAD') {
    return ACL.READ;
  }

  switch (method.name) {
    case 'create':
      return ACL.WRITE;
    case 'updateOrCreate':
      return ACL.WRITE;
    case 'upsertWithWhere':
      return ACL.WRITE;
    case 'upsert':
      return ACL.WRITE;
    case 'exists':
      return ACL.READ;
    case 'findById':
      return ACL.READ;
    case 'find':
      return ACL.READ;
    case 'findOne':
      return ACL.READ;
    case 'destroyById':
      return ACL.WRITE;
    case 'deleteById':
      return ACL.WRITE;
    case 'removeById':
      return ACL.WRITE;
    case 'count':
      return ACL.READ;
    default:
      return ACL.EXECUTE;
  }
}
```
- example usage
```shell
...
if (this.sharedMethod) {
  this.methodNames = this.sharedMethod.aliases.concat([this.sharedMethod.name]);
} else {
  this.methodNames = [];
}

if (this.sharedMethod) {
  this.accessType = this.model._getAccessTypeForMethod(this.sharedMethod);
}

this.accessType = context.accessType || AccessContext.ALL;
assert(loopback.AccessToken,
  'AccessToken model must be defined before AccessContext model');
this.accessToken = context.accessToken || loopback.AccessToken.ANONYMOUS;
...
```

#### <a name="apidoc.element.loopback.Role._notifyBaseObservers"></a>[function <span class="apidocSignatureSpan">loopback.Role.</span>_notifyBaseObservers (operation, context, callback)](#apidoc.element.loopback.Role._notifyBaseObservers)
- description and source-code
```javascript
_notifyBaseObservers = function (operation, context, callback) {
  if (this.base && this.base.notifyObserversOf)
    this.base.notifyObserversOf(operation, context, callback);
  else
    callback();
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Role._runWhenAttachedToApp"></a>[function <span class="apidocSignatureSpan">loopback.Role.</span>_runWhenAttachedToApp (fn)](#apidoc.element.loopback.Role._runWhenAttachedToApp)
- description and source-code
```javascript
_runWhenAttachedToApp = function (fn) {
  if (this.app) return fn(this.app);
  var self = this;
  self.once('attached', function() {
    fn(self.app);
  });
}
```
- example usage
```shell
...
  ModelCtor,
  remotingOptions
);

// before remote hook
ModelCtor.beforeRemote = function(name, fn) {
  var className = this.modelName;
  this._runWhenAttachedToApp(function(app) {
    var remotes = app.remotes();
    remotes.before(className + '.' + name, function(ctx, next) {
      return fn(ctx, ctx.result, next);
    });
  });
};
...
```

#### <a name="apidoc.element.loopback.Role.addListener"></a>[function <span class="apidocSignatureSpan">loopback.Role.</span>addListener ()](#apidoc.element.loopback.Role.addListener)
- description and source-code
```javascript
addListener = function () { [native code] }
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Role.afterRemote"></a>[function <span class="apidocSignatureSpan">loopback.Role.</span>afterRemote (name, fn)](#apidoc.element.loopback.Role.afterRemote)
- description and source-code
```javascript
afterRemote = function (name, fn) {
  var className = this.modelName;
  this._runWhenAttachedToApp(function(app) {
    var remotes = app.remotes();
    remotes.after(className + '.' + name, function(ctx, next) {
      return fn(ctx, ctx.result, next);
    });
  });
}
```
- example usage
```shell
...
        var m = method.isStatic ? method.name : 'prototype.' + method.name;
        if (before && before[delegateTo.name]) {
          self.beforeRemote(m, function(ctx, result, next) {
            before[delegateTo.name]._listeners.call(null, ctx, next);
          });
        }
        if (after && after[delegateTo.name]) {
          self.afterRemote(m, function(ctx, result, next) {
            after[delegateTo.name]._listeners.call(null, ctx, next);
          });
        }
      }
    });
  });
} else {
...
```

#### <a name="apidoc.element.loopback.Role.afterRemoteError"></a>[function <span class="apidocSignatureSpan">loopback.Role.</span>afterRemoteError (name, fn)](#apidoc.element.loopback.Role.afterRemoteError)
- description and source-code
```javascript
afterRemoteError = function (name, fn) {
  var className = this.modelName;
  this._runWhenAttachedToApp(function(app) {
    var remotes = app.remotes();
    remotes.afterError(className + '.' + name, fn);
  });
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Role.attachTo"></a>[function <span class="apidocSignatureSpan">loopback.Role.</span>attachTo (dataSource)](#apidoc.element.loopback.Role.attachTo)
- description and source-code
```javascript
attachTo = function (dataSource) {
  dataSource.attach(this);
}
```
- example usage
```shell
...
  this.on('dataSourceAttached', function() {
    attachRelatedModels(self);
  });

  return this.Change;

  function attachRelatedModels(self) {
    self.Change.attachTo(self.dataSource);
    self.Change.getCheckpointModel().attachTo(self.dataSource);
  }
};

PersistedModel.rectifyAllChanges = function(callback) {
  this.getChangeModel().rectifyAll(callback);
};
...
```

#### <a name="apidoc.element.loopback.Role.beforeRemote"></a>[function <span class="apidocSignatureSpan">loopback.Role.</span>beforeRemote (name, fn)](#apidoc.element.loopback.Role.beforeRemote)
- description and source-code
```javascript
beforeRemote = function (name, fn) {
  var className = this.modelName;
  this._runWhenAttachedToApp(function(app) {
    var remotes = app.remotes();
    remotes.before(className + '.' + name, function(ctx, next) {
      return fn(ctx, ctx.result, next);
    });
  });
}
```
- example usage
```shell
...
        sharedClass.methods().forEach(function(method) {
var delegateTo = method.rest && method.rest.delegateTo;
if (delegateTo && delegateTo.ctor == relation.modelTo) {
  var before = method.isStatic ? beforeListeners : beforeListeners['prototype'];
  var after = method.isStatic ? afterListeners : afterListeners['prototype'];
  var m = method.isStatic ? method.name : 'prototype.' + method.name;
  if (before && before[delegateTo.name]) {
    self.beforeRemote(m, function(ctx, result, next) {
      before[delegateTo.name]._listeners.call(null, ctx, next);
    });
  }
  if (after && after[delegateTo.name]) {
    self.afterRemote(m, function(ctx, result, next) {
      after[delegateTo.name]._listeners.call(null, ctx, next);
    });
...
```

#### <a name="apidoc.element.loopback.Role.belongsToRemoting"></a>[function <span class="apidocSignatureSpan">loopback.Role.</span>belongsToRemoting (relationName, relation, define)](#apidoc.element.loopback.Role.belongsToRemoting)
- description and source-code
```javascript
belongsToRemoting = function (relationName, relation, define) {
  var modelName = relation.modelTo && relation.modelTo.modelName;
  modelName = modelName || 'PersistedModel';
  var fn = this.prototype[relationName];
  var pathName = (relation.options.http && relation.options.http.path) || relationName;
  define('__get__' + relationName, {
    isStatic: false,
    http: {verb: 'get', path: '/' + pathName},
    accepts: [
      {arg: 'refresh', type: 'boolean', http: {source: 'query'}},
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    accessType: 'READ',
    description: format('Fetches belongsTo relation %s.', relationName),
    returns: {arg: relationName, type: modelName, root: true},
  }, fn);
}
```
- example usage
```shell
...
  defineRaw(name, options, fn);
};

// get the relations
for (var relationName in relations) {
  var relation = relations[relationName];
  if (relation.type === 'belongsTo') {
    ModelCtor.belongsToRemoting(relationName, relation, define);
  } else if (
    relation.type === 'hasOne' ||
    relation.type === 'embedsOne'
  ) {
    ModelCtor.hasOneRemoting(relationName, relation, define);
  } else if (
    relation.type === 'hasMany' ||
...
```

#### <a name="apidoc.element.loopback.Role.bulkUpdate"></a>[function <span class="apidocSignatureSpan">loopback.Role.</span>bulkUpdate (updates, options, callback)](#apidoc.element.loopback.Role.bulkUpdate)
- description and source-code
```javascript
bulkUpdate = function (updates, options, callback) {
  var tasks = [];
  var Model = this;
  var Change = this.getChangeModel();
  var conflicts = [];

  var lastArg = arguments[arguments.length - 1];

  if (typeof lastArg === 'function' && arguments.length > 1) {
    callback = lastArg;
  }

  if (typeof options === 'function') {
    options = {};
  }

  options = options || {};

  buildLookupOfAffectedModelData(Model, updates, function(err, currentMap) {
    if (err) return callback(err);

    updates.forEach(function(update) {
      var id = update.change.modelId;
      var current = currentMap[id];
      switch (update.type) {
        case Change.UPDATE:
          tasks.push(function(cb) {
            applyUpdate(Model, id, current, update.data, update.change, conflicts, options, cb);
          });
          break;

        case Change.CREATE:
          tasks.push(function(cb) {
            applyCreate(Model, id, current, update.data, update.change, conflicts, options, cb);
          });
          break;
        case Change.DELETE:
          tasks.push(function(cb) {
            applyDelete(Model, id, current, update.change, conflicts, options, cb);
          });
          break;
      }
    });

    async.parallel(tasks, function(err) {
      if (err) return callback(err);
      if (conflicts.length) {
        err = new Error(g.f('Conflict'));
        err.statusCode = 409;
        err.details = {conflicts: conflicts};
        return callback(err);
      }
      callback();
    });
  });
}
```
- example usage
```shell
...
    function bulkUpdate(_updates, cb) {
debug('\tstarting bulk update');
updates = _updates;
utils.uploadInChunks(
  updates,
  replicationChunkSize,
  function(smallArray, chunkCallback) {
    return targetModel.bulkUpdate(smallArray, options, function(err) {
      // bulk update is a special case where we want to process all chunks and aggregate all errors
      chunkCallback(null, err);
    });
  },
  function(notUsed, err) {
    var conflicts = err && err.details && err.details.conflicts;
    if (conflicts && err.statusCode == 409) {
...
```

#### <a name="apidoc.element.loopback.Role.changes"></a>[function <span class="apidocSignatureSpan">loopback.Role.</span>changes (since, filter, callback)](#apidoc.element.loopback.Role.changes)
- description and source-code
```javascript
changes = function (since, filter, callback) {
  if (typeof since === 'function') {
    filter = {};
    callback = since;
    since = -1;
  }
  if (typeof filter === 'function') {
    callback = filter;
    since = -1;
    filter = {};
  }

  var idName = this.dataSource.idName(this.modelName);
  var Change = this.getChangeModel();
  var model = this;
  const changeFilter = this.createChangeFilter(since, filter);

  filter = filter || {};
  filter.fields = {};
  filter.where = filter.where || {};
  filter.fields[idName] = true;

  // TODO(ritch) this whole thing could be optimized a bit more
  Change.find(changeFilter, function(err, changes) {
    if (err) return callback(err);
    if (!Array.isArray(changes) || changes.length === 0) return callback(null, []);
    var ids = changes.map(function(change) {
      return change.getModelId();
    });
    filter.where[idName] = {inq: ids};
    model.find(filter, function(err, models) {
      if (err) return callback(err);
      var modelIds = models.map(function(m) {
        return m[idName].toString();
      });
      callback(null, changes.filter(function(ch) {
        if (ch.type() === Change.DELETE) return true;
        return modelIds.indexOf(ch.modelId) > -1;
      }));
    });
  });
}
```
- example usage
```shell
...
    async.waterfall(tasks, done);

    function getSourceChanges(cb) {
utils.downloadInChunks(
  options.filter,
  replicationChunkSize,
  function(filter, pagingCallback) {
    sourceModel.changes(since.source, filter, pagingCallback);
  },
  debug.enabled ? log : cb);

function log(err, result) {
  if (err) return cb(err);
  debug('\tusing source changes');
  result.forEach(function(it) { debug('\t\t%j', it); });
...
```

#### <a name="apidoc.element.loopback.Role.checkAccess"></a>[function <span class="apidocSignatureSpan">loopback.Role.</span>checkAccess (token, modelId, sharedMethod, ctx, callback)](#apidoc.element.loopback.Role.checkAccess)
- description and source-code
```javascript
checkAccess = function (token, modelId, sharedMethod, ctx, callback) {
  var ANONYMOUS = registry.getModel('AccessToken').ANONYMOUS;
  token = token || ANONYMOUS;
  var aclModel = Model._ACL();

  ctx = ctx || {};
  if (typeof ctx === 'function' && callback === undefined) {
    callback = ctx;
    ctx = {};
  }

  aclModel.checkAccessForContext({
    accessToken: token,
    model: this,
    property: sharedMethod.name,
    method: sharedMethod.name,
    sharedMethod: sharedMethod,
    modelId: modelId,
    accessType: this._getAccessTypeForMethod(sharedMethod),
    remotingContext: ctx,
  }, function(err, accessRequest) {
    if (err) return callback(err);
    callback(null, accessRequest.isAllowed());
  });
}
```
- example usage
```shell
...
var modelSettings = Model.settings || {};
var errStatusCode = modelSettings.aclErrorStatus || app.get('aclErrorStatus') || 401;
if (!req.accessToken) {
  errStatusCode = 401;
}

if (Model.checkAccess) {
  Model.checkAccess(
    req.accessToken,
    modelId,
    method,
    ctx,
    function(err, allowed) {
      if (err) {
        console.log(err);
...
```

#### <a name="apidoc.element.loopback.Role.checkpoint"></a>[function <span class="apidocSignatureSpan">loopback.Role.</span>checkpoint (cb)](#apidoc.element.loopback.Role.checkpoint)
- description and source-code
```javascript
checkpoint = function (cb) {
  var Checkpoint = this.getChangeModel().getCheckpointModel();
  Checkpoint.bumpLastSeq(cb);
}
```
- example usage
```shell
...
      }
      cb(err);
    });
}

function checkpoints() {
  var cb = arguments[arguments.length - 1];
  sourceModel.checkpoint(function(err, source) {
    if (err) return cb(err);
    newSourceCp = source.seq;
    targetModel.checkpoint(function(err, target) {
      if (err) return cb(err);
      newTargetCp = target.seq;
      debug('\tcreated checkpoints');
      debug('\t\t%s for source model %s', newSourceCp, sourceModel.modelName);
...
```

#### <a name="apidoc.element.loopback.Role.clearObservers"></a>[function <span class="apidocSignatureSpan">loopback.Role.</span>clearObservers (operation)](#apidoc.element.loopback.Role.clearObservers)
- description and source-code
```javascript
clearObservers = function (operation) {
  if (!(this._observers && this._observers[operation])) return;

  this._observers[operation].length = 0;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Role.count"></a>[function <span class="apidocSignatureSpan">loopback.Role.</span>count (where, cb)](#apidoc.element.loopback.Role.count)
- description and source-code
```javascript
count = function (where, cb) {
  throwNotAttached(this.modelName, 'count');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Role.create"></a>[function <span class="apidocSignatureSpan">loopback.Role.</span>create (data, callback)](#apidoc.element.loopback.Role.create)
- description and source-code
```javascript
create = function (data, callback) {
  throwNotAttached(this.modelName, 'create');
}
```
- example usage
```shell
...
 } else {
   var options = {};

   if (this.get) {
     options = this.get('remoting');
   }

   return (this._remotes = RemoteObjects.create(options));
 }
};

/*!
* Remove a route by reference.
*/
...
```

#### <a name="apidoc.element.loopback.Role.createChangeFilter"></a>[function <span class="apidocSignatureSpan">loopback.Role.</span>createChangeFilter (since, modelFilter)](#apidoc.element.loopback.Role.createChangeFilter)
- description and source-code
```javascript
createChangeFilter = function (since, modelFilter) {
  return {
    where: {
      checkpoint: {gte: since},
      modelName: this.modelName,
    },
  };
}
```
- example usage
```shell
...
  since = -1;
  filter = {};
}

var idName = this.dataSource.idName(this.modelName);
var Change = this.getChangeModel();
var model = this;
const changeFilter = this.createChangeFilter(since, filter);

filter = filter || {};
filter.fields = {};
filter.where = filter.where || {};
filter.fields[idName] = true;

// TODO(ritch) this whole thing could be optimized a bit more
...
```

#### <a name="apidoc.element.loopback.Role.createChangeStream"></a>[function <span class="apidocSignatureSpan">loopback.Role.</span>createChangeStream (options, cb)](#apidoc.element.loopback.Role.createChangeStream)
- description and source-code
```javascript
createChangeStream = function (options, cb) {
  if (typeof options === 'function') {
    cb = options;
    options = undefined;
  }

  var idName = this.getIdName();
  var Model = this;
  var changes = new PassThrough({objectMode: true});
  var writeable = true;

  changes.destroy = function() {
    changes.removeAllListeners('error');
    changes.removeAllListeners('end');
    writeable = false;
    changes = null;
  };

  changes.on('error', function() {
    writeable = false;
  });
  changes.on('end', function() {
    writeable = false;
  });

  process.nextTick(function() {
    cb(null, changes);
  });

  Model.observe('after save', createChangeHandler('save'));
  Model.observe('after delete', createChangeHandler('delete'));

  function createChangeHandler(type) {
    return function(ctx, next) {
      // since it might have set to null via destroy
      if (!changes) {
        return next();
      }

      var where = ctx.where;
      var data = ctx.instance || ctx.data;
      var whereId = where && where[idName];

      // the data includes the id
      // or the where includes the id
      var target;

      if (data && (data[idName] || data[idName] === 0)) {
        target = data[idName];
      } else if (where && (where[idName] || where[idName] === 0)) {
        target = where[idName];
      }

      var hasTarget = target === 0 || !!target;

      var change = {
        target: target,
        where: where,
        data: data,
      };

      switch (type) {
        case 'save':
          if (ctx.isNewInstance === undefined) {
            change.type = hasTarget ? 'update' : 'create';
          } else {
            change.type = ctx.isNewInstance ? 'create' : 'update';
          }

          break;
        case 'delete':
          change.type = 'remove';
          break;
      }

      // TODO(ritch) this is ugly... maybe a ReadableStream would be better
      if (writeable) {
        changes.write(change);
      }

      next();
    };
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Role.createOptionsFromRemotingContext"></a>[function <span class="apidocSignatureSpan">loopback.Role.</span>createOptionsFromRemotingContext (ctx)](#apidoc.element.loopback.Role.createOptionsFromRemotingContext)
- description and source-code
```javascript
createOptionsFromRemotingContext = function (ctx) {
  return {
    accessToken: ctx.req.accessToken,
  };
}
```
- example usage
```shell
...
  var EMPTY_OPTIONS = {};
  var ModelCtor = ctx.method && ctx.method.ctor;
  if (!ModelCtor)
    return EMPTY_OPTIONS;
  if (typeof ModelCtor.createOptionsFromRemotingContext !== 'function')
    return EMPTY_OPTIONS;
  debug('createOptionsFromRemotingContext for %s', ctx.method.stringName);
  return ModelCtor.createOptionsFromRemotingContext(ctx);
}

/**
 * Disable remote invocation for the method with the given name.
 *
 * @param {String} name The name of the method.
 * @param {Boolean} isStatic Is the method static (eg. 'MyModel.myMethod')? Pass
...
```

#### <a name="apidoc.element.loopback.Role.createUpdates"></a>[function <span class="apidocSignatureSpan">loopback.Role.</span>createUpdates (deltas, cb)](#apidoc.element.loopback.Role.createUpdates)
- description and source-code
```javascript
createUpdates = function (deltas, cb) {
  var Change = this.getChangeModel();
  var updates = [];
  var Model = this;
  var tasks = [];

  deltas.forEach(function(change) {
    change = new Change(change);
    var type = change.type();
    var update = {type: type, change: change};
    switch (type) {
      case Change.CREATE:
      case Change.UPDATE:
        tasks.push(function(cb) {
          Model.findById(change.modelId, function(err, inst) {
            if (err) return cb(err);
            if (!inst) {
              return cb &&
                cb(new Error(g.f('Missing data for change: %s', change.modelId)));
            }
            if (inst.toObject) {
              update.data = inst.toObject();
            } else {
              update.data = inst;
            }
            updates.push(update);
            cb();
          });
        });
        break;
      case Change.DELETE:
        updates.push(update);
        break;
    }
  });

  async.parallel(tasks, function(err) {
    if (err) return cb(err);
    cb(null, updates);
  });
}
```
- example usage
```shell
...

  if (diff && diff.deltas && diff.deltas.length) {
    debug('\tbuilding a list of updates');
    utils.uploadInChunks(
      diff.deltas,
      replicationChunkSize,
      function(smallArray, chunkCallback) {
        return sourceModel.createUpdates(smallArray, chunkCallback);
      },
      cb);
  } else {
    // nothing to replicate
    done();
  }
}
...
```

#### <a name="apidoc.element.loopback.Role.currentCheckpoint"></a>[function <span class="apidocSignatureSpan">loopback.Role.</span>currentCheckpoint (cb)](#apidoc.element.loopback.Role.currentCheckpoint)
- description and source-code
```javascript
currentCheckpoint = function (cb) {
  var Checkpoint = this.getChangeModel().getCheckpointModel();
  Checkpoint.current(cb);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Role.defineProperty"></a>[function <span class="apidocSignatureSpan">loopback.Role.</span>defineProperty (prop, params)](#apidoc.element.loopback.Role.defineProperty)
- description and source-code
```javascript
defineProperty = function (prop, params) {
  if (this.dataSource) {
    this.dataSource.defineProperty(this.modelName, prop, params);
  } else {
    this.modelBuilder.defineProperty(this.modelName, prop, params);
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Role.deleteAll"></a>[function <span class="apidocSignatureSpan">loopback.Role.</span>deleteAll (where, cb)](#apidoc.element.loopback.Role.deleteAll)
- description and source-code
```javascript
function destroyAll(where, cb) {
  throwNotAttached(this.modelName, 'destroyAll');
}
```
- example usage
```shell
...
  Model.modelName, id);
debug('\tExpected revision: %s', change.rev);
debug('\tActual revision:   %s', rev);
conflicts.push(change);
return Change.rectifyModelChanges(Model.modelName, [id], cb);
    }

    Model.deleteAll(current.toObject(), options, function(err, result) {
if (err) return cb(err);

var count = result && result.count;
switch (count) {
  case 1:
    // The happy path, exactly one record was updated
    return cb();
...
```

#### <a name="apidoc.element.loopback.Role.deleteById"></a>[function <span class="apidocSignatureSpan">loopback.Role.</span>deleteById (id, cb)](#apidoc.element.loopback.Role.deleteById)
- description and source-code
```javascript
function deleteById(id, cb) {
  throwNotAttached(this.modelName, 'deleteById');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Role.destroyAll"></a>[function <span class="apidocSignatureSpan">loopback.Role.</span>destroyAll (where, cb)](#apidoc.element.loopback.Role.destroyAll)
- description and source-code
```javascript
function destroyAll(where, cb) {
  throwNotAttached(this.modelName, 'destroyAll');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Role.destroyById"></a>[function <span class="apidocSignatureSpan">loopback.Role.</span>destroyById (id, cb)](#apidoc.element.loopback.Role.destroyById)
- description and source-code
```javascript
function deleteById(id, cb) {
  throwNotAttached(this.modelName, 'deleteById');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Role.diff"></a>[function <span class="apidocSignatureSpan">loopback.Role.</span>diff (since, remoteChanges, callback)](#apidoc.element.loopback.Role.diff)
- description and source-code
```javascript
diff = function (since, remoteChanges, callback) {
  var Change = this.getChangeModel();
  Change.diff(this.modelName, since, remoteChanges, callback);
}
```
- example usage
```shell
...
    },
  });
};

/**
 * Get a set of deltas and conflicts since the given checkpoint.
 *
 * See [Change.diff()](#change-diff) for details.
 *
 * @param  {Number}  since  Find deltas since this checkpoint.
 * @param  {Array}  remoteChanges  An array of change objects.
 * @callback {Function} callback Callback function called with '(err, result)' arguments.  Required.
 * @param {Error} err Error object; see [Error object](http://loopback.io/doc/en/lb2/Error-object.html).
 * @param {Object} result Object with 'deltas' and 'conflicts' properties; see [Change.diff()](#change-diff) for details.
 */
...
```

#### <a name="apidoc.element.loopback.Role.disableRemoteMethod"></a>[function <span class="apidocSignatureSpan">loopback.Role.</span>disableRemoteMethod (name, isStatic)](#apidoc.element.loopback.Role.disableRemoteMethod)
- description and source-code
```javascript
disableRemoteMethod = function (name, isStatic) {
  deprecated('Model.disableRemoteMethod is deprecated. ' +
    'Use Model.disableRemoteMethodByName instead.');
  var key = this.sharedClass.getKeyFromMethodNameAndTarget(name, isStatic);
  this.sharedClass.disableMethodByName(key);
  this.emit('remoteMethodDisabled', this.sharedClass, key);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Role.disableRemoteMethodByName"></a>[function <span class="apidocSignatureSpan">loopback.Role.</span>disableRemoteMethodByName (name)](#apidoc.element.loopback.Role.disableRemoteMethodByName)
- description and source-code
```javascript
disableRemoteMethodByName = function (name) {
  this.sharedClass.disableMethodByName(name);
  this.emit('remoteMethodDisabled', this.sharedClass, name);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Role.emit"></a>[function <span class="apidocSignatureSpan">loopback.Role.</span>emit ()](#apidoc.element.loopback.Role.emit)
- description and source-code
```javascript
emit = function () { [native code] }
```
- example usage
```shell
...
    return new Model(data);
  });
  this.remotes().addClass(Model.sharedClass);
  if (Model.settings.trackChanges && Model.Change) {
    this.remotes().addClass(Model.Change.sharedClass);
  }
  clearHandlerCache(this);
  this.emit('modelRemoted', Model.sharedClass);
}

var self = this;
Model.on('remoteMethodDisabled', function(model, methodName) {
  self.emit('remoteMethodDisabled', model, methodName);
});
Model.on('remoteMethodAdded', function(model) {
...
```

#### <a name="apidoc.element.loopback.Role.enableChangeTracking"></a>[function <span class="apidocSignatureSpan">loopback.Role.</span>enableChangeTracking ()](#apidoc.element.loopback.Role.enableChangeTracking)
- description and source-code
```javascript
enableChangeTracking = function () {
  var Model = this;
  var Change = this.Change || this._defineChangeModel();
  var cleanupInterval = Model.settings.changeCleanupInterval || 30000;

  assert(this.dataSource, 'Cannot enableChangeTracking(): ' + this.modelName +
    ' is not attached to a dataSource');

  var idName = this.getIdName();
  var idProp = this.definition.properties[idName];
  var idType = idProp && idProp.type;
  var idDefn = idProp && idProp.defaultFn;
  if (idType !== String || !(idDefn === 'uuid' || idDefn === 'guid')) {
    deprecated('The model ' + this.modelName + ' is tracking changes, ' +
      'which requires a string id with GUID/UUID default value.');
  }

  Model.observe('after save', rectifyOnSave);

  Model.observe('after delete', rectifyOnDelete);

  // Only run if the run time is server
  // Can switch off cleanup by setting the interval to -1
  if (runtime.isServer && cleanupInterval > 0) {
    // initial cleanup
    cleanup();

    // cleanup
    setInterval(cleanup, cleanupInterval);
  }

  function cleanup() {
    Model.rectifyAllChanges(function(err) {
      if (err) {
        Model.handleChangeError(err, 'cleanup');
      }
    });
  }
}
```
- example usage
```shell
...

  var PersistedModel = this;

  // enable change tracking (usually for replication)
  if (this.settings.trackChanges) {
    PersistedModel._defineChangeModel();
    PersistedModel.once('dataSourceAttached', function() {
      PersistedModel.enableChangeTracking();
    });
  } else if (this.settings.enableRemoteReplication) {
    PersistedModel._defineChangeModel();
  }

  PersistedModel.setupRemoting();
};
...
```

#### <a name="apidoc.element.loopback.Role.eventNames"></a>[function <span class="apidocSignatureSpan">loopback.Role.</span>eventNames ()](#apidoc.element.loopback.Role.eventNames)
- description and source-code
```javascript
eventNames = function () { [native code] }
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Role.exists"></a>[function <span class="apidocSignatureSpan">loopback.Role.</span>exists (id, cb)](#apidoc.element.loopback.Role.exists)
- description and source-code
```javascript
function exists(id, cb) {
  throwNotAttached(this.modelName, 'exists');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Role.extend"></a>[function <span class="apidocSignatureSpan">loopback.Role.</span>extend (className, subclassProperties, subclassSettings)](#apidoc.element.loopback.Role.extend)
- description and source-code
```javascript
extend = function (className, subclassProperties, subclassSettings) {
  var properties = ModelClass.definition.properties;
  var settings = ModelClass.definition.settings;

  subclassProperties = subclassProperties || {};
  subclassSettings = subclassSettings || {};

  // Check if subclass redefines the ids
  var idFound = false;
  for (var k in subclassProperties) {
    if (subclassProperties[k] && subclassProperties[k].id) {
      idFound = true;
      break;
    }
  }

  // Merging the properties
  var keys = Object.keys(properties);
  for (var i = 0, n = keys.length; i < n; i++) {
    var key = keys[i];

    if (idFound && properties[key].id) {
      // don't inherit id properties
      continue;
    }
    if (subclassProperties[key] === undefined) {
      var baseProp = properties[key];
      var basePropCopy = baseProp;
      if (baseProp && typeof baseProp === 'object') {
        // Deep clone the base prop
        basePropCopy = mergeSettings(null, baseProp);
      }
      subclassProperties[key] = basePropCopy;
    }
  }

  // Merge the settings
  var originalSubclassSettings = subclassSettings;
  subclassSettings = mergeSettings(settings, subclassSettings);

  // Ensure 'base' is not inherited. Note we don't have to delete 'super'
  // as that is removed from settings by modelBuilder.define and thus
  // it is never inherited
  if (!originalSubclassSettings.base) {
    subclassSettings.base = ModelClass;
  }

  // Define the subclass
  var subClass = modelBuilder.define(className, subclassProperties, subclassSettings, ModelClass);

  // Calling the setup function
  if (typeof subClass.setup === 'function') {
    subClass.setup.call(subClass);
  }

  return subClass;
}
```
- example usage
```shell
...
* The base class for **all models**.
*
* **Inheriting from 'Model'**
*
* '''js
* var properties = {...};
* var options = {...};
* var MyModel = loopback.Model.extend('MyModel', properties, options);
* '''
*
* **Options**
*
*  - 'trackChanges' - If true, changes to the model will be tracked. **Required
* for replication.**
*
...
```

#### <a name="apidoc.element.loopback.Role.find"></a>[function <span class="apidocSignatureSpan">loopback.Role.</span>find (filter, cb)](#apidoc.element.loopback.Role.find)
- description and source-code
```javascript
function find(filter, cb) {
  throwNotAttached(this.modelName, 'find');
}
```
- example usage
```shell
...

filter = filter || {};
filter.fields = {};
filter.where = filter.where || {};
filter.fields[idName] = true;

// TODO(ritch) this whole thing could be optimized a bit more
Change.find(changeFilter, function(err, changes) {
  if (err) return callback(err);
  if (!Array.isArray(changes) || changes.length === 0) return callback(null, []);
  var ids = changes.map(function(change) {
    return change.getModelId();
  });
  filter.where[idName] = {inq: ids};
  model.find(filter, function(err, models) {
...
```

#### <a name="apidoc.element.loopback.Role.findById"></a>[function <span class="apidocSignatureSpan">loopback.Role.</span>findById (id, filter, cb)](#apidoc.element.loopback.Role.findById)
- description and source-code
```javascript
function findById(id, filter, cb) {
  throwNotAttached(this.modelName, 'findById');
}
```
- example usage
```shell
...
  var model = new ModelCtor(data);
  model.id = id;
  fn(null, model);
} else if (data) {
  fn(null, new ModelCtor(data));
} else if (id) {
  var filter = {};
  ModelCtor.findById(id, filter, options, function(err, model) {
    if (err) {
      fn(err);
    } else if (model) {
      fn(null, model);
    } else {
      err = new Error(g.f('could not find a model with apidoc.element.loopback.Role.findById %s', id));
      err.statusCode = 404;
...
```

#### <a name="apidoc.element.loopback.Role.findLastChange"></a>[function <span class="apidocSignatureSpan">loopback.Role.</span>findLastChange (id, cb)](#apidoc.element.loopback.Role.findLastChange)
- description and source-code
```javascript
findLastChange = function (id, cb) {
  var Change = this.getChangeModel();
  Change.findOne({where: {modelId: id}}, cb);
}
```
- example usage
```shell
...
PersistedModel.findLastChange = function(id, cb) {
  var Change = this.getChangeModel();
  Change.findOne({where: {modelId: id}}, cb);
};

PersistedModel.updateLastChange = function(id, data, cb) {
  var self = this;
  this.findLastChange(id, function(err, inst) {
    if (err) return cb(err);
    if (!inst) {
      err = new Error(g.f('No change record found for %s with id %s',
        self.modelName, id));
      err.statusCode = 404;
      return cb(err);
    }
...
```

#### <a name="apidoc.element.loopback.Role.findOne"></a>[function <span class="apidocSignatureSpan">loopback.Role.</span>findOne (filter, cb)](#apidoc.element.loopback.Role.findOne)
- description and source-code
```javascript
function findOne(filter, cb) {
  throwNotAttached(this.modelName, 'findOne');
}
```
- example usage
```shell
...
PersistedModel.rectifyChange = function(id, callback) {
  var Change = this.getChangeModel();
  Change.rectifyModelChanges(this.modelName, [id], callback);
};

PersistedModel.findLastChange = function(id, cb) {
  var Change = this.getChangeModel();
  Change.findOne({where: {modelId: id}}, cb);
};

PersistedModel.updateLastChange = function(id, data, cb) {
  var self = this;
  this.findLastChange(id, function(err, inst) {
    if (err) return cb(err);
    if (!inst) {
...
```

#### <a name="apidoc.element.loopback.Role.findOrCreate"></a>[function <span class="apidocSignatureSpan">loopback.Role.</span>findOrCreate (query, data, callback)](#apidoc.element.loopback.Role.findOrCreate)
- description and source-code
```javascript
function findOrCreate(query, data, callback) {
  throwNotAttached(this.modelName, 'findOrCreate');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Role.forEachProperty"></a>[function <span class="apidocSignatureSpan">loopback.Role.</span>forEachProperty (cb)](#apidoc.element.loopback.Role.forEachProperty)
- description and source-code
```javascript
forEachProperty = function (cb) {
  var props = ModelClass.definition.properties;
  var keys = Object.keys(props);
  for (var i = 0, n = keys.length; i < n; i++) {
    cb(keys[i], props[keys[i]]);
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Role.getApp"></a>[function <span class="apidocSignatureSpan">loopback.Role.</span>getApp (callback)](#apidoc.element.loopback.Role.getApp)
- description and source-code
```javascript
getApp = function (callback) {
  var self = this;
  self._runWhenAttachedToApp(function(app) {
    assert(self.app);
    assert.equal(app, self.app);
    callback(null, app);
  });
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Role.getChangeModel"></a>[function <span class="apidocSignatureSpan">loopback.Role.</span>getChangeModel ()](#apidoc.element.loopback.Role.getChangeModel)
- description and source-code
```javascript
getChangeModel = function () {
  var changeModel = this.Change;
  var isSetup = changeModel && changeModel.dataSource;

  assert(isSetup, 'Cannot get a setup Change model for ' + this.modelName);

  return changeModel;
}
```
- example usage
```shell
...
 * @param  {Array}  remoteChanges  An array of change objects.
 * @callback {Function} callback Callback function called with '(err, result)' arguments.  Required.
 * @param {Error} err Error object; see [Error object](http://loopback.io/doc/en/lb2/Error-object.html).
 * @param {Object} result Object with 'deltas' and 'conflicts' properties; see [Change.diff()](#change-diff) for details.
 */

PersistedModel.diff = function(since, remoteChanges, callback) {
  var Change = this.getChangeModel();
  Change.diff(this.modelName, since, remoteChanges, callback);
};

/**
 * Get the changes to a model since the specified checkpoint. Provide a filter object
 * to reduce the number of results returned.
 * @param  {Number}   since    Return only changes since this checkpoint.
...
```

#### <a name="apidoc.element.loopback.Role.getDataSource"></a>[function <span class="apidocSignatureSpan">loopback.Role.</span>getDataSource ()](#apidoc.element.loopback.Role.getDataSource)
- description and source-code
```javascript
getDataSource = function () {
  return this.dataSource;
}
```
- example usage
```shell
...
 * connector that defines it.  Otherwise, uses the default lookup.
 * Override this method to handle complex IDs.
 *
 * @param {*} val The 'id' value. Will be converted to the type that the 'id' property specifies.
 */

PersistedModel.prototype.setId = function(val) {
  var ds = this.getDataSource();
  this[this.getIdName()] = val;
};

/**
 * Get the 'id' value for the 'PersistedModel'.
 *
 * @returns {*} The 'id' value
...
```

#### <a name="apidoc.element.loopback.Role.getIdName"></a>[function <span class="apidocSignatureSpan">loopback.Role.</span>getIdName ()](#apidoc.element.loopback.Role.getIdName)
- description and source-code
```javascript
getIdName = function () {
  var Model = this;
  var ds = Model.getDataSource();

  if (ds.idName) {
    return ds.idName(Model.modelName);
  } else {
    return 'id';
  }
}
```
- example usage
```shell
...
 * Override this method to handle complex IDs.
 *
 * @param {*} val The 'id' value. Will be converted to the type that the 'id' property specifies.
 */

PersistedModel.prototype.setId = function(val) {
  var ds = this.getDataSource();
  this[this.getIdName()] = val;
};

/**
 * Get the 'id' value for the 'PersistedModel'.
 *
 * @returns {*} The 'id' value
 */
...
```

#### <a name="apidoc.element.loopback.Role.getMaxListeners"></a>[function <span class="apidocSignatureSpan">loopback.Role.</span>getMaxListeners ()](#apidoc.element.loopback.Role.getMaxListeners)
- description and source-code
```javascript
getMaxListeners = function () { [native code] }
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Role.getPropertyType"></a>[function <span class="apidocSignatureSpan">loopback.Role.</span>getPropertyType (propName)](#apidoc.element.loopback.Role.getPropertyType)
- description and source-code
```javascript
getPropertyType = function (propName) {
  var prop = this.definition.properties[propName];
  if (!prop) {
    // The property is not part of the definition
    return null;
  }
  if (!prop.type) {
    throw new Error(g.f('Type not defined for property %s.%s', this.modelName, propName));
    // return null;
  }
  return prop.type.name;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Role.getRoles"></a>[function <span class="apidocSignatureSpan">loopback.Role.</span>getRoles (context, options, callback)](#apidoc.element.loopback.Role.getRoles)
- description and source-code
```javascript
getRoles = function (context, options, callback) {
  if (!callback) {
    if (typeof options === 'function') {
      callback = options;
      options = {};
    } else {
      callback = utils.createPromiseCallback();
    }
  }
  if (!options) options = {};

  context.registry = this.registry;
  if (!(context instanceof AccessContext)) {
    context = new AccessContext(context);
  }
  var roles = [];
  this.resolveRelatedModels();

  var addRole = function(role) {
    if (role && roles.indexOf(role) === -1) {
      roles.push(role);
    }
  };

  var self = this;
  // Check against the smart roles
  var inRoleTasks = [];
  Object.keys(Role.resolvers).forEach(function(role) {
    inRoleTasks.push(function(done) {
      self.isInRole(role, context, function(err, inRole) {
        if (debug.enabled) {
          debug('In role %j: %j', role, inRole);
        }
        if (!err && inRole) {
          addRole(role);
          done();
        } else {
          done(err, null);
        }
      });
    });
  });

  var roleMappingModel = this.roleMappingModel;
  context.principals.forEach(function(p) {
    // Check against the role mappings
    var principalType = p.type || undefined;
    var principalId = p.id == null ? undefined : p.id;

    if (typeof principalId !== 'string' && principalId != null) {
      principalId = principalId.toString();
    }

    // Add the role itself
    if (principalType === RoleMapping.ROLE && principalId) {
      addRole(principalId);
    }

    if (principalType && principalId) {
      // Please find() treat undefined matches all values
      inRoleTasks.push(function(done) {
        var filter = {where: {principalType: principalType, principalId: principalId}};
        if (options.returnOnlyRoleNames === true) {
          filter.include = ['role'];
        }
        roleMappingModel.find(filter, function(err, mappings) {
          debug('Role mappings found: %s %j', err, mappings);
          if (err) {
            if (done) done(err);
            return;
          }
          mappings.forEach(function(m) {
            var role;
            if (options.returnOnlyRoleNames === true) {
              role = m.toJSON().role.name;
            } else {
              role = m.roleId;
            }
            addRole(role);
          });
          if (done) done();
        });
      });
    }
  });

  async.parallel(inRoleTasks, function(err, results) {
    debug('getRoles() returns: %j %j', err, roles);
    if (callback) callback(err, roles);
  });
  return callback.promise;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Role.getSourceId"></a>[function <span class="apidocSignatureSpan">loopback.Role.</span>getSourceId (cb)](#apidoc.element.loopback.Role.getSourceId)
- description and source-code
```javascript
getSourceId = function (cb) {
  var dataSource = this.dataSource;
  if (!dataSource) {
    this.once('dataSourceAttached', this.getSourceId.bind(this, cb));
  }
  assert(
    dataSource.connector.name,
    'Model.getSourceId: cannot get id without dataSource.connector.name'
  );
  var id = [dataSource.connector.name, this.modelName].join('-');
  cb(null, id);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Role.handleChangeError"></a>[function <span class="apidocSignatureSpan">loopback.Role.</span>handleChangeError (err, operationName)](#apidoc.element.loopback.Role.handleChangeError)
- description and source-code
```javascript
handleChangeError = function (err, operationName) {
  if (!err) return;
  this.emit('error', err, operationName);
}
```
- example usage
```shell
...
    // cleanup
    setInterval(cleanup, cleanupInterval);
  }

  function cleanup() {
    Model.rectifyAllChanges(function(err) {
      if (err) {
        Model.handleChangeError(err, 'cleanup');
      }
    });
  }
};

function rectifyOnSave(ctx, next) {
  var instance = ctx.instance || ctx.currentInstance;
...
```

#### <a name="apidoc.element.loopback.Role.hasManyRemoting"></a>[function <span class="apidocSignatureSpan">loopback.Role.</span>hasManyRemoting (relationName, relation, define)](#apidoc.element.loopback.Role.hasManyRemoting)
- description and source-code
```javascript
hasManyRemoting = function (relationName, relation, define) {
  var pathName = (relation.options.http && relation.options.http.path) || relationName;
  var toModelName = relation.modelTo.modelName;

  var findByIdFunc = this.prototype['__findById__' + relationName];
  define('__findById__' + relationName, {
    isStatic: false,
    http: {verb: 'get', path: '/' + pathName + '/:fk'},
    accepts: [
      {
        arg: 'fk', type: 'any',
        description: format('Foreign key for %s', relationName),
        required: true,
        http: {source: 'path'},
      },
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Find a related item by id for %s.', relationName),
    accessType: 'READ',
    returns: {arg: 'result', type: toModelName, root: true},
    rest: {after: convertNullToNotFoundError.bind(null, toModelName)},
  }, findByIdFunc);

  var destroyByIdFunc = this.prototype['__destroyById__' + relationName];
  define('__destroyById__' + relationName, {
    isStatic: false,
    http: {verb: 'delete', path: '/' + pathName + '/:fk'},
    accepts: [
      {
        arg: 'fk', type: 'any',
        description: format('Foreign key for %s', relationName),
        required: true,
        http: {source: 'path'},
      },
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Delete a related item by id for %s.', relationName),
    accessType: 'WRITE',
    returns: [],
  }, destroyByIdFunc);

  var updateByIdFunc = this.prototype['__updateById__' + relationName];
  define('__updateById__' + relationName, {
    isStatic: false,
    http: {verb: 'put', path: '/' + pathName + '/:fk'},
    accepts: [
      {arg: 'fk', type: 'any',
        description: format('Foreign key for %s', relationName),
        required: true,
        http: {source: 'path'}},
      {arg: 'data', type: 'object', model: toModelName, http: {source: 'body'}},
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Update a related item by id for %s.', relationName),
    accessType: 'WRITE',
    returns: {arg: 'result', type: toModelName, root: true},
  }, updateByIdFunc);

  if (relation.modelThrough || relation.type === 'referencesMany') {
    var modelThrough = relation.modelThrough || relation.modelTo;

    var accepts = [];
    if (relation.type === 'hasMany' && relation.modelThrough) {
      // Restrict: only hasManyThrough relation can have additional properties
      accepts.push({
        arg: 'data', type: 'object', model: modelThrough.modelName,
        http: {source: 'body'},
      });
    }

    var addFunc = this.prototype['__link__' + relationName];
    define('__link__' + relationName, {
      isStatic: false,
      http: {verb: 'put', path: '/' + pathName + '/rel/:fk'},
      accepts: [{arg: 'fk', type: 'any',
        description: format('Foreign key for %s', relationName),
        required: true,
        http: {source: 'path'}},
      ].concat(accepts).concat([
        {arg: 'options', type: 'object', http: 'optionsFromRequest'},
      ]),
      description: format('Add a related item by id for %s.', relationName),
      accessType: 'WRITE',
      returns: {arg: relationName, type: modelThrough.modelName, root: true},
    }, addFunc);

    var removeFunc = this.prototype['__unlink__' + relationName];
    define('__unlink__' + relationName, {
      isStatic: false,
      http: {verb: 'delete', path: '/' + pathName + '/rel/:fk'},
      accepts: [
        {
          arg: 'fk', type: 'any',
          description: format('Foreign key for %s', relationName),
          required: true,
          http: {source: 'path'},
        },
        {arg: 'options', type: 'object', http: 'optionsFromRequest'},
      ],
      description: format('Remove the %s relation to an item by id.', relationName),
      accessType: 'WRITE',
      returns: [],
    }, removeFunc);

    // FIXME: [rfeng] How to map a function with callback(err, true|false) to HEAD?
    // true --> 200 and false --> 404?
    var existsFunc = this.prototype['__exists__' + relatio ...
```
- example usage
```shell
...
    relation.type === 'embedsOne'
  ) {
    ModelCtor.hasOneRemoting(relationName, relation, define);
  } else if (
    relation.type === 'hasMany' ||
    relation.type === 'embedsMany' ||
    relation.type === 'referencesMany') {
    ModelCtor.hasManyRemoting(relationName, relation, define);
  }
}

// handle scopes
var scopes = ModelCtor.scopes || {};
for (var scopeName in scopes) {
  ModelCtor.scopeRemoting(scopeName, scopes[scopeName], define);
...
```

#### <a name="apidoc.element.loopback.Role.hasOneRemoting"></a>[function <span class="apidocSignatureSpan">loopback.Role.</span>hasOneRemoting (relationName, relation, define)](#apidoc.element.loopback.Role.hasOneRemoting)
- description and source-code
```javascript
hasOneRemoting = function (relationName, relation, define) {
  var pathName = (relation.options.http && relation.options.http.path) || relationName;
  var toModelName = relation.modelTo.modelName;

  define('__get__' + relationName, {
    isStatic: false,
    http: {verb: 'get', path: '/' + pathName},
    accepts: [
      {arg: 'refresh', type: 'boolean', http: {source: 'query'}},
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Fetches hasOne relation %s.', relationName),
    accessType: 'READ',
    returns: {arg: relationName, type: relation.modelTo.modelName, root: true},
    rest: {after: convertNullToNotFoundError.bind(null, toModelName)},
  });

  define('__create__' + relationName, {
    isStatic: false,
    http: {verb: 'post', path: '/' + pathName},
    accepts: [
      {
        arg: 'data', type: 'object', model: toModelName,
        http: {source: 'body'},
      },
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Creates a new instance in %s of this model.', relationName),
    accessType: 'WRITE',
    returns: {arg: 'data', type: toModelName, root: true},
  });

  define('__update__' + relationName, {
    isStatic: false,
    http: {verb: 'put', path: '/' + pathName},
    accepts: [
      {
        arg: 'data', type: 'object', model: toModelName,
        http: {source: 'body'},
      },
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Update %s of this model.', relationName),
    accessType: 'WRITE',
    returns: {arg: 'data', type: toModelName, root: true},
  });

  define('__destroy__' + relationName, {
    isStatic: false,
    http: {verb: 'delete', path: '/' + pathName},
    accepts: [
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Deletes %s of this model.', relationName),
    accessType: 'WRITE',
  });
}
```
- example usage
```shell
...
  var relation = relations[relationName];
  if (relation.type === 'belongsTo') {
    ModelCtor.belongsToRemoting(relationName, relation, define);
  } else if (
    relation.type === 'hasOne' ||
    relation.type === 'embedsOne'
  ) {
    ModelCtor.hasOneRemoting(relationName, relation, define);
  } else if (
    relation.type === 'hasMany' ||
    relation.type === 'embedsMany' ||
    relation.type === 'referencesMany') {
    ModelCtor.hasManyRemoting(relationName, relation, define);
  }
}
...
```

#### <a name="apidoc.element.loopback.Role.isAuthenticated"></a>[function <span class="apidocSignatureSpan">loopback.Role.</span>isAuthenticated (context, callback)](#apidoc.element.loopback.Role.isAuthenticated)
- description and source-code
```javascript
function isAuthenticated(context, callback) {
  if (!callback) callback = utils.createPromiseCallback();
  process.nextTick(function() {
    if (callback) callback(null, context.isAuthenticated());
  });
  return callback.promise;
}
```
- example usage
```shell
...
   debug('accessType %s', this.accessType);
   if (this.accessToken) {
     debug('accessToken:');
     debug('  id %j', this.accessToken.id);
     debug('  ttl %j', this.accessToken.ttl);
   }
   debug('getUserId() %s', this.getUserId());
   debug('isAuthenticated() %s', this.isAuthenticated());
 }
};

/**
* This class represents the abstract notion of a principal, which can be used
* to represent any entity, such as an individual, a corporation, and a login id
* @param {String} type The principal type
...
```

#### <a name="apidoc.element.loopback.Role.isHiddenProperty"></a>[function <span class="apidocSignatureSpan">loopback.Role.</span>isHiddenProperty (propertyName)](#apidoc.element.loopback.Role.isHiddenProperty)
- description and source-code
```javascript
isHiddenProperty = function (propertyName) {
  var Model = this;
  var settings = Model.definition && Model.definition.settings;
  var hiddenProperties = settings && (settings.hiddenProperties || settings.hidden);
  if (Array.isArray(hiddenProperties)) {
    // Cache the hidden properties as an object for quick lookup
    settings.hiddenProperties = {};
    for (var i = 0; i < hiddenProperties.length; i++) {
      settings.hiddenProperties[hiddenProperties[i]] = true;
    }
    hiddenProperties = settings.hiddenProperties;
  }
  if (hiddenProperties) {
    return hiddenProperties[propertyName];
  } else {
    return false;
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Role.isInRole"></a>[function <span class="apidocSignatureSpan">loopback.Role.</span>isInRole (role, context, callback)](#apidoc.element.loopback.Role.isInRole)
- description and source-code
```javascript
isInRole = function (role, context, callback) {
  context.registry = this.registry;
  if (!(context instanceof AccessContext)) {
    context = new AccessContext(context);
  }

  if (!callback) {
    callback = utils.createPromiseCallback();
    // historically, isInRole is returning the Role instance instead of true
    // we are preserving that behaviour for callback-based invocation,
    // but fixing it when invoked in Promise mode
    callback.promise = callback.promise.then(function(isInRole) {
      return !!isInRole;
    });
  }

  this.resolveRelatedModels();

  debug('isInRole(): %s', role);
  context.debug();

  var resolver = Role.resolvers[role];
  if (resolver) {
    debug('Custom resolver found for role %s', role);

    var promise = resolver(role, context, callback);
    if (promise && typeof promise.then === 'function') {
      promise.then(
        function(result) { callback(null, result); },
        callback
      );
    }
    return callback.promise;
  }

  if (context.principals.length === 0) {
    debug('isInRole() returns: false');
    process.nextTick(function() {
      if (callback) callback(null, false);
    });
    return callback.promise;
  }

  var inRole = context.principals.some(function(p) {
    var principalType = p.type || undefined;
    var principalId = p.id || undefined;

    // Check if it's the same role
    return principalType === RoleMapping.ROLE && principalId === role;
  });

  if (inRole) {
    debug('isInRole() returns: %j', inRole);
    process.nextTick(function() {
      if (callback) callback(null, true);
    });
    return callback.promise;
  }

  var roleMappingModel = this.roleMappingModel;
  this.findOne({where: {name: role}}, function(err, result) {
    if (err) {
      if (callback) callback(err);
      return;
    }
    if (!result) {
      if (callback) callback(null, false);
      return;
    }
    debug('Role found: %j', result);

    // Iterate through the list of principals
    async.some(context.principals, function(p, done) {
      var principalType = p.type || undefined;
      var principalId = p.id || undefined;
      var roleId = result.id.toString();
      var principalIdIsString = typeof principalId === 'string';

      if (principalId !== null && principalId !== undefined && !principalIdIsString) {
        principalId = principalId.toString();
      }

      if (principalType && principalId) {
        roleMappingModel.findOne({where: {roleId: roleId,
          principalType: principalType, principalId: principalId}},
          function(err, result) {
            debug('Role mapping found: %j', result);
            done(!err && result); // The only arg is the result
          });
      } else {
        process.nextTick(function() {
          done(false);
        });
      }
    }, function(inRole) {
      debug('isInRole() returns: %j', inRole);
      if (callback) callback(null, inRole);
    });
  });
  return callback.promise;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Role.isOwner"></a>[function <span class="apidocSignatureSpan">loopback.Role.</span>isOwner (modelClass, modelId, userId, principalType, options, callback)](#apidoc.element.loopback.Role.isOwner)
- description and source-code
```javascript
function isOwner(modelClass, modelId, userId, principalType, options, callback) {
  if (!callback && typeof options === 'function') {
    callback = options;
    options = {};
  } else if (!callback && typeof principalType === 'function') {
    callback = principalType;
    principalType = undefined;
    options = {};
  }
  principalType = principalType || Principal.USER;

  assert(modelClass, 'Model class is required');
  if (!callback) callback = utils.createPromiseCallback();

  debug('isOwner(): %s %s userId: %s principalType: %s',
    modelClass && modelClass.modelName, modelId, userId, principalType);

  // Return false if userId is missing
  if (!userId) {
    process.nextTick(function() {
      callback(null, false);
    });
    return callback.promise;
  }

  // Is the modelClass User or a subclass of User?
  if (isUserClass(modelClass)) {
    var userModelName = modelClass.modelName;
    // matching ids is enough if principalType is USER or matches given user model name
    if (principalType === Principal.USER || principalType === userModelName) {
      process.nextTick(function() {
        callback(null, matches(modelId, userId));
      });
    }
    return callback.promise;
  }

  modelClass.findById(modelId, options, function(err, inst) {
    if (err || !inst) {
      debug('Model not found for id %j', modelId);
      return callback(err, false);
    }
    debug('Model found: %j', inst);

    // Historically, for principalType USER, we were resolving isOwner()
    // as true if the model has "userId" or "owner" property matching
    // id of the current user (principalId), even though there was no
    // belongsTo relation set up.
    var ownerId = inst.userId || inst.owner;
    if (principalType === Principal.USER && ownerId && 'function' !== typeof ownerId) {
      return callback(null, matches(ownerId, userId));
    }

    // Try to follow belongsTo
    for (var r in modelClass.relations) {
      var rel = modelClass.relations[r];
      // relation should be belongsTo and target a User based class
      var belongsToUser = rel.type === 'belongsTo' && isUserClass(rel.modelTo);
      if (!belongsToUser) {
        continue;
      }
      // checking related user
      var userModelName = rel.modelTo.modelName;
      if (principalType === Principal.USER || principalType === userModelName) {
        debug('Checking relation %s to %s: %j', r, userModelName, rel);
        inst[r](processRelatedUser);
        return;
      }
    }
    debug('No matching belongsTo relation found for model %j - user %j principalType %j',
      modelId, userId, principalType);
    callback(null, false);

    function processRelatedUser(err, user) {
      if (!err && user) {
        debug('User found: %j', user.id);
        callback(null, matches(user.id, userId));
      } else {
        callback(err, false);
      }
    }
  });
  return callback.promise;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Role.isProtectedProperty"></a>[function <span class="apidocSignatureSpan">loopback.Role.</span>isProtectedProperty (propertyName)](#apidoc.element.loopback.Role.isProtectedProperty)
- description and source-code
```javascript
isProtectedProperty = function (propertyName) {
  var Model = this;
  var settings = Model.definition && Model.definition.settings;
  var protectedProperties = settings && (settings.protectedProperties || settings.protected);
  if (Array.isArray(protectedProperties)) {
    // Cache the protected properties as an object for quick lookup
    settings.protectedProperties = {};
    for (var i = 0; i < protectedProperties.length; i++) {
      settings.protectedProperties[protectedProperties[i]] = true;
    }
    protectedProperties = settings.protectedProperties;
  }
  if (protectedProperties) {
    return protectedProperties[propertyName];
  } else {
    return false;
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Role.listenerCount"></a>[function <span class="apidocSignatureSpan">loopback.Role.</span>listenerCount ()](#apidoc.element.loopback.Role.listenerCount)
- description and source-code
```javascript
listenerCount = function () { [native code] }
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Role.listeners"></a>[function <span class="apidocSignatureSpan">loopback.Role.</span>listeners ()](#apidoc.element.loopback.Role.listeners)
- description and source-code
```javascript
listeners = function () { [native code] }
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Role.mixin"></a>[function <span class="apidocSignatureSpan">loopback.Role.</span>mixin (anotherClass, options)](#apidoc.element.loopback.Role.mixin)
- description and source-code
```javascript
mixin = function (anotherClass, options) {
  if (typeof anotherClass === 'string') {
    this.modelBuilder.mixins.applyMixin(this, anotherClass, options);
  } else {
    if (anotherClass.prototype instanceof ModelBaseClass) {
      var props = anotherClass.definition.properties;
      for (var i in props) {
        if (this.definition.properties[i]) {
          continue;
        }
        this.defineProperty(i, props[i]);
      }
    }
    return jutil.mixin(this, anotherClass, options);
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Role.nestRemoting"></a>[function <span class="apidocSignatureSpan">loopback.Role.</span>nestRemoting (relationName, options, filterCallback)](#apidoc.element.loopback.Role.nestRemoting)
- description and source-code
```javascript
nestRemoting = function (relationName, options, filterCallback) {
  if (typeof options === 'function' && !filterCallback) {
    filterCallback = options;
    options = {};
  }
  options = options || {};

  var regExp = /^__([^_]+)__([^_]+)$/;
  var relation = this.relations[relationName];
  if (relation && relation.modelTo && relation.modelTo.sharedClass) {
    var self = this;
    var sharedClass = this.sharedClass;
    var sharedToClass = relation.modelTo.sharedClass;
    var toModelName = relation.modelTo.modelName;

    var pathName = options.pathName || relation.options.path || relationName;
    var paramName = options.paramName || 'nk';

    var http = [].concat(sharedToClass.http || [])[0];
    var httpPath, acceptArgs;

    if (relation.multiple) {
      httpPath = pathName + '/:' + paramName;
      acceptArgs = [
        {
          arg: paramName, type: 'any', http: {source: 'path'},
          description: format('Foreign key for %s.',  relation.name),
          required: true,
        },
      ];
    } else {
      httpPath = pathName;
      acceptArgs = [];
    }

    if (httpPath[0] !== '/') {
      httpPath = '/' + httpPath;
    }

    // A method should return the method name to use, if it is to be
    // included as a nested method - a falsy return value will skip.
    var filter = filterCallback || options.filterMethod || function(method, relation) {
      var matches = method.name.match(regExp);
      if (matches) {
        return '__' + matches[1] + '__' + relation.name + '__' + matches[2];
      }
    };

    sharedToClass.methods().forEach(function(method) {
      var methodName;
      if (!method.isStatic && (methodName = filter(method, relation))) {
        var prefix = relation.multiple ? '__findById__' : '__get__';
        var getterName = options.getterName || (prefix + relationName);

        var getterFn = relation.modelFrom.prototype[getterName];
        if (typeof getterFn !== 'function') {
          throw new Error(g.f('Invalid remote method: '%s'', getterName));
        }

        var nestedFn = relation.modelTo.prototype[method.name];
        if (typeof nestedFn !== 'function') {
          throw new Error(g.f('Invalid remote method: '%s'', method.name));
        }

        var opts = {};

        opts.accepts = acceptArgs.concat(method.accepts || []);
        opts.returns = [].concat(method.returns || []);
        opts.description = method.description;
        opts.accessType = method.accessType;
        opts.rest = extend({}, method.rest || {});
        opts.rest.delegateTo = method;

        opts.http = [];
        var routes = [].concat(method.http || []);
        routes.forEach(function(route) {
          if (route.path) {
            var copy = extend({}, route);
            copy.path = httpPath + route.path;
            opts.http.push(copy);
          }
        });

        if (relation.multiple) {
          sharedClass.defineMethod(methodName, opts, function(fkId) {
            var args = Array.prototype.slice.call(arguments, 1);
            var last = args[args.length - 1];
            var cb = typeof last === 'function' ? last : null;
            this[getterName](fkId, function(err, inst) {
              if (err && cb) return cb(err);
              if (inst instanceof relation.modelTo) {
                try {
                  nestedFn.apply(inst, args);
                } catch (err) {
                  if (cb) return cb(err);
                }
              } else if (cb) {
                cb(err, null);
              }
            });
          }, method.isStatic);
        } else {
          sharedClass.defineMethod(methodName, opts, function() {
            var args = Array.prototype.slice.call(arguments);
            var last = args[args.length - 1];
            var cb = typeof last === 'function' ? last : null;
            this[getterName](function(err, inst) {
              if (err && cb) return cb(err);
              if (inst instanceof relation.modelTo) {
                try {
                  nestedFn.apply(inst, args);
                } catch (err) {
                  if (cb) return ...
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Role.notifyObserversAround"></a>[function <span class="apidocSignatureSpan">loopback.Role.</span>notifyObserversAround (operation, context, fn, callback)](#apidoc.element.loopback.Role.notifyObserversAround)
- description and source-code
```javascript
notifyObserversAround = function (operation, context, fn, callback) {
  var self = this;
  context = context || {};
  // Add callback to the context object so that an observer can skip other
  // ones by calling the callback function directly and not calling next
  if (context.end === undefined) {
    context.end = callback;
  }
  // First notify before observers
  return self.notifyObserversOf('before ' + operation, context,
    function(err, context) {
      if (err) return callback(err);

      function cbForWork(err) {
        var args = [].slice.call(arguments, 0);
        if (err) return callback.apply(null, args);
        // Find the list of params from the callback in addition to err
        var returnedArgs = args.slice(1);
        // Set up the array of results
        context.results = returnedArgs;
        // Notify after observers
        self.notifyObserversOf('after ' + operation, context,
          function(err, context) {
            if (err) return callback(err, context);
            var results = returnedArgs;
            if (context && Array.isArray(context.results)) {
              // Pickup the results from context
              results = context.results;
            }
            // Build the list of params for final callback
            var args = [err].concat(results);
            callback.apply(null, args);
          });
      }

      if (fn.length === 1) {
        // fn(done)
        fn(cbForWork);
      } else {
        // fn(context, done)
        fn(context, cbForWork);
      }
    });
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Role.notifyObserversOf"></a>[function <span class="apidocSignatureSpan">loopback.Role.</span>notifyObserversOf (operation, context, callback)](#apidoc.element.loopback.Role.notifyObserversOf)
- description and source-code
```javascript
notifyObserversOf = function (operation, context, callback) {
  var self = this;
  if (!callback) callback = utils.createPromiseCallback();

  function createNotifier(op) {
    return function(ctx, done) {
      if (typeof ctx === 'function' && done === undefined) {
        done = ctx;
        ctx = context;
      }
      self.notifyObserversOf(op, context, done);
    };
  }

  if (Array.isArray(operation)) {
    var tasks = [];
    for (var i = 0, n = operation.length; i < n; i++) {
      tasks.push(createNotifier(operation[i]));
    }
    return async.waterfall(tasks, callback);
  }

  var observers = this._observers && this._observers[operation];

  this._notifyBaseObservers(operation, context, function doNotify(err) {
    if (err) return callback(err, context);
    if (!observers || !observers.length) return callback(null, context);

    async.eachSeries(
      observers,
      function notifySingleObserver(fn, next) {
        var retval = fn(context, next);
        if (retval && typeof retval.then === 'function') {
          retval.then(
            function() { next(); return null; },
            next // error handler
          );
        }
      },
      function(err) { callback(err, context); }
    );
  });
  return callback.promise;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Role.observe"></a>[function <span class="apidocSignatureSpan">loopback.Role.</span>observe (operation, listener)](#apidoc.element.loopback.Role.observe)
- description and source-code
```javascript
observe = function (operation, listener) {
  this._observers = this._observers || {};
  if (!this._observers[operation]) {
    this._observers[operation] = [];
  }

  this._observers[operation].push(listener);
}
```
- example usage
```shell
...
var idType = idProp && idProp.type;
var idDefn = idProp && idProp.defaultFn;
if (idType !== String || !(idDefn === 'uuid' || idDefn === 'guid')) {
  deprecated('The model ' + this.modelName + ' is tracking changes, ' +
    'which requires a string id with GUID/UUID default value.');
}

Model.observe('after save', rectifyOnSave);

Model.observe('after delete', rectifyOnDelete);

// Only run if the run time is server
// Can switch off cleanup by setting the interval to -1
if (runtime.isServer && cleanupInterval > 0) {
  // initial cleanup
...
```

#### <a name="apidoc.element.loopback.Role.on"></a>[function <span class="apidocSignatureSpan">loopback.Role.</span>on ()](#apidoc.element.loopback.Role.on)
- description and source-code
```javascript
on = function () { [native code] }
```
- example usage
```shell
...
    this.remotes().addClass(Model.Change.sharedClass);
  }
  clearHandlerCache(this);
  this.emit('modelRemoted', Model.sharedClass);
}

var self = this;
Model.on('remoteMethodDisabled', function(model, methodName) {
  self.emit('remoteMethodDisabled', model, methodName);
});
Model.on('remoteMethodAdded', function(model) {
  self.emit('remoteMethodAdded', model);
});

Model.shared = isPublic;
...
```

#### <a name="apidoc.element.loopback.Role.once"></a>[function <span class="apidocSignatureSpan">loopback.Role.</span>once ()](#apidoc.element.loopback.Role.once)
- description and source-code
```javascript
once = function () { [native code] }
```
- example usage
```shell
...
    remotes.afterError(className + '.' + name, fn);
  });
};

ModelCtor._runWhenAttachedToApp = function(fn) {
  if (this.app) return fn(this.app);
  var self = this;
  self.once('attached', function() {
    fn(self.app);
  });
};

if ('injectOptionsFromRemoteContext' in options) {
  console.warn(g.f(
    '%s is using model setting %s which is no longer available.',
...
```

#### <a name="apidoc.element.loopback.Role.patchOrCreate"></a>[function <span class="apidocSignatureSpan">loopback.Role.</span>patchOrCreate (data, callback)](#apidoc.element.loopback.Role.patchOrCreate)
- description and source-code
```javascript
function upsert(data, callback) {
  throwNotAttached(this.modelName, 'upsert');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Role.patchOrCreateWithWhere"></a>[function <span class="apidocSignatureSpan">loopback.Role.</span>patchOrCreateWithWhere (where, data, callback)](#apidoc.element.loopback.Role.patchOrCreateWithWhere)
- description and source-code
```javascript
function upsertWithWhere(where, data, callback) {
  throwNotAttached(this.modelName, 'upsertWithWhere');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Role.prependListener"></a>[function <span class="apidocSignatureSpan">loopback.Role.</span>prependListener ()](#apidoc.element.loopback.Role.prependListener)
- description and source-code
```javascript
prependListener = function () { [native code] }
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Role.prependOnceListener"></a>[function <span class="apidocSignatureSpan">loopback.Role.</span>prependOnceListener ()](#apidoc.element.loopback.Role.prependOnceListener)
- description and source-code
```javascript
prependOnceListener = function () { [native code] }
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Role.rectifyAllChanges"></a>[function <span class="apidocSignatureSpan">loopback.Role.</span>rectifyAllChanges (callback)](#apidoc.element.loopback.Role.rectifyAllChanges)
- description and source-code
```javascript
rectifyAllChanges = function (callback) {
  this.getChangeModel().rectifyAll(callback);
}
```
- example usage
```shell
...
    cleanup();

    // cleanup
    setInterval(cleanup, cleanupInterval);
  }

  function cleanup() {
    Model.rectifyAllChanges(function(err) {
      if (err) {
        Model.handleChangeError(err, 'cleanup');
      }
    });
  }
};
...
```

#### <a name="apidoc.element.loopback.Role.rectifyChange"></a>[function <span class="apidocSignatureSpan">loopback.Role.</span>rectifyChange (id, callback)](#apidoc.element.loopback.Role.rectifyChange)
- description and source-code
```javascript
rectifyChange = function (id, callback) {
  var Change = this.getChangeModel();
  Change.rectifyModelChanges(this.modelName, [id], callback);
}
```
- example usage
```shell
...
  debug('rectifyOnSave %s -> ' + (id ? 'id %j' : '%s'),
    ctx.Model.modelName, id ? id : 'ALL');
  debug('context instance:%j currentInstance:%j where:%j data %j',
    ctx.instance, ctx.currentInstance, ctx.where, ctx.data);
}

if (id) {
  ctx.Model.rectifyChange(id, reportErrorAndNext);
} else {
  ctx.Model.rectifyAllChanges(reportErrorAndNext);
}

function reportErrorAndNext(err) {
  if (err) {
    ctx.Model.handleChangeError(err, 'after save');
...
```

#### <a name="apidoc.element.loopback.Role.registerProperty"></a>[function <span class="apidocSignatureSpan">loopback.Role.</span>registerProperty (propertyName)](#apidoc.element.loopback.Role.registerProperty)
- description and source-code
```javascript
registerProperty = function (propertyName) {
  var properties = modelDefinition.build();
  var prop = properties[propertyName];
  var DataType = prop.type;
  if (!DataType) {
    throw new Error(g.f('Invalid type for property %s', propertyName));
  }

  if (prop.required) {
    var requiredOptions = typeof prop.required === 'object' ? prop.required : undefined;
    ModelClass.validatesPresenceOf(propertyName, requiredOptions);
  }

  Object.defineProperty(ModelClass.prototype, propertyName, {
    get: function() {
      if (ModelClass.getter[propertyName]) {
        return ModelClass.getter[propertyName].call(this); // Try getter first
      } else {
        return this.__data && this.__data[propertyName]; // Try __data
      }
    },
    set: function(value) {
      var DataType = ModelClass.definition.properties[propertyName].type;
      if (Array.isArray(DataType) || DataType === Array) {
        DataType = List;
      } else if (DataType === Date) {
        DataType = DateType;
      } else if (DataType === Boolean) {
        DataType = BooleanType;
      } else if (typeof DataType === 'string') {
        DataType = modelBuilder.resolveType(DataType);
      }

      var persistUndefinedAsNull = ModelClass.definition.settings.persistUndefinedAsNull;
      if (value === undefined && persistUndefinedAsNull) {
        value = null;
      }

      if (ModelClass.setter[propertyName]) {
        ModelClass.setter[propertyName].call(this, value); // Try setter first
      } else {
        this.__data = this.__data || {};
        if (value === null || value === undefined) {
          this.__data[propertyName] = value;
        } else {
          if (DataType === List) {
            this.__data[propertyName] = DataType(value, properties[propertyName].type, this.__data);
          } else {
            // Assume the type constructor handles Constructor() call
            // If not, we should call new DataType(value).valueOf();
            this.__data[propertyName] = (value instanceof DataType) ? value : DataType(value);
          }
        }
      }
    },
    configurable: true,
    enumerable: true,
  });

  // FIXME: [rfeng] Do we need to keep the raw data?
  // Use $ as the prefix to avoid conflicts with properties such as _id
  Object.defineProperty(ModelClass.prototype, '$' + propertyName, {
    get: function() {
      return this.__data && this.__data[propertyName];
    },
    set: function(value) {
      if (!this.__data) {
        this.__data = {};
      }
      this.__data[propertyName] = value;
    },
    configurable: true,
    enumerable: false,
  });
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Role.registerResolver"></a>[function <span class="apidocSignatureSpan">loopback.Role.</span>registerResolver (role, resolver)](#apidoc.element.loopback.Role.registerResolver)
- description and source-code
```javascript
registerResolver = function (role, resolver) {
  if (!Role.resolvers) {
    Role.resolvers = {};
  }
  Role.resolvers[role] = resolver;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Role.remoteMethod"></a>[function <span class="apidocSignatureSpan">loopback.Role.</span>remoteMethod (name, options)](#apidoc.element.loopback.Role.remoteMethod)
- description and source-code
```javascript
remoteMethod = function (name, options) {
  if (options.isStatic === undefined) {
    var m = name.match(/^prototype\.(.*)$/);
    options.isStatic = !m;
    name = options.isStatic ? name : m[1];
  }

  if (options.accepts) {
    options = extend({}, options);
    options.accepts = setupOptionsArgs(options.accepts);
  }

  this.sharedClass.defineMethod(name, options);
  this.emit('remoteMethodAdded', this.sharedClass);
}
```
- example usage
```shell
...
  /**
* Enable remote invocation for the specified method.
* See [Remote methods](http://loopback.io/doc/en/lb2/Remote-methods.html) for more information.
*
* Static method example:
* '''js
* Model.myMethod();
* Model.remoteMethod('myMethod');
* '''
*
* @param {String} name The name of the method.
* @param {Object} options The remoting options.
* See [Remote methods - Options](http://loopback.io/doc/en/lb2/Remote-methods.html#options).
*/
...
```

#### <a name="apidoc.element.loopback.Role.remove"></a>[function <span class="apidocSignatureSpan">loopback.Role.</span>remove (where, cb)](#apidoc.element.loopback.Role.remove)
- description and source-code
```javascript
function destroyAll(where, cb) {
  throwNotAttached(this.modelName, 'destroyAll');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Role.removeAllListeners"></a>[function <span class="apidocSignatureSpan">loopback.Role.</span>removeAllListeners ()](#apidoc.element.loopback.Role.removeAllListeners)
- description and source-code
```javascript
removeAllListeners = function () { [native code] }
```
- example usage
```shell
...

var idName = this.getIdName();
var Model = this;
var changes = new PassThrough({objectMode: true});
var writeable = true;

changes.destroy = function() {
  changes.removeAllListeners('error');
  changes.removeAllListeners('end');
  writeable = false;
  changes = null;
};

changes.on('error', function() {
  writeable = false;
...
```

#### <a name="apidoc.element.loopback.Role.removeById"></a>[function <span class="apidocSignatureSpan">loopback.Role.</span>removeById (id, cb)](#apidoc.element.loopback.Role.removeById)
- description and source-code
```javascript
function deleteById(id, cb) {
  throwNotAttached(this.modelName, 'deleteById');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Role.removeListener"></a>[function <span class="apidocSignatureSpan">loopback.Role.</span>removeListener ()](#apidoc.element.loopback.Role.removeListener)
- description and source-code
```javascript
removeListener = function () { [native code] }
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Role.removeObserver"></a>[function <span class="apidocSignatureSpan">loopback.Role.</span>removeObserver (operation, listener)](#apidoc.element.loopback.Role.removeObserver)
- description and source-code
```javascript
removeObserver = function (operation, listener) {
  if (!(this._observers && this._observers[operation])) return;

  var index = this._observers[operation].indexOf(listener);
  if (index !== -1) {
    return this._observers[operation].splice(index, 1);
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Role.replaceById"></a>[function <span class="apidocSignatureSpan">loopback.Role.</span>replaceById (id, data, cb)](#apidoc.element.loopback.Role.replaceById)
- description and source-code
```javascript
function replaceById(id, data, cb) {
  throwNotAttached(this.modelName, 'replaceById');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Role.replaceOrCreate"></a>[function <span class="apidocSignatureSpan">loopback.Role.</span>replaceOrCreate (data, callback)](#apidoc.element.loopback.Role.replaceOrCreate)
- description and source-code
```javascript
function replaceOrCreate(data, callback) {
  throwNotAttached(this.modelName, 'replaceOrCreate');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Role.replicate"></a>[function <span class="apidocSignatureSpan">loopback.Role.</span>replicate (since, targetModel, options, callback)](#apidoc.element.loopback.Role.replicate)
- description and source-code
```javascript
replicate = function (since, targetModel, options, callback) {
  var lastArg = arguments[arguments.length - 1];

  if (typeof lastArg === 'function' && arguments.length > 1) {
    callback = lastArg;
  }

  if (typeof since === 'function' && since.modelName) {
    targetModel = since;
    since = -1;
  }

  if (typeof since !== 'object') {
    since = {source: since, target: since};
  }

  if (typeof options === 'function') {
    options = {};
  }

  options = options || {};

  var sourceModel = this;
  callback = callback || utils.createPromiseCallback();

  debug('replicating %s since %s to %s since %s',
    sourceModel.modelName,
    since.source,
    targetModel.modelName,
    since.target);
  if (options.filter) {
    debug('\twith filter %j', options.filter);
  }

  // In order to avoid a race condition between the replication and
  // other clients modifying the data, we must create the new target
  // checkpoint as the first step of the replication process.
  // As a side-effect of that, the replicated changes are associated
  // with the new target checkpoint. This is actually desired behaviour,
  // because that way clients replicating *from* the target model
  // since the new checkpoint will pick these changes up.
  // However, it increases the likelihood of (false) conflicts being detected.
  // In order to prevent that, we run the replication multiple times,
  // until no changes were replicated, but at most MAX_ATTEMPTS times
  // to prevent starvation. In most cases, the second run will find no changes
  // to replicate and we are done.
  var MAX_ATTEMPTS = 3;

  run(1, since);
  return callback.promise;

  function run(attempt, since) {
    debug('\titeration #%s', attempt);
    tryReplicate(sourceModel, targetModel, since, options, next);

    function next(err, conflicts, cps, updates) {
      var finished = err || conflicts.length ||
        !updates || updates.length === 0 ||
        attempt >= MAX_ATTEMPTS;

      if (finished)
        return callback(err, conflicts, cps);
      run(attempt + 1, cps);
    }
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Role.resolveRelatedModels"></a>[function <span class="apidocSignatureSpan">loopback.Role.</span>resolveRelatedModels ()](#apidoc.element.loopback.Role.resolveRelatedModels)
- description and source-code
```javascript
resolveRelatedModels = function () {
  if (!this.userModel) {
    var reg = this.registry;
    this.roleMappingModel = reg.getModelByType('RoleMapping');
    this.userModel = reg.getModelByType('User');
    this.applicationModel = reg.getModelByType('Application');
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Role.scopeRemoting"></a>[function <span class="apidocSignatureSpan">loopback.Role.</span>scopeRemoting (scopeName, scope, define)](#apidoc.element.loopback.Role.scopeRemoting)
- description and source-code
```javascript
scopeRemoting = function (scopeName, scope, define) {
  var pathName =
    (scope.options && scope.options.http && scope.options.http.path) || scopeName;

  var isStatic = scope.isStatic;
  var toModelName = scope.modelTo.modelName;

  // https://github.com/strongloop/loopback/issues/811
  // Check if the scope is for a hasMany relation
  var relation = this.relations[scopeName];
  if (relation && relation.modelTo) {
    // For a relation with through model, the toModelName should be the one
    // from the target model
    toModelName = relation.modelTo.modelName;
  }

  define('__get__' + scopeName, {
    isStatic: isStatic,
    http: {verb: 'get', path: '/' + pathName},
    accepts: [
      {arg: 'filter', type: 'object'},
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Queries %s of %s.', scopeName, this.modelName),
    accessType: 'READ',
    returns: {arg: scopeName, type: [toModelName], root: true},
  });

  define('__create__' + scopeName, {
    isStatic: isStatic,
    http: {verb: 'post', path: '/' + pathName},
    accepts: [
      {
        arg: 'data',
        type: 'object',
        allowArray: true,
        model: toModelName,
        http: {source: 'body'},
      },
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Creates a new instance in %s of this model.', scopeName),
    accessType: 'WRITE',
    returns: {arg: 'data', type: toModelName, root: true},
  });

  define('__delete__' + scopeName, {
    isStatic: isStatic,
    http: {verb: 'delete', path: '/' + pathName},
    accepts: [
      {
        arg: 'where', type: 'object',
        // The "where" argument is not exposed in the REST API
        // but we need to provide a value so that we can pass "options"
        // as the third argument.
        http: function(ctx) { return undefined; },
      },
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Deletes all %s of this model.', scopeName),
    accessType: 'WRITE',
  });

  define('__count__' + scopeName, {
    isStatic: isStatic,
    http: {verb: 'get', path: '/' + pathName + '/count'},
    accepts: [
      {
        arg: 'where', type: 'object',
        description: 'Criteria to match model instances',
      },
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Counts %s of %s.', scopeName, this.modelName),
    accessType: 'READ',
    returns: {arg: 'count',  type: 'number'},
  });
}
```
- example usage
```shell
...
        ModelCtor.hasManyRemoting(relationName, relation, define);
      }
    }

    // handle scopes
    var scopes = ModelCtor.scopes || {};
    for (var scopeName in scopes) {
      ModelCtor.scopeRemoting(scopeName, scopes[scopeName], define);
    }
  });

  return ModelCtor;
};

/*!
...
```

#### <a name="apidoc.element.loopback.Role.setMaxListeners"></a>[function <span class="apidocSignatureSpan">loopback.Role.</span>setMaxListeners ()](#apidoc.element.loopback.Role.setMaxListeners)
- description and source-code
```javascript
setMaxListeners = function () { [native code] }
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Role.setup"></a>[function <span class="apidocSignatureSpan">loopback.Role.</span>setup ()](#apidoc.element.loopback.Role.setup)
- description and source-code
```javascript
function setupPersistedModel() {
  // call Model.setup first
  Model.setup.call(this);

  var PersistedModel = this;

  // enable change tracking (usually for replication)
  if (this.settings.trackChanges) {
    PersistedModel._defineChangeModel();
    PersistedModel.once('dataSourceAttached', function() {
      PersistedModel.enableChangeTracking();
    });
  } else if (this.settings.enableRemoteReplication) {
    PersistedModel._defineChangeModel();
  }

  PersistedModel.setupRemoting();
}
```
- example usage
```shell
...
  Model.createOptionsFromRemotingContext = function(ctx) {
    return {
      accessToken: ctx.req.accessToken,
    };
  };

  // setup the initial model
  Model.setup();

  return Model;
};
...
```

#### <a name="apidoc.element.loopback.Role.setupRemoting"></a>[function <span class="apidocSignatureSpan">loopback.Role.</span>setupRemoting ()](#apidoc.element.loopback.Role.setupRemoting)
- description and source-code
```javascript
setupRemoting = function () {
  var PersistedModel = this;
  var typeName = PersistedModel.modelName;
  var options = PersistedModel.settings;

  // This is just for LB 3.x
  options.replaceOnPUT = options.replaceOnPUT !== false;

  function setRemoting(scope, name, options) {
    var fn = scope[name];
    fn._delegate = true;
    options.isStatic = scope === PersistedModel;
    PersistedModel.remoteMethod(name, options);
  }

  setRemoting(PersistedModel, 'create', {
    description: 'Create a new instance of the model and persist it into the data source.',
    accessType: 'WRITE',
    accepts: [
      {
        arg: 'data', type: 'object', model: typeName, allowArray: true,
        description: 'Model instance data',
        http: {source: 'body'},
      },
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    returns: {arg: 'data', type: typeName, root: true},
    http: {verb: 'post', path: '/'},
  });

  var upsertOptions = {
    aliases: ['upsert', 'updateOrCreate'],
    description: 'Patch an existing model instance or insert a new one ' +
      'into the data source.',
    accessType: 'WRITE',
    accepts: [
      {
        arg: 'data', type: 'object', model: typeName, http: {source: 'body'},
        description: 'Model instance data',
      },
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    returns: {arg: 'data', type: typeName, root: true},
    http: [{verb: 'patch', path: '/'}],
  };

  if (!options.replaceOnPUT) {
    upsertOptions.http.unshift({verb: 'put', path: '/'});
  }
  setRemoting(PersistedModel, 'patchOrCreate', upsertOptions);

  var replaceOrCreateOptions = {
    description: 'Replace an existing model instance or insert a new one into the data source.',
    accessType: 'WRITE',
    accepts: [
      {
        arg: 'data', type: 'object', model: typeName,
        http: {source: 'body'},
        description: 'Model instance data',
      },
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    returns: {arg: 'data', type: typeName, root: true},
    http: [{verb: 'post', path: '/replaceOrCreate'}],
  };

  if (options.replaceOnPUT) {
    replaceOrCreateOptions.http.push({verb: 'put', path: '/'});
  }

  setRemoting(PersistedModel, 'replaceOrCreate', replaceOrCreateOptions);

  setRemoting(PersistedModel, 'upsertWithWhere', {
    aliases: ['patchOrCreateWithWhere'],
    description: 'Update an existing model instance or insert a new one into ' +
      'the data source based on the where criteria.',
    accessType: 'WRITE',
    accepts: [
      {arg: 'where', type: 'object', http: {source: 'query'},
        description: 'Criteria to match model instances'},
      {arg: 'data', type: 'object', model: typeName, http: {source: 'body'},
        description: 'An object of model property name/value pairs'},
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    returns: {arg: 'data', type: typeName, root: true},
    http: {verb: 'post', path: '/upsertWithWhere'},
  });

  setRemoting(PersistedModel, 'exists', {
    description: 'Check whether a model instance exists in the data source.',
    accessType: 'READ',
    accepts: [
      {arg: 'id', type: 'any', description: 'Model id', required: true},
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    returns: {arg: 'exists', type: 'boolean'},
    http: [
      {verb: 'get', path: '/:id/exists'},
      {verb: 'head', path: '/:id'},
    ],
    rest: {
      // After hook to map exists to 200/404 for HEAD
      after: function(ctx, cb) {
        if (ctx.req.method === 'GET') {
          // For GET, return {exists: true|false} as is
          return cb();
        }
        if (!ctx.result.exists) {
          var modelName = ctx.method.sharedClass.name;
          var id = ctx.getArgByName('id');
          var msg = 'Unknown "' + modelName + '" id "' + id + '".';
          var error = new Error(msg);
          error.statusCode = error.status = 404;
          error.code = 'MODEL_NOT_FOUND';
          cb(error);
        } else {
          cb();
        } ...
```
- example usage
```shell
...
    PersistedModel.once('dataSourceAttached', function() {
      PersistedModel.enableChangeTracking();
    });
  } else if (this.settings.enableRemoteReplication) {
    PersistedModel._defineChangeModel();
  }

  PersistedModel.setupRemoting();
};

/*!
 * Throw an error telling the user that the method is not available and why.
 */

function throwNotAttached(modelName, methodName) {
...
```

#### <a name="apidoc.element.loopback.Role.sharedCtor"></a>[function <span class="apidocSignatureSpan">loopback.Role.</span>sharedCtor (data, id, options, fn)](#apidoc.element.loopback.Role.sharedCtor)
- description and source-code
```javascript
sharedCtor = function (data, id, options, fn) {
  var ModelCtor = this;

  var isRemoteInvocationWithOptions = typeof data !== 'object' &&
    typeof id === 'object' &&
    typeof options === 'function';
  if (isRemoteInvocationWithOptions) {
    // sharedCtor(id, options, fn)
    fn = options;
    options = id;
    id = data;
    data = null;
  } else if (typeof data === 'function') {
    // sharedCtor(fn)
    fn = data;
    data = null;
    id = null;
    options = null;
  } else if (typeof id === 'function') {
    // sharedCtor(data, fn)
    // sharedCtor(id, fn)
    fn = id;
    options = null;

    if (typeof data !== 'object') {
      id = data;
      data = null;
    } else {
      id = null;
    }
  }

  if (id && data) {
    var model = new ModelCtor(data);
    model.id = id;
    fn(null, model);
  } else if (data) {
    fn(null, new ModelCtor(data));
  } else if (id) {
    var filter = {};
    ModelCtor.findById(id, filter, options, function(err, model) {
      if (err) {
        fn(err);
      } else if (model) {
        fn(null, model);
      } else {
        err = new Error(g.f('could not find a model with apidoc.element.loopback.Role.sharedCtor %s', id));
        err.statusCode = 404;
        err.code = 'MODEL_NOT_FOUND';
        fn(err);
      }
    });
  } else {
    fn(new Error(g.f('must specify an apidoc.element.loopback.Role.sharedCtor or {{data}}')));
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Role.super_"></a>[function <span class="apidocSignatureSpan">loopback.Role.</span>super_ (data, options)](#apidoc.element.loopback.Role.super_)
- description and source-code
```javascript
function ModelConstructor(data, options) {
  if (!(this instanceof ModelConstructor)) {
    return new ModelConstructor(data, options);
  }
  if (ModelClass.settings.unresolved) {
    throw new Error(g.f('Model %s is not defined.', ModelClass.modelName));
  }
  ModelBaseClass.apply(this, arguments);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Role.update"></a>[function <span class="apidocSignatureSpan">loopback.Role.</span>update (where, data, cb)](#apidoc.element.loopback.Role.update)
- description and source-code
```javascript
function updateAll(where, data, cb) {
  throwNotAttached(this.modelName, 'updateAll');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Role.updateAll"></a>[function <span class="apidocSignatureSpan">loopback.Role.</span>updateAll (where, data, cb)](#apidoc.element.loopback.Role.updateAll)
- description and source-code
```javascript
function updateAll(where, data, cb) {
  throwNotAttached(this.modelName, 'updateAll');
}
```
- example usage
```shell
...

  /**
* Update multiple instances that match the where clause.
*
* Example:
*
*'''js
* Employee.updateAll({managerId: 'x001'}, {managerId: 'x002'}, function(err, info) {
*     ...
* });
* '''
*
* @param {Object} [where] Optional 'where' filter, like
* '''
* { key: val, key2: {gt: 'val2'}, ...}
...
```

#### <a name="apidoc.element.loopback.Role.updateLastChange"></a>[function <span class="apidocSignatureSpan">loopback.Role.</span>updateLastChange (id, data, cb)](#apidoc.element.loopback.Role.updateLastChange)
- description and source-code
```javascript
updateLastChange = function (id, data, cb) {
  var self = this;
  this.findLastChange(id, function(err, inst) {
    if (err) return cb(err);
    if (!inst) {
      err = new Error(g.f('No change record found for %s with id %s',
        self.modelName, id));
      err.statusCode = 404;
      return cb(err);
    }

    inst.updateAttributes(data, cb);
  });
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Role.updateOrCreate"></a>[function <span class="apidocSignatureSpan">loopback.Role.</span>updateOrCreate (data, callback)](#apidoc.element.loopback.Role.updateOrCreate)
- description and source-code
```javascript
function upsert(data, callback) {
  throwNotAttached(this.modelName, 'upsert');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Role.upsert"></a>[function <span class="apidocSignatureSpan">loopback.Role.</span>upsert (data, callback)](#apidoc.element.loopback.Role.upsert)
- description and source-code
```javascript
function upsert(data, callback) {
  throwNotAttached(this.modelName, 'upsert');
}
```
- example usage
```shell
...
  }
});

// then save
function save() {
  inst.trigger('save', function(saveDone) {
    inst.trigger('update', function(updateDone) {
      Model.upsert(inst, function(err) {
        inst._initProperties(data);
        updateDone.call(inst, function() {
          saveDone.call(inst, function() {
            callback(err, inst);
          });
        });
      });
...
```

#### <a name="apidoc.element.loopback.Role.upsertWithWhere"></a>[function <span class="apidocSignatureSpan">loopback.Role.</span>upsertWithWhere (where, data, callback)](#apidoc.element.loopback.Role.upsertWithWhere)
- description and source-code
```javascript
function upsertWithWhere(where, data, callback) {
  throwNotAttached(this.modelName, 'upsertWithWhere');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Role.validate"></a>[function <span class="apidocSignatureSpan">loopback.Role.</span>validate ()](#apidoc.element.loopback.Role.validate)
- description and source-code
```javascript
validate = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Role.validateAsync"></a>[function <span class="apidocSignatureSpan">loopback.Role.</span>validateAsync ()](#apidoc.element.loopback.Role.validateAsync)
- description and source-code
```javascript
validateAsync = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Role.validatesAbsenceOf"></a>[function <span class="apidocSignatureSpan">loopback.Role.</span>validatesAbsenceOf ()](#apidoc.element.loopback.Role.validatesAbsenceOf)
- description and source-code
```javascript
validatesAbsenceOf = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Role.validatesExclusionOf"></a>[function <span class="apidocSignatureSpan">loopback.Role.</span>validatesExclusionOf ()](#apidoc.element.loopback.Role.validatesExclusionOf)
- description and source-code
```javascript
validatesExclusionOf = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Role.validatesFormatOf"></a>[function <span class="apidocSignatureSpan">loopback.Role.</span>validatesFormatOf ()](#apidoc.element.loopback.Role.validatesFormatOf)
- description and source-code
```javascript
validatesFormatOf = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Role.validatesInclusionOf"></a>[function <span class="apidocSignatureSpan">loopback.Role.</span>validatesInclusionOf ()](#apidoc.element.loopback.Role.validatesInclusionOf)
- description and source-code
```javascript
validatesInclusionOf = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Role.validatesLengthOf"></a>[function <span class="apidocSignatureSpan">loopback.Role.</span>validatesLengthOf ()](#apidoc.element.loopback.Role.validatesLengthOf)
- description and source-code
```javascript
validatesLengthOf = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Role.validatesNumericalityOf"></a>[function <span class="apidocSignatureSpan">loopback.Role.</span>validatesNumericalityOf ()](#apidoc.element.loopback.Role.validatesNumericalityOf)
- description and source-code
```javascript
validatesNumericalityOf = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Role.validatesPresenceOf"></a>[function <span class="apidocSignatureSpan">loopback.Role.</span>validatesPresenceOf ()](#apidoc.element.loopback.Role.validatesPresenceOf)
- description and source-code
```javascript
validatesPresenceOf = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Role.validatesUniquenessOf"></a>[function <span class="apidocSignatureSpan">loopback.Role.</span>validatesUniquenessOf ()](#apidoc.element.loopback.Role.validatesUniquenessOf)
- description and source-code
```javascript
validatesUniquenessOf = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```



# <a name="apidoc.module.loopback.Role.resolvers"></a>[module loopback.Role.resolvers](#apidoc.module.loopback.Role.resolvers)



# <a name="apidoc.module.loopback.Role.settings"></a>[module loopback.Role.settings](#apidoc.module.loopback.Role.settings)

#### <a name="apidoc.element.loopback.Role.settings.base"></a>[function <span class="apidocSignatureSpan">loopback.Role.settings.</span>base (data, options)](#apidoc.element.loopback.Role.settings.base)
- description and source-code
```javascript
function ModelConstructor(data, options) {
  if (!(this instanceof ModelConstructor)) {
    return new ModelConstructor(data, options);
  }
  if (ModelClass.settings.unresolved) {
    throw new Error(g.f('Model %s is not defined.', ModelClass.modelName));
  }
  ModelBaseClass.apply(this, arguments);
}
```
- example usage
```shell
n/a
```



# <a name="apidoc.module.loopback.Role.sharedClass"></a>[module loopback.Role.sharedClass](#apidoc.module.loopback.Role.sharedClass)

#### <a name="apidoc.element.loopback.Role.sharedClass.ctor"></a>[function <span class="apidocSignatureSpan">loopback.Role.sharedClass.</span>ctor (data, options)](#apidoc.element.loopback.Role.sharedClass.ctor)
- description and source-code
```javascript
function ModelConstructor(data, options) {
  if (!(this instanceof ModelConstructor)) {
    return new ModelConstructor(data, options);
  }
  if (ModelClass.settings.unresolved) {
    throw new Error(g.f('Model %s is not defined.', ModelClass.modelName));
  }
  ModelBaseClass.apply(this, arguments);
}
```
- example usage
```shell
n/a
```



# <a name="apidoc.module.loopback.RoleMapping"></a>[module loopback.RoleMapping](#apidoc.module.loopback.RoleMapping)

#### <a name="apidoc.element.loopback.RoleMapping.RoleMapping"></a>[function <span class="apidocSignatureSpan">loopback.</span>RoleMapping (data, options)](#apidoc.element.loopback.RoleMapping.RoleMapping)
- description and source-code
```javascript
function ModelConstructor(data, options) {
  if (!(this instanceof ModelConstructor)) {
    return new ModelConstructor(data, options);
  }
  if (ModelClass.settings.unresolved) {
    throw new Error(g.f('Model %s is not defined.', ModelClass.modelName));
  }
  ModelBaseClass.apply(this, arguments);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.RoleMapping.ValidationError"></a>[function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>ValidationError (obj)](#apidoc.element.loopback.RoleMapping.ValidationError)
- description and source-code
```javascript
function ValidationError(obj) {
  if (!(this instanceof ValidationError)) return new ValidationError(obj);

  this.name = 'ValidationError';

  var context = obj && obj.constructor && obj.constructor.modelName;
  this.message = g.f(
    'The %s instance is not valid. Details: %s.',
      context ? ''' + context + ''' : 'model',
      formatErrors(obj.errors, obj.toJSON()) || '(unknown)'
  );

  this.statusCode = 422;

  this.details = {
    context: context,
    codes: obj.errors && obj.errors.codes,
    messages: obj.errors,
  };

  if (Error.captureStackTrace) {
    // V8 (Chrome, Opera, Node)
    Error.captureStackTrace(this, this.constructor);
  } else if (errorHasStackProperty) {
    // Firefox
    this.stack = (new Error).stack;
  }
  // Safari and PhantomJS initializes 'error.stack' on throw
  // Internet Explorer does not support 'error.stack'
}
```
- example usage
```shell
...
  return save();
}

inst.isValid(function(valid) {
  if (valid) {
    save();
  } else {
    var err = new Model.ValidationError(inst);
    // throws option is dangerous for async usage
    if (options.throws) {
      throw err;
    }
    callback(err, inst);
  }
});
...
```

#### <a name="apidoc.element.loopback.RoleMapping._ACL"></a>[function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>_ACL (ACL)](#apidoc.element.loopback.RoleMapping._ACL)
- description and source-code
```javascript
function getACL(ACL) {
  var registry = this.registry;
  if (ACL !== undefined) {
    // The function is used as a setter
    _aclModel = ACL;
  }
  if (_aclModel) {
    return _aclModel;
  }
  var aclModel = registry.getModel('ACL');
  _aclModel = registry.getModelByType(aclModel);
  return _aclModel;
}
```
- example usage
```shell
...
   * @param {String|Error} err The error object.
   * @param {Boolean} allowed True if the request is allowed; false otherwise.
   */

  Model.checkAccess = function(token, modelId, sharedMethod, ctx, callback) {
var ANONYMOUS = registry.getModel('AccessToken').ANONYMOUS;
token = token || ANONYMOUS;
var aclModel = Model._ACL();

ctx = ctx || {};
if (typeof ctx === 'function' && callback === undefined) {
  callback = ctx;
  ctx = {};
}
...
```

#### <a name="apidoc.element.loopback.RoleMapping._defineChangeModel"></a>[function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>_defineChangeModel ()](#apidoc.element.loopback.RoleMapping._defineChangeModel)
- description and source-code
```javascript
_defineChangeModel = function () {
  var BaseChangeModel = this.registry.getModel('Change');
  assert(BaseChangeModel,
    'Change model must be defined before enabling change replication');

  const additionalChangeModelProperties =
    this.settings.additionalChangeModelProperties || {};

  this.Change = BaseChangeModel.extend(this.modelName + '-change',
    additionalChangeModelProperties,
    {trackModel: this}
  );

  if (this.dataSource) {
    attachRelatedModels(this);
  }

  // Re-attach related models whenever our datasource is changed.
  var self = this;
  this.on('dataSourceAttached', function() {
    attachRelatedModels(self);
  });

  return this.Change;

  function attachRelatedModels(self) {
    self.Change.attachTo(self.dataSource);
    self.Change.getCheckpointModel().attachTo(self.dataSource);
  }
}
```
- example usage
```shell
...
// call Model.setup first
Model.setup.call(this);

var PersistedModel = this;

// enable change tracking (usually for replication)
if (this.settings.trackChanges) {
  PersistedModel._defineChangeModel();
  PersistedModel.once('dataSourceAttached', function() {
    PersistedModel.enableChangeTracking();
  });
} else if (this.settings.enableRemoteReplication) {
  PersistedModel._defineChangeModel();
}
...
```

#### <a name="apidoc.element.loopback.RoleMapping._getAccessTypeForMethod"></a>[function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>_getAccessTypeForMethod (method)](#apidoc.element.loopback.RoleMapping._getAccessTypeForMethod)
- description and source-code
```javascript
_getAccessTypeForMethod = function (method) {
  if (typeof method === 'string') {
    method = {name: method};
  }
  assert(
    typeof method === 'object',
    'method is a required argument and must be a RemoteMethod object'
  );

  var ACL = Model._ACL();

  // Check the explicit setting of accessType
  if (method.accessType) {
    assert(method.accessType === ACL.READ ||
      method.accessType === ACL.REPLICATE ||
      method.accessType === ACL.WRITE ||
      method.accessType === ACL.EXECUTE, 'invalid accessType ' +
      method.accessType +
      '. It must be "READ", "REPLICATE", "WRITE", or "EXECUTE"');
    return method.accessType;
  }

  // Default GET requests to READ
  var verb = method.http && method.http.verb;
  if (typeof verb === 'string') {
    verb = verb.toUpperCase();
  }
  if (verb === 'GET' || verb === 'HEAD') {
    return ACL.READ;
  }

  switch (method.name) {
    case 'create':
      return ACL.WRITE;
    case 'updateOrCreate':
      return ACL.WRITE;
    case 'upsertWithWhere':
      return ACL.WRITE;
    case 'upsert':
      return ACL.WRITE;
    case 'exists':
      return ACL.READ;
    case 'findById':
      return ACL.READ;
    case 'find':
      return ACL.READ;
    case 'findOne':
      return ACL.READ;
    case 'destroyById':
      return ACL.WRITE;
    case 'deleteById':
      return ACL.WRITE;
    case 'removeById':
      return ACL.WRITE;
    case 'count':
      return ACL.READ;
    default:
      return ACL.EXECUTE;
  }
}
```
- example usage
```shell
...
if (this.sharedMethod) {
  this.methodNames = this.sharedMethod.aliases.concat([this.sharedMethod.name]);
} else {
  this.methodNames = [];
}

if (this.sharedMethod) {
  this.accessType = this.model._getAccessTypeForMethod(this.sharedMethod);
}

this.accessType = context.accessType || AccessContext.ALL;
assert(loopback.AccessToken,
  'AccessToken model must be defined before AccessContext model');
this.accessToken = context.accessToken || loopback.AccessToken.ANONYMOUS;
...
```

#### <a name="apidoc.element.loopback.RoleMapping._notifyBaseObservers"></a>[function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>_notifyBaseObservers (operation, context, callback)](#apidoc.element.loopback.RoleMapping._notifyBaseObservers)
- description and source-code
```javascript
_notifyBaseObservers = function (operation, context, callback) {
  if (this.base && this.base.notifyObserversOf)
    this.base.notifyObserversOf(operation, context, callback);
  else
    callback();
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.RoleMapping._runWhenAttachedToApp"></a>[function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>_runWhenAttachedToApp (fn)](#apidoc.element.loopback.RoleMapping._runWhenAttachedToApp)
- description and source-code
```javascript
_runWhenAttachedToApp = function (fn) {
  if (this.app) return fn(this.app);
  var self = this;
  self.once('attached', function() {
    fn(self.app);
  });
}
```
- example usage
```shell
...
  ModelCtor,
  remotingOptions
);

// before remote hook
ModelCtor.beforeRemote = function(name, fn) {
  var className = this.modelName;
  this._runWhenAttachedToApp(function(app) {
    var remotes = app.remotes();
    remotes.before(className + '.' + name, function(ctx, next) {
      return fn(ctx, ctx.result, next);
    });
  });
};
...
```

#### <a name="apidoc.element.loopback.RoleMapping.addListener"></a>[function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>addListener ()](#apidoc.element.loopback.RoleMapping.addListener)
- description and source-code
```javascript
addListener = function () { [native code] }
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.RoleMapping.afterRemote"></a>[function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>afterRemote (name, fn)](#apidoc.element.loopback.RoleMapping.afterRemote)
- description and source-code
```javascript
afterRemote = function (name, fn) {
  var className = this.modelName;
  this._runWhenAttachedToApp(function(app) {
    var remotes = app.remotes();
    remotes.after(className + '.' + name, function(ctx, next) {
      return fn(ctx, ctx.result, next);
    });
  });
}
```
- example usage
```shell
...
        var m = method.isStatic ? method.name : 'prototype.' + method.name;
        if (before && before[delegateTo.name]) {
          self.beforeRemote(m, function(ctx, result, next) {
            before[delegateTo.name]._listeners.call(null, ctx, next);
          });
        }
        if (after && after[delegateTo.name]) {
          self.afterRemote(m, function(ctx, result, next) {
            after[delegateTo.name]._listeners.call(null, ctx, next);
          });
        }
      }
    });
  });
} else {
...
```

#### <a name="apidoc.element.loopback.RoleMapping.afterRemoteError"></a>[function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>afterRemoteError (name, fn)](#apidoc.element.loopback.RoleMapping.afterRemoteError)
- description and source-code
```javascript
afterRemoteError = function (name, fn) {
  var className = this.modelName;
  this._runWhenAttachedToApp(function(app) {
    var remotes = app.remotes();
    remotes.afterError(className + '.' + name, fn);
  });
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.RoleMapping.attachTo"></a>[function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>attachTo (dataSource)](#apidoc.element.loopback.RoleMapping.attachTo)
- description and source-code
```javascript
attachTo = function (dataSource) {
  dataSource.attach(this);
}
```
- example usage
```shell
...
  this.on('dataSourceAttached', function() {
    attachRelatedModels(self);
  });

  return this.Change;

  function attachRelatedModels(self) {
    self.Change.attachTo(self.dataSource);
    self.Change.getCheckpointModel().attachTo(self.dataSource);
  }
};

PersistedModel.rectifyAllChanges = function(callback) {
  this.getChangeModel().rectifyAll(callback);
};
...
```

#### <a name="apidoc.element.loopback.RoleMapping.beforeRemote"></a>[function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>beforeRemote (name, fn)](#apidoc.element.loopback.RoleMapping.beforeRemote)
- description and source-code
```javascript
beforeRemote = function (name, fn) {
  var className = this.modelName;
  this._runWhenAttachedToApp(function(app) {
    var remotes = app.remotes();
    remotes.before(className + '.' + name, function(ctx, next) {
      return fn(ctx, ctx.result, next);
    });
  });
}
```
- example usage
```shell
...
        sharedClass.methods().forEach(function(method) {
var delegateTo = method.rest && method.rest.delegateTo;
if (delegateTo && delegateTo.ctor == relation.modelTo) {
  var before = method.isStatic ? beforeListeners : beforeListeners['prototype'];
  var after = method.isStatic ? afterListeners : afterListeners['prototype'];
  var m = method.isStatic ? method.name : 'prototype.' + method.name;
  if (before && before[delegateTo.name]) {
    self.beforeRemote(m, function(ctx, result, next) {
      before[delegateTo.name]._listeners.call(null, ctx, next);
    });
  }
  if (after && after[delegateTo.name]) {
    self.afterRemote(m, function(ctx, result, next) {
      after[delegateTo.name]._listeners.call(null, ctx, next);
    });
...
```

#### <a name="apidoc.element.loopback.RoleMapping.belongsToRemoting"></a>[function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>belongsToRemoting (relationName, relation, define)](#apidoc.element.loopback.RoleMapping.belongsToRemoting)
- description and source-code
```javascript
belongsToRemoting = function (relationName, relation, define) {
  var modelName = relation.modelTo && relation.modelTo.modelName;
  modelName = modelName || 'PersistedModel';
  var fn = this.prototype[relationName];
  var pathName = (relation.options.http && relation.options.http.path) || relationName;
  define('__get__' + relationName, {
    isStatic: false,
    http: {verb: 'get', path: '/' + pathName},
    accepts: [
      {arg: 'refresh', type: 'boolean', http: {source: 'query'}},
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    accessType: 'READ',
    description: format('Fetches belongsTo relation %s.', relationName),
    returns: {arg: relationName, type: modelName, root: true},
  }, fn);
}
```
- example usage
```shell
...
  defineRaw(name, options, fn);
};

// get the relations
for (var relationName in relations) {
  var relation = relations[relationName];
  if (relation.type === 'belongsTo') {
    ModelCtor.belongsToRemoting(relationName, relation, define);
  } else if (
    relation.type === 'hasOne' ||
    relation.type === 'embedsOne'
  ) {
    ModelCtor.hasOneRemoting(relationName, relation, define);
  } else if (
    relation.type === 'hasMany' ||
...
```

#### <a name="apidoc.element.loopback.RoleMapping.bulkUpdate"></a>[function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>bulkUpdate (updates, options, callback)](#apidoc.element.loopback.RoleMapping.bulkUpdate)
- description and source-code
```javascript
bulkUpdate = function (updates, options, callback) {
  var tasks = [];
  var Model = this;
  var Change = this.getChangeModel();
  var conflicts = [];

  var lastArg = arguments[arguments.length - 1];

  if (typeof lastArg === 'function' && arguments.length > 1) {
    callback = lastArg;
  }

  if (typeof options === 'function') {
    options = {};
  }

  options = options || {};

  buildLookupOfAffectedModelData(Model, updates, function(err, currentMap) {
    if (err) return callback(err);

    updates.forEach(function(update) {
      var id = update.change.modelId;
      var current = currentMap[id];
      switch (update.type) {
        case Change.UPDATE:
          tasks.push(function(cb) {
            applyUpdate(Model, id, current, update.data, update.change, conflicts, options, cb);
          });
          break;

        case Change.CREATE:
          tasks.push(function(cb) {
            applyCreate(Model, id, current, update.data, update.change, conflicts, options, cb);
          });
          break;
        case Change.DELETE:
          tasks.push(function(cb) {
            applyDelete(Model, id, current, update.change, conflicts, options, cb);
          });
          break;
      }
    });

    async.parallel(tasks, function(err) {
      if (err) return callback(err);
      if (conflicts.length) {
        err = new Error(g.f('Conflict'));
        err.statusCode = 409;
        err.details = {conflicts: conflicts};
        return callback(err);
      }
      callback();
    });
  });
}
```
- example usage
```shell
...
    function bulkUpdate(_updates, cb) {
debug('\tstarting bulk update');
updates = _updates;
utils.uploadInChunks(
  updates,
  replicationChunkSize,
  function(smallArray, chunkCallback) {
    return targetModel.bulkUpdate(smallArray, options, function(err) {
      // bulk update is a special case where we want to process all chunks and aggregate all errors
      chunkCallback(null, err);
    });
  },
  function(notUsed, err) {
    var conflicts = err && err.details && err.details.conflicts;
    if (conflicts && err.statusCode == 409) {
...
```

#### <a name="apidoc.element.loopback.RoleMapping.changes"></a>[function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>changes (since, filter, callback)](#apidoc.element.loopback.RoleMapping.changes)
- description and source-code
```javascript
changes = function (since, filter, callback) {
  if (typeof since === 'function') {
    filter = {};
    callback = since;
    since = -1;
  }
  if (typeof filter === 'function') {
    callback = filter;
    since = -1;
    filter = {};
  }

  var idName = this.dataSource.idName(this.modelName);
  var Change = this.getChangeModel();
  var model = this;
  const changeFilter = this.createChangeFilter(since, filter);

  filter = filter || {};
  filter.fields = {};
  filter.where = filter.where || {};
  filter.fields[idName] = true;

  // TODO(ritch) this whole thing could be optimized a bit more
  Change.find(changeFilter, function(err, changes) {
    if (err) return callback(err);
    if (!Array.isArray(changes) || changes.length === 0) return callback(null, []);
    var ids = changes.map(function(change) {
      return change.getModelId();
    });
    filter.where[idName] = {inq: ids};
    model.find(filter, function(err, models) {
      if (err) return callback(err);
      var modelIds = models.map(function(m) {
        return m[idName].toString();
      });
      callback(null, changes.filter(function(ch) {
        if (ch.type() === Change.DELETE) return true;
        return modelIds.indexOf(ch.modelId) > -1;
      }));
    });
  });
}
```
- example usage
```shell
...
    async.waterfall(tasks, done);

    function getSourceChanges(cb) {
utils.downloadInChunks(
  options.filter,
  replicationChunkSize,
  function(filter, pagingCallback) {
    sourceModel.changes(since.source, filter, pagingCallback);
  },
  debug.enabled ? log : cb);

function log(err, result) {
  if (err) return cb(err);
  debug('\tusing source changes');
  result.forEach(function(it) { debug('\t\t%j', it); });
...
```

#### <a name="apidoc.element.loopback.RoleMapping.checkAccess"></a>[function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>checkAccess (token, modelId, sharedMethod, ctx, callback)](#apidoc.element.loopback.RoleMapping.checkAccess)
- description and source-code
```javascript
checkAccess = function (token, modelId, sharedMethod, ctx, callback) {
  var ANONYMOUS = registry.getModel('AccessToken').ANONYMOUS;
  token = token || ANONYMOUS;
  var aclModel = Model._ACL();

  ctx = ctx || {};
  if (typeof ctx === 'function' && callback === undefined) {
    callback = ctx;
    ctx = {};
  }

  aclModel.checkAccessForContext({
    accessToken: token,
    model: this,
    property: sharedMethod.name,
    method: sharedMethod.name,
    sharedMethod: sharedMethod,
    modelId: modelId,
    accessType: this._getAccessTypeForMethod(sharedMethod),
    remotingContext: ctx,
  }, function(err, accessRequest) {
    if (err) return callback(err);
    callback(null, accessRequest.isAllowed());
  });
}
```
- example usage
```shell
...
var modelSettings = Model.settings || {};
var errStatusCode = modelSettings.aclErrorStatus || app.get('aclErrorStatus') || 401;
if (!req.accessToken) {
  errStatusCode = 401;
}

if (Model.checkAccess) {
  Model.checkAccess(
    req.accessToken,
    modelId,
    method,
    ctx,
    function(err, allowed) {
      if (err) {
        console.log(err);
...
```

#### <a name="apidoc.element.loopback.RoleMapping.checkpoint"></a>[function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>checkpoint (cb)](#apidoc.element.loopback.RoleMapping.checkpoint)
- description and source-code
```javascript
checkpoint = function (cb) {
  var Checkpoint = this.getChangeModel().getCheckpointModel();
  Checkpoint.bumpLastSeq(cb);
}
```
- example usage
```shell
...
      }
      cb(err);
    });
}

function checkpoints() {
  var cb = arguments[arguments.length - 1];
  sourceModel.checkpoint(function(err, source) {
    if (err) return cb(err);
    newSourceCp = source.seq;
    targetModel.checkpoint(function(err, target) {
      if (err) return cb(err);
      newTargetCp = target.seq;
      debug('\tcreated checkpoints');
      debug('\t\t%s for source model %s', newSourceCp, sourceModel.modelName);
...
```

#### <a name="apidoc.element.loopback.RoleMapping.clearObservers"></a>[function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>clearObservers (operation)](#apidoc.element.loopback.RoleMapping.clearObservers)
- description and source-code
```javascript
clearObservers = function (operation) {
  if (!(this._observers && this._observers[operation])) return;

  this._observers[operation].length = 0;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.RoleMapping.count"></a>[function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>count (where, cb)](#apidoc.element.loopback.RoleMapping.count)
- description and source-code
```javascript
count = function (where, cb) {
  throwNotAttached(this.modelName, 'count');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.RoleMapping.create"></a>[function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>create (data, callback)](#apidoc.element.loopback.RoleMapping.create)
- description and source-code
```javascript
create = function (data, callback) {
  throwNotAttached(this.modelName, 'create');
}
```
- example usage
```shell
...
 } else {
   var options = {};

   if (this.get) {
     options = this.get('remoting');
   }

   return (this._remotes = RemoteObjects.create(options));
 }
};

/*!
* Remove a route by reference.
*/
...
```

#### <a name="apidoc.element.loopback.RoleMapping.createChangeFilter"></a>[function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>createChangeFilter (since, modelFilter)](#apidoc.element.loopback.RoleMapping.createChangeFilter)
- description and source-code
```javascript
createChangeFilter = function (since, modelFilter) {
  return {
    where: {
      checkpoint: {gte: since},
      modelName: this.modelName,
    },
  };
}
```
- example usage
```shell
...
  since = -1;
  filter = {};
}

var idName = this.dataSource.idName(this.modelName);
var Change = this.getChangeModel();
var model = this;
const changeFilter = this.createChangeFilter(since, filter);

filter = filter || {};
filter.fields = {};
filter.where = filter.where || {};
filter.fields[idName] = true;

// TODO(ritch) this whole thing could be optimized a bit more
...
```

#### <a name="apidoc.element.loopback.RoleMapping.createChangeStream"></a>[function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>createChangeStream (options, cb)](#apidoc.element.loopback.RoleMapping.createChangeStream)
- description and source-code
```javascript
createChangeStream = function (options, cb) {
  if (typeof options === 'function') {
    cb = options;
    options = undefined;
  }

  var idName = this.getIdName();
  var Model = this;
  var changes = new PassThrough({objectMode: true});
  var writeable = true;

  changes.destroy = function() {
    changes.removeAllListeners('error');
    changes.removeAllListeners('end');
    writeable = false;
    changes = null;
  };

  changes.on('error', function() {
    writeable = false;
  });
  changes.on('end', function() {
    writeable = false;
  });

  process.nextTick(function() {
    cb(null, changes);
  });

  Model.observe('after save', createChangeHandler('save'));
  Model.observe('after delete', createChangeHandler('delete'));

  function createChangeHandler(type) {
    return function(ctx, next) {
      // since it might have set to null via destroy
      if (!changes) {
        return next();
      }

      var where = ctx.where;
      var data = ctx.instance || ctx.data;
      var whereId = where && where[idName];

      // the data includes the id
      // or the where includes the id
      var target;

      if (data && (data[idName] || data[idName] === 0)) {
        target = data[idName];
      } else if (where && (where[idName] || where[idName] === 0)) {
        target = where[idName];
      }

      var hasTarget = target === 0 || !!target;

      var change = {
        target: target,
        where: where,
        data: data,
      };

      switch (type) {
        case 'save':
          if (ctx.isNewInstance === undefined) {
            change.type = hasTarget ? 'update' : 'create';
          } else {
            change.type = ctx.isNewInstance ? 'create' : 'update';
          }

          break;
        case 'delete':
          change.type = 'remove';
          break;
      }

      // TODO(ritch) this is ugly... maybe a ReadableStream would be better
      if (writeable) {
        changes.write(change);
      }

      next();
    };
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.RoleMapping.createOptionsFromRemotingContext"></a>[function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>createOptionsFromRemotingContext (ctx)](#apidoc.element.loopback.RoleMapping.createOptionsFromRemotingContext)
- description and source-code
```javascript
createOptionsFromRemotingContext = function (ctx) {
  return {
    accessToken: ctx.req.accessToken,
  };
}
```
- example usage
```shell
...
  var EMPTY_OPTIONS = {};
  var ModelCtor = ctx.method && ctx.method.ctor;
  if (!ModelCtor)
    return EMPTY_OPTIONS;
  if (typeof ModelCtor.createOptionsFromRemotingContext !== 'function')
    return EMPTY_OPTIONS;
  debug('createOptionsFromRemotingContext for %s', ctx.method.stringName);
  return ModelCtor.createOptionsFromRemotingContext(ctx);
}

/**
 * Disable remote invocation for the method with the given name.
 *
 * @param {String} name The name of the method.
 * @param {Boolean} isStatic Is the method static (eg. 'MyModel.myMethod')? Pass
...
```

#### <a name="apidoc.element.loopback.RoleMapping.createUpdates"></a>[function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>createUpdates (deltas, cb)](#apidoc.element.loopback.RoleMapping.createUpdates)
- description and source-code
```javascript
createUpdates = function (deltas, cb) {
  var Change = this.getChangeModel();
  var updates = [];
  var Model = this;
  var tasks = [];

  deltas.forEach(function(change) {
    change = new Change(change);
    var type = change.type();
    var update = {type: type, change: change};
    switch (type) {
      case Change.CREATE:
      case Change.UPDATE:
        tasks.push(function(cb) {
          Model.findById(change.modelId, function(err, inst) {
            if (err) return cb(err);
            if (!inst) {
              return cb &&
                cb(new Error(g.f('Missing data for change: %s', change.modelId)));
            }
            if (inst.toObject) {
              update.data = inst.toObject();
            } else {
              update.data = inst;
            }
            updates.push(update);
            cb();
          });
        });
        break;
      case Change.DELETE:
        updates.push(update);
        break;
    }
  });

  async.parallel(tasks, function(err) {
    if (err) return cb(err);
    cb(null, updates);
  });
}
```
- example usage
```shell
...

  if (diff && diff.deltas && diff.deltas.length) {
    debug('\tbuilding a list of updates');
    utils.uploadInChunks(
      diff.deltas,
      replicationChunkSize,
      function(smallArray, chunkCallback) {
        return sourceModel.createUpdates(smallArray, chunkCallback);
      },
      cb);
  } else {
    // nothing to replicate
    done();
  }
}
...
```

#### <a name="apidoc.element.loopback.RoleMapping.currentCheckpoint"></a>[function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>currentCheckpoint (cb)](#apidoc.element.loopback.RoleMapping.currentCheckpoint)
- description and source-code
```javascript
currentCheckpoint = function (cb) {
  var Checkpoint = this.getChangeModel().getCheckpointModel();
  Checkpoint.current(cb);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.RoleMapping.defineProperty"></a>[function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>defineProperty (prop, params)](#apidoc.element.loopback.RoleMapping.defineProperty)
- description and source-code
```javascript
defineProperty = function (prop, params) {
  if (this.dataSource) {
    this.dataSource.defineProperty(this.modelName, prop, params);
  } else {
    this.modelBuilder.defineProperty(this.modelName, prop, params);
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.RoleMapping.deleteAll"></a>[function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>deleteAll (where, cb)](#apidoc.element.loopback.RoleMapping.deleteAll)
- description and source-code
```javascript
function destroyAll(where, cb) {
  throwNotAttached(this.modelName, 'destroyAll');
}
```
- example usage
```shell
...
  Model.modelName, id);
debug('\tExpected revision: %s', change.rev);
debug('\tActual revision:   %s', rev);
conflicts.push(change);
return Change.rectifyModelChanges(Model.modelName, [id], cb);
    }

    Model.deleteAll(current.toObject(), options, function(err, result) {
if (err) return cb(err);

var count = result && result.count;
switch (count) {
  case 1:
    // The happy path, exactly one record was updated
    return cb();
...
```

#### <a name="apidoc.element.loopback.RoleMapping.deleteById"></a>[function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>deleteById (id, cb)](#apidoc.element.loopback.RoleMapping.deleteById)
- description and source-code
```javascript
function deleteById(id, cb) {
  throwNotAttached(this.modelName, 'deleteById');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.RoleMapping.destroyAll"></a>[function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>destroyAll (where, cb)](#apidoc.element.loopback.RoleMapping.destroyAll)
- description and source-code
```javascript
function destroyAll(where, cb) {
  throwNotAttached(this.modelName, 'destroyAll');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.RoleMapping.destroyById"></a>[function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>destroyById (id, cb)](#apidoc.element.loopback.RoleMapping.destroyById)
- description and source-code
```javascript
function deleteById(id, cb) {
  throwNotAttached(this.modelName, 'deleteById');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.RoleMapping.diff"></a>[function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>diff (since, remoteChanges, callback)](#apidoc.element.loopback.RoleMapping.diff)
- description and source-code
```javascript
diff = function (since, remoteChanges, callback) {
  var Change = this.getChangeModel();
  Change.diff(this.modelName, since, remoteChanges, callback);
}
```
- example usage
```shell
...
    },
  });
};

/**
 * Get a set of deltas and conflicts since the given checkpoint.
 *
 * See [Change.diff()](#change-diff) for details.
 *
 * @param  {Number}  since  Find deltas since this checkpoint.
 * @param  {Array}  remoteChanges  An array of change objects.
 * @callback {Function} callback Callback function called with '(err, result)' arguments.  Required.
 * @param {Error} err Error object; see [Error object](http://loopback.io/doc/en/lb2/Error-object.html).
 * @param {Object} result Object with 'deltas' and 'conflicts' properties; see [Change.diff()](#change-diff) for details.
 */
...
```

#### <a name="apidoc.element.loopback.RoleMapping.disableRemoteMethod"></a>[function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>disableRemoteMethod (name, isStatic)](#apidoc.element.loopback.RoleMapping.disableRemoteMethod)
- description and source-code
```javascript
disableRemoteMethod = function (name, isStatic) {
  deprecated('Model.disableRemoteMethod is deprecated. ' +
    'Use Model.disableRemoteMethodByName instead.');
  var key = this.sharedClass.getKeyFromMethodNameAndTarget(name, isStatic);
  this.sharedClass.disableMethodByName(key);
  this.emit('remoteMethodDisabled', this.sharedClass, key);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.RoleMapping.disableRemoteMethodByName"></a>[function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>disableRemoteMethodByName (name)](#apidoc.element.loopback.RoleMapping.disableRemoteMethodByName)
- description and source-code
```javascript
disableRemoteMethodByName = function (name) {
  this.sharedClass.disableMethodByName(name);
  this.emit('remoteMethodDisabled', this.sharedClass, name);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.RoleMapping.emit"></a>[function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>emit ()](#apidoc.element.loopback.RoleMapping.emit)
- description and source-code
```javascript
emit = function () { [native code] }
```
- example usage
```shell
...
    return new Model(data);
  });
  this.remotes().addClass(Model.sharedClass);
  if (Model.settings.trackChanges && Model.Change) {
    this.remotes().addClass(Model.Change.sharedClass);
  }
  clearHandlerCache(this);
  this.emit('modelRemoted', Model.sharedClass);
}

var self = this;
Model.on('remoteMethodDisabled', function(model, methodName) {
  self.emit('remoteMethodDisabled', model, methodName);
});
Model.on('remoteMethodAdded', function(model) {
...
```

#### <a name="apidoc.element.loopback.RoleMapping.enableChangeTracking"></a>[function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>enableChangeTracking ()](#apidoc.element.loopback.RoleMapping.enableChangeTracking)
- description and source-code
```javascript
enableChangeTracking = function () {
  var Model = this;
  var Change = this.Change || this._defineChangeModel();
  var cleanupInterval = Model.settings.changeCleanupInterval || 30000;

  assert(this.dataSource, 'Cannot enableChangeTracking(): ' + this.modelName +
    ' is not attached to a dataSource');

  var idName = this.getIdName();
  var idProp = this.definition.properties[idName];
  var idType = idProp && idProp.type;
  var idDefn = idProp && idProp.defaultFn;
  if (idType !== String || !(idDefn === 'uuid' || idDefn === 'guid')) {
    deprecated('The model ' + this.modelName + ' is tracking changes, ' +
      'which requires a string id with GUID/UUID default value.');
  }

  Model.observe('after save', rectifyOnSave);

  Model.observe('after delete', rectifyOnDelete);

  // Only run if the run time is server
  // Can switch off cleanup by setting the interval to -1
  if (runtime.isServer && cleanupInterval > 0) {
    // initial cleanup
    cleanup();

    // cleanup
    setInterval(cleanup, cleanupInterval);
  }

  function cleanup() {
    Model.rectifyAllChanges(function(err) {
      if (err) {
        Model.handleChangeError(err, 'cleanup');
      }
    });
  }
}
```
- example usage
```shell
...

  var PersistedModel = this;

  // enable change tracking (usually for replication)
  if (this.settings.trackChanges) {
    PersistedModel._defineChangeModel();
    PersistedModel.once('dataSourceAttached', function() {
      PersistedModel.enableChangeTracking();
    });
  } else if (this.settings.enableRemoteReplication) {
    PersistedModel._defineChangeModel();
  }

  PersistedModel.setupRemoting();
};
...
```

#### <a name="apidoc.element.loopback.RoleMapping.eventNames"></a>[function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>eventNames ()](#apidoc.element.loopback.RoleMapping.eventNames)
- description and source-code
```javascript
eventNames = function () { [native code] }
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.RoleMapping.exists"></a>[function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>exists (id, cb)](#apidoc.element.loopback.RoleMapping.exists)
- description and source-code
```javascript
function exists(id, cb) {
  throwNotAttached(this.modelName, 'exists');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.RoleMapping.extend"></a>[function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>extend (className, subclassProperties, subclassSettings)](#apidoc.element.loopback.RoleMapping.extend)
- description and source-code
```javascript
extend = function (className, subclassProperties, subclassSettings) {
  var properties = ModelClass.definition.properties;
  var settings = ModelClass.definition.settings;

  subclassProperties = subclassProperties || {};
  subclassSettings = subclassSettings || {};

  // Check if subclass redefines the ids
  var idFound = false;
  for (var k in subclassProperties) {
    if (subclassProperties[k] && subclassProperties[k].id) {
      idFound = true;
      break;
    }
  }

  // Merging the properties
  var keys = Object.keys(properties);
  for (var i = 0, n = keys.length; i < n; i++) {
    var key = keys[i];

    if (idFound && properties[key].id) {
      // don't inherit id properties
      continue;
    }
    if (subclassProperties[key] === undefined) {
      var baseProp = properties[key];
      var basePropCopy = baseProp;
      if (baseProp && typeof baseProp === 'object') {
        // Deep clone the base prop
        basePropCopy = mergeSettings(null, baseProp);
      }
      subclassProperties[key] = basePropCopy;
    }
  }

  // Merge the settings
  var originalSubclassSettings = subclassSettings;
  subclassSettings = mergeSettings(settings, subclassSettings);

  // Ensure 'base' is not inherited. Note we don't have to delete 'super'
  // as that is removed from settings by modelBuilder.define and thus
  // it is never inherited
  if (!originalSubclassSettings.base) {
    subclassSettings.base = ModelClass;
  }

  // Define the subclass
  var subClass = modelBuilder.define(className, subclassProperties, subclassSettings, ModelClass);

  // Calling the setup function
  if (typeof subClass.setup === 'function') {
    subClass.setup.call(subClass);
  }

  return subClass;
}
```
- example usage
```shell
...
* The base class for **all models**.
*
* **Inheriting from 'Model'**
*
* '''js
* var properties = {...};
* var options = {...};
* var MyModel = loopback.Model.extend('MyModel', properties, options);
* '''
*
* **Options**
*
*  - 'trackChanges' - If true, changes to the model will be tracked. **Required
* for replication.**
*
...
```

#### <a name="apidoc.element.loopback.RoleMapping.find"></a>[function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>find (filter, cb)](#apidoc.element.loopback.RoleMapping.find)
- description and source-code
```javascript
function find(filter, cb) {
  throwNotAttached(this.modelName, 'find');
}
```
- example usage
```shell
...

filter = filter || {};
filter.fields = {};
filter.where = filter.where || {};
filter.fields[idName] = true;

// TODO(ritch) this whole thing could be optimized a bit more
Change.find(changeFilter, function(err, changes) {
  if (err) return callback(err);
  if (!Array.isArray(changes) || changes.length === 0) return callback(null, []);
  var ids = changes.map(function(change) {
    return change.getModelId();
  });
  filter.where[idName] = {inq: ids};
  model.find(filter, function(err, models) {
...
```

#### <a name="apidoc.element.loopback.RoleMapping.findById"></a>[function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>findById (id, filter, cb)](#apidoc.element.loopback.RoleMapping.findById)
- description and source-code
```javascript
function findById(id, filter, cb) {
  throwNotAttached(this.modelName, 'findById');
}
```
- example usage
```shell
...
  var model = new ModelCtor(data);
  model.id = id;
  fn(null, model);
} else if (data) {
  fn(null, new ModelCtor(data));
} else if (id) {
  var filter = {};
  ModelCtor.findById(id, filter, options, function(err, model) {
    if (err) {
      fn(err);
    } else if (model) {
      fn(null, model);
    } else {
      err = new Error(g.f('could not find a model with apidoc.element.loopback.RoleMapping.findById %s', id));
      err.statusCode = 404;
...
```

#### <a name="apidoc.element.loopback.RoleMapping.findLastChange"></a>[function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>findLastChange (id, cb)](#apidoc.element.loopback.RoleMapping.findLastChange)
- description and source-code
```javascript
findLastChange = function (id, cb) {
  var Change = this.getChangeModel();
  Change.findOne({where: {modelId: id}}, cb);
}
```
- example usage
```shell
...
PersistedModel.findLastChange = function(id, cb) {
  var Change = this.getChangeModel();
  Change.findOne({where: {modelId: id}}, cb);
};

PersistedModel.updateLastChange = function(id, data, cb) {
  var self = this;
  this.findLastChange(id, function(err, inst) {
    if (err) return cb(err);
    if (!inst) {
      err = new Error(g.f('No change record found for %s with id %s',
        self.modelName, id));
      err.statusCode = 404;
      return cb(err);
    }
...
```

#### <a name="apidoc.element.loopback.RoleMapping.findOne"></a>[function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>findOne (filter, cb)](#apidoc.element.loopback.RoleMapping.findOne)
- description and source-code
```javascript
function findOne(filter, cb) {
  throwNotAttached(this.modelName, 'findOne');
}
```
- example usage
```shell
...
PersistedModel.rectifyChange = function(id, callback) {
  var Change = this.getChangeModel();
  Change.rectifyModelChanges(this.modelName, [id], callback);
};

PersistedModel.findLastChange = function(id, cb) {
  var Change = this.getChangeModel();
  Change.findOne({where: {modelId: id}}, cb);
};

PersistedModel.updateLastChange = function(id, data, cb) {
  var self = this;
  this.findLastChange(id, function(err, inst) {
    if (err) return cb(err);
    if (!inst) {
...
```

#### <a name="apidoc.element.loopback.RoleMapping.findOrCreate"></a>[function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>findOrCreate (query, data, callback)](#apidoc.element.loopback.RoleMapping.findOrCreate)
- description and source-code
```javascript
function findOrCreate(query, data, callback) {
  throwNotAttached(this.modelName, 'findOrCreate');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.RoleMapping.forEachProperty"></a>[function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>forEachProperty (cb)](#apidoc.element.loopback.RoleMapping.forEachProperty)
- description and source-code
```javascript
forEachProperty = function (cb) {
  var props = ModelClass.definition.properties;
  var keys = Object.keys(props);
  for (var i = 0, n = keys.length; i < n; i++) {
    cb(keys[i], props[keys[i]]);
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.RoleMapping.getApp"></a>[function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>getApp (callback)](#apidoc.element.loopback.RoleMapping.getApp)
- description and source-code
```javascript
getApp = function (callback) {
  var self = this;
  self._runWhenAttachedToApp(function(app) {
    assert(self.app);
    assert.equal(app, self.app);
    callback(null, app);
  });
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.RoleMapping.getChangeModel"></a>[function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>getChangeModel ()](#apidoc.element.loopback.RoleMapping.getChangeModel)
- description and source-code
```javascript
getChangeModel = function () {
  var changeModel = this.Change;
  var isSetup = changeModel && changeModel.dataSource;

  assert(isSetup, 'Cannot get a setup Change model for ' + this.modelName);

  return changeModel;
}
```
- example usage
```shell
...
 * @param  {Array}  remoteChanges  An array of change objects.
 * @callback {Function} callback Callback function called with '(err, result)' arguments.  Required.
 * @param {Error} err Error object; see [Error object](http://loopback.io/doc/en/lb2/Error-object.html).
 * @param {Object} result Object with 'deltas' and 'conflicts' properties; see [Change.diff()](#change-diff) for details.
 */

PersistedModel.diff = function(since, remoteChanges, callback) {
  var Change = this.getChangeModel();
  Change.diff(this.modelName, since, remoteChanges, callback);
};

/**
 * Get the changes to a model since the specified checkpoint. Provide a filter object
 * to reduce the number of results returned.
 * @param  {Number}   since    Return only changes since this checkpoint.
...
```

#### <a name="apidoc.element.loopback.RoleMapping.getDataSource"></a>[function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>getDataSource ()](#apidoc.element.loopback.RoleMapping.getDataSource)
- description and source-code
```javascript
getDataSource = function () {
  return this.dataSource;
}
```
- example usage
```shell
...
 * connector that defines it.  Otherwise, uses the default lookup.
 * Override this method to handle complex IDs.
 *
 * @param {*} val The 'id' value. Will be converted to the type that the 'id' property specifies.
 */

PersistedModel.prototype.setId = function(val) {
  var ds = this.getDataSource();
  this[this.getIdName()] = val;
};

/**
 * Get the 'id' value for the 'PersistedModel'.
 *
 * @returns {*} The 'id' value
...
```

#### <a name="apidoc.element.loopback.RoleMapping.getIdName"></a>[function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>getIdName ()](#apidoc.element.loopback.RoleMapping.getIdName)
- description and source-code
```javascript
getIdName = function () {
  var Model = this;
  var ds = Model.getDataSource();

  if (ds.idName) {
    return ds.idName(Model.modelName);
  } else {
    return 'id';
  }
}
```
- example usage
```shell
...
 * Override this method to handle complex IDs.
 *
 * @param {*} val The 'id' value. Will be converted to the type that the 'id' property specifies.
 */

PersistedModel.prototype.setId = function(val) {
  var ds = this.getDataSource();
  this[this.getIdName()] = val;
};

/**
 * Get the 'id' value for the 'PersistedModel'.
 *
 * @returns {*} The 'id' value
 */
...
```

#### <a name="apidoc.element.loopback.RoleMapping.getMaxListeners"></a>[function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>getMaxListeners ()](#apidoc.element.loopback.RoleMapping.getMaxListeners)
- description and source-code
```javascript
getMaxListeners = function () { [native code] }
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.RoleMapping.getPropertyType"></a>[function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>getPropertyType (propName)](#apidoc.element.loopback.RoleMapping.getPropertyType)
- description and source-code
```javascript
getPropertyType = function (propName) {
  var prop = this.definition.properties[propName];
  if (!prop) {
    // The property is not part of the definition
    return null;
  }
  if (!prop.type) {
    throw new Error(g.f('Type not defined for property %s.%s', this.modelName, propName));
    // return null;
  }
  return prop.type.name;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.RoleMapping.getSourceId"></a>[function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>getSourceId (cb)](#apidoc.element.loopback.RoleMapping.getSourceId)
- description and source-code
```javascript
getSourceId = function (cb) {
  var dataSource = this.dataSource;
  if (!dataSource) {
    this.once('dataSourceAttached', this.getSourceId.bind(this, cb));
  }
  assert(
    dataSource.connector.name,
    'Model.getSourceId: cannot get id without dataSource.connector.name'
  );
  var id = [dataSource.connector.name, this.modelName].join('-');
  cb(null, id);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.RoleMapping.handleChangeError"></a>[function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>handleChangeError (err, operationName)](#apidoc.element.loopback.RoleMapping.handleChangeError)
- description and source-code
```javascript
handleChangeError = function (err, operationName) {
  if (!err) return;
  this.emit('error', err, operationName);
}
```
- example usage
```shell
...
    // cleanup
    setInterval(cleanup, cleanupInterval);
  }

  function cleanup() {
    Model.rectifyAllChanges(function(err) {
      if (err) {
        Model.handleChangeError(err, 'cleanup');
      }
    });
  }
};

function rectifyOnSave(ctx, next) {
  var instance = ctx.instance || ctx.currentInstance;
...
```

#### <a name="apidoc.element.loopback.RoleMapping.hasManyRemoting"></a>[function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>hasManyRemoting (relationName, relation, define)](#apidoc.element.loopback.RoleMapping.hasManyRemoting)
- description and source-code
```javascript
hasManyRemoting = function (relationName, relation, define) {
  var pathName = (relation.options.http && relation.options.http.path) || relationName;
  var toModelName = relation.modelTo.modelName;

  var findByIdFunc = this.prototype['__findById__' + relationName];
  define('__findById__' + relationName, {
    isStatic: false,
    http: {verb: 'get', path: '/' + pathName + '/:fk'},
    accepts: [
      {
        arg: 'fk', type: 'any',
        description: format('Foreign key for %s', relationName),
        required: true,
        http: {source: 'path'},
      },
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Find a related item by id for %s.', relationName),
    accessType: 'READ',
    returns: {arg: 'result', type: toModelName, root: true},
    rest: {after: convertNullToNotFoundError.bind(null, toModelName)},
  }, findByIdFunc);

  var destroyByIdFunc = this.prototype['__destroyById__' + relationName];
  define('__destroyById__' + relationName, {
    isStatic: false,
    http: {verb: 'delete', path: '/' + pathName + '/:fk'},
    accepts: [
      {
        arg: 'fk', type: 'any',
        description: format('Foreign key for %s', relationName),
        required: true,
        http: {source: 'path'},
      },
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Delete a related item by id for %s.', relationName),
    accessType: 'WRITE',
    returns: [],
  }, destroyByIdFunc);

  var updateByIdFunc = this.prototype['__updateById__' + relationName];
  define('__updateById__' + relationName, {
    isStatic: false,
    http: {verb: 'put', path: '/' + pathName + '/:fk'},
    accepts: [
      {arg: 'fk', type: 'any',
        description: format('Foreign key for %s', relationName),
        required: true,
        http: {source: 'path'}},
      {arg: 'data', type: 'object', model: toModelName, http: {source: 'body'}},
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Update a related item by id for %s.', relationName),
    accessType: 'WRITE',
    returns: {arg: 'result', type: toModelName, root: true},
  }, updateByIdFunc);

  if (relation.modelThrough || relation.type === 'referencesMany') {
    var modelThrough = relation.modelThrough || relation.modelTo;

    var accepts = [];
    if (relation.type === 'hasMany' && relation.modelThrough) {
      // Restrict: only hasManyThrough relation can have additional properties
      accepts.push({
        arg: 'data', type: 'object', model: modelThrough.modelName,
        http: {source: 'body'},
      });
    }

    var addFunc = this.prototype['__link__' + relationName];
    define('__link__' + relationName, {
      isStatic: false,
      http: {verb: 'put', path: '/' + pathName + '/rel/:fk'},
      accepts: [{arg: 'fk', type: 'any',
        description: format('Foreign key for %s', relationName),
        required: true,
        http: {source: 'path'}},
      ].concat(accepts).concat([
        {arg: 'options', type: 'object', http: 'optionsFromRequest'},
      ]),
      description: format('Add a related item by id for %s.', relationName),
      accessType: 'WRITE',
      returns: {arg: relationName, type: modelThrough.modelName, root: true},
    }, addFunc);

    var removeFunc = this.prototype['__unlink__' + relationName];
    define('__unlink__' + relationName, {
      isStatic: false,
      http: {verb: 'delete', path: '/' + pathName + '/rel/:fk'},
      accepts: [
        {
          arg: 'fk', type: 'any',
          description: format('Foreign key for %s', relationName),
          required: true,
          http: {source: 'path'},
        },
        {arg: 'options', type: 'object', http: 'optionsFromRequest'},
      ],
      description: format('Remove the %s relation to an item by id.', relationName),
      accessType: 'WRITE',
      returns: [],
    }, removeFunc);

    // FIXME: [rfeng] How to map a function with callback(err, true|false) to HEAD?
    // true --> 200 and false --> 404?
    var existsFunc = this.prototype['__exists__' + relatio ...
```
- example usage
```shell
...
    relation.type === 'embedsOne'
  ) {
    ModelCtor.hasOneRemoting(relationName, relation, define);
  } else if (
    relation.type === 'hasMany' ||
    relation.type === 'embedsMany' ||
    relation.type === 'referencesMany') {
    ModelCtor.hasManyRemoting(relationName, relation, define);
  }
}

// handle scopes
var scopes = ModelCtor.scopes || {};
for (var scopeName in scopes) {
  ModelCtor.scopeRemoting(scopeName, scopes[scopeName], define);
...
```

#### <a name="apidoc.element.loopback.RoleMapping.hasOneRemoting"></a>[function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>hasOneRemoting (relationName, relation, define)](#apidoc.element.loopback.RoleMapping.hasOneRemoting)
- description and source-code
```javascript
hasOneRemoting = function (relationName, relation, define) {
  var pathName = (relation.options.http && relation.options.http.path) || relationName;
  var toModelName = relation.modelTo.modelName;

  define('__get__' + relationName, {
    isStatic: false,
    http: {verb: 'get', path: '/' + pathName},
    accepts: [
      {arg: 'refresh', type: 'boolean', http: {source: 'query'}},
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Fetches hasOne relation %s.', relationName),
    accessType: 'READ',
    returns: {arg: relationName, type: relation.modelTo.modelName, root: true},
    rest: {after: convertNullToNotFoundError.bind(null, toModelName)},
  });

  define('__create__' + relationName, {
    isStatic: false,
    http: {verb: 'post', path: '/' + pathName},
    accepts: [
      {
        arg: 'data', type: 'object', model: toModelName,
        http: {source: 'body'},
      },
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Creates a new instance in %s of this model.', relationName),
    accessType: 'WRITE',
    returns: {arg: 'data', type: toModelName, root: true},
  });

  define('__update__' + relationName, {
    isStatic: false,
    http: {verb: 'put', path: '/' + pathName},
    accepts: [
      {
        arg: 'data', type: 'object', model: toModelName,
        http: {source: 'body'},
      },
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Update %s of this model.', relationName),
    accessType: 'WRITE',
    returns: {arg: 'data', type: toModelName, root: true},
  });

  define('__destroy__' + relationName, {
    isStatic: false,
    http: {verb: 'delete', path: '/' + pathName},
    accepts: [
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Deletes %s of this model.', relationName),
    accessType: 'WRITE',
  });
}
```
- example usage
```shell
...
  var relation = relations[relationName];
  if (relation.type === 'belongsTo') {
    ModelCtor.belongsToRemoting(relationName, relation, define);
  } else if (
    relation.type === 'hasOne' ||
    relation.type === 'embedsOne'
  ) {
    ModelCtor.hasOneRemoting(relationName, relation, define);
  } else if (
    relation.type === 'hasMany' ||
    relation.type === 'embedsMany' ||
    relation.type === 'referencesMany') {
    ModelCtor.hasManyRemoting(relationName, relation, define);
  }
}
...
```

#### <a name="apidoc.element.loopback.RoleMapping.isHiddenProperty"></a>[function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>isHiddenProperty (propertyName)](#apidoc.element.loopback.RoleMapping.isHiddenProperty)
- description and source-code
```javascript
isHiddenProperty = function (propertyName) {
  var Model = this;
  var settings = Model.definition && Model.definition.settings;
  var hiddenProperties = settings && (settings.hiddenProperties || settings.hidden);
  if (Array.isArray(hiddenProperties)) {
    // Cache the hidden properties as an object for quick lookup
    settings.hiddenProperties = {};
    for (var i = 0; i < hiddenProperties.length; i++) {
      settings.hiddenProperties[hiddenProperties[i]] = true;
    }
    hiddenProperties = settings.hiddenProperties;
  }
  if (hiddenProperties) {
    return hiddenProperties[propertyName];
  } else {
    return false;
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.RoleMapping.isProtectedProperty"></a>[function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>isProtectedProperty (propertyName)](#apidoc.element.loopback.RoleMapping.isProtectedProperty)
- description and source-code
```javascript
isProtectedProperty = function (propertyName) {
  var Model = this;
  var settings = Model.definition && Model.definition.settings;
  var protectedProperties = settings && (settings.protectedProperties || settings.protected);
  if (Array.isArray(protectedProperties)) {
    // Cache the protected properties as an object for quick lookup
    settings.protectedProperties = {};
    for (var i = 0; i < protectedProperties.length; i++) {
      settings.protectedProperties[protectedProperties[i]] = true;
    }
    protectedProperties = settings.protectedProperties;
  }
  if (protectedProperties) {
    return protectedProperties[propertyName];
  } else {
    return false;
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.RoleMapping.listenerCount"></a>[function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>listenerCount ()](#apidoc.element.loopback.RoleMapping.listenerCount)
- description and source-code
```javascript
listenerCount = function () { [native code] }
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.RoleMapping.listeners"></a>[function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>listeners ()](#apidoc.element.loopback.RoleMapping.listeners)
- description and source-code
```javascript
listeners = function () { [native code] }
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.RoleMapping.mixin"></a>[function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>mixin (anotherClass, options)](#apidoc.element.loopback.RoleMapping.mixin)
- description and source-code
```javascript
mixin = function (anotherClass, options) {
  if (typeof anotherClass === 'string') {
    this.modelBuilder.mixins.applyMixin(this, anotherClass, options);
  } else {
    if (anotherClass.prototype instanceof ModelBaseClass) {
      var props = anotherClass.definition.properties;
      for (var i in props) {
        if (this.definition.properties[i]) {
          continue;
        }
        this.defineProperty(i, props[i]);
      }
    }
    return jutil.mixin(this, anotherClass, options);
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.RoleMapping.nestRemoting"></a>[function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>nestRemoting (relationName, options, filterCallback)](#apidoc.element.loopback.RoleMapping.nestRemoting)
- description and source-code
```javascript
nestRemoting = function (relationName, options, filterCallback) {
  if (typeof options === 'function' && !filterCallback) {
    filterCallback = options;
    options = {};
  }
  options = options || {};

  var regExp = /^__([^_]+)__([^_]+)$/;
  var relation = this.relations[relationName];
  if (relation && relation.modelTo && relation.modelTo.sharedClass) {
    var self = this;
    var sharedClass = this.sharedClass;
    var sharedToClass = relation.modelTo.sharedClass;
    var toModelName = relation.modelTo.modelName;

    var pathName = options.pathName || relation.options.path || relationName;
    var paramName = options.paramName || 'nk';

    var http = [].concat(sharedToClass.http || [])[0];
    var httpPath, acceptArgs;

    if (relation.multiple) {
      httpPath = pathName + '/:' + paramName;
      acceptArgs = [
        {
          arg: paramName, type: 'any', http: {source: 'path'},
          description: format('Foreign key for %s.',  relation.name),
          required: true,
        },
      ];
    } else {
      httpPath = pathName;
      acceptArgs = [];
    }

    if (httpPath[0] !== '/') {
      httpPath = '/' + httpPath;
    }

    // A method should return the method name to use, if it is to be
    // included as a nested method - a falsy return value will skip.
    var filter = filterCallback || options.filterMethod || function(method, relation) {
      var matches = method.name.match(regExp);
      if (matches) {
        return '__' + matches[1] + '__' + relation.name + '__' + matches[2];
      }
    };

    sharedToClass.methods().forEach(function(method) {
      var methodName;
      if (!method.isStatic && (methodName = filter(method, relation))) {
        var prefix = relation.multiple ? '__findById__' : '__get__';
        var getterName = options.getterName || (prefix + relationName);

        var getterFn = relation.modelFrom.prototype[getterName];
        if (typeof getterFn !== 'function') {
          throw new Error(g.f('Invalid remote method: '%s'', getterName));
        }

        var nestedFn = relation.modelTo.prototype[method.name];
        if (typeof nestedFn !== 'function') {
          throw new Error(g.f('Invalid remote method: '%s'', method.name));
        }

        var opts = {};

        opts.accepts = acceptArgs.concat(method.accepts || []);
        opts.returns = [].concat(method.returns || []);
        opts.description = method.description;
        opts.accessType = method.accessType;
        opts.rest = extend({}, method.rest || {});
        opts.rest.delegateTo = method;

        opts.http = [];
        var routes = [].concat(method.http || []);
        routes.forEach(function(route) {
          if (route.path) {
            var copy = extend({}, route);
            copy.path = httpPath + route.path;
            opts.http.push(copy);
          }
        });

        if (relation.multiple) {
          sharedClass.defineMethod(methodName, opts, function(fkId) {
            var args = Array.prototype.slice.call(arguments, 1);
            var last = args[args.length - 1];
            var cb = typeof last === 'function' ? last : null;
            this[getterName](fkId, function(err, inst) {
              if (err && cb) return cb(err);
              if (inst instanceof relation.modelTo) {
                try {
                  nestedFn.apply(inst, args);
                } catch (err) {
                  if (cb) return cb(err);
                }
              } else if (cb) {
                cb(err, null);
              }
            });
          }, method.isStatic);
        } else {
          sharedClass.defineMethod(methodName, opts, function() {
            var args = Array.prototype.slice.call(arguments);
            var last = args[args.length - 1];
            var cb = typeof last === 'function' ? last : null;
            this[getterName](function(err, inst) {
              if (err && cb) return cb(err);
              if (inst instanceof relation.modelTo) {
                try {
                  nestedFn.apply(inst, args);
                } catch (err) {
                  if (cb) return ...
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.RoleMapping.notifyObserversAround"></a>[function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>notifyObserversAround (operation, context, fn, callback)](#apidoc.element.loopback.RoleMapping.notifyObserversAround)
- description and source-code
```javascript
notifyObserversAround = function (operation, context, fn, callback) {
  var self = this;
  context = context || {};
  // Add callback to the context object so that an observer can skip other
  // ones by calling the callback function directly and not calling next
  if (context.end === undefined) {
    context.end = callback;
  }
  // First notify before observers
  return self.notifyObserversOf('before ' + operation, context,
    function(err, context) {
      if (err) return callback(err);

      function cbForWork(err) {
        var args = [].slice.call(arguments, 0);
        if (err) return callback.apply(null, args);
        // Find the list of params from the callback in addition to err
        var returnedArgs = args.slice(1);
        // Set up the array of results
        context.results = returnedArgs;
        // Notify after observers
        self.notifyObserversOf('after ' + operation, context,
          function(err, context) {
            if (err) return callback(err, context);
            var results = returnedArgs;
            if (context && Array.isArray(context.results)) {
              // Pickup the results from context
              results = context.results;
            }
            // Build the list of params for final callback
            var args = [err].concat(results);
            callback.apply(null, args);
          });
      }

      if (fn.length === 1) {
        // fn(done)
        fn(cbForWork);
      } else {
        // fn(context, done)
        fn(context, cbForWork);
      }
    });
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.RoleMapping.notifyObserversOf"></a>[function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>notifyObserversOf (operation, context, callback)](#apidoc.element.loopback.RoleMapping.notifyObserversOf)
- description and source-code
```javascript
notifyObserversOf = function (operation, context, callback) {
  var self = this;
  if (!callback) callback = utils.createPromiseCallback();

  function createNotifier(op) {
    return function(ctx, done) {
      if (typeof ctx === 'function' && done === undefined) {
        done = ctx;
        ctx = context;
      }
      self.notifyObserversOf(op, context, done);
    };
  }

  if (Array.isArray(operation)) {
    var tasks = [];
    for (var i = 0, n = operation.length; i < n; i++) {
      tasks.push(createNotifier(operation[i]));
    }
    return async.waterfall(tasks, callback);
  }

  var observers = this._observers && this._observers[operation];

  this._notifyBaseObservers(operation, context, function doNotify(err) {
    if (err) return callback(err, context);
    if (!observers || !observers.length) return callback(null, context);

    async.eachSeries(
      observers,
      function notifySingleObserver(fn, next) {
        var retval = fn(context, next);
        if (retval && typeof retval.then === 'function') {
          retval.then(
            function() { next(); return null; },
            next // error handler
          );
        }
      },
      function(err) { callback(err, context); }
    );
  });
  return callback.promise;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.RoleMapping.observe"></a>[function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>observe (operation, listener)](#apidoc.element.loopback.RoleMapping.observe)
- description and source-code
```javascript
observe = function (operation, listener) {
  this._observers = this._observers || {};
  if (!this._observers[operation]) {
    this._observers[operation] = [];
  }

  this._observers[operation].push(listener);
}
```
- example usage
```shell
...
var idType = idProp && idProp.type;
var idDefn = idProp && idProp.defaultFn;
if (idType !== String || !(idDefn === 'uuid' || idDefn === 'guid')) {
  deprecated('The model ' + this.modelName + ' is tracking changes, ' +
    'which requires a string id with GUID/UUID default value.');
}

Model.observe('after save', rectifyOnSave);

Model.observe('after delete', rectifyOnDelete);

// Only run if the run time is server
// Can switch off cleanup by setting the interval to -1
if (runtime.isServer && cleanupInterval > 0) {
  // initial cleanup
...
```

#### <a name="apidoc.element.loopback.RoleMapping.on"></a>[function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>on ()](#apidoc.element.loopback.RoleMapping.on)
- description and source-code
```javascript
on = function () { [native code] }
```
- example usage
```shell
...
    this.remotes().addClass(Model.Change.sharedClass);
  }
  clearHandlerCache(this);
  this.emit('modelRemoted', Model.sharedClass);
}

var self = this;
Model.on('remoteMethodDisabled', function(model, methodName) {
  self.emit('remoteMethodDisabled', model, methodName);
});
Model.on('remoteMethodAdded', function(model) {
  self.emit('remoteMethodAdded', model);
});

Model.shared = isPublic;
...
```

#### <a name="apidoc.element.loopback.RoleMapping.once"></a>[function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>once ()](#apidoc.element.loopback.RoleMapping.once)
- description and source-code
```javascript
once = function () { [native code] }
```
- example usage
```shell
...
    remotes.afterError(className + '.' + name, fn);
  });
};

ModelCtor._runWhenAttachedToApp = function(fn) {
  if (this.app) return fn(this.app);
  var self = this;
  self.once('attached', function() {
    fn(self.app);
  });
};

if ('injectOptionsFromRemoteContext' in options) {
  console.warn(g.f(
    '%s is using model setting %s which is no longer available.',
...
```

#### <a name="apidoc.element.loopback.RoleMapping.patchOrCreate"></a>[function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>patchOrCreate (data, callback)](#apidoc.element.loopback.RoleMapping.patchOrCreate)
- description and source-code
```javascript
function upsert(data, callback) {
  throwNotAttached(this.modelName, 'upsert');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.RoleMapping.patchOrCreateWithWhere"></a>[function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>patchOrCreateWithWhere (where, data, callback)](#apidoc.element.loopback.RoleMapping.patchOrCreateWithWhere)
- description and source-code
```javascript
function upsertWithWhere(where, data, callback) {
  throwNotAttached(this.modelName, 'upsertWithWhere');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.RoleMapping.prependListener"></a>[function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>prependListener ()](#apidoc.element.loopback.RoleMapping.prependListener)
- description and source-code
```javascript
prependListener = function () { [native code] }
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.RoleMapping.prependOnceListener"></a>[function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>prependOnceListener ()](#apidoc.element.loopback.RoleMapping.prependOnceListener)
- description and source-code
```javascript
prependOnceListener = function () { [native code] }
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.RoleMapping.rectifyAllChanges"></a>[function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>rectifyAllChanges (callback)](#apidoc.element.loopback.RoleMapping.rectifyAllChanges)
- description and source-code
```javascript
rectifyAllChanges = function (callback) {
  this.getChangeModel().rectifyAll(callback);
}
```
- example usage
```shell
...
    cleanup();

    // cleanup
    setInterval(cleanup, cleanupInterval);
  }

  function cleanup() {
    Model.rectifyAllChanges(function(err) {
      if (err) {
        Model.handleChangeError(err, 'cleanup');
      }
    });
  }
};
...
```

#### <a name="apidoc.element.loopback.RoleMapping.rectifyChange"></a>[function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>rectifyChange (id, callback)](#apidoc.element.loopback.RoleMapping.rectifyChange)
- description and source-code
```javascript
rectifyChange = function (id, callback) {
  var Change = this.getChangeModel();
  Change.rectifyModelChanges(this.modelName, [id], callback);
}
```
- example usage
```shell
...
  debug('rectifyOnSave %s -> ' + (id ? 'id %j' : '%s'),
    ctx.Model.modelName, id ? id : 'ALL');
  debug('context instance:%j currentInstance:%j where:%j data %j',
    ctx.instance, ctx.currentInstance, ctx.where, ctx.data);
}

if (id) {
  ctx.Model.rectifyChange(id, reportErrorAndNext);
} else {
  ctx.Model.rectifyAllChanges(reportErrorAndNext);
}

function reportErrorAndNext(err) {
  if (err) {
    ctx.Model.handleChangeError(err, 'after save');
...
```

#### <a name="apidoc.element.loopback.RoleMapping.registerProperty"></a>[function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>registerProperty (propertyName)](#apidoc.element.loopback.RoleMapping.registerProperty)
- description and source-code
```javascript
registerProperty = function (propertyName) {
  var properties = modelDefinition.build();
  var prop = properties[propertyName];
  var DataType = prop.type;
  if (!DataType) {
    throw new Error(g.f('Invalid type for property %s', propertyName));
  }

  if (prop.required) {
    var requiredOptions = typeof prop.required === 'object' ? prop.required : undefined;
    ModelClass.validatesPresenceOf(propertyName, requiredOptions);
  }

  Object.defineProperty(ModelClass.prototype, propertyName, {
    get: function() {
      if (ModelClass.getter[propertyName]) {
        return ModelClass.getter[propertyName].call(this); // Try getter first
      } else {
        return this.__data && this.__data[propertyName]; // Try __data
      }
    },
    set: function(value) {
      var DataType = ModelClass.definition.properties[propertyName].type;
      if (Array.isArray(DataType) || DataType === Array) {
        DataType = List;
      } else if (DataType === Date) {
        DataType = DateType;
      } else if (DataType === Boolean) {
        DataType = BooleanType;
      } else if (typeof DataType === 'string') {
        DataType = modelBuilder.resolveType(DataType);
      }

      var persistUndefinedAsNull = ModelClass.definition.settings.persistUndefinedAsNull;
      if (value === undefined && persistUndefinedAsNull) {
        value = null;
      }

      if (ModelClass.setter[propertyName]) {
        ModelClass.setter[propertyName].call(this, value); // Try setter first
      } else {
        this.__data = this.__data || {};
        if (value === null || value === undefined) {
          this.__data[propertyName] = value;
        } else {
          if (DataType === List) {
            this.__data[propertyName] = DataType(value, properties[propertyName].type, this.__data);
          } else {
            // Assume the type constructor handles Constructor() call
            // If not, we should call new DataType(value).valueOf();
            this.__data[propertyName] = (value instanceof DataType) ? value : DataType(value);
          }
        }
      }
    },
    configurable: true,
    enumerable: true,
  });

  // FIXME: [rfeng] Do we need to keep the raw data?
  // Use $ as the prefix to avoid conflicts with properties such as _id
  Object.defineProperty(ModelClass.prototype, '$' + propertyName, {
    get: function() {
      return this.__data && this.__data[propertyName];
    },
    set: function(value) {
      if (!this.__data) {
        this.__data = {};
      }
      this.__data[propertyName] = value;
    },
    configurable: true,
    enumerable: false,
  });
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.RoleMapping.remoteMethod"></a>[function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>remoteMethod (name, options)](#apidoc.element.loopback.RoleMapping.remoteMethod)
- description and source-code
```javascript
remoteMethod = function (name, options) {
  if (options.isStatic === undefined) {
    var m = name.match(/^prototype\.(.*)$/);
    options.isStatic = !m;
    name = options.isStatic ? name : m[1];
  }

  if (options.accepts) {
    options = extend({}, options);
    options.accepts = setupOptionsArgs(options.accepts);
  }

  this.sharedClass.defineMethod(name, options);
  this.emit('remoteMethodAdded', this.sharedClass);
}
```
- example usage
```shell
...
  /**
* Enable remote invocation for the specified method.
* See [Remote methods](http://loopback.io/doc/en/lb2/Remote-methods.html) for more information.
*
* Static method example:
* '''js
* Model.myMethod();
* Model.remoteMethod('myMethod');
* '''
*
* @param {String} name The name of the method.
* @param {Object} options The remoting options.
* See [Remote methods - Options](http://loopback.io/doc/en/lb2/Remote-methods.html#options).
*/
...
```

#### <a name="apidoc.element.loopback.RoleMapping.remove"></a>[function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>remove (where, cb)](#apidoc.element.loopback.RoleMapping.remove)
- description and source-code
```javascript
function destroyAll(where, cb) {
  throwNotAttached(this.modelName, 'destroyAll');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.RoleMapping.removeAllListeners"></a>[function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>removeAllListeners ()](#apidoc.element.loopback.RoleMapping.removeAllListeners)
- description and source-code
```javascript
removeAllListeners = function () { [native code] }
```
- example usage
```shell
...

var idName = this.getIdName();
var Model = this;
var changes = new PassThrough({objectMode: true});
var writeable = true;

changes.destroy = function() {
  changes.removeAllListeners('error');
  changes.removeAllListeners('end');
  writeable = false;
  changes = null;
};

changes.on('error', function() {
  writeable = false;
...
```

#### <a name="apidoc.element.loopback.RoleMapping.removeById"></a>[function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>removeById (id, cb)](#apidoc.element.loopback.RoleMapping.removeById)
- description and source-code
```javascript
function deleteById(id, cb) {
  throwNotAttached(this.modelName, 'deleteById');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.RoleMapping.removeListener"></a>[function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>removeListener ()](#apidoc.element.loopback.RoleMapping.removeListener)
- description and source-code
```javascript
removeListener = function () { [native code] }
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.RoleMapping.removeObserver"></a>[function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>removeObserver (operation, listener)](#apidoc.element.loopback.RoleMapping.removeObserver)
- description and source-code
```javascript
removeObserver = function (operation, listener) {
  if (!(this._observers && this._observers[operation])) return;

  var index = this._observers[operation].indexOf(listener);
  if (index !== -1) {
    return this._observers[operation].splice(index, 1);
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.RoleMapping.replaceById"></a>[function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>replaceById (id, data, cb)](#apidoc.element.loopback.RoleMapping.replaceById)
- description and source-code
```javascript
function replaceById(id, data, cb) {
  throwNotAttached(this.modelName, 'replaceById');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.RoleMapping.replaceOrCreate"></a>[function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>replaceOrCreate (data, callback)](#apidoc.element.loopback.RoleMapping.replaceOrCreate)
- description and source-code
```javascript
function replaceOrCreate(data, callback) {
  throwNotAttached(this.modelName, 'replaceOrCreate');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.RoleMapping.replicate"></a>[function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>replicate (since, targetModel, options, callback)](#apidoc.element.loopback.RoleMapping.replicate)
- description and source-code
```javascript
replicate = function (since, targetModel, options, callback) {
  var lastArg = arguments[arguments.length - 1];

  if (typeof lastArg === 'function' && arguments.length > 1) {
    callback = lastArg;
  }

  if (typeof since === 'function' && since.modelName) {
    targetModel = since;
    since = -1;
  }

  if (typeof since !== 'object') {
    since = {source: since, target: since};
  }

  if (typeof options === 'function') {
    options = {};
  }

  options = options || {};

  var sourceModel = this;
  callback = callback || utils.createPromiseCallback();

  debug('replicating %s since %s to %s since %s',
    sourceModel.modelName,
    since.source,
    targetModel.modelName,
    since.target);
  if (options.filter) {
    debug('\twith filter %j', options.filter);
  }

  // In order to avoid a race condition between the replication and
  // other clients modifying the data, we must create the new target
  // checkpoint as the first step of the replication process.
  // As a side-effect of that, the replicated changes are associated
  // with the new target checkpoint. This is actually desired behaviour,
  // because that way clients replicating *from* the target model
  // since the new checkpoint will pick these changes up.
  // However, it increases the likelihood of (false) conflicts being detected.
  // In order to prevent that, we run the replication multiple times,
  // until no changes were replicated, but at most MAX_ATTEMPTS times
  // to prevent starvation. In most cases, the second run will find no changes
  // to replicate and we are done.
  var MAX_ATTEMPTS = 3;

  run(1, since);
  return callback.promise;

  function run(attempt, since) {
    debug('\titeration #%s', attempt);
    tryReplicate(sourceModel, targetModel, since, options, next);

    function next(err, conflicts, cps, updates) {
      var finished = err || conflicts.length ||
        !updates || updates.length === 0 ||
        attempt >= MAX_ATTEMPTS;

      if (finished)
        return callback(err, conflicts, cps);
      run(attempt + 1, cps);
    }
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.RoleMapping.resolveRelatedModels"></a>[function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>resolveRelatedModels ()](#apidoc.element.loopback.RoleMapping.resolveRelatedModels)
- description and source-code
```javascript
resolveRelatedModels = function () {
  if (!this.userModel) {
    var reg = this.registry;
    this.roleModel = reg.getModelByType('Role');
    this.userModel = reg.getModelByType('User');
    this.applicationModel = reg.getModelByType('Application');
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.RoleMapping.scopeRemoting"></a>[function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>scopeRemoting (scopeName, scope, define)](#apidoc.element.loopback.RoleMapping.scopeRemoting)
- description and source-code
```javascript
scopeRemoting = function (scopeName, scope, define) {
  var pathName =
    (scope.options && scope.options.http && scope.options.http.path) || scopeName;

  var isStatic = scope.isStatic;
  var toModelName = scope.modelTo.modelName;

  // https://github.com/strongloop/loopback/issues/811
  // Check if the scope is for a hasMany relation
  var relation = this.relations[scopeName];
  if (relation && relation.modelTo) {
    // For a relation with through model, the toModelName should be the one
    // from the target model
    toModelName = relation.modelTo.modelName;
  }

  define('__get__' + scopeName, {
    isStatic: isStatic,
    http: {verb: 'get', path: '/' + pathName},
    accepts: [
      {arg: 'filter', type: 'object'},
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Queries %s of %s.', scopeName, this.modelName),
    accessType: 'READ',
    returns: {arg: scopeName, type: [toModelName], root: true},
  });

  define('__create__' + scopeName, {
    isStatic: isStatic,
    http: {verb: 'post', path: '/' + pathName},
    accepts: [
      {
        arg: 'data',
        type: 'object',
        allowArray: true,
        model: toModelName,
        http: {source: 'body'},
      },
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Creates a new instance in %s of this model.', scopeName),
    accessType: 'WRITE',
    returns: {arg: 'data', type: toModelName, root: true},
  });

  define('__delete__' + scopeName, {
    isStatic: isStatic,
    http: {verb: 'delete', path: '/' + pathName},
    accepts: [
      {
        arg: 'where', type: 'object',
        // The "where" argument is not exposed in the REST API
        // but we need to provide a value so that we can pass "options"
        // as the third argument.
        http: function(ctx) { return undefined; },
      },
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Deletes all %s of this model.', scopeName),
    accessType: 'WRITE',
  });

  define('__count__' + scopeName, {
    isStatic: isStatic,
    http: {verb: 'get', path: '/' + pathName + '/count'},
    accepts: [
      {
        arg: 'where', type: 'object',
        description: 'Criteria to match model instances',
      },
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Counts %s of %s.', scopeName, this.modelName),
    accessType: 'READ',
    returns: {arg: 'count',  type: 'number'},
  });
}
```
- example usage
```shell
...
        ModelCtor.hasManyRemoting(relationName, relation, define);
      }
    }

    // handle scopes
    var scopes = ModelCtor.scopes || {};
    for (var scopeName in scopes) {
      ModelCtor.scopeRemoting(scopeName, scopes[scopeName], define);
    }
  });

  return ModelCtor;
};

/*!
...
```

#### <a name="apidoc.element.loopback.RoleMapping.setMaxListeners"></a>[function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>setMaxListeners ()](#apidoc.element.loopback.RoleMapping.setMaxListeners)
- description and source-code
```javascript
setMaxListeners = function () { [native code] }
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.RoleMapping.setup"></a>[function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>setup ()](#apidoc.element.loopback.RoleMapping.setup)
- description and source-code
```javascript
function setupPersistedModel() {
  // call Model.setup first
  Model.setup.call(this);

  var PersistedModel = this;

  // enable change tracking (usually for replication)
  if (this.settings.trackChanges) {
    PersistedModel._defineChangeModel();
    PersistedModel.once('dataSourceAttached', function() {
      PersistedModel.enableChangeTracking();
    });
  } else if (this.settings.enableRemoteReplication) {
    PersistedModel._defineChangeModel();
  }

  PersistedModel.setupRemoting();
}
```
- example usage
```shell
...
  Model.createOptionsFromRemotingContext = function(ctx) {
    return {
      accessToken: ctx.req.accessToken,
    };
  };

  // setup the initial model
  Model.setup();

  return Model;
};
...
```

#### <a name="apidoc.element.loopback.RoleMapping.setupRemoting"></a>[function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>setupRemoting ()](#apidoc.element.loopback.RoleMapping.setupRemoting)
- description and source-code
```javascript
setupRemoting = function () {
  var PersistedModel = this;
  var typeName = PersistedModel.modelName;
  var options = PersistedModel.settings;

  // This is just for LB 3.x
  options.replaceOnPUT = options.replaceOnPUT !== false;

  function setRemoting(scope, name, options) {
    var fn = scope[name];
    fn._delegate = true;
    options.isStatic = scope === PersistedModel;
    PersistedModel.remoteMethod(name, options);
  }

  setRemoting(PersistedModel, 'create', {
    description: 'Create a new instance of the model and persist it into the data source.',
    accessType: 'WRITE',
    accepts: [
      {
        arg: 'data', type: 'object', model: typeName, allowArray: true,
        description: 'Model instance data',
        http: {source: 'body'},
      },
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    returns: {arg: 'data', type: typeName, root: true},
    http: {verb: 'post', path: '/'},
  });

  var upsertOptions = {
    aliases: ['upsert', 'updateOrCreate'],
    description: 'Patch an existing model instance or insert a new one ' +
      'into the data source.',
    accessType: 'WRITE',
    accepts: [
      {
        arg: 'data', type: 'object', model: typeName, http: {source: 'body'},
        description: 'Model instance data',
      },
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    returns: {arg: 'data', type: typeName, root: true},
    http: [{verb: 'patch', path: '/'}],
  };

  if (!options.replaceOnPUT) {
    upsertOptions.http.unshift({verb: 'put', path: '/'});
  }
  setRemoting(PersistedModel, 'patchOrCreate', upsertOptions);

  var replaceOrCreateOptions = {
    description: 'Replace an existing model instance or insert a new one into the data source.',
    accessType: 'WRITE',
    accepts: [
      {
        arg: 'data', type: 'object', model: typeName,
        http: {source: 'body'},
        description: 'Model instance data',
      },
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    returns: {arg: 'data', type: typeName, root: true},
    http: [{verb: 'post', path: '/replaceOrCreate'}],
  };

  if (options.replaceOnPUT) {
    replaceOrCreateOptions.http.push({verb: 'put', path: '/'});
  }

  setRemoting(PersistedModel, 'replaceOrCreate', replaceOrCreateOptions);

  setRemoting(PersistedModel, 'upsertWithWhere', {
    aliases: ['patchOrCreateWithWhere'],
    description: 'Update an existing model instance or insert a new one into ' +
      'the data source based on the where criteria.',
    accessType: 'WRITE',
    accepts: [
      {arg: 'where', type: 'object', http: {source: 'query'},
        description: 'Criteria to match model instances'},
      {arg: 'data', type: 'object', model: typeName, http: {source: 'body'},
        description: 'An object of model property name/value pairs'},
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    returns: {arg: 'data', type: typeName, root: true},
    http: {verb: 'post', path: '/upsertWithWhere'},
  });

  setRemoting(PersistedModel, 'exists', {
    description: 'Check whether a model instance exists in the data source.',
    accessType: 'READ',
    accepts: [
      {arg: 'id', type: 'any', description: 'Model id', required: true},
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    returns: {arg: 'exists', type: 'boolean'},
    http: [
      {verb: 'get', path: '/:id/exists'},
      {verb: 'head', path: '/:id'},
    ],
    rest: {
      // After hook to map exists to 200/404 for HEAD
      after: function(ctx, cb) {
        if (ctx.req.method === 'GET') {
          // For GET, return {exists: true|false} as is
          return cb();
        }
        if (!ctx.result.exists) {
          var modelName = ctx.method.sharedClass.name;
          var id = ctx.getArgByName('id');
          var msg = 'Unknown "' + modelName + '" id "' + id + '".';
          var error = new Error(msg);
          error.statusCode = error.status = 404;
          error.code = 'MODEL_NOT_FOUND';
          cb(error);
        } else {
          cb();
        } ...
```
- example usage
```shell
...
    PersistedModel.once('dataSourceAttached', function() {
      PersistedModel.enableChangeTracking();
    });
  } else if (this.settings.enableRemoteReplication) {
    PersistedModel._defineChangeModel();
  }

  PersistedModel.setupRemoting();
};

/*!
 * Throw an error telling the user that the method is not available and why.
 */

function throwNotAttached(modelName, methodName) {
...
```

#### <a name="apidoc.element.loopback.RoleMapping.sharedCtor"></a>[function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>sharedCtor (data, id, options, fn)](#apidoc.element.loopback.RoleMapping.sharedCtor)
- description and source-code
```javascript
sharedCtor = function (data, id, options, fn) {
  var ModelCtor = this;

  var isRemoteInvocationWithOptions = typeof data !== 'object' &&
    typeof id === 'object' &&
    typeof options === 'function';
  if (isRemoteInvocationWithOptions) {
    // sharedCtor(id, options, fn)
    fn = options;
    options = id;
    id = data;
    data = null;
  } else if (typeof data === 'function') {
    // sharedCtor(fn)
    fn = data;
    data = null;
    id = null;
    options = null;
  } else if (typeof id === 'function') {
    // sharedCtor(data, fn)
    // sharedCtor(id, fn)
    fn = id;
    options = null;

    if (typeof data !== 'object') {
      id = data;
      data = null;
    } else {
      id = null;
    }
  }

  if (id && data) {
    var model = new ModelCtor(data);
    model.id = id;
    fn(null, model);
  } else if (data) {
    fn(null, new ModelCtor(data));
  } else if (id) {
    var filter = {};
    ModelCtor.findById(id, filter, options, function(err, model) {
      if (err) {
        fn(err);
      } else if (model) {
        fn(null, model);
      } else {
        err = new Error(g.f('could not find a model with apidoc.element.loopback.RoleMapping.sharedCtor %s', id));
        err.statusCode = 404;
        err.code = 'MODEL_NOT_FOUND';
        fn(err);
      }
    });
  } else {
    fn(new Error(g.f('must specify an apidoc.element.loopback.RoleMapping.sharedCtor or {{data}}')));
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.RoleMapping.super_"></a>[function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>super_ (data, options)](#apidoc.element.loopback.RoleMapping.super_)
- description and source-code
```javascript
function ModelConstructor(data, options) {
  if (!(this instanceof ModelConstructor)) {
    return new ModelConstructor(data, options);
  }
  if (ModelClass.settings.unresolved) {
    throw new Error(g.f('Model %s is not defined.', ModelClass.modelName));
  }
  ModelBaseClass.apply(this, arguments);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.RoleMapping.update"></a>[function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>update (where, data, cb)](#apidoc.element.loopback.RoleMapping.update)
- description and source-code
```javascript
function updateAll(where, data, cb) {
  throwNotAttached(this.modelName, 'updateAll');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.RoleMapping.updateAll"></a>[function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>updateAll (where, data, cb)](#apidoc.element.loopback.RoleMapping.updateAll)
- description and source-code
```javascript
function updateAll(where, data, cb) {
  throwNotAttached(this.modelName, 'updateAll');
}
```
- example usage
```shell
...

  /**
* Update multiple instances that match the where clause.
*
* Example:
*
*'''js
* Employee.updateAll({managerId: 'x001'}, {managerId: 'x002'}, function(err, info) {
*     ...
* });
* '''
*
* @param {Object} [where] Optional 'where' filter, like
* '''
* { key: val, key2: {gt: 'val2'}, ...}
...
```

#### <a name="apidoc.element.loopback.RoleMapping.updateLastChange"></a>[function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>updateLastChange (id, data, cb)](#apidoc.element.loopback.RoleMapping.updateLastChange)
- description and source-code
```javascript
updateLastChange = function (id, data, cb) {
  var self = this;
  this.findLastChange(id, function(err, inst) {
    if (err) return cb(err);
    if (!inst) {
      err = new Error(g.f('No change record found for %s with id %s',
        self.modelName, id));
      err.statusCode = 404;
      return cb(err);
    }

    inst.updateAttributes(data, cb);
  });
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.RoleMapping.updateOrCreate"></a>[function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>updateOrCreate (data, callback)](#apidoc.element.loopback.RoleMapping.updateOrCreate)
- description and source-code
```javascript
function upsert(data, callback) {
  throwNotAttached(this.modelName, 'upsert');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.RoleMapping.upsert"></a>[function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>upsert (data, callback)](#apidoc.element.loopback.RoleMapping.upsert)
- description and source-code
```javascript
function upsert(data, callback) {
  throwNotAttached(this.modelName, 'upsert');
}
```
- example usage
```shell
...
  }
});

// then save
function save() {
  inst.trigger('save', function(saveDone) {
    inst.trigger('update', function(updateDone) {
      Model.upsert(inst, function(err) {
        inst._initProperties(data);
        updateDone.call(inst, function() {
          saveDone.call(inst, function() {
            callback(err, inst);
          });
        });
      });
...
```

#### <a name="apidoc.element.loopback.RoleMapping.upsertWithWhere"></a>[function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>upsertWithWhere (where, data, callback)](#apidoc.element.loopback.RoleMapping.upsertWithWhere)
- description and source-code
```javascript
function upsertWithWhere(where, data, callback) {
  throwNotAttached(this.modelName, 'upsertWithWhere');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.RoleMapping.validate"></a>[function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>validate ()](#apidoc.element.loopback.RoleMapping.validate)
- description and source-code
```javascript
validate = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.RoleMapping.validateAsync"></a>[function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>validateAsync ()](#apidoc.element.loopback.RoleMapping.validateAsync)
- description and source-code
```javascript
validateAsync = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.RoleMapping.validatesAbsenceOf"></a>[function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>validatesAbsenceOf ()](#apidoc.element.loopback.RoleMapping.validatesAbsenceOf)
- description and source-code
```javascript
validatesAbsenceOf = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.RoleMapping.validatesExclusionOf"></a>[function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>validatesExclusionOf ()](#apidoc.element.loopback.RoleMapping.validatesExclusionOf)
- description and source-code
```javascript
validatesExclusionOf = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.RoleMapping.validatesFormatOf"></a>[function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>validatesFormatOf ()](#apidoc.element.loopback.RoleMapping.validatesFormatOf)
- description and source-code
```javascript
validatesFormatOf = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.RoleMapping.validatesInclusionOf"></a>[function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>validatesInclusionOf ()](#apidoc.element.loopback.RoleMapping.validatesInclusionOf)
- description and source-code
```javascript
validatesInclusionOf = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.RoleMapping.validatesLengthOf"></a>[function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>validatesLengthOf ()](#apidoc.element.loopback.RoleMapping.validatesLengthOf)
- description and source-code
```javascript
validatesLengthOf = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.RoleMapping.validatesNumericalityOf"></a>[function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>validatesNumericalityOf ()](#apidoc.element.loopback.RoleMapping.validatesNumericalityOf)
- description and source-code
```javascript
validatesNumericalityOf = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.RoleMapping.validatesPresenceOf"></a>[function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>validatesPresenceOf ()](#apidoc.element.loopback.RoleMapping.validatesPresenceOf)
- description and source-code
```javascript
validatesPresenceOf = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.RoleMapping.validatesUniquenessOf"></a>[function <span class="apidocSignatureSpan">loopback.RoleMapping.</span>validatesUniquenessOf ()](#apidoc.element.loopback.RoleMapping.validatesUniquenessOf)
- description and source-code
```javascript
validatesUniquenessOf = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```



# <a name="apidoc.module.loopback.RoleMapping.prototype"></a>[module loopback.RoleMapping.prototype](#apidoc.module.loopback.RoleMapping.prototype)

#### <a name="apidoc.element.loopback.RoleMapping.prototype.application"></a>[function <span class="apidocSignatureSpan">loopback.RoleMapping.prototype.</span>application (callback)](#apidoc.element.loopback.RoleMapping.prototype.application)
- description and source-code
```javascript
application = function (callback) {
  callback = callback || utils.createPromiseCallback();
  this.constructor.resolveRelatedModels();

  if (this.principalType === RoleMapping.APPLICATION) {
    var applicationModel = this.constructor.applicationModel;
    applicationModel.findById(this.principalId, callback);
  } else {
    process.nextTick(function() {
      callback(null, null);
    });
  }
  return callback.promise;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.RoleMapping.prototype.childRole"></a>[function <span class="apidocSignatureSpan">loopback.RoleMapping.prototype.</span>childRole (callback)](#apidoc.element.loopback.RoleMapping.prototype.childRole)
- description and source-code
```javascript
childRole = function (callback) {
  callback = callback || utils.createPromiseCallback();
  this.constructor.resolveRelatedModels();

  if (this.principalType === RoleMapping.ROLE) {
    var roleModel = this.constructor.roleModel;
    roleModel.findById(this.principalId, callback);
  } else {
    process.nextTick(function() {
      callback(null, null);
    });
  }
  return callback.promise;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.RoleMapping.prototype.user"></a>[function <span class="apidocSignatureSpan">loopback.RoleMapping.prototype.</span>user (callback)](#apidoc.element.loopback.RoleMapping.prototype.user)
- description and source-code
```javascript
user = function (callback) {
  callback = callback || utils.createPromiseCallback();
  this.constructor.resolveRelatedModels();
  var userModel;

  if (this.principalType === RoleMapping.USER) {
    userModel = this.constructor.userModel;
    userModel.findById(this.principalId, callback);
    return callback.promise;
  }

  // try resolving a user model that matches principalType
  userModel = this.constructor.registry.findModel(this.principalType);
  if (userModel) {
    userModel.findById(this.principalId, callback);
  } else {
    process.nextTick(function() {
      callback(null, null);
    });
  }
  return callback.promise;
}
```
- example usage
```shell
n/a
```



# <a name="apidoc.module.loopback.RoleMapping.settings"></a>[module loopback.RoleMapping.settings](#apidoc.module.loopback.RoleMapping.settings)

#### <a name="apidoc.element.loopback.RoleMapping.settings.base"></a>[function <span class="apidocSignatureSpan">loopback.RoleMapping.settings.</span>base (data, options)](#apidoc.element.loopback.RoleMapping.settings.base)
- description and source-code
```javascript
function ModelConstructor(data, options) {
  if (!(this instanceof ModelConstructor)) {
    return new ModelConstructor(data, options);
  }
  if (ModelClass.settings.unresolved) {
    throw new Error(g.f('Model %s is not defined.', ModelClass.modelName));
  }
  ModelBaseClass.apply(this, arguments);
}
```
- example usage
```shell
n/a
```



# <a name="apidoc.module.loopback.RoleMapping.sharedClass"></a>[module loopback.RoleMapping.sharedClass](#apidoc.module.loopback.RoleMapping.sharedClass)

#### <a name="apidoc.element.loopback.RoleMapping.sharedClass.ctor"></a>[function <span class="apidocSignatureSpan">loopback.RoleMapping.sharedClass.</span>ctor (data, options)](#apidoc.element.loopback.RoleMapping.sharedClass.ctor)
- description and source-code
```javascript
function ModelConstructor(data, options) {
  if (!(this instanceof ModelConstructor)) {
    return new ModelConstructor(data, options);
  }
  if (ModelClass.settings.unresolved) {
    throw new Error(g.f('Model %s is not defined.', ModelClass.modelName));
  }
  ModelBaseClass.apply(this, arguments);
}
```
- example usage
```shell
n/a
```



# <a name="apidoc.module.loopback.Route"></a>[module loopback.Route](#apidoc.module.loopback.Route)

#### <a name="apidoc.element.loopback.Route.Route"></a>[function <span class="apidocSignatureSpan">loopback.</span>Route (path)](#apidoc.element.loopback.Route.Route)
- description and source-code
```javascript
function Route(path) {
  this.path = path;
  this.stack = [];

  debug('new %o', path)

  // route handlers for various http methods
  this.methods = {};
}
```
- example usage
```shell
n/a
```



# <a name="apidoc.module.loopback.Route.prototype"></a>[module loopback.Route.prototype](#apidoc.module.loopback.Route.prototype)

#### <a name="apidoc.element.loopback.Route.prototype._handles_method"></a>[function <span class="apidocSignatureSpan">loopback.Route.prototype.</span>_handles_method (method)](#apidoc.element.loopback.Route.prototype._handles_method)
- description and source-code
```javascript
function _handles_method(method) {
  if (this.methods._all) {
    return true;
  }

  var name = method.toLowerCase();

  if (name === 'head' && !this.methods['head']) {
    name = 'get';
  }

  return Boolean(this.methods[name]);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Route.prototype._options"></a>[function <span class="apidocSignatureSpan">loopback.Route.prototype.</span>_options ()](#apidoc.element.loopback.Route.prototype._options)
- description and source-code
```javascript
function _options() {
  var methods = Object.keys(this.methods);

  // append automatic head
  if (this.methods.get && !this.methods.head) {
    methods.push('head');
  }

  for (var i = 0; i < methods.length; i++) {
    // make upper case
    methods[i] = methods[i].toUpperCase();
  }

  return methods;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Route.prototype.acl"></a>[function <span class="apidocSignatureSpan">loopback.Route.prototype.</span>acl ()](#apidoc.element.loopback.Route.prototype.acl)
- description and source-code
```javascript
acl = function (){
  var handles = flatten(slice.call(arguments));

  for (var i = 0; i < handles.length; i++) {
    var handle = handles[i];

    if (typeof handle !== 'function') {
      var type = toString.call(handle);
      var msg = 'Route.' + method + '() requires callback functions but got a ' + type;
      throw new Error(msg);
    }

    debug('%s %o', method, this.path)

    var layer = Layer('/', {}, handle);
    layer.method = method;

    this.methods[method] = true;
    this.stack.push(layer);
  }

  return this;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Route.prototype.all"></a>[function <span class="apidocSignatureSpan">loopback.Route.prototype.</span>all ()](#apidoc.element.loopback.Route.prototype.all)
- description and source-code
```javascript
function all() {
  var handles = flatten(slice.call(arguments));

  for (var i = 0; i < handles.length; i++) {
    var handle = handles[i];

    if (typeof handle !== 'function') {
      var type = toString.call(handle);
      var msg = 'Route.all() requires callback functions but got a ' + type;
      throw new TypeError(msg);
    }

    var layer = Layer('/', {}, handle);
    layer.method = undefined;

    this.methods._all = true;
    this.stack.push(layer);
  }

  return this;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Route.prototype.bind"></a>[function <span class="apidocSignatureSpan">loopback.Route.prototype.</span>bind ()](#apidoc.element.loopback.Route.prototype.bind)
- description and source-code
```javascript
bind = function (){
  var handles = flatten(slice.call(arguments));

  for (var i = 0; i < handles.length; i++) {
    var handle = handles[i];

    if (typeof handle !== 'function') {
      var type = toString.call(handle);
      var msg = 'Route.' + method + '() requires callback functions but got a ' + type;
      throw new Error(msg);
    }

    debug('%s %o', method, this.path)

    var layer = Layer('/', {}, handle);
    layer.method = method;

    this.methods[method] = true;
    this.stack.push(layer);
  }

  return this;
}
```
- example usage
```shell
...
  accepts: [
    {arg: 'refresh', type: 'boolean', http: {source: 'query'}},
    {arg: 'options', type: 'object', http: 'optionsFromRequest'},
  ],
  description: format('Fetches hasOne relation %s.', relationName),
  accessType: 'READ',
  returns: {arg: relationName, type: relation.modelTo.modelName, root: true},
  rest: {after: convertNullToNotFoundError.bind(null, toModelName)},
});

define('__create__' + relationName, {
  isStatic: false,
  http: {verb: 'post', path: '/' + pathName},
  accepts: [
    {
...
```

#### <a name="apidoc.element.loopback.Route.prototype.checkout"></a>[function <span class="apidocSignatureSpan">loopback.Route.prototype.</span>checkout ()](#apidoc.element.loopback.Route.prototype.checkout)
- description and source-code
```javascript
checkout = function (){
  var handles = flatten(slice.call(arguments));

  for (var i = 0; i < handles.length; i++) {
    var handle = handles[i];

    if (typeof handle !== 'function') {
      var type = toString.call(handle);
      var msg = 'Route.' + method + '() requires callback functions but got a ' + type;
      throw new Error(msg);
    }

    debug('%s %o', method, this.path)

    var layer = Layer('/', {}, handle);
    layer.method = method;

    this.methods[method] = true;
    this.stack.push(layer);
  }

  return this;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Route.prototype.connect"></a>[function <span class="apidocSignatureSpan">loopback.Route.prototype.</span>connect ()](#apidoc.element.loopback.Route.prototype.connect)
- description and source-code
```javascript
connect = function (){
  var handles = flatten(slice.call(arguments));

  for (var i = 0; i < handles.length; i++) {
    var handle = handles[i];

    if (typeof handle !== 'function') {
      var type = toString.call(handle);
      var msg = 'Route.' + method + '() requires callback functions but got a ' + type;
      throw new Error(msg);
    }

    debug('%s %o', method, this.path)

    var layer = Layer('/', {}, handle);
    layer.method = method;

    this.methods[method] = true;
    this.stack.push(layer);
  }

  return this;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Route.prototype.copy"></a>[function <span class="apidocSignatureSpan">loopback.Route.prototype.</span>copy ()](#apidoc.element.loopback.Route.prototype.copy)
- description and source-code
```javascript
copy = function (){
  var handles = flatten(slice.call(arguments));

  for (var i = 0; i < handles.length; i++) {
    var handle = handles[i];

    if (typeof handle !== 'function') {
      var type = toString.call(handle);
      var msg = 'Route.' + method + '() requires callback functions but got a ' + type;
      throw new Error(msg);
    }

    debug('%s %o', method, this.path)

    var layer = Layer('/', {}, handle);
    layer.method = method;

    this.methods[method] = true;
    this.stack.push(layer);
  }

  return this;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Route.prototype.delete"></a>[function <span class="apidocSignatureSpan">loopback.Route.prototype.</span>delete ()](#apidoc.element.loopback.Route.prototype.delete)
- description and source-code
```javascript
delete = function (){
  var handles = flatten(slice.call(arguments));

  for (var i = 0; i < handles.length; i++) {
    var handle = handles[i];

    if (typeof handle !== 'function') {
      var type = toString.call(handle);
      var msg = 'Route.' + method + '() requires callback functions but got a ' + type;
      throw new Error(msg);
    }

    debug('%s %o', method, this.path)

    var layer = Layer('/', {}, handle);
    layer.method = method;

    this.methods[method] = true;
    this.stack.push(layer);
  }

  return this;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Route.prototype.dispatch"></a>[function <span class="apidocSignatureSpan">loopback.Route.prototype.</span>dispatch (req, res, done)](#apidoc.element.loopback.Route.prototype.dispatch)
- description and source-code
```javascript
function dispatch(req, res, done) {
  var idx = 0;
  var stack = this.stack;
  if (stack.length === 0) {
    return done();
  }

  var method = req.method.toLowerCase();
  if (method === 'head' && !this.methods['head']) {
    method = 'get';
  }

  req.route = this;

  next();

  function next(err) {
    // signal to exit route
    if (err && err === 'route') {
      return done();
    }

    // signal to exit router
    if (err && err === 'router') {
      return done(err)
    }

    var layer = stack[idx++];
    if (!layer) {
      return done(err);
    }

    if (layer.method && layer.method !== method) {
      return next(err);
    }

    if (err) {
      layer.handle_error(err, req, res, next);
    } else {
      layer.handle_request(req, res, next);
    }
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Route.prototype.get"></a>[function <span class="apidocSignatureSpan">loopback.Route.prototype.</span>get ()](#apidoc.element.loopback.Route.prototype.get)
- description and source-code
```javascript
get = function (){
  var handles = flatten(slice.call(arguments));

  for (var i = 0; i < handles.length; i++) {
    var handle = handles[i];

    if (typeof handle !== 'function') {
      var type = toString.call(handle);
      var msg = 'Route.' + method + '() requires callback functions but got a ' + type;
      throw new Error(msg);
    }

    debug('%s %o', method, this.path)

    var layer = Layer('/', {}, handle);
    layer.method = method;

    this.methods[method] = true;
    this.stack.push(layer);
  }

  return this;
}
```
- example usage
```shell
...
* supports Express middleware. See
* [Express documentation](http://expressjs.com/) for details.
*
* '''js
* var loopback = require('loopback');
* var app = loopback();
*
* app.get('/', function(req, res){
*   res.send('hello world');
* });
*
* app.listen(3000);
* '''
*
* @class LoopBackApplication
...
```

#### <a name="apidoc.element.loopback.Route.prototype.head"></a>[function <span class="apidocSignatureSpan">loopback.Route.prototype.</span>head ()](#apidoc.element.loopback.Route.prototype.head)
- description and source-code
```javascript
head = function (){
  var handles = flatten(slice.call(arguments));

  for (var i = 0; i < handles.length; i++) {
    var handle = handles[i];

    if (typeof handle !== 'function') {
      var type = toString.call(handle);
      var msg = 'Route.' + method + '() requires callback functions but got a ' + type;
      throw new Error(msg);
    }

    debug('%s %o', method, this.path)

    var layer = Layer('/', {}, handle);
    layer.method = method;

    this.methods[method] = true;
    this.stack.push(layer);
  }

  return this;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Route.prototype.link"></a>[function <span class="apidocSignatureSpan">loopback.Route.prototype.</span>link ()](#apidoc.element.loopback.Route.prototype.link)
- description and source-code
```javascript
link = function (){
  var handles = flatten(slice.call(arguments));

  for (var i = 0; i < handles.length; i++) {
    var handle = handles[i];

    if (typeof handle !== 'function') {
      var type = toString.call(handle);
      var msg = 'Route.' + method + '() requires callback functions but got a ' + type;
      throw new Error(msg);
    }

    debug('%s %o', method, this.path)

    var layer = Layer('/', {}, handle);
    layer.method = method;

    this.methods[method] = true;
    this.stack.push(layer);
  }

  return this;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Route.prototype.lock"></a>[function <span class="apidocSignatureSpan">loopback.Route.prototype.</span>lock ()](#apidoc.element.loopback.Route.prototype.lock)
- description and source-code
```javascript
lock = function (){
  var handles = flatten(slice.call(arguments));

  for (var i = 0; i < handles.length; i++) {
    var handle = handles[i];

    if (typeof handle !== 'function') {
      var type = toString.call(handle);
      var msg = 'Route.' + method + '() requires callback functions but got a ' + type;
      throw new Error(msg);
    }

    debug('%s %o', method, this.path)

    var layer = Layer('/', {}, handle);
    layer.method = method;

    this.methods[method] = true;
    this.stack.push(layer);
  }

  return this;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Route.prototype.m-search"></a>[function <span class="apidocSignatureSpan">loopback.Route.prototype.</span>m-search ()](#apidoc.element.loopback.Route.prototype.m-search)
- description and source-code
```javascript
m-search = function (){
  var handles = flatten(slice.call(arguments));

  for (var i = 0; i < handles.length; i++) {
    var handle = handles[i];

    if (typeof handle !== 'function') {
      var type = toString.call(handle);
      var msg = 'Route.' + method + '() requires callback functions but got a ' + type;
      throw new Error(msg);
    }

    debug('%s %o', method, this.path)

    var layer = Layer('/', {}, handle);
    layer.method = method;

    this.methods[method] = true;
    this.stack.push(layer);
  }

  return this;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Route.prototype.merge"></a>[function <span class="apidocSignatureSpan">loopback.Route.prototype.</span>merge ()](#apidoc.element.loopback.Route.prototype.merge)
- description and source-code
```javascript
merge = function (){
  var handles = flatten(slice.call(arguments));

  for (var i = 0; i < handles.length; i++) {
    var handle = handles[i];

    if (typeof handle !== 'function') {
      var type = toString.call(handle);
      var msg = 'Route.' + method + '() requires callback functions but got a ' + type;
      throw new Error(msg);
    }

    debug('%s %o', method, this.path)

    var layer = Layer('/', {}, handle);
    layer.method = method;

    this.methods[method] = true;
    this.stack.push(layer);
  }

  return this;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Route.prototype.mkactivity"></a>[function <span class="apidocSignatureSpan">loopback.Route.prototype.</span>mkactivity ()](#apidoc.element.loopback.Route.prototype.mkactivity)
- description and source-code
```javascript
mkactivity = function (){
  var handles = flatten(slice.call(arguments));

  for (var i = 0; i < handles.length; i++) {
    var handle = handles[i];

    if (typeof handle !== 'function') {
      var type = toString.call(handle);
      var msg = 'Route.' + method + '() requires callback functions but got a ' + type;
      throw new Error(msg);
    }

    debug('%s %o', method, this.path)

    var layer = Layer('/', {}, handle);
    layer.method = method;

    this.methods[method] = true;
    this.stack.push(layer);
  }

  return this;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Route.prototype.mkcalendar"></a>[function <span class="apidocSignatureSpan">loopback.Route.prototype.</span>mkcalendar ()](#apidoc.element.loopback.Route.prototype.mkcalendar)
- description and source-code
```javascript
mkcalendar = function (){
  var handles = flatten(slice.call(arguments));

  for (var i = 0; i < handles.length; i++) {
    var handle = handles[i];

    if (typeof handle !== 'function') {
      var type = toString.call(handle);
      var msg = 'Route.' + method + '() requires callback functions but got a ' + type;
      throw new Error(msg);
    }

    debug('%s %o', method, this.path)

    var layer = Layer('/', {}, handle);
    layer.method = method;

    this.methods[method] = true;
    this.stack.push(layer);
  }

  return this;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Route.prototype.mkcol"></a>[function <span class="apidocSignatureSpan">loopback.Route.prototype.</span>mkcol ()](#apidoc.element.loopback.Route.prototype.mkcol)
- description and source-code
```javascript
mkcol = function (){
  var handles = flatten(slice.call(arguments));

  for (var i = 0; i < handles.length; i++) {
    var handle = handles[i];

    if (typeof handle !== 'function') {
      var type = toString.call(handle);
      var msg = 'Route.' + method + '() requires callback functions but got a ' + type;
      throw new Error(msg);
    }

    debug('%s %o', method, this.path)

    var layer = Layer('/', {}, handle);
    layer.method = method;

    this.methods[method] = true;
    this.stack.push(layer);
  }

  return this;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Route.prototype.move"></a>[function <span class="apidocSignatureSpan">loopback.Route.prototype.</span>move ()](#apidoc.element.loopback.Route.prototype.move)
- description and source-code
```javascript
move = function (){
  var handles = flatten(slice.call(arguments));

  for (var i = 0; i < handles.length; i++) {
    var handle = handles[i];

    if (typeof handle !== 'function') {
      var type = toString.call(handle);
      var msg = 'Route.' + method + '() requires callback functions but got a ' + type;
      throw new Error(msg);
    }

    debug('%s %o', method, this.path)

    var layer = Layer('/', {}, handle);
    layer.method = method;

    this.methods[method] = true;
    this.stack.push(layer);
  }

  return this;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Route.prototype.notify"></a>[function <span class="apidocSignatureSpan">loopback.Route.prototype.</span>notify ()](#apidoc.element.loopback.Route.prototype.notify)
- description and source-code
```javascript
notify = function (){
  var handles = flatten(slice.call(arguments));

  for (var i = 0; i < handles.length; i++) {
    var handle = handles[i];

    if (typeof handle !== 'function') {
      var type = toString.call(handle);
      var msg = 'Route.' + method + '() requires callback functions but got a ' + type;
      throw new Error(msg);
    }

    debug('%s %o', method, this.path)

    var layer = Layer('/', {}, handle);
    layer.method = method;

    this.methods[method] = true;
    this.stack.push(layer);
  }

  return this;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Route.prototype.options"></a>[function <span class="apidocSignatureSpan">loopback.Route.prototype.</span>options ()](#apidoc.element.loopback.Route.prototype.options)
- description and source-code
```javascript
options = function (){
  var handles = flatten(slice.call(arguments));

  for (var i = 0; i < handles.length; i++) {
    var handle = handles[i];

    if (typeof handle !== 'function') {
      var type = toString.call(handle);
      var msg = 'Route.' + method + '() requires callback functions but got a ' + type;
      throw new Error(msg);
    }

    debug('%s %o', method, this.path)

    var layer = Layer('/', {}, handle);
    layer.method = method;

    this.methods[method] = true;
    this.stack.push(layer);
  }

  return this;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Route.prototype.patch"></a>[function <span class="apidocSignatureSpan">loopback.Route.prototype.</span>patch ()](#apidoc.element.loopback.Route.prototype.patch)
- description and source-code
```javascript
patch = function (){
  var handles = flatten(slice.call(arguments));

  for (var i = 0; i < handles.length; i++) {
    var handle = handles[i];

    if (typeof handle !== 'function') {
      var type = toString.call(handle);
      var msg = 'Route.' + method + '() requires callback functions but got a ' + type;
      throw new Error(msg);
    }

    debug('%s %o', method, this.path)

    var layer = Layer('/', {}, handle);
    layer.method = method;

    this.methods[method] = true;
    this.stack.push(layer);
  }

  return this;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Route.prototype.post"></a>[function <span class="apidocSignatureSpan">loopback.Route.prototype.</span>post ()](#apidoc.element.loopback.Route.prototype.post)
- description and source-code
```javascript
post = function (){
  var handles = flatten(slice.call(arguments));

  for (var i = 0; i < handles.length; i++) {
    var handle = handles[i];

    if (typeof handle !== 'function') {
      var type = toString.call(handle);
      var msg = 'Route.' + method + '() requires callback functions but got a ' + type;
      throw new Error(msg);
    }

    debug('%s %o', method, this.path)

    var layer = Layer('/', {}, handle);
    layer.method = method;

    this.methods[method] = true;
    this.stack.push(layer);
  }

  return this;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Route.prototype.propfind"></a>[function <span class="apidocSignatureSpan">loopback.Route.prototype.</span>propfind ()](#apidoc.element.loopback.Route.prototype.propfind)
- description and source-code
```javascript
propfind = function (){
  var handles = flatten(slice.call(arguments));

  for (var i = 0; i < handles.length; i++) {
    var handle = handles[i];

    if (typeof handle !== 'function') {
      var type = toString.call(handle);
      var msg = 'Route.' + method + '() requires callback functions but got a ' + type;
      throw new Error(msg);
    }

    debug('%s %o', method, this.path)

    var layer = Layer('/', {}, handle);
    layer.method = method;

    this.methods[method] = true;
    this.stack.push(layer);
  }

  return this;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Route.prototype.proppatch"></a>[function <span class="apidocSignatureSpan">loopback.Route.prototype.</span>proppatch ()](#apidoc.element.loopback.Route.prototype.proppatch)
- description and source-code
```javascript
proppatch = function (){
  var handles = flatten(slice.call(arguments));

  for (var i = 0; i < handles.length; i++) {
    var handle = handles[i];

    if (typeof handle !== 'function') {
      var type = toString.call(handle);
      var msg = 'Route.' + method + '() requires callback functions but got a ' + type;
      throw new Error(msg);
    }

    debug('%s %o', method, this.path)

    var layer = Layer('/', {}, handle);
    layer.method = method;

    this.methods[method] = true;
    this.stack.push(layer);
  }

  return this;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Route.prototype.purge"></a>[function <span class="apidocSignatureSpan">loopback.Route.prototype.</span>purge ()](#apidoc.element.loopback.Route.prototype.purge)
- description and source-code
```javascript
purge = function (){
  var handles = flatten(slice.call(arguments));

  for (var i = 0; i < handles.length; i++) {
    var handle = handles[i];

    if (typeof handle !== 'function') {
      var type = toString.call(handle);
      var msg = 'Route.' + method + '() requires callback functions but got a ' + type;
      throw new Error(msg);
    }

    debug('%s %o', method, this.path)

    var layer = Layer('/', {}, handle);
    layer.method = method;

    this.methods[method] = true;
    this.stack.push(layer);
  }

  return this;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Route.prototype.put"></a>[function <span class="apidocSignatureSpan">loopback.Route.prototype.</span>put ()](#apidoc.element.loopback.Route.prototype.put)
- description and source-code
```javascript
put = function (){
  var handles = flatten(slice.call(arguments));

  for (var i = 0; i < handles.length; i++) {
    var handle = handles[i];

    if (typeof handle !== 'function') {
      var type = toString.call(handle);
      var msg = 'Route.' + method + '() requires callback functions but got a ' + type;
      throw new Error(msg);
    }

    debug('%s %o', method, this.path)

    var layer = Layer('/', {}, handle);
    layer.method = method;

    this.methods[method] = true;
    this.stack.push(layer);
  }

  return this;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Route.prototype.rebind"></a>[function <span class="apidocSignatureSpan">loopback.Route.prototype.</span>rebind ()](#apidoc.element.loopback.Route.prototype.rebind)
- description and source-code
```javascript
rebind = function (){
  var handles = flatten(slice.call(arguments));

  for (var i = 0; i < handles.length; i++) {
    var handle = handles[i];

    if (typeof handle !== 'function') {
      var type = toString.call(handle);
      var msg = 'Route.' + method + '() requires callback functions but got a ' + type;
      throw new Error(msg);
    }

    debug('%s %o', method, this.path)

    var layer = Layer('/', {}, handle);
    layer.method = method;

    this.methods[method] = true;
    this.stack.push(layer);
  }

  return this;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Route.prototype.report"></a>[function <span class="apidocSignatureSpan">loopback.Route.prototype.</span>report ()](#apidoc.element.loopback.Route.prototype.report)
- description and source-code
```javascript
report = function (){
  var handles = flatten(slice.call(arguments));

  for (var i = 0; i < handles.length; i++) {
    var handle = handles[i];

    if (typeof handle !== 'function') {
      var type = toString.call(handle);
      var msg = 'Route.' + method + '() requires callback functions but got a ' + type;
      throw new Error(msg);
    }

    debug('%s %o', method, this.path)

    var layer = Layer('/', {}, handle);
    layer.method = method;

    this.methods[method] = true;
    this.stack.push(layer);
  }

  return this;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Route.prototype.search"></a>[function <span class="apidocSignatureSpan">loopback.Route.prototype.</span>search ()](#apidoc.element.loopback.Route.prototype.search)
- description and source-code
```javascript
search = function (){
  var handles = flatten(slice.call(arguments));

  for (var i = 0; i < handles.length; i++) {
    var handle = handles[i];

    if (typeof handle !== 'function') {
      var type = toString.call(handle);
      var msg = 'Route.' + method + '() requires callback functions but got a ' + type;
      throw new Error(msg);
    }

    debug('%s %o', method, this.path)

    var layer = Layer('/', {}, handle);
    layer.method = method;

    this.methods[method] = true;
    this.stack.push(layer);
  }

  return this;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Route.prototype.subscribe"></a>[function <span class="apidocSignatureSpan">loopback.Route.prototype.</span>subscribe ()](#apidoc.element.loopback.Route.prototype.subscribe)
- description and source-code
```javascript
subscribe = function (){
  var handles = flatten(slice.call(arguments));

  for (var i = 0; i < handles.length; i++) {
    var handle = handles[i];

    if (typeof handle !== 'function') {
      var type = toString.call(handle);
      var msg = 'Route.' + method + '() requires callback functions but got a ' + type;
      throw new Error(msg);
    }

    debug('%s %o', method, this.path)

    var layer = Layer('/', {}, handle);
    layer.method = method;

    this.methods[method] = true;
    this.stack.push(layer);
  }

  return this;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Route.prototype.trace"></a>[function <span class="apidocSignatureSpan">loopback.Route.prototype.</span>trace ()](#apidoc.element.loopback.Route.prototype.trace)
- description and source-code
```javascript
trace = function (){
  var handles = flatten(slice.call(arguments));

  for (var i = 0; i < handles.length; i++) {
    var handle = handles[i];

    if (typeof handle !== 'function') {
      var type = toString.call(handle);
      var msg = 'Route.' + method + '() requires callback functions but got a ' + type;
      throw new Error(msg);
    }

    debug('%s %o', method, this.path)

    var layer = Layer('/', {}, handle);
    layer.method = method;

    this.methods[method] = true;
    this.stack.push(layer);
  }

  return this;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Route.prototype.unbind"></a>[function <span class="apidocSignatureSpan">loopback.Route.prototype.</span>unbind ()](#apidoc.element.loopback.Route.prototype.unbind)
- description and source-code
```javascript
unbind = function (){
  var handles = flatten(slice.call(arguments));

  for (var i = 0; i < handles.length; i++) {
    var handle = handles[i];

    if (typeof handle !== 'function') {
      var type = toString.call(handle);
      var msg = 'Route.' + method + '() requires callback functions but got a ' + type;
      throw new Error(msg);
    }

    debug('%s %o', method, this.path)

    var layer = Layer('/', {}, handle);
    layer.method = method;

    this.methods[method] = true;
    this.stack.push(layer);
  }

  return this;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Route.prototype.unlink"></a>[function <span class="apidocSignatureSpan">loopback.Route.prototype.</span>unlink ()](#apidoc.element.loopback.Route.prototype.unlink)
- description and source-code
```javascript
unlink = function (){
  var handles = flatten(slice.call(arguments));

  for (var i = 0; i < handles.length; i++) {
    var handle = handles[i];

    if (typeof handle !== 'function') {
      var type = toString.call(handle);
      var msg = 'Route.' + method + '() requires callback functions but got a ' + type;
      throw new Error(msg);
    }

    debug('%s %o', method, this.path)

    var layer = Layer('/', {}, handle);
    layer.method = method;

    this.methods[method] = true;
    this.stack.push(layer);
  }

  return this;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Route.prototype.unlock"></a>[function <span class="apidocSignatureSpan">loopback.Route.prototype.</span>unlock ()](#apidoc.element.loopback.Route.prototype.unlock)
- description and source-code
```javascript
unlock = function (){
  var handles = flatten(slice.call(arguments));

  for (var i = 0; i < handles.length; i++) {
    var handle = handles[i];

    if (typeof handle !== 'function') {
      var type = toString.call(handle);
      var msg = 'Route.' + method + '() requires callback functions but got a ' + type;
      throw new Error(msg);
    }

    debug('%s %o', method, this.path)

    var layer = Layer('/', {}, handle);
    layer.method = method;

    this.methods[method] = true;
    this.stack.push(layer);
  }

  return this;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Route.prototype.unsubscribe"></a>[function <span class="apidocSignatureSpan">loopback.Route.prototype.</span>unsubscribe ()](#apidoc.element.loopback.Route.prototype.unsubscribe)
- description and source-code
```javascript
unsubscribe = function (){
  var handles = flatten(slice.call(arguments));

  for (var i = 0; i < handles.length; i++) {
    var handle = handles[i];

    if (typeof handle !== 'function') {
      var type = toString.call(handle);
      var msg = 'Route.' + method + '() requires callback functions but got a ' + type;
      throw new Error(msg);
    }

    debug('%s %o', method, this.path)

    var layer = Layer('/', {}, handle);
    layer.method = method;

    this.methods[method] = true;
    this.stack.push(layer);
  }

  return this;
}
```
- example usage
```shell
n/a
```



# <a name="apidoc.module.loopback.Router"></a>[module loopback.Router](#apidoc.module.loopback.Router)

#### <a name="apidoc.element.loopback.Router.Router"></a>[function <span class="apidocSignatureSpan">loopback.</span>Router (options)](#apidoc.element.loopback.Router.Router)
- description and source-code
```javascript
Router = function (options) {
  var opts = options || {};

  function router(req, res, next) {
    router.handle(req, res, next);
  }

  // mixin Router class functions
  setPrototypeOf(router, proto)

  router.params = {};
  router._params = [];
  router.caseSensitive = opts.caseSensitive;
  router.mergeParams = opts.mergeParams;
  router.strict = opts.strict;
  router.stack = [];

  return router;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Router.acl"></a>[function <span class="apidocSignatureSpan">loopback.Router.</span>acl (path)](#apidoc.element.loopback.Router.acl)
- description and source-code
```javascript
acl = function (path){
  var route = this.route(path)
  route[method].apply(route, slice.call(arguments, 1));
  return this;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Router.all"></a>[function <span class="apidocSignatureSpan">loopback.Router.</span>all (path)](#apidoc.element.loopback.Router.all)
- description and source-code
```javascript
all = function (path){
  var route = this.route(path)
  route[method].apply(route, slice.call(arguments, 1));
  return this;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Router.bind"></a>[function <span class="apidocSignatureSpan">loopback.Router.</span>bind (path)](#apidoc.element.loopback.Router.bind)
- description and source-code
```javascript
bind = function (path){
  var route = this.route(path)
  route[method].apply(route, slice.call(arguments, 1));
  return this;
}
```
- example usage
```shell
...
  accepts: [
    {arg: 'refresh', type: 'boolean', http: {source: 'query'}},
    {arg: 'options', type: 'object', http: 'optionsFromRequest'},
  ],
  description: format('Fetches hasOne relation %s.', relationName),
  accessType: 'READ',
  returns: {arg: relationName, type: relation.modelTo.modelName, root: true},
  rest: {after: convertNullToNotFoundError.bind(null, toModelName)},
});

define('__create__' + relationName, {
  isStatic: false,
  http: {verb: 'post', path: '/' + pathName},
  accepts: [
    {
...
```

#### <a name="apidoc.element.loopback.Router.checkout"></a>[function <span class="apidocSignatureSpan">loopback.Router.</span>checkout (path)](#apidoc.element.loopback.Router.checkout)
- description and source-code
```javascript
checkout = function (path){
  var route = this.route(path)
  route[method].apply(route, slice.call(arguments, 1));
  return this;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Router.connect"></a>[function <span class="apidocSignatureSpan">loopback.Router.</span>connect (path)](#apidoc.element.loopback.Router.connect)
- description and source-code
```javascript
connect = function (path){
  var route = this.route(path)
  route[method].apply(route, slice.call(arguments, 1));
  return this;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Router.copy"></a>[function <span class="apidocSignatureSpan">loopback.Router.</span>copy (path)](#apidoc.element.loopback.Router.copy)
- description and source-code
```javascript
copy = function (path){
  var route = this.route(path)
  route[method].apply(route, slice.call(arguments, 1));
  return this;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Router.delete"></a>[function <span class="apidocSignatureSpan">loopback.Router.</span>delete (path)](#apidoc.element.loopback.Router.delete)
- description and source-code
```javascript
delete = function (path){
  var route = this.route(path)
  route[method].apply(route, slice.call(arguments, 1));
  return this;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Router.get"></a>[function <span class="apidocSignatureSpan">loopback.Router.</span>get (path)](#apidoc.element.loopback.Router.get)
- description and source-code
```javascript
get = function (path){
  var route = this.route(path)
  route[method].apply(route, slice.call(arguments, 1));
  return this;
}
```
- example usage
```shell
...
* supports Express middleware. See
* [Express documentation](http://expressjs.com/) for details.
*
* '''js
* var loopback = require('loopback');
* var app = loopback();
*
* app.get('/', function(req, res){
*   res.send('hello world');
* });
*
* app.listen(3000);
* '''
*
* @class LoopBackApplication
...
```

#### <a name="apidoc.element.loopback.Router.handle"></a>[function <span class="apidocSignatureSpan">loopback.Router.</span>handle (req, res, out)](#apidoc.element.loopback.Router.handle)
- description and source-code
```javascript
function handle(req, res, out) {
  var self = this;

  debug('dispatching %s %s', req.method, req.url);

  var idx = 0;
  var protohost = getProtohost(req.url) || ''
  var removed = '';
  var slashAdded = false;
  var paramcalled = {};

  // store options for OPTIONS request
  // only used if OPTIONS request
  var options = [];

  // middleware and routes
  var stack = self.stack;

  // manage inter-router variables
  var parentParams = req.params;
  var parentUrl = req.baseUrl || '';
  var done = restore(out, req, 'baseUrl', 'next', 'params');

  // setup next layer
  req.next = next;

  // for options requests, respond with a default if nothing else responds
  if (req.method === 'OPTIONS') {
    done = wrap(done, function(old, err) {
      if (err || options.length === 0) return old(err);
      sendOptionsResponse(res, options, old);
    });
  }

  // setup basic req values
  req.baseUrl = parentUrl;
  req.originalUrl = req.originalUrl || req.url;

  next();

  function next(err) {
    var layerError = err === 'route'
      ? null
      : err;

    // remove added slash
    if (slashAdded) {
      req.url = req.url.substr(1);
      slashAdded = false;
    }

    // restore altered req.url
    if (removed.length !== 0) {
      req.baseUrl = parentUrl;
      req.url = protohost + removed + req.url.substr(protohost.length);
      removed = '';
    }

    // signal to exit router
    if (layerError === 'router') {
      setImmediate(done, null)
      return
    }

    // no more matching layers
    if (idx >= stack.length) {
      setImmediate(done, layerError);
      return;
    }

    // get pathname of request
    var path = getPathname(req);

    if (path == null) {
      return done(layerError);
    }

    // find next matching layer
    var layer;
    var match;
    var route;

    while (match !== true && idx < stack.length) {
      layer = stack[idx++];
      match = matchLayer(layer, path);
      route = layer.route;

      if (typeof match !== 'boolean') {
        // hold on to layerError
        layerError = layerError || match;
      }

      if (match !== true) {
        continue;
      }

      if (!route) {
        // process non-route handlers normally
        continue;
      }

      if (layerError) {
        // routes do not match with a pending error
        match = false;
        continue;
      }

      var method = req.method;
      var has_method = route._handles_method(method);

      // build up automatic options response
      if (!has_method && method === 'OPTIONS') {
        appendMethods(options, route._options());
      }

      // don't even bother matching route
      if (!has_method && method !== 'HEAD') {
        match = false;
        continue;
      }
    }

    // no match
    if (match !== true) {
      return done(layerError);
    }

    // store route for dispatch on change
    if (route) {
      req.route = route;
    }

    // Capture one-time layer values
    req.params = self.mergeParams
      ? mergeParams(layer.params, parentParams)
      : layer.params;
    var layerPath = layer.path;

    // this should be done for the layer
    self.process_params(layer, paramcalled, req, res, function (err) {
      if (err) {
        return next(layerError || err);
      }

      if (route) {
        return layer.handle_request(req, res, next);
      }

      trim_prefix(layer, layerError, layerPath, path);
    });
  }

  function trim_prefix(layer, layerError, layerPath, path) {
    if (layerPath.length !== 0) {
      // Validate path breaks on a path separator
      var c = path[layerPath.length]
      if (c && c !== '/' && c !== '.') return next(layerError)

      // Trim off the part of the url that matches the route
      // middleware (.use stuff) needs to have the path stripped
      debug('trim prefix (%s) from url %s', layerPath, req.url);
      removed = layerPath;
      req.url = protohost + req.url.substr(protohost.length + removed.length);

      // Ensure leading slash
      if (!protohost && req.url[0] !== '/') {
        req.url = '/' + req.url;
        slashAdded = true; ...
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Router.head"></a>[function <span class="apidocSignatureSpan">loopback.Router.</span>head (path)](#apidoc.element.loopback.Router.head)
- description and source-code
```javascript
head = function (path){
  var route = this.route(path)
  route[method].apply(route, slice.call(arguments, 1));
  return this;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Router.link"></a>[function <span class="apidocSignatureSpan">loopback.Router.</span>link (path)](#apidoc.element.loopback.Router.link)
- description and source-code
```javascript
link = function (path){
  var route = this.route(path)
  route[method].apply(route, slice.call(arguments, 1));
  return this;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Router.lock"></a>[function <span class="apidocSignatureSpan">loopback.Router.</span>lock (path)](#apidoc.element.loopback.Router.lock)
- description and source-code
```javascript
lock = function (path){
  var route = this.route(path)
  route[method].apply(route, slice.call(arguments, 1));
  return this;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Router.m-search"></a>[function <span class="apidocSignatureSpan">loopback.Router.</span>m-search (path)](#apidoc.element.loopback.Router.m-search)
- description and source-code
```javascript
m-search = function (path){
  var route = this.route(path)
  route[method].apply(route, slice.call(arguments, 1));
  return this;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Router.merge"></a>[function <span class="apidocSignatureSpan">loopback.Router.</span>merge (path)](#apidoc.element.loopback.Router.merge)
- description and source-code
```javascript
merge = function (path){
  var route = this.route(path)
  route[method].apply(route, slice.call(arguments, 1));
  return this;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Router.mkactivity"></a>[function <span class="apidocSignatureSpan">loopback.Router.</span>mkactivity (path)](#apidoc.element.loopback.Router.mkactivity)
- description and source-code
```javascript
mkactivity = function (path){
  var route = this.route(path)
  route[method].apply(route, slice.call(arguments, 1));
  return this;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Router.mkcalendar"></a>[function <span class="apidocSignatureSpan">loopback.Router.</span>mkcalendar (path)](#apidoc.element.loopback.Router.mkcalendar)
- description and source-code
```javascript
mkcalendar = function (path){
  var route = this.route(path)
  route[method].apply(route, slice.call(arguments, 1));
  return this;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Router.mkcol"></a>[function <span class="apidocSignatureSpan">loopback.Router.</span>mkcol (path)](#apidoc.element.loopback.Router.mkcol)
- description and source-code
```javascript
mkcol = function (path){
  var route = this.route(path)
  route[method].apply(route, slice.call(arguments, 1));
  return this;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Router.move"></a>[function <span class="apidocSignatureSpan">loopback.Router.</span>move (path)](#apidoc.element.loopback.Router.move)
- description and source-code
```javascript
move = function (path){
  var route = this.route(path)
  route[method].apply(route, slice.call(arguments, 1));
  return this;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Router.notify"></a>[function <span class="apidocSignatureSpan">loopback.Router.</span>notify (path)](#apidoc.element.loopback.Router.notify)
- description and source-code
```javascript
notify = function (path){
  var route = this.route(path)
  route[method].apply(route, slice.call(arguments, 1));
  return this;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Router.options"></a>[function <span class="apidocSignatureSpan">loopback.Router.</span>options (path)](#apidoc.element.loopback.Router.options)
- description and source-code
```javascript
options = function (path){
  var route = this.route(path)
  route[method].apply(route, slice.call(arguments, 1));
  return this;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Router.param"></a>[function <span class="apidocSignatureSpan">loopback.Router.</span>param (name, fn)](#apidoc.element.loopback.Router.param)
- description and source-code
```javascript
function param(name, fn) {
  // param logic
  if (typeof name === 'function') {
    deprecate('router.param(fn): Refactor to use path params');
    this._params.push(name);
    return;
  }

  // apply param functions
  var params = this._params;
  var len = params.length;
  var ret;

  if (name[0] === ':') {
    deprecate('router.param(' + JSON.stringify(name) + ', fn): Use router.param(' + JSON.stringify(name.substr(1)) + ', fn) instead
');
    name = name.substr(1);
  }

  for (var i = 0; i < len; ++i) {
    if (ret = params[i](name, fn)) {
      fn = ret;
    }
  }

  // ensure we end up with a
  // middleware function
  if ('function' !== typeof fn) {
    throw new Error('invalid param() call for ' + name + ', got ' + fn);
  }

  (this.params[name] = this.params[name] || []).push(fn);
  return this;
}
```
- example usage
```shell
...
  remotes.authorization = function(ctx, next) {
var method = ctx.method;
var req = ctx.req;
var Model = method.ctor;
var modelInstance = ctx.instance;

var modelId = modelInstance && modelInstance.id ||
  // replacement for deprecated req.param()
  (req.params && req.params.id !== undefined ? req.params.id :
   req.body && req.body.id !== undefined ? req.body.id :
   req.query && req.query.id !== undefined ? req.query.id :
   undefined);

var modelName = Model.modelName;
...
```

#### <a name="apidoc.element.loopback.Router.patch"></a>[function <span class="apidocSignatureSpan">loopback.Router.</span>patch (path)](#apidoc.element.loopback.Router.patch)
- description and source-code
```javascript
patch = function (path){
  var route = this.route(path)
  route[method].apply(route, slice.call(arguments, 1));
  return this;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Router.post"></a>[function <span class="apidocSignatureSpan">loopback.Router.</span>post (path)](#apidoc.element.loopback.Router.post)
- description and source-code
```javascript
post = function (path){
  var route = this.route(path)
  route[method].apply(route, slice.call(arguments, 1));
  return this;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Router.process_params"></a>[function <span class="apidocSignatureSpan">loopback.Router.</span>process_params (layer, called, req, res, done)](#apidoc.element.loopback.Router.process_params)
- description and source-code
```javascript
function process_params(layer, called, req, res, done) {
  var params = this.params;

  // captured parameters from the layer, keys and values
  var keys = layer.keys;

  // fast track
  if (!keys || keys.length === 0) {
    return done();
  }

  var i = 0;
  var name;
  var paramIndex = 0;
  var key;
  var paramVal;
  var paramCallbacks;
  var paramCalled;

  // process params in order
  // param callbacks can be async
  function param(err) {
    if (err) {
      return done(err);
    }

    if (i >= keys.length ) {
      return done();
    }

    paramIndex = 0;
    key = keys[i++];
    name = key.name;
    paramVal = req.params[name];
    paramCallbacks = params[name];
    paramCalled = called[name];

    if (paramVal === undefined || !paramCallbacks) {
      return param();
    }

    // param previously called with same value or error occurred
    if (paramCalled && (paramCalled.match === paramVal
      || (paramCalled.error && paramCalled.error !== 'route'))) {
      // restore value
      req.params[name] = paramCalled.value;

      // next param
      return param(paramCalled.error);
    }

    called[name] = paramCalled = {
      error: null,
      match: paramVal,
      value: paramVal
    };

    paramCallback();
  }

  // single param callbacks
  function paramCallback(err) {
    var fn = paramCallbacks[paramIndex++];

    // store updated value
    paramCalled.value = req.params[key.name];

    if (err) {
      // store error
      paramCalled.error = err;
      param(err);
      return;
    }

    if (!fn) return param();

    try {
      fn(req, res, paramCallback, paramVal, key.name);
    } catch (e) {
      paramCallback(e);
    }
  }

  param();
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Router.propfind"></a>[function <span class="apidocSignatureSpan">loopback.Router.</span>propfind (path)](#apidoc.element.loopback.Router.propfind)
- description and source-code
```javascript
propfind = function (path){
  var route = this.route(path)
  route[method].apply(route, slice.call(arguments, 1));
  return this;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Router.proppatch"></a>[function <span class="apidocSignatureSpan">loopback.Router.</span>proppatch (path)](#apidoc.element.loopback.Router.proppatch)
- description and source-code
```javascript
proppatch = function (path){
  var route = this.route(path)
  route[method].apply(route, slice.call(arguments, 1));
  return this;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Router.purge"></a>[function <span class="apidocSignatureSpan">loopback.Router.</span>purge (path)](#apidoc.element.loopback.Router.purge)
- description and source-code
```javascript
purge = function (path){
  var route = this.route(path)
  route[method].apply(route, slice.call(arguments, 1));
  return this;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Router.put"></a>[function <span class="apidocSignatureSpan">loopback.Router.</span>put (path)](#apidoc.element.loopback.Router.put)
- description and source-code
```javascript
put = function (path){
  var route = this.route(path)
  route[method].apply(route, slice.call(arguments, 1));
  return this;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Router.rebind"></a>[function <span class="apidocSignatureSpan">loopback.Router.</span>rebind (path)](#apidoc.element.loopback.Router.rebind)
- description and source-code
```javascript
rebind = function (path){
  var route = this.route(path)
  route[method].apply(route, slice.call(arguments, 1));
  return this;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Router.report"></a>[function <span class="apidocSignatureSpan">loopback.Router.</span>report (path)](#apidoc.element.loopback.Router.report)
- description and source-code
```javascript
report = function (path){
  var route = this.route(path)
  route[method].apply(route, slice.call(arguments, 1));
  return this;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Router.route"></a>[function <span class="apidocSignatureSpan">loopback.Router.</span>route (path)](#apidoc.element.loopback.Router.route)
- description and source-code
```javascript
function route(path) {
  var route = new Route(path);

  var layer = new Layer(path, {
    sensitive: this.caseSensitive,
    strict: this.strict,
    end: true
  }, route.dispatch.bind(route));

  layer.route = route;

  this.stack.push(layer);
  return route;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Router.search"></a>[function <span class="apidocSignatureSpan">loopback.Router.</span>search (path)](#apidoc.element.loopback.Router.search)
- description and source-code
```javascript
search = function (path){
  var route = this.route(path)
  route[method].apply(route, slice.call(arguments, 1));
  return this;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Router.subscribe"></a>[function <span class="apidocSignatureSpan">loopback.Router.</span>subscribe (path)](#apidoc.element.loopback.Router.subscribe)
- description and source-code
```javascript
subscribe = function (path){
  var route = this.route(path)
  route[method].apply(route, slice.call(arguments, 1));
  return this;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Router.trace"></a>[function <span class="apidocSignatureSpan">loopback.Router.</span>trace (path)](#apidoc.element.loopback.Router.trace)
- description and source-code
```javascript
trace = function (path){
  var route = this.route(path)
  route[method].apply(route, slice.call(arguments, 1));
  return this;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Router.unbind"></a>[function <span class="apidocSignatureSpan">loopback.Router.</span>unbind (path)](#apidoc.element.loopback.Router.unbind)
- description and source-code
```javascript
unbind = function (path){
  var route = this.route(path)
  route[method].apply(route, slice.call(arguments, 1));
  return this;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Router.unlink"></a>[function <span class="apidocSignatureSpan">loopback.Router.</span>unlink (path)](#apidoc.element.loopback.Router.unlink)
- description and source-code
```javascript
unlink = function (path){
  var route = this.route(path)
  route[method].apply(route, slice.call(arguments, 1));
  return this;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Router.unlock"></a>[function <span class="apidocSignatureSpan">loopback.Router.</span>unlock (path)](#apidoc.element.loopback.Router.unlock)
- description and source-code
```javascript
unlock = function (path){
  var route = this.route(path)
  route[method].apply(route, slice.call(arguments, 1));
  return this;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Router.unsubscribe"></a>[function <span class="apidocSignatureSpan">loopback.Router.</span>unsubscribe (path)](#apidoc.element.loopback.Router.unsubscribe)
- description and source-code
```javascript
unsubscribe = function (path){
  var route = this.route(path)
  route[method].apply(route, slice.call(arguments, 1));
  return this;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Router.use"></a>[function <span class="apidocSignatureSpan">loopback.Router.</span>use (fn)](#apidoc.element.loopback.Router.use)
- description and source-code
```javascript
function use(fn) {
  var offset = 0;
  var path = '/';

  // default path to '/'
  // disambiguate router.use([fn])
  if (typeof fn !== 'function') {
    var arg = fn;

    while (Array.isArray(arg) && arg.length !== 0) {
      arg = arg[0];
    }

    // first arg is the path
    if (typeof arg !== 'function') {
      offset = 1;
      path = fn;
    }
  }

  var callbacks = flatten(slice.call(arguments, offset));

  if (callbacks.length === 0) {
    throw new TypeError('Router.use() requires middleware functions');
  }

  for (var i = 0; i < callbacks.length; i++) {
    var fn = callbacks[i];

    if (typeof fn !== 'function') {
      throw new TypeError('Router.use() requires middleware function but got a ' + gettype(fn));
    }

    // add the middleware
    debug('use %o %s', path, fn.name || '<anonymous>')

    var layer = new Layer(path, {
      sensitive: this.caseSensitive,
      strict: false,
      end: false
    }, fn);

    layer.route = undefined;

    this.stack.push(layer);
  }

  return this;
}
```
- example usage
```shell
...

if (this._requestHandlingPhases.indexOf(name) === -1)
  throw new Error(g.f('Unknown {{middleware}} phase %s', name));

debug('use %s %s %s', fullPhaseName, paths, handlerName);

this._skipLayerSorting = true;
this.use(paths, handler);

var layer = this._findLayerByHandler(handler);
if (layer) {
  // Set the phase name for sorting
  layer.phase = fullPhaseName;
} else {
  debug('No matching layer is found for %s %s', fullPhaseName, handlerName);
...
```



# <a name="apidoc.module.loopback.Scope"></a>[module loopback.Scope](#apidoc.module.loopback.Scope)

#### <a name="apidoc.element.loopback.Scope.Scope"></a>[function <span class="apidocSignatureSpan">loopback.</span>Scope (data, options)](#apidoc.element.loopback.Scope.Scope)
- description and source-code
```javascript
function ModelConstructor(data, options) {
  if (!(this instanceof ModelConstructor)) {
    return new ModelConstructor(data, options);
  }
  if (ModelClass.settings.unresolved) {
    throw new Error(g.f('Model %s is not defined.', ModelClass.modelName));
  }
  ModelBaseClass.apply(this, arguments);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Scope.ValidationError"></a>[function <span class="apidocSignatureSpan">loopback.Scope.</span>ValidationError (obj)](#apidoc.element.loopback.Scope.ValidationError)
- description and source-code
```javascript
function ValidationError(obj) {
  if (!(this instanceof ValidationError)) return new ValidationError(obj);

  this.name = 'ValidationError';

  var context = obj && obj.constructor && obj.constructor.modelName;
  this.message = g.f(
    'The %s instance is not valid. Details: %s.',
      context ? ''' + context + ''' : 'model',
      formatErrors(obj.errors, obj.toJSON()) || '(unknown)'
  );

  this.statusCode = 422;

  this.details = {
    context: context,
    codes: obj.errors && obj.errors.codes,
    messages: obj.errors,
  };

  if (Error.captureStackTrace) {
    // V8 (Chrome, Opera, Node)
    Error.captureStackTrace(this, this.constructor);
  } else if (errorHasStackProperty) {
    // Firefox
    this.stack = (new Error).stack;
  }
  // Safari and PhantomJS initializes 'error.stack' on throw
  // Internet Explorer does not support 'error.stack'
}
```
- example usage
```shell
...
  return save();
}

inst.isValid(function(valid) {
  if (valid) {
    save();
  } else {
    var err = new Model.ValidationError(inst);
    // throws option is dangerous for async usage
    if (options.throws) {
      throw err;
    }
    callback(err, inst);
  }
});
...
```

#### <a name="apidoc.element.loopback.Scope._ACL"></a>[function <span class="apidocSignatureSpan">loopback.Scope.</span>_ACL (ACL)](#apidoc.element.loopback.Scope._ACL)
- description and source-code
```javascript
function getACL(ACL) {
  var registry = this.registry;
  if (ACL !== undefined) {
    // The function is used as a setter
    _aclModel = ACL;
  }
  if (_aclModel) {
    return _aclModel;
  }
  var aclModel = registry.getModel('ACL');
  _aclModel = registry.getModelByType(aclModel);
  return _aclModel;
}
```
- example usage
```shell
...
   * @param {String|Error} err The error object.
   * @param {Boolean} allowed True if the request is allowed; false otherwise.
   */

  Model.checkAccess = function(token, modelId, sharedMethod, ctx, callback) {
var ANONYMOUS = registry.getModel('AccessToken').ANONYMOUS;
token = token || ANONYMOUS;
var aclModel = Model._ACL();

ctx = ctx || {};
if (typeof ctx === 'function' && callback === undefined) {
  callback = ctx;
  ctx = {};
}
...
```

#### <a name="apidoc.element.loopback.Scope._defineChangeModel"></a>[function <span class="apidocSignatureSpan">loopback.Scope.</span>_defineChangeModel ()](#apidoc.element.loopback.Scope._defineChangeModel)
- description and source-code
```javascript
_defineChangeModel = function () {
  var BaseChangeModel = this.registry.getModel('Change');
  assert(BaseChangeModel,
    'Change model must be defined before enabling change replication');

  const additionalChangeModelProperties =
    this.settings.additionalChangeModelProperties || {};

  this.Change = BaseChangeModel.extend(this.modelName + '-change',
    additionalChangeModelProperties,
    {trackModel: this}
  );

  if (this.dataSource) {
    attachRelatedModels(this);
  }

  // Re-attach related models whenever our datasource is changed.
  var self = this;
  this.on('dataSourceAttached', function() {
    attachRelatedModels(self);
  });

  return this.Change;

  function attachRelatedModels(self) {
    self.Change.attachTo(self.dataSource);
    self.Change.getCheckpointModel().attachTo(self.dataSource);
  }
}
```
- example usage
```shell
...
// call Model.setup first
Model.setup.call(this);

var PersistedModel = this;

// enable change tracking (usually for replication)
if (this.settings.trackChanges) {
  PersistedModel._defineChangeModel();
  PersistedModel.once('dataSourceAttached', function() {
    PersistedModel.enableChangeTracking();
  });
} else if (this.settings.enableRemoteReplication) {
  PersistedModel._defineChangeModel();
}
...
```

#### <a name="apidoc.element.loopback.Scope._getAccessTypeForMethod"></a>[function <span class="apidocSignatureSpan">loopback.Scope.</span>_getAccessTypeForMethod (method)](#apidoc.element.loopback.Scope._getAccessTypeForMethod)
- description and source-code
```javascript
_getAccessTypeForMethod = function (method) {
  if (typeof method === 'string') {
    method = {name: method};
  }
  assert(
    typeof method === 'object',
    'method is a required argument and must be a RemoteMethod object'
  );

  var ACL = Model._ACL();

  // Check the explicit setting of accessType
  if (method.accessType) {
    assert(method.accessType === ACL.READ ||
      method.accessType === ACL.REPLICATE ||
      method.accessType === ACL.WRITE ||
      method.accessType === ACL.EXECUTE, 'invalid accessType ' +
      method.accessType +
      '. It must be "READ", "REPLICATE", "WRITE", or "EXECUTE"');
    return method.accessType;
  }

  // Default GET requests to READ
  var verb = method.http && method.http.verb;
  if (typeof verb === 'string') {
    verb = verb.toUpperCase();
  }
  if (verb === 'GET' || verb === 'HEAD') {
    return ACL.READ;
  }

  switch (method.name) {
    case 'create':
      return ACL.WRITE;
    case 'updateOrCreate':
      return ACL.WRITE;
    case 'upsertWithWhere':
      return ACL.WRITE;
    case 'upsert':
      return ACL.WRITE;
    case 'exists':
      return ACL.READ;
    case 'findById':
      return ACL.READ;
    case 'find':
      return ACL.READ;
    case 'findOne':
      return ACL.READ;
    case 'destroyById':
      return ACL.WRITE;
    case 'deleteById':
      return ACL.WRITE;
    case 'removeById':
      return ACL.WRITE;
    case 'count':
      return ACL.READ;
    default:
      return ACL.EXECUTE;
  }
}
```
- example usage
```shell
...
if (this.sharedMethod) {
  this.methodNames = this.sharedMethod.aliases.concat([this.sharedMethod.name]);
} else {
  this.methodNames = [];
}

if (this.sharedMethod) {
  this.accessType = this.model._getAccessTypeForMethod(this.sharedMethod);
}

this.accessType = context.accessType || AccessContext.ALL;
assert(loopback.AccessToken,
  'AccessToken model must be defined before AccessContext model');
this.accessToken = context.accessToken || loopback.AccessToken.ANONYMOUS;
...
```

#### <a name="apidoc.element.loopback.Scope._notifyBaseObservers"></a>[function <span class="apidocSignatureSpan">loopback.Scope.</span>_notifyBaseObservers (operation, context, callback)](#apidoc.element.loopback.Scope._notifyBaseObservers)
- description and source-code
```javascript
_notifyBaseObservers = function (operation, context, callback) {
  if (this.base && this.base.notifyObserversOf)
    this.base.notifyObserversOf(operation, context, callback);
  else
    callback();
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Scope._runWhenAttachedToApp"></a>[function <span class="apidocSignatureSpan">loopback.Scope.</span>_runWhenAttachedToApp (fn)](#apidoc.element.loopback.Scope._runWhenAttachedToApp)
- description and source-code
```javascript
_runWhenAttachedToApp = function (fn) {
  if (this.app) return fn(this.app);
  var self = this;
  self.once('attached', function() {
    fn(self.app);
  });
}
```
- example usage
```shell
...
  ModelCtor,
  remotingOptions
);

// before remote hook
ModelCtor.beforeRemote = function(name, fn) {
  var className = this.modelName;
  this._runWhenAttachedToApp(function(app) {
    var remotes = app.remotes();
    remotes.before(className + '.' + name, function(ctx, next) {
      return fn(ctx, ctx.result, next);
    });
  });
};
...
```

#### <a name="apidoc.element.loopback.Scope.addListener"></a>[function <span class="apidocSignatureSpan">loopback.Scope.</span>addListener ()](#apidoc.element.loopback.Scope.addListener)
- description and source-code
```javascript
addListener = function () { [native code] }
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Scope.afterRemote"></a>[function <span class="apidocSignatureSpan">loopback.Scope.</span>afterRemote (name, fn)](#apidoc.element.loopback.Scope.afterRemote)
- description and source-code
```javascript
afterRemote = function (name, fn) {
  var className = this.modelName;
  this._runWhenAttachedToApp(function(app) {
    var remotes = app.remotes();
    remotes.after(className + '.' + name, function(ctx, next) {
      return fn(ctx, ctx.result, next);
    });
  });
}
```
- example usage
```shell
...
        var m = method.isStatic ? method.name : 'prototype.' + method.name;
        if (before && before[delegateTo.name]) {
          self.beforeRemote(m, function(ctx, result, next) {
            before[delegateTo.name]._listeners.call(null, ctx, next);
          });
        }
        if (after && after[delegateTo.name]) {
          self.afterRemote(m, function(ctx, result, next) {
            after[delegateTo.name]._listeners.call(null, ctx, next);
          });
        }
      }
    });
  });
} else {
...
```

#### <a name="apidoc.element.loopback.Scope.afterRemoteError"></a>[function <span class="apidocSignatureSpan">loopback.Scope.</span>afterRemoteError (name, fn)](#apidoc.element.loopback.Scope.afterRemoteError)
- description and source-code
```javascript
afterRemoteError = function (name, fn) {
  var className = this.modelName;
  this._runWhenAttachedToApp(function(app) {
    var remotes = app.remotes();
    remotes.afterError(className + '.' + name, fn);
  });
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Scope.attachTo"></a>[function <span class="apidocSignatureSpan">loopback.Scope.</span>attachTo (dataSource)](#apidoc.element.loopback.Scope.attachTo)
- description and source-code
```javascript
attachTo = function (dataSource) {
  dataSource.attach(this);
}
```
- example usage
```shell
...
  this.on('dataSourceAttached', function() {
    attachRelatedModels(self);
  });

  return this.Change;

  function attachRelatedModels(self) {
    self.Change.attachTo(self.dataSource);
    self.Change.getCheckpointModel().attachTo(self.dataSource);
  }
};

PersistedModel.rectifyAllChanges = function(callback) {
  this.getChangeModel().rectifyAll(callback);
};
...
```

#### <a name="apidoc.element.loopback.Scope.beforeRemote"></a>[function <span class="apidocSignatureSpan">loopback.Scope.</span>beforeRemote (name, fn)](#apidoc.element.loopback.Scope.beforeRemote)
- description and source-code
```javascript
beforeRemote = function (name, fn) {
  var className = this.modelName;
  this._runWhenAttachedToApp(function(app) {
    var remotes = app.remotes();
    remotes.before(className + '.' + name, function(ctx, next) {
      return fn(ctx, ctx.result, next);
    });
  });
}
```
- example usage
```shell
...
        sharedClass.methods().forEach(function(method) {
var delegateTo = method.rest && method.rest.delegateTo;
if (delegateTo && delegateTo.ctor == relation.modelTo) {
  var before = method.isStatic ? beforeListeners : beforeListeners['prototype'];
  var after = method.isStatic ? afterListeners : afterListeners['prototype'];
  var m = method.isStatic ? method.name : 'prototype.' + method.name;
  if (before && before[delegateTo.name]) {
    self.beforeRemote(m, function(ctx, result, next) {
      before[delegateTo.name]._listeners.call(null, ctx, next);
    });
  }
  if (after && after[delegateTo.name]) {
    self.afterRemote(m, function(ctx, result, next) {
      after[delegateTo.name]._listeners.call(null, ctx, next);
    });
...
```

#### <a name="apidoc.element.loopback.Scope.belongsToRemoting"></a>[function <span class="apidocSignatureSpan">loopback.Scope.</span>belongsToRemoting (relationName, relation, define)](#apidoc.element.loopback.Scope.belongsToRemoting)
- description and source-code
```javascript
belongsToRemoting = function (relationName, relation, define) {
  var modelName = relation.modelTo && relation.modelTo.modelName;
  modelName = modelName || 'PersistedModel';
  var fn = this.prototype[relationName];
  var pathName = (relation.options.http && relation.options.http.path) || relationName;
  define('__get__' + relationName, {
    isStatic: false,
    http: {verb: 'get', path: '/' + pathName},
    accepts: [
      {arg: 'refresh', type: 'boolean', http: {source: 'query'}},
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    accessType: 'READ',
    description: format('Fetches belongsTo relation %s.', relationName),
    returns: {arg: relationName, type: modelName, root: true},
  }, fn);
}
```
- example usage
```shell
...
  defineRaw(name, options, fn);
};

// get the relations
for (var relationName in relations) {
  var relation = relations[relationName];
  if (relation.type === 'belongsTo') {
    ModelCtor.belongsToRemoting(relationName, relation, define);
  } else if (
    relation.type === 'hasOne' ||
    relation.type === 'embedsOne'
  ) {
    ModelCtor.hasOneRemoting(relationName, relation, define);
  } else if (
    relation.type === 'hasMany' ||
...
```

#### <a name="apidoc.element.loopback.Scope.bulkUpdate"></a>[function <span class="apidocSignatureSpan">loopback.Scope.</span>bulkUpdate (updates, options, callback)](#apidoc.element.loopback.Scope.bulkUpdate)
- description and source-code
```javascript
bulkUpdate = function (updates, options, callback) {
  var tasks = [];
  var Model = this;
  var Change = this.getChangeModel();
  var conflicts = [];

  var lastArg = arguments[arguments.length - 1];

  if (typeof lastArg === 'function' && arguments.length > 1) {
    callback = lastArg;
  }

  if (typeof options === 'function') {
    options = {};
  }

  options = options || {};

  buildLookupOfAffectedModelData(Model, updates, function(err, currentMap) {
    if (err) return callback(err);

    updates.forEach(function(update) {
      var id = update.change.modelId;
      var current = currentMap[id];
      switch (update.type) {
        case Change.UPDATE:
          tasks.push(function(cb) {
            applyUpdate(Model, id, current, update.data, update.change, conflicts, options, cb);
          });
          break;

        case Change.CREATE:
          tasks.push(function(cb) {
            applyCreate(Model, id, current, update.data, update.change, conflicts, options, cb);
          });
          break;
        case Change.DELETE:
          tasks.push(function(cb) {
            applyDelete(Model, id, current, update.change, conflicts, options, cb);
          });
          break;
      }
    });

    async.parallel(tasks, function(err) {
      if (err) return callback(err);
      if (conflicts.length) {
        err = new Error(g.f('Conflict'));
        err.statusCode = 409;
        err.details = {conflicts: conflicts};
        return callback(err);
      }
      callback();
    });
  });
}
```
- example usage
```shell
...
    function bulkUpdate(_updates, cb) {
debug('\tstarting bulk update');
updates = _updates;
utils.uploadInChunks(
  updates,
  replicationChunkSize,
  function(smallArray, chunkCallback) {
    return targetModel.bulkUpdate(smallArray, options, function(err) {
      // bulk update is a special case where we want to process all chunks and aggregate all errors
      chunkCallback(null, err);
    });
  },
  function(notUsed, err) {
    var conflicts = err && err.details && err.details.conflicts;
    if (conflicts && err.statusCode == 409) {
...
```

#### <a name="apidoc.element.loopback.Scope.changes"></a>[function <span class="apidocSignatureSpan">loopback.Scope.</span>changes (since, filter, callback)](#apidoc.element.loopback.Scope.changes)
- description and source-code
```javascript
changes = function (since, filter, callback) {
  if (typeof since === 'function') {
    filter = {};
    callback = since;
    since = -1;
  }
  if (typeof filter === 'function') {
    callback = filter;
    since = -1;
    filter = {};
  }

  var idName = this.dataSource.idName(this.modelName);
  var Change = this.getChangeModel();
  var model = this;
  const changeFilter = this.createChangeFilter(since, filter);

  filter = filter || {};
  filter.fields = {};
  filter.where = filter.where || {};
  filter.fields[idName] = true;

  // TODO(ritch) this whole thing could be optimized a bit more
  Change.find(changeFilter, function(err, changes) {
    if (err) return callback(err);
    if (!Array.isArray(changes) || changes.length === 0) return callback(null, []);
    var ids = changes.map(function(change) {
      return change.getModelId();
    });
    filter.where[idName] = {inq: ids};
    model.find(filter, function(err, models) {
      if (err) return callback(err);
      var modelIds = models.map(function(m) {
        return m[idName].toString();
      });
      callback(null, changes.filter(function(ch) {
        if (ch.type() === Change.DELETE) return true;
        return modelIds.indexOf(ch.modelId) > -1;
      }));
    });
  });
}
```
- example usage
```shell
...
    async.waterfall(tasks, done);

    function getSourceChanges(cb) {
utils.downloadInChunks(
  options.filter,
  replicationChunkSize,
  function(filter, pagingCallback) {
    sourceModel.changes(since.source, filter, pagingCallback);
  },
  debug.enabled ? log : cb);

function log(err, result) {
  if (err) return cb(err);
  debug('\tusing source changes');
  result.forEach(function(it) { debug('\t\t%j', it); });
...
```

#### <a name="apidoc.element.loopback.Scope.checkAccess"></a>[function <span class="apidocSignatureSpan">loopback.Scope.</span>checkAccess (token, modelId, sharedMethod, ctx, callback)](#apidoc.element.loopback.Scope.checkAccess)
- description and source-code
```javascript
checkAccess = function (token, modelId, sharedMethod, ctx, callback) {
  var ANONYMOUS = registry.getModel('AccessToken').ANONYMOUS;
  token = token || ANONYMOUS;
  var aclModel = Model._ACL();

  ctx = ctx || {};
  if (typeof ctx === 'function' && callback === undefined) {
    callback = ctx;
    ctx = {};
  }

  aclModel.checkAccessForContext({
    accessToken: token,
    model: this,
    property: sharedMethod.name,
    method: sharedMethod.name,
    sharedMethod: sharedMethod,
    modelId: modelId,
    accessType: this._getAccessTypeForMethod(sharedMethod),
    remotingContext: ctx,
  }, function(err, accessRequest) {
    if (err) return callback(err);
    callback(null, accessRequest.isAllowed());
  });
}
```
- example usage
```shell
...
var modelSettings = Model.settings || {};
var errStatusCode = modelSettings.aclErrorStatus || app.get('aclErrorStatus') || 401;
if (!req.accessToken) {
  errStatusCode = 401;
}

if (Model.checkAccess) {
  Model.checkAccess(
    req.accessToken,
    modelId,
    method,
    ctx,
    function(err, allowed) {
      if (err) {
        console.log(err);
...
```

#### <a name="apidoc.element.loopback.Scope.checkPermission"></a>[function <span class="apidocSignatureSpan">loopback.Scope.</span>checkPermission (scope, model, property, accessType, callback)](#apidoc.element.loopback.Scope.checkPermission)
- description and source-code
```javascript
checkPermission = function (scope, model, property, accessType, callback) {
  this.resolveRelatedModels();
  var aclModel = this.aclModel;
  assert(aclModel,
    'ACL model must be defined before Scope.checkPermission is called');

  this.findOne({where: {name: scope}}, function(err, scope) {
    if (err) {
      if (callback) callback(err);
    } else {
      aclModel.checkPermission(
        aclModel.SCOPE, scope.id, model, property, accessType, callback);
    }
  });
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Scope.checkpoint"></a>[function <span class="apidocSignatureSpan">loopback.Scope.</span>checkpoint (cb)](#apidoc.element.loopback.Scope.checkpoint)
- description and source-code
```javascript
checkpoint = function (cb) {
  var Checkpoint = this.getChangeModel().getCheckpointModel();
  Checkpoint.bumpLastSeq(cb);
}
```
- example usage
```shell
...
      }
      cb(err);
    });
}

function checkpoints() {
  var cb = arguments[arguments.length - 1];
  sourceModel.checkpoint(function(err, source) {
    if (err) return cb(err);
    newSourceCp = source.seq;
    targetModel.checkpoint(function(err, target) {
      if (err) return cb(err);
      newTargetCp = target.seq;
      debug('\tcreated checkpoints');
      debug('\t\t%s for source model %s', newSourceCp, sourceModel.modelName);
...
```

#### <a name="apidoc.element.loopback.Scope.clearObservers"></a>[function <span class="apidocSignatureSpan">loopback.Scope.</span>clearObservers (operation)](#apidoc.element.loopback.Scope.clearObservers)
- description and source-code
```javascript
clearObservers = function (operation) {
  if (!(this._observers && this._observers[operation])) return;

  this._observers[operation].length = 0;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Scope.count"></a>[function <span class="apidocSignatureSpan">loopback.Scope.</span>count (where, cb)](#apidoc.element.loopback.Scope.count)
- description and source-code
```javascript
count = function (where, cb) {
  throwNotAttached(this.modelName, 'count');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Scope.create"></a>[function <span class="apidocSignatureSpan">loopback.Scope.</span>create (data, callback)](#apidoc.element.loopback.Scope.create)
- description and source-code
```javascript
create = function (data, callback) {
  throwNotAttached(this.modelName, 'create');
}
```
- example usage
```shell
...
 } else {
   var options = {};

   if (this.get) {
     options = this.get('remoting');
   }

   return (this._remotes = RemoteObjects.create(options));
 }
};

/*!
* Remove a route by reference.
*/
...
```

#### <a name="apidoc.element.loopback.Scope.createChangeFilter"></a>[function <span class="apidocSignatureSpan">loopback.Scope.</span>createChangeFilter (since, modelFilter)](#apidoc.element.loopback.Scope.createChangeFilter)
- description and source-code
```javascript
createChangeFilter = function (since, modelFilter) {
  return {
    where: {
      checkpoint: {gte: since},
      modelName: this.modelName,
    },
  };
}
```
- example usage
```shell
...
  since = -1;
  filter = {};
}

var idName = this.dataSource.idName(this.modelName);
var Change = this.getChangeModel();
var model = this;
const changeFilter = this.createChangeFilter(since, filter);

filter = filter || {};
filter.fields = {};
filter.where = filter.where || {};
filter.fields[idName] = true;

// TODO(ritch) this whole thing could be optimized a bit more
...
```

#### <a name="apidoc.element.loopback.Scope.createChangeStream"></a>[function <span class="apidocSignatureSpan">loopback.Scope.</span>createChangeStream (options, cb)](#apidoc.element.loopback.Scope.createChangeStream)
- description and source-code
```javascript
createChangeStream = function (options, cb) {
  if (typeof options === 'function') {
    cb = options;
    options = undefined;
  }

  var idName = this.getIdName();
  var Model = this;
  var changes = new PassThrough({objectMode: true});
  var writeable = true;

  changes.destroy = function() {
    changes.removeAllListeners('error');
    changes.removeAllListeners('end');
    writeable = false;
    changes = null;
  };

  changes.on('error', function() {
    writeable = false;
  });
  changes.on('end', function() {
    writeable = false;
  });

  process.nextTick(function() {
    cb(null, changes);
  });

  Model.observe('after save', createChangeHandler('save'));
  Model.observe('after delete', createChangeHandler('delete'));

  function createChangeHandler(type) {
    return function(ctx, next) {
      // since it might have set to null via destroy
      if (!changes) {
        return next();
      }

      var where = ctx.where;
      var data = ctx.instance || ctx.data;
      var whereId = where && where[idName];

      // the data includes the id
      // or the where includes the id
      var target;

      if (data && (data[idName] || data[idName] === 0)) {
        target = data[idName];
      } else if (where && (where[idName] || where[idName] === 0)) {
        target = where[idName];
      }

      var hasTarget = target === 0 || !!target;

      var change = {
        target: target,
        where: where,
        data: data,
      };

      switch (type) {
        case 'save':
          if (ctx.isNewInstance === undefined) {
            change.type = hasTarget ? 'update' : 'create';
          } else {
            change.type = ctx.isNewInstance ? 'create' : 'update';
          }

          break;
        case 'delete':
          change.type = 'remove';
          break;
      }

      // TODO(ritch) this is ugly... maybe a ReadableStream would be better
      if (writeable) {
        changes.write(change);
      }

      next();
    };
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Scope.createOptionsFromRemotingContext"></a>[function <span class="apidocSignatureSpan">loopback.Scope.</span>createOptionsFromRemotingContext (ctx)](#apidoc.element.loopback.Scope.createOptionsFromRemotingContext)
- description and source-code
```javascript
createOptionsFromRemotingContext = function (ctx) {
  return {
    accessToken: ctx.req.accessToken,
  };
}
```
- example usage
```shell
...
  var EMPTY_OPTIONS = {};
  var ModelCtor = ctx.method && ctx.method.ctor;
  if (!ModelCtor)
    return EMPTY_OPTIONS;
  if (typeof ModelCtor.createOptionsFromRemotingContext !== 'function')
    return EMPTY_OPTIONS;
  debug('createOptionsFromRemotingContext for %s', ctx.method.stringName);
  return ModelCtor.createOptionsFromRemotingContext(ctx);
}

/**
 * Disable remote invocation for the method with the given name.
 *
 * @param {String} name The name of the method.
 * @param {Boolean} isStatic Is the method static (eg. 'MyModel.myMethod')? Pass
...
```

#### <a name="apidoc.element.loopback.Scope.createUpdates"></a>[function <span class="apidocSignatureSpan">loopback.Scope.</span>createUpdates (deltas, cb)](#apidoc.element.loopback.Scope.createUpdates)
- description and source-code
```javascript
createUpdates = function (deltas, cb) {
  var Change = this.getChangeModel();
  var updates = [];
  var Model = this;
  var tasks = [];

  deltas.forEach(function(change) {
    change = new Change(change);
    var type = change.type();
    var update = {type: type, change: change};
    switch (type) {
      case Change.CREATE:
      case Change.UPDATE:
        tasks.push(function(cb) {
          Model.findById(change.modelId, function(err, inst) {
            if (err) return cb(err);
            if (!inst) {
              return cb &&
                cb(new Error(g.f('Missing data for change: %s', change.modelId)));
            }
            if (inst.toObject) {
              update.data = inst.toObject();
            } else {
              update.data = inst;
            }
            updates.push(update);
            cb();
          });
        });
        break;
      case Change.DELETE:
        updates.push(update);
        break;
    }
  });

  async.parallel(tasks, function(err) {
    if (err) return cb(err);
    cb(null, updates);
  });
}
```
- example usage
```shell
...

  if (diff && diff.deltas && diff.deltas.length) {
    debug('\tbuilding a list of updates');
    utils.uploadInChunks(
      diff.deltas,
      replicationChunkSize,
      function(smallArray, chunkCallback) {
        return sourceModel.createUpdates(smallArray, chunkCallback);
      },
      cb);
  } else {
    // nothing to replicate
    done();
  }
}
...
```

#### <a name="apidoc.element.loopback.Scope.currentCheckpoint"></a>[function <span class="apidocSignatureSpan">loopback.Scope.</span>currentCheckpoint (cb)](#apidoc.element.loopback.Scope.currentCheckpoint)
- description and source-code
```javascript
currentCheckpoint = function (cb) {
  var Checkpoint = this.getChangeModel().getCheckpointModel();
  Checkpoint.current(cb);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Scope.defineProperty"></a>[function <span class="apidocSignatureSpan">loopback.Scope.</span>defineProperty (prop, params)](#apidoc.element.loopback.Scope.defineProperty)
- description and source-code
```javascript
defineProperty = function (prop, params) {
  if (this.dataSource) {
    this.dataSource.defineProperty(this.modelName, prop, params);
  } else {
    this.modelBuilder.defineProperty(this.modelName, prop, params);
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Scope.deleteAll"></a>[function <span class="apidocSignatureSpan">loopback.Scope.</span>deleteAll (where, cb)](#apidoc.element.loopback.Scope.deleteAll)
- description and source-code
```javascript
function destroyAll(where, cb) {
  throwNotAttached(this.modelName, 'destroyAll');
}
```
- example usage
```shell
...
  Model.modelName, id);
debug('\tExpected revision: %s', change.rev);
debug('\tActual revision:   %s', rev);
conflicts.push(change);
return Change.rectifyModelChanges(Model.modelName, [id], cb);
    }

    Model.deleteAll(current.toObject(), options, function(err, result) {
if (err) return cb(err);

var count = result && result.count;
switch (count) {
  case 1:
    // The happy path, exactly one record was updated
    return cb();
...
```

#### <a name="apidoc.element.loopback.Scope.deleteById"></a>[function <span class="apidocSignatureSpan">loopback.Scope.</span>deleteById (id, cb)](#apidoc.element.loopback.Scope.deleteById)
- description and source-code
```javascript
function deleteById(id, cb) {
  throwNotAttached(this.modelName, 'deleteById');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Scope.destroyAll"></a>[function <span class="apidocSignatureSpan">loopback.Scope.</span>destroyAll (where, cb)](#apidoc.element.loopback.Scope.destroyAll)
- description and source-code
```javascript
function destroyAll(where, cb) {
  throwNotAttached(this.modelName, 'destroyAll');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Scope.destroyById"></a>[function <span class="apidocSignatureSpan">loopback.Scope.</span>destroyById (id, cb)](#apidoc.element.loopback.Scope.destroyById)
- description and source-code
```javascript
function deleteById(id, cb) {
  throwNotAttached(this.modelName, 'deleteById');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Scope.diff"></a>[function <span class="apidocSignatureSpan">loopback.Scope.</span>diff (since, remoteChanges, callback)](#apidoc.element.loopback.Scope.diff)
- description and source-code
```javascript
diff = function (since, remoteChanges, callback) {
  var Change = this.getChangeModel();
  Change.diff(this.modelName, since, remoteChanges, callback);
}
```
- example usage
```shell
...
    },
  });
};

/**
 * Get a set of deltas and conflicts since the given checkpoint.
 *
 * See [Change.diff()](#change-diff) for details.
 *
 * @param  {Number}  since  Find deltas since this checkpoint.
 * @param  {Array}  remoteChanges  An array of change objects.
 * @callback {Function} callback Callback function called with '(err, result)' arguments.  Required.
 * @param {Error} err Error object; see [Error object](http://loopback.io/doc/en/lb2/Error-object.html).
 * @param {Object} result Object with 'deltas' and 'conflicts' properties; see [Change.diff()](#change-diff) for details.
 */
...
```

#### <a name="apidoc.element.loopback.Scope.disableRemoteMethod"></a>[function <span class="apidocSignatureSpan">loopback.Scope.</span>disableRemoteMethod (name, isStatic)](#apidoc.element.loopback.Scope.disableRemoteMethod)
- description and source-code
```javascript
disableRemoteMethod = function (name, isStatic) {
  deprecated('Model.disableRemoteMethod is deprecated. ' +
    'Use Model.disableRemoteMethodByName instead.');
  var key = this.sharedClass.getKeyFromMethodNameAndTarget(name, isStatic);
  this.sharedClass.disableMethodByName(key);
  this.emit('remoteMethodDisabled', this.sharedClass, key);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Scope.disableRemoteMethodByName"></a>[function <span class="apidocSignatureSpan">loopback.Scope.</span>disableRemoteMethodByName (name)](#apidoc.element.loopback.Scope.disableRemoteMethodByName)
- description and source-code
```javascript
disableRemoteMethodByName = function (name) {
  this.sharedClass.disableMethodByName(name);
  this.emit('remoteMethodDisabled', this.sharedClass, name);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Scope.emit"></a>[function <span class="apidocSignatureSpan">loopback.Scope.</span>emit ()](#apidoc.element.loopback.Scope.emit)
- description and source-code
```javascript
emit = function () { [native code] }
```
- example usage
```shell
...
    return new Model(data);
  });
  this.remotes().addClass(Model.sharedClass);
  if (Model.settings.trackChanges && Model.Change) {
    this.remotes().addClass(Model.Change.sharedClass);
  }
  clearHandlerCache(this);
  this.emit('modelRemoted', Model.sharedClass);
}

var self = this;
Model.on('remoteMethodDisabled', function(model, methodName) {
  self.emit('remoteMethodDisabled', model, methodName);
});
Model.on('remoteMethodAdded', function(model) {
...
```

#### <a name="apidoc.element.loopback.Scope.enableChangeTracking"></a>[function <span class="apidocSignatureSpan">loopback.Scope.</span>enableChangeTracking ()](#apidoc.element.loopback.Scope.enableChangeTracking)
- description and source-code
```javascript
enableChangeTracking = function () {
  var Model = this;
  var Change = this.Change || this._defineChangeModel();
  var cleanupInterval = Model.settings.changeCleanupInterval || 30000;

  assert(this.dataSource, 'Cannot enableChangeTracking(): ' + this.modelName +
    ' is not attached to a dataSource');

  var idName = this.getIdName();
  var idProp = this.definition.properties[idName];
  var idType = idProp && idProp.type;
  var idDefn = idProp && idProp.defaultFn;
  if (idType !== String || !(idDefn === 'uuid' || idDefn === 'guid')) {
    deprecated('The model ' + this.modelName + ' is tracking changes, ' +
      'which requires a string id with GUID/UUID default value.');
  }

  Model.observe('after save', rectifyOnSave);

  Model.observe('after delete', rectifyOnDelete);

  // Only run if the run time is server
  // Can switch off cleanup by setting the interval to -1
  if (runtime.isServer && cleanupInterval > 0) {
    // initial cleanup
    cleanup();

    // cleanup
    setInterval(cleanup, cleanupInterval);
  }

  function cleanup() {
    Model.rectifyAllChanges(function(err) {
      if (err) {
        Model.handleChangeError(err, 'cleanup');
      }
    });
  }
}
```
- example usage
```shell
...

  var PersistedModel = this;

  // enable change tracking (usually for replication)
  if (this.settings.trackChanges) {
    PersistedModel._defineChangeModel();
    PersistedModel.once('dataSourceAttached', function() {
      PersistedModel.enableChangeTracking();
    });
  } else if (this.settings.enableRemoteReplication) {
    PersistedModel._defineChangeModel();
  }

  PersistedModel.setupRemoting();
};
...
```

#### <a name="apidoc.element.loopback.Scope.eventNames"></a>[function <span class="apidocSignatureSpan">loopback.Scope.</span>eventNames ()](#apidoc.element.loopback.Scope.eventNames)
- description and source-code
```javascript
eventNames = function () { [native code] }
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Scope.exists"></a>[function <span class="apidocSignatureSpan">loopback.Scope.</span>exists (id, cb)](#apidoc.element.loopback.Scope.exists)
- description and source-code
```javascript
function exists(id, cb) {
  throwNotAttached(this.modelName, 'exists');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Scope.extend"></a>[function <span class="apidocSignatureSpan">loopback.Scope.</span>extend (className, subclassProperties, subclassSettings)](#apidoc.element.loopback.Scope.extend)
- description and source-code
```javascript
extend = function (className, subclassProperties, subclassSettings) {
  var properties = ModelClass.definition.properties;
  var settings = ModelClass.definition.settings;

  subclassProperties = subclassProperties || {};
  subclassSettings = subclassSettings || {};

  // Check if subclass redefines the ids
  var idFound = false;
  for (var k in subclassProperties) {
    if (subclassProperties[k] && subclassProperties[k].id) {
      idFound = true;
      break;
    }
  }

  // Merging the properties
  var keys = Object.keys(properties);
  for (var i = 0, n = keys.length; i < n; i++) {
    var key = keys[i];

    if (idFound && properties[key].id) {
      // don't inherit id properties
      continue;
    }
    if (subclassProperties[key] === undefined) {
      var baseProp = properties[key];
      var basePropCopy = baseProp;
      if (baseProp && typeof baseProp === 'object') {
        // Deep clone the base prop
        basePropCopy = mergeSettings(null, baseProp);
      }
      subclassProperties[key] = basePropCopy;
    }
  }

  // Merge the settings
  var originalSubclassSettings = subclassSettings;
  subclassSettings = mergeSettings(settings, subclassSettings);

  // Ensure 'base' is not inherited. Note we don't have to delete 'super'
  // as that is removed from settings by modelBuilder.define and thus
  // it is never inherited
  if (!originalSubclassSettings.base) {
    subclassSettings.base = ModelClass;
  }

  // Define the subclass
  var subClass = modelBuilder.define(className, subclassProperties, subclassSettings, ModelClass);

  // Calling the setup function
  if (typeof subClass.setup === 'function') {
    subClass.setup.call(subClass);
  }

  return subClass;
}
```
- example usage
```shell
...
* The base class for **all models**.
*
* **Inheriting from 'Model'**
*
* '''js
* var properties = {...};
* var options = {...};
* var MyModel = loopback.Model.extend('MyModel', properties, options);
* '''
*
* **Options**
*
*  - 'trackChanges' - If true, changes to the model will be tracked. **Required
* for replication.**
*
...
```

#### <a name="apidoc.element.loopback.Scope.find"></a>[function <span class="apidocSignatureSpan">loopback.Scope.</span>find (filter, cb)](#apidoc.element.loopback.Scope.find)
- description and source-code
```javascript
function find(filter, cb) {
  throwNotAttached(this.modelName, 'find');
}
```
- example usage
```shell
...

filter = filter || {};
filter.fields = {};
filter.where = filter.where || {};
filter.fields[idName] = true;

// TODO(ritch) this whole thing could be optimized a bit more
Change.find(changeFilter, function(err, changes) {
  if (err) return callback(err);
  if (!Array.isArray(changes) || changes.length === 0) return callback(null, []);
  var ids = changes.map(function(change) {
    return change.getModelId();
  });
  filter.where[idName] = {inq: ids};
  model.find(filter, function(err, models) {
...
```

#### <a name="apidoc.element.loopback.Scope.findById"></a>[function <span class="apidocSignatureSpan">loopback.Scope.</span>findById (id, filter, cb)](#apidoc.element.loopback.Scope.findById)
- description and source-code
```javascript
function findById(id, filter, cb) {
  throwNotAttached(this.modelName, 'findById');
}
```
- example usage
```shell
...
  var model = new ModelCtor(data);
  model.id = id;
  fn(null, model);
} else if (data) {
  fn(null, new ModelCtor(data));
} else if (id) {
  var filter = {};
  ModelCtor.findById(id, filter, options, function(err, model) {
    if (err) {
      fn(err);
    } else if (model) {
      fn(null, model);
    } else {
      err = new Error(g.f('could not find a model with apidoc.element.loopback.Scope.findById %s', id));
      err.statusCode = 404;
...
```

#### <a name="apidoc.element.loopback.Scope.findLastChange"></a>[function <span class="apidocSignatureSpan">loopback.Scope.</span>findLastChange (id, cb)](#apidoc.element.loopback.Scope.findLastChange)
- description and source-code
```javascript
findLastChange = function (id, cb) {
  var Change = this.getChangeModel();
  Change.findOne({where: {modelId: id}}, cb);
}
```
- example usage
```shell
...
PersistedModel.findLastChange = function(id, cb) {
  var Change = this.getChangeModel();
  Change.findOne({where: {modelId: id}}, cb);
};

PersistedModel.updateLastChange = function(id, data, cb) {
  var self = this;
  this.findLastChange(id, function(err, inst) {
    if (err) return cb(err);
    if (!inst) {
      err = new Error(g.f('No change record found for %s with id %s',
        self.modelName, id));
      err.statusCode = 404;
      return cb(err);
    }
...
```

#### <a name="apidoc.element.loopback.Scope.findOne"></a>[function <span class="apidocSignatureSpan">loopback.Scope.</span>findOne (filter, cb)](#apidoc.element.loopback.Scope.findOne)
- description and source-code
```javascript
function findOne(filter, cb) {
  throwNotAttached(this.modelName, 'findOne');
}
```
- example usage
```shell
...
PersistedModel.rectifyChange = function(id, callback) {
  var Change = this.getChangeModel();
  Change.rectifyModelChanges(this.modelName, [id], callback);
};

PersistedModel.findLastChange = function(id, cb) {
  var Change = this.getChangeModel();
  Change.findOne({where: {modelId: id}}, cb);
};

PersistedModel.updateLastChange = function(id, data, cb) {
  var self = this;
  this.findLastChange(id, function(err, inst) {
    if (err) return cb(err);
    if (!inst) {
...
```

#### <a name="apidoc.element.loopback.Scope.findOrCreate"></a>[function <span class="apidocSignatureSpan">loopback.Scope.</span>findOrCreate (query, data, callback)](#apidoc.element.loopback.Scope.findOrCreate)
- description and source-code
```javascript
function findOrCreate(query, data, callback) {
  throwNotAttached(this.modelName, 'findOrCreate');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Scope.forEachProperty"></a>[function <span class="apidocSignatureSpan">loopback.Scope.</span>forEachProperty (cb)](#apidoc.element.loopback.Scope.forEachProperty)
- description and source-code
```javascript
forEachProperty = function (cb) {
  var props = ModelClass.definition.properties;
  var keys = Object.keys(props);
  for (var i = 0, n = keys.length; i < n; i++) {
    cb(keys[i], props[keys[i]]);
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Scope.getApp"></a>[function <span class="apidocSignatureSpan">loopback.Scope.</span>getApp (callback)](#apidoc.element.loopback.Scope.getApp)
- description and source-code
```javascript
getApp = function (callback) {
  var self = this;
  self._runWhenAttachedToApp(function(app) {
    assert(self.app);
    assert.equal(app, self.app);
    callback(null, app);
  });
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Scope.getChangeModel"></a>[function <span class="apidocSignatureSpan">loopback.Scope.</span>getChangeModel ()](#apidoc.element.loopback.Scope.getChangeModel)
- description and source-code
```javascript
getChangeModel = function () {
  var changeModel = this.Change;
  var isSetup = changeModel && changeModel.dataSource;

  assert(isSetup, 'Cannot get a setup Change model for ' + this.modelName);

  return changeModel;
}
```
- example usage
```shell
...
 * @param  {Array}  remoteChanges  An array of change objects.
 * @callback {Function} callback Callback function called with '(err, result)' arguments.  Required.
 * @param {Error} err Error object; see [Error object](http://loopback.io/doc/en/lb2/Error-object.html).
 * @param {Object} result Object with 'deltas' and 'conflicts' properties; see [Change.diff()](#change-diff) for details.
 */

PersistedModel.diff = function(since, remoteChanges, callback) {
  var Change = this.getChangeModel();
  Change.diff(this.modelName, since, remoteChanges, callback);
};

/**
 * Get the changes to a model since the specified checkpoint. Provide a filter object
 * to reduce the number of results returned.
 * @param  {Number}   since    Return only changes since this checkpoint.
...
```

#### <a name="apidoc.element.loopback.Scope.getDataSource"></a>[function <span class="apidocSignatureSpan">loopback.Scope.</span>getDataSource ()](#apidoc.element.loopback.Scope.getDataSource)
- description and source-code
```javascript
getDataSource = function () {
  return this.dataSource;
}
```
- example usage
```shell
...
 * connector that defines it.  Otherwise, uses the default lookup.
 * Override this method to handle complex IDs.
 *
 * @param {*} val The 'id' value. Will be converted to the type that the 'id' property specifies.
 */

PersistedModel.prototype.setId = function(val) {
  var ds = this.getDataSource();
  this[this.getIdName()] = val;
};

/**
 * Get the 'id' value for the 'PersistedModel'.
 *
 * @returns {*} The 'id' value
...
```

#### <a name="apidoc.element.loopback.Scope.getIdName"></a>[function <span class="apidocSignatureSpan">loopback.Scope.</span>getIdName ()](#apidoc.element.loopback.Scope.getIdName)
- description and source-code
```javascript
getIdName = function () {
  var Model = this;
  var ds = Model.getDataSource();

  if (ds.idName) {
    return ds.idName(Model.modelName);
  } else {
    return 'id';
  }
}
```
- example usage
```shell
...
 * Override this method to handle complex IDs.
 *
 * @param {*} val The 'id' value. Will be converted to the type that the 'id' property specifies.
 */

PersistedModel.prototype.setId = function(val) {
  var ds = this.getDataSource();
  this[this.getIdName()] = val;
};

/**
 * Get the 'id' value for the 'PersistedModel'.
 *
 * @returns {*} The 'id' value
 */
...
```

#### <a name="apidoc.element.loopback.Scope.getMaxListeners"></a>[function <span class="apidocSignatureSpan">loopback.Scope.</span>getMaxListeners ()](#apidoc.element.loopback.Scope.getMaxListeners)
- description and source-code
```javascript
getMaxListeners = function () { [native code] }
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Scope.getPropertyType"></a>[function <span class="apidocSignatureSpan">loopback.Scope.</span>getPropertyType (propName)](#apidoc.element.loopback.Scope.getPropertyType)
- description and source-code
```javascript
getPropertyType = function (propName) {
  var prop = this.definition.properties[propName];
  if (!prop) {
    // The property is not part of the definition
    return null;
  }
  if (!prop.type) {
    throw new Error(g.f('Type not defined for property %s.%s', this.modelName, propName));
    // return null;
  }
  return prop.type.name;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Scope.getSourceId"></a>[function <span class="apidocSignatureSpan">loopback.Scope.</span>getSourceId (cb)](#apidoc.element.loopback.Scope.getSourceId)
- description and source-code
```javascript
getSourceId = function (cb) {
  var dataSource = this.dataSource;
  if (!dataSource) {
    this.once('dataSourceAttached', this.getSourceId.bind(this, cb));
  }
  assert(
    dataSource.connector.name,
    'Model.getSourceId: cannot get id without dataSource.connector.name'
  );
  var id = [dataSource.connector.name, this.modelName].join('-');
  cb(null, id);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Scope.handleChangeError"></a>[function <span class="apidocSignatureSpan">loopback.Scope.</span>handleChangeError (err, operationName)](#apidoc.element.loopback.Scope.handleChangeError)
- description and source-code
```javascript
handleChangeError = function (err, operationName) {
  if (!err) return;
  this.emit('error', err, operationName);
}
```
- example usage
```shell
...
    // cleanup
    setInterval(cleanup, cleanupInterval);
  }

  function cleanup() {
    Model.rectifyAllChanges(function(err) {
      if (err) {
        Model.handleChangeError(err, 'cleanup');
      }
    });
  }
};

function rectifyOnSave(ctx, next) {
  var instance = ctx.instance || ctx.currentInstance;
...
```

#### <a name="apidoc.element.loopback.Scope.hasManyRemoting"></a>[function <span class="apidocSignatureSpan">loopback.Scope.</span>hasManyRemoting (relationName, relation, define)](#apidoc.element.loopback.Scope.hasManyRemoting)
- description and source-code
```javascript
hasManyRemoting = function (relationName, relation, define) {
  var pathName = (relation.options.http && relation.options.http.path) || relationName;
  var toModelName = relation.modelTo.modelName;

  var findByIdFunc = this.prototype['__findById__' + relationName];
  define('__findById__' + relationName, {
    isStatic: false,
    http: {verb: 'get', path: '/' + pathName + '/:fk'},
    accepts: [
      {
        arg: 'fk', type: 'any',
        description: format('Foreign key for %s', relationName),
        required: true,
        http: {source: 'path'},
      },
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Find a related item by id for %s.', relationName),
    accessType: 'READ',
    returns: {arg: 'result', type: toModelName, root: true},
    rest: {after: convertNullToNotFoundError.bind(null, toModelName)},
  }, findByIdFunc);

  var destroyByIdFunc = this.prototype['__destroyById__' + relationName];
  define('__destroyById__' + relationName, {
    isStatic: false,
    http: {verb: 'delete', path: '/' + pathName + '/:fk'},
    accepts: [
      {
        arg: 'fk', type: 'any',
        description: format('Foreign key for %s', relationName),
        required: true,
        http: {source: 'path'},
      },
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Delete a related item by id for %s.', relationName),
    accessType: 'WRITE',
    returns: [],
  }, destroyByIdFunc);

  var updateByIdFunc = this.prototype['__updateById__' + relationName];
  define('__updateById__' + relationName, {
    isStatic: false,
    http: {verb: 'put', path: '/' + pathName + '/:fk'},
    accepts: [
      {arg: 'fk', type: 'any',
        description: format('Foreign key for %s', relationName),
        required: true,
        http: {source: 'path'}},
      {arg: 'data', type: 'object', model: toModelName, http: {source: 'body'}},
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Update a related item by id for %s.', relationName),
    accessType: 'WRITE',
    returns: {arg: 'result', type: toModelName, root: true},
  }, updateByIdFunc);

  if (relation.modelThrough || relation.type === 'referencesMany') {
    var modelThrough = relation.modelThrough || relation.modelTo;

    var accepts = [];
    if (relation.type === 'hasMany' && relation.modelThrough) {
      // Restrict: only hasManyThrough relation can have additional properties
      accepts.push({
        arg: 'data', type: 'object', model: modelThrough.modelName,
        http: {source: 'body'},
      });
    }

    var addFunc = this.prototype['__link__' + relationName];
    define('__link__' + relationName, {
      isStatic: false,
      http: {verb: 'put', path: '/' + pathName + '/rel/:fk'},
      accepts: [{arg: 'fk', type: 'any',
        description: format('Foreign key for %s', relationName),
        required: true,
        http: {source: 'path'}},
      ].concat(accepts).concat([
        {arg: 'options', type: 'object', http: 'optionsFromRequest'},
      ]),
      description: format('Add a related item by id for %s.', relationName),
      accessType: 'WRITE',
      returns: {arg: relationName, type: modelThrough.modelName, root: true},
    }, addFunc);

    var removeFunc = this.prototype['__unlink__' + relationName];
    define('__unlink__' + relationName, {
      isStatic: false,
      http: {verb: 'delete', path: '/' + pathName + '/rel/:fk'},
      accepts: [
        {
          arg: 'fk', type: 'any',
          description: format('Foreign key for %s', relationName),
          required: true,
          http: {source: 'path'},
        },
        {arg: 'options', type: 'object', http: 'optionsFromRequest'},
      ],
      description: format('Remove the %s relation to an item by id.', relationName),
      accessType: 'WRITE',
      returns: [],
    }, removeFunc);

    // FIXME: [rfeng] How to map a function with callback(err, true|false) to HEAD?
    // true --> 200 and false --> 404?
    var existsFunc = this.prototype['__exists__' + relatio ...
```
- example usage
```shell
...
    relation.type === 'embedsOne'
  ) {
    ModelCtor.hasOneRemoting(relationName, relation, define);
  } else if (
    relation.type === 'hasMany' ||
    relation.type === 'embedsMany' ||
    relation.type === 'referencesMany') {
    ModelCtor.hasManyRemoting(relationName, relation, define);
  }
}

// handle scopes
var scopes = ModelCtor.scopes || {};
for (var scopeName in scopes) {
  ModelCtor.scopeRemoting(scopeName, scopes[scopeName], define);
...
```

#### <a name="apidoc.element.loopback.Scope.hasOneRemoting"></a>[function <span class="apidocSignatureSpan">loopback.Scope.</span>hasOneRemoting (relationName, relation, define)](#apidoc.element.loopback.Scope.hasOneRemoting)
- description and source-code
```javascript
hasOneRemoting = function (relationName, relation, define) {
  var pathName = (relation.options.http && relation.options.http.path) || relationName;
  var toModelName = relation.modelTo.modelName;

  define('__get__' + relationName, {
    isStatic: false,
    http: {verb: 'get', path: '/' + pathName},
    accepts: [
      {arg: 'refresh', type: 'boolean', http: {source: 'query'}},
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Fetches hasOne relation %s.', relationName),
    accessType: 'READ',
    returns: {arg: relationName, type: relation.modelTo.modelName, root: true},
    rest: {after: convertNullToNotFoundError.bind(null, toModelName)},
  });

  define('__create__' + relationName, {
    isStatic: false,
    http: {verb: 'post', path: '/' + pathName},
    accepts: [
      {
        arg: 'data', type: 'object', model: toModelName,
        http: {source: 'body'},
      },
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Creates a new instance in %s of this model.', relationName),
    accessType: 'WRITE',
    returns: {arg: 'data', type: toModelName, root: true},
  });

  define('__update__' + relationName, {
    isStatic: false,
    http: {verb: 'put', path: '/' + pathName},
    accepts: [
      {
        arg: 'data', type: 'object', model: toModelName,
        http: {source: 'body'},
      },
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Update %s of this model.', relationName),
    accessType: 'WRITE',
    returns: {arg: 'data', type: toModelName, root: true},
  });

  define('__destroy__' + relationName, {
    isStatic: false,
    http: {verb: 'delete', path: '/' + pathName},
    accepts: [
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Deletes %s of this model.', relationName),
    accessType: 'WRITE',
  });
}
```
- example usage
```shell
...
  var relation = relations[relationName];
  if (relation.type === 'belongsTo') {
    ModelCtor.belongsToRemoting(relationName, relation, define);
  } else if (
    relation.type === 'hasOne' ||
    relation.type === 'embedsOne'
  ) {
    ModelCtor.hasOneRemoting(relationName, relation, define);
  } else if (
    relation.type === 'hasMany' ||
    relation.type === 'embedsMany' ||
    relation.type === 'referencesMany') {
    ModelCtor.hasManyRemoting(relationName, relation, define);
  }
}
...
```

#### <a name="apidoc.element.loopback.Scope.isHiddenProperty"></a>[function <span class="apidocSignatureSpan">loopback.Scope.</span>isHiddenProperty (propertyName)](#apidoc.element.loopback.Scope.isHiddenProperty)
- description and source-code
```javascript
isHiddenProperty = function (propertyName) {
  var Model = this;
  var settings = Model.definition && Model.definition.settings;
  var hiddenProperties = settings && (settings.hiddenProperties || settings.hidden);
  if (Array.isArray(hiddenProperties)) {
    // Cache the hidden properties as an object for quick lookup
    settings.hiddenProperties = {};
    for (var i = 0; i < hiddenProperties.length; i++) {
      settings.hiddenProperties[hiddenProperties[i]] = true;
    }
    hiddenProperties = settings.hiddenProperties;
  }
  if (hiddenProperties) {
    return hiddenProperties[propertyName];
  } else {
    return false;
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Scope.isProtectedProperty"></a>[function <span class="apidocSignatureSpan">loopback.Scope.</span>isProtectedProperty (propertyName)](#apidoc.element.loopback.Scope.isProtectedProperty)
- description and source-code
```javascript
isProtectedProperty = function (propertyName) {
  var Model = this;
  var settings = Model.definition && Model.definition.settings;
  var protectedProperties = settings && (settings.protectedProperties || settings.protected);
  if (Array.isArray(protectedProperties)) {
    // Cache the protected properties as an object for quick lookup
    settings.protectedProperties = {};
    for (var i = 0; i < protectedProperties.length; i++) {
      settings.protectedProperties[protectedProperties[i]] = true;
    }
    protectedProperties = settings.protectedProperties;
  }
  if (protectedProperties) {
    return protectedProperties[propertyName];
  } else {
    return false;
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Scope.listenerCount"></a>[function <span class="apidocSignatureSpan">loopback.Scope.</span>listenerCount ()](#apidoc.element.loopback.Scope.listenerCount)
- description and source-code
```javascript
listenerCount = function () { [native code] }
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Scope.listeners"></a>[function <span class="apidocSignatureSpan">loopback.Scope.</span>listeners ()](#apidoc.element.loopback.Scope.listeners)
- description and source-code
```javascript
listeners = function () { [native code] }
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Scope.mixin"></a>[function <span class="apidocSignatureSpan">loopback.Scope.</span>mixin (anotherClass, options)](#apidoc.element.loopback.Scope.mixin)
- description and source-code
```javascript
mixin = function (anotherClass, options) {
  if (typeof anotherClass === 'string') {
    this.modelBuilder.mixins.applyMixin(this, anotherClass, options);
  } else {
    if (anotherClass.prototype instanceof ModelBaseClass) {
      var props = anotherClass.definition.properties;
      for (var i in props) {
        if (this.definition.properties[i]) {
          continue;
        }
        this.defineProperty(i, props[i]);
      }
    }
    return jutil.mixin(this, anotherClass, options);
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Scope.nestRemoting"></a>[function <span class="apidocSignatureSpan">loopback.Scope.</span>nestRemoting (relationName, options, filterCallback)](#apidoc.element.loopback.Scope.nestRemoting)
- description and source-code
```javascript
nestRemoting = function (relationName, options, filterCallback) {
  if (typeof options === 'function' && !filterCallback) {
    filterCallback = options;
    options = {};
  }
  options = options || {};

  var regExp = /^__([^_]+)__([^_]+)$/;
  var relation = this.relations[relationName];
  if (relation && relation.modelTo && relation.modelTo.sharedClass) {
    var self = this;
    var sharedClass = this.sharedClass;
    var sharedToClass = relation.modelTo.sharedClass;
    var toModelName = relation.modelTo.modelName;

    var pathName = options.pathName || relation.options.path || relationName;
    var paramName = options.paramName || 'nk';

    var http = [].concat(sharedToClass.http || [])[0];
    var httpPath, acceptArgs;

    if (relation.multiple) {
      httpPath = pathName + '/:' + paramName;
      acceptArgs = [
        {
          arg: paramName, type: 'any', http: {source: 'path'},
          description: format('Foreign key for %s.',  relation.name),
          required: true,
        },
      ];
    } else {
      httpPath = pathName;
      acceptArgs = [];
    }

    if (httpPath[0] !== '/') {
      httpPath = '/' + httpPath;
    }

    // A method should return the method name to use, if it is to be
    // included as a nested method - a falsy return value will skip.
    var filter = filterCallback || options.filterMethod || function(method, relation) {
      var matches = method.name.match(regExp);
      if (matches) {
        return '__' + matches[1] + '__' + relation.name + '__' + matches[2];
      }
    };

    sharedToClass.methods().forEach(function(method) {
      var methodName;
      if (!method.isStatic && (methodName = filter(method, relation))) {
        var prefix = relation.multiple ? '__findById__' : '__get__';
        var getterName = options.getterName || (prefix + relationName);

        var getterFn = relation.modelFrom.prototype[getterName];
        if (typeof getterFn !== 'function') {
          throw new Error(g.f('Invalid remote method: '%s'', getterName));
        }

        var nestedFn = relation.modelTo.prototype[method.name];
        if (typeof nestedFn !== 'function') {
          throw new Error(g.f('Invalid remote method: '%s'', method.name));
        }

        var opts = {};

        opts.accepts = acceptArgs.concat(method.accepts || []);
        opts.returns = [].concat(method.returns || []);
        opts.description = method.description;
        opts.accessType = method.accessType;
        opts.rest = extend({}, method.rest || {});
        opts.rest.delegateTo = method;

        opts.http = [];
        var routes = [].concat(method.http || []);
        routes.forEach(function(route) {
          if (route.path) {
            var copy = extend({}, route);
            copy.path = httpPath + route.path;
            opts.http.push(copy);
          }
        });

        if (relation.multiple) {
          sharedClass.defineMethod(methodName, opts, function(fkId) {
            var args = Array.prototype.slice.call(arguments, 1);
            var last = args[args.length - 1];
            var cb = typeof last === 'function' ? last : null;
            this[getterName](fkId, function(err, inst) {
              if (err && cb) return cb(err);
              if (inst instanceof relation.modelTo) {
                try {
                  nestedFn.apply(inst, args);
                } catch (err) {
                  if (cb) return cb(err);
                }
              } else if (cb) {
                cb(err, null);
              }
            });
          }, method.isStatic);
        } else {
          sharedClass.defineMethod(methodName, opts, function() {
            var args = Array.prototype.slice.call(arguments);
            var last = args[args.length - 1];
            var cb = typeof last === 'function' ? last : null;
            this[getterName](function(err, inst) {
              if (err && cb) return cb(err);
              if (inst instanceof relation.modelTo) {
                try {
                  nestedFn.apply(inst, args);
                } catch (err) {
                  if (cb) return ...
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Scope.notifyObserversAround"></a>[function <span class="apidocSignatureSpan">loopback.Scope.</span>notifyObserversAround (operation, context, fn, callback)](#apidoc.element.loopback.Scope.notifyObserversAround)
- description and source-code
```javascript
notifyObserversAround = function (operation, context, fn, callback) {
  var self = this;
  context = context || {};
  // Add callback to the context object so that an observer can skip other
  // ones by calling the callback function directly and not calling next
  if (context.end === undefined) {
    context.end = callback;
  }
  // First notify before observers
  return self.notifyObserversOf('before ' + operation, context,
    function(err, context) {
      if (err) return callback(err);

      function cbForWork(err) {
        var args = [].slice.call(arguments, 0);
        if (err) return callback.apply(null, args);
        // Find the list of params from the callback in addition to err
        var returnedArgs = args.slice(1);
        // Set up the array of results
        context.results = returnedArgs;
        // Notify after observers
        self.notifyObserversOf('after ' + operation, context,
          function(err, context) {
            if (err) return callback(err, context);
            var results = returnedArgs;
            if (context && Array.isArray(context.results)) {
              // Pickup the results from context
              results = context.results;
            }
            // Build the list of params for final callback
            var args = [err].concat(results);
            callback.apply(null, args);
          });
      }

      if (fn.length === 1) {
        // fn(done)
        fn(cbForWork);
      } else {
        // fn(context, done)
        fn(context, cbForWork);
      }
    });
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Scope.notifyObserversOf"></a>[function <span class="apidocSignatureSpan">loopback.Scope.</span>notifyObserversOf (operation, context, callback)](#apidoc.element.loopback.Scope.notifyObserversOf)
- description and source-code
```javascript
notifyObserversOf = function (operation, context, callback) {
  var self = this;
  if (!callback) callback = utils.createPromiseCallback();

  function createNotifier(op) {
    return function(ctx, done) {
      if (typeof ctx === 'function' && done === undefined) {
        done = ctx;
        ctx = context;
      }
      self.notifyObserversOf(op, context, done);
    };
  }

  if (Array.isArray(operation)) {
    var tasks = [];
    for (var i = 0, n = operation.length; i < n; i++) {
      tasks.push(createNotifier(operation[i]));
    }
    return async.waterfall(tasks, callback);
  }

  var observers = this._observers && this._observers[operation];

  this._notifyBaseObservers(operation, context, function doNotify(err) {
    if (err) return callback(err, context);
    if (!observers || !observers.length) return callback(null, context);

    async.eachSeries(
      observers,
      function notifySingleObserver(fn, next) {
        var retval = fn(context, next);
        if (retval && typeof retval.then === 'function') {
          retval.then(
            function() { next(); return null; },
            next // error handler
          );
        }
      },
      function(err) { callback(err, context); }
    );
  });
  return callback.promise;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Scope.observe"></a>[function <span class="apidocSignatureSpan">loopback.Scope.</span>observe (operation, listener)](#apidoc.element.loopback.Scope.observe)
- description and source-code
```javascript
observe = function (operation, listener) {
  this._observers = this._observers || {};
  if (!this._observers[operation]) {
    this._observers[operation] = [];
  }

  this._observers[operation].push(listener);
}
```
- example usage
```shell
...
var idType = idProp && idProp.type;
var idDefn = idProp && idProp.defaultFn;
if (idType !== String || !(idDefn === 'uuid' || idDefn === 'guid')) {
  deprecated('The model ' + this.modelName + ' is tracking changes, ' +
    'which requires a string id with GUID/UUID default value.');
}

Model.observe('after save', rectifyOnSave);

Model.observe('after delete', rectifyOnDelete);

// Only run if the run time is server
// Can switch off cleanup by setting the interval to -1
if (runtime.isServer && cleanupInterval > 0) {
  // initial cleanup
...
```

#### <a name="apidoc.element.loopback.Scope.on"></a>[function <span class="apidocSignatureSpan">loopback.Scope.</span>on ()](#apidoc.element.loopback.Scope.on)
- description and source-code
```javascript
on = function () { [native code] }
```
- example usage
```shell
...
    this.remotes().addClass(Model.Change.sharedClass);
  }
  clearHandlerCache(this);
  this.emit('modelRemoted', Model.sharedClass);
}

var self = this;
Model.on('remoteMethodDisabled', function(model, methodName) {
  self.emit('remoteMethodDisabled', model, methodName);
});
Model.on('remoteMethodAdded', function(model) {
  self.emit('remoteMethodAdded', model);
});

Model.shared = isPublic;
...
```

#### <a name="apidoc.element.loopback.Scope.once"></a>[function <span class="apidocSignatureSpan">loopback.Scope.</span>once ()](#apidoc.element.loopback.Scope.once)
- description and source-code
```javascript
once = function () { [native code] }
```
- example usage
```shell
...
    remotes.afterError(className + '.' + name, fn);
  });
};

ModelCtor._runWhenAttachedToApp = function(fn) {
  if (this.app) return fn(this.app);
  var self = this;
  self.once('attached', function() {
    fn(self.app);
  });
};

if ('injectOptionsFromRemoteContext' in options) {
  console.warn(g.f(
    '%s is using model setting %s which is no longer available.',
...
```

#### <a name="apidoc.element.loopback.Scope.patchOrCreate"></a>[function <span class="apidocSignatureSpan">loopback.Scope.</span>patchOrCreate (data, callback)](#apidoc.element.loopback.Scope.patchOrCreate)
- description and source-code
```javascript
function upsert(data, callback) {
  throwNotAttached(this.modelName, 'upsert');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Scope.patchOrCreateWithWhere"></a>[function <span class="apidocSignatureSpan">loopback.Scope.</span>patchOrCreateWithWhere (where, data, callback)](#apidoc.element.loopback.Scope.patchOrCreateWithWhere)
- description and source-code
```javascript
function upsertWithWhere(where, data, callback) {
  throwNotAttached(this.modelName, 'upsertWithWhere');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Scope.prependListener"></a>[function <span class="apidocSignatureSpan">loopback.Scope.</span>prependListener ()](#apidoc.element.loopback.Scope.prependListener)
- description and source-code
```javascript
prependListener = function () { [native code] }
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Scope.prependOnceListener"></a>[function <span class="apidocSignatureSpan">loopback.Scope.</span>prependOnceListener ()](#apidoc.element.loopback.Scope.prependOnceListener)
- description and source-code
```javascript
prependOnceListener = function () { [native code] }
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Scope.rectifyAllChanges"></a>[function <span class="apidocSignatureSpan">loopback.Scope.</span>rectifyAllChanges (callback)](#apidoc.element.loopback.Scope.rectifyAllChanges)
- description and source-code
```javascript
rectifyAllChanges = function (callback) {
  this.getChangeModel().rectifyAll(callback);
}
```
- example usage
```shell
...
    cleanup();

    // cleanup
    setInterval(cleanup, cleanupInterval);
  }

  function cleanup() {
    Model.rectifyAllChanges(function(err) {
      if (err) {
        Model.handleChangeError(err, 'cleanup');
      }
    });
  }
};
...
```

#### <a name="apidoc.element.loopback.Scope.rectifyChange"></a>[function <span class="apidocSignatureSpan">loopback.Scope.</span>rectifyChange (id, callback)](#apidoc.element.loopback.Scope.rectifyChange)
- description and source-code
```javascript
rectifyChange = function (id, callback) {
  var Change = this.getChangeModel();
  Change.rectifyModelChanges(this.modelName, [id], callback);
}
```
- example usage
```shell
...
  debug('rectifyOnSave %s -> ' + (id ? 'id %j' : '%s'),
    ctx.Model.modelName, id ? id : 'ALL');
  debug('context instance:%j currentInstance:%j where:%j data %j',
    ctx.instance, ctx.currentInstance, ctx.where, ctx.data);
}

if (id) {
  ctx.Model.rectifyChange(id, reportErrorAndNext);
} else {
  ctx.Model.rectifyAllChanges(reportErrorAndNext);
}

function reportErrorAndNext(err) {
  if (err) {
    ctx.Model.handleChangeError(err, 'after save');
...
```

#### <a name="apidoc.element.loopback.Scope.registerProperty"></a>[function <span class="apidocSignatureSpan">loopback.Scope.</span>registerProperty (propertyName)](#apidoc.element.loopback.Scope.registerProperty)
- description and source-code
```javascript
registerProperty = function (propertyName) {
  var properties = modelDefinition.build();
  var prop = properties[propertyName];
  var DataType = prop.type;
  if (!DataType) {
    throw new Error(g.f('Invalid type for property %s', propertyName));
  }

  if (prop.required) {
    var requiredOptions = typeof prop.required === 'object' ? prop.required : undefined;
    ModelClass.validatesPresenceOf(propertyName, requiredOptions);
  }

  Object.defineProperty(ModelClass.prototype, propertyName, {
    get: function() {
      if (ModelClass.getter[propertyName]) {
        return ModelClass.getter[propertyName].call(this); // Try getter first
      } else {
        return this.__data && this.__data[propertyName]; // Try __data
      }
    },
    set: function(value) {
      var DataType = ModelClass.definition.properties[propertyName].type;
      if (Array.isArray(DataType) || DataType === Array) {
        DataType = List;
      } else if (DataType === Date) {
        DataType = DateType;
      } else if (DataType === Boolean) {
        DataType = BooleanType;
      } else if (typeof DataType === 'string') {
        DataType = modelBuilder.resolveType(DataType);
      }

      var persistUndefinedAsNull = ModelClass.definition.settings.persistUndefinedAsNull;
      if (value === undefined && persistUndefinedAsNull) {
        value = null;
      }

      if (ModelClass.setter[propertyName]) {
        ModelClass.setter[propertyName].call(this, value); // Try setter first
      } else {
        this.__data = this.__data || {};
        if (value === null || value === undefined) {
          this.__data[propertyName] = value;
        } else {
          if (DataType === List) {
            this.__data[propertyName] = DataType(value, properties[propertyName].type, this.__data);
          } else {
            // Assume the type constructor handles Constructor() call
            // If not, we should call new DataType(value).valueOf();
            this.__data[propertyName] = (value instanceof DataType) ? value : DataType(value);
          }
        }
      }
    },
    configurable: true,
    enumerable: true,
  });

  // FIXME: [rfeng] Do we need to keep the raw data?
  // Use $ as the prefix to avoid conflicts with properties such as _id
  Object.defineProperty(ModelClass.prototype, '$' + propertyName, {
    get: function() {
      return this.__data && this.__data[propertyName];
    },
    set: function(value) {
      if (!this.__data) {
        this.__data = {};
      }
      this.__data[propertyName] = value;
    },
    configurable: true,
    enumerable: false,
  });
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Scope.remoteMethod"></a>[function <span class="apidocSignatureSpan">loopback.Scope.</span>remoteMethod (name, options)](#apidoc.element.loopback.Scope.remoteMethod)
- description and source-code
```javascript
remoteMethod = function (name, options) {
  if (options.isStatic === undefined) {
    var m = name.match(/^prototype\.(.*)$/);
    options.isStatic = !m;
    name = options.isStatic ? name : m[1];
  }

  if (options.accepts) {
    options = extend({}, options);
    options.accepts = setupOptionsArgs(options.accepts);
  }

  this.sharedClass.defineMethod(name, options);
  this.emit('remoteMethodAdded', this.sharedClass);
}
```
- example usage
```shell
...
  /**
* Enable remote invocation for the specified method.
* See [Remote methods](http://loopback.io/doc/en/lb2/Remote-methods.html) for more information.
*
* Static method example:
* '''js
* Model.myMethod();
* Model.remoteMethod('myMethod');
* '''
*
* @param {String} name The name of the method.
* @param {Object} options The remoting options.
* See [Remote methods - Options](http://loopback.io/doc/en/lb2/Remote-methods.html#options).
*/
...
```

#### <a name="apidoc.element.loopback.Scope.remove"></a>[function <span class="apidocSignatureSpan">loopback.Scope.</span>remove (where, cb)](#apidoc.element.loopback.Scope.remove)
- description and source-code
```javascript
function destroyAll(where, cb) {
  throwNotAttached(this.modelName, 'destroyAll');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Scope.removeAllListeners"></a>[function <span class="apidocSignatureSpan">loopback.Scope.</span>removeAllListeners ()](#apidoc.element.loopback.Scope.removeAllListeners)
- description and source-code
```javascript
removeAllListeners = function () { [native code] }
```
- example usage
```shell
...

var idName = this.getIdName();
var Model = this;
var changes = new PassThrough({objectMode: true});
var writeable = true;

changes.destroy = function() {
  changes.removeAllListeners('error');
  changes.removeAllListeners('end');
  writeable = false;
  changes = null;
};

changes.on('error', function() {
  writeable = false;
...
```

#### <a name="apidoc.element.loopback.Scope.removeById"></a>[function <span class="apidocSignatureSpan">loopback.Scope.</span>removeById (id, cb)](#apidoc.element.loopback.Scope.removeById)
- description and source-code
```javascript
function deleteById(id, cb) {
  throwNotAttached(this.modelName, 'deleteById');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Scope.removeListener"></a>[function <span class="apidocSignatureSpan">loopback.Scope.</span>removeListener ()](#apidoc.element.loopback.Scope.removeListener)
- description and source-code
```javascript
removeListener = function () { [native code] }
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Scope.removeObserver"></a>[function <span class="apidocSignatureSpan">loopback.Scope.</span>removeObserver (operation, listener)](#apidoc.element.loopback.Scope.removeObserver)
- description and source-code
```javascript
removeObserver = function (operation, listener) {
  if (!(this._observers && this._observers[operation])) return;

  var index = this._observers[operation].indexOf(listener);
  if (index !== -1) {
    return this._observers[operation].splice(index, 1);
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Scope.replaceById"></a>[function <span class="apidocSignatureSpan">loopback.Scope.</span>replaceById (id, data, cb)](#apidoc.element.loopback.Scope.replaceById)
- description and source-code
```javascript
function replaceById(id, data, cb) {
  throwNotAttached(this.modelName, 'replaceById');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Scope.replaceOrCreate"></a>[function <span class="apidocSignatureSpan">loopback.Scope.</span>replaceOrCreate (data, callback)](#apidoc.element.loopback.Scope.replaceOrCreate)
- description and source-code
```javascript
function replaceOrCreate(data, callback) {
  throwNotAttached(this.modelName, 'replaceOrCreate');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Scope.replicate"></a>[function <span class="apidocSignatureSpan">loopback.Scope.</span>replicate (since, targetModel, options, callback)](#apidoc.element.loopback.Scope.replicate)
- description and source-code
```javascript
replicate = function (since, targetModel, options, callback) {
  var lastArg = arguments[arguments.length - 1];

  if (typeof lastArg === 'function' && arguments.length > 1) {
    callback = lastArg;
  }

  if (typeof since === 'function' && since.modelName) {
    targetModel = since;
    since = -1;
  }

  if (typeof since !== 'object') {
    since = {source: since, target: since};
  }

  if (typeof options === 'function') {
    options = {};
  }

  options = options || {};

  var sourceModel = this;
  callback = callback || utils.createPromiseCallback();

  debug('replicating %s since %s to %s since %s',
    sourceModel.modelName,
    since.source,
    targetModel.modelName,
    since.target);
  if (options.filter) {
    debug('\twith filter %j', options.filter);
  }

  // In order to avoid a race condition between the replication and
  // other clients modifying the data, we must create the new target
  // checkpoint as the first step of the replication process.
  // As a side-effect of that, the replicated changes are associated
  // with the new target checkpoint. This is actually desired behaviour,
  // because that way clients replicating *from* the target model
  // since the new checkpoint will pick these changes up.
  // However, it increases the likelihood of (false) conflicts being detected.
  // In order to prevent that, we run the replication multiple times,
  // until no changes were replicated, but at most MAX_ATTEMPTS times
  // to prevent starvation. In most cases, the second run will find no changes
  // to replicate and we are done.
  var MAX_ATTEMPTS = 3;

  run(1, since);
  return callback.promise;

  function run(attempt, since) {
    debug('\titeration #%s', attempt);
    tryReplicate(sourceModel, targetModel, since, options, next);

    function next(err, conflicts, cps, updates) {
      var finished = err || conflicts.length ||
        !updates || updates.length === 0 ||
        attempt >= MAX_ATTEMPTS;

      if (finished)
        return callback(err, conflicts, cps);
      run(attempt + 1, cps);
    }
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Scope.resolveRelatedModels"></a>[function <span class="apidocSignatureSpan">loopback.Scope.</span>resolveRelatedModels ()](#apidoc.element.loopback.Scope.resolveRelatedModels)
- description and source-code
```javascript
resolveRelatedModels = function () {
  if (!this.aclModel) {
    var reg = this.registry;
    this.aclModel = reg.getModelByType(loopback.ACL);
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Scope.scopeRemoting"></a>[function <span class="apidocSignatureSpan">loopback.Scope.</span>scopeRemoting (scopeName, scope, define)](#apidoc.element.loopback.Scope.scopeRemoting)
- description and source-code
```javascript
scopeRemoting = function (scopeName, scope, define) {
  var pathName =
    (scope.options && scope.options.http && scope.options.http.path) || scopeName;

  var isStatic = scope.isStatic;
  var toModelName = scope.modelTo.modelName;

  // https://github.com/strongloop/loopback/issues/811
  // Check if the scope is for a hasMany relation
  var relation = this.relations[scopeName];
  if (relation && relation.modelTo) {
    // For a relation with through model, the toModelName should be the one
    // from the target model
    toModelName = relation.modelTo.modelName;
  }

  define('__get__' + scopeName, {
    isStatic: isStatic,
    http: {verb: 'get', path: '/' + pathName},
    accepts: [
      {arg: 'filter', type: 'object'},
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Queries %s of %s.', scopeName, this.modelName),
    accessType: 'READ',
    returns: {arg: scopeName, type: [toModelName], root: true},
  });

  define('__create__' + scopeName, {
    isStatic: isStatic,
    http: {verb: 'post', path: '/' + pathName},
    accepts: [
      {
        arg: 'data',
        type: 'object',
        allowArray: true,
        model: toModelName,
        http: {source: 'body'},
      },
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Creates a new instance in %s of this model.', scopeName),
    accessType: 'WRITE',
    returns: {arg: 'data', type: toModelName, root: true},
  });

  define('__delete__' + scopeName, {
    isStatic: isStatic,
    http: {verb: 'delete', path: '/' + pathName},
    accepts: [
      {
        arg: 'where', type: 'object',
        // The "where" argument is not exposed in the REST API
        // but we need to provide a value so that we can pass "options"
        // as the third argument.
        http: function(ctx) { return undefined; },
      },
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Deletes all %s of this model.', scopeName),
    accessType: 'WRITE',
  });

  define('__count__' + scopeName, {
    isStatic: isStatic,
    http: {verb: 'get', path: '/' + pathName + '/count'},
    accepts: [
      {
        arg: 'where', type: 'object',
        description: 'Criteria to match model instances',
      },
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Counts %s of %s.', scopeName, this.modelName),
    accessType: 'READ',
    returns: {arg: 'count',  type: 'number'},
  });
}
```
- example usage
```shell
...
        ModelCtor.hasManyRemoting(relationName, relation, define);
      }
    }

    // handle scopes
    var scopes = ModelCtor.scopes || {};
    for (var scopeName in scopes) {
      ModelCtor.scopeRemoting(scopeName, scopes[scopeName], define);
    }
  });

  return ModelCtor;
};

/*!
...
```

#### <a name="apidoc.element.loopback.Scope.setMaxListeners"></a>[function <span class="apidocSignatureSpan">loopback.Scope.</span>setMaxListeners ()](#apidoc.element.loopback.Scope.setMaxListeners)
- description and source-code
```javascript
setMaxListeners = function () { [native code] }
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Scope.setup"></a>[function <span class="apidocSignatureSpan">loopback.Scope.</span>setup ()](#apidoc.element.loopback.Scope.setup)
- description and source-code
```javascript
function setupPersistedModel() {
  // call Model.setup first
  Model.setup.call(this);

  var PersistedModel = this;

  // enable change tracking (usually for replication)
  if (this.settings.trackChanges) {
    PersistedModel._defineChangeModel();
    PersistedModel.once('dataSourceAttached', function() {
      PersistedModel.enableChangeTracking();
    });
  } else if (this.settings.enableRemoteReplication) {
    PersistedModel._defineChangeModel();
  }

  PersistedModel.setupRemoting();
}
```
- example usage
```shell
...
  Model.createOptionsFromRemotingContext = function(ctx) {
    return {
      accessToken: ctx.req.accessToken,
    };
  };

  // setup the initial model
  Model.setup();

  return Model;
};
...
```

#### <a name="apidoc.element.loopback.Scope.setupRemoting"></a>[function <span class="apidocSignatureSpan">loopback.Scope.</span>setupRemoting ()](#apidoc.element.loopback.Scope.setupRemoting)
- description and source-code
```javascript
setupRemoting = function () {
  var PersistedModel = this;
  var typeName = PersistedModel.modelName;
  var options = PersistedModel.settings;

  // This is just for LB 3.x
  options.replaceOnPUT = options.replaceOnPUT !== false;

  function setRemoting(scope, name, options) {
    var fn = scope[name];
    fn._delegate = true;
    options.isStatic = scope === PersistedModel;
    PersistedModel.remoteMethod(name, options);
  }

  setRemoting(PersistedModel, 'create', {
    description: 'Create a new instance of the model and persist it into the data source.',
    accessType: 'WRITE',
    accepts: [
      {
        arg: 'data', type: 'object', model: typeName, allowArray: true,
        description: 'Model instance data',
        http: {source: 'body'},
      },
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    returns: {arg: 'data', type: typeName, root: true},
    http: {verb: 'post', path: '/'},
  });

  var upsertOptions = {
    aliases: ['upsert', 'updateOrCreate'],
    description: 'Patch an existing model instance or insert a new one ' +
      'into the data source.',
    accessType: 'WRITE',
    accepts: [
      {
        arg: 'data', type: 'object', model: typeName, http: {source: 'body'},
        description: 'Model instance data',
      },
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    returns: {arg: 'data', type: typeName, root: true},
    http: [{verb: 'patch', path: '/'}],
  };

  if (!options.replaceOnPUT) {
    upsertOptions.http.unshift({verb: 'put', path: '/'});
  }
  setRemoting(PersistedModel, 'patchOrCreate', upsertOptions);

  var replaceOrCreateOptions = {
    description: 'Replace an existing model instance or insert a new one into the data source.',
    accessType: 'WRITE',
    accepts: [
      {
        arg: 'data', type: 'object', model: typeName,
        http: {source: 'body'},
        description: 'Model instance data',
      },
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    returns: {arg: 'data', type: typeName, root: true},
    http: [{verb: 'post', path: '/replaceOrCreate'}],
  };

  if (options.replaceOnPUT) {
    replaceOrCreateOptions.http.push({verb: 'put', path: '/'});
  }

  setRemoting(PersistedModel, 'replaceOrCreate', replaceOrCreateOptions);

  setRemoting(PersistedModel, 'upsertWithWhere', {
    aliases: ['patchOrCreateWithWhere'],
    description: 'Update an existing model instance or insert a new one into ' +
      'the data source based on the where criteria.',
    accessType: 'WRITE',
    accepts: [
      {arg: 'where', type: 'object', http: {source: 'query'},
        description: 'Criteria to match model instances'},
      {arg: 'data', type: 'object', model: typeName, http: {source: 'body'},
        description: 'An object of model property name/value pairs'},
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    returns: {arg: 'data', type: typeName, root: true},
    http: {verb: 'post', path: '/upsertWithWhere'},
  });

  setRemoting(PersistedModel, 'exists', {
    description: 'Check whether a model instance exists in the data source.',
    accessType: 'READ',
    accepts: [
      {arg: 'id', type: 'any', description: 'Model id', required: true},
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    returns: {arg: 'exists', type: 'boolean'},
    http: [
      {verb: 'get', path: '/:id/exists'},
      {verb: 'head', path: '/:id'},
    ],
    rest: {
      // After hook to map exists to 200/404 for HEAD
      after: function(ctx, cb) {
        if (ctx.req.method === 'GET') {
          // For GET, return {exists: true|false} as is
          return cb();
        }
        if (!ctx.result.exists) {
          var modelName = ctx.method.sharedClass.name;
          var id = ctx.getArgByName('id');
          var msg = 'Unknown "' + modelName + '" id "' + id + '".';
          var error = new Error(msg);
          error.statusCode = error.status = 404;
          error.code = 'MODEL_NOT_FOUND';
          cb(error);
        } else {
          cb();
        } ...
```
- example usage
```shell
...
    PersistedModel.once('dataSourceAttached', function() {
      PersistedModel.enableChangeTracking();
    });
  } else if (this.settings.enableRemoteReplication) {
    PersistedModel._defineChangeModel();
  }

  PersistedModel.setupRemoting();
};

/*!
 * Throw an error telling the user that the method is not available and why.
 */

function throwNotAttached(modelName, methodName) {
...
```

#### <a name="apidoc.element.loopback.Scope.sharedCtor"></a>[function <span class="apidocSignatureSpan">loopback.Scope.</span>sharedCtor (data, id, options, fn)](#apidoc.element.loopback.Scope.sharedCtor)
- description and source-code
```javascript
sharedCtor = function (data, id, options, fn) {
  var ModelCtor = this;

  var isRemoteInvocationWithOptions = typeof data !== 'object' &&
    typeof id === 'object' &&
    typeof options === 'function';
  if (isRemoteInvocationWithOptions) {
    // sharedCtor(id, options, fn)
    fn = options;
    options = id;
    id = data;
    data = null;
  } else if (typeof data === 'function') {
    // sharedCtor(fn)
    fn = data;
    data = null;
    id = null;
    options = null;
  } else if (typeof id === 'function') {
    // sharedCtor(data, fn)
    // sharedCtor(id, fn)
    fn = id;
    options = null;

    if (typeof data !== 'object') {
      id = data;
      data = null;
    } else {
      id = null;
    }
  }

  if (id && data) {
    var model = new ModelCtor(data);
    model.id = id;
    fn(null, model);
  } else if (data) {
    fn(null, new ModelCtor(data));
  } else if (id) {
    var filter = {};
    ModelCtor.findById(id, filter, options, function(err, model) {
      if (err) {
        fn(err);
      } else if (model) {
        fn(null, model);
      } else {
        err = new Error(g.f('could not find a model with apidoc.element.loopback.Scope.sharedCtor %s', id));
        err.statusCode = 404;
        err.code = 'MODEL_NOT_FOUND';
        fn(err);
      }
    });
  } else {
    fn(new Error(g.f('must specify an apidoc.element.loopback.Scope.sharedCtor or {{data}}')));
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Scope.super_"></a>[function <span class="apidocSignatureSpan">loopback.Scope.</span>super_ (data, options)](#apidoc.element.loopback.Scope.super_)
- description and source-code
```javascript
function ModelConstructor(data, options) {
  if (!(this instanceof ModelConstructor)) {
    return new ModelConstructor(data, options);
  }
  if (ModelClass.settings.unresolved) {
    throw new Error(g.f('Model %s is not defined.', ModelClass.modelName));
  }
  ModelBaseClass.apply(this, arguments);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Scope.update"></a>[function <span class="apidocSignatureSpan">loopback.Scope.</span>update (where, data, cb)](#apidoc.element.loopback.Scope.update)
- description and source-code
```javascript
function updateAll(where, data, cb) {
  throwNotAttached(this.modelName, 'updateAll');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Scope.updateAll"></a>[function <span class="apidocSignatureSpan">loopback.Scope.</span>updateAll (where, data, cb)](#apidoc.element.loopback.Scope.updateAll)
- description and source-code
```javascript
function updateAll(where, data, cb) {
  throwNotAttached(this.modelName, 'updateAll');
}
```
- example usage
```shell
...

  /**
* Update multiple instances that match the where clause.
*
* Example:
*
*'''js
* Employee.updateAll({managerId: 'x001'}, {managerId: 'x002'}, function(err, info) {
*     ...
* });
* '''
*
* @param {Object} [where] Optional 'where' filter, like
* '''
* { key: val, key2: {gt: 'val2'}, ...}
...
```

#### <a name="apidoc.element.loopback.Scope.updateLastChange"></a>[function <span class="apidocSignatureSpan">loopback.Scope.</span>updateLastChange (id, data, cb)](#apidoc.element.loopback.Scope.updateLastChange)
- description and source-code
```javascript
updateLastChange = function (id, data, cb) {
  var self = this;
  this.findLastChange(id, function(err, inst) {
    if (err) return cb(err);
    if (!inst) {
      err = new Error(g.f('No change record found for %s with id %s',
        self.modelName, id));
      err.statusCode = 404;
      return cb(err);
    }

    inst.updateAttributes(data, cb);
  });
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Scope.updateOrCreate"></a>[function <span class="apidocSignatureSpan">loopback.Scope.</span>updateOrCreate (data, callback)](#apidoc.element.loopback.Scope.updateOrCreate)
- description and source-code
```javascript
function upsert(data, callback) {
  throwNotAttached(this.modelName, 'upsert');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Scope.upsert"></a>[function <span class="apidocSignatureSpan">loopback.Scope.</span>upsert (data, callback)](#apidoc.element.loopback.Scope.upsert)
- description and source-code
```javascript
function upsert(data, callback) {
  throwNotAttached(this.modelName, 'upsert');
}
```
- example usage
```shell
...
  }
});

// then save
function save() {
  inst.trigger('save', function(saveDone) {
    inst.trigger('update', function(updateDone) {
      Model.upsert(inst, function(err) {
        inst._initProperties(data);
        updateDone.call(inst, function() {
          saveDone.call(inst, function() {
            callback(err, inst);
          });
        });
      });
...
```

#### <a name="apidoc.element.loopback.Scope.upsertWithWhere"></a>[function <span class="apidocSignatureSpan">loopback.Scope.</span>upsertWithWhere (where, data, callback)](#apidoc.element.loopback.Scope.upsertWithWhere)
- description and source-code
```javascript
function upsertWithWhere(where, data, callback) {
  throwNotAttached(this.modelName, 'upsertWithWhere');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Scope.validate"></a>[function <span class="apidocSignatureSpan">loopback.Scope.</span>validate ()](#apidoc.element.loopback.Scope.validate)
- description and source-code
```javascript
validate = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Scope.validateAsync"></a>[function <span class="apidocSignatureSpan">loopback.Scope.</span>validateAsync ()](#apidoc.element.loopback.Scope.validateAsync)
- description and source-code
```javascript
validateAsync = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Scope.validatesAbsenceOf"></a>[function <span class="apidocSignatureSpan">loopback.Scope.</span>validatesAbsenceOf ()](#apidoc.element.loopback.Scope.validatesAbsenceOf)
- description and source-code
```javascript
validatesAbsenceOf = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Scope.validatesExclusionOf"></a>[function <span class="apidocSignatureSpan">loopback.Scope.</span>validatesExclusionOf ()](#apidoc.element.loopback.Scope.validatesExclusionOf)
- description and source-code
```javascript
validatesExclusionOf = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Scope.validatesFormatOf"></a>[function <span class="apidocSignatureSpan">loopback.Scope.</span>validatesFormatOf ()](#apidoc.element.loopback.Scope.validatesFormatOf)
- description and source-code
```javascript
validatesFormatOf = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Scope.validatesInclusionOf"></a>[function <span class="apidocSignatureSpan">loopback.Scope.</span>validatesInclusionOf ()](#apidoc.element.loopback.Scope.validatesInclusionOf)
- description and source-code
```javascript
validatesInclusionOf = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Scope.validatesLengthOf"></a>[function <span class="apidocSignatureSpan">loopback.Scope.</span>validatesLengthOf ()](#apidoc.element.loopback.Scope.validatesLengthOf)
- description and source-code
```javascript
validatesLengthOf = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Scope.validatesNumericalityOf"></a>[function <span class="apidocSignatureSpan">loopback.Scope.</span>validatesNumericalityOf ()](#apidoc.element.loopback.Scope.validatesNumericalityOf)
- description and source-code
```javascript
validatesNumericalityOf = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Scope.validatesPresenceOf"></a>[function <span class="apidocSignatureSpan">loopback.Scope.</span>validatesPresenceOf ()](#apidoc.element.loopback.Scope.validatesPresenceOf)
- description and source-code
```javascript
validatesPresenceOf = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.Scope.validatesUniquenessOf"></a>[function <span class="apidocSignatureSpan">loopback.Scope.</span>validatesUniquenessOf ()](#apidoc.element.loopback.Scope.validatesUniquenessOf)
- description and source-code
```javascript
validatesUniquenessOf = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```



# <a name="apidoc.module.loopback.Scope.settings"></a>[module loopback.Scope.settings](#apidoc.module.loopback.Scope.settings)

#### <a name="apidoc.element.loopback.Scope.settings.base"></a>[function <span class="apidocSignatureSpan">loopback.Scope.settings.</span>base (data, options)](#apidoc.element.loopback.Scope.settings.base)
- description and source-code
```javascript
function ModelConstructor(data, options) {
  if (!(this instanceof ModelConstructor)) {
    return new ModelConstructor(data, options);
  }
  if (ModelClass.settings.unresolved) {
    throw new Error(g.f('Model %s is not defined.', ModelClass.modelName));
  }
  ModelBaseClass.apply(this, arguments);
}
```
- example usage
```shell
n/a
```



# <a name="apidoc.module.loopback.Scope.sharedClass"></a>[module loopback.Scope.sharedClass](#apidoc.module.loopback.Scope.sharedClass)

#### <a name="apidoc.element.loopback.Scope.sharedClass.ctor"></a>[function <span class="apidocSignatureSpan">loopback.Scope.sharedClass.</span>ctor (data, options)](#apidoc.element.loopback.Scope.sharedClass.ctor)
- description and source-code
```javascript
function ModelConstructor(data, options) {
  if (!(this instanceof ModelConstructor)) {
    return new ModelConstructor(data, options);
  }
  if (ModelClass.settings.unresolved) {
    throw new Error(g.f('Model %s is not defined.', ModelClass.modelName));
  }
  ModelBaseClass.apply(this, arguments);
}
```
- example usage
```shell
n/a
```



# <a name="apidoc.module.loopback.User"></a>[module loopback.User](#apidoc.module.loopback.User)

#### <a name="apidoc.element.loopback.User.User"></a>[function <span class="apidocSignatureSpan">loopback.</span>User (data, options)](#apidoc.element.loopback.User.User)
- description and source-code
```javascript
function ModelConstructor(data, options) {
  if (!(this instanceof ModelConstructor)) {
    return new ModelConstructor(data, options);
  }
  if (ModelClass.settings.unresolved) {
    throw new Error(g.f('Model %s is not defined.', ModelClass.modelName));
  }
  ModelBaseClass.apply(this, arguments);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.User.ValidationError"></a>[function <span class="apidocSignatureSpan">loopback.User.</span>ValidationError (obj)](#apidoc.element.loopback.User.ValidationError)
- description and source-code
```javascript
function ValidationError(obj) {
  if (!(this instanceof ValidationError)) return new ValidationError(obj);

  this.name = 'ValidationError';

  var context = obj && obj.constructor && obj.constructor.modelName;
  this.message = g.f(
    'The %s instance is not valid. Details: %s.',
      context ? ''' + context + ''' : 'model',
      formatErrors(obj.errors, obj.toJSON()) || '(unknown)'
  );

  this.statusCode = 422;

  this.details = {
    context: context,
    codes: obj.errors && obj.errors.codes,
    messages: obj.errors,
  };

  if (Error.captureStackTrace) {
    // V8 (Chrome, Opera, Node)
    Error.captureStackTrace(this, this.constructor);
  } else if (errorHasStackProperty) {
    // Firefox
    this.stack = (new Error).stack;
  }
  // Safari and PhantomJS initializes 'error.stack' on throw
  // Internet Explorer does not support 'error.stack'
}
```
- example usage
```shell
...
  return save();
}

inst.isValid(function(valid) {
  if (valid) {
    save();
  } else {
    var err = new Model.ValidationError(inst);
    // throws option is dangerous for async usage
    if (options.throws) {
      throw err;
    }
    callback(err, inst);
  }
});
...
```

#### <a name="apidoc.element.loopback.User._ACL"></a>[function <span class="apidocSignatureSpan">loopback.User.</span>_ACL (ACL)](#apidoc.element.loopback.User._ACL)
- description and source-code
```javascript
function getACL(ACL) {
  var registry = this.registry;
  if (ACL !== undefined) {
    // The function is used as a setter
    _aclModel = ACL;
  }
  if (_aclModel) {
    return _aclModel;
  }
  var aclModel = registry.getModel('ACL');
  _aclModel = registry.getModelByType(aclModel);
  return _aclModel;
}
```
- example usage
```shell
...
   * @param {String|Error} err The error object.
   * @param {Boolean} allowed True if the request is allowed; false otherwise.
   */

  Model.checkAccess = function(token, modelId, sharedMethod, ctx, callback) {
var ANONYMOUS = registry.getModel('AccessToken').ANONYMOUS;
token = token || ANONYMOUS;
var aclModel = Model._ACL();

ctx = ctx || {};
if (typeof ctx === 'function' && callback === undefined) {
  callback = ctx;
  ctx = {};
}
...
```

#### <a name="apidoc.element.loopback.User._defineChangeModel"></a>[function <span class="apidocSignatureSpan">loopback.User.</span>_defineChangeModel ()](#apidoc.element.loopback.User._defineChangeModel)
- description and source-code
```javascript
_defineChangeModel = function () {
  var BaseChangeModel = this.registry.getModel('Change');
  assert(BaseChangeModel,
    'Change model must be defined before enabling change replication');

  const additionalChangeModelProperties =
    this.settings.additionalChangeModelProperties || {};

  this.Change = BaseChangeModel.extend(this.modelName + '-change',
    additionalChangeModelProperties,
    {trackModel: this}
  );

  if (this.dataSource) {
    attachRelatedModels(this);
  }

  // Re-attach related models whenever our datasource is changed.
  var self = this;
  this.on('dataSourceAttached', function() {
    attachRelatedModels(self);
  });

  return this.Change;

  function attachRelatedModels(self) {
    self.Change.attachTo(self.dataSource);
    self.Change.getCheckpointModel().attachTo(self.dataSource);
  }
}
```
- example usage
```shell
...
// call Model.setup first
Model.setup.call(this);

var PersistedModel = this;

// enable change tracking (usually for replication)
if (this.settings.trackChanges) {
  PersistedModel._defineChangeModel();
  PersistedModel.once('dataSourceAttached', function() {
    PersistedModel.enableChangeTracking();
  });
} else if (this.settings.enableRemoteReplication) {
  PersistedModel._defineChangeModel();
}
...
```

#### <a name="apidoc.element.loopback.User._getAccessTypeForMethod"></a>[function <span class="apidocSignatureSpan">loopback.User.</span>_getAccessTypeForMethod (method)](#apidoc.element.loopback.User._getAccessTypeForMethod)
- description and source-code
```javascript
_getAccessTypeForMethod = function (method) {
  if (typeof method === 'string') {
    method = {name: method};
  }
  assert(
    typeof method === 'object',
    'method is a required argument and must be a RemoteMethod object'
  );

  var ACL = Model._ACL();

  // Check the explicit setting of accessType
  if (method.accessType) {
    assert(method.accessType === ACL.READ ||
      method.accessType === ACL.REPLICATE ||
      method.accessType === ACL.WRITE ||
      method.accessType === ACL.EXECUTE, 'invalid accessType ' +
      method.accessType +
      '. It must be "READ", "REPLICATE", "WRITE", or "EXECUTE"');
    return method.accessType;
  }

  // Default GET requests to READ
  var verb = method.http && method.http.verb;
  if (typeof verb === 'string') {
    verb = verb.toUpperCase();
  }
  if (verb === 'GET' || verb === 'HEAD') {
    return ACL.READ;
  }

  switch (method.name) {
    case 'create':
      return ACL.WRITE;
    case 'updateOrCreate':
      return ACL.WRITE;
    case 'upsertWithWhere':
      return ACL.WRITE;
    case 'upsert':
      return ACL.WRITE;
    case 'exists':
      return ACL.READ;
    case 'findById':
      return ACL.READ;
    case 'find':
      return ACL.READ;
    case 'findOne':
      return ACL.READ;
    case 'destroyById':
      return ACL.WRITE;
    case 'deleteById':
      return ACL.WRITE;
    case 'removeById':
      return ACL.WRITE;
    case 'count':
      return ACL.READ;
    default:
      return ACL.EXECUTE;
  }
}
```
- example usage
```shell
...
if (this.sharedMethod) {
  this.methodNames = this.sharedMethod.aliases.concat([this.sharedMethod.name]);
} else {
  this.methodNames = [];
}

if (this.sharedMethod) {
  this.accessType = this.model._getAccessTypeForMethod(this.sharedMethod);
}

this.accessType = context.accessType || AccessContext.ALL;
assert(loopback.AccessToken,
  'AccessToken model must be defined before AccessContext model');
this.accessToken = context.accessToken || loopback.AccessToken.ANONYMOUS;
...
```

#### <a name="apidoc.element.loopback.User._invalidateAccessTokensOfUsers"></a>[function <span class="apidocSignatureSpan">loopback.User.</span>_invalidateAccessTokensOfUsers (userIds, options, cb)](#apidoc.element.loopback.User._invalidateAccessTokensOfUsers)
- description and source-code
```javascript
_invalidateAccessTokensOfUsers = function (userIds, options, cb) {
  if (typeof options === 'function' && cb === undefined) {
    cb = options;
    options = {};
  }

  if (!Array.isArray(userIds) || !userIds.length)
    return process.nextTick(cb);

  var accessTokenRelation = this.relations.accessTokens;
  if (!accessTokenRelation)
    return process.nextTick(cb);

  var AccessToken = accessTokenRelation.modelTo;
  var query = {userId: {inq: userIds}};
  var tokenPK = AccessToken.definition.idName() || 'id';
  if (options.accessToken && tokenPK in options.accessToken) {
    query[tokenPK] = {neq: options.accessToken[tokenPK]};
  }
  // add principalType in AccessToken.query if using polymorphic relations
  // between AccessToken and User
  var relatedUser = AccessToken.relations.user;
  var isRelationPolymorphic = relatedUser && relatedUser.polymorphic &&
    !relatedUser.modelTo;
  if (isRelationPolymorphic) {
    query.principalType = this.modelName;
  }
  AccessToken.deleteAll(query, options, cb);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.User._notifyBaseObservers"></a>[function <span class="apidocSignatureSpan">loopback.User.</span>_notifyBaseObservers (operation, context, callback)](#apidoc.element.loopback.User._notifyBaseObservers)
- description and source-code
```javascript
_notifyBaseObservers = function (operation, context, callback) {
  if (this.base && this.base.notifyObserversOf)
    this.base.notifyObserversOf(operation, context, callback);
  else
    callback();
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.User._runWhenAttachedToApp"></a>[function <span class="apidocSignatureSpan">loopback.User.</span>_runWhenAttachedToApp (fn)](#apidoc.element.loopback.User._runWhenAttachedToApp)
- description and source-code
```javascript
_runWhenAttachedToApp = function (fn) {
  if (this.app) return fn(this.app);
  var self = this;
  self.once('attached', function() {
    fn(self.app);
  });
}
```
- example usage
```shell
...
  ModelCtor,
  remotingOptions
);

// before remote hook
ModelCtor.beforeRemote = function(name, fn) {
  var className = this.modelName;
  this._runWhenAttachedToApp(function(app) {
    var remotes = app.remotes();
    remotes.before(className + '.' + name, function(ctx, next) {
      return fn(ctx, ctx.result, next);
    });
  });
};
...
```

#### <a name="apidoc.element.loopback.User.accessToken"></a>[function <span class="apidocSignatureSpan">loopback.User.</span>accessToken (data, options)](#apidoc.element.loopback.User.accessToken)
- description and source-code
```javascript
function ModelConstructor(data, options) {
  if (!(this instanceof ModelConstructor)) {
    return new ModelConstructor(data, options);
  }
  if (ModelClass.settings.unresolved) {
    throw new Error(g.f('Model %s is not defined.', ModelClass.modelName));
  }
  ModelBaseClass.apply(this, arguments);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.User.addListener"></a>[function <span class="apidocSignatureSpan">loopback.User.</span>addListener ()](#apidoc.element.loopback.User.addListener)
- description and source-code
```javascript
addListener = function () { [native code] }
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.User.afterRemote"></a>[function <span class="apidocSignatureSpan">loopback.User.</span>afterRemote (name, fn)](#apidoc.element.loopback.User.afterRemote)
- description and source-code
```javascript
afterRemote = function (name, fn) {
  var className = this.modelName;
  this._runWhenAttachedToApp(function(app) {
    var remotes = app.remotes();
    remotes.after(className + '.' + name, function(ctx, next) {
      return fn(ctx, ctx.result, next);
    });
  });
}
```
- example usage
```shell
...
        var m = method.isStatic ? method.name : 'prototype.' + method.name;
        if (before && before[delegateTo.name]) {
          self.beforeRemote(m, function(ctx, result, next) {
            before[delegateTo.name]._listeners.call(null, ctx, next);
          });
        }
        if (after && after[delegateTo.name]) {
          self.afterRemote(m, function(ctx, result, next) {
            after[delegateTo.name]._listeners.call(null, ctx, next);
          });
        }
      }
    });
  });
} else {
...
```

#### <a name="apidoc.element.loopback.User.afterRemoteError"></a>[function <span class="apidocSignatureSpan">loopback.User.</span>afterRemoteError (name, fn)](#apidoc.element.loopback.User.afterRemoteError)
- description and source-code
```javascript
afterRemoteError = function (name, fn) {
  var className = this.modelName;
  this._runWhenAttachedToApp(function(app) {
    var remotes = app.remotes();
    remotes.afterError(className + '.' + name, fn);
  });
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.User.attachTo"></a>[function <span class="apidocSignatureSpan">loopback.User.</span>attachTo (dataSource)](#apidoc.element.loopback.User.attachTo)
- description and source-code
```javascript
attachTo = function (dataSource) {
  dataSource.attach(this);
}
```
- example usage
```shell
...
  this.on('dataSourceAttached', function() {
    attachRelatedModels(self);
  });

  return this.Change;

  function attachRelatedModels(self) {
    self.Change.attachTo(self.dataSource);
    self.Change.getCheckpointModel().attachTo(self.dataSource);
  }
};

PersistedModel.rectifyAllChanges = function(callback) {
  this.getChangeModel().rectifyAll(callback);
};
...
```

#### <a name="apidoc.element.loopback.User.beforeRemote"></a>[function <span class="apidocSignatureSpan">loopback.User.</span>beforeRemote (name, fn)](#apidoc.element.loopback.User.beforeRemote)
- description and source-code
```javascript
beforeRemote = function (name, fn) {
  var className = this.modelName;
  this._runWhenAttachedToApp(function(app) {
    var remotes = app.remotes();
    remotes.before(className + '.' + name, function(ctx, next) {
      return fn(ctx, ctx.result, next);
    });
  });
}
```
- example usage
```shell
...
        sharedClass.methods().forEach(function(method) {
var delegateTo = method.rest && method.rest.delegateTo;
if (delegateTo && delegateTo.ctor == relation.modelTo) {
  var before = method.isStatic ? beforeListeners : beforeListeners['prototype'];
  var after = method.isStatic ? afterListeners : afterListeners['prototype'];
  var m = method.isStatic ? method.name : 'prototype.' + method.name;
  if (before && before[delegateTo.name]) {
    self.beforeRemote(m, function(ctx, result, next) {
      before[delegateTo.name]._listeners.call(null, ctx, next);
    });
  }
  if (after && after[delegateTo.name]) {
    self.afterRemote(m, function(ctx, result, next) {
      after[delegateTo.name]._listeners.call(null, ctx, next);
    });
...
```

#### <a name="apidoc.element.loopback.User.belongsToRemoting"></a>[function <span class="apidocSignatureSpan">loopback.User.</span>belongsToRemoting (relationName, relation, define)](#apidoc.element.loopback.User.belongsToRemoting)
- description and source-code
```javascript
belongsToRemoting = function (relationName, relation, define) {
  var modelName = relation.modelTo && relation.modelTo.modelName;
  modelName = modelName || 'PersistedModel';
  var fn = this.prototype[relationName];
  var pathName = (relation.options.http && relation.options.http.path) || relationName;
  define('__get__' + relationName, {
    isStatic: false,
    http: {verb: 'get', path: '/' + pathName},
    accepts: [
      {arg: 'refresh', type: 'boolean', http: {source: 'query'}},
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    accessType: 'READ',
    description: format('Fetches belongsTo relation %s.', relationName),
    returns: {arg: relationName, type: modelName, root: true},
  }, fn);
}
```
- example usage
```shell
...
  defineRaw(name, options, fn);
};

// get the relations
for (var relationName in relations) {
  var relation = relations[relationName];
  if (relation.type === 'belongsTo') {
    ModelCtor.belongsToRemoting(relationName, relation, define);
  } else if (
    relation.type === 'hasOne' ||
    relation.type === 'embedsOne'
  ) {
    ModelCtor.hasOneRemoting(relationName, relation, define);
  } else if (
    relation.type === 'hasMany' ||
...
```

#### <a name="apidoc.element.loopback.User.bulkUpdate"></a>[function <span class="apidocSignatureSpan">loopback.User.</span>bulkUpdate (updates, options, callback)](#apidoc.element.loopback.User.bulkUpdate)
- description and source-code
```javascript
bulkUpdate = function (updates, options, callback) {
  var tasks = [];
  var Model = this;
  var Change = this.getChangeModel();
  var conflicts = [];

  var lastArg = arguments[arguments.length - 1];

  if (typeof lastArg === 'function' && arguments.length > 1) {
    callback = lastArg;
  }

  if (typeof options === 'function') {
    options = {};
  }

  options = options || {};

  buildLookupOfAffectedModelData(Model, updates, function(err, currentMap) {
    if (err) return callback(err);

    updates.forEach(function(update) {
      var id = update.change.modelId;
      var current = currentMap[id];
      switch (update.type) {
        case Change.UPDATE:
          tasks.push(function(cb) {
            applyUpdate(Model, id, current, update.data, update.change, conflicts, options, cb);
          });
          break;

        case Change.CREATE:
          tasks.push(function(cb) {
            applyCreate(Model, id, current, update.data, update.change, conflicts, options, cb);
          });
          break;
        case Change.DELETE:
          tasks.push(function(cb) {
            applyDelete(Model, id, current, update.change, conflicts, options, cb);
          });
          break;
      }
    });

    async.parallel(tasks, function(err) {
      if (err) return callback(err);
      if (conflicts.length) {
        err = new Error(g.f('Conflict'));
        err.statusCode = 409;
        err.details = {conflicts: conflicts};
        return callback(err);
      }
      callback();
    });
  });
}
```
- example usage
```shell
...
    function bulkUpdate(_updates, cb) {
debug('\tstarting bulk update');
updates = _updates;
utils.uploadInChunks(
  updates,
  replicationChunkSize,
  function(smallArray, chunkCallback) {
    return targetModel.bulkUpdate(smallArray, options, function(err) {
      // bulk update is a special case where we want to process all chunks and aggregate all errors
      chunkCallback(null, err);
    });
  },
  function(notUsed, err) {
    var conflicts = err && err.details && err.details.conflicts;
    if (conflicts && err.statusCode == 409) {
...
```

#### <a name="apidoc.element.loopback.User.changePassword"></a>[function <span class="apidocSignatureSpan">loopback.User.</span>changePassword (userId, oldPassword, newPassword, options, cb)](#apidoc.element.loopback.User.changePassword)
- description and source-code
```javascript
changePassword = function (userId, oldPassword, newPassword, options, cb) {
  if (cb === undefined && typeof options === 'function') {
    cb = options;
    options = undefined;
  }
  cb = cb || utils.createPromiseCallback();

  // Make sure to use the constructor of the (sub)class
  // where the method is invoked from ('this' instead of 'User')
  this.findById(userId, options, (err, inst) => {
    if (err) return cb(err);

    if (!inst) {
      const err = new Error('User ${userId} not found');
      Object.assign(err, {
        code: 'USER_NOT_FOUND',
        statusCode: 401,
      });
      return cb(err);
    }

    inst.changePassword(oldPassword, newPassword, options, cb);
  });

  return cb.promise;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.User.changes"></a>[function <span class="apidocSignatureSpan">loopback.User.</span>changes (since, filter, callback)](#apidoc.element.loopback.User.changes)
- description and source-code
```javascript
changes = function (since, filter, callback) {
  if (typeof since === 'function') {
    filter = {};
    callback = since;
    since = -1;
  }
  if (typeof filter === 'function') {
    callback = filter;
    since = -1;
    filter = {};
  }

  var idName = this.dataSource.idName(this.modelName);
  var Change = this.getChangeModel();
  var model = this;
  const changeFilter = this.createChangeFilter(since, filter);

  filter = filter || {};
  filter.fields = {};
  filter.where = filter.where || {};
  filter.fields[idName] = true;

  // TODO(ritch) this whole thing could be optimized a bit more
  Change.find(changeFilter, function(err, changes) {
    if (err) return callback(err);
    if (!Array.isArray(changes) || changes.length === 0) return callback(null, []);
    var ids = changes.map(function(change) {
      return change.getModelId();
    });
    filter.where[idName] = {inq: ids};
    model.find(filter, function(err, models) {
      if (err) return callback(err);
      var modelIds = models.map(function(m) {
        return m[idName].toString();
      });
      callback(null, changes.filter(function(ch) {
        if (ch.type() === Change.DELETE) return true;
        return modelIds.indexOf(ch.modelId) > -1;
      }));
    });
  });
}
```
- example usage
```shell
...
    async.waterfall(tasks, done);

    function getSourceChanges(cb) {
utils.downloadInChunks(
  options.filter,
  replicationChunkSize,
  function(filter, pagingCallback) {
    sourceModel.changes(since.source, filter, pagingCallback);
  },
  debug.enabled ? log : cb);

function log(err, result) {
  if (err) return cb(err);
  debug('\tusing source changes');
  result.forEach(function(it) { debug('\t\t%j', it); });
...
```

#### <a name="apidoc.element.loopback.User.checkAccess"></a>[function <span class="apidocSignatureSpan">loopback.User.</span>checkAccess (token, modelId, sharedMethod, ctx, callback)](#apidoc.element.loopback.User.checkAccess)
- description and source-code
```javascript
checkAccess = function (token, modelId, sharedMethod, ctx, callback) {
  var ANONYMOUS = registry.getModel('AccessToken').ANONYMOUS;
  token = token || ANONYMOUS;
  var aclModel = Model._ACL();

  ctx = ctx || {};
  if (typeof ctx === 'function' && callback === undefined) {
    callback = ctx;
    ctx = {};
  }

  aclModel.checkAccessForContext({
    accessToken: token,
    model: this,
    property: sharedMethod.name,
    method: sharedMethod.name,
    sharedMethod: sharedMethod,
    modelId: modelId,
    accessType: this._getAccessTypeForMethod(sharedMethod),
    remotingContext: ctx,
  }, function(err, accessRequest) {
    if (err) return callback(err);
    callback(null, accessRequest.isAllowed());
  });
}
```
- example usage
```shell
...
var modelSettings = Model.settings || {};
var errStatusCode = modelSettings.aclErrorStatus || app.get('aclErrorStatus') || 401;
if (!req.accessToken) {
  errStatusCode = 401;
}

if (Model.checkAccess) {
  Model.checkAccess(
    req.accessToken,
    modelId,
    method,
    ctx,
    function(err, allowed) {
      if (err) {
        console.log(err);
...
```

#### <a name="apidoc.element.loopback.User.checkpoint"></a>[function <span class="apidocSignatureSpan">loopback.User.</span>checkpoint (cb)](#apidoc.element.loopback.User.checkpoint)
- description and source-code
```javascript
checkpoint = function (cb) {
  var Checkpoint = this.getChangeModel().getCheckpointModel();
  Checkpoint.bumpLastSeq(cb);
}
```
- example usage
```shell
...
      }
      cb(err);
    });
}

function checkpoints() {
  var cb = arguments[arguments.length - 1];
  sourceModel.checkpoint(function(err, source) {
    if (err) return cb(err);
    newSourceCp = source.seq;
    targetModel.checkpoint(function(err, target) {
      if (err) return cb(err);
      newTargetCp = target.seq;
      debug('\tcreated checkpoints');
      debug('\t\t%s for source model %s', newSourceCp, sourceModel.modelName);
...
```

#### <a name="apidoc.element.loopback.User.clearObservers"></a>[function <span class="apidocSignatureSpan">loopback.User.</span>clearObservers (operation)](#apidoc.element.loopback.User.clearObservers)
- description and source-code
```javascript
clearObservers = function (operation) {
  if (!(this._observers && this._observers[operation])) return;

  this._observers[operation].length = 0;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.User.confirm"></a>[function <span class="apidocSignatureSpan">loopback.User.</span>confirm (uid, token, redirect, fn)](#apidoc.element.loopback.User.confirm)
- description and source-code
```javascript
confirm = function (uid, token, redirect, fn) {
  fn = fn || utils.createPromiseCallback();
  this.findById(uid, function(err, user) {
    if (err) {
      fn(err);
    } else {
      if (user && user.verificationToken === token) {
        user.verificationToken = null;
        user.emailVerified = true;
        user.save(function(err) {
          if (err) {
            fn(err);
          } else {
            fn();
          }
        });
      } else {
        if (user) {
          err = new Error(g.f('Invalid token: %s', token));
          err.statusCode = 400;
          err.code = 'INVALID_TOKEN';
        } else {
          err = new Error(g.f('User not found: %s', uid));
          err.statusCode = 404;
          err.code = 'USER_NOT_FOUND';
        }
        fn(err);
      }
    }
  });
  return fn.promise;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.User.count"></a>[function <span class="apidocSignatureSpan">loopback.User.</span>count (where, cb)](#apidoc.element.loopback.User.count)
- description and source-code
```javascript
count = function (where, cb) {
  throwNotAttached(this.modelName, 'count');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.User.create"></a>[function <span class="apidocSignatureSpan">loopback.User.</span>create (data, callback)](#apidoc.element.loopback.User.create)
- description and source-code
```javascript
create = function (data, callback) {
  throwNotAttached(this.modelName, 'create');
}
```
- example usage
```shell
...
 } else {
   var options = {};

   if (this.get) {
     options = this.get('remoting');
   }

   return (this._remotes = RemoteObjects.create(options));
 }
};

/*!
* Remove a route by reference.
*/
...
```

#### <a name="apidoc.element.loopback.User.createChangeFilter"></a>[function <span class="apidocSignatureSpan">loopback.User.</span>createChangeFilter (since, modelFilter)](#apidoc.element.loopback.User.createChangeFilter)
- description and source-code
```javascript
createChangeFilter = function (since, modelFilter) {
  return {
    where: {
      checkpoint: {gte: since},
      modelName: this.modelName,
    },
  };
}
```
- example usage
```shell
...
  since = -1;
  filter = {};
}

var idName = this.dataSource.idName(this.modelName);
var Change = this.getChangeModel();
var model = this;
const changeFilter = this.createChangeFilter(since, filter);

filter = filter || {};
filter.fields = {};
filter.where = filter.where || {};
filter.fields[idName] = true;

// TODO(ritch) this whole thing could be optimized a bit more
...
```

#### <a name="apidoc.element.loopback.User.createChangeStream"></a>[function <span class="apidocSignatureSpan">loopback.User.</span>createChangeStream (options, cb)](#apidoc.element.loopback.User.createChangeStream)
- description and source-code
```javascript
createChangeStream = function (options, cb) {
  if (typeof options === 'function') {
    cb = options;
    options = undefined;
  }

  var idName = this.getIdName();
  var Model = this;
  var changes = new PassThrough({objectMode: true});
  var writeable = true;

  changes.destroy = function() {
    changes.removeAllListeners('error');
    changes.removeAllListeners('end');
    writeable = false;
    changes = null;
  };

  changes.on('error', function() {
    writeable = false;
  });
  changes.on('end', function() {
    writeable = false;
  });

  process.nextTick(function() {
    cb(null, changes);
  });

  Model.observe('after save', createChangeHandler('save'));
  Model.observe('after delete', createChangeHandler('delete'));

  function createChangeHandler(type) {
    return function(ctx, next) {
      // since it might have set to null via destroy
      if (!changes) {
        return next();
      }

      var where = ctx.where;
      var data = ctx.instance || ctx.data;
      var whereId = where && where[idName];

      // the data includes the id
      // or the where includes the id
      var target;

      if (data && (data[idName] || data[idName] === 0)) {
        target = data[idName];
      } else if (where && (where[idName] || where[idName] === 0)) {
        target = where[idName];
      }

      var hasTarget = target === 0 || !!target;

      var change = {
        target: target,
        where: where,
        data: data,
      };

      switch (type) {
        case 'save':
          if (ctx.isNewInstance === undefined) {
            change.type = hasTarget ? 'update' : 'create';
          } else {
            change.type = ctx.isNewInstance ? 'create' : 'update';
          }

          break;
        case 'delete':
          change.type = 'remove';
          break;
      }

      // TODO(ritch) this is ugly... maybe a ReadableStream would be better
      if (writeable) {
        changes.write(change);
      }

      next();
    };
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.User.createOptionsFromRemotingContext"></a>[function <span class="apidocSignatureSpan">loopback.User.</span>createOptionsFromRemotingContext (ctx)](#apidoc.element.loopback.User.createOptionsFromRemotingContext)
- description and source-code
```javascript
createOptionsFromRemotingContext = function (ctx) {
  return {
    accessToken: ctx.req.accessToken,
  };
}
```
- example usage
```shell
...
  var EMPTY_OPTIONS = {};
  var ModelCtor = ctx.method && ctx.method.ctor;
  if (!ModelCtor)
    return EMPTY_OPTIONS;
  if (typeof ModelCtor.createOptionsFromRemotingContext !== 'function')
    return EMPTY_OPTIONS;
  debug('createOptionsFromRemotingContext for %s', ctx.method.stringName);
  return ModelCtor.createOptionsFromRemotingContext(ctx);
}

/**
 * Disable remote invocation for the method with the given name.
 *
 * @param {String} name The name of the method.
 * @param {Boolean} isStatic Is the method static (eg. 'MyModel.myMethod')? Pass
...
```

#### <a name="apidoc.element.loopback.User.createUpdates"></a>[function <span class="apidocSignatureSpan">loopback.User.</span>createUpdates (deltas, cb)](#apidoc.element.loopback.User.createUpdates)
- description and source-code
```javascript
createUpdates = function (deltas, cb) {
  var Change = this.getChangeModel();
  var updates = [];
  var Model = this;
  var tasks = [];

  deltas.forEach(function(change) {
    change = new Change(change);
    var type = change.type();
    var update = {type: type, change: change};
    switch (type) {
      case Change.CREATE:
      case Change.UPDATE:
        tasks.push(function(cb) {
          Model.findById(change.modelId, function(err, inst) {
            if (err) return cb(err);
            if (!inst) {
              return cb &&
                cb(new Error(g.f('Missing data for change: %s', change.modelId)));
            }
            if (inst.toObject) {
              update.data = inst.toObject();
            } else {
              update.data = inst;
            }
            updates.push(update);
            cb();
          });
        });
        break;
      case Change.DELETE:
        updates.push(update);
        break;
    }
  });

  async.parallel(tasks, function(err) {
    if (err) return cb(err);
    cb(null, updates);
  });
}
```
- example usage
```shell
...

  if (diff && diff.deltas && diff.deltas.length) {
    debug('\tbuilding a list of updates');
    utils.uploadInChunks(
      diff.deltas,
      replicationChunkSize,
      function(smallArray, chunkCallback) {
        return sourceModel.createUpdates(smallArray, chunkCallback);
      },
      cb);
  } else {
    // nothing to replicate
    done();
  }
}
...
```

#### <a name="apidoc.element.loopback.User.currentCheckpoint"></a>[function <span class="apidocSignatureSpan">loopback.User.</span>currentCheckpoint (cb)](#apidoc.element.loopback.User.currentCheckpoint)
- description and source-code
```javascript
currentCheckpoint = function (cb) {
  var Checkpoint = this.getChangeModel().getCheckpointModel();
  Checkpoint.current(cb);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.User.defineProperty"></a>[function <span class="apidocSignatureSpan">loopback.User.</span>defineProperty (prop, params)](#apidoc.element.loopback.User.defineProperty)
- description and source-code
```javascript
defineProperty = function (prop, params) {
  if (this.dataSource) {
    this.dataSource.defineProperty(this.modelName, prop, params);
  } else {
    this.modelBuilder.defineProperty(this.modelName, prop, params);
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.User.deleteAll"></a>[function <span class="apidocSignatureSpan">loopback.User.</span>deleteAll (where, cb)](#apidoc.element.loopback.User.deleteAll)
- description and source-code
```javascript
function destroyAll(where, cb) {
  throwNotAttached(this.modelName, 'destroyAll');
}
```
- example usage
```shell
...
  Model.modelName, id);
debug('\tExpected revision: %s', change.rev);
debug('\tActual revision:   %s', rev);
conflicts.push(change);
return Change.rectifyModelChanges(Model.modelName, [id], cb);
    }

    Model.deleteAll(current.toObject(), options, function(err, result) {
if (err) return cb(err);

var count = result && result.count;
switch (count) {
  case 1:
    // The happy path, exactly one record was updated
    return cb();
...
```

#### <a name="apidoc.element.loopback.User.deleteById"></a>[function <span class="apidocSignatureSpan">loopback.User.</span>deleteById (id, cb)](#apidoc.element.loopback.User.deleteById)
- description and source-code
```javascript
function deleteById(id, cb) {
  throwNotAttached(this.modelName, 'deleteById');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.User.destroyAll"></a>[function <span class="apidocSignatureSpan">loopback.User.</span>destroyAll (where, cb)](#apidoc.element.loopback.User.destroyAll)
- description and source-code
```javascript
function destroyAll(where, cb) {
  throwNotAttached(this.modelName, 'destroyAll');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.User.destroyById"></a>[function <span class="apidocSignatureSpan">loopback.User.</span>destroyById (id, cb)](#apidoc.element.loopback.User.destroyById)
- description and source-code
```javascript
function deleteById(id, cb) {
  throwNotAttached(this.modelName, 'deleteById');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.User.diff"></a>[function <span class="apidocSignatureSpan">loopback.User.</span>diff (since, remoteChanges, callback)](#apidoc.element.loopback.User.diff)
- description and source-code
```javascript
diff = function (since, remoteChanges, callback) {
  var Change = this.getChangeModel();
  Change.diff(this.modelName, since, remoteChanges, callback);
}
```
- example usage
```shell
...
    },
  });
};

/**
 * Get a set of deltas and conflicts since the given checkpoint.
 *
 * See [Change.diff()](#change-diff) for details.
 *
 * @param  {Number}  since  Find deltas since this checkpoint.
 * @param  {Array}  remoteChanges  An array of change objects.
 * @callback {Function} callback Callback function called with '(err, result)' arguments.  Required.
 * @param {Error} err Error object; see [Error object](http://loopback.io/doc/en/lb2/Error-object.html).
 * @param {Object} result Object with 'deltas' and 'conflicts' properties; see [Change.diff()](#change-diff) for details.
 */
...
```

#### <a name="apidoc.element.loopback.User.disableRemoteMethod"></a>[function <span class="apidocSignatureSpan">loopback.User.</span>disableRemoteMethod (name, isStatic)](#apidoc.element.loopback.User.disableRemoteMethod)
- description and source-code
```javascript
disableRemoteMethod = function (name, isStatic) {
  deprecated('Model.disableRemoteMethod is deprecated. ' +
    'Use Model.disableRemoteMethodByName instead.');
  var key = this.sharedClass.getKeyFromMethodNameAndTarget(name, isStatic);
  this.sharedClass.disableMethodByName(key);
  this.emit('remoteMethodDisabled', this.sharedClass, key);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.User.disableRemoteMethodByName"></a>[function <span class="apidocSignatureSpan">loopback.User.</span>disableRemoteMethodByName (name)](#apidoc.element.loopback.User.disableRemoteMethodByName)
- description and source-code
```javascript
disableRemoteMethodByName = function (name) {
  this.sharedClass.disableMethodByName(name);
  this.emit('remoteMethodDisabled', this.sharedClass, name);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.User.email"></a>[function <span class="apidocSignatureSpan">loopback.User.</span>email (data, options)](#apidoc.element.loopback.User.email)
- description and source-code
```javascript
function ModelConstructor(data, options) {
  if (!(this instanceof ModelConstructor)) {
    return new ModelConstructor(data, options);
  }
  if (ModelClass.settings.unresolved) {
    throw new Error(g.f('Model %s is not defined.', ModelClass.modelName));
  }
  ModelBaseClass.apply(this, arguments);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.User.emit"></a>[function <span class="apidocSignatureSpan">loopback.User.</span>emit ()](#apidoc.element.loopback.User.emit)
- description and source-code
```javascript
emit = function () { [native code] }
```
- example usage
```shell
...
    return new Model(data);
  });
  this.remotes().addClass(Model.sharedClass);
  if (Model.settings.trackChanges && Model.Change) {
    this.remotes().addClass(Model.Change.sharedClass);
  }
  clearHandlerCache(this);
  this.emit('modelRemoted', Model.sharedClass);
}

var self = this;
Model.on('remoteMethodDisabled', function(model, methodName) {
  self.emit('remoteMethodDisabled', model, methodName);
});
Model.on('remoteMethodAdded', function(model) {
...
```

#### <a name="apidoc.element.loopback.User.enableChangeTracking"></a>[function <span class="apidocSignatureSpan">loopback.User.</span>enableChangeTracking ()](#apidoc.element.loopback.User.enableChangeTracking)
- description and source-code
```javascript
enableChangeTracking = function () {
  var Model = this;
  var Change = this.Change || this._defineChangeModel();
  var cleanupInterval = Model.settings.changeCleanupInterval || 30000;

  assert(this.dataSource, 'Cannot enableChangeTracking(): ' + this.modelName +
    ' is not attached to a dataSource');

  var idName = this.getIdName();
  var idProp = this.definition.properties[idName];
  var idType = idProp && idProp.type;
  var idDefn = idProp && idProp.defaultFn;
  if (idType !== String || !(idDefn === 'uuid' || idDefn === 'guid')) {
    deprecated('The model ' + this.modelName + ' is tracking changes, ' +
      'which requires a string id with GUID/UUID default value.');
  }

  Model.observe('after save', rectifyOnSave);

  Model.observe('after delete', rectifyOnDelete);

  // Only run if the run time is server
  // Can switch off cleanup by setting the interval to -1
  if (runtime.isServer && cleanupInterval > 0) {
    // initial cleanup
    cleanup();

    // cleanup
    setInterval(cleanup, cleanupInterval);
  }

  function cleanup() {
    Model.rectifyAllChanges(function(err) {
      if (err) {
        Model.handleChangeError(err, 'cleanup');
      }
    });
  }
}
```
- example usage
```shell
...

  var PersistedModel = this;

  // enable change tracking (usually for replication)
  if (this.settings.trackChanges) {
    PersistedModel._defineChangeModel();
    PersistedModel.once('dataSourceAttached', function() {
      PersistedModel.enableChangeTracking();
    });
  } else if (this.settings.enableRemoteReplication) {
    PersistedModel._defineChangeModel();
  }

  PersistedModel.setupRemoting();
};
...
```

#### <a name="apidoc.element.loopback.User.eventNames"></a>[function <span class="apidocSignatureSpan">loopback.User.</span>eventNames ()](#apidoc.element.loopback.User.eventNames)
- description and source-code
```javascript
eventNames = function () { [native code] }
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.User.exists"></a>[function <span class="apidocSignatureSpan">loopback.User.</span>exists (id, cb)](#apidoc.element.loopback.User.exists)
- description and source-code
```javascript
function exists(id, cb) {
  throwNotAttached(this.modelName, 'exists');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.User.extend"></a>[function <span class="apidocSignatureSpan">loopback.User.</span>extend (className, subclassProperties, subclassSettings)](#apidoc.element.loopback.User.extend)
- description and source-code
```javascript
extend = function (className, subclassProperties, subclassSettings) {
  var properties = ModelClass.definition.properties;
  var settings = ModelClass.definition.settings;

  subclassProperties = subclassProperties || {};
  subclassSettings = subclassSettings || {};

  // Check if subclass redefines the ids
  var idFound = false;
  for (var k in subclassProperties) {
    if (subclassProperties[k] && subclassProperties[k].id) {
      idFound = true;
      break;
    }
  }

  // Merging the properties
  var keys = Object.keys(properties);
  for (var i = 0, n = keys.length; i < n; i++) {
    var key = keys[i];

    if (idFound && properties[key].id) {
      // don't inherit id properties
      continue;
    }
    if (subclassProperties[key] === undefined) {
      var baseProp = properties[key];
      var basePropCopy = baseProp;
      if (baseProp && typeof baseProp === 'object') {
        // Deep clone the base prop
        basePropCopy = mergeSettings(null, baseProp);
      }
      subclassProperties[key] = basePropCopy;
    }
  }

  // Merge the settings
  var originalSubclassSettings = subclassSettings;
  subclassSettings = mergeSettings(settings, subclassSettings);

  // Ensure 'base' is not inherited. Note we don't have to delete 'super'
  // as that is removed from settings by modelBuilder.define and thus
  // it is never inherited
  if (!originalSubclassSettings.base) {
    subclassSettings.base = ModelClass;
  }

  // Define the subclass
  var subClass = modelBuilder.define(className, subclassProperties, subclassSettings, ModelClass);

  // Calling the setup function
  if (typeof subClass.setup === 'function') {
    subClass.setup.call(subClass);
  }

  return subClass;
}
```
- example usage
```shell
...
* The base class for **all models**.
*
* **Inheriting from 'Model'**
*
* '''js
* var properties = {...};
* var options = {...};
* var MyModel = loopback.Model.extend('MyModel', properties, options);
* '''
*
* **Options**
*
*  - 'trackChanges' - If true, changes to the model will be tracked. **Required
* for replication.**
*
...
```

#### <a name="apidoc.element.loopback.User.find"></a>[function <span class="apidocSignatureSpan">loopback.User.</span>find (filter, cb)](#apidoc.element.loopback.User.find)
- description and source-code
```javascript
function find(filter, cb) {
  throwNotAttached(this.modelName, 'find');
}
```
- example usage
```shell
...

filter = filter || {};
filter.fields = {};
filter.where = filter.where || {};
filter.fields[idName] = true;

// TODO(ritch) this whole thing could be optimized a bit more
Change.find(changeFilter, function(err, changes) {
  if (err) return callback(err);
  if (!Array.isArray(changes) || changes.length === 0) return callback(null, []);
  var ids = changes.map(function(change) {
    return change.getModelId();
  });
  filter.where[idName] = {inq: ids};
  model.find(filter, function(err, models) {
...
```

#### <a name="apidoc.element.loopback.User.findById"></a>[function <span class="apidocSignatureSpan">loopback.User.</span>findById (id, filter, cb)](#apidoc.element.loopback.User.findById)
- description and source-code
```javascript
function findById(id, filter, cb) {
  throwNotAttached(this.modelName, 'findById');
}
```
- example usage
```shell
...
  var model = new ModelCtor(data);
  model.id = id;
  fn(null, model);
} else if (data) {
  fn(null, new ModelCtor(data));
} else if (id) {
  var filter = {};
  ModelCtor.findById(id, filter, options, function(err, model) {
    if (err) {
      fn(err);
    } else if (model) {
      fn(null, model);
    } else {
      err = new Error(g.f('could not find a model with apidoc.element.loopback.User.findById %s', id));
      err.statusCode = 404;
...
```

#### <a name="apidoc.element.loopback.User.findLastChange"></a>[function <span class="apidocSignatureSpan">loopback.User.</span>findLastChange (id, cb)](#apidoc.element.loopback.User.findLastChange)
- description and source-code
```javascript
findLastChange = function (id, cb) {
  var Change = this.getChangeModel();
  Change.findOne({where: {modelId: id}}, cb);
}
```
- example usage
```shell
...
PersistedModel.findLastChange = function(id, cb) {
  var Change = this.getChangeModel();
  Change.findOne({where: {modelId: id}}, cb);
};

PersistedModel.updateLastChange = function(id, data, cb) {
  var self = this;
  this.findLastChange(id, function(err, inst) {
    if (err) return cb(err);
    if (!inst) {
      err = new Error(g.f('No change record found for %s with id %s',
        self.modelName, id));
      err.statusCode = 404;
      return cb(err);
    }
...
```

#### <a name="apidoc.element.loopback.User.findOne"></a>[function <span class="apidocSignatureSpan">loopback.User.</span>findOne (filter, cb)](#apidoc.element.loopback.User.findOne)
- description and source-code
```javascript
function findOne(filter, cb) {
  throwNotAttached(this.modelName, 'findOne');
}
```
- example usage
```shell
...
PersistedModel.rectifyChange = function(id, callback) {
  var Change = this.getChangeModel();
  Change.rectifyModelChanges(this.modelName, [id], callback);
};

PersistedModel.findLastChange = function(id, cb) {
  var Change = this.getChangeModel();
  Change.findOne({where: {modelId: id}}, cb);
};

PersistedModel.updateLastChange = function(id, data, cb) {
  var self = this;
  this.findLastChange(id, function(err, inst) {
    if (err) return cb(err);
    if (!inst) {
...
```

#### <a name="apidoc.element.loopback.User.findOrCreate"></a>[function <span class="apidocSignatureSpan">loopback.User.</span>findOrCreate (query, data, callback)](#apidoc.element.loopback.User.findOrCreate)
- description and source-code
```javascript
function findOrCreate(query, data, callback) {
  throwNotAttached(this.modelName, 'findOrCreate');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.User.forEachProperty"></a>[function <span class="apidocSignatureSpan">loopback.User.</span>forEachProperty (cb)](#apidoc.element.loopback.User.forEachProperty)
- description and source-code
```javascript
forEachProperty = function (cb) {
  var props = ModelClass.definition.properties;
  var keys = Object.keys(props);
  for (var i = 0, n = keys.length; i < n; i++) {
    cb(keys[i], props[keys[i]]);
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.User.generateVerificationToken"></a>[function <span class="apidocSignatureSpan">loopback.User.</span>generateVerificationToken (user, cb)](#apidoc.element.loopback.User.generateVerificationToken)
- description and source-code
```javascript
generateVerificationToken = function (user, cb) {
  crypto.randomBytes(64, function(err, buf) {
    cb(err, buf && buf.toString('hex'));
  });
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.User.getApp"></a>[function <span class="apidocSignatureSpan">loopback.User.</span>getApp (callback)](#apidoc.element.loopback.User.getApp)
- description and source-code
```javascript
getApp = function (callback) {
  var self = this;
  self._runWhenAttachedToApp(function(app) {
    assert(self.app);
    assert.equal(app, self.app);
    callback(null, app);
  });
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.User.getChangeModel"></a>[function <span class="apidocSignatureSpan">loopback.User.</span>getChangeModel ()](#apidoc.element.loopback.User.getChangeModel)
- description and source-code
```javascript
getChangeModel = function () {
  var changeModel = this.Change;
  var isSetup = changeModel && changeModel.dataSource;

  assert(isSetup, 'Cannot get a setup Change model for ' + this.modelName);

  return changeModel;
}
```
- example usage
```shell
...
 * @param  {Array}  remoteChanges  An array of change objects.
 * @callback {Function} callback Callback function called with '(err, result)' arguments.  Required.
 * @param {Error} err Error object; see [Error object](http://loopback.io/doc/en/lb2/Error-object.html).
 * @param {Object} result Object with 'deltas' and 'conflicts' properties; see [Change.diff()](#change-diff) for details.
 */

PersistedModel.diff = function(since, remoteChanges, callback) {
  var Change = this.getChangeModel();
  Change.diff(this.modelName, since, remoteChanges, callback);
};

/**
 * Get the changes to a model since the specified checkpoint. Provide a filter object
 * to reduce the number of results returned.
 * @param  {Number}   since    Return only changes since this checkpoint.
...
```

#### <a name="apidoc.element.loopback.User.getDataSource"></a>[function <span class="apidocSignatureSpan">loopback.User.</span>getDataSource ()](#apidoc.element.loopback.User.getDataSource)
- description and source-code
```javascript
getDataSource = function () {
  return this.dataSource;
}
```
- example usage
```shell
...
 * connector that defines it.  Otherwise, uses the default lookup.
 * Override this method to handle complex IDs.
 *
 * @param {*} val The 'id' value. Will be converted to the type that the 'id' property specifies.
 */

PersistedModel.prototype.setId = function(val) {
  var ds = this.getDataSource();
  this[this.getIdName()] = val;
};

/**
 * Get the 'id' value for the 'PersistedModel'.
 *
 * @returns {*} The 'id' value
...
```

#### <a name="apidoc.element.loopback.User.getIdName"></a>[function <span class="apidocSignatureSpan">loopback.User.</span>getIdName ()](#apidoc.element.loopback.User.getIdName)
- description and source-code
```javascript
getIdName = function () {
  var Model = this;
  var ds = Model.getDataSource();

  if (ds.idName) {
    return ds.idName(Model.modelName);
  } else {
    return 'id';
  }
}
```
- example usage
```shell
...
 * Override this method to handle complex IDs.
 *
 * @param {*} val The 'id' value. Will be converted to the type that the 'id' property specifies.
 */

PersistedModel.prototype.setId = function(val) {
  var ds = this.getDataSource();
  this[this.getIdName()] = val;
};

/**
 * Get the 'id' value for the 'PersistedModel'.
 *
 * @returns {*} The 'id' value
 */
...
```

#### <a name="apidoc.element.loopback.User.getMaxListeners"></a>[function <span class="apidocSignatureSpan">loopback.User.</span>getMaxListeners ()](#apidoc.element.loopback.User.getMaxListeners)
- description and source-code
```javascript
getMaxListeners = function () { [native code] }
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.User.getPropertyType"></a>[function <span class="apidocSignatureSpan">loopback.User.</span>getPropertyType (propName)](#apidoc.element.loopback.User.getPropertyType)
- description and source-code
```javascript
getPropertyType = function (propName) {
  var prop = this.definition.properties[propName];
  if (!prop) {
    // The property is not part of the definition
    return null;
  }
  if (!prop.type) {
    throw new Error(g.f('Type not defined for property %s.%s', this.modelName, propName));
    // return null;
  }
  return prop.type.name;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.User.getSourceId"></a>[function <span class="apidocSignatureSpan">loopback.User.</span>getSourceId (cb)](#apidoc.element.loopback.User.getSourceId)
- description and source-code
```javascript
getSourceId = function (cb) {
  var dataSource = this.dataSource;
  if (!dataSource) {
    this.once('dataSourceAttached', this.getSourceId.bind(this, cb));
  }
  assert(
    dataSource.connector.name,
    'Model.getSourceId: cannot get id without dataSource.connector.name'
  );
  var id = [dataSource.connector.name, this.modelName].join('-');
  cb(null, id);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.User.handleChangeError"></a>[function <span class="apidocSignatureSpan">loopback.User.</span>handleChangeError (err, operationName)](#apidoc.element.loopback.User.handleChangeError)
- description and source-code
```javascript
handleChangeError = function (err, operationName) {
  if (!err) return;
  this.emit('error', err, operationName);
}
```
- example usage
```shell
...
    // cleanup
    setInterval(cleanup, cleanupInterval);
  }

  function cleanup() {
    Model.rectifyAllChanges(function(err) {
      if (err) {
        Model.handleChangeError(err, 'cleanup');
      }
    });
  }
};

function rectifyOnSave(ctx, next) {
  var instance = ctx.instance || ctx.currentInstance;
...
```

#### <a name="apidoc.element.loopback.User.hasManyRemoting"></a>[function <span class="apidocSignatureSpan">loopback.User.</span>hasManyRemoting (relationName, relation, define)](#apidoc.element.loopback.User.hasManyRemoting)
- description and source-code
```javascript
hasManyRemoting = function (relationName, relation, define) {
  var pathName = (relation.options.http && relation.options.http.path) || relationName;
  var toModelName = relation.modelTo.modelName;

  var findByIdFunc = this.prototype['__findById__' + relationName];
  define('__findById__' + relationName, {
    isStatic: false,
    http: {verb: 'get', path: '/' + pathName + '/:fk'},
    accepts: [
      {
        arg: 'fk', type: 'any',
        description: format('Foreign key for %s', relationName),
        required: true,
        http: {source: 'path'},
      },
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Find a related item by id for %s.', relationName),
    accessType: 'READ',
    returns: {arg: 'result', type: toModelName, root: true},
    rest: {after: convertNullToNotFoundError.bind(null, toModelName)},
  }, findByIdFunc);

  var destroyByIdFunc = this.prototype['__destroyById__' + relationName];
  define('__destroyById__' + relationName, {
    isStatic: false,
    http: {verb: 'delete', path: '/' + pathName + '/:fk'},
    accepts: [
      {
        arg: 'fk', type: 'any',
        description: format('Foreign key for %s', relationName),
        required: true,
        http: {source: 'path'},
      },
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Delete a related item by id for %s.', relationName),
    accessType: 'WRITE',
    returns: [],
  }, destroyByIdFunc);

  var updateByIdFunc = this.prototype['__updateById__' + relationName];
  define('__updateById__' + relationName, {
    isStatic: false,
    http: {verb: 'put', path: '/' + pathName + '/:fk'},
    accepts: [
      {arg: 'fk', type: 'any',
        description: format('Foreign key for %s', relationName),
        required: true,
        http: {source: 'path'}},
      {arg: 'data', type: 'object', model: toModelName, http: {source: 'body'}},
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Update a related item by id for %s.', relationName),
    accessType: 'WRITE',
    returns: {arg: 'result', type: toModelName, root: true},
  }, updateByIdFunc);

  if (relation.modelThrough || relation.type === 'referencesMany') {
    var modelThrough = relation.modelThrough || relation.modelTo;

    var accepts = [];
    if (relation.type === 'hasMany' && relation.modelThrough) {
      // Restrict: only hasManyThrough relation can have additional properties
      accepts.push({
        arg: 'data', type: 'object', model: modelThrough.modelName,
        http: {source: 'body'},
      });
    }

    var addFunc = this.prototype['__link__' + relationName];
    define('__link__' + relationName, {
      isStatic: false,
      http: {verb: 'put', path: '/' + pathName + '/rel/:fk'},
      accepts: [{arg: 'fk', type: 'any',
        description: format('Foreign key for %s', relationName),
        required: true,
        http: {source: 'path'}},
      ].concat(accepts).concat([
        {arg: 'options', type: 'object', http: 'optionsFromRequest'},
      ]),
      description: format('Add a related item by id for %s.', relationName),
      accessType: 'WRITE',
      returns: {arg: relationName, type: modelThrough.modelName, root: true},
    }, addFunc);

    var removeFunc = this.prototype['__unlink__' + relationName];
    define('__unlink__' + relationName, {
      isStatic: false,
      http: {verb: 'delete', path: '/' + pathName + '/rel/:fk'},
      accepts: [
        {
          arg: 'fk', type: 'any',
          description: format('Foreign key for %s', relationName),
          required: true,
          http: {source: 'path'},
        },
        {arg: 'options', type: 'object', http: 'optionsFromRequest'},
      ],
      description: format('Remove the %s relation to an item by id.', relationName),
      accessType: 'WRITE',
      returns: [],
    }, removeFunc);

    // FIXME: [rfeng] How to map a function with callback(err, true|false) to HEAD?
    // true --> 200 and false --> 404?
    var existsFunc = this.prototype['__exists__' + relatio ...
```
- example usage
```shell
...
    relation.type === 'embedsOne'
  ) {
    ModelCtor.hasOneRemoting(relationName, relation, define);
  } else if (
    relation.type === 'hasMany' ||
    relation.type === 'embedsMany' ||
    relation.type === 'referencesMany') {
    ModelCtor.hasManyRemoting(relationName, relation, define);
  }
}

// handle scopes
var scopes = ModelCtor.scopes || {};
for (var scopeName in scopes) {
  ModelCtor.scopeRemoting(scopeName, scopes[scopeName], define);
...
```

#### <a name="apidoc.element.loopback.User.hasOneRemoting"></a>[function <span class="apidocSignatureSpan">loopback.User.</span>hasOneRemoting (relationName, relation, define)](#apidoc.element.loopback.User.hasOneRemoting)
- description and source-code
```javascript
hasOneRemoting = function (relationName, relation, define) {
  var pathName = (relation.options.http && relation.options.http.path) || relationName;
  var toModelName = relation.modelTo.modelName;

  define('__get__' + relationName, {
    isStatic: false,
    http: {verb: 'get', path: '/' + pathName},
    accepts: [
      {arg: 'refresh', type: 'boolean', http: {source: 'query'}},
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Fetches hasOne relation %s.', relationName),
    accessType: 'READ',
    returns: {arg: relationName, type: relation.modelTo.modelName, root: true},
    rest: {after: convertNullToNotFoundError.bind(null, toModelName)},
  });

  define('__create__' + relationName, {
    isStatic: false,
    http: {verb: 'post', path: '/' + pathName},
    accepts: [
      {
        arg: 'data', type: 'object', model: toModelName,
        http: {source: 'body'},
      },
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Creates a new instance in %s of this model.', relationName),
    accessType: 'WRITE',
    returns: {arg: 'data', type: toModelName, root: true},
  });

  define('__update__' + relationName, {
    isStatic: false,
    http: {verb: 'put', path: '/' + pathName},
    accepts: [
      {
        arg: 'data', type: 'object', model: toModelName,
        http: {source: 'body'},
      },
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Update %s of this model.', relationName),
    accessType: 'WRITE',
    returns: {arg: 'data', type: toModelName, root: true},
  });

  define('__destroy__' + relationName, {
    isStatic: false,
    http: {verb: 'delete', path: '/' + pathName},
    accepts: [
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Deletes %s of this model.', relationName),
    accessType: 'WRITE',
  });
}
```
- example usage
```shell
...
  var relation = relations[relationName];
  if (relation.type === 'belongsTo') {
    ModelCtor.belongsToRemoting(relationName, relation, define);
  } else if (
    relation.type === 'hasOne' ||
    relation.type === 'embedsOne'
  ) {
    ModelCtor.hasOneRemoting(relationName, relation, define);
  } else if (
    relation.type === 'hasMany' ||
    relation.type === 'embedsMany' ||
    relation.type === 'referencesMany') {
    ModelCtor.hasManyRemoting(relationName, relation, define);
  }
}
...
```

#### <a name="apidoc.element.loopback.User.hashPassword"></a>[function <span class="apidocSignatureSpan">loopback.User.</span>hashPassword (plain)](#apidoc.element.loopback.User.hashPassword)
- description and source-code
```javascript
hashPassword = function (plain) {
  this.validatePassword(plain);
  var salt = bcrypt.genSaltSync(this.settings.saltWorkFactor || SALT_WORK_FACTOR);
  return bcrypt.hashSync(plain, salt);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.User.isHiddenProperty"></a>[function <span class="apidocSignatureSpan">loopback.User.</span>isHiddenProperty (propertyName)](#apidoc.element.loopback.User.isHiddenProperty)
- description and source-code
```javascript
isHiddenProperty = function (propertyName) {
  var Model = this;
  var settings = Model.definition && Model.definition.settings;
  var hiddenProperties = settings && (settings.hiddenProperties || settings.hidden);
  if (Array.isArray(hiddenProperties)) {
    // Cache the hidden properties as an object for quick lookup
    settings.hiddenProperties = {};
    for (var i = 0; i < hiddenProperties.length; i++) {
      settings.hiddenProperties[hiddenProperties[i]] = true;
    }
    hiddenProperties = settings.hiddenProperties;
  }
  if (hiddenProperties) {
    return hiddenProperties[propertyName];
  } else {
    return false;
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.User.isProtectedProperty"></a>[function <span class="apidocSignatureSpan">loopback.User.</span>isProtectedProperty (propertyName)](#apidoc.element.loopback.User.isProtectedProperty)
- description and source-code
```javascript
isProtectedProperty = function (propertyName) {
  var Model = this;
  var settings = Model.definition && Model.definition.settings;
  var protectedProperties = settings && (settings.protectedProperties || settings.protected);
  if (Array.isArray(protectedProperties)) {
    // Cache the protected properties as an object for quick lookup
    settings.protectedProperties = {};
    for (var i = 0; i < protectedProperties.length; i++) {
      settings.protectedProperties[protectedProperties[i]] = true;
    }
    protectedProperties = settings.protectedProperties;
  }
  if (protectedProperties) {
    return protectedProperties[propertyName];
  } else {
    return false;
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.User.listenerCount"></a>[function <span class="apidocSignatureSpan">loopback.User.</span>listenerCount ()](#apidoc.element.loopback.User.listenerCount)
- description and source-code
```javascript
listenerCount = function () { [native code] }
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.User.listeners"></a>[function <span class="apidocSignatureSpan">loopback.User.</span>listeners ()](#apidoc.element.loopback.User.listeners)
- description and source-code
```javascript
listeners = function () { [native code] }
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.User.login"></a>[function <span class="apidocSignatureSpan">loopback.User.</span>login (credentials, include, fn)](#apidoc.element.loopback.User.login)
- description and source-code
```javascript
login = function (credentials, include, fn) {
  var self = this;
  if (typeof include === 'function') {
    fn = include;
    include = undefined;
  }

  fn = fn || utils.createPromiseCallback();

  include = (include || '');
  if (Array.isArray(include)) {
    include = include.map(function(val) {
      return val.toLowerCase();
    });
  } else {
    include = include.toLowerCase();
  }

  var realmDelimiter;
  // Check if realm is required
  var realmRequired = !!(self.settings.realmRequired ||
    self.settings.realmDelimiter);
  if (realmRequired) {
    realmDelimiter = self.settings.realmDelimiter;
  }
  var query = self.normalizeCredentials(credentials, realmRequired,
    realmDelimiter);

  if (realmRequired && !query.realm) {
    var err1 = new Error(g.f('{{realm}} is required'));
    err1.statusCode = 400;
    err1.code = 'REALM_REQUIRED';
    fn(err1);
    return fn.promise;
  }
  if (!query.email && !query.username) {
    var err2 = new Error(g.f('{{username}} or {{email}} is required'));
    err2.statusCode = 400;
    err2.code = 'USERNAME_EMAIL_REQUIRED';
    fn(err2);
    return fn.promise;
  }

  self.findOne({where: query}, function(err, user) {
    var defaultError = new Error(g.f('login failed'));
    defaultError.statusCode = 401;
    defaultError.code = 'LOGIN_FAILED';

    function tokenHandler(err, token) {
      if (err) return fn(err);
      if (Array.isArray(include) ? include.indexOf('user') !== -1 : include === 'user') {
        // NOTE(bajtos) We can't set token.user here:
        //  1. token.user already exists, it's a function injected by
        //     "AccessToken belongsTo User" relation
        //  2. ModelBaseClass.toJSON() ignores own properties, thus
        //     the value won't be included in the HTTP response
        // See also loopback#161 and loopback#162
        token.__data.user = user;
      }
      fn(err, token);
    }

    if (err) {
      debug('An error is reported from User.findOne: %j', err);
      fn(defaultError);
    } else if (user) {
      user.hasPassword(credentials.password, function(err, isMatch) {
        if (err) {
          debug('An error is reported from User.hasPassword: %j', err);
          fn(defaultError);
        } else if (isMatch) {
          if (self.settings.emailVerificationRequired && !user.emailVerified) {
            // Fail to log in if email verification is not done yet
            debug('User email has not been verified');
            err = new Error(g.f('login failed as the email has not been verified'));
            err.statusCode = 401;
            err.code = 'LOGIN_FAILED_EMAIL_NOT_VERIFIED';
            fn(err);
          } else {
            if (user.createAccessToken.length === 2) {
              user.createAccessToken(credentials.ttl, tokenHandler);
            } else {
              user.createAccessToken(credentials.ttl, credentials, tokenHandler);
            }
          }
        } else {
          debug('The password is invalid for user %s', query.email || query.username);
          fn(defaultError);
        }
      });
    } else {
      debug('No matching record is found for user %s', query.email || query.username);
      fn(defaultError);
    }
  });
  return fn.promise;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.User.logout"></a>[function <span class="apidocSignatureSpan">loopback.User.</span>logout (tokenId, fn)](#apidoc.element.loopback.User.logout)
- description and source-code
```javascript
logout = function (tokenId, fn) {
  fn = fn || utils.createPromiseCallback();

  var err;
  if (!tokenId) {
    err = new Error(g.f('{{accessToken}} is required to logout'));
    err.status = 401;
    process.nextTick(fn, err);
    return fn.promise;
  }

  this.relations.accessTokens.modelTo.destroyById(tokenId, function(err, info) {
    if (err) {
      fn(err);
    } else if ('count' in info && info.count === 0) {
      err = new Error(g.f('Could not find {{accessToken}}'));
      err.status = 401;
      fn(err);
    } else {
      fn();
    }
  });
  return fn.promise;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.User.mixin"></a>[function <span class="apidocSignatureSpan">loopback.User.</span>mixin (anotherClass, options)](#apidoc.element.loopback.User.mixin)
- description and source-code
```javascript
mixin = function (anotherClass, options) {
  if (typeof anotherClass === 'string') {
    this.modelBuilder.mixins.applyMixin(this, anotherClass, options);
  } else {
    if (anotherClass.prototype instanceof ModelBaseClass) {
      var props = anotherClass.definition.properties;
      for (var i in props) {
        if (this.definition.properties[i]) {
          continue;
        }
        this.defineProperty(i, props[i]);
      }
    }
    return jutil.mixin(this, anotherClass, options);
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.User.nestRemoting"></a>[function <span class="apidocSignatureSpan">loopback.User.</span>nestRemoting (relationName, options, filterCallback)](#apidoc.element.loopback.User.nestRemoting)
- description and source-code
```javascript
nestRemoting = function (relationName, options, filterCallback) {
  if (typeof options === 'function' && !filterCallback) {
    filterCallback = options;
    options = {};
  }
  options = options || {};

  var regExp = /^__([^_]+)__([^_]+)$/;
  var relation = this.relations[relationName];
  if (relation && relation.modelTo && relation.modelTo.sharedClass) {
    var self = this;
    var sharedClass = this.sharedClass;
    var sharedToClass = relation.modelTo.sharedClass;
    var toModelName = relation.modelTo.modelName;

    var pathName = options.pathName || relation.options.path || relationName;
    var paramName = options.paramName || 'nk';

    var http = [].concat(sharedToClass.http || [])[0];
    var httpPath, acceptArgs;

    if (relation.multiple) {
      httpPath = pathName + '/:' + paramName;
      acceptArgs = [
        {
          arg: paramName, type: 'any', http: {source: 'path'},
          description: format('Foreign key for %s.',  relation.name),
          required: true,
        },
      ];
    } else {
      httpPath = pathName;
      acceptArgs = [];
    }

    if (httpPath[0] !== '/') {
      httpPath = '/' + httpPath;
    }

    // A method should return the method name to use, if it is to be
    // included as a nested method - a falsy return value will skip.
    var filter = filterCallback || options.filterMethod || function(method, relation) {
      var matches = method.name.match(regExp);
      if (matches) {
        return '__' + matches[1] + '__' + relation.name + '__' + matches[2];
      }
    };

    sharedToClass.methods().forEach(function(method) {
      var methodName;
      if (!method.isStatic && (methodName = filter(method, relation))) {
        var prefix = relation.multiple ? '__findById__' : '__get__';
        var getterName = options.getterName || (prefix + relationName);

        var getterFn = relation.modelFrom.prototype[getterName];
        if (typeof getterFn !== 'function') {
          throw new Error(g.f('Invalid remote method: '%s'', getterName));
        }

        var nestedFn = relation.modelTo.prototype[method.name];
        if (typeof nestedFn !== 'function') {
          throw new Error(g.f('Invalid remote method: '%s'', method.name));
        }

        var opts = {};

        opts.accepts = acceptArgs.concat(method.accepts || []);
        opts.returns = [].concat(method.returns || []);
        opts.description = method.description;
        opts.accessType = method.accessType;
        opts.rest = extend({}, method.rest || {});
        opts.rest.delegateTo = method;

        opts.http = [];
        var routes = [].concat(method.http || []);
        routes.forEach(function(route) {
          if (route.path) {
            var copy = extend({}, route);
            copy.path = httpPath + route.path;
            opts.http.push(copy);
          }
        });

        if (relation.multiple) {
          sharedClass.defineMethod(methodName, opts, function(fkId) {
            var args = Array.prototype.slice.call(arguments, 1);
            var last = args[args.length - 1];
            var cb = typeof last === 'function' ? last : null;
            this[getterName](fkId, function(err, inst) {
              if (err && cb) return cb(err);
              if (inst instanceof relation.modelTo) {
                try {
                  nestedFn.apply(inst, args);
                } catch (err) {
                  if (cb) return cb(err);
                }
              } else if (cb) {
                cb(err, null);
              }
            });
          }, method.isStatic);
        } else {
          sharedClass.defineMethod(methodName, opts, function() {
            var args = Array.prototype.slice.call(arguments);
            var last = args[args.length - 1];
            var cb = typeof last === 'function' ? last : null;
            this[getterName](function(err, inst) {
              if (err && cb) return cb(err);
              if (inst instanceof relation.modelTo) {
                try {
                  nestedFn.apply(inst, args);
                } catch (err) {
                  if (cb) return ...
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.User.normalizeCredentials"></a>[function <span class="apidocSignatureSpan">loopback.User.</span>normalizeCredentials (credentials, realmRequired, realmDelimiter)](#apidoc.element.loopback.User.normalizeCredentials)
- description and source-code
```javascript
normalizeCredentials = function (credentials, realmRequired, realmDelimiter) {
  var query = {};
  credentials = credentials || {};
  if (!realmRequired) {
    if (credentials.email) {
      query.email = credentials.email;
    } else if (credentials.username) {
      query.username = credentials.username;
    }
  } else {
    if (credentials.realm) {
      query.realm = credentials.realm;
    }
    var parts;
    if (credentials.email) {
      parts = splitPrincipal(credentials.email, realmDelimiter);
      query.email = parts[1];
      if (parts[0]) {
        query.realm = parts[0];
      }
    } else if (credentials.username) {
      parts = splitPrincipal(credentials.username, realmDelimiter);
      query.username = parts[1];
      if (parts[0]) {
        query.realm = parts[0];
      }
    }
  }
  return query;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.User.notifyObserversAround"></a>[function <span class="apidocSignatureSpan">loopback.User.</span>notifyObserversAround (operation, context, fn, callback)](#apidoc.element.loopback.User.notifyObserversAround)
- description and source-code
```javascript
notifyObserversAround = function (operation, context, fn, callback) {
  var self = this;
  context = context || {};
  // Add callback to the context object so that an observer can skip other
  // ones by calling the callback function directly and not calling next
  if (context.end === undefined) {
    context.end = callback;
  }
  // First notify before observers
  return self.notifyObserversOf('before ' + operation, context,
    function(err, context) {
      if (err) return callback(err);

      function cbForWork(err) {
        var args = [].slice.call(arguments, 0);
        if (err) return callback.apply(null, args);
        // Find the list of params from the callback in addition to err
        var returnedArgs = args.slice(1);
        // Set up the array of results
        context.results = returnedArgs;
        // Notify after observers
        self.notifyObserversOf('after ' + operation, context,
          function(err, context) {
            if (err) return callback(err, context);
            var results = returnedArgs;
            if (context && Array.isArray(context.results)) {
              // Pickup the results from context
              results = context.results;
            }
            // Build the list of params for final callback
            var args = [err].concat(results);
            callback.apply(null, args);
          });
      }

      if (fn.length === 1) {
        // fn(done)
        fn(cbForWork);
      } else {
        // fn(context, done)
        fn(context, cbForWork);
      }
    });
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.User.notifyObserversOf"></a>[function <span class="apidocSignatureSpan">loopback.User.</span>notifyObserversOf (operation, context, callback)](#apidoc.element.loopback.User.notifyObserversOf)
- description and source-code
```javascript
notifyObserversOf = function (operation, context, callback) {
  var self = this;
  if (!callback) callback = utils.createPromiseCallback();

  function createNotifier(op) {
    return function(ctx, done) {
      if (typeof ctx === 'function' && done === undefined) {
        done = ctx;
        ctx = context;
      }
      self.notifyObserversOf(op, context, done);
    };
  }

  if (Array.isArray(operation)) {
    var tasks = [];
    for (var i = 0, n = operation.length; i < n; i++) {
      tasks.push(createNotifier(operation[i]));
    }
    return async.waterfall(tasks, callback);
  }

  var observers = this._observers && this._observers[operation];

  this._notifyBaseObservers(operation, context, function doNotify(err) {
    if (err) return callback(err, context);
    if (!observers || !observers.length) return callback(null, context);

    async.eachSeries(
      observers,
      function notifySingleObserver(fn, next) {
        var retval = fn(context, next);
        if (retval && typeof retval.then === 'function') {
          retval.then(
            function() { next(); return null; },
            next // error handler
          );
        }
      },
      function(err) { callback(err, context); }
    );
  });
  return callback.promise;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.User.observe"></a>[function <span class="apidocSignatureSpan">loopback.User.</span>observe (operation, listener)](#apidoc.element.loopback.User.observe)
- description and source-code
```javascript
observe = function (operation, listener) {
  this._observers = this._observers || {};
  if (!this._observers[operation]) {
    this._observers[operation] = [];
  }

  this._observers[operation].push(listener);
}
```
- example usage
```shell
...
var idType = idProp && idProp.type;
var idDefn = idProp && idProp.defaultFn;
if (idType !== String || !(idDefn === 'uuid' || idDefn === 'guid')) {
  deprecated('The model ' + this.modelName + ' is tracking changes, ' +
    'which requires a string id with GUID/UUID default value.');
}

Model.observe('after save', rectifyOnSave);

Model.observe('after delete', rectifyOnDelete);

// Only run if the run time is server
// Can switch off cleanup by setting the interval to -1
if (runtime.isServer && cleanupInterval > 0) {
  // initial cleanup
...
```

#### <a name="apidoc.element.loopback.User.on"></a>[function <span class="apidocSignatureSpan">loopback.User.</span>on ()](#apidoc.element.loopback.User.on)
- description and source-code
```javascript
on = function () { [native code] }
```
- example usage
```shell
...
    this.remotes().addClass(Model.Change.sharedClass);
  }
  clearHandlerCache(this);
  this.emit('modelRemoted', Model.sharedClass);
}

var self = this;
Model.on('remoteMethodDisabled', function(model, methodName) {
  self.emit('remoteMethodDisabled', model, methodName);
});
Model.on('remoteMethodAdded', function(model) {
  self.emit('remoteMethodAdded', model);
});

Model.shared = isPublic;
...
```

#### <a name="apidoc.element.loopback.User.once"></a>[function <span class="apidocSignatureSpan">loopback.User.</span>once ()](#apidoc.element.loopback.User.once)
- description and source-code
```javascript
once = function () { [native code] }
```
- example usage
```shell
...
    remotes.afterError(className + '.' + name, fn);
  });
};

ModelCtor._runWhenAttachedToApp = function(fn) {
  if (this.app) return fn(this.app);
  var self = this;
  self.once('attached', function() {
    fn(self.app);
  });
};

if ('injectOptionsFromRemoteContext' in options) {
  console.warn(g.f(
    '%s is using model setting %s which is no longer available.',
...
```

#### <a name="apidoc.element.loopback.User.patchOrCreate"></a>[function <span class="apidocSignatureSpan">loopback.User.</span>patchOrCreate (data, callback)](#apidoc.element.loopback.User.patchOrCreate)
- description and source-code
```javascript
function upsert(data, callback) {
  throwNotAttached(this.modelName, 'upsert');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.User.patchOrCreateWithWhere"></a>[function <span class="apidocSignatureSpan">loopback.User.</span>patchOrCreateWithWhere (where, data, callback)](#apidoc.element.loopback.User.patchOrCreateWithWhere)
- description and source-code
```javascript
function upsertWithWhere(where, data, callback) {
  throwNotAttached(this.modelName, 'upsertWithWhere');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.User.prependListener"></a>[function <span class="apidocSignatureSpan">loopback.User.</span>prependListener ()](#apidoc.element.loopback.User.prependListener)
- description and source-code
```javascript
prependListener = function () { [native code] }
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.User.prependOnceListener"></a>[function <span class="apidocSignatureSpan">loopback.User.</span>prependOnceListener ()](#apidoc.element.loopback.User.prependOnceListener)
- description and source-code
```javascript
prependOnceListener = function () { [native code] }
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.User.rectifyAllChanges"></a>[function <span class="apidocSignatureSpan">loopback.User.</span>rectifyAllChanges (callback)](#apidoc.element.loopback.User.rectifyAllChanges)
- description and source-code
```javascript
rectifyAllChanges = function (callback) {
  this.getChangeModel().rectifyAll(callback);
}
```
- example usage
```shell
...
    cleanup();

    // cleanup
    setInterval(cleanup, cleanupInterval);
  }

  function cleanup() {
    Model.rectifyAllChanges(function(err) {
      if (err) {
        Model.handleChangeError(err, 'cleanup');
      }
    });
  }
};
...
```

#### <a name="apidoc.element.loopback.User.rectifyChange"></a>[function <span class="apidocSignatureSpan">loopback.User.</span>rectifyChange (id, callback)](#apidoc.element.loopback.User.rectifyChange)
- description and source-code
```javascript
rectifyChange = function (id, callback) {
  var Change = this.getChangeModel();
  Change.rectifyModelChanges(this.modelName, [id], callback);
}
```
- example usage
```shell
...
  debug('rectifyOnSave %s -> ' + (id ? 'id %j' : '%s'),
    ctx.Model.modelName, id ? id : 'ALL');
  debug('context instance:%j currentInstance:%j where:%j data %j',
    ctx.instance, ctx.currentInstance, ctx.where, ctx.data);
}

if (id) {
  ctx.Model.rectifyChange(id, reportErrorAndNext);
} else {
  ctx.Model.rectifyAllChanges(reportErrorAndNext);
}

function reportErrorAndNext(err) {
  if (err) {
    ctx.Model.handleChangeError(err, 'after save');
...
```

#### <a name="apidoc.element.loopback.User.registerProperty"></a>[function <span class="apidocSignatureSpan">loopback.User.</span>registerProperty (propertyName)](#apidoc.element.loopback.User.registerProperty)
- description and source-code
```javascript
registerProperty = function (propertyName) {
  var properties = modelDefinition.build();
  var prop = properties[propertyName];
  var DataType = prop.type;
  if (!DataType) {
    throw new Error(g.f('Invalid type for property %s', propertyName));
  }

  if (prop.required) {
    var requiredOptions = typeof prop.required === 'object' ? prop.required : undefined;
    ModelClass.validatesPresenceOf(propertyName, requiredOptions);
  }

  Object.defineProperty(ModelClass.prototype, propertyName, {
    get: function() {
      if (ModelClass.getter[propertyName]) {
        return ModelClass.getter[propertyName].call(this); // Try getter first
      } else {
        return this.__data && this.__data[propertyName]; // Try __data
      }
    },
    set: function(value) {
      var DataType = ModelClass.definition.properties[propertyName].type;
      if (Array.isArray(DataType) || DataType === Array) {
        DataType = List;
      } else if (DataType === Date) {
        DataType = DateType;
      } else if (DataType === Boolean) {
        DataType = BooleanType;
      } else if (typeof DataType === 'string') {
        DataType = modelBuilder.resolveType(DataType);
      }

      var persistUndefinedAsNull = ModelClass.definition.settings.persistUndefinedAsNull;
      if (value === undefined && persistUndefinedAsNull) {
        value = null;
      }

      if (ModelClass.setter[propertyName]) {
        ModelClass.setter[propertyName].call(this, value); // Try setter first
      } else {
        this.__data = this.__data || {};
        if (value === null || value === undefined) {
          this.__data[propertyName] = value;
        } else {
          if (DataType === List) {
            this.__data[propertyName] = DataType(value, properties[propertyName].type, this.__data);
          } else {
            // Assume the type constructor handles Constructor() call
            // If not, we should call new DataType(value).valueOf();
            this.__data[propertyName] = (value instanceof DataType) ? value : DataType(value);
          }
        }
      }
    },
    configurable: true,
    enumerable: true,
  });

  // FIXME: [rfeng] Do we need to keep the raw data?
  // Use $ as the prefix to avoid conflicts with properties such as _id
  Object.defineProperty(ModelClass.prototype, '$' + propertyName, {
    get: function() {
      return this.__data && this.__data[propertyName];
    },
    set: function(value) {
      if (!this.__data) {
        this.__data = {};
      }
      this.__data[propertyName] = value;
    },
    configurable: true,
    enumerable: false,
  });
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.User.remoteMethod"></a>[function <span class="apidocSignatureSpan">loopback.User.</span>remoteMethod (name, options)](#apidoc.element.loopback.User.remoteMethod)
- description and source-code
```javascript
remoteMethod = function (name, options) {
  if (options.isStatic === undefined) {
    var m = name.match(/^prototype\.(.*)$/);
    options.isStatic = !m;
    name = options.isStatic ? name : m[1];
  }

  if (options.accepts) {
    options = extend({}, options);
    options.accepts = setupOptionsArgs(options.accepts);
  }

  this.sharedClass.defineMethod(name, options);
  this.emit('remoteMethodAdded', this.sharedClass);
}
```
- example usage
```shell
...
  /**
* Enable remote invocation for the specified method.
* See [Remote methods](http://loopback.io/doc/en/lb2/Remote-methods.html) for more information.
*
* Static method example:
* '''js
* Model.myMethod();
* Model.remoteMethod('myMethod');
* '''
*
* @param {String} name The name of the method.
* @param {Object} options The remoting options.
* See [Remote methods - Options](http://loopback.io/doc/en/lb2/Remote-methods.html#options).
*/
...
```

#### <a name="apidoc.element.loopback.User.remove"></a>[function <span class="apidocSignatureSpan">loopback.User.</span>remove (where, cb)](#apidoc.element.loopback.User.remove)
- description and source-code
```javascript
function destroyAll(where, cb) {
  throwNotAttached(this.modelName, 'destroyAll');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.User.removeAllListeners"></a>[function <span class="apidocSignatureSpan">loopback.User.</span>removeAllListeners ()](#apidoc.element.loopback.User.removeAllListeners)
- description and source-code
```javascript
removeAllListeners = function () { [native code] }
```
- example usage
```shell
...

var idName = this.getIdName();
var Model = this;
var changes = new PassThrough({objectMode: true});
var writeable = true;

changes.destroy = function() {
  changes.removeAllListeners('error');
  changes.removeAllListeners('end');
  writeable = false;
  changes = null;
};

changes.on('error', function() {
  writeable = false;
...
```

#### <a name="apidoc.element.loopback.User.removeById"></a>[function <span class="apidocSignatureSpan">loopback.User.</span>removeById (id, cb)](#apidoc.element.loopback.User.removeById)
- description and source-code
```javascript
function deleteById(id, cb) {
  throwNotAttached(this.modelName, 'deleteById');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.User.removeListener"></a>[function <span class="apidocSignatureSpan">loopback.User.</span>removeListener ()](#apidoc.element.loopback.User.removeListener)
- description and source-code
```javascript
removeListener = function () { [native code] }
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.User.removeObserver"></a>[function <span class="apidocSignatureSpan">loopback.User.</span>removeObserver (operation, listener)](#apidoc.element.loopback.User.removeObserver)
- description and source-code
```javascript
removeObserver = function (operation, listener) {
  if (!(this._observers && this._observers[operation])) return;

  var index = this._observers[operation].indexOf(listener);
  if (index !== -1) {
    return this._observers[operation].splice(index, 1);
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.User.replaceById"></a>[function <span class="apidocSignatureSpan">loopback.User.</span>replaceById (id, data, cb)](#apidoc.element.loopback.User.replaceById)
- description and source-code
```javascript
function replaceById(id, data, cb) {
  throwNotAttached(this.modelName, 'replaceById');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.User.replaceOrCreate"></a>[function <span class="apidocSignatureSpan">loopback.User.</span>replaceOrCreate (data, callback)](#apidoc.element.loopback.User.replaceOrCreate)
- description and source-code
```javascript
function replaceOrCreate(data, callback) {
  throwNotAttached(this.modelName, 'replaceOrCreate');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.User.replicate"></a>[function <span class="apidocSignatureSpan">loopback.User.</span>replicate (since, targetModel, options, callback)](#apidoc.element.loopback.User.replicate)
- description and source-code
```javascript
replicate = function (since, targetModel, options, callback) {
  var lastArg = arguments[arguments.length - 1];

  if (typeof lastArg === 'function' && arguments.length > 1) {
    callback = lastArg;
  }

  if (typeof since === 'function' && since.modelName) {
    targetModel = since;
    since = -1;
  }

  if (typeof since !== 'object') {
    since = {source: since, target: since};
  }

  if (typeof options === 'function') {
    options = {};
  }

  options = options || {};

  var sourceModel = this;
  callback = callback || utils.createPromiseCallback();

  debug('replicating %s since %s to %s since %s',
    sourceModel.modelName,
    since.source,
    targetModel.modelName,
    since.target);
  if (options.filter) {
    debug('\twith filter %j', options.filter);
  }

  // In order to avoid a race condition between the replication and
  // other clients modifying the data, we must create the new target
  // checkpoint as the first step of the replication process.
  // As a side-effect of that, the replicated changes are associated
  // with the new target checkpoint. This is actually desired behaviour,
  // because that way clients replicating *from* the target model
  // since the new checkpoint will pick these changes up.
  // However, it increases the likelihood of (false) conflicts being detected.
  // In order to prevent that, we run the replication multiple times,
  // until no changes were replicated, but at most MAX_ATTEMPTS times
  // to prevent starvation. In most cases, the second run will find no changes
  // to replicate and we are done.
  var MAX_ATTEMPTS = 3;

  run(1, since);
  return callback.promise;

  function run(attempt, since) {
    debug('\titeration #%s', attempt);
    tryReplicate(sourceModel, targetModel, since, options, next);

    function next(err, conflicts, cps, updates) {
      var finished = err || conflicts.length ||
        !updates || updates.length === 0 ||
        attempt >= MAX_ATTEMPTS;

      if (finished)
        return callback(err, conflicts, cps);
      run(attempt + 1, cps);
    }
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.User.resetPassword"></a>[function <span class="apidocSignatureSpan">loopback.User.</span>resetPassword (options, cb)](#apidoc.element.loopback.User.resetPassword)
- description and source-code
```javascript
resetPassword = function (options, cb) {
  cb = cb || utils.createPromiseCallback();
  var UserModel = this;
  var ttl = UserModel.settings.resetPasswordTokenTTL || DEFAULT_RESET_PW_TTL;
  options = options || {};
  if (typeof options.email !== 'string') {
    var err = new Error(g.f('Email is required'));
    err.statusCode = 400;
    err.code = 'EMAIL_REQUIRED';
    cb(err);
    return cb.promise;
  }

  try {
    if (options.password) {
      UserModel.validatePassword(options.password);
    }
  } catch (err) {
    return cb(err);
  }
  var where = {
    email: options.email,
  };
  if (options.realm) {
    where.realm = options.realm;
  }
  UserModel.findOne({where: where}, function(err, user) {
    if (err) {
      return cb(err);
    }
    if (!user) {
      err = new Error(g.f('Email not found'));
      err.statusCode = 404;
      err.code = 'EMAIL_NOT_FOUND';
      return cb(err);
    }
    // create a short lived access token for temp login to change password
    // TODO(ritch) - eventually this should only allow password change
    if (UserModel.settings.emailVerificationRequired && !user.emailVerified) {
      err = new Error(g.f('Email has not been verified'));
      err.statusCode = 401;
      err.code = 'RESET_FAILED_EMAIL_NOT_VERIFIED';
      return cb(err);
    }

    user.createAccessToken(ttl, function(err, accessToken) {
      if (err) {
        return cb(err);
      }
      cb();
      UserModel.emit('resetPasswordRequest', {
        email: options.email,
        accessToken: accessToken,
        user: user,
        options: options,
      });
    });
  });

  return cb.promise;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.User.scopeRemoting"></a>[function <span class="apidocSignatureSpan">loopback.User.</span>scopeRemoting (scopeName, scope, define)](#apidoc.element.loopback.User.scopeRemoting)
- description and source-code
```javascript
scopeRemoting = function (scopeName, scope, define) {
  var pathName =
    (scope.options && scope.options.http && scope.options.http.path) || scopeName;

  var isStatic = scope.isStatic;
  var toModelName = scope.modelTo.modelName;

  // https://github.com/strongloop/loopback/issues/811
  // Check if the scope is for a hasMany relation
  var relation = this.relations[scopeName];
  if (relation && relation.modelTo) {
    // For a relation with through model, the toModelName should be the one
    // from the target model
    toModelName = relation.modelTo.modelName;
  }

  define('__get__' + scopeName, {
    isStatic: isStatic,
    http: {verb: 'get', path: '/' + pathName},
    accepts: [
      {arg: 'filter', type: 'object'},
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Queries %s of %s.', scopeName, this.modelName),
    accessType: 'READ',
    returns: {arg: scopeName, type: [toModelName], root: true},
  });

  define('__create__' + scopeName, {
    isStatic: isStatic,
    http: {verb: 'post', path: '/' + pathName},
    accepts: [
      {
        arg: 'data',
        type: 'object',
        allowArray: true,
        model: toModelName,
        http: {source: 'body'},
      },
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Creates a new instance in %s of this model.', scopeName),
    accessType: 'WRITE',
    returns: {arg: 'data', type: toModelName, root: true},
  });

  define('__delete__' + scopeName, {
    isStatic: isStatic,
    http: {verb: 'delete', path: '/' + pathName},
    accepts: [
      {
        arg: 'where', type: 'object',
        // The "where" argument is not exposed in the REST API
        // but we need to provide a value so that we can pass "options"
        // as the third argument.
        http: function(ctx) { return undefined; },
      },
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Deletes all %s of this model.', scopeName),
    accessType: 'WRITE',
  });

  define('__count__' + scopeName, {
    isStatic: isStatic,
    http: {verb: 'get', path: '/' + pathName + '/count'},
    accepts: [
      {
        arg: 'where', type: 'object',
        description: 'Criteria to match model instances',
      },
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    description: format('Counts %s of %s.', scopeName, this.modelName),
    accessType: 'READ',
    returns: {arg: 'count',  type: 'number'},
  });
}
```
- example usage
```shell
...
        ModelCtor.hasManyRemoting(relationName, relation, define);
      }
    }

    // handle scopes
    var scopes = ModelCtor.scopes || {};
    for (var scopeName in scopes) {
      ModelCtor.scopeRemoting(scopeName, scopes[scopeName], define);
    }
  });

  return ModelCtor;
};

/*!
...
```

#### <a name="apidoc.element.loopback.User.setMaxListeners"></a>[function <span class="apidocSignatureSpan">loopback.User.</span>setMaxListeners ()](#apidoc.element.loopback.User.setMaxListeners)
- description and source-code
```javascript
setMaxListeners = function () { [native code] }
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.User.setup"></a>[function <span class="apidocSignatureSpan">loopback.User.</span>setup ()](#apidoc.element.loopback.User.setup)
- description and source-code
```javascript
setup = function () {
  // We need to call the base class's setup method
  User.base.setup.call(this);
  var UserModel = this;

  // max ttl
  this.settings.maxTTL = this.settings.maxTTL || DEFAULT_MAX_TTL;
  this.settings.ttl = this.settings.ttl || DEFAULT_TTL;

  UserModel.setter.email = function(value) {
    if (!UserModel.settings.caseSensitiveEmail) {
      this.$email = value.toLowerCase();
    } else {
      this.$email = value;
    }
  };

  UserModel.setter.password = function(plain) {
    if (typeof plain !== 'string') {
      return;
    }
    if (plain.indexOf('$2a$') === 0 && plain.length === 60) {
      // The password is already hashed. It can be the case
      // when the instance is loaded from DB
      this.$password = plain;
    } else {
      this.$password = this.constructor.hashPassword(plain);
    }
  };

  // Make sure emailVerified is not set by creation
  UserModel.beforeRemote('create', function(ctx, user, next) {
    var body = ctx.req.body;
    if (body && body.emailVerified) {
      body.emailVerified = false;
    }
    next();
  });

  UserModel.remoteMethod(
    'login',
    {
      description: 'Login a user with username/email and password.',
      accepts: [
        {arg: 'credentials', type: 'object', required: true, http: {source: 'body'}},
        {arg: 'include', type: ['string'], http: {source: 'query'},
          description: 'Related objects to include in the response. ' +
          'See the description of return value for more details.'},
      ],
      returns: {
        arg: 'accessToken', type: 'object', root: true,
        description:
          g.f('The response body contains properties of the {{AccessToken}} created on login.\n' +
          'Depending on the value of 'include' parameter, the body may contain ' +
          'additional properties:\n\n' +
          '  - 'user' - 'U+007BUserU+007D' - Data of the currently logged in user. ' +
          '{{('include=user')}}\n\n'),
      },
      http: {verb: 'post'},
    }
  );

  UserModel.remoteMethod(
    'logout',
    {
      description: 'Logout a user with access token.',
      accepts: [
        {arg: 'access_token', type: 'string', http: function(ctx) {
          var req = ctx && ctx.req;
          var accessToken = req && req.accessToken;
          var tokenID = accessToken ? accessToken.id : undefined;

          return tokenID;
        }, description: 'Do not supply this argument, it is automatically extracted ' +
          'from request headers.',
        },
      ],
      http: {verb: 'all'},
    }
  );

  UserModel.remoteMethod(
    'confirm',
    {
      description: 'Confirm a user registration with email verification token.',
      accepts: [
        {arg: 'uid', type: 'string', required: true},
        {arg: 'token', type: 'string', required: true},
        {arg: 'redirect', type: 'string'},
      ],
      http: {verb: 'get', path: '/confirm'},
    }
  );

  UserModel.remoteMethod(
    'resetPassword',
    {
      description: 'Reset password for a user with email.',
      accepts: [
        {arg: 'options', type: 'object', required: true, http: {source: 'body'}},
      ],
      http: {verb: 'post', path: '/reset'},
    }
  );

  UserModel.remoteMethod(
    'changePassword',
    {
      description: 'Change a user\'s password.',
      accepts: [
        {arg: 'id', type: 'any',
          http: ctx => ctx.req.accessToken && ctx.req.accessToken.userId,
        },
        {arg: 'oldPassword', type: 'string', required: true, http: {source: 'form'}},
        {arg: 'newPassword', type: 'string', required: true, http: {source: 'form'}},
        {arg: 'options', type: 'object', http: 'optionsFromRequest'},
      ],
      http: {verb: 'POST', path: '/change-password'},
    }
  );

  UserModel.afterRemote('confirm', function(ctx, inst, next) {
    if (ctx.args.redirect !== undefined) {
      if (!ctx.res) {
        return next(new Error(g.f('The transport does not support HTTP redirects.')));
      }
      ctx.res.location(ctx.args.redirect);
      ctx.res.status(302);
    }
    next();
  });

  // default models
  assert(loopb ...
```
- example usage
```shell
...
  Model.createOptionsFromRemotingContext = function(ctx) {
    return {
      accessToken: ctx.req.accessToken,
    };
  };

  // setup the initial model
  Model.setup();

  return Model;
};
...
```

#### <a name="apidoc.element.loopback.User.setupRemoting"></a>[function <span class="apidocSignatureSpan">loopback.User.</span>setupRemoting ()](#apidoc.element.loopback.User.setupRemoting)
- description and source-code
```javascript
setupRemoting = function () {
  var PersistedModel = this;
  var typeName = PersistedModel.modelName;
  var options = PersistedModel.settings;

  // This is just for LB 3.x
  options.replaceOnPUT = options.replaceOnPUT !== false;

  function setRemoting(scope, name, options) {
    var fn = scope[name];
    fn._delegate = true;
    options.isStatic = scope === PersistedModel;
    PersistedModel.remoteMethod(name, options);
  }

  setRemoting(PersistedModel, 'create', {
    description: 'Create a new instance of the model and persist it into the data source.',
    accessType: 'WRITE',
    accepts: [
      {
        arg: 'data', type: 'object', model: typeName, allowArray: true,
        description: 'Model instance data',
        http: {source: 'body'},
      },
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    returns: {arg: 'data', type: typeName, root: true},
    http: {verb: 'post', path: '/'},
  });

  var upsertOptions = {
    aliases: ['upsert', 'updateOrCreate'],
    description: 'Patch an existing model instance or insert a new one ' +
      'into the data source.',
    accessType: 'WRITE',
    accepts: [
      {
        arg: 'data', type: 'object', model: typeName, http: {source: 'body'},
        description: 'Model instance data',
      },
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    returns: {arg: 'data', type: typeName, root: true},
    http: [{verb: 'patch', path: '/'}],
  };

  if (!options.replaceOnPUT) {
    upsertOptions.http.unshift({verb: 'put', path: '/'});
  }
  setRemoting(PersistedModel, 'patchOrCreate', upsertOptions);

  var replaceOrCreateOptions = {
    description: 'Replace an existing model instance or insert a new one into the data source.',
    accessType: 'WRITE',
    accepts: [
      {
        arg: 'data', type: 'object', model: typeName,
        http: {source: 'body'},
        description: 'Model instance data',
      },
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    returns: {arg: 'data', type: typeName, root: true},
    http: [{verb: 'post', path: '/replaceOrCreate'}],
  };

  if (options.replaceOnPUT) {
    replaceOrCreateOptions.http.push({verb: 'put', path: '/'});
  }

  setRemoting(PersistedModel, 'replaceOrCreate', replaceOrCreateOptions);

  setRemoting(PersistedModel, 'upsertWithWhere', {
    aliases: ['patchOrCreateWithWhere'],
    description: 'Update an existing model instance or insert a new one into ' +
      'the data source based on the where criteria.',
    accessType: 'WRITE',
    accepts: [
      {arg: 'where', type: 'object', http: {source: 'query'},
        description: 'Criteria to match model instances'},
      {arg: 'data', type: 'object', model: typeName, http: {source: 'body'},
        description: 'An object of model property name/value pairs'},
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    returns: {arg: 'data', type: typeName, root: true},
    http: {verb: 'post', path: '/upsertWithWhere'},
  });

  setRemoting(PersistedModel, 'exists', {
    description: 'Check whether a model instance exists in the data source.',
    accessType: 'READ',
    accepts: [
      {arg: 'id', type: 'any', description: 'Model id', required: true},
      {arg: 'options', type: 'object', http: 'optionsFromRequest'},
    ],
    returns: {arg: 'exists', type: 'boolean'},
    http: [
      {verb: 'get', path: '/:id/exists'},
      {verb: 'head', path: '/:id'},
    ],
    rest: {
      // After hook to map exists to 200/404 for HEAD
      after: function(ctx, cb) {
        if (ctx.req.method === 'GET') {
          // For GET, return {exists: true|false} as is
          return cb();
        }
        if (!ctx.result.exists) {
          var modelName = ctx.method.sharedClass.name;
          var id = ctx.getArgByName('id');
          var msg = 'Unknown "' + modelName + '" id "' + id + '".';
          var error = new Error(msg);
          error.statusCode = error.status = 404;
          error.code = 'MODEL_NOT_FOUND';
          cb(error);
        } else {
          cb();
        } ...
```
- example usage
```shell
...
    PersistedModel.once('dataSourceAttached', function() {
      PersistedModel.enableChangeTracking();
    });
  } else if (this.settings.enableRemoteReplication) {
    PersistedModel._defineChangeModel();
  }

  PersistedModel.setupRemoting();
};

/*!
 * Throw an error telling the user that the method is not available and why.
 */

function throwNotAttached(modelName, methodName) {
...
```

#### <a name="apidoc.element.loopback.User.sharedCtor"></a>[function <span class="apidocSignatureSpan">loopback.User.</span>sharedCtor (data, id, options, fn)](#apidoc.element.loopback.User.sharedCtor)
- description and source-code
```javascript
sharedCtor = function (data, id, options, fn) {
  var ModelCtor = this;

  var isRemoteInvocationWithOptions = typeof data !== 'object' &&
    typeof id === 'object' &&
    typeof options === 'function';
  if (isRemoteInvocationWithOptions) {
    // sharedCtor(id, options, fn)
    fn = options;
    options = id;
    id = data;
    data = null;
  } else if (typeof data === 'function') {
    // sharedCtor(fn)
    fn = data;
    data = null;
    id = null;
    options = null;
  } else if (typeof id === 'function') {
    // sharedCtor(data, fn)
    // sharedCtor(id, fn)
    fn = id;
    options = null;

    if (typeof data !== 'object') {
      id = data;
      data = null;
    } else {
      id = null;
    }
  }

  if (id && data) {
    var model = new ModelCtor(data);
    model.id = id;
    fn(null, model);
  } else if (data) {
    fn(null, new ModelCtor(data));
  } else if (id) {
    var filter = {};
    ModelCtor.findById(id, filter, options, function(err, model) {
      if (err) {
        fn(err);
      } else if (model) {
        fn(null, model);
      } else {
        err = new Error(g.f('could not find a model with apidoc.element.loopback.User.sharedCtor %s', id));
        err.statusCode = 404;
        err.code = 'MODEL_NOT_FOUND';
        fn(err);
      }
    });
  } else {
    fn(new Error(g.f('must specify an apidoc.element.loopback.User.sharedCtor or {{data}}')));
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.User.super_"></a>[function <span class="apidocSignatureSpan">loopback.User.</span>super_ (data, options)](#apidoc.element.loopback.User.super_)
- description and source-code
```javascript
function ModelConstructor(data, options) {
  if (!(this instanceof ModelConstructor)) {
    return new ModelConstructor(data, options);
  }
  if (ModelClass.settings.unresolved) {
    throw new Error(g.f('Model %s is not defined.', ModelClass.modelName));
  }
  ModelBaseClass.apply(this, arguments);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.User.update"></a>[function <span class="apidocSignatureSpan">loopback.User.</span>update (where, data, cb)](#apidoc.element.loopback.User.update)
- description and source-code
```javascript
function updateAll(where, data, cb) {
  throwNotAttached(this.modelName, 'updateAll');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.User.updateAll"></a>[function <span class="apidocSignatureSpan">loopback.User.</span>updateAll (where, data, cb)](#apidoc.element.loopback.User.updateAll)
- description and source-code
```javascript
function updateAll(where, data, cb) {
  throwNotAttached(this.modelName, 'updateAll');
}
```
- example usage
```shell
...

  /**
* Update multiple instances that match the where clause.
*
* Example:
*
*'''js
* Employee.updateAll({managerId: 'x001'}, {managerId: 'x002'}, function(err, info) {
*     ...
* });
* '''
*
* @param {Object} [where] Optional 'where' filter, like
* '''
* { key: val, key2: {gt: 'val2'}, ...}
...
```

#### <a name="apidoc.element.loopback.User.updateLastChange"></a>[function <span class="apidocSignatureSpan">loopback.User.</span>updateLastChange (id, data, cb)](#apidoc.element.loopback.User.updateLastChange)
- description and source-code
```javascript
updateLastChange = function (id, data, cb) {
  var self = this;
  this.findLastChange(id, function(err, inst) {
    if (err) return cb(err);
    if (!inst) {
      err = new Error(g.f('No change record found for %s with id %s',
        self.modelName, id));
      err.statusCode = 404;
      return cb(err);
    }

    inst.updateAttributes(data, cb);
  });
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.User.updateOrCreate"></a>[function <span class="apidocSignatureSpan">loopback.User.</span>updateOrCreate (data, callback)](#apidoc.element.loopback.User.updateOrCreate)
- description and source-code
```javascript
function upsert(data, callback) {
  throwNotAttached(this.modelName, 'upsert');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.User.upsert"></a>[function <span class="apidocSignatureSpan">loopback.User.</span>upsert (data, callback)](#apidoc.element.loopback.User.upsert)
- description and source-code
```javascript
function upsert(data, callback) {
  throwNotAttached(this.modelName, 'upsert');
}
```
- example usage
```shell
...
  }
});

// then save
function save() {
  inst.trigger('save', function(saveDone) {
    inst.trigger('update', function(updateDone) {
      Model.upsert(inst, function(err) {
        inst._initProperties(data);
        updateDone.call(inst, function() {
          saveDone.call(inst, function() {
            callback(err, inst);
          });
        });
      });
...
```

#### <a name="apidoc.element.loopback.User.upsertWithWhere"></a>[function <span class="apidocSignatureSpan">loopback.User.</span>upsertWithWhere (where, data, callback)](#apidoc.element.loopback.User.upsertWithWhere)
- description and source-code
```javascript
function upsertWithWhere(where, data, callback) {
  throwNotAttached(this.modelName, 'upsertWithWhere');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.User.validate"></a>[function <span class="apidocSignatureSpan">loopback.User.</span>validate ()](#apidoc.element.loopback.User.validate)
- description and source-code
```javascript
validate = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.User.validateAsync"></a>[function <span class="apidocSignatureSpan">loopback.User.</span>validateAsync ()](#apidoc.element.loopback.User.validateAsync)
- description and source-code
```javascript
validateAsync = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.User.validatePassword"></a>[function <span class="apidocSignatureSpan">loopback.User.</span>validatePassword (plain)](#apidoc.element.loopback.User.validatePassword)
- description and source-code
```javascript
validatePassword = function (plain) {
  var err;
  if (plain && typeof plain === 'string' && plain.length <= MAX_PASSWORD_LENGTH) {
    return true;
  }
  if (plain.length > MAX_PASSWORD_LENGTH) {
    err = new Error(g.f('Password too long: %s', plain));
    err.code = 'PASSWORD_TOO_LONG';
  } else {
    err =  new Error(g.f('Invalid password: %s', plain));
    err.code = 'INVALID_PASSWORD';
  }
  err.statusCode = 422;
  throw err;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.User.validatesAbsenceOf"></a>[function <span class="apidocSignatureSpan">loopback.User.</span>validatesAbsenceOf ()](#apidoc.element.loopback.User.validatesAbsenceOf)
- description and source-code
```javascript
validatesAbsenceOf = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.User.validatesExclusionOf"></a>[function <span class="apidocSignatureSpan">loopback.User.</span>validatesExclusionOf ()](#apidoc.element.loopback.User.validatesExclusionOf)
- description and source-code
```javascript
validatesExclusionOf = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.User.validatesFormatOf"></a>[function <span class="apidocSignatureSpan">loopback.User.</span>validatesFormatOf ()](#apidoc.element.loopback.User.validatesFormatOf)
- description and source-code
```javascript
validatesFormatOf = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.User.validatesInclusionOf"></a>[function <span class="apidocSignatureSpan">loopback.User.</span>validatesInclusionOf ()](#apidoc.element.loopback.User.validatesInclusionOf)
- description and source-code
```javascript
validatesInclusionOf = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.User.validatesLengthOf"></a>[function <span class="apidocSignatureSpan">loopback.User.</span>validatesLengthOf ()](#apidoc.element.loopback.User.validatesLengthOf)
- description and source-code
```javascript
validatesLengthOf = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.User.validatesNumericalityOf"></a>[function <span class="apidocSignatureSpan">loopback.User.</span>validatesNumericalityOf ()](#apidoc.element.loopback.User.validatesNumericalityOf)
- description and source-code
```javascript
validatesNumericalityOf = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.User.validatesPresenceOf"></a>[function <span class="apidocSignatureSpan">loopback.User.</span>validatesPresenceOf ()](#apidoc.element.loopback.User.validatesPresenceOf)
- description and source-code
```javascript
validatesPresenceOf = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.User.validatesUniquenessOf"></a>[function <span class="apidocSignatureSpan">loopback.User.</span>validatesUniquenessOf ()](#apidoc.element.loopback.User.validatesUniquenessOf)
- description and source-code
```javascript
validatesUniquenessOf = function () {
  var args = Array.prototype.slice.call(arguments);
  args[1] = args[1] || {};
  configure(this, name, args, opts);
}
```
- example usage
```shell
n/a
```



# <a name="apidoc.module.loopback.User.prototype"></a>[module loopback.User.prototype](#apidoc.module.loopback.User.prototype)

#### <a name="apidoc.element.loopback.User.prototype.changePassword"></a>[function <span class="apidocSignatureSpan">loopback.User.prototype.</span>changePassword (oldPassword, newPassword, options, cb)](#apidoc.element.loopback.User.prototype.changePassword)
- description and source-code
```javascript
changePassword = function (oldPassword, newPassword, options, cb) {
  if (cb === undefined && typeof options === 'function') {
    cb = options;
    options = undefined;
  }
  cb = cb || utils.createPromiseCallback();

  this.hasPassword(oldPassword, (err, isMatch) => {
    if (err) return cb(err);
    if (!isMatch) {
      const err = new Error('Invalid current password');
      Object.assign(err, {
        code: 'INVALID_PASSWORD',
        statusCode: 400,
      });
      return cb(err);
    }

    try {
      User.validatePassword(newPassword);
    } catch (err) {
      return cb(err);
    }

    const delta = {password: newPassword};
    this.patchAttributes(delta, options, (err, updated) => cb(err));
  });
  return cb.promise;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.User.prototype.createAccessToken"></a>[function <span class="apidocSignatureSpan">loopback.User.prototype.</span>createAccessToken (ttl, options, cb)](#apidoc.element.loopback.User.prototype.createAccessToken)
- description and source-code
```javascript
createAccessToken = function (ttl, options, cb) {
  if (cb === undefined && typeof options === 'function') {
    // createAccessToken(ttl, cb)
    cb = options;
    options = undefined;
  }

  cb = cb || utils.createPromiseCallback();

  if (typeof ttl === 'object' && !options) {
    // createAccessToken(options, cb)
    options = ttl;
    ttl = options.ttl;
  }
  options = options || {};
  var userModel = this.constructor;
  ttl = Math.min(ttl || userModel.settings.ttl, userModel.settings.maxTTL);
  this.accessTokens.create({
    ttl: ttl,
  }, cb);
  return cb.promise;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.User.prototype.hasPassword"></a>[function <span class="apidocSignatureSpan">loopback.User.prototype.</span>hasPassword (plain, fn)](#apidoc.element.loopback.User.prototype.hasPassword)
- description and source-code
```javascript
hasPassword = function (plain, fn) {
  fn = fn || utils.createPromiseCallback();
  if (this.password && plain) {
    bcrypt.compare(plain, this.password, function(err, isMatch) {
      if (err) return fn(err);
      fn(null, isMatch);
    });
  } else {
    fn(null, false);
  }
  return fn.promise;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.User.prototype.verify"></a>[function <span class="apidocSignatureSpan">loopback.User.prototype.</span>verify (options, fn)](#apidoc.element.loopback.User.prototype.verify)
- description and source-code
```javascript
verify = function (options, fn) {
  fn = fn || utils.createPromiseCallback();

  var user = this;
  var userModel = this.constructor;
  var registry = userModel.registry;
  var pkName = userModel.definition.idName() || 'id';
  assert(typeof options === 'object', 'options required when calling user.verify()');
  assert(options.type, 'You must supply a verification type (options.type)');
  assert(options.type === 'email', 'Unsupported verification type');
  assert(options.to || this.email,
    'Must include options.to when calling user.verify() ' +
    'or the user must have an email property');
  assert(options.from, 'Must include options.from when calling user.verify()');

  options.redirect = options.redirect || '/';
  var defaultTemplate = path.join(__dirname, '..', '..', 'templates', 'verify.ejs');
  options.template = path.resolve(options.template || defaultTemplate);
  options.user = this;
  options.protocol = options.protocol || 'http';

  var app = userModel.app;
  options.host = options.host || (app && app.get('host')) || 'localhost';
  options.port = options.port || (app && app.get('port')) || 3000;
  options.restApiRoot = options.restApiRoot || (app && app.get('restApiRoot')) || '/api';

  var displayPort = (
    (options.protocol === 'http' && options.port == '80') ||
    (options.protocol === 'https' && options.port == '443')
  ) ? '' : ':' + options.port;

  var urlPath = joinUrlPath(
    options.restApiRoot,
    userModel.http.path,
    userModel.sharedClass.findMethodByName('confirm').http.path
  );

  options.verifyHref = options.verifyHref ||
    options.protocol +
    '://' +
    options.host +
    displayPort +
    urlPath +
    '?' + qs.stringify({
      uid: '' + options.user[pkName],
      redirect: options.redirect,
    });

  options.templateFn = options.templateFn || createVerificationEmailBody;

  // Email model
  var Email =
    options.mailer || this.constructor.email || registry.getModelByType(loopback.Email);

  // Set a default token generation function if one is not provided
  var tokenGenerator = options.generateVerificationToken || User.generateVerificationToken;
  assert(typeof tokenGenerator === 'function', 'generateVerificationToken must be a function');

  tokenGenerator(user, function(err, token) {
    if (err) { return fn(err); }

    user.verificationToken = token;
    user.save(function(err) {
      if (err) {
        fn(err);
      } else {
        sendEmail(user);
      }
    });
  });

  // TODO - support more verification types
  function sendEmail(user) {
    options.verifyHref += '&token=' + user.verificationToken;

    options.verificationToken = user.verificationToken;

    options.text = options.text || g.f('Please verify your email by opening ' +
      'this link in a web browser:\n\t%s', options.verifyHref);

    options.text = options.text.replace(/\{href\}/g, options.verifyHref);

    options.to = options.to || user.email;

    options.subject = options.subject || g.f('Thanks for Registering');

    options.headers = options.headers || {};

    options.templateFn(options, function(err, html) {
      if (err) {
        fn(err);
      } else {
        setHtmlContentAndSend(html);
      }
    });

    function setHtmlContentAndSend(html) {
      options.html = html;

      // Remove options.template to prevent rejection by certain
      // nodemailer transport plugins.
      delete options.template;

      Email.send(options, function(err, email) {
        if (err) {
          fn(err);
        } else {
          fn(null, {email: email, token: user.verificationToken, uid: user[pkName]});
        }
      });
    }
  }
  return fn.promise;
}
```
- example usage
```shell
n/a
```



# <a name="apidoc.module.loopback.User.setter"></a>[module loopback.User.setter](#apidoc.module.loopback.User.setter)

#### <a name="apidoc.element.loopback.User.setter.email"></a>[function <span class="apidocSignatureSpan">loopback.User.setter.</span>email (value)](#apidoc.element.loopback.User.setter.email)
- description and source-code
```javascript
email = function (value) {
  if (!UserModel.settings.caseSensitiveEmail) {
    this.$email = value.toLowerCase();
  } else {
    this.$email = value;
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.User.setter.password"></a>[function <span class="apidocSignatureSpan">loopback.User.setter.</span>password (plain)](#apidoc.element.loopback.User.setter.password)
- description and source-code
```javascript
password = function (plain) {
  if (typeof plain !== 'string') {
    return;
  }
  if (plain.indexOf('$2a$') === 0 && plain.length === 60) {
    // The password is already hashed. It can be the case
    // when the instance is loaded from DB
    this.$password = plain;
  } else {
    this.$password = this.constructor.hashPassword(plain);
  }
}
```
- example usage
```shell
n/a
```



# <a name="apidoc.module.loopback.User.settings"></a>[module loopback.User.settings](#apidoc.module.loopback.User.settings)

#### <a name="apidoc.element.loopback.User.settings.base"></a>[function <span class="apidocSignatureSpan">loopback.User.settings.</span>base (data, options)](#apidoc.element.loopback.User.settings.base)
- description and source-code
```javascript
function ModelConstructor(data, options) {
  if (!(this instanceof ModelConstructor)) {
    return new ModelConstructor(data, options);
  }
  if (ModelClass.settings.unresolved) {
    throw new Error(g.f('Model %s is not defined.', ModelClass.modelName));
  }
  ModelBaseClass.apply(this, arguments);
}
```
- example usage
```shell
n/a
```



# <a name="apidoc.module.loopback.User.sharedClass"></a>[module loopback.User.sharedClass](#apidoc.module.loopback.User.sharedClass)

#### <a name="apidoc.element.loopback.User.sharedClass.ctor"></a>[function <span class="apidocSignatureSpan">loopback.User.sharedClass.</span>ctor (data, options)](#apidoc.element.loopback.User.sharedClass.ctor)
- description and source-code
```javascript
function ModelConstructor(data, options) {
  if (!(this instanceof ModelConstructor)) {
    return new ModelConstructor(data, options);
  }
  if (ModelClass.settings.unresolved) {
    throw new Error(g.f('Model %s is not defined.', ModelClass.modelName));
  }
  ModelBaseClass.apply(this, arguments);
}
```
- example usage
```shell
n/a
```



# <a name="apidoc.module.loopback.ValidationError"></a>[module loopback.ValidationError](#apidoc.module.loopback.ValidationError)

#### <a name="apidoc.element.loopback.ValidationError.ValidationError"></a>[function <span class="apidocSignatureSpan">loopback.</span>ValidationError (obj)](#apidoc.element.loopback.ValidationError.ValidationError)
- description and source-code
```javascript
function ValidationError(obj) {
  if (!(this instanceof ValidationError)) return new ValidationError(obj);

  this.name = 'ValidationError';

  var context = obj && obj.constructor && obj.constructor.modelName;
  this.message = g.f(
    'The %s instance is not valid. Details: %s.',
      context ? ''' + context + ''' : 'model',
      formatErrors(obj.errors, obj.toJSON()) || '(unknown)'
  );

  this.statusCode = 422;

  this.details = {
    context: context,
    codes: obj.errors && obj.errors.codes,
    messages: obj.errors,
  };

  if (Error.captureStackTrace) {
    // V8 (Chrome, Opera, Node)
    Error.captureStackTrace(this, this.constructor);
  } else if (errorHasStackProperty) {
    // Firefox
    this.stack = (new Error).stack;
  }
  // Safari and PhantomJS initializes 'error.stack' on throw
  // Internet Explorer does not support 'error.stack'
}
```
- example usage
```shell
...
  return save();
}

inst.isValid(function(valid) {
  if (valid) {
    save();
  } else {
    var err = new Model.ValidationError(inst);
    // throws option is dangerous for async usage
    if (options.throws) {
      throw err;
    }
    callback(err, inst);
  }
});
...
```

#### <a name="apidoc.element.loopback.ValidationError.super_"></a>[function <span class="apidocSignatureSpan">loopback.ValidationError.</span>super_ ()](#apidoc.element.loopback.ValidationError.super_)
- description and source-code
```javascript
function Error() { [native code] }
```
- example usage
```shell
n/a
```



# <a name="apidoc.module.loopback.ValidationError.super_"></a>[module loopback.ValidationError.super_](#apidoc.module.loopback.ValidationError.super_)

#### <a name="apidoc.element.loopback.ValidationError.super_.super_"></a>[function <span class="apidocSignatureSpan">loopback.ValidationError.</span>super_ ()](#apidoc.element.loopback.ValidationError.super_.super_)
- description and source-code
```javascript
function Error() { [native code] }
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.ValidationError.super_.captureStackTrace"></a>[function <span class="apidocSignatureSpan">loopback.ValidationError.super_.</span>captureStackTrace ()](#apidoc.element.loopback.ValidationError.super_.captureStackTrace)
- description and source-code
```javascript
function captureStackTrace() { [native code] }
```
- example usage
```shell
n/a
```



# <a name="apidoc.module.loopback.access_context"></a>[module loopback.access_context](#apidoc.module.loopback.access_context)

#### <a name="apidoc.element.loopback.access_context.AccessContext"></a>[function <span class="apidocSignatureSpan">loopback.access_context.</span>AccessContext (context)](#apidoc.element.loopback.access_context.AccessContext)
- description and source-code
```javascript
function AccessContext(context) {
  if (!(this instanceof AccessContext)) {
    return new AccessContext(context);
  }
  context = context || {};

  assert(context.registry,
    'Application registry is mandatory in AccessContext but missing in provided context');
  this.registry = context.registry;
  this.principals = context.principals || [];
  var model = context.model;
  model = ('string' === typeof model) ? this.registry.getModel(model) : model;
  this.model = model;
  this.modelName = model && model.modelName;

  this.modelId = context.id || context.modelId;
  this.property = context.property || AccessContext.ALL;

  this.method = context.method;
  this.sharedMethod = context.sharedMethod;
  this.sharedClass = this.sharedMethod && this.sharedMethod.sharedClass;
  if (this.sharedMethod) {
    this.methodNames = this.sharedMethod.aliases.concat([this.sharedMethod.name]);
  } else {
    this.methodNames = [];
  }

  if (this.sharedMethod) {
    this.accessType = this.model._getAccessTypeForMethod(this.sharedMethod);
  }

  this.accessType = context.accessType || AccessContext.ALL;
  assert(loopback.AccessToken,
    'AccessToken model must be defined before AccessContext model');
  this.accessToken = context.accessToken || loopback.AccessToken.ANONYMOUS;

  var principalType = context.principalType || Principal.USER;
  var principalId = context.principalId || undefined;
  var principalName = context.principalName || undefined;

  if (principalId) {
    this.addPrincipal(principalType, principalId, principalName);
  }

  var token = this.accessToken || {};

  if (token.userId) {
    this.addPrincipal(Principal.USER, token.userId);
  }
  if (token.appId) {
    this.addPrincipal(Principal.APPLICATION, token.appId);
  }
  this.remotingContext = context.remotingContext;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.access_context.AccessRequest"></a>[function <span class="apidocSignatureSpan">loopback.access_context.</span>AccessRequest (model, property, accessType, permission, methodNames, registry)](#apidoc.element.loopback.access_context.AccessRequest)
- description and source-code
```javascript
function AccessRequest(model, property, accessType, permission, methodNames, registry) {
  if (!(this instanceof AccessRequest)) {
    return new AccessRequest(model, property, accessType, permission, methodNames);
  }
  if (arguments.length === 1 && typeof model === 'object') {
    // The argument is an object that contains all required properties
    var obj = model || {};
    this.model = obj.model || AccessContext.ALL;
    this.property = obj.property || AccessContext.ALL;
    this.accessType = obj.accessType || AccessContext.ALL;
    this.permission = obj.permission || AccessContext.DEFAULT;
    this.methodNames = obj.methodNames || [];
    this.registry = obj.registry;
  } else {
    this.model = model || AccessContext.ALL;
    this.property = property || AccessContext.ALL;
    this.accessType = accessType || AccessContext.ALL;
    this.permission = permission || AccessContext.DEFAULT;
    this.methodNames = methodNames || [];
    this.registry = registry;
  }
  // do not create AccessRequest without a registry
  assert(this.registry,
    'Application registry is mandatory in AccessRequest but missing in provided argument(s)');
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.access_context.Principal"></a>[function <span class="apidocSignatureSpan">loopback.access_context.</span>Principal (type, id, name)](#apidoc.element.loopback.access_context.Principal)
- description and source-code
```javascript
function Principal(type, id, name) {
  if (!(this instanceof Principal)) {
    return new Principal(type, id, name);
  }
  this.type = type;
  this.id = id;
  this.name = name;
}
```
- example usage
```shell
n/a
```



# <a name="apidoc.module.loopback.application"></a>[module loopback.application](#apidoc.module.loopback.application)

#### <a name="apidoc.element.loopback.application.acl"></a>[function <span class="apidocSignatureSpan">loopback.application.</span>acl (path)](#apidoc.element.loopback.application.acl)
- description and source-code
```javascript
acl = function (path){
  if (method === 'get' && arguments.length === 1) {
    // app.get(setting)
    return this.set(path);
  }

  this.lazyrouter();

  var route = this._router.route(path);
  route[method].apply(route, slice.call(arguments, 1));
  return this;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.application.all"></a>[function <span class="apidocSignatureSpan">loopback.application.</span>all (path)](#apidoc.element.loopback.application.all)
- description and source-code
```javascript
function all(path) {
  this.lazyrouter();

  var route = this._router.route(path);
  var args = slice.call(arguments, 1);

  for (var i = 0; i < methods.length; i++) {
    route[methods[i]].apply(route, args);
  }

  return this;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.application.bind"></a>[function <span class="apidocSignatureSpan">loopback.application.</span>bind (path)](#apidoc.element.loopback.application.bind)
- description and source-code
```javascript
bind = function (path){
  if (method === 'get' && arguments.length === 1) {
    // app.get(setting)
    return this.set(path);
  }

  this.lazyrouter();

  var route = this._router.route(path);
  route[method].apply(route, slice.call(arguments, 1));
  return this;
}
```
- example usage
```shell
...
  accepts: [
    {arg: 'refresh', type: 'boolean', http: {source: 'query'}},
    {arg: 'options', type: 'object', http: 'optionsFromRequest'},
  ],
  description: format('Fetches hasOne relation %s.', relationName),
  accessType: 'READ',
  returns: {arg: relationName, type: relation.modelTo.modelName, root: true},
  rest: {after: convertNullToNotFoundError.bind(null, toModelName)},
});

define('__create__' + relationName, {
  isStatic: false,
  http: {verb: 'post', path: '/' + pathName},
  accepts: [
    {
...
```

#### <a name="apidoc.element.loopback.application.checkout"></a>[function <span class="apidocSignatureSpan">loopback.application.</span>checkout (path)](#apidoc.element.loopback.application.checkout)
- description and source-code
```javascript
checkout = function (path){
  if (method === 'get' && arguments.length === 1) {
    // app.get(setting)
    return this.set(path);
  }

  this.lazyrouter();

  var route = this._router.route(path);
  route[method].apply(route, slice.call(arguments, 1));
  return this;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.application.connect"></a>[function <span class="apidocSignatureSpan">loopback.application.</span>connect (path)](#apidoc.element.loopback.application.connect)
- description and source-code
```javascript
connect = function (path){
  if (method === 'get' && arguments.length === 1) {
    // app.get(setting)
    return this.set(path);
  }

  this.lazyrouter();

  var route = this._router.route(path);
  route[method].apply(route, slice.call(arguments, 1));
  return this;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.application.copy"></a>[function <span class="apidocSignatureSpan">loopback.application.</span>copy (path)](#apidoc.element.loopback.application.copy)
- description and source-code
```javascript
copy = function (path){
  if (method === 'get' && arguments.length === 1) {
    // app.get(setting)
    return this.set(path);
  }

  this.lazyrouter();

  var route = this._router.route(path);
  route[method].apply(route, slice.call(arguments, 1));
  return this;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.application.defaultConfiguration"></a>[function <span class="apidocSignatureSpan">loopback.application.</span>defaultConfiguration ()](#apidoc.element.loopback.application.defaultConfiguration)
- description and source-code
```javascript
function defaultConfiguration() {
  var env = process.env.NODE_ENV || 'development';

  // default settings
  this.enable('x-powered-by');
  this.set('etag', 'weak');
  this.set('env', env);
  this.set('query parser', 'extended');
  this.set('subdomain offset', 2);
  this.set('trust proxy', false);

  // trust proxy inherit back-compat
  Object.defineProperty(this.settings, trustProxyDefaultSymbol, {
    configurable: true,
    value: true
  });

  debug('booting in %s mode', env);

  this.on('mount', function onmount(parent) {
    // inherit trust proxy
    if (this.settings[trustProxyDefaultSymbol] === true
      && typeof parent.settings['trust proxy fn'] === 'function') {
      delete this.settings['trust proxy'];
      delete this.settings['trust proxy fn'];
    }

    // inherit protos
    setPrototyeOf(this.request, parent.request)
    setPrototyeOf(this.response, parent.response)
    setPrototyeOf(this.engines, parent.engines)
    setPrototyeOf(this.settings, parent.settings)
  });

  // setup locals
  this.locals = Object.create(null);

  // top-most app is mounted at /
  this.mountpath = '/';

  // default locals
  this.locals.settings = this.settings;

  // default configuration
  this.set('view', View);
  this.set('views', resolve('views'));
  this.set('jsonp callback name', 'callback');

  if (env === 'production') {
    this.enable('view cache');
  }

  Object.defineProperty(this, 'router', {
    get: function() {
      throw new Error('\'app.router\' is deprecated!\nPlease see the 3.x to 4.x migration guide for details on how to update your
 app.');
    }
  });
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.application.del"></a>[function <span class="apidocSignatureSpan">loopback.application.</span>del (arg0)](#apidoc.element.loopback.application.del)
- description and source-code
```javascript
del = function (arg0) {
"use strict"
log.call(deprecate, message, site)
return fn.apply(this, arguments)
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.application.delete"></a>[function <span class="apidocSignatureSpan">loopback.application.</span>delete (path)](#apidoc.element.loopback.application.delete)
- description and source-code
```javascript
delete = function (path){
  if (method === 'get' && arguments.length === 1) {
    // app.get(setting)
    return this.set(path);
  }

  this.lazyrouter();

  var route = this._router.route(path);
  route[method].apply(route, slice.call(arguments, 1));
  return this;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.application.disable"></a>[function <span class="apidocSignatureSpan">loopback.application.</span>disable (setting)](#apidoc.element.loopback.application.disable)
- description and source-code
```javascript
function disable(setting) {
  return this.set(setting, false);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.application.disabled"></a>[function <span class="apidocSignatureSpan">loopback.application.</span>disabled (setting)](#apidoc.element.loopback.application.disabled)
- description and source-code
```javascript
function disabled(setting) {
  return !this.set(setting);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.application.enable"></a>[function <span class="apidocSignatureSpan">loopback.application.</span>enable (setting)](#apidoc.element.loopback.application.enable)
- description and source-code
```javascript
function enable(setting) {
  return this.set(setting, true);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.application.enabled"></a>[function <span class="apidocSignatureSpan">loopback.application.</span>enabled (setting)](#apidoc.element.loopback.application.enabled)
- description and source-code
```javascript
function enabled(setting) {
  return Boolean(this.set(setting));
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.application.engine"></a>[function <span class="apidocSignatureSpan">loopback.application.</span>engine (ext, fn)](#apidoc.element.loopback.application.engine)
- description and source-code
```javascript
function engine(ext, fn) {
  if (typeof fn !== 'function') {
    throw new Error('callback function required');
  }

  // get file extension
  var extension = ext[0] !== '.'
    ? '.' + ext
    : ext;

  // store engine
  this.engines[extension] = fn;

  return this;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.application.get"></a>[function <span class="apidocSignatureSpan">loopback.application.</span>get (path)](#apidoc.element.loopback.application.get)
- description and source-code
```javascript
get = function (path){
  if (method === 'get' && arguments.length === 1) {
    // app.get(setting)
    return this.set(path);
  }

  this.lazyrouter();

  var route = this._router.route(path);
  route[method].apply(route, slice.call(arguments, 1));
  return this;
}
```
- example usage
```shell
...
* supports Express middleware. See
* [Express documentation](http://expressjs.com/) for details.
*
* '''js
* var loopback = require('loopback');
* var app = loopback();
*
* app.get('/', function(req, res){
*   res.send('hello world');
* });
*
* app.listen(3000);
* '''
*
* @class LoopBackApplication
...
```

#### <a name="apidoc.element.loopback.application.handle"></a>[function <span class="apidocSignatureSpan">loopback.application.</span>handle (req, res, callback)](#apidoc.element.loopback.application.handle)
- description and source-code
```javascript
function handle(req, res, callback) {
  var router = this._router;

  // final handler
  var done = callback || finalhandler(req, res, {
    env: this.get('env'),
    onerror: logerror.bind(this)
  });

  // no routes
  if (!router) {
    debug('no routes defined on app');
    done();
    return;
  }

  router.handle(req, res, done);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.application.head"></a>[function <span class="apidocSignatureSpan">loopback.application.</span>head (path)](#apidoc.element.loopback.application.head)
- description and source-code
```javascript
head = function (path){
  if (method === 'get' && arguments.length === 1) {
    // app.get(setting)
    return this.set(path);
  }

  this.lazyrouter();

  var route = this._router.route(path);
  route[method].apply(route, slice.call(arguments, 1));
  return this;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.application.init"></a>[function <span class="apidocSignatureSpan">loopback.application.</span>init ()](#apidoc.element.loopback.application.init)
- description and source-code
```javascript
function init() {
  this.cache = {};
  this.engines = {};
  this.settings = {};

  this.defaultConfiguration();
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.application.lazyrouter"></a>[function <span class="apidocSignatureSpan">loopback.application.</span>lazyrouter ()](#apidoc.element.loopback.application.lazyrouter)
- description and source-code
```javascript
function lazyrouter() {
  if (!this._router) {
    this._router = new Router({
      caseSensitive: this.enabled('case sensitive routing'),
      strict: this.enabled('strict routing')
    });

    this._router.use(query(this.get('query parser fn')));
    this._router.use(middleware.init(this));
  }
}
```
- example usage
```shell
...
 *   names to add.
 *
 * @returns {object} this (fluent API)
 *
 * @header app.defineMiddlewarePhases(nameOrArray)
 */
proto.defineMiddlewarePhases = function(nameOrArray) {
this.lazyrouter();

if (Array.isArray(nameOrArray)) {
  this._requestHandlingPhases =
    mergePhaseNameLists(this._requestHandlingPhases, nameOrArray);
} else {
  // add the new phase before 'routes'
  var routesIx = this._requestHandlingPhases.indexOf('routes');
...
```

#### <a name="apidoc.element.loopback.application.link"></a>[function <span class="apidocSignatureSpan">loopback.application.</span>link (path)](#apidoc.element.loopback.application.link)
- description and source-code
```javascript
link = function (path){
  if (method === 'get' && arguments.length === 1) {
    // app.get(setting)
    return this.set(path);
  }

  this.lazyrouter();

  var route = this._router.route(path);
  route[method].apply(route, slice.call(arguments, 1));
  return this;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.application.listen"></a>[function <span class="apidocSignatureSpan">loopback.application.</span>listen ()](#apidoc.element.loopback.application.listen)
- description and source-code
```javascript
function listen() {
  var server = http.createServer(this);
  return server.listen.apply(server, arguments);
}
```
- example usage
```shell
...
grunt.loadNpmTasks('grunt-eslint');
grunt.loadNpmTasks('grunt-contrib-watch');
grunt.loadNpmTasks('grunt-karma');

grunt.registerTask('e2e-server', function() {
  var done = this.async();
  var app = require('./test/fixtures/e2e/app');
  app.listen(0, function() {
    process.env.PORT = this.address().port;
    done();
  });
});

grunt.registerTask('skip-karma-on-windows', function() {
  console.log('*** SKIPPING PHANTOM-JS BASED TESTS ON WINDOWS ***');
...
```

#### <a name="apidoc.element.loopback.application.lock"></a>[function <span class="apidocSignatureSpan">loopback.application.</span>lock (path)](#apidoc.element.loopback.application.lock)
- description and source-code
```javascript
lock = function (path){
  if (method === 'get' && arguments.length === 1) {
    // app.get(setting)
    return this.set(path);
  }

  this.lazyrouter();

  var route = this._router.route(path);
  route[method].apply(route, slice.call(arguments, 1));
  return this;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.application.m-search"></a>[function <span class="apidocSignatureSpan">loopback.application.</span>m-search (path)](#apidoc.element.loopback.application.m-search)
- description and source-code
```javascript
m-search = function (path){
  if (method === 'get' && arguments.length === 1) {
    // app.get(setting)
    return this.set(path);
  }

  this.lazyrouter();

  var route = this._router.route(path);
  route[method].apply(route, slice.call(arguments, 1));
  return this;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.application.merge"></a>[function <span class="apidocSignatureSpan">loopback.application.</span>merge (path)](#apidoc.element.loopback.application.merge)
- description and source-code
```javascript
merge = function (path){
  if (method === 'get' && arguments.length === 1) {
    // app.get(setting)
    return this.set(path);
  }

  this.lazyrouter();

  var route = this._router.route(path);
  route[method].apply(route, slice.call(arguments, 1));
  return this;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.application.mkactivity"></a>[function <span class="apidocSignatureSpan">loopback.application.</span>mkactivity (path)](#apidoc.element.loopback.application.mkactivity)
- description and source-code
```javascript
mkactivity = function (path){
  if (method === 'get' && arguments.length === 1) {
    // app.get(setting)
    return this.set(path);
  }

  this.lazyrouter();

  var route = this._router.route(path);
  route[method].apply(route, slice.call(arguments, 1));
  return this;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.application.mkcalendar"></a>[function <span class="apidocSignatureSpan">loopback.application.</span>mkcalendar (path)](#apidoc.element.loopback.application.mkcalendar)
- description and source-code
```javascript
mkcalendar = function (path){
  if (method === 'get' && arguments.length === 1) {
    // app.get(setting)
    return this.set(path);
  }

  this.lazyrouter();

  var route = this._router.route(path);
  route[method].apply(route, slice.call(arguments, 1));
  return this;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.application.mkcol"></a>[function <span class="apidocSignatureSpan">loopback.application.</span>mkcol (path)](#apidoc.element.loopback.application.mkcol)
- description and source-code
```javascript
mkcol = function (path){
  if (method === 'get' && arguments.length === 1) {
    // app.get(setting)
    return this.set(path);
  }

  this.lazyrouter();

  var route = this._router.route(path);
  route[method].apply(route, slice.call(arguments, 1));
  return this;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.application.move"></a>[function <span class="apidocSignatureSpan">loopback.application.</span>move (path)](#apidoc.element.loopback.application.move)
- description and source-code
```javascript
move = function (path){
  if (method === 'get' && arguments.length === 1) {
    // app.get(setting)
    return this.set(path);
  }

  this.lazyrouter();

  var route = this._router.route(path);
  route[method].apply(route, slice.call(arguments, 1));
  return this;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.application.notify"></a>[function <span class="apidocSignatureSpan">loopback.application.</span>notify (path)](#apidoc.element.loopback.application.notify)
- description and source-code
```javascript
notify = function (path){
  if (method === 'get' && arguments.length === 1) {
    // app.get(setting)
    return this.set(path);
  }

  this.lazyrouter();

  var route = this._router.route(path);
  route[method].apply(route, slice.call(arguments, 1));
  return this;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.application.options"></a>[function <span class="apidocSignatureSpan">loopback.application.</span>options (path)](#apidoc.element.loopback.application.options)
- description and source-code
```javascript
options = function (path){
  if (method === 'get' && arguments.length === 1) {
    // app.get(setting)
    return this.set(path);
  }

  this.lazyrouter();

  var route = this._router.route(path);
  route[method].apply(route, slice.call(arguments, 1));
  return this;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.application.param"></a>[function <span class="apidocSignatureSpan">loopback.application.</span>param (name, fn)](#apidoc.element.loopback.application.param)
- description and source-code
```javascript
function param(name, fn) {
  this.lazyrouter();

  if (Array.isArray(name)) {
    for (var i = 0; i < name.length; i++) {
      this.param(name[i], fn);
    }

    return this;
  }

  this._router.param(name, fn);

  return this;
}
```
- example usage
```shell
...
  remotes.authorization = function(ctx, next) {
var method = ctx.method;
var req = ctx.req;
var Model = method.ctor;
var modelInstance = ctx.instance;

var modelId = modelInstance && modelInstance.id ||
  // replacement for deprecated req.param()
  (req.params && req.params.id !== undefined ? req.params.id :
   req.body && req.body.id !== undefined ? req.body.id :
   req.query && req.query.id !== undefined ? req.query.id :
   undefined);

var modelName = Model.modelName;
...
```

#### <a name="apidoc.element.loopback.application.patch"></a>[function <span class="apidocSignatureSpan">loopback.application.</span>patch (path)](#apidoc.element.loopback.application.patch)
- description and source-code
```javascript
patch = function (path){
  if (method === 'get' && arguments.length === 1) {
    // app.get(setting)
    return this.set(path);
  }

  this.lazyrouter();

  var route = this._router.route(path);
  route[method].apply(route, slice.call(arguments, 1));
  return this;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.application.path"></a>[function <span class="apidocSignatureSpan">loopback.application.</span>path ()](#apidoc.element.loopback.application.path)
- description and source-code
```javascript
function path() {
  return this.parent
    ? this.parent.path() + this.mountpath
    : '';
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.application.post"></a>[function <span class="apidocSignatureSpan">loopback.application.</span>post (path)](#apidoc.element.loopback.application.post)
- description and source-code
```javascript
post = function (path){
  if (method === 'get' && arguments.length === 1) {
    // app.get(setting)
    return this.set(path);
  }

  this.lazyrouter();

  var route = this._router.route(path);
  route[method].apply(route, slice.call(arguments, 1));
  return this;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.application.propfind"></a>[function <span class="apidocSignatureSpan">loopback.application.</span>propfind (path)](#apidoc.element.loopback.application.propfind)
- description and source-code
```javascript
propfind = function (path){
  if (method === 'get' && arguments.length === 1) {
    // app.get(setting)
    return this.set(path);
  }

  this.lazyrouter();

  var route = this._router.route(path);
  route[method].apply(route, slice.call(arguments, 1));
  return this;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.application.proppatch"></a>[function <span class="apidocSignatureSpan">loopback.application.</span>proppatch (path)](#apidoc.element.loopback.application.proppatch)
- description and source-code
```javascript
proppatch = function (path){
  if (method === 'get' && arguments.length === 1) {
    // app.get(setting)
    return this.set(path);
  }

  this.lazyrouter();

  var route = this._router.route(path);
  route[method].apply(route, slice.call(arguments, 1));
  return this;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.application.purge"></a>[function <span class="apidocSignatureSpan">loopback.application.</span>purge (path)](#apidoc.element.loopback.application.purge)
- description and source-code
```javascript
purge = function (path){
  if (method === 'get' && arguments.length === 1) {
    // app.get(setting)
    return this.set(path);
  }

  this.lazyrouter();

  var route = this._router.route(path);
  route[method].apply(route, slice.call(arguments, 1));
  return this;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.application.put"></a>[function <span class="apidocSignatureSpan">loopback.application.</span>put (path)](#apidoc.element.loopback.application.put)
- description and source-code
```javascript
put = function (path){
  if (method === 'get' && arguments.length === 1) {
    // app.get(setting)
    return this.set(path);
  }

  this.lazyrouter();

  var route = this._router.route(path);
  route[method].apply(route, slice.call(arguments, 1));
  return this;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.application.rebind"></a>[function <span class="apidocSignatureSpan">loopback.application.</span>rebind (path)](#apidoc.element.loopback.application.rebind)
- description and source-code
```javascript
rebind = function (path){
  if (method === 'get' && arguments.length === 1) {
    // app.get(setting)
    return this.set(path);
  }

  this.lazyrouter();

  var route = this._router.route(path);
  route[method].apply(route, slice.call(arguments, 1));
  return this;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.application.render"></a>[function <span class="apidocSignatureSpan">loopback.application.</span>render (name, options, callback)](#apidoc.element.loopback.application.render)
- description and source-code
```javascript
function render(name, options, callback) {
  var cache = this.cache;
  var done = callback;
  var engines = this.engines;
  var opts = options;
  var renderOptions = {};
  var view;

  // support callback function as second arg
  if (typeof options === 'function') {
    done = options;
    opts = {};
  }

  // merge app.locals
  merge(renderOptions, this.locals);

  // merge options._locals
  if (opts._locals) {
    merge(renderOptions, opts._locals);
  }

  // merge options
  merge(renderOptions, opts);

  // set .cache unless explicitly provided
  if (renderOptions.cache == null) {
    renderOptions.cache = this.enabled('view cache');
  }

  // primed cache
  if (renderOptions.cache) {
    view = cache[name];
  }

  // view
  if (!view) {
    var View = this.get('view');

    view = new View(name, {
      defaultEngine: this.get('view engine'),
      root: this.get('views'),
      engines: engines
    });

    if (!view.path) {
      var dirs = Array.isArray(view.root) && view.root.length > 1
        ? 'directories "' + view.root.slice(0, -1).join('", "') + '" or "' + view.root[view.root.length - 1] + '"'
        : 'directory "' + view.root + '"'
      var err = new Error('Failed to lookup view "' + name + '" in views ' + dirs);
      err.view = view;
      return done(err);
    }

    // prime the cache
    if (renderOptions.cache) {
      cache[name] = view;
    }
  }

  // render
  tryRender(view, renderOptions, done);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.application.report"></a>[function <span class="apidocSignatureSpan">loopback.application.</span>report (path)](#apidoc.element.loopback.application.report)
- description and source-code
```javascript
report = function (path){
  if (method === 'get' && arguments.length === 1) {
    // app.get(setting)
    return this.set(path);
  }

  this.lazyrouter();

  var route = this._router.route(path);
  route[method].apply(route, slice.call(arguments, 1));
  return this;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.application.route"></a>[function <span class="apidocSignatureSpan">loopback.application.</span>route (path)](#apidoc.element.loopback.application.route)
- description and source-code
```javascript
function route(path) {
  this.lazyrouter();
  return this._router.route(path);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.application.search"></a>[function <span class="apidocSignatureSpan">loopback.application.</span>search (path)](#apidoc.element.loopback.application.search)
- description and source-code
```javascript
search = function (path){
  if (method === 'get' && arguments.length === 1) {
    // app.get(setting)
    return this.set(path);
  }

  this.lazyrouter();

  var route = this._router.route(path);
  route[method].apply(route, slice.call(arguments, 1));
  return this;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.application.set"></a>[function <span class="apidocSignatureSpan">loopback.application.</span>set (setting, val)](#apidoc.element.loopback.application.set)
- description and source-code
```javascript
function set(setting, val) {
  if (arguments.length === 1) {
    // app.get(setting)
    return this.settings[setting];
  }

  debug('set "%s" to %o', setting, val);

  // set value
  this.settings[setting] = val;

  // trigger matched settings
  switch (setting) {
    case 'etag':
      this.set('etag fn', compileETag(val));
      break;
    case 'query parser':
      this.set('query parser fn', compileQueryParser(val));
      break;
    case 'trust proxy':
      this.set('trust proxy fn', compileTrust(val));

      // trust proxy inherit back-compat
      Object.defineProperty(this.settings, trustProxyDefaultSymbol, {
        configurable: true,
        value: false
      });

      break;
  }

  return this;
}
```
- example usage
```shell
...
*
* For example, to listen on the specified port and all hosts, and ignore app config.
* '''js
* app.listen(80);
* '''
*
* The function also installs a 'listening' callback that calls
* 'app.set('port')' with the value returned by 'server.address().port'.
* This way the port param contains always the real port number, even when
* listen was called with port number 0.
*
* @param {Function} [cb] If specified, the callback is added as a listener
*   for the server's "listening" event.
* @returns {http.Server} A node 'http.Server' with this application configured
*   as the request handler.
...
```

#### <a name="apidoc.element.loopback.application.subscribe"></a>[function <span class="apidocSignatureSpan">loopback.application.</span>subscribe (path)](#apidoc.element.loopback.application.subscribe)
- description and source-code
```javascript
subscribe = function (path){
  if (method === 'get' && arguments.length === 1) {
    // app.get(setting)
    return this.set(path);
  }

  this.lazyrouter();

  var route = this._router.route(path);
  route[method].apply(route, slice.call(arguments, 1));
  return this;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.application.trace"></a>[function <span class="apidocSignatureSpan">loopback.application.</span>trace (path)](#apidoc.element.loopback.application.trace)
- description and source-code
```javascript
trace = function (path){
  if (method === 'get' && arguments.length === 1) {
    // app.get(setting)
    return this.set(path);
  }

  this.lazyrouter();

  var route = this._router.route(path);
  route[method].apply(route, slice.call(arguments, 1));
  return this;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.application.unbind"></a>[function <span class="apidocSignatureSpan">loopback.application.</span>unbind (path)](#apidoc.element.loopback.application.unbind)
- description and source-code
```javascript
unbind = function (path){
  if (method === 'get' && arguments.length === 1) {
    // app.get(setting)
    return this.set(path);
  }

  this.lazyrouter();

  var route = this._router.route(path);
  route[method].apply(route, slice.call(arguments, 1));
  return this;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.application.unlink"></a>[function <span class="apidocSignatureSpan">loopback.application.</span>unlink (path)](#apidoc.element.loopback.application.unlink)
- description and source-code
```javascript
unlink = function (path){
  if (method === 'get' && arguments.length === 1) {
    // app.get(setting)
    return this.set(path);
  }

  this.lazyrouter();

  var route = this._router.route(path);
  route[method].apply(route, slice.call(arguments, 1));
  return this;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.application.unlock"></a>[function <span class="apidocSignatureSpan">loopback.application.</span>unlock (path)](#apidoc.element.loopback.application.unlock)
- description and source-code
```javascript
unlock = function (path){
  if (method === 'get' && arguments.length === 1) {
    // app.get(setting)
    return this.set(path);
  }

  this.lazyrouter();

  var route = this._router.route(path);
  route[method].apply(route, slice.call(arguments, 1));
  return this;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.application.unsubscribe"></a>[function <span class="apidocSignatureSpan">loopback.application.</span>unsubscribe (path)](#apidoc.element.loopback.application.unsubscribe)
- description and source-code
```javascript
unsubscribe = function (path){
  if (method === 'get' && arguments.length === 1) {
    // app.get(setting)
    return this.set(path);
  }

  this.lazyrouter();

  var route = this._router.route(path);
  route[method].apply(route, slice.call(arguments, 1));
  return this;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.application.use"></a>[function <span class="apidocSignatureSpan">loopback.application.</span>use (fn)](#apidoc.element.loopback.application.use)
- description and source-code
```javascript
function use(fn) {
  var offset = 0;
  var path = '/';

  // default path to '/'
  // disambiguate app.use([fn])
  if (typeof fn !== 'function') {
    var arg = fn;

    while (Array.isArray(arg) && arg.length !== 0) {
      arg = arg[0];
    }

    // first arg is the path
    if (typeof arg !== 'function') {
      offset = 1;
      path = fn;
    }
  }

  var fns = flatten(slice.call(arguments, offset));

  if (fns.length === 0) {
    throw new TypeError('app.use() requires middleware functions');
  }

  // setup router
  this.lazyrouter();
  var router = this._router;

  fns.forEach(function (fn) {
    // non-express app
    if (!fn || !fn.handle || !fn.set) {
      return router.use(path, fn);
    }

    debug('.use app under %s', path);
    fn.mountpath = path;
    fn.parent = this;

    // restore .app property on req and res
    router.use(path, function mounted_app(req, res, next) {
      var orig = req.app;
      fn.handle(req, res, function (err) {
        setPrototyeOf(req, orig.request)
        setPrototyeOf(res, orig.response)
        next(err);
      });
    });

    // mounted an app
    fn.emit('mount', this);
  }, this);

  return this;
}
```
- example usage
```shell
...

if (this._requestHandlingPhases.indexOf(name) === -1)
  throw new Error(g.f('Unknown {{middleware}} phase %s', name));

debug('use %s %s %s', fullPhaseName, paths, handlerName);

this._skipLayerSorting = true;
this.use(paths, handler);

var layer = this._findLayerByHandler(handler);
if (layer) {
  // Set the phase name for sorting
  layer.phase = fullPhaseName;
} else {
  debug('No matching layer is found for %s %s', fullPhaseName, handlerName);
...
```



# <a name="apidoc.module.loopback.registry"></a>[module loopback.registry](#apidoc.module.loopback.registry)

#### <a name="apidoc.element.loopback.registry.registry"></a>[function <span class="apidocSignatureSpan">loopback.</span>registry ()](#apidoc.element.loopback.registry.registry)
- description and source-code
```javascript
function Registry() {
  this.defaultDataSources = {};
  this.modelBuilder = new ModelBuilder();
  require('./model')(this);
  require('./persisted-model')(this);

  // Set the default model base class.
  this.modelBuilder.defaultModelBaseClass = this.getModel('Model');
}
```
- example usage
```shell
n/a
```



# <a name="apidoc.module.loopback.registry.prototype"></a>[module loopback.registry.prototype](#apidoc.module.loopback.registry.prototype)

#### <a name="apidoc.element.loopback.registry.prototype._defineRemoteMethods"></a>[function <span class="apidocSignatureSpan">loopback.registry.prototype.</span>_defineRemoteMethods (ModelCtor, methods)](#apidoc.element.loopback.registry.prototype._defineRemoteMethods)
- description and source-code
```javascript
_defineRemoteMethods = function (ModelCtor, methods) {
  if (!methods) return;
  if (typeof methods !== 'object') {
    g.warn('Ignoring non-object "methods" setting of "%s".',
      ModelCtor.modelName);
    return;
  }

  Object.keys(methods).forEach(function(key) {
    var meta = methods[key];
    var m = key.match(/^prototype\.(.*)$/);
    var isStatic = !m;

    if (typeof meta.isStatic !== 'boolean') {
      key = isStatic ? key : m[1];
      meta.isStatic = isStatic;
    } else if (meta.isStatic && m) {
      throw new Error(g.f('Remoting metadata for %s.%s {{"isStatic"}} does ' +
      'not match new method name-based style.', ModelCtor.modelName, key));
    } else {
      key = isStatic ? key : m[1];
      deprecated(g.f('Remoting metadata {{"isStatic"}} is deprecated. Please ' +
      'specify {{"prototype.name"}} in method name instead for {{isStatic=false}}.'));
    }
    ModelCtor.remoteMethod(key, meta);
  });
}
```
- example usage
```shell
...
  }
}

BaseModel = BaseModel || this.getModel('PersistedModel');
var model = BaseModel.extend(name, properties, options);
model.registry = this;

this._defineRemoteMethods(model, model.settings.methods);

return model;
};

function buildModelOptionsFromConfig(config) {
var options = extend({}, config.options);
for (var key in config) {
...
```

#### <a name="apidoc.element.loopback.registry.prototype.configureModel"></a>[function <span class="apidocSignatureSpan">loopback.registry.prototype.</span>configureModel (ModelCtor, config)](#apidoc.element.loopback.registry.prototype.configureModel)
- description and source-code
```javascript
configureModel = function (ModelCtor, config) {
  var settings = ModelCtor.settings;
  var modelName = ModelCtor.modelName;

  // Relations
  if (typeof config.relations === 'object' && config.relations !== null) {
    var relations = settings.relations = settings.relations || {};
    Object.keys(config.relations).forEach(function(key) {
      // FIXME: [rfeng] We probably should check if the relation exists
      relations[key] = extend(relations[key] || {}, config.relations[key]);
    });
  } else if (config.relations != null) {
    g.warn('The relations property of '%s' configuration ' +
      'must be an object', modelName);
  }

  // ACLs
  if (Array.isArray(config.acls)) {
    var acls = settings.acls = settings.acls || [];
    config.acls.forEach(function(acl) {
      addACL(acls, acl);
    });
  } else if (config.acls != null) {
    g.warn('The acls property of '%s' configuration ' +
      'must be an array of objects', modelName);
  }

  // Settings
  var excludedProperties = {
    base: true,
    'super': true,
    relations: true,
    acls: true,
    dataSource: true,
  };
  if (typeof config.options === 'object' && config.options !== null) {
    for (var p in config.options) {
      if (!(p in excludedProperties)) {
        settings[p] = config.options[p];
      } else {
        g.warn('Property '%s' cannot be reconfigured for '%s'',
          p, modelName);
      }
    }
  } else if (config.options != null) {
    g.warn('The options property of '%s' configuration ' +
      'must be an object', modelName);
  }

  // It's important to attach the datasource after we have updated
  // configuration, so that the datasource picks up updated relations
  if (config.dataSource) {
    assert(config.dataSource instanceof DataSource,
        'Cannot configure ' + ModelCtor.modelName +
        ': config.dataSource must be an instance of DataSource');
    ModelCtor.attachTo(config.dataSource);
    debug('Attached model '%s' to dataSource '%s'',
      modelName, config.dataSource.name);
  } else if (config.dataSource === null || config.dataSource === false) {
    debug('Model '%s' is not attached to any DataSource by configuration.',
      modelName);
  } else {
    debug('Model '%s' is not attached to any DataSource, possibly by a mistake.',
      modelName);
    g.warn(
      'The configuration of '%s' is missing {{'dataSource'}} property.\n' +
      'Use 'null' or 'false' to mark models not attached to any data source.',
      modelName);
  }

  var newMethodNames = config.methods && Object.keys(config.methods);
  var hasNewMethods = newMethodNames && newMethodNames.length;
  var hasDescendants = this.getModelByType(ModelCtor) !== ModelCtor;
  if (hasNewMethods && hasDescendants) {
    g.warn(
      'Child models of '%s' will not inherit newly defined remote methods %s.',
      modelName, newMethodNames);
  }

  // Remote methods
  this._defineRemoteMethods(ModelCtor, config.methods);
}
```
- example usage
```shell
...
}

config = extend({}, config);
config.dataSource = dataSource;

setSharedMethodSharedProperties(ModelCtor, app, config);

app.registry.configureModel(ModelCtor, config);
}

function setSharedMethodSharedProperties(model, app, modelConfigs) {
var settings = {};

// apply config.json settings
var config = app.get('remoting');
...
```

#### <a name="apidoc.element.loopback.registry.prototype.createDataSource"></a>[function <span class="apidocSignatureSpan">loopback.registry.prototype.</span>createDataSource (name, options)](#apidoc.element.loopback.registry.prototype.createDataSource)
- description and source-code
```javascript
createDataSource = function (name, options) {
  var self = this;

  var ds = new DataSource(name, options, self.modelBuilder);
  ds.createModel = function(name, properties, settings) {
    settings = settings || {};
    var BaseModel = settings.base || settings.super;
    if (!BaseModel) {
      // Check the connector types
      var connectorTypes = ds.getTypes();
      if (Array.isArray(connectorTypes) && connectorTypes.indexOf('db') !== -1) {
        // Only set up the base model to PersistedModel if the connector is DB
        BaseModel = self.PersistedModel;
      } else {
        BaseModel = self.Model;
      }
      settings.base = BaseModel;
    }
    var ModelCtor = self.createModel(name, properties, settings);
    ModelCtor.attachTo(ds);
    return ModelCtor;
  };

  if (ds.settings && ds.settings.defaultForType) {
    var msg = g.f('{{DataSource}} option {{"defaultForType"}} is no longer supported');
    throw new Error(msg);
  }

  return ds;
}
```
- example usage
```shell
...
      config.connector = require(connectorPath);
    }
  }
  if (config.connector && typeof config.connector === 'object' && !config.connector.name)
    config.connector.name = name;
}

return registry.createDataSource(config);
}

function configureModel(ModelCtor, config, app) {
assert(ModelCtor.prototype instanceof ModelCtor.registry.getModel('Model'),
  ModelCtor.modelName + ' must be a descendant of loopback.Model');

var dataSource = config.dataSource;
...
```

#### <a name="apidoc.element.loopback.registry.prototype.createModel"></a>[function <span class="apidocSignatureSpan">loopback.registry.prototype.</span>createModel (name, properties, options)](#apidoc.element.loopback.registry.prototype.createModel)
- description and source-code
```javascript
createModel = function (name, properties, options) {
  if (arguments.length === 1 && typeof name === 'object') {
    var config = name;
    name = config.name;
    properties = config.properties;
    options = buildModelOptionsFromConfig(config);

    assert(typeof name === 'string',
      'The model-config property 'name' must be a string');
  }

  options = options || {};
  var BaseModel = options.base || options.super;

  if (typeof BaseModel === 'string') {
    var baseName = BaseModel;
    BaseModel = this.findModel(BaseModel);
    if (!BaseModel) {
      throw new Error(g.f('Model not found: model '%s' is extending an unknown model '%s'.',
        name, baseName));
    }
  }

  BaseModel = BaseModel || this.getModel('PersistedModel');
  var model = BaseModel.extend(name, properties, options);
  model.registry = this;

  this._defineRemoteMethods(model, model.settings.methods);

  return model;
}
```
- example usage
```shell
...

app.model = function(Model, config) {
var isPublic = true;
var registry = this.registry;

if (typeof Model === 'string') {
  var msg = 'app.model(modelName, settings) is no longer supported. ' +
    'Use app.registry.createModel(modelName, definition) and ' +
    'app.model(ModelCtor, config) instead.';
  throw new Error(msg);
}

if (arguments.length > 1) {
  config = config || {};
  configureModel(Model, config, this);
...
```

#### <a name="apidoc.element.loopback.registry.prototype.findModel"></a>[function <span class="apidocSignatureSpan">loopback.registry.prototype.</span>findModel (modelName)](#apidoc.element.loopback.registry.prototype.findModel)
- description and source-code
```javascript
findModel = function (modelName) {
  if (typeof modelName === 'function') return modelName;
  return this.modelBuilder.models[modelName];
}
```
- example usage
```shell
...

    // the principalType must either be 'USER'
    if (p.type === Principal.USER) {
      return {id: p.id, principalType: p.type};
    }

    // or permit to resolve a valid user model
    var userModel = this.registry.findModel(p.type);
    if (!userModel) continue;
    if (userModel.prototype instanceof BaseUser) {
      return {id: p.id, principalType: p.type};
    }
  }
};
...
```

#### <a name="apidoc.element.loopback.registry.prototype.getModel"></a>[function <span class="apidocSignatureSpan">loopback.registry.prototype.</span>getModel (modelName)](#apidoc.element.loopback.registry.prototype.getModel)
- description and source-code
```javascript
getModel = function (modelName) {
  var model = this.findModel(modelName);
  if (model) return model;

  throw new Error(g.f('Model not found: %s', modelName));
}
```
- example usage
```shell
...
context = context || {};

assert(context.registry,
  'Application registry is mandatory in AccessContext but missing in provided context');
this.registry = context.registry;
this.principals = context.principals || [];
var model = context.model;
model = ('string' === typeof model) ? this.registry.getModel(model) : model;
this.model = model;
this.modelName = model && model.modelName;

this.modelId = context.id || context.modelId;
this.property = context.property || AccessContext.ALL;

this.method = context.method;
...
```

#### <a name="apidoc.element.loopback.registry.prototype.getModelByType"></a>[function <span class="apidocSignatureSpan">loopback.registry.prototype.</span>getModelByType (modelType)](#apidoc.element.loopback.registry.prototype.getModelByType)
- description and source-code
```javascript
getModelByType = function (modelType) {
  var type = typeof modelType;
  var accepted = ['function', 'string'];

  assert(accepted.indexOf(type) > -1,
    'The model type must be a constructor or model name');

  if (type === 'string') {
    modelType = this.getModel(modelType);
  }

  var models = this.modelBuilder.models;
  for (var m in models) {
    if (models[m].prototype instanceof modelType) {
      return models[m];
    }
  }
  return modelType;
}
```
- example usage
```shell
...
    // The function is used as a setter
    _aclModel = ACL;
  }
  if (_aclModel) {
    return _aclModel;
  }
  var aclModel = registry.getModel('ACL');
  _aclModel = registry.getModelByType(aclModel);
  return _aclModel;
};

/**
 * Check if the given access token can invoke the specified method.
 *
 * @param {AccessToken} token The access token.
...
```

#### <a name="apidoc.element.loopback.registry.prototype.memory"></a>[function <span class="apidocSignatureSpan">loopback.registry.prototype.</span>memory (name)](#apidoc.element.loopback.registry.prototype.memory)
- description and source-code
```javascript
memory = function (name) {
  name = name || 'default';
  var memory = (
    this._memoryDataSources || (this._memoryDataSources = {})
    )[name];

  if (!memory) {
    memory = this._memoryDataSources[name] = this.createDataSource({
      connector: 'memory',
    });
  }

  return memory;
}
```
- example usage
```shell
n/a
```



# <a name="apidoc.module.loopback.request"></a>[module loopback.request](#apidoc.module.loopback.request)

#### <a name="apidoc.element.loopback.request.accepts"></a>[function <span class="apidocSignatureSpan">loopback.request.</span>accepts ()](#apidoc.element.loopback.request.accepts)
- description and source-code
```javascript
accepts = function (){
  var accept = accepts(this);
  return accept.types.apply(accept, arguments);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.request.acceptsCharset"></a>[function <span class="apidocSignatureSpan">loopback.request.</span>acceptsCharset ()](#apidoc.element.loopback.request.acceptsCharset)
- description and source-code
```javascript
acceptsCharset = function () {
"use strict"
log.call(deprecate, message, site)
return fn.apply(this, arguments)
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.request.acceptsCharsets"></a>[function <span class="apidocSignatureSpan">loopback.request.</span>acceptsCharsets ()](#apidoc.element.loopback.request.acceptsCharsets)
- description and source-code
```javascript
acceptsCharsets = function (){
  var accept = accepts(this);
  return accept.charsets.apply(accept, arguments);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.request.acceptsEncoding"></a>[function <span class="apidocSignatureSpan">loopback.request.</span>acceptsEncoding ()](#apidoc.element.loopback.request.acceptsEncoding)
- description and source-code
```javascript
acceptsEncoding = function () {
"use strict"
log.call(deprecate, message, site)
return fn.apply(this, arguments)
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.request.acceptsEncodings"></a>[function <span class="apidocSignatureSpan">loopback.request.</span>acceptsEncodings ()](#apidoc.element.loopback.request.acceptsEncodings)
- description and source-code
```javascript
acceptsEncodings = function (){
  var accept = accepts(this);
  return accept.encodings.apply(accept, arguments);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.request.acceptsLanguage"></a>[function <span class="apidocSignatureSpan">loopback.request.</span>acceptsLanguage ()](#apidoc.element.loopback.request.acceptsLanguage)
- description and source-code
```javascript
acceptsLanguage = function () {
"use strict"
log.call(deprecate, message, site)
return fn.apply(this, arguments)
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.request.acceptsLanguages"></a>[function <span class="apidocSignatureSpan">loopback.request.</span>acceptsLanguages ()](#apidoc.element.loopback.request.acceptsLanguages)
- description and source-code
```javascript
acceptsLanguages = function (){
  var accept = accepts(this);
  return accept.languages.apply(accept, arguments);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.request.get"></a>[function <span class="apidocSignatureSpan">loopback.request.</span>get (name)](#apidoc.element.loopback.request.get)
- description and source-code
```javascript
function header(name) {
  if (!name) {
    throw new TypeError('name argument is required to req.get');
  }

  if (typeof name !== 'string') {
    throw new TypeError('name must be a string to req.get');
  }

  var lc = name.toLowerCase();

  switch (lc) {
    case 'referer':
    case 'referrer':
      return this.headers.referrer
        || this.headers.referer;
    default:
      return this.headers[lc];
  }
}
```
- example usage
```shell
...
* supports Express middleware. See
* [Express documentation](http://expressjs.com/) for details.
*
* '''js
* var loopback = require('loopback');
* var app = loopback();
*
* app.get('/', function(req, res){
*   res.send('hello world');
* });
*
* app.listen(3000);
* '''
*
* @class LoopBackApplication
...
```

#### <a name="apidoc.element.loopback.request.header"></a>[function <span class="apidocSignatureSpan">loopback.request.</span>header (name)](#apidoc.element.loopback.request.header)
- description and source-code
```javascript
function header(name) {
  if (!name) {
    throw new TypeError('name argument is required to req.get');
  }

  if (typeof name !== 'string') {
    throw new TypeError('name must be a string to req.get');
  }

  var lc = name.toLowerCase();

  switch (lc) {
    case 'referer':
    case 'referrer':
      return this.headers.referrer
        || this.headers.referer;
    default:
      return this.headers[lc];
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.request.is"></a>[function <span class="apidocSignatureSpan">loopback.request.</span>is (types)](#apidoc.element.loopback.request.is)
- description and source-code
```javascript
function is(types) {
  var arr = types;

  // support flattened arguments
  if (!Array.isArray(types)) {
    arr = new Array(arguments.length);
    for (var i = 0; i < arr.length; i++) {
      arr[i] = arguments[i];
    }
  }

  return typeis(this, arr);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.request.param"></a>[function <span class="apidocSignatureSpan">loopback.request.</span>param (name, defaultValue)](#apidoc.element.loopback.request.param)
- description and source-code
```javascript
function param(name, defaultValue) {
  var params = this.params || {};
  var body = this.body || {};
  var query = this.query || {};

  var args = arguments.length === 1
    ? 'name'
    : 'name, default';
  deprecate('req.param(' + args + '): Use req.params, req.body, or req.query instead');

  if (null != params[name] && params.hasOwnProperty(name)) return params[name];
  if (null != body[name]) return body[name];
  if (null != query[name]) return query[name];

  return defaultValue;
}
```
- example usage
```shell
...
  remotes.authorization = function(ctx, next) {
var method = ctx.method;
var req = ctx.req;
var Model = method.ctor;
var modelInstance = ctx.instance;

var modelId = modelInstance && modelInstance.id ||
  // replacement for deprecated req.param()
  (req.params && req.params.id !== undefined ? req.params.id :
   req.body && req.body.id !== undefined ? req.body.id :
   req.query && req.query.id !== undefined ? req.query.id :
   undefined);

var modelName = Model.modelName;
...
```

#### <a name="apidoc.element.loopback.request.range"></a>[function <span class="apidocSignatureSpan">loopback.request.</span>range (size, options)](#apidoc.element.loopback.request.range)
- description and source-code
```javascript
function range(size, options) {
  var range = this.get('Range');
  if (!range) return;
  return parseRange(size, range, options);
}
```
- example usage
```shell
n/a
```



# <a name="apidoc.module.loopback.response"></a>[module loopback.response](#apidoc.module.loopback.response)

#### <a name="apidoc.element.loopback.response.append"></a>[function <span class="apidocSignatureSpan">loopback.response.</span>append (field, val)](#apidoc.element.loopback.response.append)
- description and source-code
```javascript
function append(field, val) {
  var prev = this.get(field);
  var value = val;

  if (prev) {
    // concat the new and prev vals
    value = Array.isArray(prev) ? prev.concat(val)
      : Array.isArray(val) ? [prev].concat(val)
      : [prev, val];
  }

  return this.set(field, value);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.response.attachment"></a>[function <span class="apidocSignatureSpan">loopback.response.</span>attachment (filename)](#apidoc.element.loopback.response.attachment)
- description and source-code
```javascript
function attachment(filename) {
  if (filename) {
    this.type(extname(filename));
  }

  this.set('Content-Disposition', contentDisposition(filename));

  return this;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.response.clearCookie"></a>[function <span class="apidocSignatureSpan">loopback.response.</span>clearCookie (name, options)](#apidoc.element.loopback.response.clearCookie)
- description and source-code
```javascript
function clearCookie(name, options) {
  var opts = merge({ expires: new Date(1), path: '/' }, options);

  return this.cookie(name, '', opts);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.response.contentType"></a>[function <span class="apidocSignatureSpan">loopback.response.</span>contentType (type)](#apidoc.element.loopback.response.contentType)
- description and source-code
```javascript
function contentType(type) {
  var ct = type.indexOf('/') === -1
    ? mime.lookup(type)
    : type;

  return this.set('Content-Type', ct);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.response.cookie"></a>[function <span class="apidocSignatureSpan">loopback.response.</span>cookie (name, value, options)](#apidoc.element.loopback.response.cookie)
- description and source-code
```javascript
cookie = function (name, value, options) {
  var opts = merge({}, options);
  var secret = this.req.secret;
  var signed = opts.signed;

  if (signed && !secret) {
    throw new Error('cookieParser("secret") required for signed cookies');
  }

  var val = typeof value === 'object'
    ? 'j:' + JSON.stringify(value)
    : String(value);

  if (signed) {
    val = 's:' + sign(val, secret);
  }

  if ('maxAge' in opts) {
    opts.expires = new Date(Date.now() + opts.maxAge);
    opts.maxAge /= 1000;
  }

  if (opts.path == null) {
    opts.path = '/';
  }

  this.append('Set-Cookie', cookie.serialize(name, String(val), opts));

  return this;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.response.download"></a>[function <span class="apidocSignatureSpan">loopback.response.</span>download (path, filename, callback)](#apidoc.element.loopback.response.download)
- description and source-code
```javascript
function download(path, filename, callback) {
  var done = callback;
  var name = filename;

  // support function as second arg
  if (typeof filename === 'function') {
    done = filename;
    name = null;
  }

  // set Content-Disposition when file is sent
  var headers = {
    'Content-Disposition': contentDisposition(name || path)
  };

  // Resolve the full path for sendFile
  var fullPath = resolve(path);

  return this.sendFile(fullPath, { headers: headers }, done);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.response.format"></a>[function <span class="apidocSignatureSpan">loopback.response.</span>format (obj)](#apidoc.element.loopback.response.format)
- description and source-code
```javascript
format = function (obj){
  var req = this.req;
  var next = req.next;

  var fn = obj.default;
  if (fn) delete obj.default;
  var keys = Object.keys(obj);

  var key = keys.length > 0
    ? req.accepts(keys)
    : false;

  this.vary("Accept");

  if (key) {
    this.set('Content-Type', normalizeType(key).value);
    obj[key](req, this, next);
  } else if (fn) {
    fn();
  } else {
    var err = new Error('Not Acceptable');
    err.status = err.statusCode = 406;
    err.types = normalizeTypes(keys).map(function(o){ return o.value });
    next(err);
  }

  return this;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.response.get"></a>[function <span class="apidocSignatureSpan">loopback.response.</span>get (field)](#apidoc.element.loopback.response.get)
- description and source-code
```javascript
get = function (field){
  return this.getHeader(field);
}
```
- example usage
```shell
...
* supports Express middleware. See
* [Express documentation](http://expressjs.com/) for details.
*
* '''js
* var loopback = require('loopback');
* var app = loopback();
*
* app.get('/', function(req, res){
*   res.send('hello world');
* });
*
* app.listen(3000);
* '''
*
* @class LoopBackApplication
...
```

#### <a name="apidoc.element.loopback.response.header"></a>[function <span class="apidocSignatureSpan">loopback.response.</span>header (field, val)](#apidoc.element.loopback.response.header)
- description and source-code
```javascript
function header(field, val) {
  if (arguments.length === 2) {
    var value = Array.isArray(val)
      ? val.map(String)
      : String(val);

    // add charset to content-type
    if (field.toLowerCase() === 'content-type' && !charsetRegExp.test(value)) {
      var charset = mime.charsets.lookup(value.split(';')[0]);
      if (charset) value += '; charset=' + charset.toLowerCase();
    }

    this.setHeader(field, value);
  } else {
    for (var key in field) {
      this.set(key, field[key]);
    }
  }
  return this;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.response.json"></a>[function <span class="apidocSignatureSpan">loopback.response.</span>json (obj)](#apidoc.element.loopback.response.json)
- description and source-code
```javascript
function json(obj) {
  var val = obj;

  // allow status / body
  if (arguments.length === 2) {
    // res.json(body, status) backwards compat
    if (typeof arguments[1] === 'number') {
      deprecate('res.json(obj, status): Use res.status(status).json(obj) instead');
      this.statusCode = arguments[1];
    } else {
      deprecate('res.json(status, obj): Use res.status(status).json(obj) instead');
      this.statusCode = arguments[0];
      val = arguments[1];
    }
  }

  // settings
  var app = this.app;
  var replacer = app.get('json replacer');
  var spaces = app.get('json spaces');
  var body = stringify(val, replacer, spaces);

  // content-type
  if (!this.get('Content-Type')) {
    this.set('Content-Type', 'application/json');
  }

  return this.send(body);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.response.jsonp"></a>[function <span class="apidocSignatureSpan">loopback.response.</span>jsonp (obj)](#apidoc.element.loopback.response.jsonp)
- description and source-code
```javascript
function jsonp(obj) {
  var val = obj;

  // allow status / body
  if (arguments.length === 2) {
    // res.json(body, status) backwards compat
    if (typeof arguments[1] === 'number') {
      deprecate('res.jsonp(obj, status): Use res.status(status).json(obj) instead');
      this.statusCode = arguments[1];
    } else {
      deprecate('res.jsonp(status, obj): Use res.status(status).jsonp(obj) instead');
      this.statusCode = arguments[0];
      val = arguments[1];
    }
  }

  // settings
  var app = this.app;
  var replacer = app.get('json replacer');
  var spaces = app.get('json spaces');
  var body = stringify(val, replacer, spaces);
  var callback = this.req.query[app.get('jsonp callback name')];

  // content-type
  if (!this.get('Content-Type')) {
    this.set('X-Content-Type-Options', 'nosniff');
    this.set('Content-Type', 'application/json');
  }

  // fixup callback
  if (Array.isArray(callback)) {
    callback = callback[0];
  }

  // jsonp
  if (typeof callback === 'string' && callback.length !== 0) {
    this.charset = 'utf-8';
    this.set('X-Content-Type-Options', 'nosniff');
    this.set('Content-Type', 'text/javascript');

    // restrict callback charset
    callback = callback.replace(/[^\[\]\w$.]/g, '');

    // replace chars not allowed in JavaScript that are in JSON
    body = body
      .replace(/\u2028/g, '\\u2028')
      .replace(/\u2029/g, '\\u2029');

    // the /**/ is a specific security mitigation for "Rosetta Flash JSONP abuse"
    // the typeof check is just to reduce client error noise
    body = '/**/ typeof ' + callback + ' === \'function\' && ' + callback + '(' + body + ');';
  }

  return this.send(body);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.response.links"></a>[function <span class="apidocSignatureSpan">loopback.response.</span>links (links)](#apidoc.element.loopback.response.links)
- description and source-code
```javascript
links = function (links){
  var link = this.get('Link') || '';
  if (link) link += ', ';
  return this.set('Link', link + Object.keys(links).map(function(rel){
    return '<' + links[rel] + '>; rel="' + rel + '"';
  }).join(', '));
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.response.location"></a>[function <span class="apidocSignatureSpan">loopback.response.</span>location (url)](#apidoc.element.loopback.response.location)
- description and source-code
```javascript
function location(url) {
  var loc = url;

  // "back" is an alias for the referrer
  if (url === 'back') {
    loc = this.req.get('Referrer') || '/';
  }

  // set location
  return this.set('Location', encodeUrl(loc));
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.response.redirect"></a>[function <span class="apidocSignatureSpan">loopback.response.</span>redirect (url)](#apidoc.element.loopback.response.redirect)
- description and source-code
```javascript
function redirect(url) {
  var address = url;
  var body;
  var status = 302;

  // allow status / url
  if (arguments.length === 2) {
    if (typeof arguments[0] === 'number') {
      status = arguments[0];
      address = arguments[1];
    } else {
      deprecate('res.redirect(url, status): Use res.redirect(status, url) instead');
      status = arguments[1];
    }
  }

  // Set location header
  address = this.location(address).get('Location');

  // Support text/{plain,html} by default
  this.format({
    text: function(){
      body = statuses[status] + '. Redirecting to ' + address
    },

    html: function(){
      var u = escapeHtml(address);
      body = '<p>' + statuses[status] + '. Redirecting to <a href="' + u + '">' + u + '</a></p>'
    },

    default: function(){
      body = '';
    }
  });

  // Respond
  this.statusCode = status;
  this.set('Content-Length', Buffer.byteLength(body));

  if (this.req.method === 'HEAD') {
    this.end();
  } else {
    this.end(body);
  }
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.response.render"></a>[function <span class="apidocSignatureSpan">loopback.response.</span>render (view, options, callback)](#apidoc.element.loopback.response.render)
- description and source-code
```javascript
function render(view, options, callback) {
  var app = this.req.app;
  var done = callback;
  var opts = options || {};
  var req = this.req;
  var self = this;

  // support callback function as second arg
  if (typeof options === 'function') {
    done = options;
    opts = {};
  }

  // merge res.locals
  opts._locals = self.locals;

  // default callback to respond
  done = done || function (err, str) {
    if (err) return req.next(err);
    self.send(str);
  };

  // render
  app.render(view, opts, done);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.response.send"></a>[function <span class="apidocSignatureSpan">loopback.response.</span>send (body)](#apidoc.element.loopback.response.send)
- description and source-code
```javascript
function send(body) {
  var chunk = body;
  var encoding;
  var len;
  var req = this.req;
  var type;

  // settings
  var app = this.app;

  // allow status / body
  if (arguments.length === 2) {
    // res.send(body, status) backwards compat
    if (typeof arguments[0] !== 'number' && typeof arguments[1] === 'number') {
      deprecate('res.send(body, status): Use res.status(status).send(body) instead');
      this.statusCode = arguments[1];
    } else {
      deprecate('res.send(status, body): Use res.status(status).send(body) instead');
      this.statusCode = arguments[0];
      chunk = arguments[1];
    }
  }

  // disambiguate res.send(status) and res.send(status, num)
  if (typeof chunk === 'number' && arguments.length === 1) {
    // res.send(status) will set status message as text string
    if (!this.get('Content-Type')) {
      this.type('txt');
    }

    deprecate('res.send(status): Use res.sendStatus(status) instead');
    this.statusCode = chunk;
    chunk = statuses[chunk]
  }

  switch (typeof chunk) {
    // string defaulting to html
    case 'string':
      if (!this.get('Content-Type')) {
        this.type('html');
      }
      break;
    case 'boolean':
    case 'number':
    case 'object':
      if (chunk === null) {
        chunk = '';
      } else if (Buffer.isBuffer(chunk)) {
        if (!this.get('Content-Type')) {
          this.type('bin');
        }
      } else {
        return this.json(chunk);
      }
      break;
  }

  // write strings in utf-8
  if (typeof chunk === 'string') {
    encoding = 'utf8';
    type = this.get('Content-Type');

    // reflect this in content-type
    if (typeof type === 'string') {
      this.set('Content-Type', setCharset(type, 'utf-8'));
    }
  }

  // populate Content-Length
  if (chunk !== undefined) {
    if (!Buffer.isBuffer(chunk)) {
      // convert chunk to Buffer; saves later double conversions
      chunk = new Buffer(chunk, encoding);
      encoding = undefined;
    }

    len = chunk.length;
    this.set('Content-Length', len);
  }

  // populate ETag
  var etag;
  var generateETag = len !== undefined && app.get('etag fn');
  if (typeof generateETag === 'function' && !this.get('ETag')) {
    if ((etag = generateETag(chunk, encoding))) {
      this.set('ETag', etag);
    }
  }

  // freshness
  if (req.fresh) this.statusCode = 304;

  // strip irrelevant headers
  if (204 === this.statusCode || 304 === this.statusCode) {
    this.removeHeader('Content-Type');
    this.removeHeader('Content-Length');
    this.removeHeader('Transfer-Encoding');
    chunk = '';
  }

  if (req.method === 'HEAD') {
    // skip body for HEAD
    this.end();
  } else {
    // respond
    this.end(chunk, encoding);
  }

  return this;
}
```
- example usage
```shell
...
* [Express documentation](http://expressjs.com/) for details.
*
* '''js
* var loopback = require('loopback');
* var app = loopback();
*
* app.get('/', function(req, res){
*   res.send('hello world');
* });
*
* app.listen(3000);
* '''
*
* @class LoopBackApplication
* @header var app = loopback()
...
```

#### <a name="apidoc.element.loopback.response.sendFile"></a>[function <span class="apidocSignatureSpan">loopback.response.</span>sendFile (path, options, callback)](#apidoc.element.loopback.response.sendFile)
- description and source-code
```javascript
function sendFile(path, options, callback) {
  var done = callback;
  var req = this.req;
  var res = this;
  var next = req.next;
  var opts = options || {};

  if (!path) {
    throw new TypeError('path argument is required to res.sendFile');
  }

  // support function as second arg
  if (typeof options === 'function') {
    done = options;
    opts = {};
  }

  if (!opts.root && !isAbsolute(path)) {
    throw new TypeError('path must be absolute or specify root to res.sendFile');
  }

  // create file stream
  var pathname = encodeURI(path);
  var file = send(req, pathname, opts);

  // transfer
  sendfile(res, file, opts, function (err) {
    if (done) return done(err);
    if (err && err.code === 'EISDIR') return next();

    // next() all but write errors
    if (err && err.code !== 'ECONNABORTED' && err.syscall !== 'write') {
      next(err);
    }
  });
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.response.sendStatus"></a>[function <span class="apidocSignatureSpan">loopback.response.</span>sendStatus (statusCode)](#apidoc.element.loopback.response.sendStatus)
- description and source-code
```javascript
function sendStatus(statusCode) {
  var body = statuses[statusCode] || String(statusCode)

  this.statusCode = statusCode;
  this.type('txt');

  return this.send(body);
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.response.sendfile"></a>[function <span class="apidocSignatureSpan">loopback.response.</span>sendfile (arg0, arg1, arg2)](#apidoc.element.loopback.response.sendfile)
- description and source-code
```javascript
sendfile = function (arg0, arg1, arg2) {
"use strict"
log.call(deprecate, message, site)
return fn.apply(this, arguments)
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.response.set"></a>[function <span class="apidocSignatureSpan">loopback.response.</span>set (field, val)](#apidoc.element.loopback.response.set)
- description and source-code
```javascript
function header(field, val) {
  if (arguments.length === 2) {
    var value = Array.isArray(val)
      ? val.map(String)
      : String(val);

    // add charset to content-type
    if (field.toLowerCase() === 'content-type' && !charsetRegExp.test(value)) {
      var charset = mime.charsets.lookup(value.split(';')[0]);
      if (charset) value += '; charset=' + charset.toLowerCase();
    }

    this.setHeader(field, value);
  } else {
    for (var key in field) {
      this.set(key, field[key]);
    }
  }
  return this;
}
```
- example usage
```shell
...
*
* For example, to listen on the specified port and all hosts, and ignore app config.
* '''js
* app.listen(80);
* '''
*
* The function also installs a 'listening' callback that calls
* 'app.set('port')' with the value returned by 'server.address().port'.
* This way the port param contains always the real port number, even when
* listen was called with port number 0.
*
* @param {Function} [cb] If specified, the callback is added as a listener
*   for the server's "listening" event.
* @returns {http.Server} A node 'http.Server' with this application configured
*   as the request handler.
...
```

#### <a name="apidoc.element.loopback.response.status"></a>[function <span class="apidocSignatureSpan">loopback.response.</span>status (code)](#apidoc.element.loopback.response.status)
- description and source-code
```javascript
function status(code) {
  this.statusCode = code;
  return this;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.response.type"></a>[function <span class="apidocSignatureSpan">loopback.response.</span>type (type)](#apidoc.element.loopback.response.type)
- description and source-code
```javascript
function contentType(type) {
  var ct = type.indexOf('/') === -1
    ? mime.lookup(type)
    : type;

  return this.set('Content-Type', ct);
}
```
- example usage
```shell
...
    filter.where[idName] = {inq: ids};
    model.find(filter, function(err, models) {
      if (err) return callback(err);
      var modelIds = models.map(function(m) {
        return m[idName].toString();
      });
      callback(null, changes.filter(function(ch) {
        if (ch.type() === Change.DELETE) return true;
        return modelIds.indexOf(ch.modelId) > -1;
      }));
    });
  });
};

/**
...
```

#### <a name="apidoc.element.loopback.response.vary"></a>[function <span class="apidocSignatureSpan">loopback.response.</span>vary (field)](#apidoc.element.loopback.response.vary)
- description and source-code
```javascript
vary = function (field){
  // checks for back-compat
  if (!field || (Array.isArray(field) && !field.length)) {
    deprecate('res.vary(): Provide a field name');
    return this;
  }

  vary(this, field);

  return this;
}
```
- example usage
```shell
n/a
```



# <a name="apidoc.module.loopback.utils"></a>[module loopback.utils](#apidoc.module.loopback.utils)

#### <a name="apidoc.element.loopback.utils.concatResults"></a>[function <span class="apidocSignatureSpan">loopback.utils.</span>concatResults (previousResults, currentResults)](#apidoc.element.loopback.utils.concatResults)
- description and source-code
```javascript
function concatResults(previousResults, currentResults) {
  if (Array.isArray(currentResults)) {
    previousResults = previousResults.concat(currentResults);
  } else if (typeof currentResults === 'object') {
    Object.keys(currentResults).forEach(function(key) {
      previousResults[key] = concatResults(previousResults[key], currentResults[key]);
    });
  } else {
    previousResults = currentResults;
  }

  return previousResults;
}
```
- example usage
```shell
n/a
```

#### <a name="apidoc.element.loopback.utils.createPromiseCallback"></a>[function <span class="apidocSignatureSpan">loopback.utils.</span>createPromiseCallback ()](#apidoc.element.loopback.utils.createPromiseCallback)
- description and source-code
```javascript
function createPromiseCallback() {
  var cb;
  var promise = new Promise(function(resolve, reject) {
    cb = function(err, data) {
      if (err) return reject(err);
      return resolve(data);
    };
  });
  cb.promise = promise;
  return cb;
}
```
- example usage
```shell
...
if (typeof options === 'function') {
  options = {};
}

options = options || {};

var sourceModel = this;
callback = callback || utils.createPromiseCallback();

debug('replicating %s since %s to %s since %s',
  sourceModel.modelName,
  since.source,
  targetModel.modelName,
  since.target);
if (options.filter) {
...
```

#### <a name="apidoc.element.loopback.utils.downloadInChunks"></a>[function <span class="apidocSignatureSpan">loopback.utils.</span>downloadInChunks (filter, chunkSize, processFunction, cb)](#apidoc.element.loopback.utils.downloadInChunks)
- description and source-code
```javascript
function downloadInChunks(filter, chunkSize, processFunction, cb) {
  var results = [];
  filter = filter ? JSON.parse(JSON.stringify(filter)) : {};

  if (!chunkSize || chunkSize < 1) {
    // if chunking not required
    processFunction(filter, cb);
  } else {
    filter.skip = 0;
    filter.limit = chunkSize;

    processFunction(JSON.parse(JSON.stringify(filter)), pageAndConcatResults);
  }

  function pageAndConcatResults(err, pagedResults) {
    if (err) {
      return cb(err);
    } else {
      results = concatResults(results, pagedResults);
      if (pagedResults.length >= chunkSize) {
        filter.skip += pagedResults.length;
        processFunction(JSON.parse(JSON.stringify(filter)), pageAndConcatResults);
      } else {
        cb(null, results);
      }
    }
  }
}
```
- example usage
```shell
...
  createSourceUpdates,
  bulkUpdate,
];

async.waterfall(tasks, done);

function getSourceChanges(cb) {
  utils.downloadInChunks(
    options.filter,
    replicationChunkSize,
    function(filter, pagingCallback) {
      sourceModel.changes(since.source, filter, pagingCallback);
    },
    debug.enabled ? log : cb);
...
```

#### <a name="apidoc.element.loopback.utils.uploadInChunks"></a>[function <span class="apidocSignatureSpan">loopback.utils.</span>uploadInChunks (largeArray, chunkSize, processFunction, cb)](#apidoc.element.loopback.utils.uploadInChunks)
- description and source-code
```javascript
function uploadInChunks(largeArray, chunkSize, processFunction, cb) {
  var chunkArrays = [];

  if (!chunkSize || chunkSize < 1 || largeArray.length <= chunkSize) {
    // if chunking not required
    processFunction(largeArray, cb);
  } else {
    // copying so that the largeArray object does not get affected during splice
    var copyOfLargeArray = [].concat(largeArray);

    // chunking to smaller arrays
    while (copyOfLargeArray.length > 0) {
      chunkArrays.push(copyOfLargeArray.splice(0, chunkSize));
    }

    var tasks = chunkArrays.map(function(chunkArray) {
      return function(previousResults, chunkCallback) {
        var lastArg = arguments[arguments.length - 1];

        if (typeof lastArg === 'function') {
          chunkCallback = lastArg;
        }

        processFunction(chunkArray, function(err, results) {
          if (err) {
            return chunkCallback(err);
          }

          // if this is the first async waterfall call or if previous results was not defined
          if (typeof previousResults === 'function' || typeof previousResults === 'undefined' ||
            previousResults === null) {
            previousResults = results;
          } else if (results) {
            previousResults = concatResults(previousResults, results);
          }

          chunkCallback(err, previousResults);
        });
      };
    });

    async.waterfall(tasks, cb);
  }
}
```
- example usage
```shell
...
    debug('\tusing source changes');
    result.forEach(function(it) { debug('\t\t%j', it); });
    cb(err, result);
  }
}

function getDiffFromTarget(sourceChanges, cb) {
  utils.uploadInChunks(
    sourceChanges,
    replicationChunkSize,
    function(smallArray, chunkCallback) {
      return targetModel.diff(since.target, smallArray, chunkCallback);
    },
    debug.enabled ? log : cb);
...
```



# misc
- this document was created with [utility2](https://github.com/kaizhu256/node-utility2)
